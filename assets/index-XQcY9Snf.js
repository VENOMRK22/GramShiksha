var jD=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Gie=jD((Ws,Xs)=>{function p6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function So(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zy={exports:{}},Ah={};var P4;function PD(){if(P4)return Ah;P4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var u=null;if(a!==void 0&&(u=""+a),i.key!==void 0&&(u=""+i.key),"key"in i){a={};for(var p in i)p!=="key"&&(a[p]=i[p])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:u,ref:i!==void 0?i:null,props:a}}return Ah.Fragment=e,Ah.jsx=n,Ah.jsxs=n,Ah}var B4;function BD(){return B4||(B4=1,zy.exports=PD()),zy.exports}var O=BD(),Fy={exports:{}},Ch={},qy={exports:{}},$y={};var U4;function UD(){return U4||(U4=1,(function(t){function e(ee,de){var we=ee.length;ee.push(de);e:for(;0<we;){var Oe=we-1>>>1,pe=ee[Oe];if(0<i(pe,de))ee[Oe]=de,ee[we]=pe,we=Oe;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var de=ee[0],we=ee.pop();if(we!==de){ee[0]=we;e:for(var Oe=0,pe=ee.length,K=pe>>>1;Oe<K;){var oe=2*(Oe+1)-1,ae=ee[oe],Y=oe+1,ie=ee[Y];if(0>i(ae,we))Y<pe&&0>i(ie,ae)?(ee[Oe]=ie,ee[Y]=we,Oe=Y):(ee[Oe]=ae,ee[oe]=we,Oe=oe);else if(Y<pe&&0>i(ie,we))ee[Oe]=ie,ee[Y]=we,Oe=Y;else break e}}return de}function i(ee,de){var we=ee.sortIndex-de.sortIndex;return we!==0?we:ee.id-de.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,p=u.now();t.unstable_now=function(){return u.now()-p}}var g=[],y=[],w=1,S=null,_=3,C=!1,N=!1,R=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function $(ee){for(var de=n(y);de!==null;){if(de.callback===null)r(y);else if(de.startTime<=ee)r(y),de.sortIndex=de.expirationTime,e(g,de);else break;de=n(y)}}function U(ee){if(R=!1,$(ee),!N)if(n(g)!==null)N=!0,F||(F=!0,ce());else{var de=n(y);de!==null&&ue(U,de.startTime-ee)}}var F=!1,B=-1,Z=5,le=-1;function Ne(){return M?!0:!(t.unstable_now()-le<Z)}function G(){if(M=!1,F){var ee=t.unstable_now();le=ee;var de=!0;try{e:{N=!1,R&&(R=!1,k(B),B=-1),C=!0;var we=_;try{t:{for($(ee),S=n(g);S!==null&&!(S.expirationTime>ee&&Ne());){var Oe=S.callback;if(typeof Oe=="function"){S.callback=null,_=S.priorityLevel;var pe=Oe(S.expirationTime<=ee);if(ee=t.unstable_now(),typeof pe=="function"){S.callback=pe,$(ee),de=!0;break t}S===n(g)&&r(g),$(ee)}else r(g);S=n(g)}if(S!==null)de=!0;else{var K=n(y);K!==null&&ue(U,K.startTime-ee),de=!1}}break e}finally{S=null,_=we,C=!1}de=void 0}}finally{de?ce():F=!1}}}var ce;if(typeof j=="function")ce=function(){j(G)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Ee=se.port2;se.port1.onmessage=G,ce=function(){Ee.postMessage(null)}}else ce=function(){L(G,0)};function ue(ee,de){B=L(function(){ee(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(ee){switch(_){case 1:case 2:case 3:var de=3;break;default:de=_}var we=_;_=de;try{return ee()}finally{_=we}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var we=_;_=ee;try{return de()}finally{_=we}},t.unstable_scheduleCallback=function(ee,de,we){var Oe=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Oe+we:Oe):we=Oe,ee){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=we+pe,ee={id:w++,callback:de,priorityLevel:ee,startTime:we,expirationTime:pe,sortIndex:-1},we>Oe?(ee.sortIndex=we,e(y,ee),n(g)===null&&ee===n(y)&&(R?(k(B),B=-1):R=!0,ue(U,we-Oe))):(ee.sortIndex=pe,e(g,ee),N||C||(N=!0,F||(F=!0,ce()))),ee},t.unstable_shouldYield=Ne,t.unstable_wrapCallback=function(ee){var de=_;return function(){var we=_;_=de;try{return ee.apply(this,arguments)}finally{_=we}}}})($y)),$y}var z4;function zD(){return z4||(z4=1,qy.exports=UD()),qy.exports}var Vy={exports:{}},mn={};var F4;function FD(){if(F4)return mn;F4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),_=Symbol.iterator;function C(K){return K===null||typeof K!="object"?null:(K=_&&K[_]||K["@@iterator"],typeof K=="function"?K:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,M={};function L(K,oe,ae){this.props=K,this.context=oe,this.refs=M,this.updater=ae||N}L.prototype.isReactComponent={},L.prototype.setState=function(K,oe){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,oe,"setState")},L.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function k(){}k.prototype=L.prototype;function j(K,oe,ae){this.props=K,this.context=oe,this.refs=M,this.updater=ae||N}var $=j.prototype=new k;$.constructor=j,R($,L.prototype),$.isPureReactComponent=!0;var U=Array.isArray;function F(){}var B={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function le(K,oe,ae){var Y=ae.ref;return{$$typeof:t,type:K,key:oe,ref:Y!==void 0?Y:null,props:ae}}function Ne(K,oe){return le(K.type,oe,K.props)}function G(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function ce(K){var oe={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ae){return oe[ae]})}var se=/\/+/g;function Ee(K,oe){return typeof K=="object"&&K!==null&&K.key!=null?ce(""+K.key):oe.toString(36)}function ue(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(F,F):(K.status="pending",K.then(function(oe){K.status==="pending"&&(K.status="fulfilled",K.value=oe)},function(oe){K.status==="pending"&&(K.status="rejected",K.reason=oe)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function ee(K,oe,ae,Y,ie){var be=typeof K;(be==="undefined"||be==="boolean")&&(K=null);var Ye=!1;if(K===null)Ye=!0;else switch(be){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(K.$$typeof){case t:case e:Ye=!0;break;case w:return Ye=K._init,ee(Ye(K._payload),oe,ae,Y,ie)}}if(Ye)return ie=ie(K),Ye=Y===""?"."+Ee(K,0):Y,U(ie)?(ae="",Ye!=null&&(ae=Ye.replace(se,"$&/")+"/"),ee(ie,oe,ae,"",function(bt){return bt})):ie!=null&&(G(ie)&&(ie=Ne(ie,ae+(ie.key==null||K&&K.key===ie.key?"":(""+ie.key).replace(se,"$&/")+"/")+Ye)),oe.push(ie)),1;Ye=0;var Ve=Y===""?".":Y+":";if(U(K))for(var $e=0;$e<K.length;$e++)Y=K[$e],be=Ve+Ee(Y,$e),Ye+=ee(Y,oe,ae,be,ie);else if($e=C(K),typeof $e=="function")for(K=$e.call(K),$e=0;!(Y=K.next()).done;)Y=Y.value,be=Ve+Ee(Y,$e++),Ye+=ee(Y,oe,ae,be,ie);else if(be==="object"){if(typeof K.then=="function")return ee(ue(K),oe,ae,Y,ie);throw oe=String(K),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function de(K,oe,ae){if(K==null)return K;var Y=[],ie=0;return ee(K,Y,"","",function(be){return oe.call(ae,be,ie++)}),Y}function we(K){if(K._status===-1){var oe=K._result;oe=oe(),oe.then(function(ae){(K._status===0||K._status===-1)&&(K._status=1,K._result=ae)},function(ae){(K._status===0||K._status===-1)&&(K._status=2,K._result=ae)}),K._status===-1&&(K._status=0,K._result=oe)}if(K._status===1)return K._result.default;throw K._result}var Oe=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},pe={map:de,forEach:function(K,oe,ae){de(K,function(){oe.apply(this,arguments)},ae)},count:function(K){var oe=0;return de(K,function(){oe++}),oe},toArray:function(K){return de(K,function(oe){return oe})||[]},only:function(K){if(!G(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return mn.Activity=S,mn.Children=pe,mn.Component=L,mn.Fragment=n,mn.Profiler=i,mn.PureComponent=j,mn.StrictMode=r,mn.Suspense=g,mn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,mn.__COMPILER_RUNTIME={__proto__:null,c:function(K){return B.H.useMemoCache(K)}},mn.cache=function(K){return function(){return K.apply(null,arguments)}},mn.cacheSignal=function(){return null},mn.cloneElement=function(K,oe,ae){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Y=R({},K.props),ie=K.key;if(oe!=null)for(be in oe.key!==void 0&&(ie=""+oe.key),oe)!Z.call(oe,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&oe.ref===void 0||(Y[be]=oe[be]);var be=arguments.length-2;if(be===1)Y.children=ae;else if(1<be){for(var Ye=Array(be),Ve=0;Ve<be;Ve++)Ye[Ve]=arguments[Ve+2];Y.children=Ye}return le(K.type,ie,Y)},mn.createContext=function(K){return K={$$typeof:u,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:a,_context:K},K},mn.createElement=function(K,oe,ae){var Y,ie={},be=null;if(oe!=null)for(Y in oe.key!==void 0&&(be=""+oe.key),oe)Z.call(oe,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ie[Y]=oe[Y]);var Ye=arguments.length-2;if(Ye===1)ie.children=ae;else if(1<Ye){for(var Ve=Array(Ye),$e=0;$e<Ye;$e++)Ve[$e]=arguments[$e+2];ie.children=Ve}if(K&&K.defaultProps)for(Y in Ye=K.defaultProps,Ye)ie[Y]===void 0&&(ie[Y]=Ye[Y]);return le(K,be,ie)},mn.createRef=function(){return{current:null}},mn.forwardRef=function(K){return{$$typeof:p,render:K}},mn.isValidElement=G,mn.lazy=function(K){return{$$typeof:w,_payload:{_status:-1,_result:K},_init:we}},mn.memo=function(K,oe){return{$$typeof:y,type:K,compare:oe===void 0?null:oe}},mn.startTransition=function(K){var oe=B.T,ae={};B.T=ae;try{var Y=K(),ie=B.S;ie!==null&&ie(ae,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(F,Oe)}catch(be){Oe(be)}finally{oe!==null&&ae.types!==null&&(oe.types=ae.types),B.T=oe}},mn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},mn.use=function(K){return B.H.use(K)},mn.useActionState=function(K,oe,ae){return B.H.useActionState(K,oe,ae)},mn.useCallback=function(K,oe){return B.H.useCallback(K,oe)},mn.useContext=function(K){return B.H.useContext(K)},mn.useDebugValue=function(){},mn.useDeferredValue=function(K,oe){return B.H.useDeferredValue(K,oe)},mn.useEffect=function(K,oe){return B.H.useEffect(K,oe)},mn.useEffectEvent=function(K){return B.H.useEffectEvent(K)},mn.useId=function(){return B.H.useId()},mn.useImperativeHandle=function(K,oe,ae){return B.H.useImperativeHandle(K,oe,ae)},mn.useInsertionEffect=function(K,oe){return B.H.useInsertionEffect(K,oe)},mn.useLayoutEffect=function(K,oe){return B.H.useLayoutEffect(K,oe)},mn.useMemo=function(K,oe){return B.H.useMemo(K,oe)},mn.useOptimistic=function(K,oe){return B.H.useOptimistic(K,oe)},mn.useReducer=function(K,oe,ae){return B.H.useReducer(K,oe,ae)},mn.useRef=function(K){return B.H.useRef(K)},mn.useState=function(K){return B.H.useState(K)},mn.useSyncExternalStore=function(K,oe,ae){return B.H.useSyncExternalStore(K,oe,ae)},mn.useTransition=function(){return B.H.useTransition()},mn.version="19.2.3",mn}var q4;function jf(){return q4||(q4=1,Vy.exports=FD()),Vy.exports}var Hy={exports:{}},es={};var $4;function qD(){if($4)return es;$4=1;var t=jf();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(g,y,w){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:S==null?null:""+S,children:g,containerInfo:y,implementation:w}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,es.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return a(g,y,null,w)},es.flushSync=function(g){var y=u.T,w=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=y,r.p=w,r.d.f()}},es.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},es.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},es.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,S=p(w,y.crossOrigin),_=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:_,fetchPriority:C}):w==="script"&&r.d.X(g,{crossOrigin:S,integrity:_,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},es.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},es.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,S=p(w,y.crossOrigin);r.d.L(g,w,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},es.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},es.requestFormReset=function(g){r.d.r(g)},es.unstable_batchedUpdates=function(g,y){return g(y)},es.useFormState=function(g,y,w){return u.H.useFormState(g,y,w)},es.useFormStatus=function(){return u.H.useHostTransitionStatus()},es.version="19.2.3",es}var V4;function m6(){if(V4)return Hy.exports;V4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hy.exports=qD(),Hy.exports}var H4;function $D(){if(H4)return Ch;H4=1;var t=zD(),e=jf(),n=m6();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)l+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,m=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(m=l.return),s=l.return;while(s)}return l.tag===3?m:null}function u(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function p(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function g(s){if(a(s)!==s)throw Error(r(188))}function y(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var m=s,E=l;;){var T=m.return;if(T===null)break;var D=T.alternate;if(D===null){if(E=T.return,E!==null){m=E;continue}break}if(T.child===D.child){for(D=T.child;D;){if(D===m)return g(T),s;if(D===E)return g(T),l;D=D.sibling}throw Error(r(188))}if(m.return!==E.return)m=T,E=D;else{for(var V=!1,te=T.child;te;){if(te===m){V=!0,m=T,E=D;break}if(te===E){V=!0,E=T,m=D;break}te=te.sibling}if(!V){for(te=D.child;te;){if(te===m){V=!0,m=D,E=T;break}if(te===E){V=!0,E=D,m=T;break}te=te.sibling}if(!V)throw Error(r(189))}}if(m.alternate!==E)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?s:l}function w(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=w(s),l!==null)return l;s=s.sibling}return null}var S=Object.assign,_=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),j=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),Ne=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function ce(s){return s===null||typeof s!="object"?null:(s=G&&s[G]||s["@@iterator"],typeof s=="function"?s:null)}var se=Symbol.for("react.client.reference");function Ee(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===se?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case L:return"Profiler";case M:return"StrictMode";case U:return"Suspense";case F:return"SuspenseList";case le:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case N:return"Portal";case j:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case $:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return l=s.displayName||null,l!==null?l:Ee(s.type)||"Memo";case Z:l=s._payload,s=s._init;try{return Ee(s(l))}catch{}}return null}var ue=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Oe=[],pe=-1;function K(s){return{current:s}}function oe(s){0>pe||(s.current=Oe[pe],Oe[pe]=null,pe--)}function ae(s,l){pe++,Oe[pe]=s.current,s.current=l}var Y=K(null),ie=K(null),be=K(null),Ye=K(null);function Ve(s,l){switch(ae(be,l),ae(ie,s),ae(Y,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?a4(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=a4(l),s=o4(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(Y),ae(Y,s)}function $e(){oe(Y),oe(ie),oe(be)}function bt(s){s.memoizedState!==null&&ae(Ye,s);var l=Y.current,m=o4(l,s.type);l!==m&&(ae(ie,s),ae(Y,m))}function xe(s){ie.current===s&&(oe(Y),oe(ie)),Ye.current===s&&(oe(Ye),Eh._currentValue=we)}var Se,Me;function Qe(s){if(Se===void 0)try{throw Error()}catch(m){var l=m.stack.trim().match(/\n( *(at )?)/);Se=l&&l[1]||"",Me=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+s+Me}var ct=!1;function Mt(s,l){if(!s||ct)return"";ct=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(l){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(He){var Fe=He}Reflect.construct(s,[],it)}else{try{it.call()}catch(He){Fe=He}s.call(it.prototype)}}else{try{throw Error()}catch(He){Fe=He}(it=s())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(He){if(He&&Fe&&typeof He.stack=="string")return[He.stack,Fe.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=E.DetermineComponentFrameRoot(),V=D[0],te=D[1];if(V&&te){var Ae=V.split(`
`),Be=te.split(`
`);for(T=E=0;E<Ae.length&&!Ae[E].includes("DetermineComponentFrameRoot");)E++;for(;T<Be.length&&!Be[T].includes("DetermineComponentFrameRoot");)T++;if(E===Ae.length||T===Be.length)for(E=Ae.length-1,T=Be.length-1;1<=E&&0<=T&&Ae[E]!==Be[T];)T--;for(;1<=E&&0<=T;E--,T--)if(Ae[E]!==Be[T]){if(E!==1||T!==1)do if(E--,T--,0>T||Ae[E]!==Be[T]){var Xe=`
`+Ae[E].replace(" at new "," at ");return s.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",s.displayName)),Xe}while(1<=E&&0<=T);break}}}finally{ct=!1,Error.prepareStackTrace=m}return(m=s?s.displayName||s.name:"")?Qe(m):""}function ln(s,l){switch(s.tag){case 26:case 27:case 5:return Qe(s.type);case 16:return Qe("Lazy");case 13:return s.child!==l&&l!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return Mt(s.type,!1);case 11:return Mt(s.type.render,!1);case 1:return Mt(s.type,!0);case 31:return Qe("Activity");default:return""}}function Zt(s){try{var l="",m=null;do l+=ln(s,m),m=s,s=s.return;while(s);return l}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var jt=Object.prototype.hasOwnProperty,jn=t.unstable_scheduleCallback,ot=t.unstable_cancelCallback,Wr=t.unstable_shouldYield,nr=t.unstable_requestPaint,Jt=t.unstable_now,gr=t.unstable_getCurrentPriorityLevel,zn=t.unstable_ImmediatePriority,jr=t.unstable_UserBlockingPriority,Cn=t.unstable_NormalPriority,xn=t.unstable_LowPriority,yr=t.unstable_IdlePriority,fi=t.log,zi=t.unstable_setDisableYieldValue,Pn=null,et=null;function ft(s){if(typeof fi=="function"&&zi(s),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Pn,s)}catch{}}var Ft=Math.clz32?Math.clz32:dt,vn=Math.log,ni=Math.LN2;function dt(s){return s>>>=0,s===0?32:31-(vn(s)/ni|0)|0}var Xr=256,rn=262144,vr=4194304;function hi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ri(s,l,m){var E=s.pendingLanes;if(E===0)return 0;var T=0,D=s.suspendedLanes,V=s.pingedLanes;s=s.warmLanes;var te=E&134217727;return te!==0?(E=te&~D,E!==0?T=hi(E):(V&=te,V!==0?T=hi(V):m||(m=te&~s,m!==0&&(T=hi(m))))):(te=E&~D,te!==0?T=hi(te):V!==0?T=hi(V):m||(m=E&~s,m!==0&&(T=hi(m)))),T===0?0:l!==0&&l!==T&&(l&D)===0&&(D=T&-T,m=l&-l,D>=m||D===32&&(m&4194048)!==0)?l:T}function Or(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Ji(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(){var s=vr;return vr<<=1,(vr&62914560)===0&&(vr=4194304),s}function Jn(s){for(var l=[],m=0;31>m;m++)l.push(s);return l}function ii(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ir(s,l,m,E,T,D){var V=s.pendingLanes;s.pendingLanes=m,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=m,s.entangledLanes&=m,s.errorRecoveryDisabledLanes&=m,s.shellSuspendCounter=0;var te=s.entanglements,Ae=s.expirationTimes,Be=s.hiddenUpdates;for(m=V&~m;0<m;){var Xe=31-Ft(m),it=1<<Xe;te[Xe]=0,Ae[Xe]=-1;var Fe=Be[Xe];if(Fe!==null)for(Be[Xe]=null,Xe=0;Xe<Fe.length;Xe++){var He=Fe[Xe];He!==null&&(He.lane&=-536870913)}m&=~it}E!==0&&Fn(s,E,0),D!==0&&T===0&&s.tag!==0&&(s.suspendedLanes|=D&~(V&~l))}function Fn(s,l,m){s.pendingLanes|=l,s.suspendedLanes&=~l;var E=31-Ft(l);s.entangledLanes|=l,s.entanglements[E]=s.entanglements[E]|1073741824|m&261930}function ve(s,l){var m=s.entangledLanes|=l;for(s=s.entanglements;m;){var E=31-Ft(m),T=1<<E;T&l|s[E]&l&&(s[E]|=l),m&=~T}}function Ie(s,l){var m=l&-l;return m=(m&42)!==0?1:Le(m),(m&(s.suspendedLanes|l))!==0?0:m}function Le(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function nt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Je(){var s=de.p;return s!==0?s:(s=window.event,s===void 0?32:R4(s.type))}function Ge(s,l){var m=de.p;try{return de.p=s,l()}finally{de.p=m}}var pt=Math.random().toString(36).slice(2),mt="__reactFiber$"+pt,ut="__reactProps$"+pt,Et="__reactContainer$"+pt,St="__reactEvents$"+pt,xt="__reactListeners$"+pt,Gt="__reactHandles$"+pt,en="__reactResources$"+pt,Gn="__reactMarker$"+pt;function wn(s){delete s[mt],delete s[ut],delete s[St],delete s[xt],delete s[Gt]}function _t(s){var l=s[mt];if(l)return l;for(var m=s.parentNode;m;){if(l=m[Et]||m[mt]){if(m=l.alternate,l.child!==null||m!==null&&m.child!==null)for(s=p4(s);s!==null;){if(m=s[mt])return m;s=p4(s)}return l}s=m,m=s.parentNode}return null}function Nt(s){if(s=s[mt]||s[Et]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function qn(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function rr(s){var l=s[en];return l||(l=s[en]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Nn(s){s[Gn]=!0}var We=new Set,Mr={};function gn(s,l){Hn(s,l),Hn(s+"Capture",l)}function Hn(s,l){for(Mr[s]=l,s=0;s<l.length;s++)We.add(l[s])}var Pr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tn={},cn={};function st(s){return jt.call(cn,s)?!0:jt.call(tn,s)?!1:Pr.test(s)?cn[s]=!0:(tn[s]=!0,!1)}function Yn(s,l,m){if(st(l))if(m===null)s.removeAttribute(l);else{switch(typeof m){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var E=l.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+m)}}function si(s,l,m){if(m===null)s.removeAttribute(l);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+m)}}function br(s,l,m,E){if(E===null)s.removeAttribute(m);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(m);return}s.setAttributeNS(l,m,""+E)}}function gt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wr(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function wi(s,l,m){var E=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var T=E.get,D=E.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return T.call(this)},set:function(V){m=""+V,D.call(this,V)}}),Object.defineProperty(s,l,{enumerable:E.enumerable}),{getValue:function(){return m},setValue:function(V){m=""+V},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Tn(s){if(!s._valueTracker){var l=wr(s)?"checked":"value";s._valueTracker=wi(s,l,""+s[l])}}function Ei(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var m=l.getValue(),E="";return s&&(E=wr(s)?s.checked?"true":"false":s.value),s=E,s!==m?(l.setValue(s),!0):!1}function Ss(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Fi=/[\n"\\]/g;function un(s){return s.replace(Fi,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function sr(s,l,m,E,T,D,V,te){s.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?s.type=V:s.removeAttribute("type"),l!=null?V==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+gt(l)):s.value!==""+gt(l)&&(s.value=""+gt(l)):V!=="submit"&&V!=="reset"||s.removeAttribute("value"),l!=null?he(s,V,gt(l)):m!=null?he(s,V,gt(m)):E!=null&&s.removeAttribute("value"),T==null&&D!=null&&(s.defaultChecked=!!D),T!=null&&(s.checked=T&&typeof T!="function"&&typeof T!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?s.name=""+gt(te):s.removeAttribute("name")}function ke(s,l,m,E,T,D,V,te){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.type=D),l!=null||m!=null){if(!(D!=="submit"&&D!=="reset"||l!=null)){Tn(s);return}m=m!=null?""+gt(m):"",l=l!=null?""+gt(l):m,te||l===s.value||(s.value=l),s.defaultValue=l}E=E??T,E=typeof E!="function"&&typeof E!="symbol"&&!!E,s.checked=te?s.checked:!!E,s.defaultChecked=!!E,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(s.name=V),Tn(s)}function he(s,l,m){l==="number"&&Ss(s.ownerDocument)===s||s.defaultValue===""+m||(s.defaultValue=""+m)}function At(s,l,m,E){if(s=s.options,l){l={};for(var T=0;T<m.length;T++)l["$"+m[T]]=!0;for(m=0;m<s.length;m++)T=l.hasOwnProperty("$"+s[m].value),s[m].selected!==T&&(s[m].selected=T),T&&E&&(s[m].defaultSelected=!0)}else{for(m=""+gt(m),l=null,T=0;T<s.length;T++){if(s[T].value===m){s[T].selected=!0,E&&(s[T].defaultSelected=!0);return}l!==null||s[T].disabled||(l=s[T])}l!==null&&(l.selected=!0)}}function Wn(s,l,m){if(l!=null&&(l=""+gt(l),l!==s.value&&(s.value=l),m==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=m!=null?""+gt(m):""}function ar(s,l,m,E){if(l==null){if(E!=null){if(m!=null)throw Error(r(92));if(ue(E)){if(1<E.length)throw Error(r(93));E=E[0]}m=E}m==null&&(m=""),l=m}m=gt(l),s.defaultValue=m,E=s.textContent,E===m&&E!==""&&E!==null&&(s.value=E),Tn(s)}function Yt(s,l){if(l){var m=s.firstChild;if(m&&m===s.lastChild&&m.nodeType===3){m.nodeValue=l;return}}s.textContent=l}var Di=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function di(s,l,m){var E=l.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?E?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":E?s.setProperty(l,m):typeof m!="number"||m===0||Di.has(l)?l==="float"?s.cssFloat=m:s[l]=(""+m).trim():s[l]=m+"px"}function Ot(s,l,m){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,m!=null){for(var E in m)!m.hasOwnProperty(E)||l!=null&&l.hasOwnProperty(E)||(E.indexOf("--")===0?s.setProperty(E,""):E==="float"?s.cssFloat="":s[E]="");for(var T in l)E=l[T],l.hasOwnProperty(T)&&m[T]!==E&&di(s,T,E)}else for(var D in l)l.hasOwnProperty(D)&&di(s,D,l[D])}function hn(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var as=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ia=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pi(s){return ia.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ai(){}var Dr=null;function or(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var En=null,Br=null;function Qr(s){var l=Nt(s);if(l&&(s=l.stateNode)){var m=s[ut]||null;e:switch(s=l.stateNode,l.type){case"input":if(sr(s,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),l=m.name,m.type==="radio"&&l!=null){for(m=s;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+un(""+l)+'"][type="radio"]'),l=0;l<m.length;l++){var E=m[l];if(E!==s&&E.form===s.form){var T=E[ut]||null;if(!T)throw Error(r(90));sr(E,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(l=0;l<m.length;l++)E=m[l],E.form===s.form&&Ei(E)}break e;case"textarea":Wn(s,m.value,m.defaultValue);break e;case"select":l=m.value,l!=null&&At(s,!!m.multiple,l,!1)}}}var Dt=!1;function qi(s,l,m){if(Dt)return s(l,m);Dt=!0;try{var E=s(l);return E}finally{if(Dt=!1,(En!==null||Br!==null)&&(Fp(),En&&(l=En,s=Br,Br=En=null,Qr(l),s)))for(l=0;l<s.length;l++)Qr(s[l])}}function Kt(s,l){var m=s.stateNode;if(m===null)return null;var E=m[ut]||null;if(E===null)return null;m=E[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(s=s.type,E=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!E;break e;default:s=!1}if(s)return null;if(m&&typeof m!="function")throw Error(r(231,l,typeof m));return m}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xs=!1;if(pn)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){xs=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{xs=!1}var Si=null,Jr=null,_s=null;function os(){if(_s)return _s;var s,l=Jr,m=l.length,E,T="value"in Si?Si.value:Si.textContent,D=T.length;for(s=0;s<m&&l[s]===T[s];s++);var V=m-s;for(E=1;E<=V&&l[m-E]===T[D-E];E++);return _s=T.slice(s,1<E?1-E:void 0)}function q(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ne(){return!0}function Ce(){return!1}function qe(s){function l(m,E,T,D,V){this._reactName=m,this._targetInst=T,this.type=E,this.nativeEvent=D,this.target=V,this.currentTarget=null;for(var te in s)s.hasOwnProperty(te)&&(m=s[te],this[te]=m?m(D):D[te]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?ne:Ce,this.isPropagationStopped=Ce,this}return S(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ne)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ne)},persist:function(){},isPersistent:ne}),l}var kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wt=qe(kt),dn=S({},kt,{view:0,detail:0}),_n=qe(dn),lr,Mn,Er,Ur=S({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Er&&(Er&&s.type==="mousemove"?(lr=s.screenX-Er.screenX,Mn=s.screenY-Er.screenY):Mn=lr=0,Er=s),lr)},movementY:function(s){return"movementY"in s?s.movementY:Mn}}),$t=qe(Ur),Lr=S({},Ur,{dataTransfer:0}),cr=qe(Lr),Vr=S({},dn,{relatedTarget:0}),ji=qe(Vr),ze=S({},kt,{animationName:0,elapsedTime:0,pseudoElement:0}),nn=qe(ze),Sr=S({},kt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ls=qe(Sr),pl=S({},kt,{data:0}),ml=qe(pl),xi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},No={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ia={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hr(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Ia[s])?!!l[s]:!1}function sa(){return Hr}var Rr=S({},dn,{key:function(s){if(s.key){var l=xi[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=q(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?No[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sa,charCode:function(s){return s.type==="keypress"?q(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?q(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),To=qe(Rr),As=S({},Ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kn=qe(As),Pt=S({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sa}),bc=qe(Pt),er=S({},kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cs=qe(er),aa=S({},Ur,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),vu=qe(aa),Ns=S({},kt,{newState:0,oldState:0}),Oo=qe(Ns),Ro=[9,13,27,32],Io=pn&&"CompositionEvent"in window,oa=null;pn&&"documentMode"in document&&(oa=document.documentMode);var gl=pn&&"TextEvent"in window&&!oa,bu=pn&&(!Io||oa&&8<oa&&11>=oa),la=" ",yl=!1;function wc(s,l){switch(s){case"keyup":return Ro.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ma(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ja=!1;function js(s,l){switch(s){case"compositionend":return Ma(l);case"keypress":return l.which!==32?null:(yl=!0,la);case"textInput":return s=l.data,s===la&&yl?null:s;default:return null}}function eo(s,l){if(Ja)return s==="compositionend"||!Io&&wc(s,l)?(s=os(),_s=Jr=Si=null,Ja=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return bu&&l.locale!=="ko"?null:l.data;default:return null}}var $i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vl(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!$i[s.type]:l==="textarea"}function cs(s,l,m,E){En?Br?Br.push(E):Br=[E]:En=E,l=Yp(l,"onChange"),0<l.length&&(m=new wt("onChange","change",null,m,E),s.push({event:m,listeners:l}))}var Mo=null,Da=null;function bl(s){e4(s,0)}function Vi(s){var l=qn(s);if(Ei(l))return s}function $n(s,l){if(s==="change")return l}var Do=!1;if(pn){var _i;if(pn){var La="oninput"in document;if(!La){var An=document.createElement("div");An.setAttribute("oninput","return;"),La=typeof An.oninput=="function"}_i=La}else _i=!1;Do=_i&&(!document.documentMode||9<document.documentMode)}function to(){Mo&&(Mo.detachEvent("onpropertychange",W),Da=Mo=null)}function W(s){if(s.propertyName==="value"&&Vi(Da)){var l=[];cs(l,Da,s,or(s)),qi(bl,l)}}function o(s,l,m){s==="focusin"?(to(),Mo=l,Da=m,Mo.attachEvent("onpropertychange",W)):s==="focusout"&&to()}function f(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Vi(Da)}function d(s,l){if(s==="click")return Vi(l)}function v(s,l){if(s==="input"||s==="change")return Vi(l)}function c(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var h=typeof Object.is=="function"?Object.is:c;function b(s,l){if(h(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var m=Object.keys(s),E=Object.keys(l);if(m.length!==E.length)return!1;for(E=0;E<m.length;E++){var T=m[E];if(!jt.call(l,T)||!h(s[T],l[T]))return!1}return!0}function x(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function A(s,l){var m=x(s);s=0;for(var E;m;){if(m.nodeType===3){if(E=s+m.textContent.length,s<=l&&E>=l)return{node:m,offset:l-s};s=E}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=x(m)}}function I(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?I(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function P(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Ss(s.document);l instanceof s.HTMLIFrameElement;){try{var m=typeof l.contentWindow.location.href=="string"}catch{m=!1}if(m)s=l.contentWindow;else break;l=Ss(s.document)}return l}function z(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var H=pn&&"documentMode"in document&&11>=document.documentMode,X=null,J=null,Q=null,fe=!1;function me(s,l,m){var E=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;fe||X==null||X!==Ss(E)||(E=X,"selectionStart"in E&&z(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Q&&b(Q,E)||(Q=E,E=Yp(J,"onSelect"),0<E.length&&(l=new wt("onSelect","select",null,l,m),s.push({event:l,listeners:E}),l.target=X)))}function ge(s,l){var m={};return m[s.toLowerCase()]=l.toLowerCase(),m["Webkit"+s]="webkit"+l,m["Moz"+s]="moz"+l,m}var ye={animationend:ge("Animation","AnimationEnd"),animationiteration:ge("Animation","AnimationIteration"),animationstart:ge("Animation","AnimationStart"),transitionrun:ge("Transition","TransitionRun"),transitionstart:ge("Transition","TransitionStart"),transitioncancel:ge("Transition","TransitionCancel"),transitionend:ge("Transition","TransitionEnd")},_e={},Re={};pn&&(Re=document.createElement("div").style,"AnimationEvent"in window||(delete ye.animationend.animation,delete ye.animationiteration.animation,delete ye.animationstart.animation),"TransitionEvent"in window||delete ye.transitionend.transition);function je(s){if(_e[s])return _e[s];if(!ye[s])return s;var l=ye[s],m;for(m in l)if(l.hasOwnProperty(m)&&m in Re)return _e[s]=l[m];return s}var Ue=je("animationend"),Ke=je("animationiteration"),Ze=je("animationstart"),lt=je("transitionrun"),at=je("transitionstart"),ht=je("transitioncancel"),yt=je("transitionend"),vt=new Map,Ct="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ct.push("scrollEnd");function Vt(s,l){vt.set(s,l),gn(l,[s])}var yn=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Wt=[],Ai=0,an=0;function mi(){for(var s=Ai,l=an=Ai=0;l<s;){var m=Wt[l];Wt[l++]=null;var E=Wt[l];Wt[l++]=null;var T=Wt[l];Wt[l++]=null;var D=Wt[l];if(Wt[l++]=null,E!==null&&T!==null){var V=E.pending;V===null?T.next=T:(T.next=V.next,V.next=T),E.pending=T}D!==0&&no(m,T,D)}}function gi(s,l,m,E){Wt[Ai++]=s,Wt[Ai++]=l,Wt[Ai++]=m,Wt[Ai++]=E,an|=E,s.lanes|=E,s=s.alternate,s!==null&&(s.lanes|=E)}function wl(s,l,m,E){return gi(s,l,m,E),El(s)}function ei(s,l){return gi(s,null,null,l),El(s)}function no(s,l,m){s.lanes|=m;var E=s.alternate;E!==null&&(E.lanes|=m);for(var T=!1,D=s.return;D!==null;)D.childLanes|=m,E=D.alternate,E!==null&&(E.childLanes|=m),D.tag===22&&(s=D.stateNode,s===null||s._visibility&1||(T=!0)),s=D,D=D.return;return s.tag===3?(D=s.stateNode,T&&l!==null&&(T=31-Ft(m),s=D.hiddenUpdates,E=s[T],E===null?s[T]=[l]:E.push(l),l.lane=m|536870912),D):null}function El(s){if(50<ph)throw ph=0,uy=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var wu={};function bM(s,l,m,E){this.tag=s,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(s,l,m,E){return new bM(s,l,m,E)}function ng(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Lo(s,l){var m=s.alternate;return m===null?(m=Ps(s.tag,l,s.key,s.mode),m.elementType=s.elementType,m.type=s.type,m.stateNode=s.stateNode,m.alternate=s,s.alternate=m):(m.pendingProps=l,m.type=s.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=s.flags&65011712,m.childLanes=s.childLanes,m.lanes=s.lanes,m.child=s.child,m.memoizedProps=s.memoizedProps,m.memoizedState=s.memoizedState,m.updateQueue=s.updateQueue,l=s.dependencies,m.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},m.sibling=s.sibling,m.index=s.index,m.ref=s.ref,m.refCleanup=s.refCleanup,m}function jE(s,l){s.flags&=65011714;var m=s.alternate;return m===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=m.childLanes,s.lanes=m.lanes,s.child=m.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=m.memoizedProps,s.memoizedState=m.memoizedState,s.updateQueue=m.updateQueue,s.type=m.type,l=m.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function fp(s,l,m,E,T,D){var V=0;if(E=s,typeof s=="function")ng(s)&&(V=1);else if(typeof s=="string")V=_D(s,m,Y.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case le:return s=Ps(31,m,l,T),s.elementType=le,s.lanes=D,s;case R:return Ec(m.children,T,D,l);case M:V=8,T|=24;break;case L:return s=Ps(12,m,l,T|2),s.elementType=L,s.lanes=D,s;case U:return s=Ps(13,m,l,T),s.elementType=U,s.lanes=D,s;case F:return s=Ps(19,m,l,T),s.elementType=F,s.lanes=D,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:V=10;break e;case k:V=9;break e;case $:V=11;break e;case B:V=14;break e;case Z:V=16,E=null;break e}V=29,m=Error(r(130,s===null?"null":typeof s,"")),E=null}return l=Ps(V,m,l,T),l.elementType=s,l.type=E,l.lanes=D,l}function Ec(s,l,m,E){return s=Ps(7,s,E,l),s.lanes=m,s}function rg(s,l,m){return s=Ps(6,s,null,l),s.lanes=m,s}function PE(s){var l=Ps(18,null,null,0);return l.stateNode=s,l}function ig(s,l,m){return l=Ps(4,s.children!==null?s.children:[],s.key,l),l.lanes=m,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var BE=new WeakMap;function ca(s,l){if(typeof s=="object"&&s!==null){var m=BE.get(s);return m!==void 0?m:(l={value:s,source:l,stack:Zt(l)},BE.set(s,l),l)}return{value:s,source:l,stack:Zt(l)}}var Eu=[],Su=0,hp=null,Gf=0,ua=[],fa=0,Sl=null,ro=1,io="";function ko(s,l){Eu[Su++]=Gf,Eu[Su++]=hp,hp=s,Gf=l}function UE(s,l,m){ua[fa++]=ro,ua[fa++]=io,ua[fa++]=Sl,Sl=s;var E=ro;s=io;var T=32-Ft(E)-1;E&=~(1<<T),m+=1;var D=32-Ft(l)+T;if(30<D){var V=T-T%5;D=(E&(1<<V)-1).toString(32),E>>=V,T-=V,ro=1<<32-Ft(l)+T|m<<T|E,io=D+s}else ro=1<<D|m<<T|E,io=s}function sg(s){s.return!==null&&(ko(s,1),UE(s,1,0))}function ag(s){for(;s===hp;)hp=Eu[--Su],Eu[Su]=null,Gf=Eu[--Su],Eu[Su]=null;for(;s===Sl;)Sl=ua[--fa],ua[fa]=null,io=ua[--fa],ua[fa]=null,ro=ua[--fa],ua[fa]=null}function zE(s,l){ua[fa++]=ro,ua[fa++]=io,ua[fa++]=Sl,ro=l.id,io=l.overflow,Sl=s}var Hi=null,zr=null,Vn=!1,xl=null,ha=!1,og=Error(r(519));function _l(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yf(ca(l,s)),og}function FE(s){var l=s.stateNode,m=s.type,E=s.memoizedProps;switch(l[mt]=s,l[ut]=E,m){case"dialog":kn("cancel",l),kn("close",l);break;case"iframe":case"object":case"embed":kn("load",l);break;case"video":case"audio":for(m=0;m<gh.length;m++)kn(gh[m],l);break;case"source":kn("error",l);break;case"img":case"image":case"link":kn("error",l),kn("load",l);break;case"details":kn("toggle",l);break;case"input":kn("invalid",l),ke(l,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":kn("invalid",l);break;case"textarea":kn("invalid",l),ar(l,E.value,E.defaultValue,E.children)}m=E.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||l.textContent===""+m||E.suppressHydrationWarning===!0||i4(l.textContent,m)?(E.popover!=null&&(kn("beforetoggle",l),kn("toggle",l)),E.onScroll!=null&&kn("scroll",l),E.onScrollEnd!=null&&kn("scrollend",l),E.onClick!=null&&(l.onclick=ai),l=!0):l=!1,l||_l(s,!0)}function qE(s){for(Hi=s.return;Hi;)switch(Hi.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:Hi=Hi.return}}function xu(s){if(s!==Hi)return!1;if(!Vn)return qE(s),Vn=!0,!1;var l=s.tag,m;if((m=l!==3&&l!==27)&&((m=l===5)&&(m=s.type,m=!(m!=="form"&&m!=="button")||Ay(s.type,s.memoizedProps)),m=!m),m&&zr&&_l(s),qE(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));zr=d4(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));zr=d4(s)}else l===27?(l=zr,Bl(s.type)?(s=Ry,Ry=null,zr=s):zr=l):zr=Hi?pa(s.stateNode.nextSibling):null;return!0}function Sc(){zr=Hi=null,Vn=!1}function lg(){var s=xl;return s!==null&&(Is===null?Is=s:Is.push.apply(Is,s),xl=null),s}function Yf(s){xl===null?xl=[s]:xl.push(s)}var cg=K(null),xc=null,jo=null;function Al(s,l,m){ae(cg,l._currentValue),l._currentValue=m}function Po(s){s._currentValue=cg.current,oe(cg)}function ug(s,l,m){for(;s!==null;){var E=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,E!==null&&(E.childLanes|=l)):E!==null&&(E.childLanes&l)!==l&&(E.childLanes|=l),s===m)break;s=s.return}}function fg(s,l,m,E){var T=s.child;for(T!==null&&(T.return=s);T!==null;){var D=T.dependencies;if(D!==null){var V=T.child;D=D.firstContext;e:for(;D!==null;){var te=D;D=T;for(var Ae=0;Ae<l.length;Ae++)if(te.context===l[Ae]){D.lanes|=m,te=D.alternate,te!==null&&(te.lanes|=m),ug(D.return,m,s),E||(V=null);break e}D=te.next}}else if(T.tag===18){if(V=T.return,V===null)throw Error(r(341));V.lanes|=m,D=V.alternate,D!==null&&(D.lanes|=m),ug(V,m,s),V=null}else V=T.child;if(V!==null)V.return=T;else for(V=T;V!==null;){if(V===s){V=null;break}if(T=V.sibling,T!==null){T.return=V.return,V=T;break}V=V.return}T=V}}function _u(s,l,m,E){s=null;for(var T=l,D=!1;T!==null;){if(!D){if((T.flags&524288)!==0)D=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var V=T.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var te=T.type;h(T.pendingProps.value,V.value)||(s!==null?s.push(te):s=[te])}}else if(T===Ye.current){if(V=T.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(s!==null?s.push(Eh):s=[Eh])}T=T.return}s!==null&&fg(l,s,m,E),l.flags|=262144}function dp(s){for(s=s.firstContext;s!==null;){if(!h(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function _c(s){xc=s,jo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ki(s){return $E(xc,s)}function pp(s,l){return xc===null&&_c(s),$E(s,l)}function $E(s,l){var m=l._currentValue;if(l={context:l,memoizedValue:m,next:null},jo===null){if(s===null)throw Error(r(308));jo=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else jo=jo.next=l;return m}var wM=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(m,E){s.push(E)}};this.abort=function(){l.aborted=!0,s.forEach(function(m){return m()})}},EM=t.unstable_scheduleCallback,SM=t.unstable_NormalPriority,Ci={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hg(){return{controller:new wM,data:new Map,refCount:0}}function Wf(s){s.refCount--,s.refCount===0&&EM(SM,function(){s.controller.abort()})}var Xf=null,dg=0,Au=0,Cu=null;function xM(s,l){if(Xf===null){var m=Xf=[];dg=0,Au=gy(),Cu={status:"pending",value:void 0,then:function(E){m.push(E)}}}return dg++,l.then(VE,VE),l}function VE(){if(--dg===0&&Xf!==null){Cu!==null&&(Cu.status="fulfilled");var s=Xf;Xf=null,Au=0,Cu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function _M(s,l){var m=[],E={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return s.then(function(){E.status="fulfilled",E.value=l;for(var T=0;T<m.length;T++)(0,m[T])(l)},function(T){for(E.status="rejected",E.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),E}var HE=ee.S;ee.S=function(s,l){Tx=Jt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&xM(s,l),HE!==null&&HE(s,l)};var Ac=K(null);function pg(){var s=Ac.current;return s!==null?s:Ir.pooledCache}function mp(s,l){l===null?ae(Ac,Ac.current):ae(Ac,l.pool)}function KE(){var s=pg();return s===null?null:{parent:Ci._currentValue,pool:s}}var Nu=Error(r(460)),mg=Error(r(474)),gp=Error(r(542)),yp={then:function(){}};function GE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function YE(s,l,m){switch(m=s[m],m===void 0?s.push(l):m!==l&&(l.then(ai,ai),l=m),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,XE(s),s;default:if(typeof l.status=="string")l.then(ai,ai);else{if(s=Ir,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(E){if(l.status==="pending"){var T=l;T.status="fulfilled",T.value=E}},function(E){if(l.status==="pending"){var T=l;T.status="rejected",T.reason=E}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,XE(s),s}throw Nc=l,Nu}}function Cc(s){try{var l=s._init;return l(s._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Nc=m,Nu):m}}var Nc=null;function WE(){if(Nc===null)throw Error(r(459));var s=Nc;return Nc=null,s}function XE(s){if(s===Nu||s===gp)throw Error(r(483))}var Tu=null,Qf=0;function vp(s){var l=Qf;return Qf+=1,Tu===null&&(Tu=[]),YE(Tu,s,l)}function Zf(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function bp(s,l){throw l.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function QE(s){function l(De,Te){if(s){var Pe=De.deletions;Pe===null?(De.deletions=[Te],De.flags|=16):Pe.push(Te)}}function m(De,Te){if(!s)return null;for(;Te!==null;)l(De,Te),Te=Te.sibling;return null}function E(De){for(var Te=new Map;De!==null;)De.key!==null?Te.set(De.key,De):Te.set(De.index,De),De=De.sibling;return Te}function T(De,Te){return De=Lo(De,Te),De.index=0,De.sibling=null,De}function D(De,Te,Pe){return De.index=Pe,s?(Pe=De.alternate,Pe!==null?(Pe=Pe.index,Pe<Te?(De.flags|=67108866,Te):Pe):(De.flags|=67108866,Te)):(De.flags|=1048576,Te)}function V(De){return s&&De.alternate===null&&(De.flags|=67108866),De}function te(De,Te,Pe,tt){return Te===null||Te.tag!==6?(Te=rg(Pe,De.mode,tt),Te.return=De,Te):(Te=T(Te,Pe),Te.return=De,Te)}function Ae(De,Te,Pe,tt){var qt=Pe.type;return qt===R?Xe(De,Te,Pe.props.children,tt,Pe.key):Te!==null&&(Te.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===Z&&Cc(qt)===Te.type)?(Te=T(Te,Pe.props),Zf(Te,Pe),Te.return=De,Te):(Te=fp(Pe.type,Pe.key,Pe.props,null,De.mode,tt),Zf(Te,Pe),Te.return=De,Te)}function Be(De,Te,Pe,tt){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Pe.containerInfo||Te.stateNode.implementation!==Pe.implementation?(Te=ig(Pe,De.mode,tt),Te.return=De,Te):(Te=T(Te,Pe.children||[]),Te.return=De,Te)}function Xe(De,Te,Pe,tt,qt){return Te===null||Te.tag!==7?(Te=Ec(Pe,De.mode,tt,qt),Te.return=De,Te):(Te=T(Te,Pe),Te.return=De,Te)}function it(De,Te,Pe){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=rg(""+Te,De.mode,Pe),Te.return=De,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case C:return Pe=fp(Te.type,Te.key,Te.props,null,De.mode,Pe),Zf(Pe,Te),Pe.return=De,Pe;case N:return Te=ig(Te,De.mode,Pe),Te.return=De,Te;case Z:return Te=Cc(Te),it(De,Te,Pe)}if(ue(Te)||ce(Te))return Te=Ec(Te,De.mode,Pe,null),Te.return=De,Te;if(typeof Te.then=="function")return it(De,vp(Te),Pe);if(Te.$$typeof===j)return it(De,pp(De,Te),Pe);bp(De,Te)}return null}function Fe(De,Te,Pe,tt){var qt=Te!==null?Te.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return qt!==null?null:te(De,Te,""+Pe,tt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case C:return Pe.key===qt?Ae(De,Te,Pe,tt):null;case N:return Pe.key===qt?Be(De,Te,Pe,tt):null;case Z:return Pe=Cc(Pe),Fe(De,Te,Pe,tt)}if(ue(Pe)||ce(Pe))return qt!==null?null:Xe(De,Te,Pe,tt,null);if(typeof Pe.then=="function")return Fe(De,Te,vp(Pe),tt);if(Pe.$$typeof===j)return Fe(De,Te,pp(De,Pe),tt);bp(De,Pe)}return null}function He(De,Te,Pe,tt,qt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return De=De.get(Pe)||null,te(Te,De,""+tt,qt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case C:return De=De.get(tt.key===null?Pe:tt.key)||null,Ae(Te,De,tt,qt);case N:return De=De.get(tt.key===null?Pe:tt.key)||null,Be(Te,De,tt,qt);case Z:return tt=Cc(tt),He(De,Te,Pe,tt,qt)}if(ue(tt)||ce(tt))return De=De.get(Pe)||null,Xe(Te,De,tt,qt,null);if(typeof tt.then=="function")return He(De,Te,Pe,vp(tt),qt);if(tt.$$typeof===j)return He(De,Te,Pe,pp(Te,tt),qt);bp(Te,tt)}return null}function It(De,Te,Pe,tt){for(var qt=null,Xn=null,Bt=Te,Sn=Te=0,Un=null;Bt!==null&&Sn<Pe.length;Sn++){Bt.index>Sn?(Un=Bt,Bt=null):Un=Bt.sibling;var Qn=Fe(De,Bt,Pe[Sn],tt);if(Qn===null){Bt===null&&(Bt=Un);break}s&&Bt&&Qn.alternate===null&&l(De,Bt),Te=D(Qn,Te,Sn),Xn===null?qt=Qn:Xn.sibling=Qn,Xn=Qn,Bt=Un}if(Sn===Pe.length)return m(De,Bt),Vn&&ko(De,Sn),qt;if(Bt===null){for(;Sn<Pe.length;Sn++)Bt=it(De,Pe[Sn],tt),Bt!==null&&(Te=D(Bt,Te,Sn),Xn===null?qt=Bt:Xn.sibling=Bt,Xn=Bt);return Vn&&ko(De,Sn),qt}for(Bt=E(Bt);Sn<Pe.length;Sn++)Un=He(Bt,De,Sn,Pe[Sn],tt),Un!==null&&(s&&Un.alternate!==null&&Bt.delete(Un.key===null?Sn:Un.key),Te=D(Un,Te,Sn),Xn===null?qt=Un:Xn.sibling=Un,Xn=Un);return s&&Bt.forEach(function($l){return l(De,$l)}),Vn&&ko(De,Sn),qt}function Xt(De,Te,Pe,tt){if(Pe==null)throw Error(r(151));for(var qt=null,Xn=null,Bt=Te,Sn=Te=0,Un=null,Qn=Pe.next();Bt!==null&&!Qn.done;Sn++,Qn=Pe.next()){Bt.index>Sn?(Un=Bt,Bt=null):Un=Bt.sibling;var $l=Fe(De,Bt,Qn.value,tt);if($l===null){Bt===null&&(Bt=Un);break}s&&Bt&&$l.alternate===null&&l(De,Bt),Te=D($l,Te,Sn),Xn===null?qt=$l:Xn.sibling=$l,Xn=$l,Bt=Un}if(Qn.done)return m(De,Bt),Vn&&ko(De,Sn),qt;if(Bt===null){for(;!Qn.done;Sn++,Qn=Pe.next())Qn=it(De,Qn.value,tt),Qn!==null&&(Te=D(Qn,Te,Sn),Xn===null?qt=Qn:Xn.sibling=Qn,Xn=Qn);return Vn&&ko(De,Sn),qt}for(Bt=E(Bt);!Qn.done;Sn++,Qn=Pe.next())Qn=He(Bt,De,Sn,Qn.value,tt),Qn!==null&&(s&&Qn.alternate!==null&&Bt.delete(Qn.key===null?Sn:Qn.key),Te=D(Qn,Te,Sn),Xn===null?qt=Qn:Xn.sibling=Qn,Xn=Qn);return s&&Bt.forEach(function(kD){return l(De,kD)}),Vn&&ko(De,Sn),qt}function Ar(De,Te,Pe,tt){if(typeof Pe=="object"&&Pe!==null&&Pe.type===R&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case C:e:{for(var qt=Pe.key;Te!==null;){if(Te.key===qt){if(qt=Pe.type,qt===R){if(Te.tag===7){m(De,Te.sibling),tt=T(Te,Pe.props.children),tt.return=De,De=tt;break e}}else if(Te.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===Z&&Cc(qt)===Te.type){m(De,Te.sibling),tt=T(Te,Pe.props),Zf(tt,Pe),tt.return=De,De=tt;break e}m(De,Te);break}else l(De,Te);Te=Te.sibling}Pe.type===R?(tt=Ec(Pe.props.children,De.mode,tt,Pe.key),tt.return=De,De=tt):(tt=fp(Pe.type,Pe.key,Pe.props,null,De.mode,tt),Zf(tt,Pe),tt.return=De,De=tt)}return V(De);case N:e:{for(qt=Pe.key;Te!==null;){if(Te.key===qt)if(Te.tag===4&&Te.stateNode.containerInfo===Pe.containerInfo&&Te.stateNode.implementation===Pe.implementation){m(De,Te.sibling),tt=T(Te,Pe.children||[]),tt.return=De,De=tt;break e}else{m(De,Te);break}else l(De,Te);Te=Te.sibling}tt=ig(Pe,De.mode,tt),tt.return=De,De=tt}return V(De);case Z:return Pe=Cc(Pe),Ar(De,Te,Pe,tt)}if(ue(Pe))return It(De,Te,Pe,tt);if(ce(Pe)){if(qt=ce(Pe),typeof qt!="function")throw Error(r(150));return Pe=qt.call(Pe),Xt(De,Te,Pe,tt)}if(typeof Pe.then=="function")return Ar(De,Te,vp(Pe),tt);if(Pe.$$typeof===j)return Ar(De,Te,pp(De,Pe),tt);bp(De,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,Te!==null&&Te.tag===6?(m(De,Te.sibling),tt=T(Te,Pe),tt.return=De,De=tt):(m(De,Te),tt=rg(Pe,De.mode,tt),tt.return=De,De=tt),V(De)):m(De,Te)}return function(De,Te,Pe,tt){try{Qf=0;var qt=Ar(De,Te,Pe,tt);return Tu=null,qt}catch(Bt){if(Bt===Nu||Bt===gp)throw Bt;var Xn=Ps(29,Bt,null,De.mode);return Xn.lanes=tt,Xn.return=De,Xn}}}var Tc=QE(!0),ZE=QE(!1),Cl=!1;function gg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yg(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Nl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Tl(s,l,m){var E=s.updateQueue;if(E===null)return null;if(E=E.shared,(tr&2)!==0){var T=E.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),E.pending=l,l=El(s),no(s,null,m),l}return gi(s,E,l,m),El(s)}function Jf(s,l,m){if(l=l.updateQueue,l!==null&&(l=l.shared,(m&4194048)!==0)){var E=l.lanes;E&=s.pendingLanes,m|=E,l.lanes=m,ve(s,m)}}function vg(s,l){var m=s.updateQueue,E=s.alternate;if(E!==null&&(E=E.updateQueue,m===E)){var T=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var V={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};D===null?T=D=V:D=D.next=V,m=m.next}while(m!==null);D===null?T=D=l:D=D.next=l}else T=D=l;m={baseState:E.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:E.shared,callbacks:E.callbacks},s.updateQueue=m;return}s=m.lastBaseUpdate,s===null?m.firstBaseUpdate=l:s.next=l,m.lastBaseUpdate=l}var bg=!1;function eh(){if(bg){var s=Cu;if(s!==null)throw s}}function th(s,l,m,E){bg=!1;var T=s.updateQueue;Cl=!1;var D=T.firstBaseUpdate,V=T.lastBaseUpdate,te=T.shared.pending;if(te!==null){T.shared.pending=null;var Ae=te,Be=Ae.next;Ae.next=null,V===null?D=Be:V.next=Be,V=Ae;var Xe=s.alternate;Xe!==null&&(Xe=Xe.updateQueue,te=Xe.lastBaseUpdate,te!==V&&(te===null?Xe.firstBaseUpdate=Be:te.next=Be,Xe.lastBaseUpdate=Ae))}if(D!==null){var it=T.baseState;V=0,Xe=Be=Ae=null,te=D;do{var Fe=te.lane&-536870913,He=Fe!==te.lane;if(He?(Bn&Fe)===Fe:(E&Fe)===Fe){Fe!==0&&Fe===Au&&(bg=!0),Xe!==null&&(Xe=Xe.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var It=s,Xt=te;Fe=l;var Ar=m;switch(Xt.tag){case 1:if(It=Xt.payload,typeof It=="function"){it=It.call(Ar,it,Fe);break e}it=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Xt.payload,Fe=typeof It=="function"?It.call(Ar,it,Fe):It,Fe==null)break e;it=S({},it,Fe);break e;case 2:Cl=!0}}Fe=te.callback,Fe!==null&&(s.flags|=64,He&&(s.flags|=8192),He=T.callbacks,He===null?T.callbacks=[Fe]:He.push(Fe))}else He={lane:Fe,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Xe===null?(Be=Xe=He,Ae=it):Xe=Xe.next=He,V|=Fe;if(te=te.next,te===null){if(te=T.shared.pending,te===null)break;He=te,te=He.next,He.next=null,T.lastBaseUpdate=He,T.shared.pending=null}}while(!0);Xe===null&&(Ae=it),T.baseState=Ae,T.firstBaseUpdate=Be,T.lastBaseUpdate=Xe,D===null&&(T.shared.lanes=0),Dl|=V,s.lanes=V,s.memoizedState=it}}function JE(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function eS(s,l){var m=s.callbacks;if(m!==null)for(s.callbacks=null,s=0;s<m.length;s++)JE(m[s],l)}var Ou=K(null),wp=K(0);function tS(s,l){s=Ko,ae(wp,s),ae(Ou,l),Ko=s|l.baseLanes}function wg(){ae(wp,Ko),ae(Ou,Ou.current)}function Eg(){Ko=wp.current,oe(Ou),oe(wp)}var Bs=K(null),da=null;function Ol(s){var l=s.alternate;ae(yi,yi.current&1),ae(Bs,s),da===null&&(l===null||Ou.current!==null||l.memoizedState!==null)&&(da=s)}function Sg(s){ae(yi,yi.current),ae(Bs,s),da===null&&(da=s)}function nS(s){s.tag===22?(ae(yi,yi.current),ae(Bs,s),da===null&&(da=s)):Rl()}function Rl(){ae(yi,yi.current),ae(Bs,Bs.current)}function Us(s){oe(Bs),da===s&&(da=null),oe(yi)}var yi=K(0);function Ep(s){for(var l=s;l!==null;){if(l.tag===13){var m=l.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Ty(m)||Oy(m)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Bo=0,bn=null,xr=null,Ni=null,Sp=!1,Ru=!1,Oc=!1,xp=0,nh=0,Iu=null,AM=0;function oi(){throw Error(r(321))}function xg(s,l){if(l===null)return!1;for(var m=0;m<l.length&&m<s.length;m++)if(!h(s[m],l[m]))return!1;return!0}function _g(s,l,m,E,T,D){return Bo=D,bn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ee.H=s===null||s.memoizedState===null?US:Ug,Oc=!1,D=m(E,T),Oc=!1,Ru&&(D=iS(l,m,E,T)),rS(s),D}function rS(s){ee.H=sh;var l=xr!==null&&xr.next!==null;if(Bo=0,Ni=xr=bn=null,Sp=!1,nh=0,Iu=null,l)throw Error(r(300));s===null||Ti||(s=s.dependencies,s!==null&&dp(s)&&(Ti=!0))}function iS(s,l,m,E){bn=s;var T=0;do{if(Ru&&(Iu=null),nh=0,Ru=!1,25<=T)throw Error(r(301));if(T+=1,Ni=xr=null,s.updateQueue!=null){var D=s.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}ee.H=zS,D=l(m,E)}while(Ru);return D}function CM(){var s=ee.H,l=s.useState()[0];return l=typeof l.then=="function"?rh(l):l,s=s.useState()[0],(xr!==null?xr.memoizedState:null)!==s&&(bn.flags|=1024),l}function Ag(){var s=xp!==0;return xp=0,s}function Cg(s,l,m){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~m}function Ng(s){if(Sp){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Sp=!1}Bo=0,Ni=xr=bn=null,Ru=!1,nh=xp=0,Iu=null}function us(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ni===null?bn.memoizedState=Ni=s:Ni=Ni.next=s,Ni}function vi(){if(xr===null){var s=bn.alternate;s=s!==null?s.memoizedState:null}else s=xr.next;var l=Ni===null?bn.memoizedState:Ni.next;if(l!==null)Ni=l,xr=s;else{if(s===null)throw bn.alternate===null?Error(r(467)):Error(r(310));xr=s,s={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Ni===null?bn.memoizedState=Ni=s:Ni=Ni.next=s}return Ni}function _p(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rh(s){var l=nh;return nh+=1,Iu===null&&(Iu=[]),s=YE(Iu,s,l),l=bn,(Ni===null?l.memoizedState:Ni.next)===null&&(l=l.alternate,ee.H=l===null||l.memoizedState===null?US:Ug),s}function Ap(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return rh(s);if(s.$$typeof===j)return Ki(s)}throw Error(r(438,String(s)))}function Tg(s){var l=null,m=bn.updateQueue;if(m!==null&&(l=m.memoCache),l==null){var E=bn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(l={data:E.data.map(function(T){return T.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),m===null&&(m=_p(),bn.updateQueue=m),m.memoCache=l,m=l.data[l.index],m===void 0)for(m=l.data[l.index]=Array(s),E=0;E<s;E++)m[E]=Ne;return l.index++,m}function Uo(s,l){return typeof l=="function"?l(s):l}function Cp(s){var l=vi();return Og(l,xr,s)}function Og(s,l,m){var E=s.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=m;var T=s.baseQueue,D=E.pending;if(D!==null){if(T!==null){var V=T.next;T.next=D.next,D.next=V}l.baseQueue=T=D,E.pending=null}if(D=s.baseState,T===null)s.memoizedState=D;else{l=T.next;var te=V=null,Ae=null,Be=l,Xe=!1;do{var it=Be.lane&-536870913;if(it!==Be.lane?(Bn&it)===it:(Bo&it)===it){var Fe=Be.revertLane;if(Fe===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),it===Au&&(Xe=!0);else if((Bo&Fe)===Fe){Be=Be.next,Fe===Au&&(Xe=!0);continue}else it={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Ae===null?(te=Ae=it,V=D):Ae=Ae.next=it,bn.lanes|=Fe,Dl|=Fe;it=Be.action,Oc&&m(D,it),D=Be.hasEagerState?Be.eagerState:m(D,it)}else Fe={lane:it,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Ae===null?(te=Ae=Fe,V=D):Ae=Ae.next=Fe,bn.lanes|=it,Dl|=it;Be=Be.next}while(Be!==null&&Be!==l);if(Ae===null?V=D:Ae.next=te,!h(D,s.memoizedState)&&(Ti=!0,Xe&&(m=Cu,m!==null)))throw m;s.memoizedState=D,s.baseState=V,s.baseQueue=Ae,E.lastRenderedState=D}return T===null&&(E.lanes=0),[s.memoizedState,E.dispatch]}function Rg(s){var l=vi(),m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=s;var E=m.dispatch,T=m.pending,D=l.memoizedState;if(T!==null){m.pending=null;var V=T=T.next;do D=s(D,V.action),V=V.next;while(V!==T);h(D,l.memoizedState)||(Ti=!0),l.memoizedState=D,l.baseQueue===null&&(l.baseState=D),m.lastRenderedState=D}return[D,E]}function sS(s,l,m){var E=bn,T=vi(),D=Vn;if(D){if(m===void 0)throw Error(r(407));m=m()}else m=l();var V=!h((xr||T).memoizedState,m);if(V&&(T.memoizedState=m,Ti=!0),T=T.queue,Dg(lS.bind(null,E,T,s),[s]),T.getSnapshot!==l||V||Ni!==null&&Ni.memoizedState.tag&1){if(E.flags|=2048,Mu(9,{destroy:void 0},oS.bind(null,E,T,m,l),null),Ir===null)throw Error(r(349));D||(Bo&127)!==0||aS(E,l,m)}return m}function aS(s,l,m){s.flags|=16384,s={getSnapshot:l,value:m},l=bn.updateQueue,l===null?(l=_p(),bn.updateQueue=l,l.stores=[s]):(m=l.stores,m===null?l.stores=[s]:m.push(s))}function oS(s,l,m,E){l.value=m,l.getSnapshot=E,cS(l)&&uS(s)}function lS(s,l,m){return m(function(){cS(l)&&uS(s)})}function cS(s){var l=s.getSnapshot;s=s.value;try{var m=l();return!h(s,m)}catch{return!0}}function uS(s){var l=ei(s,2);l!==null&&Ms(l,s,2)}function Ig(s){var l=us();if(typeof s=="function"){var m=s;if(s=m(),Oc){ft(!0);try{m()}finally{ft(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:s},l}function fS(s,l,m,E){return s.baseState=m,Og(s,xr,typeof E=="function"?E:Uo)}function NM(s,l,m,E,T){if(Op(s))throw Error(r(485));if(s=l.action,s!==null){var D={payload:T,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){D.listeners.push(V)}};ee.T!==null?m(!0):D.isTransition=!1,E(D),m=l.pending,m===null?(D.next=l.pending=D,hS(l,D)):(D.next=m.next,l.pending=m.next=D)}}function hS(s,l){var m=l.action,E=l.payload,T=s.state;if(l.isTransition){var D=ee.T,V={};ee.T=V;try{var te=m(T,E),Ae=ee.S;Ae!==null&&Ae(V,te),dS(s,l,te)}catch(Be){Mg(s,l,Be)}finally{D!==null&&V.types!==null&&(D.types=V.types),ee.T=D}}else try{D=m(T,E),dS(s,l,D)}catch(Be){Mg(s,l,Be)}}function dS(s,l,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(E){pS(s,l,E)},function(E){return Mg(s,l,E)}):pS(s,l,m)}function pS(s,l,m){l.status="fulfilled",l.value=m,mS(l),s.state=m,l=s.pending,l!==null&&(m=l.next,m===l?s.pending=null:(m=m.next,l.next=m,hS(s,m)))}function Mg(s,l,m){var E=s.pending;if(s.pending=null,E!==null){E=E.next;do l.status="rejected",l.reason=m,mS(l),l=l.next;while(l!==E)}s.action=null}function mS(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function gS(s,l){return l}function yS(s,l){if(Vn){var m=Ir.formState;if(m!==null){e:{var E=bn;if(Vn){if(zr){t:{for(var T=zr,D=ha;T.nodeType!==8;){if(!D){T=null;break t}if(T=pa(T.nextSibling),T===null){T=null;break t}}D=T.data,T=D==="F!"||D==="F"?T:null}if(T){zr=pa(T.nextSibling),E=T.data==="F!";break e}}_l(E)}E=!1}E&&(l=m[0])}}return m=us(),m.memoizedState=m.baseState=l,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gS,lastRenderedState:l},m.queue=E,m=jS.bind(null,bn,E),E.dispatch=m,E=Ig(!1),D=Bg.bind(null,bn,!1,E.queue),E=us(),T={state:l,dispatch:null,action:s,pending:null},E.queue=T,m=NM.bind(null,bn,T,D,m),T.dispatch=m,E.memoizedState=s,[l,m,!1]}function vS(s){var l=vi();return bS(l,xr,s)}function bS(s,l,m){if(l=Og(s,l,gS)[0],s=Cp(Uo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var E=rh(l)}catch(V){throw V===Nu?gp:V}else E=l;l=vi();var T=l.queue,D=T.dispatch;return m!==l.memoizedState&&(bn.flags|=2048,Mu(9,{destroy:void 0},TM.bind(null,T,m),null)),[E,D,s]}function TM(s,l){s.action=l}function wS(s){var l=vi(),m=xr;if(m!==null)return bS(l,m,s);vi(),l=l.memoizedState,m=vi();var E=m.queue.dispatch;return m.memoizedState=s,[l,E,!1]}function Mu(s,l,m,E){return s={tag:s,create:m,deps:E,inst:l,next:null},l=bn.updateQueue,l===null&&(l=_p(),bn.updateQueue=l),m=l.lastEffect,m===null?l.lastEffect=s.next=s:(E=m.next,m.next=s,s.next=E,l.lastEffect=s),s}function ES(){return vi().memoizedState}function Np(s,l,m,E){var T=us();bn.flags|=s,T.memoizedState=Mu(1|l,{destroy:void 0},m,E===void 0?null:E)}function Tp(s,l,m,E){var T=vi();E=E===void 0?null:E;var D=T.memoizedState.inst;xr!==null&&E!==null&&xg(E,xr.memoizedState.deps)?T.memoizedState=Mu(l,D,m,E):(bn.flags|=s,T.memoizedState=Mu(1|l,D,m,E))}function SS(s,l){Np(8390656,8,s,l)}function Dg(s,l){Tp(2048,8,s,l)}function OM(s){bn.flags|=4;var l=bn.updateQueue;if(l===null)l=_p(),bn.updateQueue=l,l.events=[s];else{var m=l.events;m===null?l.events=[s]:m.push(s)}}function xS(s){var l=vi().memoizedState;return OM({ref:l,nextImpl:s}),function(){if((tr&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function _S(s,l){return Tp(4,2,s,l)}function AS(s,l){return Tp(4,4,s,l)}function CS(s,l){if(typeof l=="function"){s=s();var m=l(s);return function(){typeof m=="function"?m():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function NS(s,l,m){m=m!=null?m.concat([s]):null,Tp(4,4,CS.bind(null,l,s),m)}function Lg(){}function TS(s,l){var m=vi();l=l===void 0?null:l;var E=m.memoizedState;return l!==null&&xg(l,E[1])?E[0]:(m.memoizedState=[s,l],s)}function OS(s,l){var m=vi();l=l===void 0?null:l;var E=m.memoizedState;if(l!==null&&xg(l,E[1]))return E[0];if(E=s(),Oc){ft(!0);try{s()}finally{ft(!1)}}return m.memoizedState=[E,l],E}function kg(s,l,m){return m===void 0||(Bo&1073741824)!==0&&(Bn&261930)===0?s.memoizedState=l:(s.memoizedState=m,s=Rx(),bn.lanes|=s,Dl|=s,m)}function RS(s,l,m,E){return h(m,l)?m:Ou.current!==null?(s=kg(s,m,E),h(s,l)||(Ti=!0),s):(Bo&42)===0||(Bo&1073741824)!==0&&(Bn&261930)===0?(Ti=!0,s.memoizedState=m):(s=Rx(),bn.lanes|=s,Dl|=s,l)}function IS(s,l,m,E,T){var D=de.p;de.p=D!==0&&8>D?D:8;var V=ee.T,te={};ee.T=te,Bg(s,!1,l,m);try{var Ae=T(),Be=ee.S;if(Be!==null&&Be(te,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var Xe=_M(Ae,E);ih(s,l,Xe,qs(s))}else ih(s,l,E,qs(s))}catch(it){ih(s,l,{then:function(){},status:"rejected",reason:it},qs())}finally{de.p=D,V!==null&&te.types!==null&&(V.types=te.types),ee.T=V}}function RM(){}function jg(s,l,m,E){if(s.tag!==5)throw Error(r(476));var T=MS(s).queue;IS(s,T,l,we,m===null?RM:function(){return DS(s),m(E)})}function MS(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:we},next:null};var m={};return l.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:m},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function DS(s){var l=MS(s);l.next===null&&(l=s.alternate.memoizedState),ih(s,l.next.queue,{},qs())}function Pg(){return Ki(Eh)}function LS(){return vi().memoizedState}function kS(){return vi().memoizedState}function IM(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var m=qs();s=Nl(m);var E=Tl(l,s,m);E!==null&&(Ms(E,l,m),Jf(E,l,m)),l={cache:hg()},s.payload=l;return}l=l.return}}function MM(s,l,m){var E=qs();m={lane:E,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Op(s)?PS(l,m):(m=wl(s,l,m,E),m!==null&&(Ms(m,s,E),BS(m,l,E)))}function jS(s,l,m){var E=qs();ih(s,l,m,E)}function ih(s,l,m,E){var T={lane:E,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Op(s))PS(l,T);else{var D=s.alternate;if(s.lanes===0&&(D===null||D.lanes===0)&&(D=l.lastRenderedReducer,D!==null))try{var V=l.lastRenderedState,te=D(V,m);if(T.hasEagerState=!0,T.eagerState=te,h(te,V))return gi(s,l,T,0),Ir===null&&mi(),!1}catch{}if(m=wl(s,l,T,E),m!==null)return Ms(m,s,E),BS(m,l,E),!0}return!1}function Bg(s,l,m,E){if(E={lane:2,revertLane:gy(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},Op(s)){if(l)throw Error(r(479))}else l=wl(s,m,E,2),l!==null&&Ms(l,s,2)}function Op(s){var l=s.alternate;return s===bn||l!==null&&l===bn}function PS(s,l){Ru=Sp=!0;var m=s.pending;m===null?l.next=l:(l.next=m.next,m.next=l),s.pending=l}function BS(s,l,m){if((m&4194048)!==0){var E=l.lanes;E&=s.pendingLanes,m|=E,l.lanes=m,ve(s,m)}}var sh={readContext:Ki,use:Ap,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useLayoutEffect:oi,useInsertionEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useSyncExternalStore:oi,useId:oi,useHostTransitionStatus:oi,useFormState:oi,useActionState:oi,useOptimistic:oi,useMemoCache:oi,useCacheRefresh:oi};sh.useEffectEvent=oi;var US={readContext:Ki,use:Ap,useCallback:function(s,l){return us().memoizedState=[s,l===void 0?null:l],s},useContext:Ki,useEffect:SS,useImperativeHandle:function(s,l,m){m=m!=null?m.concat([s]):null,Np(4194308,4,CS.bind(null,l,s),m)},useLayoutEffect:function(s,l){return Np(4194308,4,s,l)},useInsertionEffect:function(s,l){Np(4,2,s,l)},useMemo:function(s,l){var m=us();l=l===void 0?null:l;var E=s();if(Oc){ft(!0);try{s()}finally{ft(!1)}}return m.memoizedState=[E,l],E},useReducer:function(s,l,m){var E=us();if(m!==void 0){var T=m(l);if(Oc){ft(!0);try{m(l)}finally{ft(!1)}}}else T=l;return E.memoizedState=E.baseState=T,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:T},E.queue=s,s=s.dispatch=MM.bind(null,bn,s),[E.memoizedState,s]},useRef:function(s){var l=us();return s={current:s},l.memoizedState=s},useState:function(s){s=Ig(s);var l=s.queue,m=jS.bind(null,bn,l);return l.dispatch=m,[s.memoizedState,m]},useDebugValue:Lg,useDeferredValue:function(s,l){var m=us();return kg(m,s,l)},useTransition:function(){var s=Ig(!1);return s=IS.bind(null,bn,s.queue,!0,!1),us().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,m){var E=bn,T=us();if(Vn){if(m===void 0)throw Error(r(407));m=m()}else{if(m=l(),Ir===null)throw Error(r(349));(Bn&127)!==0||aS(E,l,m)}T.memoizedState=m;var D={value:m,getSnapshot:l};return T.queue=D,SS(lS.bind(null,E,D,s),[s]),E.flags|=2048,Mu(9,{destroy:void 0},oS.bind(null,E,D,m,l),null),m},useId:function(){var s=us(),l=Ir.identifierPrefix;if(Vn){var m=io,E=ro;m=(E&~(1<<32-Ft(E)-1)).toString(32)+m,l="_"+l+"R_"+m,m=xp++,0<m&&(l+="H"+m.toString(32)),l+="_"}else m=AM++,l="_"+l+"r_"+m.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Pg,useFormState:yS,useActionState:yS,useOptimistic:function(s){var l=us();l.memoizedState=l.baseState=s;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=m,l=Bg.bind(null,bn,!0,m),m.dispatch=l,[s,l]},useMemoCache:Tg,useCacheRefresh:function(){return us().memoizedState=IM.bind(null,bn)},useEffectEvent:function(s){var l=us(),m={impl:s};return l.memoizedState=m,function(){if((tr&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},Ug={readContext:Ki,use:Ap,useCallback:TS,useContext:Ki,useEffect:Dg,useImperativeHandle:NS,useInsertionEffect:_S,useLayoutEffect:AS,useMemo:OS,useReducer:Cp,useRef:ES,useState:function(){return Cp(Uo)},useDebugValue:Lg,useDeferredValue:function(s,l){var m=vi();return RS(m,xr.memoizedState,s,l)},useTransition:function(){var s=Cp(Uo)[0],l=vi().memoizedState;return[typeof s=="boolean"?s:rh(s),l]},useSyncExternalStore:sS,useId:LS,useHostTransitionStatus:Pg,useFormState:vS,useActionState:vS,useOptimistic:function(s,l){var m=vi();return fS(m,xr,s,l)},useMemoCache:Tg,useCacheRefresh:kS};Ug.useEffectEvent=xS;var zS={readContext:Ki,use:Ap,useCallback:TS,useContext:Ki,useEffect:Dg,useImperativeHandle:NS,useInsertionEffect:_S,useLayoutEffect:AS,useMemo:OS,useReducer:Rg,useRef:ES,useState:function(){return Rg(Uo)},useDebugValue:Lg,useDeferredValue:function(s,l){var m=vi();return xr===null?kg(m,s,l):RS(m,xr.memoizedState,s,l)},useTransition:function(){var s=Rg(Uo)[0],l=vi().memoizedState;return[typeof s=="boolean"?s:rh(s),l]},useSyncExternalStore:sS,useId:LS,useHostTransitionStatus:Pg,useFormState:wS,useActionState:wS,useOptimistic:function(s,l){var m=vi();return xr!==null?fS(m,xr,s,l):(m.baseState=s,[s,m.queue.dispatch])},useMemoCache:Tg,useCacheRefresh:kS};zS.useEffectEvent=xS;function zg(s,l,m,E){l=s.memoizedState,m=m(E,l),m=m==null?l:S({},l,m),s.memoizedState=m,s.lanes===0&&(s.updateQueue.baseState=m)}var Fg={enqueueSetState:function(s,l,m){s=s._reactInternals;var E=qs(),T=Nl(E);T.payload=l,m!=null&&(T.callback=m),l=Tl(s,T,E),l!==null&&(Ms(l,s,E),Jf(l,s,E))},enqueueReplaceState:function(s,l,m){s=s._reactInternals;var E=qs(),T=Nl(E);T.tag=1,T.payload=l,m!=null&&(T.callback=m),l=Tl(s,T,E),l!==null&&(Ms(l,s,E),Jf(l,s,E))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var m=qs(),E=Nl(m);E.tag=2,l!=null&&(E.callback=l),l=Tl(s,E,m),l!==null&&(Ms(l,s,m),Jf(l,s,m))}};function FS(s,l,m,E,T,D,V){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(E,D,V):l.prototype&&l.prototype.isPureReactComponent?!b(m,E)||!b(T,D):!0}function qS(s,l,m,E){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(m,E),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(m,E),l.state!==s&&Fg.enqueueReplaceState(l,l.state,null)}function Rc(s,l){var m=l;if("ref"in l){m={};for(var E in l)E!=="ref"&&(m[E]=l[E])}if(s=s.defaultProps){m===l&&(m=S({},m));for(var T in s)m[T]===void 0&&(m[T]=s[T])}return m}function $S(s){yn(s)}function VS(s){console.error(s)}function HS(s){yn(s)}function Rp(s,l){try{var m=s.onUncaughtError;m(l.value,{componentStack:l.stack})}catch(E){setTimeout(function(){throw E})}}function KS(s,l,m){try{var E=s.onCaughtError;E(m.value,{componentStack:m.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function qg(s,l,m){return m=Nl(m),m.tag=3,m.payload={element:null},m.callback=function(){Rp(s,l)},m}function GS(s){return s=Nl(s),s.tag=3,s}function YS(s,l,m,E){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var D=E.value;s.payload=function(){return T(D)},s.callback=function(){KS(l,m,E)}}var V=m.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(s.callback=function(){KS(l,m,E),typeof T!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var te=E.stack;this.componentDidCatch(E.value,{componentStack:te!==null?te:""})})}function DM(s,l,m,E,T){if(m.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(l=m.alternate,l!==null&&_u(l,m,T,!0),m=Bs.current,m!==null){switch(m.tag){case 31:case 13:return da===null?qp():m.alternate===null&&li===0&&(li=3),m.flags&=-257,m.flags|=65536,m.lanes=T,E===yp?m.flags|=16384:(l=m.updateQueue,l===null?m.updateQueue=new Set([E]):l.add(E),dy(s,E,T)),!1;case 22:return m.flags|=65536,E===yp?m.flags|=16384:(l=m.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([E])},m.updateQueue=l):(m=l.retryQueue,m===null?l.retryQueue=new Set([E]):m.add(E)),dy(s,E,T)),!1}throw Error(r(435,m.tag))}return dy(s,E,T),qp(),!1}if(Vn)return l=Bs.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=T,E!==og&&(s=Error(r(422),{cause:E}),Yf(ca(s,m)))):(E!==og&&(l=Error(r(423),{cause:E}),Yf(ca(l,m))),s=s.current.alternate,s.flags|=65536,T&=-T,s.lanes|=T,E=ca(E,m),T=qg(s.stateNode,E,T),vg(s,T),li!==4&&(li=2)),!1;var D=Error(r(520),{cause:E});if(D=ca(D,m),dh===null?dh=[D]:dh.push(D),li!==4&&(li=2),l===null)return!0;E=ca(E,m),m=l;do{switch(m.tag){case 3:return m.flags|=65536,s=T&-T,m.lanes|=s,s=qg(m.stateNode,E,s),vg(m,s),!1;case 1:if(l=m.type,D=m.stateNode,(m.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Ll===null||!Ll.has(D))))return m.flags|=65536,T&=-T,m.lanes|=T,T=GS(T),YS(T,s,m,E),vg(m,T),!1}m=m.return}while(m!==null);return!1}var $g=Error(r(461)),Ti=!1;function Gi(s,l,m,E){l.child=s===null?ZE(l,null,m,E):Tc(l,s.child,m,E)}function WS(s,l,m,E,T){m=m.render;var D=l.ref;if("ref"in E){var V={};for(var te in E)te!=="ref"&&(V[te]=E[te])}else V=E;return _c(l),E=_g(s,l,m,V,D,T),te=Ag(),s!==null&&!Ti?(Cg(s,l,T),zo(s,l,T)):(Vn&&te&&sg(l),l.flags|=1,Gi(s,l,E,T),l.child)}function XS(s,l,m,E,T){if(s===null){var D=m.type;return typeof D=="function"&&!ng(D)&&D.defaultProps===void 0&&m.compare===null?(l.tag=15,l.type=D,QS(s,l,D,E,T)):(s=fp(m.type,null,E,l,l.mode,T),s.ref=l.ref,s.return=l,l.child=s)}if(D=s.child,!Qg(s,T)){var V=D.memoizedProps;if(m=m.compare,m=m!==null?m:b,m(V,E)&&s.ref===l.ref)return zo(s,l,T)}return l.flags|=1,s=Lo(D,E),s.ref=l.ref,s.return=l,l.child=s}function QS(s,l,m,E,T){if(s!==null){var D=s.memoizedProps;if(b(D,E)&&s.ref===l.ref)if(Ti=!1,l.pendingProps=E=D,Qg(s,T))(s.flags&131072)!==0&&(Ti=!0);else return l.lanes=s.lanes,zo(s,l,T)}return Vg(s,l,m,E,T)}function ZS(s,l,m,E){var T=E.children,D=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((l.flags&128)!==0){if(D=D!==null?D.baseLanes|m:m,s!==null){for(E=l.child=s.child,T=0;E!==null;)T=T|E.lanes|E.childLanes,E=E.sibling;E=T&~D}else E=0,l.child=null;return JS(s,l,D,m,E)}if((m&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&mp(l,D!==null?D.cachePool:null),D!==null?tS(l,D):wg(),nS(l);else return E=l.lanes=536870912,JS(s,l,D!==null?D.baseLanes|m:m,m,E)}else D!==null?(mp(l,D.cachePool),tS(l,D),Rl(),l.memoizedState=null):(s!==null&&mp(l,null),wg(),Rl());return Gi(s,l,T,m),l.child}function ah(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function JS(s,l,m,E,T){var D=pg();return D=D===null?null:{parent:Ci._currentValue,pool:D},l.memoizedState={baseLanes:m,cachePool:D},s!==null&&mp(l,null),wg(),nS(l),s!==null&&_u(s,l,E,!0),l.childLanes=T,null}function Ip(s,l){return l=Dp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function ex(s,l,m){return Tc(l,s.child,null,m),s=Ip(l,l.pendingProps),s.flags|=2,Us(l),l.memoizedState=null,s}function LM(s,l,m){var E=l.pendingProps,T=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(Vn){if(E.mode==="hidden")return s=Ip(l,E),l.lanes=536870912,ah(null,s);if(Sg(l),(s=zr)?(s=h4(s,ha),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Sl!==null?{id:ro,overflow:io}:null,retryLane:536870912,hydrationErrors:null},m=PE(s),m.return=l,l.child=m,Hi=l,zr=null)):s=null,s===null)throw _l(l);return l.lanes=536870912,null}return Ip(l,E)}var D=s.memoizedState;if(D!==null){var V=D.dehydrated;if(Sg(l),T)if(l.flags&256)l.flags&=-257,l=ex(s,l,m);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Ti||_u(s,l,m,!1),T=(m&s.childLanes)!==0,Ti||T){if(E=Ir,E!==null&&(V=Ie(E,m),V!==0&&V!==D.retryLane))throw D.retryLane=V,ei(s,V),Ms(E,s,V),$g;qp(),l=ex(s,l,m)}else s=D.treeContext,zr=pa(V.nextSibling),Hi=l,Vn=!0,xl=null,ha=!1,s!==null&&zE(l,s),l=Ip(l,E),l.flags|=4096;return l}return s=Lo(s.child,{mode:E.mode,children:E.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Mp(s,l){var m=l.ref;if(m===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(s===null||s.ref!==m)&&(l.flags|=4194816)}}function Vg(s,l,m,E,T){return _c(l),m=_g(s,l,m,E,void 0,T),E=Ag(),s!==null&&!Ti?(Cg(s,l,T),zo(s,l,T)):(Vn&&E&&sg(l),l.flags|=1,Gi(s,l,m,T),l.child)}function tx(s,l,m,E,T,D){return _c(l),l.updateQueue=null,m=iS(l,E,m,T),rS(s),E=Ag(),s!==null&&!Ti?(Cg(s,l,D),zo(s,l,D)):(Vn&&E&&sg(l),l.flags|=1,Gi(s,l,m,D),l.child)}function nx(s,l,m,E,T){if(_c(l),l.stateNode===null){var D=wu,V=m.contextType;typeof V=="object"&&V!==null&&(D=Ki(V)),D=new m(E,D),l.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=Fg,l.stateNode=D,D._reactInternals=l,D=l.stateNode,D.props=E,D.state=l.memoizedState,D.refs={},gg(l),V=m.contextType,D.context=typeof V=="object"&&V!==null?Ki(V):wu,D.state=l.memoizedState,V=m.getDerivedStateFromProps,typeof V=="function"&&(zg(l,m,V,E),D.state=l.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(V=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),V!==D.state&&Fg.enqueueReplaceState(D,D.state,null),th(l,E,D,T),eh(),D.state=l.memoizedState),typeof D.componentDidMount=="function"&&(l.flags|=4194308),E=!0}else if(s===null){D=l.stateNode;var te=l.memoizedProps,Ae=Rc(m,te);D.props=Ae;var Be=D.context,Xe=m.contextType;V=wu,typeof Xe=="object"&&Xe!==null&&(V=Ki(Xe));var it=m.getDerivedStateFromProps;Xe=typeof it=="function"||typeof D.getSnapshotBeforeUpdate=="function",te=l.pendingProps!==te,Xe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(te||Be!==V)&&qS(l,D,E,V),Cl=!1;var Fe=l.memoizedState;D.state=Fe,th(l,E,D,T),eh(),Be=l.memoizedState,te||Fe!==Be||Cl?(typeof it=="function"&&(zg(l,m,it,E),Be=l.memoizedState),(Ae=Cl||FS(l,m,Ae,E,Fe,Be,V))?(Xe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=E,l.memoizedState=Be),D.props=E,D.state=Be,D.context=V,E=Ae):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),E=!1)}else{D=l.stateNode,yg(s,l),V=l.memoizedProps,Xe=Rc(m,V),D.props=Xe,it=l.pendingProps,Fe=D.context,Be=m.contextType,Ae=wu,typeof Be=="object"&&Be!==null&&(Ae=Ki(Be)),te=m.getDerivedStateFromProps,(Be=typeof te=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(V!==it||Fe!==Ae)&&qS(l,D,E,Ae),Cl=!1,Fe=l.memoizedState,D.state=Fe,th(l,E,D,T),eh();var He=l.memoizedState;V!==it||Fe!==He||Cl||s!==null&&s.dependencies!==null&&dp(s.dependencies)?(typeof te=="function"&&(zg(l,m,te,E),He=l.memoizedState),(Xe=Cl||FS(l,m,Xe,E,Fe,He,Ae)||s!==null&&s.dependencies!==null&&dp(s.dependencies))?(Be||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(E,He,Ae),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(E,He,Ae)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||V===s.memoizedProps&&Fe===s.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||V===s.memoizedProps&&Fe===s.memoizedState||(l.flags|=1024),l.memoizedProps=E,l.memoizedState=He),D.props=E,D.state=He,D.context=Ae,E=Xe):(typeof D.componentDidUpdate!="function"||V===s.memoizedProps&&Fe===s.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||V===s.memoizedProps&&Fe===s.memoizedState||(l.flags|=1024),E=!1)}return D=E,Mp(s,l),E=(l.flags&128)!==0,D||E?(D=l.stateNode,m=E&&typeof m.getDerivedStateFromError!="function"?null:D.render(),l.flags|=1,s!==null&&E?(l.child=Tc(l,s.child,null,T),l.child=Tc(l,null,m,T)):Gi(s,l,m,T),l.memoizedState=D.state,s=l.child):s=zo(s,l,T),s}function rx(s,l,m,E){return Sc(),l.flags|=256,Gi(s,l,m,E),l.child}var Hg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kg(s){return{baseLanes:s,cachePool:KE()}}function Gg(s,l,m){return s=s!==null?s.childLanes&~m:0,l&&(s|=Fs),s}function ix(s,l,m){var E=l.pendingProps,T=!1,D=(l.flags&128)!==0,V;if((V=D)||(V=s!==null&&s.memoizedState===null?!1:(yi.current&2)!==0),V&&(T=!0,l.flags&=-129),V=(l.flags&32)!==0,l.flags&=-33,s===null){if(Vn){if(T?Ol(l):Rl(),(s=zr)?(s=h4(s,ha),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Sl!==null?{id:ro,overflow:io}:null,retryLane:536870912,hydrationErrors:null},m=PE(s),m.return=l,l.child=m,Hi=l,zr=null)):s=null,s===null)throw _l(l);return Oy(s)?l.lanes=32:l.lanes=536870912,null}var te=E.children;return E=E.fallback,T?(Rl(),T=l.mode,te=Dp({mode:"hidden",children:te},T),E=Ec(E,T,m,null),te.return=l,E.return=l,te.sibling=E,l.child=te,E=l.child,E.memoizedState=Kg(m),E.childLanes=Gg(s,V,m),l.memoizedState=Hg,ah(null,E)):(Ol(l),Yg(l,te))}var Ae=s.memoizedState;if(Ae!==null&&(te=Ae.dehydrated,te!==null)){if(D)l.flags&256?(Ol(l),l.flags&=-257,l=Wg(s,l,m)):l.memoizedState!==null?(Rl(),l.child=s.child,l.flags|=128,l=null):(Rl(),te=E.fallback,T=l.mode,E=Dp({mode:"visible",children:E.children},T),te=Ec(te,T,m,null),te.flags|=2,E.return=l,te.return=l,E.sibling=te,l.child=E,Tc(l,s.child,null,m),E=l.child,E.memoizedState=Kg(m),E.childLanes=Gg(s,V,m),l.memoizedState=Hg,l=ah(null,E));else if(Ol(l),Oy(te)){if(V=te.nextSibling&&te.nextSibling.dataset,V)var Be=V.dgst;V=Be,E=Error(r(419)),E.stack="",E.digest=V,Yf({value:E,source:null,stack:null}),l=Wg(s,l,m)}else if(Ti||_u(s,l,m,!1),V=(m&s.childLanes)!==0,Ti||V){if(V=Ir,V!==null&&(E=Ie(V,m),E!==0&&E!==Ae.retryLane))throw Ae.retryLane=E,ei(s,E),Ms(V,s,E),$g;Ty(te)||qp(),l=Wg(s,l,m)}else Ty(te)?(l.flags|=192,l.child=s.child,l=null):(s=Ae.treeContext,zr=pa(te.nextSibling),Hi=l,Vn=!0,xl=null,ha=!1,s!==null&&zE(l,s),l=Yg(l,E.children),l.flags|=4096);return l}return T?(Rl(),te=E.fallback,T=l.mode,Ae=s.child,Be=Ae.sibling,E=Lo(Ae,{mode:"hidden",children:E.children}),E.subtreeFlags=Ae.subtreeFlags&65011712,Be!==null?te=Lo(Be,te):(te=Ec(te,T,m,null),te.flags|=2),te.return=l,E.return=l,E.sibling=te,l.child=E,ah(null,E),E=l.child,te=s.child.memoizedState,te===null?te=Kg(m):(T=te.cachePool,T!==null?(Ae=Ci._currentValue,T=T.parent!==Ae?{parent:Ae,pool:Ae}:T):T=KE(),te={baseLanes:te.baseLanes|m,cachePool:T}),E.memoizedState=te,E.childLanes=Gg(s,V,m),l.memoizedState=Hg,ah(s.child,E)):(Ol(l),m=s.child,s=m.sibling,m=Lo(m,{mode:"visible",children:E.children}),m.return=l,m.sibling=null,s!==null&&(V=l.deletions,V===null?(l.deletions=[s],l.flags|=16):V.push(s)),l.child=m,l.memoizedState=null,m)}function Yg(s,l){return l=Dp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Dp(s,l){return s=Ps(22,s,null,l),s.lanes=0,s}function Wg(s,l,m){return Tc(l,s.child,null,m),s=Yg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function sx(s,l,m){s.lanes|=l;var E=s.alternate;E!==null&&(E.lanes|=l),ug(s.return,l,m)}function Xg(s,l,m,E,T,D){var V=s.memoizedState;V===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:E,tail:m,tailMode:T,treeForkCount:D}:(V.isBackwards=l,V.rendering=null,V.renderingStartTime=0,V.last=E,V.tail=m,V.tailMode=T,V.treeForkCount=D)}function ax(s,l,m){var E=l.pendingProps,T=E.revealOrder,D=E.tail;E=E.children;var V=yi.current,te=(V&2)!==0;if(te?(V=V&1|2,l.flags|=128):V&=1,ae(yi,V),Gi(s,l,E,m),E=Vn?Gf:0,!te&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&sx(s,m,l);else if(s.tag===19)sx(s,m,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(T){case"forwards":for(m=l.child,T=null;m!==null;)s=m.alternate,s!==null&&Ep(s)===null&&(T=m),m=m.sibling;m=T,m===null?(T=l.child,l.child=null):(T=m.sibling,m.sibling=null),Xg(l,!1,T,m,D,E);break;case"backwards":case"unstable_legacy-backwards":for(m=null,T=l.child,l.child=null;T!==null;){if(s=T.alternate,s!==null&&Ep(s)===null){l.child=T;break}s=T.sibling,T.sibling=m,m=T,T=s}Xg(l,!0,m,null,D,E);break;case"together":Xg(l,!1,null,null,void 0,E);break;default:l.memoizedState=null}return l.child}function zo(s,l,m){if(s!==null&&(l.dependencies=s.dependencies),Dl|=l.lanes,(m&l.childLanes)===0)if(s!==null){if(_u(s,l,m,!1),(m&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,m=Lo(s,s.pendingProps),l.child=m,m.return=l;s.sibling!==null;)s=s.sibling,m=m.sibling=Lo(s,s.pendingProps),m.return=l;m.sibling=null}return l.child}function Qg(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&dp(s)))}function kM(s,l,m){switch(l.tag){case 3:Ve(l,l.stateNode.containerInfo),Al(l,Ci,s.memoizedState.cache),Sc();break;case 27:case 5:bt(l);break;case 4:Ve(l,l.stateNode.containerInfo);break;case 10:Al(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Sg(l),null;break;case 13:var E=l.memoizedState;if(E!==null)return E.dehydrated!==null?(Ol(l),l.flags|=128,null):(m&l.child.childLanes)!==0?ix(s,l,m):(Ol(l),s=zo(s,l,m),s!==null?s.sibling:null);Ol(l);break;case 19:var T=(s.flags&128)!==0;if(E=(m&l.childLanes)!==0,E||(_u(s,l,m,!1),E=(m&l.childLanes)!==0),T){if(E)return ax(s,l,m);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ae(yi,yi.current),E)break;return null;case 22:return l.lanes=0,ZS(s,l,m,l.pendingProps);case 24:Al(l,Ci,s.memoizedState.cache)}return zo(s,l,m)}function ox(s,l,m){if(s!==null)if(s.memoizedProps!==l.pendingProps)Ti=!0;else{if(!Qg(s,m)&&(l.flags&128)===0)return Ti=!1,kM(s,l,m);Ti=(s.flags&131072)!==0}else Ti=!1,Vn&&(l.flags&1048576)!==0&&UE(l,Gf,l.index);switch(l.lanes=0,l.tag){case 16:e:{var E=l.pendingProps;if(s=Cc(l.elementType),l.type=s,typeof s=="function")ng(s)?(E=Rc(s,E),l.tag=1,l=nx(null,l,s,E,m)):(l.tag=0,l=Vg(null,l,s,E,m));else{if(s!=null){var T=s.$$typeof;if(T===$){l.tag=11,l=WS(null,l,s,E,m);break e}else if(T===B){l.tag=14,l=XS(null,l,s,E,m);break e}}throw l=Ee(s)||s,Error(r(306,l,""))}}return l;case 0:return Vg(s,l,l.type,l.pendingProps,m);case 1:return E=l.type,T=Rc(E,l.pendingProps),nx(s,l,E,T,m);case 3:e:{if(Ve(l,l.stateNode.containerInfo),s===null)throw Error(r(387));E=l.pendingProps;var D=l.memoizedState;T=D.element,yg(s,l),th(l,E,null,m);var V=l.memoizedState;if(E=V.cache,Al(l,Ci,E),E!==D.cache&&fg(l,[Ci],m,!0),eh(),E=V.element,D.isDehydrated)if(D={element:E,isDehydrated:!1,cache:V.cache},l.updateQueue.baseState=D,l.memoizedState=D,l.flags&256){l=rx(s,l,E,m);break e}else if(E!==T){T=ca(Error(r(424)),l),Yf(T),l=rx(s,l,E,m);break e}else for(s=l.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,zr=pa(s.firstChild),Hi=l,Vn=!0,xl=null,ha=!0,m=ZE(l,null,E,m),l.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Sc(),E===T){l=zo(s,l,m);break e}Gi(s,l,E,m)}l=l.child}return l;case 26:return Mp(s,l),s===null?(m=v4(l.type,null,l.pendingProps,null))?l.memoizedState=m:Vn||(m=l.type,s=l.pendingProps,E=Wp(be.current).createElement(m),E[mt]=l,E[ut]=s,Yi(E,m,s),Nn(E),l.stateNode=E):l.memoizedState=v4(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return bt(l),s===null&&Vn&&(E=l.stateNode=m4(l.type,l.pendingProps,be.current),Hi=l,ha=!0,T=zr,Bl(l.type)?(Ry=T,zr=pa(E.firstChild)):zr=T),Gi(s,l,l.pendingProps.children,m),Mp(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Vn&&((T=E=zr)&&(E=fD(E,l.type,l.pendingProps,ha),E!==null?(l.stateNode=E,Hi=l,zr=pa(E.firstChild),ha=!1,T=!0):T=!1),T||_l(l)),bt(l),T=l.type,D=l.pendingProps,V=s!==null?s.memoizedProps:null,E=D.children,Ay(T,D)?E=null:V!==null&&Ay(T,V)&&(l.flags|=32),l.memoizedState!==null&&(T=_g(s,l,CM,null,null,m),Eh._currentValue=T),Mp(s,l),Gi(s,l,E,m),l.child;case 6:return s===null&&Vn&&((s=m=zr)&&(m=hD(m,l.pendingProps,ha),m!==null?(l.stateNode=m,Hi=l,zr=null,s=!0):s=!1),s||_l(l)),null;case 13:return ix(s,l,m);case 4:return Ve(l,l.stateNode.containerInfo),E=l.pendingProps,s===null?l.child=Tc(l,null,E,m):Gi(s,l,E,m),l.child;case 11:return WS(s,l,l.type,l.pendingProps,m);case 7:return Gi(s,l,l.pendingProps,m),l.child;case 8:return Gi(s,l,l.pendingProps.children,m),l.child;case 12:return Gi(s,l,l.pendingProps.children,m),l.child;case 10:return E=l.pendingProps,Al(l,l.type,E.value),Gi(s,l,E.children,m),l.child;case 9:return T=l.type._context,E=l.pendingProps.children,_c(l),T=Ki(T),E=E(T),l.flags|=1,Gi(s,l,E,m),l.child;case 14:return XS(s,l,l.type,l.pendingProps,m);case 15:return QS(s,l,l.type,l.pendingProps,m);case 19:return ax(s,l,m);case 31:return LM(s,l,m);case 22:return ZS(s,l,m,l.pendingProps);case 24:return _c(l),E=Ki(Ci),s===null?(T=pg(),T===null&&(T=Ir,D=hg(),T.pooledCache=D,D.refCount++,D!==null&&(T.pooledCacheLanes|=m),T=D),l.memoizedState={parent:E,cache:T},gg(l),Al(l,Ci,T)):((s.lanes&m)!==0&&(yg(s,l),th(l,null,null,m),eh()),T=s.memoizedState,D=l.memoizedState,T.parent!==E?(T={parent:E,cache:E},l.memoizedState=T,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=T),Al(l,Ci,E)):(E=D.cache,Al(l,Ci,E),E!==T.cache&&fg(l,[Ci],m,!0))),Gi(s,l,l.pendingProps.children,m),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Fo(s){s.flags|=4}function Zg(s,l,m,E,T){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(T&335544128)===T)if(s.stateNode.complete)s.flags|=8192;else if(Lx())s.flags|=8192;else throw Nc=yp,mg}else s.flags&=-16777217}function lx(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!x4(l))if(Lx())s.flags|=8192;else throw Nc=yp,mg}function Lp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Dn():536870912,s.lanes|=l,ju|=l)}function oh(s,l){if(!Vn)switch(s.tailMode){case"hidden":l=s.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?s.tail=null:m.sibling=null;break;case"collapsed":m=s.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:E.sibling=null}}function Fr(s){var l=s.alternate!==null&&s.alternate.child===s.child,m=0,E=0;if(l)for(var T=s.child;T!==null;)m|=T.lanes|T.childLanes,E|=T.subtreeFlags&65011712,E|=T.flags&65011712,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)m|=T.lanes|T.childLanes,E|=T.subtreeFlags,E|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=E,s.childLanes=m,l}function jM(s,l,m){var E=l.pendingProps;switch(ag(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(l),null;case 1:return Fr(l),null;case 3:return m=l.stateNode,E=null,s!==null&&(E=s.memoizedState.cache),l.memoizedState.cache!==E&&(l.flags|=2048),Po(Ci),$e(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(xu(l)?Fo(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,lg())),Fr(l),null;case 26:var T=l.type,D=l.memoizedState;return s===null?(Fo(l),D!==null?(Fr(l),lx(l,D)):(Fr(l),Zg(l,T,null,E,m))):D?D!==s.memoizedState?(Fo(l),Fr(l),lx(l,D)):(Fr(l),l.flags&=-16777217):(s=s.memoizedProps,s!==E&&Fo(l),Fr(l),Zg(l,T,s,E,m)),null;case 27:if(xe(l),m=be.current,T=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==E&&Fo(l);else{if(!E){if(l.stateNode===null)throw Error(r(166));return Fr(l),null}s=Y.current,xu(l)?FE(l):(s=m4(T,E,m),l.stateNode=s,Fo(l))}return Fr(l),null;case 5:if(xe(l),T=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==E&&Fo(l);else{if(!E){if(l.stateNode===null)throw Error(r(166));return Fr(l),null}if(D=Y.current,xu(l))FE(l);else{var V=Wp(be.current);switch(D){case 1:D=V.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:D=V.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":D=V.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":D=V.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":D=V.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof E.is=="string"?V.createElement("select",{is:E.is}):V.createElement("select"),E.multiple?D.multiple=!0:E.size&&(D.size=E.size);break;default:D=typeof E.is=="string"?V.createElement(T,{is:E.is}):V.createElement(T)}}D[mt]=l,D[ut]=E;e:for(V=l.child;V!==null;){if(V.tag===5||V.tag===6)D.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===l)break e;for(;V.sibling===null;){if(V.return===null||V.return===l)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}l.stateNode=D;e:switch(Yi(D,T,E),T){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&Fo(l)}}return Fr(l),Zg(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,m),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==E&&Fo(l);else{if(typeof E!="string"&&l.stateNode===null)throw Error(r(166));if(s=be.current,xu(l)){if(s=l.stateNode,m=l.memoizedProps,E=null,T=Hi,T!==null)switch(T.tag){case 27:case 5:E=T.memoizedProps}s[mt]=l,s=!!(s.nodeValue===m||E!==null&&E.suppressHydrationWarning===!0||i4(s.nodeValue,m)),s||_l(l,!0)}else s=Wp(s).createTextNode(E),s[mt]=l,l.stateNode=s}return Fr(l),null;case 31:if(m=l.memoizedState,s===null||s.memoizedState!==null){if(E=xu(l),m!==null){if(s===null){if(!E)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[mt]=l}else Sc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Fr(l),s=!1}else m=lg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),s=!0;if(!s)return l.flags&256?(Us(l),l):(Us(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Fr(l),null;case 13:if(E=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(T=xu(l),E!==null&&E.dehydrated!==null){if(s===null){if(!T)throw Error(r(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[mt]=l}else Sc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Fr(l),T=!1}else T=lg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=T),T=!0;if(!T)return l.flags&256?(Us(l),l):(Us(l),null)}return Us(l),(l.flags&128)!==0?(l.lanes=m,l):(m=E!==null,s=s!==null&&s.memoizedState!==null,m&&(E=l.child,T=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(T=E.alternate.memoizedState.cachePool.pool),D=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(D=E.memoizedState.cachePool.pool),D!==T&&(E.flags|=2048)),m!==s&&m&&(l.child.flags|=8192),Lp(l,l.updateQueue),Fr(l),null);case 4:return $e(),s===null&&wy(l.stateNode.containerInfo),Fr(l),null;case 10:return Po(l.type),Fr(l),null;case 19:if(oe(yi),E=l.memoizedState,E===null)return Fr(l),null;if(T=(l.flags&128)!==0,D=E.rendering,D===null)if(T)oh(E,!1);else{if(li!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(D=Ep(s),D!==null){for(l.flags|=128,oh(E,!1),s=D.updateQueue,l.updateQueue=s,Lp(l,s),l.subtreeFlags=0,s=m,m=l.child;m!==null;)jE(m,s),m=m.sibling;return ae(yi,yi.current&1|2),Vn&&ko(l,E.treeForkCount),l.child}s=s.sibling}E.tail!==null&&Jt()>Up&&(l.flags|=128,T=!0,oh(E,!1),l.lanes=4194304)}else{if(!T)if(s=Ep(D),s!==null){if(l.flags|=128,T=!0,s=s.updateQueue,l.updateQueue=s,Lp(l,s),oh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!D.alternate&&!Vn)return Fr(l),null}else 2*Jt()-E.renderingStartTime>Up&&m!==536870912&&(l.flags|=128,T=!0,oh(E,!1),l.lanes=4194304);E.isBackwards?(D.sibling=l.child,l.child=D):(s=E.last,s!==null?s.sibling=D:l.child=D,E.last=D)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Jt(),s.sibling=null,m=yi.current,ae(yi,T?m&1|2:m&1),Vn&&ko(l,E.treeForkCount),s):(Fr(l),null);case 22:case 23:return Us(l),Eg(),E=l.memoizedState!==null,s!==null?s.memoizedState!==null!==E&&(l.flags|=8192):E&&(l.flags|=8192),E?(m&536870912)!==0&&(l.flags&128)===0&&(Fr(l),l.subtreeFlags&6&&(l.flags|=8192)):Fr(l),m=l.updateQueue,m!==null&&Lp(l,m.retryQueue),m=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),E=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(E=l.memoizedState.cachePool.pool),E!==m&&(l.flags|=2048),s!==null&&oe(Ac),null;case 24:return m=null,s!==null&&(m=s.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Po(Ci),Fr(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function PM(s,l){switch(ag(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Po(Ci),$e(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return xe(l),null;case 31:if(l.memoizedState!==null){if(Us(l),l.alternate===null)throw Error(r(340));Sc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Us(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Sc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return oe(yi),null;case 4:return $e(),null;case 10:return Po(l.type),null;case 22:case 23:return Us(l),Eg(),s!==null&&oe(Ac),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Po(Ci),null;case 25:return null;default:return null}}function cx(s,l){switch(ag(l),l.tag){case 3:Po(Ci),$e();break;case 26:case 27:case 5:xe(l);break;case 4:$e();break;case 31:l.memoizedState!==null&&Us(l);break;case 13:Us(l);break;case 19:oe(yi);break;case 10:Po(l.type);break;case 22:case 23:Us(l),Eg(),s!==null&&oe(Ac);break;case 24:Po(Ci)}}function lh(s,l){try{var m=l.updateQueue,E=m!==null?m.lastEffect:null;if(E!==null){var T=E.next;m=T;do{if((m.tag&s)===s){E=void 0;var D=m.create,V=m.inst;E=D(),V.destroy=E}m=m.next}while(m!==T)}}catch(te){fr(l,l.return,te)}}function Il(s,l,m){try{var E=l.updateQueue,T=E!==null?E.lastEffect:null;if(T!==null){var D=T.next;E=D;do{if((E.tag&s)===s){var V=E.inst,te=V.destroy;if(te!==void 0){V.destroy=void 0,T=l;var Ae=m,Be=te;try{Be()}catch(Xe){fr(T,Ae,Xe)}}}E=E.next}while(E!==D)}}catch(Xe){fr(l,l.return,Xe)}}function ux(s){var l=s.updateQueue;if(l!==null){var m=s.stateNode;try{eS(l,m)}catch(E){fr(s,s.return,E)}}}function fx(s,l,m){m.props=Rc(s.type,s.memoizedProps),m.state=s.memoizedState;try{m.componentWillUnmount()}catch(E){fr(s,l,E)}}function ch(s,l){try{var m=s.ref;if(m!==null){switch(s.tag){case 26:case 27:case 5:var E=s.stateNode;break;case 30:E=s.stateNode;break;default:E=s.stateNode}typeof m=="function"?s.refCleanup=m(E):m.current=E}}catch(T){fr(s,l,T)}}function so(s,l){var m=s.ref,E=s.refCleanup;if(m!==null)if(typeof E=="function")try{E()}catch(T){fr(s,l,T)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){fr(s,l,T)}else m.current=null}function hx(s){var l=s.type,m=s.memoizedProps,E=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":m.autoFocus&&E.focus();break e;case"img":m.src?E.src=m.src:m.srcSet&&(E.srcset=m.srcSet)}}catch(T){fr(s,s.return,T)}}function Jg(s,l,m){try{var E=s.stateNode;sD(E,s.type,m,l),E[ut]=l}catch(T){fr(s,s.return,T)}}function dx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Bl(s.type)||s.tag===4}function ey(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||dx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Bl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ty(s,l,m){var E=s.tag;if(E===5||E===6)s=s.stateNode,l?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(s,l):(l=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,l.appendChild(s),m=m._reactRootContainer,m!=null||l.onclick!==null||(l.onclick=ai));else if(E!==4&&(E===27&&Bl(s.type)&&(m=s.stateNode,l=null),s=s.child,s!==null))for(ty(s,l,m),s=s.sibling;s!==null;)ty(s,l,m),s=s.sibling}function kp(s,l,m){var E=s.tag;if(E===5||E===6)s=s.stateNode,l?m.insertBefore(s,l):m.appendChild(s);else if(E!==4&&(E===27&&Bl(s.type)&&(m=s.stateNode),s=s.child,s!==null))for(kp(s,l,m),s=s.sibling;s!==null;)kp(s,l,m),s=s.sibling}function px(s){var l=s.stateNode,m=s.memoizedProps;try{for(var E=s.type,T=l.attributes;T.length;)l.removeAttributeNode(T[0]);Yi(l,E,m),l[mt]=s,l[ut]=m}catch(D){fr(s,s.return,D)}}var qo=!1,Oi=!1,ny=!1,mx=typeof WeakSet=="function"?WeakSet:Set,Pi=null;function BM(s,l){if(s=s.containerInfo,xy=nm,s=P(s),z(s)){if("selectionStart"in s)var m={start:s.selectionStart,end:s.selectionEnd};else e:{m=(m=s.ownerDocument)&&m.defaultView||window;var E=m.getSelection&&m.getSelection();if(E&&E.rangeCount!==0){m=E.anchorNode;var T=E.anchorOffset,D=E.focusNode;E=E.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var V=0,te=-1,Ae=-1,Be=0,Xe=0,it=s,Fe=null;t:for(;;){for(var He;it!==m||T!==0&&it.nodeType!==3||(te=V+T),it!==D||E!==0&&it.nodeType!==3||(Ae=V+E),it.nodeType===3&&(V+=it.nodeValue.length),(He=it.firstChild)!==null;)Fe=it,it=He;for(;;){if(it===s)break t;if(Fe===m&&++Be===T&&(te=V),Fe===D&&++Xe===E&&(Ae=V),(He=it.nextSibling)!==null)break;it=Fe,Fe=it.parentNode}it=He}m=te===-1||Ae===-1?null:{start:te,end:Ae}}else m=null}m=m||{start:0,end:0}}else m=null;for(_y={focusedElem:s,selectionRange:m},nm=!1,Pi=l;Pi!==null;)if(l=Pi,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Pi=s;else for(;Pi!==null;){switch(l=Pi,D=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(m=0;m<s.length;m++)T=s[m],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&D!==null){s=void 0,m=l,T=D.memoizedProps,D=D.memoizedState,E=m.stateNode;try{var It=Rc(m.type,T);s=E.getSnapshotBeforeUpdate(It,D),E.__reactInternalSnapshotBeforeUpdate=s}catch(Xt){fr(m,m.return,Xt)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,m=s.nodeType,m===9)Ny(s);else if(m===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ny(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Pi=s;break}Pi=l.return}}function gx(s,l,m){var E=m.flags;switch(m.tag){case 0:case 11:case 15:Vo(s,m),E&4&&lh(5,m);break;case 1:if(Vo(s,m),E&4)if(s=m.stateNode,l===null)try{s.componentDidMount()}catch(V){fr(m,m.return,V)}else{var T=Rc(m.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(T,l,s.__reactInternalSnapshotBeforeUpdate)}catch(V){fr(m,m.return,V)}}E&64&&ux(m),E&512&&ch(m,m.return);break;case 3:if(Vo(s,m),E&64&&(s=m.updateQueue,s!==null)){if(l=null,m.child!==null)switch(m.child.tag){case 27:case 5:l=m.child.stateNode;break;case 1:l=m.child.stateNode}try{eS(s,l)}catch(V){fr(m,m.return,V)}}break;case 27:l===null&&E&4&&px(m);case 26:case 5:Vo(s,m),l===null&&E&4&&hx(m),E&512&&ch(m,m.return);break;case 12:Vo(s,m);break;case 31:Vo(s,m),E&4&&bx(s,m);break;case 13:Vo(s,m),E&4&&wx(s,m),E&64&&(s=m.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(m=GM.bind(null,m),dD(s,m))));break;case 22:if(E=m.memoizedState!==null||qo,!E){l=l!==null&&l.memoizedState!==null||Oi,T=qo;var D=Oi;qo=E,(Oi=l)&&!D?Ho(s,m,(m.subtreeFlags&8772)!==0):Vo(s,m),qo=T,Oi=D}break;case 30:break;default:Vo(s,m)}}function yx(s){var l=s.alternate;l!==null&&(s.alternate=null,yx(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&wn(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Kr=null,Ts=!1;function $o(s,l,m){for(m=m.child;m!==null;)vx(s,l,m),m=m.sibling}function vx(s,l,m){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Pn,m)}catch{}switch(m.tag){case 26:Oi||so(m,l),$o(s,l,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Oi||so(m,l);var E=Kr,T=Ts;Bl(m.type)&&(Kr=m.stateNode,Ts=!1),$o(s,l,m),vh(m.stateNode),Kr=E,Ts=T;break;case 5:Oi||so(m,l);case 6:if(E=Kr,T=Ts,Kr=null,$o(s,l,m),Kr=E,Ts=T,Kr!==null)if(Ts)try{(Kr.nodeType===9?Kr.body:Kr.nodeName==="HTML"?Kr.ownerDocument.body:Kr).removeChild(m.stateNode)}catch(D){fr(m,l,D)}else try{Kr.removeChild(m.stateNode)}catch(D){fr(m,l,D)}break;case 18:Kr!==null&&(Ts?(s=Kr,u4(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,m.stateNode),Vu(s)):u4(Kr,m.stateNode));break;case 4:E=Kr,T=Ts,Kr=m.stateNode.containerInfo,Ts=!0,$o(s,l,m),Kr=E,Ts=T;break;case 0:case 11:case 14:case 15:Il(2,m,l),Oi||Il(4,m,l),$o(s,l,m);break;case 1:Oi||(so(m,l),E=m.stateNode,typeof E.componentWillUnmount=="function"&&fx(m,l,E)),$o(s,l,m);break;case 21:$o(s,l,m);break;case 22:Oi=(E=Oi)||m.memoizedState!==null,$o(s,l,m),Oi=E;break;default:$o(s,l,m)}}function bx(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Vu(s)}catch(m){fr(l,l.return,m)}}}function wx(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Vu(s)}catch(m){fr(l,l.return,m)}}function UM(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new mx),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new mx),l;default:throw Error(r(435,s.tag))}}function jp(s,l){var m=UM(s);l.forEach(function(E){if(!m.has(E)){m.add(E);var T=YM.bind(null,s,E);E.then(T,T)}})}function Os(s,l){var m=l.deletions;if(m!==null)for(var E=0;E<m.length;E++){var T=m[E],D=s,V=l,te=V;e:for(;te!==null;){switch(te.tag){case 27:if(Bl(te.type)){Kr=te.stateNode,Ts=!1;break e}break;case 5:Kr=te.stateNode,Ts=!1;break e;case 3:case 4:Kr=te.stateNode.containerInfo,Ts=!0;break e}te=te.return}if(Kr===null)throw Error(r(160));vx(D,V,T),Kr=null,Ts=!1,D=T.alternate,D!==null&&(D.return=null),T.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Ex(l,s),l=l.sibling}var ka=null;function Ex(s,l){var m=s.alternate,E=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Os(l,s),Rs(s),E&4&&(Il(3,s,s.return),lh(3,s),Il(5,s,s.return));break;case 1:Os(l,s),Rs(s),E&512&&(Oi||m===null||so(m,m.return)),E&64&&qo&&(s=s.updateQueue,s!==null&&(E=s.callbacks,E!==null&&(m=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=m===null?E:m.concat(E))));break;case 26:var T=ka;if(Os(l,s),Rs(s),E&512&&(Oi||m===null||so(m,m.return)),E&4){var D=m!==null?m.memoizedState:null;if(E=s.memoizedState,m===null)if(E===null)if(s.stateNode===null){e:{E=s.type,m=s.memoizedProps,T=T.ownerDocument||T;t:switch(E){case"title":D=T.getElementsByTagName("title")[0],(!D||D[Gn]||D[mt]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=T.createElement(E),T.head.insertBefore(D,T.querySelector("head > title"))),Yi(D,E,m),D[mt]=s,Nn(D),E=D;break e;case"link":var V=E4("link","href",T).get(E+(m.href||""));if(V){for(var te=0;te<V.length;te++)if(D=V[te],D.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&D.getAttribute("rel")===(m.rel==null?null:m.rel)&&D.getAttribute("title")===(m.title==null?null:m.title)&&D.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){V.splice(te,1);break t}}D=T.createElement(E),Yi(D,E,m),T.head.appendChild(D);break;case"meta":if(V=E4("meta","content",T).get(E+(m.content||""))){for(te=0;te<V.length;te++)if(D=V[te],D.getAttribute("content")===(m.content==null?null:""+m.content)&&D.getAttribute("name")===(m.name==null?null:m.name)&&D.getAttribute("property")===(m.property==null?null:m.property)&&D.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&D.getAttribute("charset")===(m.charSet==null?null:m.charSet)){V.splice(te,1);break t}}D=T.createElement(E),Yi(D,E,m),T.head.appendChild(D);break;default:throw Error(r(468,E))}D[mt]=s,Nn(D),E=D}s.stateNode=E}else S4(T,s.type,s.stateNode);else s.stateNode=w4(T,E,s.memoizedProps);else D!==E?(D===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):D.count--,E===null?S4(T,s.type,s.stateNode):w4(T,E,s.memoizedProps)):E===null&&s.stateNode!==null&&Jg(s,s.memoizedProps,m.memoizedProps)}break;case 27:Os(l,s),Rs(s),E&512&&(Oi||m===null||so(m,m.return)),m!==null&&E&4&&Jg(s,s.memoizedProps,m.memoizedProps);break;case 5:if(Os(l,s),Rs(s),E&512&&(Oi||m===null||so(m,m.return)),s.flags&32){T=s.stateNode;try{Yt(T,"")}catch(It){fr(s,s.return,It)}}E&4&&s.stateNode!=null&&(T=s.memoizedProps,Jg(s,T,m!==null?m.memoizedProps:T)),E&1024&&(ny=!0);break;case 6:if(Os(l,s),Rs(s),E&4){if(s.stateNode===null)throw Error(r(162));E=s.memoizedProps,m=s.stateNode;try{m.nodeValue=E}catch(It){fr(s,s.return,It)}}break;case 3:if(Zp=null,T=ka,ka=Xp(l.containerInfo),Os(l,s),ka=T,Rs(s),E&4&&m!==null&&m.memoizedState.isDehydrated)try{Vu(l.containerInfo)}catch(It){fr(s,s.return,It)}ny&&(ny=!1,Sx(s));break;case 4:E=ka,ka=Xp(s.stateNode.containerInfo),Os(l,s),Rs(s),ka=E;break;case 12:Os(l,s),Rs(s);break;case 31:Os(l,s),Rs(s),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,jp(s,E)));break;case 13:Os(l,s),Rs(s),s.child.flags&8192&&s.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Bp=Jt()),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,jp(s,E)));break;case 22:T=s.memoizedState!==null;var Ae=m!==null&&m.memoizedState!==null,Be=qo,Xe=Oi;if(qo=Be||T,Oi=Xe||Ae,Os(l,s),Oi=Xe,qo=Be,Rs(s),E&8192)e:for(l=s.stateNode,l._visibility=T?l._visibility&-2:l._visibility|1,T&&(m===null||Ae||qo||Oi||Ic(s)),m=null,l=s;;){if(l.tag===5||l.tag===26){if(m===null){Ae=m=l;try{if(D=Ae.stateNode,T)V=D.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{te=Ae.stateNode;var it=Ae.memoizedProps.style,Fe=it!=null&&it.hasOwnProperty("display")?it.display:null;te.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(It){fr(Ae,Ae.return,It)}}}else if(l.tag===6){if(m===null){Ae=l;try{Ae.stateNode.nodeValue=T?"":Ae.memoizedProps}catch(It){fr(Ae,Ae.return,It)}}}else if(l.tag===18){if(m===null){Ae=l;try{var He=Ae.stateNode;T?f4(He,!0):f4(Ae.stateNode,!1)}catch(It){fr(Ae,Ae.return,It)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;m===l&&(m=null),l=l.return}m===l&&(m=null),l.sibling.return=l.return,l=l.sibling}E&4&&(E=s.updateQueue,E!==null&&(m=E.retryQueue,m!==null&&(E.retryQueue=null,jp(s,m))));break;case 19:Os(l,s),Rs(s),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,jp(s,E)));break;case 30:break;case 21:break;default:Os(l,s),Rs(s)}}function Rs(s){var l=s.flags;if(l&2){try{for(var m,E=s.return;E!==null;){if(dx(E)){m=E;break}E=E.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var T=m.stateNode,D=ey(s);kp(s,D,T);break;case 5:var V=m.stateNode;m.flags&32&&(Yt(V,""),m.flags&=-33);var te=ey(s);kp(s,te,V);break;case 3:case 4:var Ae=m.stateNode.containerInfo,Be=ey(s);ty(s,Be,Ae);break;default:throw Error(r(161))}}catch(Xe){fr(s,s.return,Xe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Sx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;Sx(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Vo(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)gx(s,l.alternate,l),l=l.sibling}function Ic(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Il(4,l,l.return),Ic(l);break;case 1:so(l,l.return);var m=l.stateNode;typeof m.componentWillUnmount=="function"&&fx(l,l.return,m),Ic(l);break;case 27:vh(l.stateNode);case 26:case 5:so(l,l.return),Ic(l);break;case 22:l.memoizedState===null&&Ic(l);break;case 30:Ic(l);break;default:Ic(l)}s=s.sibling}}function Ho(s,l,m){for(m=m&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var E=l.alternate,T=s,D=l,V=D.flags;switch(D.tag){case 0:case 11:case 15:Ho(T,D,m),lh(4,D);break;case 1:if(Ho(T,D,m),E=D,T=E.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Be){fr(E,E.return,Be)}if(E=D,T=E.updateQueue,T!==null){var te=E.stateNode;try{var Ae=T.shared.hiddenCallbacks;if(Ae!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Ae.length;T++)JE(Ae[T],te)}catch(Be){fr(E,E.return,Be)}}m&&V&64&&ux(D),ch(D,D.return);break;case 27:px(D);case 26:case 5:Ho(T,D,m),m&&E===null&&V&4&&hx(D),ch(D,D.return);break;case 12:Ho(T,D,m);break;case 31:Ho(T,D,m),m&&V&4&&bx(T,D);break;case 13:Ho(T,D,m),m&&V&4&&wx(T,D);break;case 22:D.memoizedState===null&&Ho(T,D,m),ch(D,D.return);break;case 30:break;default:Ho(T,D,m)}l=l.sibling}}function ry(s,l){var m=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==m&&(s!=null&&s.refCount++,m!=null&&Wf(m))}function iy(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Wf(s))}function ja(s,l,m,E){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)xx(s,l,m,E),l=l.sibling}function xx(s,l,m,E){var T=l.flags;switch(l.tag){case 0:case 11:case 15:ja(s,l,m,E),T&2048&&lh(9,l);break;case 1:ja(s,l,m,E);break;case 3:ja(s,l,m,E),T&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Wf(s)));break;case 12:if(T&2048){ja(s,l,m,E),s=l.stateNode;try{var D=l.memoizedProps,V=D.id,te=D.onPostCommit;typeof te=="function"&&te(V,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Ae){fr(l,l.return,Ae)}}else ja(s,l,m,E);break;case 31:ja(s,l,m,E);break;case 13:ja(s,l,m,E);break;case 23:break;case 22:D=l.stateNode,V=l.alternate,l.memoizedState!==null?D._visibility&2?ja(s,l,m,E):uh(s,l):D._visibility&2?ja(s,l,m,E):(D._visibility|=2,Du(s,l,m,E,(l.subtreeFlags&10256)!==0||!1)),T&2048&&ry(V,l);break;case 24:ja(s,l,m,E),T&2048&&iy(l.alternate,l);break;default:ja(s,l,m,E)}}function Du(s,l,m,E,T){for(T=T&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var D=s,V=l,te=m,Ae=E,Be=V.flags;switch(V.tag){case 0:case 11:case 15:Du(D,V,te,Ae,T),lh(8,V);break;case 23:break;case 22:var Xe=V.stateNode;V.memoizedState!==null?Xe._visibility&2?Du(D,V,te,Ae,T):uh(D,V):(Xe._visibility|=2,Du(D,V,te,Ae,T)),T&&Be&2048&&ry(V.alternate,V);break;case 24:Du(D,V,te,Ae,T),T&&Be&2048&&iy(V.alternate,V);break;default:Du(D,V,te,Ae,T)}l=l.sibling}}function uh(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var m=s,E=l,T=E.flags;switch(E.tag){case 22:uh(m,E),T&2048&&ry(E.alternate,E);break;case 24:uh(m,E),T&2048&&iy(E.alternate,E);break;default:uh(m,E)}l=l.sibling}}var fh=8192;function Lu(s,l,m){if(s.subtreeFlags&fh)for(s=s.child;s!==null;)_x(s,l,m),s=s.sibling}function _x(s,l,m){switch(s.tag){case 26:Lu(s,l,m),s.flags&fh&&s.memoizedState!==null&&AD(m,ka,s.memoizedState,s.memoizedProps);break;case 5:Lu(s,l,m);break;case 3:case 4:var E=ka;ka=Xp(s.stateNode.containerInfo),Lu(s,l,m),ka=E;break;case 22:s.memoizedState===null&&(E=s.alternate,E!==null&&E.memoizedState!==null?(E=fh,fh=16777216,Lu(s,l,m),fh=E):Lu(s,l,m));break;default:Lu(s,l,m)}}function Ax(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function hh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var m=0;m<l.length;m++){var E=l[m];Pi=E,Nx(E,s)}Ax(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cx(s),s=s.sibling}function Cx(s){switch(s.tag){case 0:case 11:case 15:hh(s),s.flags&2048&&Il(9,s,s.return);break;case 3:hh(s);break;case 12:hh(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Pp(s)):hh(s);break;default:hh(s)}}function Pp(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var m=0;m<l.length;m++){var E=l[m];Pi=E,Nx(E,s)}Ax(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Il(8,l,l.return),Pp(l);break;case 22:m=l.stateNode,m._visibility&2&&(m._visibility&=-3,Pp(l));break;default:Pp(l)}s=s.sibling}}function Nx(s,l){for(;Pi!==null;){var m=Pi;switch(m.tag){case 0:case 11:case 15:Il(8,m,l);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var E=m.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Wf(m.memoizedState.cache)}if(E=m.child,E!==null)E.return=m,Pi=E;else e:for(m=s;Pi!==null;){E=Pi;var T=E.sibling,D=E.return;if(yx(E),E===m){Pi=null;break e}if(T!==null){T.return=D,Pi=T;break e}Pi=D}}}var zM={getCacheForType:function(s){var l=Ki(Ci),m=l.data.get(s);return m===void 0&&(m=s(),l.data.set(s,m)),m},cacheSignal:function(){return Ki(Ci).controller.signal}},FM=typeof WeakMap=="function"?WeakMap:Map,tr=0,Ir=null,Ln=null,Bn=0,ur=0,zs=null,Ml=!1,ku=!1,sy=!1,Ko=0,li=0,Dl=0,Mc=0,ay=0,Fs=0,ju=0,dh=null,Is=null,oy=!1,Bp=0,Tx=0,Up=1/0,zp=null,Ll=null,Li=0,kl=null,Pu=null,Go=0,ly=0,cy=null,Ox=null,ph=0,uy=null;function qs(){return(tr&2)!==0&&Bn!==0?Bn&-Bn:ee.T!==null?gy():Je()}function Rx(){if(Fs===0)if((Bn&536870912)===0||Vn){var s=rn;rn<<=1,(rn&3932160)===0&&(rn=262144),Fs=s}else Fs=536870912;return s=Bs.current,s!==null&&(s.flags|=32),Fs}function Ms(s,l,m){(s===Ir&&(ur===2||ur===9)||s.cancelPendingCommit!==null)&&(Bu(s,0),jl(s,Bn,Fs,!1)),ii(s,m),((tr&2)===0||s!==Ir)&&(s===Ir&&((tr&2)===0&&(Mc|=m),li===4&&jl(s,Bn,Fs,!1)),ao(s))}function Ix(s,l,m){if((tr&6)!==0)throw Error(r(327));var E=!m&&(l&127)===0&&(l&s.expiredLanes)===0||Or(s,l),T=E?VM(s,l):hy(s,l,!0),D=E;do{if(T===0){ku&&!E&&jl(s,l,0,!1);break}else{if(m=s.current.alternate,D&&!qM(m)){T=hy(s,l,!1),D=!1;continue}if(T===2){if(D=l,s.errorRecoveryDisabledLanes&D)var V=0;else V=s.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){l=V;e:{var te=s;T=dh;var Ae=te.current.memoizedState.isDehydrated;if(Ae&&(Bu(te,V).flags|=256),V=hy(te,V,!1),V!==2){if(sy&&!Ae){te.errorRecoveryDisabledLanes|=D,Mc|=D,T=4;break e}D=Is,Is=T,D!==null&&(Is===null?Is=D:Is.push.apply(Is,D))}T=V}if(D=!1,T!==2)continue}}if(T===1){Bu(s,0),jl(s,l,0,!0);break}e:{switch(E=s,D=T,D){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:jl(E,l,Fs,!Ml);break e;case 2:Is=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(T=Bp+300-Jt(),10<T)){if(jl(E,l,Fs,!Ml),ri(E,0,!0)!==0)break e;Go=l,E.timeoutHandle=l4(Mx.bind(null,E,m,Is,zp,oy,l,Fs,Mc,ju,Ml,D,"Throttled",-0,0),T);break e}Mx(E,m,Is,zp,oy,l,Fs,Mc,ju,Ml,D,null,-0,0)}}break}while(!0);ao(s)}function Mx(s,l,m,E,T,D,V,te,Ae,Be,Xe,it,Fe,He){if(s.timeoutHandle=-1,it=l.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},_x(l,D,it);var It=(D&62914560)===D?Bp-Jt():(D&4194048)===D?Tx-Jt():0;if(It=CD(it,It),It!==null){Go=D,s.cancelPendingCommit=It(zx.bind(null,s,l,D,m,E,T,V,te,Ae,Xe,it,null,Fe,He)),jl(s,D,V,!Be);return}}zx(s,l,D,m,E,T,V,te,Ae)}function qM(s){for(var l=s;;){var m=l.tag;if((m===0||m===11||m===15)&&l.flags&16384&&(m=l.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var E=0;E<m.length;E++){var T=m[E],D=T.getSnapshot;T=T.value;try{if(!h(D(),T))return!1}catch{return!1}}if(m=l.child,l.subtreeFlags&16384&&m!==null)m.return=l,l=m;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function jl(s,l,m,E){l&=~ay,l&=~Mc,s.suspendedLanes|=l,s.pingedLanes&=~l,E&&(s.warmLanes|=l),E=s.expirationTimes;for(var T=l;0<T;){var D=31-Ft(T),V=1<<D;E[D]=-1,T&=~V}m!==0&&Fn(s,m,l)}function Fp(){return(tr&6)===0?(mh(0),!1):!0}function fy(){if(Ln!==null){if(ur===0)var s=Ln.return;else s=Ln,jo=xc=null,Ng(s),Tu=null,Qf=0,s=Ln;for(;s!==null;)cx(s.alternate,s),s=s.return;Ln=null}}function Bu(s,l){var m=s.timeoutHandle;m!==-1&&(s.timeoutHandle=-1,lD(m)),m=s.cancelPendingCommit,m!==null&&(s.cancelPendingCommit=null,m()),Go=0,fy(),Ir=s,Ln=m=Lo(s.current,null),Bn=l,ur=0,zs=null,Ml=!1,ku=Or(s,l),sy=!1,ju=Fs=ay=Mc=Dl=li=0,Is=dh=null,oy=!1,(l&8)!==0&&(l|=l&32);var E=s.entangledLanes;if(E!==0)for(s=s.entanglements,E&=l;0<E;){var T=31-Ft(E),D=1<<T;l|=s[T],E&=~D}return Ko=l,mi(),m}function Dx(s,l){bn=null,ee.H=sh,l===Nu||l===gp?(l=WE(),ur=3):l===mg?(l=WE(),ur=4):ur=l===$g?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,zs=l,Ln===null&&(li=1,Rp(s,ca(l,s.current)))}function Lx(){var s=Bs.current;return s===null?!0:(Bn&4194048)===Bn?da===null:(Bn&62914560)===Bn||(Bn&536870912)!==0?s===da:!1}function kx(){var s=ee.H;return ee.H=sh,s===null?sh:s}function jx(){var s=ee.A;return ee.A=zM,s}function qp(){li=4,Ml||(Bn&4194048)!==Bn&&Bs.current!==null||(ku=!0),(Dl&134217727)===0&&(Mc&134217727)===0||Ir===null||jl(Ir,Bn,Fs,!1)}function hy(s,l,m){var E=tr;tr|=2;var T=kx(),D=jx();(Ir!==s||Bn!==l)&&(zp=null,Bu(s,l)),l=!1;var V=li;e:do try{if(ur!==0&&Ln!==null){var te=Ln,Ae=zs;switch(ur){case 8:fy(),V=6;break e;case 3:case 2:case 9:case 6:Bs.current===null&&(l=!0);var Be=ur;if(ur=0,zs=null,Uu(s,te,Ae,Be),m&&ku){V=0;break e}break;default:Be=ur,ur=0,zs=null,Uu(s,te,Ae,Be)}}$M(),V=li;break}catch(Xe){Dx(s,Xe)}while(!0);return l&&s.shellSuspendCounter++,jo=xc=null,tr=E,ee.H=T,ee.A=D,Ln===null&&(Ir=null,Bn=0,mi()),V}function $M(){for(;Ln!==null;)Px(Ln)}function VM(s,l){var m=tr;tr|=2;var E=kx(),T=jx();Ir!==s||Bn!==l?(zp=null,Up=Jt()+500,Bu(s,l)):ku=Or(s,l);e:do try{if(ur!==0&&Ln!==null){l=Ln;var D=zs;t:switch(ur){case 1:ur=0,zs=null,Uu(s,l,D,1);break;case 2:case 9:if(GE(D)){ur=0,zs=null,Bx(l);break}l=function(){ur!==2&&ur!==9||Ir!==s||(ur=7),ao(s)},D.then(l,l);break e;case 3:ur=7;break e;case 4:ur=5;break e;case 7:GE(D)?(ur=0,zs=null,Bx(l)):(ur=0,zs=null,Uu(s,l,D,7));break;case 5:var V=null;switch(Ln.tag){case 26:V=Ln.memoizedState;case 5:case 27:var te=Ln;if(V?x4(V):te.stateNode.complete){ur=0,zs=null;var Ae=te.sibling;if(Ae!==null)Ln=Ae;else{var Be=te.return;Be!==null?(Ln=Be,$p(Be)):Ln=null}break t}}ur=0,zs=null,Uu(s,l,D,5);break;case 6:ur=0,zs=null,Uu(s,l,D,6);break;case 8:fy(),li=6;break e;default:throw Error(r(462))}}HM();break}catch(Xe){Dx(s,Xe)}while(!0);return jo=xc=null,ee.H=E,ee.A=T,tr=m,Ln!==null?0:(Ir=null,Bn=0,mi(),li)}function HM(){for(;Ln!==null&&!Wr();)Px(Ln)}function Px(s){var l=ox(s.alternate,s,Ko);s.memoizedProps=s.pendingProps,l===null?$p(s):Ln=l}function Bx(s){var l=s,m=l.alternate;switch(l.tag){case 15:case 0:l=tx(m,l,l.pendingProps,l.type,void 0,Bn);break;case 11:l=tx(m,l,l.pendingProps,l.type.render,l.ref,Bn);break;case 5:Ng(l);default:cx(m,l),l=Ln=jE(l,Ko),l=ox(m,l,Ko)}s.memoizedProps=s.pendingProps,l===null?$p(s):Ln=l}function Uu(s,l,m,E){jo=xc=null,Ng(l),Tu=null,Qf=0;var T=l.return;try{if(DM(s,T,l,m,Bn)){li=1,Rp(s,ca(m,s.current)),Ln=null;return}}catch(D){if(T!==null)throw Ln=T,D;li=1,Rp(s,ca(m,s.current)),Ln=null;return}l.flags&32768?(Vn||E===1?s=!0:ku||(Bn&536870912)!==0?s=!1:(Ml=s=!0,(E===2||E===9||E===3||E===6)&&(E=Bs.current,E!==null&&E.tag===13&&(E.flags|=16384))),Ux(l,s)):$p(l)}function $p(s){var l=s;do{if((l.flags&32768)!==0){Ux(l,Ml);return}s=l.return;var m=jM(l.alternate,l,Ko);if(m!==null){Ln=m;return}if(l=l.sibling,l!==null){Ln=l;return}Ln=l=s}while(l!==null);li===0&&(li=5)}function Ux(s,l){do{var m=PM(s.alternate,s);if(m!==null){m.flags&=32767,Ln=m;return}if(m=s.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!l&&(s=s.sibling,s!==null)){Ln=s;return}Ln=s=m}while(s!==null);li=6,Ln=null}function zx(s,l,m,E,T,D,V,te,Ae){s.cancelPendingCommit=null;do Vp();while(Li!==0);if((tr&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(D=l.lanes|l.childLanes,D|=an,ir(s,m,D,V,te,Ae),s===Ir&&(Ln=Ir=null,Bn=0),Pu=l,kl=s,Go=m,ly=D,cy=T,Ox=E,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,WM(Cn,function(){return Hx(),null})):(s.callbackNode=null,s.callbackPriority=0),E=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||E){E=ee.T,ee.T=null,T=de.p,de.p=2,V=tr,tr|=4;try{BM(s,l,m)}finally{tr=V,de.p=T,ee.T=E}}Li=1,Fx(),qx(),$x()}}function Fx(){if(Li===1){Li=0;var s=kl,l=Pu,m=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||m){m=ee.T,ee.T=null;var E=de.p;de.p=2;var T=tr;tr|=4;try{Ex(l,s);var D=_y,V=P(s.containerInfo),te=D.focusedElem,Ae=D.selectionRange;if(V!==te&&te&&te.ownerDocument&&I(te.ownerDocument.documentElement,te)){if(Ae!==null&&z(te)){var Be=Ae.start,Xe=Ae.end;if(Xe===void 0&&(Xe=Be),"selectionStart"in te)te.selectionStart=Be,te.selectionEnd=Math.min(Xe,te.value.length);else{var it=te.ownerDocument||document,Fe=it&&it.defaultView||window;if(Fe.getSelection){var He=Fe.getSelection(),It=te.textContent.length,Xt=Math.min(Ae.start,It),Ar=Ae.end===void 0?Xt:Math.min(Ae.end,It);!He.extend&&Xt>Ar&&(V=Ar,Ar=Xt,Xt=V);var De=A(te,Xt),Te=A(te,Ar);if(De&&Te&&(He.rangeCount!==1||He.anchorNode!==De.node||He.anchorOffset!==De.offset||He.focusNode!==Te.node||He.focusOffset!==Te.offset)){var Pe=it.createRange();Pe.setStart(De.node,De.offset),He.removeAllRanges(),Xt>Ar?(He.addRange(Pe),He.extend(Te.node,Te.offset)):(Pe.setEnd(Te.node,Te.offset),He.addRange(Pe))}}}}for(it=[],He=te;He=He.parentNode;)He.nodeType===1&&it.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<it.length;te++){var tt=it[te];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}nm=!!xy,_y=xy=null}finally{tr=T,de.p=E,ee.T=m}}s.current=l,Li=2}}function qx(){if(Li===2){Li=0;var s=kl,l=Pu,m=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||m){m=ee.T,ee.T=null;var E=de.p;de.p=2;var T=tr;tr|=4;try{gx(s,l.alternate,l)}finally{tr=T,de.p=E,ee.T=m}}Li=3}}function $x(){if(Li===4||Li===3){Li=0,nr();var s=kl,l=Pu,m=Go,E=Ox;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Li=5:(Li=0,Pu=kl=null,Vx(s,s.pendingLanes));var T=s.pendingLanes;if(T===0&&(Ll=null),nt(m),l=l.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Pn,l,void 0,(l.current.flags&128)===128)}catch{}if(E!==null){l=ee.T,T=de.p,de.p=2,ee.T=null;try{for(var D=s.onRecoverableError,V=0;V<E.length;V++){var te=E[V];D(te.value,{componentStack:te.stack})}}finally{ee.T=l,de.p=T}}(Go&3)!==0&&Vp(),ao(s),T=s.pendingLanes,(m&261930)!==0&&(T&42)!==0?s===uy?ph++:(ph=0,uy=s):ph=0,mh(0)}}function Vx(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Wf(l)))}function Vp(){return Fx(),qx(),$x(),Hx()}function Hx(){if(Li!==5)return!1;var s=kl,l=ly;ly=0;var m=nt(Go),E=ee.T,T=de.p;try{de.p=32>m?32:m,ee.T=null,m=cy,cy=null;var D=kl,V=Go;if(Li=0,Pu=kl=null,Go=0,(tr&6)!==0)throw Error(r(331));var te=tr;if(tr|=4,Cx(D.current),xx(D,D.current,V,m),tr=te,mh(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Pn,D)}catch{}return!0}finally{de.p=T,ee.T=E,Vx(s,l)}}function Kx(s,l,m){l=ca(m,l),l=qg(s.stateNode,l,2),s=Tl(s,l,2),s!==null&&(ii(s,2),ao(s))}function fr(s,l,m){if(s.tag===3)Kx(s,s,m);else for(;l!==null;){if(l.tag===3){Kx(l,s,m);break}else if(l.tag===1){var E=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ll===null||!Ll.has(E))){s=ca(m,s),m=GS(2),E=Tl(l,m,2),E!==null&&(YS(m,E,l,s),ii(E,2),ao(E));break}}l=l.return}}function dy(s,l,m){var E=s.pingCache;if(E===null){E=s.pingCache=new FM;var T=new Set;E.set(l,T)}else T=E.get(l),T===void 0&&(T=new Set,E.set(l,T));T.has(m)||(sy=!0,T.add(m),s=KM.bind(null,s,l,m),l.then(s,s))}function KM(s,l,m){var E=s.pingCache;E!==null&&E.delete(l),s.pingedLanes|=s.suspendedLanes&m,s.warmLanes&=~m,Ir===s&&(Bn&m)===m&&(li===4||li===3&&(Bn&62914560)===Bn&&300>Jt()-Bp?(tr&2)===0&&Bu(s,0):ay|=m,ju===Bn&&(ju=0)),ao(s)}function Gx(s,l){l===0&&(l=Dn()),s=ei(s,l),s!==null&&(ii(s,l),ao(s))}function GM(s){var l=s.memoizedState,m=0;l!==null&&(m=l.retryLane),Gx(s,m)}function YM(s,l){var m=0;switch(s.tag){case 31:case 13:var E=s.stateNode,T=s.memoizedState;T!==null&&(m=T.retryLane);break;case 19:E=s.stateNode;break;case 22:E=s.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(l),Gx(s,m)}function WM(s,l){return jn(s,l)}var Hp=null,zu=null,py=!1,Kp=!1,my=!1,Pl=0;function ao(s){s!==zu&&s.next===null&&(zu===null?Hp=zu=s:zu=zu.next=s),Kp=!0,py||(py=!0,QM())}function mh(s,l){if(!my&&Kp){my=!0;do for(var m=!1,E=Hp;E!==null;){if(s!==0){var T=E.pendingLanes;if(T===0)var D=0;else{var V=E.suspendedLanes,te=E.pingedLanes;D=(1<<31-Ft(42|s)+1)-1,D&=T&~(V&~te),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(m=!0,Qx(E,D))}else D=Bn,D=ri(E,E===Ir?D:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(D&3)===0||Or(E,D)||(m=!0,Qx(E,D));E=E.next}while(m);my=!1}}function XM(){Yx()}function Yx(){Kp=py=!1;var s=0;Pl!==0&&oD()&&(s=Pl);for(var l=Jt(),m=null,E=Hp;E!==null;){var T=E.next,D=Wx(E,l);D===0?(E.next=null,m===null?Hp=T:m.next=T,T===null&&(zu=m)):(m=E,(s!==0||(D&3)!==0)&&(Kp=!0)),E=T}Li!==0&&Li!==5||mh(s),Pl!==0&&(Pl=0)}function Wx(s,l){for(var m=s.suspendedLanes,E=s.pingedLanes,T=s.expirationTimes,D=s.pendingLanes&-62914561;0<D;){var V=31-Ft(D),te=1<<V,Ae=T[V];Ae===-1?((te&m)===0||(te&E)!==0)&&(T[V]=Ji(te,l)):Ae<=l&&(s.expiredLanes|=te),D&=~te}if(l=Ir,m=Bn,m=ri(s,s===l?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),E=s.callbackNode,m===0||s===l&&(ur===2||ur===9)||s.cancelPendingCommit!==null)return E!==null&&E!==null&&ot(E),s.callbackNode=null,s.callbackPriority=0;if((m&3)===0||Or(s,m)){if(l=m&-m,l===s.callbackPriority)return l;switch(E!==null&&ot(E),nt(m)){case 2:case 8:m=jr;break;case 32:m=Cn;break;case 268435456:m=yr;break;default:m=Cn}return E=Xx.bind(null,s),m=jn(m,E),s.callbackPriority=l,s.callbackNode=m,l}return E!==null&&E!==null&&ot(E),s.callbackPriority=2,s.callbackNode=null,2}function Xx(s,l){if(Li!==0&&Li!==5)return s.callbackNode=null,s.callbackPriority=0,null;var m=s.callbackNode;if(Vp()&&s.callbackNode!==m)return null;var E=Bn;return E=ri(s,s===Ir?E:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),E===0?null:(Ix(s,E,l),Wx(s,Jt()),s.callbackNode!=null&&s.callbackNode===m?Xx.bind(null,s):null)}function Qx(s,l){if(Vp())return null;Ix(s,l,!0)}function QM(){cD(function(){(tr&6)!==0?jn(zn,XM):Yx()})}function gy(){if(Pl===0){var s=Au;s===0&&(s=Xr,Xr<<=1,(Xr&261888)===0&&(Xr=256)),Pl=s}return Pl}function Zx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:pi(""+s)}function Jx(s,l){var m=l.ownerDocument.createElement("input");return m.name=l.name,m.value=l.value,s.id&&m.setAttribute("form",s.id),l.parentNode.insertBefore(m,l),s=new FormData(s),m.parentNode.removeChild(m),s}function ZM(s,l,m,E,T){if(l==="submit"&&m&&m.stateNode===T){var D=Zx((T[ut]||null).action),V=E.submitter;V&&(l=(l=V[ut]||null)?Zx(l.formAction):V.getAttribute("formAction"),l!==null&&(D=l,V=null));var te=new wt("action","action",null,E,T);s.push({event:te,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Pl!==0){var Ae=V?Jx(T,V):new FormData(T);jg(m,{pending:!0,data:Ae,method:T.method,action:D},null,Ae)}}else typeof D=="function"&&(te.preventDefault(),Ae=V?Jx(T,V):new FormData(T),jg(m,{pending:!0,data:Ae,method:T.method,action:D},D,Ae))},currentTarget:T}]})}}for(var yy=0;yy<Ct.length;yy++){var vy=Ct[yy],JM=vy.toLowerCase(),eD=vy[0].toUpperCase()+vy.slice(1);Vt(JM,"on"+eD)}Vt(Ue,"onAnimationEnd"),Vt(Ke,"onAnimationIteration"),Vt(Ze,"onAnimationStart"),Vt("dblclick","onDoubleClick"),Vt("focusin","onFocus"),Vt("focusout","onBlur"),Vt(lt,"onTransitionRun"),Vt(at,"onTransitionStart"),Vt(ht,"onTransitionCancel"),Vt(yt,"onTransitionEnd"),Hn("onMouseEnter",["mouseout","mouseover"]),Hn("onMouseLeave",["mouseout","mouseover"]),Hn("onPointerEnter",["pointerout","pointerover"]),Hn("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gh));function e4(s,l){l=(l&4)!==0;for(var m=0;m<s.length;m++){var E=s[m],T=E.event;E=E.listeners;e:{var D=void 0;if(l)for(var V=E.length-1;0<=V;V--){var te=E[V],Ae=te.instance,Be=te.currentTarget;if(te=te.listener,Ae!==D&&T.isPropagationStopped())break e;D=te,T.currentTarget=Be;try{D(T)}catch(Xe){yn(Xe)}T.currentTarget=null,D=Ae}else for(V=0;V<E.length;V++){if(te=E[V],Ae=te.instance,Be=te.currentTarget,te=te.listener,Ae!==D&&T.isPropagationStopped())break e;D=te,T.currentTarget=Be;try{D(T)}catch(Xe){yn(Xe)}T.currentTarget=null,D=Ae}}}}function kn(s,l){var m=l[St];m===void 0&&(m=l[St]=new Set);var E=s+"__bubble";m.has(E)||(t4(l,s,2,!1),m.add(E))}function by(s,l,m){var E=0;l&&(E|=4),t4(m,s,E,l)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function wy(s){if(!s[Gp]){s[Gp]=!0,We.forEach(function(m){m!=="selectionchange"&&(tD.has(m)||by(m,!1,s),by(m,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Gp]||(l[Gp]=!0,by("selectionchange",!1,l))}}function t4(s,l,m,E){switch(R4(l)){case 2:var T=OD;break;case 8:T=RD;break;default:T=ky}m=T.bind(null,l,m,s),T=void 0,!xs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(T=!0),E?T!==void 0?s.addEventListener(l,m,{capture:!0,passive:T}):s.addEventListener(l,m,!0):T!==void 0?s.addEventListener(l,m,{passive:T}):s.addEventListener(l,m,!1)}function Ey(s,l,m,E,T){var D=E;if((l&1)===0&&(l&2)===0&&E!==null)e:for(;;){if(E===null)return;var V=E.tag;if(V===3||V===4){var te=E.stateNode.containerInfo;if(te===T)break;if(V===4)for(V=E.return;V!==null;){var Ae=V.tag;if((Ae===3||Ae===4)&&V.stateNode.containerInfo===T)return;V=V.return}for(;te!==null;){if(V=_t(te),V===null)return;if(Ae=V.tag,Ae===5||Ae===6||Ae===26||Ae===27){E=D=V;continue e}te=te.parentNode}}E=E.return}qi(function(){var Be=D,Xe=or(m),it=[];e:{var Fe=vt.get(s);if(Fe!==void 0){var He=wt,It=s;switch(s){case"keypress":if(q(m)===0)break e;case"keydown":case"keyup":He=To;break;case"focusin":It="focus",He=ji;break;case"focusout":It="blur",He=ji;break;case"beforeblur":case"afterblur":He=ji;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=cr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=bc;break;case Ue:case Ke:case Ze:He=nn;break;case yt:He=Cs;break;case"scroll":case"scrollend":He=_n;break;case"wheel":He=vu;break;case"copy":case"cut":case"paste":He=ls;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=Kn;break;case"toggle":case"beforetoggle":He=Oo}var Xt=(l&4)!==0,Ar=!Xt&&(s==="scroll"||s==="scrollend"),De=Xt?Fe!==null?Fe+"Capture":null:Fe;Xt=[];for(var Te=Be,Pe;Te!==null;){var tt=Te;if(Pe=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||Pe===null||De===null||(tt=Kt(Te,De),tt!=null&&Xt.push(yh(Te,tt,Pe))),Ar)break;Te=Te.return}0<Xt.length&&(Fe=new He(Fe,It,null,m,Xe),it.push({event:Fe,listeners:Xt}))}}if((l&7)===0){e:{if(Fe=s==="mouseover"||s==="pointerover",He=s==="mouseout"||s==="pointerout",Fe&&m!==Dr&&(It=m.relatedTarget||m.fromElement)&&(_t(It)||It[Et]))break e;if((He||Fe)&&(Fe=Xe.window===Xe?Xe:(Fe=Xe.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,He?(It=m.relatedTarget||m.toElement,He=Be,It=It?_t(It):null,It!==null&&(Ar=a(It),Xt=It.tag,It!==Ar||Xt!==5&&Xt!==27&&Xt!==6)&&(It=null)):(He=null,It=Be),He!==It)){if(Xt=$t,tt="onMouseLeave",De="onMouseEnter",Te="mouse",(s==="pointerout"||s==="pointerover")&&(Xt=Kn,tt="onPointerLeave",De="onPointerEnter",Te="pointer"),Ar=He==null?Fe:qn(He),Pe=It==null?Fe:qn(It),Fe=new Xt(tt,Te+"leave",He,m,Xe),Fe.target=Ar,Fe.relatedTarget=Pe,tt=null,_t(Xe)===Be&&(Xt=new Xt(De,Te+"enter",It,m,Xe),Xt.target=Pe,Xt.relatedTarget=Ar,tt=Xt),Ar=tt,He&&It)t:{for(Xt=nD,De=He,Te=It,Pe=0,tt=De;tt;tt=Xt(tt))Pe++;tt=0;for(var qt=Te;qt;qt=Xt(qt))tt++;for(;0<Pe-tt;)De=Xt(De),Pe--;for(;0<tt-Pe;)Te=Xt(Te),tt--;for(;Pe--;){if(De===Te||Te!==null&&De===Te.alternate){Xt=De;break t}De=Xt(De),Te=Xt(Te)}Xt=null}else Xt=null;He!==null&&n4(it,Fe,He,Xt,!1),It!==null&&Ar!==null&&n4(it,Ar,It,Xt,!0)}}e:{if(Fe=Be?qn(Be):window,He=Fe.nodeName&&Fe.nodeName.toLowerCase(),He==="select"||He==="input"&&Fe.type==="file")var Xn=$n;else if(vl(Fe))if(Do)Xn=v;else{Xn=f;var Bt=o}else He=Fe.nodeName,!He||He.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?Be&&hn(Be.elementType)&&(Xn=$n):Xn=d;if(Xn&&(Xn=Xn(s,Be))){cs(it,Xn,m,Xe);break e}Bt&&Bt(s,Fe,Be),s==="focusout"&&Be&&Fe.type==="number"&&Be.memoizedProps.value!=null&&he(Fe,"number",Fe.value)}switch(Bt=Be?qn(Be):window,s){case"focusin":(vl(Bt)||Bt.contentEditable==="true")&&(X=Bt,J=Be,Q=null);break;case"focusout":Q=J=X=null;break;case"mousedown":fe=!0;break;case"contextmenu":case"mouseup":case"dragend":fe=!1,me(it,m,Xe);break;case"selectionchange":if(H)break;case"keydown":case"keyup":me(it,m,Xe)}var Sn;if(Io)e:{switch(s){case"compositionstart":var Un="onCompositionStart";break e;case"compositionend":Un="onCompositionEnd";break e;case"compositionupdate":Un="onCompositionUpdate";break e}Un=void 0}else Ja?wc(s,m)&&(Un="onCompositionEnd"):s==="keydown"&&m.keyCode===229&&(Un="onCompositionStart");Un&&(bu&&m.locale!=="ko"&&(Ja||Un!=="onCompositionStart"?Un==="onCompositionEnd"&&Ja&&(Sn=os()):(Si=Xe,Jr="value"in Si?Si.value:Si.textContent,Ja=!0)),Bt=Yp(Be,Un),0<Bt.length&&(Un=new ml(Un,s,null,m,Xe),it.push({event:Un,listeners:Bt}),Sn?Un.data=Sn:(Sn=Ma(m),Sn!==null&&(Un.data=Sn)))),(Sn=gl?js(s,m):eo(s,m))&&(Un=Yp(Be,"onBeforeInput"),0<Un.length&&(Bt=new ml("onBeforeInput","beforeinput",null,m,Xe),it.push({event:Bt,listeners:Un}),Bt.data=Sn)),ZM(it,s,Be,m,Xe)}e4(it,l)})}function yh(s,l,m){return{instance:s,listener:l,currentTarget:m}}function Yp(s,l){for(var m=l+"Capture",E=[];s!==null;){var T=s,D=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||D===null||(T=Kt(s,m),T!=null&&E.unshift(yh(s,T,D)),T=Kt(s,l),T!=null&&E.push(yh(s,T,D))),s.tag===3)return E;s=s.return}return[]}function nD(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function n4(s,l,m,E,T){for(var D=l._reactName,V=[];m!==null&&m!==E;){var te=m,Ae=te.alternate,Be=te.stateNode;if(te=te.tag,Ae!==null&&Ae===E)break;te!==5&&te!==26&&te!==27||Be===null||(Ae=Be,T?(Be=Kt(m,D),Be!=null&&V.unshift(yh(m,Be,Ae))):T||(Be=Kt(m,D),Be!=null&&V.push(yh(m,Be,Ae)))),m=m.return}V.length!==0&&s.push({event:l,listeners:V})}var rD=/\r\n?/g,iD=/\u0000|\uFFFD/g;function r4(s){return(typeof s=="string"?s:""+s).replace(rD,`
`).replace(iD,"")}function i4(s,l){return l=r4(l),r4(s)===l}function _r(s,l,m,E,T,D){switch(m){case"children":typeof E=="string"?l==="body"||l==="textarea"&&E===""||Yt(s,E):(typeof E=="number"||typeof E=="bigint")&&l!=="body"&&Yt(s,""+E);break;case"className":si(s,"class",E);break;case"tabIndex":si(s,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":si(s,m,E);break;case"style":Ot(s,E,D);break;case"data":if(l!=="object"){si(s,"data",E);break}case"src":case"href":if(E===""&&(l!=="a"||m!=="href")){s.removeAttribute(m);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){s.removeAttribute(m);break}E=pi(""+E),s.setAttribute(m,E);break;case"action":case"formAction":if(typeof E=="function"){s.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(m==="formAction"?(l!=="input"&&_r(s,l,"name",T.name,T,null),_r(s,l,"formEncType",T.formEncType,T,null),_r(s,l,"formMethod",T.formMethod,T,null),_r(s,l,"formTarget",T.formTarget,T,null)):(_r(s,l,"encType",T.encType,T,null),_r(s,l,"method",T.method,T,null),_r(s,l,"target",T.target,T,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){s.removeAttribute(m);break}E=pi(""+E),s.setAttribute(m,E);break;case"onClick":E!=null&&(s.onclick=ai);break;case"onScroll":E!=null&&kn("scroll",s);break;case"onScrollEnd":E!=null&&kn("scrollend",s);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(m=E.__html,m!=null){if(T.children!=null)throw Error(r(60));s.innerHTML=m}}break;case"multiple":s.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":s.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){s.removeAttribute("xlink:href");break}m=pi(""+E),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(m,""+E):s.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(m,""):s.removeAttribute(m);break;case"capture":case"download":E===!0?s.setAttribute(m,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(m,E):s.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?s.setAttribute(m,E):s.removeAttribute(m);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?s.removeAttribute(m):s.setAttribute(m,E);break;case"popover":kn("beforetoggle",s),kn("toggle",s),Yn(s,"popover",E);break;case"xlinkActuate":br(s,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":br(s,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":br(s,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":br(s,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":br(s,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":br(s,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":br(s,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":br(s,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":br(s,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Yn(s,"is",E);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=as.get(m)||m,Yn(s,m,E))}}function Sy(s,l,m,E,T,D){switch(m){case"style":Ot(s,E,D);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(m=E.__html,m!=null){if(T.children!=null)throw Error(r(60));s.innerHTML=m}}break;case"children":typeof E=="string"?Yt(s,E):(typeof E=="number"||typeof E=="bigint")&&Yt(s,""+E);break;case"onScroll":E!=null&&kn("scroll",s);break;case"onScrollEnd":E!=null&&kn("scrollend",s);break;case"onClick":E!=null&&(s.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mr.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),l=m.slice(2,T?m.length-7:void 0),D=s[ut]||null,D=D!=null?D[m]:null,typeof D=="function"&&s.removeEventListener(l,D,T),typeof E=="function")){typeof D!="function"&&D!==null&&(m in s?s[m]=null:s.hasAttribute(m)&&s.removeAttribute(m)),s.addEventListener(l,E,T);break e}m in s?s[m]=E:E===!0?s.setAttribute(m,""):Yn(s,m,E)}}}function Yi(s,l,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kn("error",s),kn("load",s);var E=!1,T=!1,D;for(D in m)if(m.hasOwnProperty(D)){var V=m[D];if(V!=null)switch(D){case"src":E=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:_r(s,l,D,V,m,null)}}T&&_r(s,l,"srcSet",m.srcSet,m,null),E&&_r(s,l,"src",m.src,m,null);return;case"input":kn("invalid",s);var te=D=V=T=null,Ae=null,Be=null;for(E in m)if(m.hasOwnProperty(E)){var Xe=m[E];if(Xe!=null)switch(E){case"name":T=Xe;break;case"type":V=Xe;break;case"checked":Ae=Xe;break;case"defaultChecked":Be=Xe;break;case"value":D=Xe;break;case"defaultValue":te=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(137,l));break;default:_r(s,l,E,Xe,m,null)}}ke(s,D,te,Ae,Be,V,T,!1);return;case"select":kn("invalid",s),E=V=D=null;for(T in m)if(m.hasOwnProperty(T)&&(te=m[T],te!=null))switch(T){case"value":D=te;break;case"defaultValue":V=te;break;case"multiple":E=te;default:_r(s,l,T,te,m,null)}l=D,m=V,s.multiple=!!E,l!=null?At(s,!!E,l,!1):m!=null&&At(s,!!E,m,!0);return;case"textarea":kn("invalid",s),D=T=E=null;for(V in m)if(m.hasOwnProperty(V)&&(te=m[V],te!=null))switch(V){case"value":E=te;break;case"defaultValue":T=te;break;case"children":D=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(91));break;default:_r(s,l,V,te,m,null)}ar(s,E,T,D);return;case"option":for(Ae in m)m.hasOwnProperty(Ae)&&(E=m[Ae],E!=null)&&(Ae==="selected"?s.selected=E&&typeof E!="function"&&typeof E!="symbol":_r(s,l,Ae,E,m,null));return;case"dialog":kn("beforetoggle",s),kn("toggle",s),kn("cancel",s),kn("close",s);break;case"iframe":case"object":kn("load",s);break;case"video":case"audio":for(E=0;E<gh.length;E++)kn(gh[E],s);break;case"image":kn("error",s),kn("load",s);break;case"details":kn("toggle",s);break;case"embed":case"source":case"link":kn("error",s),kn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in m)if(m.hasOwnProperty(Be)&&(E=m[Be],E!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:_r(s,l,Be,E,m,null)}return;default:if(hn(l)){for(Xe in m)m.hasOwnProperty(Xe)&&(E=m[Xe],E!==void 0&&Sy(s,l,Xe,E,m,void 0));return}}for(te in m)m.hasOwnProperty(te)&&(E=m[te],E!=null&&_r(s,l,te,E,m,null))}function sD(s,l,m,E){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,D=null,V=null,te=null,Ae=null,Be=null,Xe=null;for(He in m){var it=m[He];if(m.hasOwnProperty(He)&&it!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":Ae=it;default:E.hasOwnProperty(He)||_r(s,l,He,null,E,it)}}for(var Fe in E){var He=E[Fe];if(it=m[Fe],E.hasOwnProperty(Fe)&&(He!=null||it!=null))switch(Fe){case"type":D=He;break;case"name":T=He;break;case"checked":Be=He;break;case"defaultChecked":Xe=He;break;case"value":V=He;break;case"defaultValue":te=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,l));break;default:He!==it&&_r(s,l,Fe,He,E,it)}}sr(s,V,te,Ae,Be,Xe,D,T);return;case"select":He=V=te=Fe=null;for(D in m)if(Ae=m[D],m.hasOwnProperty(D)&&Ae!=null)switch(D){case"value":break;case"multiple":He=Ae;default:E.hasOwnProperty(D)||_r(s,l,D,null,E,Ae)}for(T in E)if(D=E[T],Ae=m[T],E.hasOwnProperty(T)&&(D!=null||Ae!=null))switch(T){case"value":Fe=D;break;case"defaultValue":te=D;break;case"multiple":V=D;default:D!==Ae&&_r(s,l,T,D,E,Ae)}l=te,m=V,E=He,Fe!=null?At(s,!!m,Fe,!1):!!E!=!!m&&(l!=null?At(s,!!m,l,!0):At(s,!!m,m?[]:"",!1));return;case"textarea":He=Fe=null;for(te in m)if(T=m[te],m.hasOwnProperty(te)&&T!=null&&!E.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:_r(s,l,te,null,E,T)}for(V in E)if(T=E[V],D=m[V],E.hasOwnProperty(V)&&(T!=null||D!=null))switch(V){case"value":Fe=T;break;case"defaultValue":He=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==D&&_r(s,l,V,T,E,D)}Wn(s,Fe,He);return;case"option":for(var It in m)Fe=m[It],m.hasOwnProperty(It)&&Fe!=null&&!E.hasOwnProperty(It)&&(It==="selected"?s.selected=!1:_r(s,l,It,null,E,Fe));for(Ae in E)Fe=E[Ae],He=m[Ae],E.hasOwnProperty(Ae)&&Fe!==He&&(Fe!=null||He!=null)&&(Ae==="selected"?s.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol":_r(s,l,Ae,Fe,E,He));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in m)Fe=m[Xt],m.hasOwnProperty(Xt)&&Fe!=null&&!E.hasOwnProperty(Xt)&&_r(s,l,Xt,null,E,Fe);for(Be in E)if(Fe=E[Be],He=m[Be],E.hasOwnProperty(Be)&&Fe!==He&&(Fe!=null||He!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,l));break;default:_r(s,l,Be,Fe,E,He)}return;default:if(hn(l)){for(var Ar in m)Fe=m[Ar],m.hasOwnProperty(Ar)&&Fe!==void 0&&!E.hasOwnProperty(Ar)&&Sy(s,l,Ar,void 0,E,Fe);for(Xe in E)Fe=E[Xe],He=m[Xe],!E.hasOwnProperty(Xe)||Fe===He||Fe===void 0&&He===void 0||Sy(s,l,Xe,Fe,E,He);return}}for(var De in m)Fe=m[De],m.hasOwnProperty(De)&&Fe!=null&&!E.hasOwnProperty(De)&&_r(s,l,De,null,E,Fe);for(it in E)Fe=E[it],He=m[it],!E.hasOwnProperty(it)||Fe===He||Fe==null&&He==null||_r(s,l,it,Fe,E,He)}function s4(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aD(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,m=performance.getEntriesByType("resource"),E=0;E<m.length;E++){var T=m[E],D=T.transferSize,V=T.initiatorType,te=T.duration;if(D&&te&&s4(V)){for(V=0,te=T.responseEnd,E+=1;E<m.length;E++){var Ae=m[E],Be=Ae.startTime;if(Be>te)break;var Xe=Ae.transferSize,it=Ae.initiatorType;Xe&&s4(it)&&(Ae=Ae.responseEnd,V+=Xe*(Ae<te?1:(te-Be)/(Ae-Be)))}if(--E,l+=8*(D+V)/(T.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var xy=null,_y=null;function Wp(s){return s.nodeType===9?s:s.ownerDocument}function a4(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o4(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Ay(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Cy=null;function oD(){var s=window.event;return s&&s.type==="popstate"?s===Cy?!1:(Cy=s,!0):(Cy=null,!1)}var l4=typeof setTimeout=="function"?setTimeout:void 0,lD=typeof clearTimeout=="function"?clearTimeout:void 0,c4=typeof Promise=="function"?Promise:void 0,cD=typeof queueMicrotask=="function"?queueMicrotask:typeof c4<"u"?function(s){return c4.resolve(null).then(s).catch(uD)}:l4;function uD(s){setTimeout(function(){throw s})}function Bl(s){return s==="head"}function u4(s,l){var m=l,E=0;do{var T=m.nextSibling;if(s.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"||m==="/&"){if(E===0){s.removeChild(T),Vu(l);return}E--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")E++;else if(m==="html")vh(s.ownerDocument.documentElement);else if(m==="head"){m=s.ownerDocument.head,vh(m);for(var D=m.firstChild;D;){var V=D.nextSibling,te=D.nodeName;D[Gn]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=V}}else m==="body"&&vh(s.ownerDocument.body);m=T}while(m);Vu(l)}function f4(s,l){var m=s;s=0;do{var E=m.nextSibling;if(m.nodeType===1?l?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(l?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),E&&E.nodeType===8)if(m=E.data,m==="/$"){if(s===0)break;s--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||s++;m=E}while(m)}function Ny(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var m=l;switch(l=l.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ny(m),wn(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}s.removeChild(m)}}function fD(s,l,m,E){for(;s.nodeType===1;){var T=m;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!E&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(E){if(!s[Gn])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(D=s.getAttribute("rel"),D==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(D!==T.rel||s.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||s.getAttribute("title")!==(T.title==null?null:T.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(D=s.getAttribute("src"),(D!==(T.src==null?null:T.src)||s.getAttribute("type")!==(T.type==null?null:T.type)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&D&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var D=T.name==null?null:""+T.name;if(T.type==="hidden"&&s.getAttribute("name")===D)return s}else return s;if(s=pa(s.nextSibling),s===null)break}return null}function hD(s,l,m){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!m||(s=pa(s.nextSibling),s===null))return null;return s}function h4(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=pa(s.nextSibling),s===null))return null;return s}function Ty(s){return s.data==="$?"||s.data==="$~"}function Oy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function dD(s,l){var m=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||m.readyState!=="loading")l();else{var E=function(){l(),m.removeEventListener("DOMContentLoaded",E)};m.addEventListener("DOMContentLoaded",E),s._reactRetry=E}}function pa(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Ry=null;function d4(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var m=s.data;if(m==="/$"||m==="/&"){if(l===0)return pa(s.nextSibling);l--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||l++}s=s.nextSibling}return null}function p4(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var m=s.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(l===0)return s;l--}else m!=="/$"&&m!=="/&"||l++}s=s.previousSibling}return null}function m4(s,l,m){switch(l=Wp(m),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function vh(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);wn(s)}var ma=new Map,g4=new Set;function Xp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Yo=de.d;de.d={f:pD,r:mD,D:gD,C:yD,L:vD,m:bD,X:ED,S:wD,M:SD};function pD(){var s=Yo.f(),l=Fp();return s||l}function mD(s){var l=Nt(s);l!==null&&l.tag===5&&l.type==="form"?DS(l):Yo.r(s)}var Fu=typeof document>"u"?null:document;function y4(s,l,m){var E=Fu;if(E&&typeof l=="string"&&l){var T=un(l);T='link[rel="'+s+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),g4.has(T)||(g4.add(T),s={rel:s,crossOrigin:m,href:l},E.querySelector(T)===null&&(l=E.createElement("link"),Yi(l,"link",s),Nn(l),E.head.appendChild(l)))}}function gD(s){Yo.D(s),y4("dns-prefetch",s,null)}function yD(s,l){Yo.C(s,l),y4("preconnect",s,l)}function vD(s,l,m){Yo.L(s,l,m);var E=Fu;if(E&&s&&l){var T='link[rel="preload"][as="'+un(l)+'"]';l==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+un(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+un(m.imageSizes)+'"]')):T+='[href="'+un(s)+'"]';var D=T;switch(l){case"style":D=qu(s);break;case"script":D=$u(s)}ma.has(D)||(s=S({rel:"preload",href:l==="image"&&m&&m.imageSrcSet?void 0:s,as:l},m),ma.set(D,s),E.querySelector(T)!==null||l==="style"&&E.querySelector(bh(D))||l==="script"&&E.querySelector(wh(D))||(l=E.createElement("link"),Yi(l,"link",s),Nn(l),E.head.appendChild(l)))}}function bD(s,l){Yo.m(s,l);var m=Fu;if(m&&s){var E=l&&typeof l.as=="string"?l.as:"script",T='link[rel="modulepreload"][as="'+un(E)+'"][href="'+un(s)+'"]',D=T;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=$u(s)}if(!ma.has(D)&&(s=S({rel:"modulepreload",href:s},l),ma.set(D,s),m.querySelector(T)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(wh(D)))return}E=m.createElement("link"),Yi(E,"link",s),Nn(E),m.head.appendChild(E)}}}function wD(s,l,m){Yo.S(s,l,m);var E=Fu;if(E&&s){var T=rr(E).hoistableStyles,D=qu(s);l=l||"default";var V=T.get(D);if(!V){var te={loading:0,preload:null};if(V=E.querySelector(bh(D)))te.loading=5;else{s=S({rel:"stylesheet",href:s,"data-precedence":l},m),(m=ma.get(D))&&Iy(s,m);var Ae=V=E.createElement("link");Nn(Ae),Yi(Ae,"link",s),Ae._p=new Promise(function(Be,Xe){Ae.onload=Be,Ae.onerror=Xe}),Ae.addEventListener("load",function(){te.loading|=1}),Ae.addEventListener("error",function(){te.loading|=2}),te.loading|=4,Qp(V,l,E)}V={type:"stylesheet",instance:V,count:1,state:te},T.set(D,V)}}}function ED(s,l){Yo.X(s,l);var m=Fu;if(m&&s){var E=rr(m).hoistableScripts,T=$u(s),D=E.get(T);D||(D=m.querySelector(wh(T)),D||(s=S({src:s,async:!0},l),(l=ma.get(T))&&My(s,l),D=m.createElement("script"),Nn(D),Yi(D,"link",s),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},E.set(T,D))}}function SD(s,l){Yo.M(s,l);var m=Fu;if(m&&s){var E=rr(m).hoistableScripts,T=$u(s),D=E.get(T);D||(D=m.querySelector(wh(T)),D||(s=S({src:s,async:!0,type:"module"},l),(l=ma.get(T))&&My(s,l),D=m.createElement("script"),Nn(D),Yi(D,"link",s),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},E.set(T,D))}}function v4(s,l,m,E){var T=(T=be.current)?Xp(T):null;if(!T)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(l=qu(m.href),m=rr(T).hoistableStyles,E=m.get(l),E||(E={type:"style",instance:null,count:0,state:null},m.set(l,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){s=qu(m.href);var D=rr(T).hoistableStyles,V=D.get(s);if(V||(T=T.ownerDocument||T,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(s,V),(D=T.querySelector(bh(s)))&&!D._p&&(V.instance=D,V.state.loading=5),ma.has(s)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ma.set(s,m),D||xD(T,s,m,V.state))),l&&E===null)throw Error(r(528,""));return V}if(l&&E!==null)throw Error(r(529,""));return null;case"script":return l=m.async,m=m.src,typeof m=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=$u(m),m=rr(T).hoistableScripts,E=m.get(l),E||(E={type:"script",instance:null,count:0,state:null},m.set(l,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function qu(s){return'href="'+un(s)+'"'}function bh(s){return'link[rel="stylesheet"]['+s+"]"}function b4(s){return S({},s,{"data-precedence":s.precedence,precedence:null})}function xD(s,l,m,E){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?E.loading=1:(l=s.createElement("link"),E.preload=l,l.addEventListener("load",function(){return E.loading|=1}),l.addEventListener("error",function(){return E.loading|=2}),Yi(l,"link",m),Nn(l),s.head.appendChild(l))}function $u(s){return'[src="'+un(s)+'"]'}function wh(s){return"script[async]"+s}function w4(s,l,m){if(l.count++,l.instance===null)switch(l.type){case"style":var E=s.querySelector('style[data-href~="'+un(m.href)+'"]');if(E)return l.instance=E,Nn(E),E;var T=S({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return E=(s.ownerDocument||s).createElement("style"),Nn(E),Yi(E,"style",T),Qp(E,m.precedence,s),l.instance=E;case"stylesheet":T=qu(m.href);var D=s.querySelector(bh(T));if(D)return l.state.loading|=4,l.instance=D,Nn(D),D;E=b4(m),(T=ma.get(T))&&Iy(E,T),D=(s.ownerDocument||s).createElement("link"),Nn(D);var V=D;return V._p=new Promise(function(te,Ae){V.onload=te,V.onerror=Ae}),Yi(D,"link",E),l.state.loading|=4,Qp(D,m.precedence,s),l.instance=D;case"script":return D=$u(m.src),(T=s.querySelector(wh(D)))?(l.instance=T,Nn(T),T):(E=m,(T=ma.get(D))&&(E=S({},m),My(E,T)),s=s.ownerDocument||s,T=s.createElement("script"),Nn(T),Yi(T,"link",E),s.head.appendChild(T),l.instance=T);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(E=l.instance,l.state.loading|=4,Qp(E,m.precedence,s));return l.instance}function Qp(s,l,m){for(var E=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=E.length?E[E.length-1]:null,D=T,V=0;V<E.length;V++){var te=E[V];if(te.dataset.precedence===l)D=te;else if(D!==T)break}D?D.parentNode.insertBefore(s,D.nextSibling):(l=m.nodeType===9?m.head:m,l.insertBefore(s,l.firstChild))}function Iy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function My(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Zp=null;function E4(s,l,m){if(Zp===null){var E=new Map,T=Zp=new Map;T.set(m,E)}else T=Zp,E=T.get(m),E||(E=new Map,T.set(m,E));if(E.has(s))return E;for(E.set(s,null),m=m.getElementsByTagName(s),T=0;T<m.length;T++){var D=m[T];if(!(D[Gn]||D[mt]||s==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var V=D.getAttribute(l)||"";V=s+V;var te=E.get(V);te?te.push(D):E.set(V,[D])}}return E}function S4(s,l,m){s=s.ownerDocument||s,s.head.insertBefore(m,l==="title"?s.querySelector("head > title"):null)}function _D(s,l,m){if(m===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(s=l.disabled,typeof l.precedence=="string"&&s==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function x4(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function AD(s,l,m,E){if(m.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var T=qu(E.href),D=l.querySelector(bh(T));if(D){l=D._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Jp.bind(s),l.then(s,s)),m.state.loading|=4,m.instance=D,Nn(D);return}D=l.ownerDocument||l,E=b4(E),(T=ma.get(T))&&Iy(E,T),D=D.createElement("link"),Nn(D);var V=D;V._p=new Promise(function(te,Ae){V.onload=te,V.onerror=Ae}),Yi(D,"link",E),m.instance=D}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(m,l),(l=m.state.preload)&&(m.state.loading&3)===0&&(s.count++,m=Jp.bind(s),l.addEventListener("load",m),l.addEventListener("error",m))}}var Dy=0;function CD(s,l){return s.stylesheets&&s.count===0&&tm(s,s.stylesheets),0<s.count||0<s.imgCount?function(m){var E=setTimeout(function(){if(s.stylesheets&&tm(s,s.stylesheets),s.unsuspend){var D=s.unsuspend;s.unsuspend=null,D()}},6e4+l);0<s.imgBytes&&Dy===0&&(Dy=62500*aD());var T=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&tm(s,s.stylesheets),s.unsuspend)){var D=s.unsuspend;s.unsuspend=null,D()}},(s.imgBytes>Dy?50:800)+l);return s.unsuspend=m,function(){s.unsuspend=null,clearTimeout(E),clearTimeout(T)}}:null}function Jp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var em=null;function tm(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,em=new Map,l.forEach(ND,s),em=null,Jp.call(s))}function ND(s,l){if(!(l.state.loading&4)){var m=em.get(s);if(m)var E=m.get(null);else{m=new Map,em.set(s,m);for(var T=s.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<T.length;D++){var V=T[D];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(m.set(V.dataset.precedence,V),E=V)}E&&m.set(null,E)}T=l.instance,V=T.getAttribute("data-precedence"),D=m.get(V)||E,D===E&&m.set(null,T),m.set(V,T),this.count++,E=Jp.bind(this),T.addEventListener("load",E),T.addEventListener("error",E),D?D.parentNode.insertBefore(T,D.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(T,s.firstChild)),l.state.loading|=4}}var Eh={$$typeof:j,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function TD(s,l,m,E,T,D,V,te,Ae){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=E,this.onUncaughtError=T,this.onCaughtError=D,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function _4(s,l,m,E,T,D,V,te,Ae,Be,Xe,it){return s=new TD(s,l,m,V,Ae,Be,Xe,it,te),l=1,D===!0&&(l|=24),D=Ps(3,null,null,l),s.current=D,D.stateNode=s,l=hg(),l.refCount++,s.pooledCache=l,l.refCount++,D.memoizedState={element:E,isDehydrated:m,cache:l},gg(D),s}function A4(s){return s?(s=wu,s):wu}function C4(s,l,m,E,T,D){T=A4(T),E.context===null?E.context=T:E.pendingContext=T,E=Nl(l),E.payload={element:m},D=D===void 0?null:D,D!==null&&(E.callback=D),m=Tl(s,E,l),m!==null&&(Ms(m,s,l),Jf(m,s,l))}function N4(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var m=s.retryLane;s.retryLane=m!==0&&m<l?m:l}}function Ly(s,l){N4(s,l),(s=s.alternate)&&N4(s,l)}function T4(s){if(s.tag===13||s.tag===31){var l=ei(s,67108864);l!==null&&Ms(l,s,67108864),Ly(s,67108864)}}function O4(s){if(s.tag===13||s.tag===31){var l=qs();l=Le(l);var m=ei(s,l);m!==null&&Ms(m,s,l),Ly(s,l)}}var nm=!0;function OD(s,l,m,E){var T=ee.T;ee.T=null;var D=de.p;try{de.p=2,ky(s,l,m,E)}finally{de.p=D,ee.T=T}}function RD(s,l,m,E){var T=ee.T;ee.T=null;var D=de.p;try{de.p=8,ky(s,l,m,E)}finally{de.p=D,ee.T=T}}function ky(s,l,m,E){if(nm){var T=jy(E);if(T===null)Ey(s,l,E,rm,m),I4(s,E);else if(MD(T,s,l,m,E))E.stopPropagation();else if(I4(s,E),l&4&&-1<ID.indexOf(s)){for(;T!==null;){var D=Nt(T);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var V=hi(D.pendingLanes);if(V!==0){var te=D;for(te.pendingLanes|=2,te.entangledLanes|=2;V;){var Ae=1<<31-Ft(V);te.entanglements[1]|=Ae,V&=~Ae}ao(D),(tr&6)===0&&(Up=Jt()+500,mh(0))}}break;case 31:case 13:te=ei(D,2),te!==null&&Ms(te,D,2),Fp(),Ly(D,2)}if(D=jy(E),D===null&&Ey(s,l,E,rm,m),D===T)break;T=D}T!==null&&E.stopPropagation()}else Ey(s,l,E,null,m)}}function jy(s){return s=or(s),Py(s)}var rm=null;function Py(s){if(rm=null,s=_t(s),s!==null){var l=a(s);if(l===null)s=null;else{var m=l.tag;if(m===13){if(s=u(l),s!==null)return s;s=null}else if(m===31){if(s=p(l),s!==null)return s;s=null}else if(m===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return rm=s,null}function R4(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gr()){case zn:return 2;case jr:return 8;case Cn:case xn:return 32;case yr:return 268435456;default:return 32}default:return 32}}var By=!1,Ul=null,zl=null,Fl=null,Sh=new Map,xh=new Map,ql=[],ID="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I4(s,l){switch(s){case"focusin":case"focusout":Ul=null;break;case"dragenter":case"dragleave":zl=null;break;case"mouseover":case"mouseout":Fl=null;break;case"pointerover":case"pointerout":Sh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":xh.delete(l.pointerId)}}function _h(s,l,m,E,T,D){return s===null||s.nativeEvent!==D?(s={blockedOn:l,domEventName:m,eventSystemFlags:E,nativeEvent:D,targetContainers:[T]},l!==null&&(l=Nt(l),l!==null&&T4(l)),s):(s.eventSystemFlags|=E,l=s.targetContainers,T!==null&&l.indexOf(T)===-1&&l.push(T),s)}function MD(s,l,m,E,T){switch(l){case"focusin":return Ul=_h(Ul,s,l,m,E,T),!0;case"dragenter":return zl=_h(zl,s,l,m,E,T),!0;case"mouseover":return Fl=_h(Fl,s,l,m,E,T),!0;case"pointerover":var D=T.pointerId;return Sh.set(D,_h(Sh.get(D)||null,s,l,m,E,T)),!0;case"gotpointercapture":return D=T.pointerId,xh.set(D,_h(xh.get(D)||null,s,l,m,E,T)),!0}return!1}function M4(s){var l=_t(s.target);if(l!==null){var m=a(l);if(m!==null){if(l=m.tag,l===13){if(l=u(m),l!==null){s.blockedOn=l,Ge(s.priority,function(){O4(m)});return}}else if(l===31){if(l=p(m),l!==null){s.blockedOn=l,Ge(s.priority,function(){O4(m)});return}}else if(l===3&&m.stateNode.current.memoizedState.isDehydrated){s.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}s.blockedOn=null}function im(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var m=jy(s.nativeEvent);if(m===null){m=s.nativeEvent;var E=new m.constructor(m.type,m);Dr=E,m.target.dispatchEvent(E),Dr=null}else return l=Nt(m),l!==null&&T4(l),s.blockedOn=m,!1;l.shift()}return!0}function D4(s,l,m){im(s)&&m.delete(l)}function DD(){By=!1,Ul!==null&&im(Ul)&&(Ul=null),zl!==null&&im(zl)&&(zl=null),Fl!==null&&im(Fl)&&(Fl=null),Sh.forEach(D4),xh.forEach(D4)}function sm(s,l){s.blockedOn===l&&(s.blockedOn=null,By||(By=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,DD)))}var am=null;function L4(s){am!==s&&(am=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){am===s&&(am=null);for(var l=0;l<s.length;l+=3){var m=s[l],E=s[l+1],T=s[l+2];if(typeof E!="function"){if(Py(E||m)===null)continue;break}var D=Nt(m);D!==null&&(s.splice(l,3),l-=3,jg(D,{pending:!0,data:T,method:m.method,action:E},E,T))}}))}function Vu(s){function l(Ae){return sm(Ae,s)}Ul!==null&&sm(Ul,s),zl!==null&&sm(zl,s),Fl!==null&&sm(Fl,s),Sh.forEach(l),xh.forEach(l);for(var m=0;m<ql.length;m++){var E=ql[m];E.blockedOn===s&&(E.blockedOn=null)}for(;0<ql.length&&(m=ql[0],m.blockedOn===null);)M4(m),m.blockedOn===null&&ql.shift();if(m=(s.ownerDocument||s).$$reactFormReplay,m!=null)for(E=0;E<m.length;E+=3){var T=m[E],D=m[E+1],V=T[ut]||null;if(typeof D=="function")V||L4(m);else if(V){var te=null;if(D&&D.hasAttribute("formAction")){if(T=D,V=D[ut]||null)te=V.formAction;else if(Py(T)!==null)continue}else te=V.action;typeof te=="function"?m[E+1]=te:(m.splice(E,3),E-=3),L4(m)}}}function k4(){function s(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(V){return T=V})},focusReset:"manual",scroll:"manual"})}function l(){T!==null&&(T(),T=null),E||setTimeout(m,20)}function m(){if(!E&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,T=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(m,100),function(){E=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),T!==null&&(T(),T=null)}}}function Uy(s){this._internalRoot=s}om.prototype.render=Uy.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var m=l.current,E=qs();C4(m,E,s,l,null,null)},om.prototype.unmount=Uy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;C4(s.current,2,null,s,null,null),Fp(),l[Et]=null}};function om(s){this._internalRoot=s}om.prototype.unstable_scheduleHydration=function(s){if(s){var l=Je();s={blockedOn:null,target:s,priority:l};for(var m=0;m<ql.length&&l!==0&&l<ql[m].priority;m++);ql.splice(m,0,s),m===0&&M4(s)}};var j4=e.version;if(j4!=="19.2.3")throw Error(r(527,j4,"19.2.3"));de.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=y(l),s=s!==null?w(s):null,s=s===null?null:s.stateNode,s};var LD={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{Pn=lm.inject(LD),et=lm}catch{}}return Ch.createRoot=function(s,l){if(!i(s))throw Error(r(299));var m=!1,E="",T=$S,D=VS,V=HS;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(E=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(V=l.onRecoverableError)),l=_4(s,1,!1,null,null,m,E,null,T,D,V,k4),s[Et]=l.current,wy(s),new Uy(l)},Ch.hydrateRoot=function(s,l,m){if(!i(s))throw Error(r(299));var E=!1,T="",D=$S,V=VS,te=HS,Ae=null;return m!=null&&(m.unstable_strictMode===!0&&(E=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(D=m.onUncaughtError),m.onCaughtError!==void 0&&(V=m.onCaughtError),m.onRecoverableError!==void 0&&(te=m.onRecoverableError),m.formState!==void 0&&(Ae=m.formState)),l=_4(s,1,!0,l,m??null,E,T,Ae,D,V,te,k4),l.context=A4(null),m=l.current,E=qs(),E=Le(E),T=Nl(E),T.callback=null,Tl(m,T,E),m=E,l.current.lanes=m,ii(l,m),ao(l),s[Et]=l.current,wy(s),new om(l)},Ch.version="19.2.3",Ch}var K4;function VD(){if(K4)return Fy.exports;K4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fy.exports=$D(),Fy.exports}var HD=VD();const KD=So(HD);var re=jf();const za=So(re),GD=p6({__proto__:null,default:za},[re]);var g6=t=>{throw TypeError(t)},YD=(t,e,n)=>e.has(t)||g6("Cannot "+n),Ky=(t,e,n)=>(YD(t,e,"read from private field"),n?n.call(t):e.get(t)),WD=(t,e,n)=>e.has(t)?g6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),G4="popstate";function XD(t={}){function e(i,a){let{pathname:u="/",search:p="",hash:g=""}=ul(i.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),ld("",{pathname:u,search:p,hash:g},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let u=i.document.querySelector("base"),p="";if(u&&u.getAttribute("href")){let g=i.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof a=="string"?a:yo(a))}function r(i,a){Yr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return ZD(e,n,r,t)}function Rn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QD(){return Math.random().toString(36).substring(2,10)}function Y4(t,e){return{usr:t.state,key:t.key,idx:e}}function ld(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ul(e):e,state:n,key:e&&e.key||r||QD()}}function yo({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ul(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function ZD(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,u=i.history,p="POP",g=null,y=w();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function w(){return(u.state||{idx:null}).idx}function S(){p="POP";let M=w(),L=M==null?null:M-y;y=M,g&&g({action:p,location:R.location,delta:L})}function _(M,L){p="PUSH";let k=ld(R.location,M,L);n&&n(k,M),y=w()+1;let j=Y4(k,y),$=R.createHref(k);try{u.pushState(j,"",$)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign($)}a&&g&&g({action:p,location:R.location,delta:1})}function C(M,L){p="REPLACE";let k=ld(R.location,M,L);n&&n(k,M),y=w();let j=Y4(k,y),$=R.createHref(k);u.replaceState(j,"",$),a&&g&&g({action:p,location:R.location,delta:0})}function N(M){return y6(M)}let R={get action(){return p},get location(){return t(i,u)},listen(M){if(g)throw new Error("A history only accepts one active listener");return i.addEventListener(G4,S),g=M,()=>{i.removeEventListener(G4,S),g=null}},createHref(M){return e(i,M)},createURL:N,encodeLocation(M){let L=N(M);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:_,replace:C,go(M){return u.go(M)}};return R}function y6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Rn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:yo(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var Bh,W4=class{constructor(t){if(WD(this,Bh,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(Ky(this,Bh).has(t))return Ky(this,Bh).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){Ky(this,Bh).set(t,e)}};Bh=new WeakMap;var JD=new Set(["lazy","caseSensitive","path","id","index","children"]);function e9(t){return JD.has(t)}var t9=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function n9(t){return t9.has(t)}function r9(t){return t.index===!0}function cd(t,e,n=[],r={},i=!1){return t.map((a,u)=>{let p=[...n,String(u)],g=typeof a.id=="string"?a.id:p.join("-");if(Rn(a.index!==!0||!a.children,"Cannot specify children on an index route"),Rn(i||!r[g],`Found a route id collision on id "${g}".  Route id's must be globally unique within Data Router usages`),r9(a)){let y={...a,id:g};return r[g]=X4(y,e(y)),y}else{let y={...a,id:g,children:void 0};return r[g]=X4(y,e(y)),a.children&&(y.children=cd(a.children,e,p,r,i)),y}})}function X4(t,e){return Object.assign(t,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...t.lazy,...e.lazy}}:{}})}function Wl(t,e,n="/"){return Uh(t,e,n,!1)}function Uh(t,e,n,r){let i=typeof e=="string"?ul(e):e,a=Ta(i.pathname||"/",n);if(a==null)return null;let u=v6(t);s9(u);let p=null;for(let g=0;p==null&&g<u.length;++g){let y=g9(a);p=p9(u[g],y,r)}return p}function i9(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function v6(t,e=[],n=[],r="",i=!1){let a=(u,p,g=i,y)=>{let w={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(r)&&g)return;Rn(w.relativePath.startsWith(r),`Absolute route path "${w.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(r.length)}let S=ho([r,w.relativePath]),_=n.concat(w);u.children&&u.children.length>0&&(Rn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),v6(u.children,e,_,S,g)),!(u.path==null&&!u.index)&&e.push({path:S,score:h9(S,u.index),routesMeta:_})};return t.forEach((u,p)=>{if(u.path===""||!u.path?.includes("?"))a(u,p);else for(let g of b6(u.path))a(u,p,!0,g)}),e}function b6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let u=b6(r.join("/")),p=[];return p.push(...u.map(g=>g===""?a:[a,g].join("/"))),i&&p.push(...u),p.map(g=>t.startsWith("/")&&g===""?"/":g)}function s9(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var a9=/^:[\w-]+$/,o9=3,l9=2,c9=1,u9=10,f9=-2,Q4=t=>t==="*";function h9(t,e){let n=t.split("/"),r=n.length;return n.some(Q4)&&(r+=f9),e&&(r+=l9),n.filter(i=>!Q4(i)).reduce((i,a)=>i+(a9.test(a)?o9:a===""?c9:u9),r)}function d9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function p9(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",u=[];for(let p=0;p<r.length;++p){let g=r[p],y=p===r.length-1,w=a==="/"?e:e.slice(a.length)||"/",S=k0({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),_=g.route;if(!S&&y&&n&&!r[r.length-1].route.index&&(S=k0({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!S)return null;Object.assign(i,S.params),u.push({params:i,pathname:ho([a,S.pathname]),pathnameBase:b9(ho([a,S.pathnameBase])),route:_}),S.pathnameBase!=="/"&&(a=ho([a,S.pathnameBase]))}return u}function k0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=m9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],u=a.replace(/(.)\/+$/,"$1"),p=i.slice(1);return{params:r.reduce((y,{paramName:w,isOptional:S},_)=>{if(w==="*"){let N=p[_]||"";u=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const C=p[_];return S&&!C?y[w]=void 0:y[w]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:u,pattern:t}}function m9(t,e=!1,n=!0){Yr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function g9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ta(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function y9({basename:t,pathname:e}){return e==="/"?t:ho([t,e])}var w6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b1=t=>w6.test(t);function v9(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ul(t):t,a;if(n)if(b1(n))a=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Yr(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?a=Z4(n.substring(1),"/"):a=Z4(n,e)}else a=e;return{pathname:a,search:w9(r),hash:E9(i)}}function Z4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function w1(t){let e=E6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function E1(t,e,n,r=!1){let i;typeof t=="string"?i=ul(t):(i={...t},Rn(!i.pathname||!i.pathname.includes("?"),Gy("?","pathname","search",i)),Rn(!i.pathname||!i.pathname.includes("#"),Gy("#","pathname","hash",i)),Rn(!i.search||!i.search.includes("#"),Gy("#","search","hash",i)));let a=t===""||i.pathname==="",u=a?"/":i.pathname,p;if(u==null)p=n;else{let S=e.length-1;if(!r&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),S-=1;i.pathname=_.join("/")}p=S>=0?e[S]:"/"}let g=v9(i,p),y=u&&u!=="/"&&u.endsWith("/"),w=(a||u===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var ho=t=>t.join("/").replace(/\/\/+/g,"/"),b9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),w9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,E9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,jd=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ud(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Pd(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var S6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function x6(t,e){let n=t;if(typeof n!="string"||!w6.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(S6)try{let a=new URL(window.location.href),u=n.startsWith("//")?new URL(a.protocol+n):new URL(n),p=Ta(u.pathname,e);u.origin===a.origin&&p!=null?n=p+u.search+u.hash:i=!0}catch{Yr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}var Zl=Symbol("Uninstrumented");function S9(t,e){let n={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};t.forEach(i=>i({id:e.id,index:e.index,path:e.path,instrument(a){let u=Object.keys(n);for(let p of u)a[p]&&n[p].push(a[p])}}));let r={};if(typeof e.lazy=="function"&&n.lazy.length>0){let i=sf(n.lazy,e.lazy,()=>{});i&&(r.lazy=i)}if(typeof e.lazy=="object"){let i=e.lazy;["middleware","loader","action"].forEach(a=>{let u=i[a],p=n[`lazy.${a}`];if(typeof u=="function"&&p.length>0){let g=sf(p,u,()=>{});g&&(r.lazy=Object.assign(r.lazy||{},{[a]:g}))}})}return["loader","action"].forEach(i=>{let a=e[i];if(typeof a=="function"&&n[i].length>0){let u=a[Zl]??a,p=sf(n[i],u,(...g)=>J4(g[0]));p&&(p[Zl]=u,r[i]=p)}}),e.middleware&&e.middleware.length>0&&n.middleware.length>0&&(r.middleware=e.middleware.map(i=>{let a=i[Zl]??i,u=sf(n.middleware,a,(...p)=>J4(p[0]));return u?(u[Zl]=a,u):i})),r}function x9(t,e){let n={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(i){let a=Object.keys(i);for(let u of a)i[u]&&n[u].push(i[u])}})),n.navigate.length>0){let r=t.navigate[Zl]??t.navigate,i=sf(n.navigate,r,(...a)=>{let[u,p]=a;return{to:typeof u=="number"||typeof u=="string"?u:u?yo(u):".",...e_(t,p??{})}});i&&(i[Zl]=r,t.navigate=i)}if(n.fetch.length>0){let r=t.fetch[Zl]??t.fetch,i=sf(n.fetch,r,(...a)=>{let[u,,p,g]=a;return{href:p??".",fetcherKey:u,...e_(t,g??{})}});i&&(i[Zl]=r,t.fetch=i)}return t}function sf(t,e,n){return t.length===0?null:async(...r)=>{let i=await _6(t,n(...r),()=>e(...r),t.length-1);if(i.type==="error")throw i.value;return i.value}}async function _6(t,e,n,r){let i=t[r],a;if(i){let u,p=async()=>(u?console.error("You cannot call instrumented handlers more than once"):u=_6(t,e,n,r-1),a=await u,Rn(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await i(p,e)}catch(g){console.error("An instrumentation function threw an error:",g)}u||await p(),await u}else try{a={type:"success",value:await n()}}catch(u){a={type:"error",value:u}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function J4(t){let{request:e,context:n,params:r,unstable_pattern:i}=t;return{request:_9(e),params:{...r},unstable_pattern:i,context:A9(n)}}function e_(t,e){return{currentUrl:yo(t.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function _9(t){return{method:t.method,url:t.url,headers:{get:(...e)=>t.headers.get(...e)}}}function A9(t){if(N9(t)){let e={...t};return Object.freeze(e),e}else return{get:e=>t.get(e)}}var C9=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function N9(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===C9}var A6=["POST","PUT","PATCH","DELETE"],T9=new Set(A6),O9=["GET",...A6],R9=new Set(O9),C6=new Set([301,302,303,307,308]),I9=new Set([307,308]),Yy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},M9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Nh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},D9=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),N6="remix-router-transitions",T6=Symbol("ResetLoaderData");function L9(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Rn(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||D9,a=i;if(t.unstable_instrumentations){let ve=t.unstable_instrumentations;a=Ie=>({...i(Ie),...S9(ve.map(Le=>Le.route).filter(Boolean),Ie)})}let u={},p=cd(t.routes,a,void 0,u),g,y=t.basename||"/";y.startsWith("/")||(y=`/${y}`);let w=t.dataStrategy||U9,S={...t.future},_=null,C=new Set,N=null,R=null,M=null,L=t.hydrationData!=null,k=Wl(p,t.history.location,y),j=!1,$=null,U;if(k==null&&!t.patchRoutesOnNavigation){let ve=va(404,{pathname:t.history.location.pathname}),{matches:Ie,route:Le}=cm(p);U=!0,k=Ie,$={[Le.id]:ve}}else if(k&&!t.hydrationData&&Dn(k,p,t.history.location.pathname).active&&(k=null),k)if(k.some(ve=>ve.route.lazy))U=!1;else if(!k.some(ve=>Xw(ve.route)))U=!0;else{let ve=t.hydrationData?t.hydrationData.loaderData:null,Ie=t.hydrationData?t.hydrationData.errors:null;if(Ie){let Le=k.findIndex(nt=>Ie[nt.route.id]!==void 0);U=k.slice(0,Le+1).every(nt=>!Ab(nt.route,ve,Ie))}else U=k.every(Le=>!Ab(Le.route,ve,Ie))}else{U=!1,k=[];let ve=Dn(null,p,t.history.location.pathname);ve.active&&ve.matches&&(j=!0,k=ve.matches)}let F,B={historyAction:t.history.action,location:t.history.location,matches:k,initialized:U,navigation:Yy,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||$,fetchers:new Map,blockers:new Map},Z="POP",le=null,Ne=!1,G,ce=!1,se=new Map,Ee=null,ue=!1,ee=!1,de=new Set,we=new Map,Oe=0,pe=-1,K=new Map,oe=new Set,ae=new Map,Y=new Map,ie=new Set,be=new Map,Ye,Ve=null;function $e(){if(_=t.history.listen(({action:ve,location:Ie,delta:Le})=>{if(Ye){Ye(),Ye=void 0;return}Yr(be.size===0||Le!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let nt=rn({currentLocation:B.location,nextLocation:Ie,historyAction:ve});if(nt&&Le!=null){let Je=new Promise(Ge=>{Ye=Ge});t.history.go(Le*-1),Xr(nt,{state:"blocked",location:Ie,proceed(){Xr(nt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),Je.then(()=>t.history.go(Le))},reset(){let Ge=new Map(B.blockers);Ge.set(nt,Nh),Se({blockers:Ge})}}),le?.resolve(),le=null;return}return Mt(ve,Ie)}),n){r7(e,se);let ve=()=>i7(e,se);e.addEventListener("pagehide",ve),Ee=()=>e.removeEventListener("pagehide",ve)}return B.initialized||Mt("POP",B.location,{initialHydration:!0}),F}function bt(){_&&_(),Ee&&Ee(),C.clear(),G&&G.abort(),B.fetchers.forEach((ve,Ie)=>zi(Ie)),B.blockers.forEach((ve,Ie)=>dt(Ie))}function xe(ve){return C.add(ve),()=>C.delete(ve)}function Se(ve,Ie={}){ve.matches&&(ve.matches=ve.matches.map(Je=>{let Ge=u[Je.route.id],pt=Je.route;return pt.element!==Ge.element||pt.errorElement!==Ge.errorElement||pt.hydrateFallbackElement!==Ge.hydrateFallbackElement?{...Je,route:Ge}:Je})),B={...B,...ve};let Le=[],nt=[];B.fetchers.forEach((Je,Ge)=>{Je.state==="idle"&&(ie.has(Ge)?Le.push(Ge):nt.push(Ge))}),ie.forEach(Je=>{!B.fetchers.has(Je)&&!we.has(Je)&&Le.push(Je)}),[...C].forEach(Je=>Je(B,{deletedFetchers:Le,newErrors:ve.errors??null,viewTransitionOpts:Ie.viewTransitionOpts,flushSync:Ie.flushSync===!0})),Le.forEach(Je=>zi(Je)),nt.forEach(Je=>B.fetchers.delete(Je))}function Me(ve,Ie,{flushSync:Le}={}){let nt=B.actionData!=null&&B.navigation.formMethod!=null&&ns(B.navigation.formMethod)&&B.navigation.state==="loading"&&ve.state?._isRedirect!==!0,Je;Ie.actionData?Object.keys(Ie.actionData).length>0?Je=Ie.actionData:Je=null:nt?Je=B.actionData:Je=null;let Ge=Ie.loaderData?u_(B.loaderData,Ie.loaderData,Ie.matches||[],Ie.errors):B.loaderData,pt=B.blockers;pt.size>0&&(pt=new Map(pt),pt.forEach((St,xt)=>pt.set(xt,Nh)));let mt=ue?!1:Ji(ve,Ie.matches||B.matches),ut=Ne===!0||B.navigation.formMethod!=null&&ns(B.navigation.formMethod)&&ve.state?._isRedirect!==!0;g&&(p=g,g=void 0),ue||Z==="POP"||(Z==="PUSH"?t.history.push(ve,ve.state):Z==="REPLACE"&&t.history.replace(ve,ve.state));let Et;if(Z==="POP"){let St=se.get(B.location.pathname);St&&St.has(ve.pathname)?Et={currentLocation:B.location,nextLocation:ve}:se.has(ve.pathname)&&(Et={currentLocation:ve,nextLocation:B.location})}else if(ce){let St=se.get(B.location.pathname);St?St.add(ve.pathname):(St=new Set([ve.pathname]),se.set(B.location.pathname,St)),Et={currentLocation:B.location,nextLocation:ve}}Se({...Ie,actionData:Je,loaderData:Ge,historyAction:Z,location:ve,initialized:!0,navigation:Yy,revalidation:"idle",restoreScrollPosition:mt,preventScrollReset:ut,blockers:pt},{viewTransitionOpts:Et,flushSync:Le===!0}),Z="POP",Ne=!1,ce=!1,ue=!1,ee=!1,le?.resolve(),le=null,Ve?.resolve(),Ve=null}async function Qe(ve,Ie){if(le?.resolve(),le=null,typeof ve=="number"){le||(le=p_());let en=le.promise;return t.history.go(ve),en}let Le=_b(B.location,B.matches,y,ve,Ie?.fromRouteId,Ie?.relative),{path:nt,submission:Je,error:Ge}=t_(!1,Le,Ie),pt=B.location,mt=ld(B.location,nt,Ie&&Ie.state);mt={...mt,...t.history.encodeLocation(mt)};let ut=Ie&&Ie.replace!=null?Ie.replace:void 0,Et="PUSH";ut===!0?Et="REPLACE":ut===!1||Je!=null&&ns(Je.formMethod)&&Je.formAction===B.location.pathname+B.location.search&&(Et="REPLACE");let St=Ie&&"preventScrollReset"in Ie?Ie.preventScrollReset===!0:void 0,xt=(Ie&&Ie.flushSync)===!0,Gt=rn({currentLocation:pt,nextLocation:mt,historyAction:Et});if(Gt){Xr(Gt,{state:"blocked",location:mt,proceed(){Xr(Gt,{state:"proceeding",proceed:void 0,reset:void 0,location:mt}),Qe(ve,Ie)},reset(){let en=new Map(B.blockers);en.set(Gt,Nh),Se({blockers:en})}});return}await Mt(Et,mt,{submission:Je,pendingError:Ge,preventScrollReset:St,replace:Ie&&Ie.replace,enableViewTransition:Ie&&Ie.viewTransition,flushSync:xt,callSiteDefaultShouldRevalidate:Ie&&Ie.unstable_defaultShouldRevalidate})}function ct(){Ve||(Ve=p_()),jr(),Se({revalidation:"loading"});let ve=Ve.promise;return B.navigation.state==="submitting"?ve:B.navigation.state==="idle"?(Mt(B.historyAction,B.location,{startUninterruptedRevalidation:!0}),ve):(Mt(Z||B.historyAction,B.navigation.location,{overrideNavigation:B.navigation,enableViewTransition:ce===!0}),ve)}async function Mt(ve,Ie,Le){G&&G.abort(),G=null,Z=ve,ue=(Le&&Le.startUninterruptedRevalidation)===!0,Or(B.location,B.matches),Ne=(Le&&Le.preventScrollReset)===!0,ce=(Le&&Le.enableViewTransition)===!0;let nt=g||p,Je=Le&&Le.overrideNavigation,Ge=Le?.initialHydration&&B.matches&&B.matches.length>0&&!j?B.matches:Wl(nt,Ie,y),pt=(Le&&Le.flushSync)===!0;if(Ge&&B.initialized&&!ee&&G9(B.location,Ie)&&!(Le&&Le.submission&&ns(Le.submission.formMethod))){Me(Ie,{matches:Ge},{flushSync:pt});return}let mt=Dn(Ge,nt,Ie.pathname);if(mt.active&&mt.matches&&(Ge=mt.matches),!Ge){let{error:wn,notFoundMatches:_t,route:Nt}=vr(Ie.pathname);Me(Ie,{matches:_t,loaderData:{},errors:{[Nt.id]:wn}},{flushSync:pt});return}G=new AbortController;let ut=Wu(t.history,Ie,G.signal,Le&&Le.submission),Et=t.getContext?await t.getContext():new W4,St;if(Le&&Le.pendingError)St=[Xl(Ge).route.id,{type:"error",error:Le.pendingError}];else if(Le&&Le.submission&&ns(Le.submission.formMethod)){let wn=await ln(ut,Ie,Le.submission,Ge,Et,mt.active,Le&&Le.initialHydration===!0,{replace:Le.replace,flushSync:pt});if(wn.shortCircuited)return;if(wn.pendingActionResult){let[_t,Nt]=wn.pendingActionResult;if(Gs(Nt)&&ud(Nt.error)&&Nt.error.status===404){G=null,Me(Ie,{matches:wn.matches,loaderData:{},errors:{[_t]:Nt.error}});return}}Ge=wn.matches||Ge,St=wn.pendingActionResult,Je=Wy(Ie,Le.submission),pt=!1,mt.active=!1,ut=Wu(t.history,ut.url,ut.signal)}let{shortCircuited:xt,matches:Gt,loaderData:en,errors:Gn}=await Zt(ut,Ie,Ge,Et,mt.active,Je,Le&&Le.submission,Le&&Le.fetcherSubmission,Le&&Le.replace,Le&&Le.initialHydration===!0,pt,St,Le&&Le.callSiteDefaultShouldRevalidate);xt||(G=null,Me(Ie,{matches:Gt||Ge,...f_(St),loaderData:en,errors:Gn}))}async function ln(ve,Ie,Le,nt,Je,Ge,pt,mt={}){jr();let ut=t7(Ie,Le);if(Se({navigation:ut},{flushSync:mt.flushSync===!0}),Ge){let xt=await Jn(nt,Ie.pathname,ve.signal);if(xt.type==="aborted")return{shortCircuited:!0};if(xt.type==="error"){if(xt.partialMatches.length===0){let{matches:en,route:Gn}=cm(p);return{matches:en,pendingActionResult:[Gn.id,{type:"error",error:xt.error}]}}let Gt=Xl(xt.partialMatches).route.id;return{matches:xt.partialMatches,pendingActionResult:[Gt,{type:"error",error:xt.error}]}}else if(xt.matches)nt=xt.matches;else{let{notFoundMatches:Gt,error:en,route:Gn}=vr(Ie.pathname);return{matches:Gt,pendingActionResult:[Gn.id,{type:"error",error:en}]}}}let Et,St=v0(nt,Ie);if(!St.route.action&&!St.route.lazy)Et={type:"error",error:va(405,{method:ve.method,pathname:Ie.pathname,routeId:St.route.id})};else{let xt=hf(a,u,ve,nt,St,pt?[]:r,Je),Gt=await gr(ve,xt,Je,null);if(Et=Gt[St.route.id],!Et){for(let en of nt)if(Gt[en.route.id]){Et=Gt[en.route.id];break}}if(ve.signal.aborted)return{shortCircuited:!0}}if(zc(Et)){let xt;return mt&&mt.replace!=null?xt=mt.replace:xt=o_(Et.response.headers.get("Location"),new URL(ve.url),y)===B.location.pathname+B.location.search,await Jt(ve,Et,!0,{submission:Le,replace:xt}),{shortCircuited:!0}}if(Gs(Et)){let xt=Xl(nt,St.route.id);return(mt&&mt.replace)!==!0&&(Z="PUSH"),{matches:nt,pendingActionResult:[xt.route.id,Et,St.route.id]}}return{matches:nt,pendingActionResult:[St.route.id,Et]}}async function Zt(ve,Ie,Le,nt,Je,Ge,pt,mt,ut,Et,St,xt,Gt){let en=Ge||Wy(Ie,pt),Gn=pt||mt||d_(en),wn=!ue&&!Et;if(Je){if(wn){let Yn=jt(xt);Se({navigation:en,...Yn!==void 0?{actionData:Yn}:{}},{flushSync:St})}let st=await Jn(Le,Ie.pathname,ve.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){if(st.partialMatches.length===0){let{matches:si,route:br}=cm(p);return{matches:si,loaderData:{},errors:{[br.id]:st.error}}}let Yn=Xl(st.partialMatches).route.id;return{matches:st.partialMatches,loaderData:{},errors:{[Yn]:st.error}}}else if(st.matches)Le=st.matches;else{let{error:Yn,notFoundMatches:si,route:br}=vr(Ie.pathname);return{matches:si,loaderData:{},errors:{[br.id]:Yn}}}}let _t=g||p,{dsMatches:Nt,revalidatingFetchers:qn}=n_(ve,nt,a,u,t.history,B,Le,Gn,Ie,Et?[]:r,Et===!0,ee,de,ie,ae,oe,_t,y,t.patchRoutesOnNavigation!=null,xt,Gt);if(pe=++Oe,!t.dataStrategy&&!Nt.some(st=>st.shouldLoad)&&!Nt.some(st=>st.route.middleware&&st.route.middleware.length>0)&&qn.length===0){let st=Ft();return Me(Ie,{matches:Le,loaderData:{},errors:xt&&Gs(xt[1])?{[xt[0]]:xt[1].error}:null,...f_(xt),...st?{fetchers:new Map(B.fetchers)}:{}},{flushSync:St}),{shortCircuited:!0}}if(wn){let st={};if(!Je){st.navigation=en;let Yn=jt(xt);Yn!==void 0&&(st.actionData=Yn)}qn.length>0&&(st.fetchers=jn(qn)),Se(st,{flushSync:St})}qn.forEach(st=>{et(st.key),st.controller&&we.set(st.key,st.controller)});let rr=()=>qn.forEach(st=>et(st.key));G&&G.signal.addEventListener("abort",rr);let{loaderResults:Nn,fetcherResults:We}=await zn(Nt,qn,ve,nt);if(ve.signal.aborted)return{shortCircuited:!0};G&&G.signal.removeEventListener("abort",rr),qn.forEach(st=>we.delete(st.key));let Mr=um(Nn);if(Mr)return await Jt(ve,Mr.result,!0,{replace:ut}),{shortCircuited:!0};if(Mr=um(We),Mr)return oe.add(Mr.key),await Jt(ve,Mr.result,!0,{replace:ut}),{shortCircuited:!0};let{loaderData:gn,errors:Hn}=c_(B,Le,Nn,xt,qn,We);Et&&B.errors&&(Hn={...B.errors,...Hn});let Pr=Ft(),tn=vn(pe),cn=Pr||tn||qn.length>0;return{matches:Le,loaderData:gn,errors:Hn,...cn?{fetchers:new Map(B.fetchers)}:{}}}function jt(ve){if(ve&&!Gs(ve[1]))return{[ve[0]]:ve[1].data};if(B.actionData)return Object.keys(B.actionData).length===0?null:B.actionData}function jn(ve){return ve.forEach(Ie=>{let Le=B.fetchers.get(Ie.key),nt=Th(void 0,Le?Le.data:void 0);B.fetchers.set(Ie.key,nt)}),new Map(B.fetchers)}async function ot(ve,Ie,Le,nt){et(ve);let Je=(nt&&nt.flushSync)===!0,Ge=g||p,pt=_b(B.location,B.matches,y,Le,Ie,nt?.relative),mt=Wl(Ge,pt,y),ut=Dn(mt,Ge,pt);if(ut.active&&ut.matches&&(mt=ut.matches),!mt){xn(ve,Ie,va(404,{pathname:pt}),{flushSync:Je});return}let{path:Et,submission:St,error:xt}=t_(!0,pt,nt);if(xt){xn(ve,Ie,xt,{flushSync:Je});return}let Gt=t.getContext?await t.getContext():new W4,en=(nt&&nt.preventScrollReset)===!0;if(St&&ns(St.formMethod)){await Wr(ve,Ie,Et,mt,Gt,ut.active,Je,en,St,nt&&nt.unstable_defaultShouldRevalidate);return}ae.set(ve,{routeId:Ie,path:Et}),await nr(ve,Ie,Et,mt,Gt,ut.active,Je,en,St)}async function Wr(ve,Ie,Le,nt,Je,Ge,pt,mt,ut,Et){jr(),ae.delete(ve);let St=B.fetchers.get(ve);Cn(ve,n7(ut,St),{flushSync:pt});let xt=new AbortController,Gt=Wu(t.history,Le,xt.signal,ut);if(Ge){let gt=await Jn(nt,new URL(Gt.url).pathname,Gt.signal,ve);if(gt.type==="aborted")return;if(gt.type==="error"){xn(ve,Ie,gt.error,{flushSync:pt});return}else if(gt.matches)nt=gt.matches;else{xn(ve,Ie,va(404,{pathname:Le}),{flushSync:pt});return}}let en=v0(nt,Le);if(!en.route.action&&!en.route.lazy){let gt=va(405,{method:ut.formMethod,pathname:Le,routeId:Ie});xn(ve,Ie,gt,{flushSync:pt});return}we.set(ve,xt);let Gn=Oe,wn=hf(a,u,Gt,nt,en,r,Je),_t=await gr(Gt,wn,Je,ve),Nt=_t[en.route.id];if(!Nt){for(let gt of wn)if(_t[gt.route.id]){Nt=_t[gt.route.id];break}}if(Gt.signal.aborted){we.get(ve)===xt&&we.delete(ve);return}if(ie.has(ve)){if(zc(Nt)||Gs(Nt)){Cn(ve,Jo(void 0));return}}else{if(zc(Nt))if(we.delete(ve),pe>Gn){Cn(ve,Jo(void 0));return}else return oe.add(ve),Cn(ve,Th(ut)),Jt(Gt,Nt,!1,{fetcherSubmission:ut,preventScrollReset:mt});if(Gs(Nt)){xn(ve,Ie,Nt.error);return}}let qn=B.navigation.location||B.location,rr=Wu(t.history,qn,xt.signal),Nn=g||p,We=B.navigation.state!=="idle"?Wl(Nn,B.navigation.location,y):B.matches;Rn(We,"Didn't find any matches after fetcher action");let Mr=++Oe;K.set(ve,Mr);let gn=Th(ut,Nt.data);B.fetchers.set(ve,gn);let{dsMatches:Hn,revalidatingFetchers:Pr}=n_(rr,Je,a,u,t.history,B,We,ut,qn,r,!1,ee,de,ie,ae,oe,Nn,y,t.patchRoutesOnNavigation!=null,[en.route.id,Nt],Et);Pr.filter(gt=>gt.key!==ve).forEach(gt=>{let wr=gt.key,wi=B.fetchers.get(wr),Tn=Th(void 0,wi?wi.data:void 0);B.fetchers.set(wr,Tn),et(wr),gt.controller&&we.set(wr,gt.controller)}),Se({fetchers:new Map(B.fetchers)});let tn=()=>Pr.forEach(gt=>et(gt.key));xt.signal.addEventListener("abort",tn);let{loaderResults:cn,fetcherResults:st}=await zn(Hn,Pr,rr,Je);if(xt.signal.aborted)return;if(xt.signal.removeEventListener("abort",tn),K.delete(ve),we.delete(ve),Pr.forEach(gt=>we.delete(gt.key)),B.fetchers.has(ve)){let gt=Jo(Nt.data);B.fetchers.set(ve,gt)}let Yn=um(cn);if(Yn)return Jt(rr,Yn.result,!1,{preventScrollReset:mt});if(Yn=um(st),Yn)return oe.add(Yn.key),Jt(rr,Yn.result,!1,{preventScrollReset:mt});let{loaderData:si,errors:br}=c_(B,We,cn,void 0,Pr,st);vn(Mr),B.navigation.state==="loading"&&Mr>pe?(Rn(Z,"Expected pending action"),G&&G.abort(),Me(B.navigation.location,{matches:We,loaderData:si,errors:br,fetchers:new Map(B.fetchers)})):(Se({errors:br,loaderData:u_(B.loaderData,si,We,br),fetchers:new Map(B.fetchers)}),ee=!1)}async function nr(ve,Ie,Le,nt,Je,Ge,pt,mt,ut){let Et=B.fetchers.get(ve);Cn(ve,Th(ut,Et?Et.data:void 0),{flushSync:pt});let St=new AbortController,xt=Wu(t.history,Le,St.signal);if(Ge){let Nt=await Jn(nt,new URL(xt.url).pathname,xt.signal,ve);if(Nt.type==="aborted")return;if(Nt.type==="error"){xn(ve,Ie,Nt.error,{flushSync:pt});return}else if(Nt.matches)nt=Nt.matches;else{xn(ve,Ie,va(404,{pathname:Le}),{flushSync:pt});return}}let Gt=v0(nt,Le);we.set(ve,St);let en=Oe,Gn=hf(a,u,xt,nt,Gt,r,Je),_t=(await gr(xt,Gn,Je,ve))[Gt.route.id];if(we.get(ve)===St&&we.delete(ve),!xt.signal.aborted){if(ie.has(ve)){Cn(ve,Jo(void 0));return}if(zc(_t))if(pe>en){Cn(ve,Jo(void 0));return}else{oe.add(ve),await Jt(xt,_t,!1,{preventScrollReset:mt});return}if(Gs(_t)){xn(ve,Ie,_t.error);return}Cn(ve,Jo(_t.data))}}async function Jt(ve,Ie,Le,{submission:nt,fetcherSubmission:Je,preventScrollReset:Ge,replace:pt}={}){Le||(le?.resolve(),le=null),Ie.response.headers.has("X-Remix-Revalidate")&&(ee=!0);let mt=Ie.response.headers.get("Location");Rn(mt,"Expected a Location header on the redirect Response"),mt=o_(mt,new URL(ve.url),y);let ut=ld(B.location,mt,{_isRedirect:!0});if(n){let Gn=!1;if(Ie.response.headers.has("X-Remix-Reload-Document"))Gn=!0;else if(b1(mt)){const wn=y6(mt,!0);Gn=wn.origin!==e.location.origin||Ta(wn.pathname,y)==null}if(Gn){pt?e.location.replace(mt):e.location.assign(mt);return}}G=null;let Et=pt===!0||Ie.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:St,formAction:xt,formEncType:Gt}=B.navigation;!nt&&!Je&&St&&xt&&Gt&&(nt=d_(B.navigation));let en=nt||Je;if(I9.has(Ie.response.status)&&en&&ns(en.formMethod))await Mt(Et,ut,{submission:{...en,formAction:mt},preventScrollReset:Ge||Ne,enableViewTransition:Le?ce:void 0});else{let Gn=Wy(ut,nt);await Mt(Et,ut,{overrideNavigation:Gn,fetcherSubmission:Je,preventScrollReset:Ge||Ne,enableViewTransition:Le?ce:void 0})}}async function gr(ve,Ie,Le,nt){let Je,Ge={};try{Je=await F9(w,ve,Ie,nt,Le,!1)}catch(pt){return Ie.filter(mt=>mt.shouldLoad).forEach(mt=>{Ge[mt.route.id]={type:"error",error:pt}}),Ge}if(ve.signal.aborted)return Ge;if(!ns(ve.method))for(let pt of Ie){if(Je[pt.route.id]?.type==="error")break;!Je.hasOwnProperty(pt.route.id)&&!B.loaderData.hasOwnProperty(pt.route.id)&&(!B.errors||!B.errors.hasOwnProperty(pt.route.id))&&pt.shouldCallHandler()&&(Je[pt.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${pt.route.id}`)})}for(let[pt,mt]of Object.entries(Je))if(Q9(mt)){let ut=mt.result;Ge[pt]={type:"redirect",response:H9(ut,ve,pt,Ie,y)}}else Ge[pt]=await V9(mt);return Ge}async function zn(ve,Ie,Le,nt){let Je=gr(Le,ve,nt,null),Ge=Promise.all(Ie.map(async ut=>{if(ut.matches&&ut.match&&ut.request&&ut.controller){let St=(await gr(ut.request,ut.matches,nt,ut.key))[ut.match.route.id];return{[ut.key]:St}}else return Promise.resolve({[ut.key]:{type:"error",error:va(404,{pathname:ut.path})}})})),pt=await Je,mt=(await Ge).reduce((ut,Et)=>Object.assign(ut,Et),{});return{loaderResults:pt,fetcherResults:mt}}function jr(){ee=!0,ae.forEach((ve,Ie)=>{we.has(Ie)&&de.add(Ie),et(Ie)})}function Cn(ve,Ie,Le={}){B.fetchers.set(ve,Ie),Se({fetchers:new Map(B.fetchers)},{flushSync:(Le&&Le.flushSync)===!0})}function xn(ve,Ie,Le,nt={}){let Je=Xl(B.matches,Ie);zi(ve),Se({errors:{[Je.route.id]:Le},fetchers:new Map(B.fetchers)},{flushSync:(nt&&nt.flushSync)===!0})}function yr(ve){return Y.set(ve,(Y.get(ve)||0)+1),ie.has(ve)&&ie.delete(ve),B.fetchers.get(ve)||M9}function fi(ve,Ie){et(ve,Ie?.reason),Cn(ve,Jo(null))}function zi(ve){let Ie=B.fetchers.get(ve);we.has(ve)&&!(Ie&&Ie.state==="loading"&&K.has(ve))&&et(ve),ae.delete(ve),K.delete(ve),oe.delete(ve),ie.delete(ve),de.delete(ve),B.fetchers.delete(ve)}function Pn(ve){let Ie=(Y.get(ve)||0)-1;Ie<=0?(Y.delete(ve),ie.add(ve)):Y.set(ve,Ie),Se({fetchers:new Map(B.fetchers)})}function et(ve,Ie){let Le=we.get(ve);Le&&(Le.abort(Ie),we.delete(ve))}function ft(ve){for(let Ie of ve){let Le=yr(Ie),nt=Jo(Le.data);B.fetchers.set(Ie,nt)}}function Ft(){let ve=[],Ie=!1;for(let Le of oe){let nt=B.fetchers.get(Le);Rn(nt,`Expected fetcher: ${Le}`),nt.state==="loading"&&(oe.delete(Le),ve.push(Le),Ie=!0)}return ft(ve),Ie}function vn(ve){let Ie=[];for(let[Le,nt]of K)if(nt<ve){let Je=B.fetchers.get(Le);Rn(Je,`Expected fetcher: ${Le}`),Je.state==="loading"&&(et(Le),K.delete(Le),Ie.push(Le))}return ft(Ie),Ie.length>0}function ni(ve,Ie){let Le=B.blockers.get(ve)||Nh;return be.get(ve)!==Ie&&be.set(ve,Ie),Le}function dt(ve){B.blockers.delete(ve),be.delete(ve)}function Xr(ve,Ie){let Le=B.blockers.get(ve)||Nh;Rn(Le.state==="unblocked"&&Ie.state==="blocked"||Le.state==="blocked"&&Ie.state==="blocked"||Le.state==="blocked"&&Ie.state==="proceeding"||Le.state==="blocked"&&Ie.state==="unblocked"||Le.state==="proceeding"&&Ie.state==="unblocked",`Invalid blocker state transition: ${Le.state} -> ${Ie.state}`);let nt=new Map(B.blockers);nt.set(ve,Ie),Se({blockers:nt})}function rn({currentLocation:ve,nextLocation:Ie,historyAction:Le}){if(be.size===0)return;be.size>1&&Yr(!1,"A router only supports one blocker at a time");let nt=Array.from(be.entries()),[Je,Ge]=nt[nt.length-1],pt=B.blockers.get(Je);if(!(pt&&pt.state==="proceeding")&&Ge({currentLocation:ve,nextLocation:Ie,historyAction:Le}))return Je}function vr(ve){let Ie=va(404,{pathname:ve}),Le=g||p,{matches:nt,route:Je}=cm(Le);return{notFoundMatches:nt,route:Je,error:Ie}}function hi(ve,Ie,Le){if(N=ve,M=Ie,R=Le||null,!L&&B.navigation===Yy){L=!0;let nt=Ji(B.location,B.matches);nt!=null&&Se({restoreScrollPosition:nt})}return()=>{N=null,M=null,R=null}}function ri(ve,Ie){return R&&R(ve,Ie.map(nt=>i9(nt,B.loaderData)))||ve.key}function Or(ve,Ie){if(N&&M){let Le=ri(ve,Ie);N[Le]=M()}}function Ji(ve,Ie){if(N){let Le=ri(ve,Ie),nt=N[Le];if(typeof nt=="number")return nt}return null}function Dn(ve,Ie,Le){if(t.patchRoutesOnNavigation)if(ve){if(Object.keys(ve[0].params).length>0)return{active:!0,matches:Uh(Ie,Le,y,!0)}}else return{active:!0,matches:Uh(Ie,Le,y,!0)||[]};return{active:!1,matches:null}}async function Jn(ve,Ie,Le,nt){if(!t.patchRoutesOnNavigation)return{type:"success",matches:ve};let Je=ve;for(;;){let Ge=g==null,pt=g||p,mt=u;try{await t.patchRoutesOnNavigation({signal:Le,path:Ie,matches:Je,fetcherKey:nt,patch:(St,xt)=>{Le.aborted||r_(St,xt,pt,mt,a,!1)}})}catch(St){return{type:"error",error:St,partialMatches:Je}}finally{Ge&&!Le.aborted&&(p=[...p])}if(Le.aborted)return{type:"aborted"};let ut=Wl(pt,Ie,y),Et=null;if(ut){if(Object.keys(ut[0].params).length===0)return{type:"success",matches:ut};if(Et=Uh(pt,Ie,y,!0),!(Et&&Je.length<Et.length&&ii(Je,Et.slice(0,Je.length))))return{type:"success",matches:ut}}if(Et||(Et=Uh(pt,Ie,y,!0)),!Et||ii(Je,Et))return{type:"success",matches:null};Je=Et}}function ii(ve,Ie){return ve.length===Ie.length&&ve.every((Le,nt)=>Le.route.id===Ie[nt].route.id)}function ir(ve){u={},g=cd(ve,a,void 0,u)}function Fn(ve,Ie,Le=!1){let nt=g==null;r_(ve,Ie,g||p,u,a,Le),nt&&(p=[...p],Se({}))}return F={get basename(){return y},get future(){return S},get state(){return B},get routes(){return p},get window(){return e},initialize:$e,subscribe:xe,enableScrollRestoration:hi,navigate:Qe,fetch:ot,revalidate:ct,createHref:ve=>t.history.createHref(ve),encodeLocation:ve=>t.history.encodeLocation(ve),getFetcher:yr,resetFetcher:fi,deleteFetcher:Pn,dispose:bt,getBlocker:ni,deleteBlocker:dt,patchRoutes:Fn,_internalFetchControllers:we,_internalSetRoutes:ir,_internalSetStateDoNotUseOrYouWillBreakYourApp(ve){Se(ve)}},t.unstable_instrumentations&&(F=x9(F,t.unstable_instrumentations.map(ve=>ve.router).filter(Boolean))),F}function k9(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function _b(t,e,n,r,i,a){let u,p;if(i){u=[];for(let y of e)if(u.push(y),y.route.id===i){p=y;break}}else u=e,p=e[e.length-1];let g=E1(r||".",w1(u),Ta(t.pathname,n)||t.pathname,a==="path");if(r==null&&(g.search=t.search,g.hash=t.hash),(r==null||r===""||r===".")&&p){let y=Zw(g.search);if(p.route.index&&!y)g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index";else if(!p.route.index&&y){let w=new URLSearchParams(g.search),S=w.getAll("index");w.delete("index"),S.filter(C=>C).forEach(C=>w.append("index",C));let _=w.toString();g.search=_?`?${_}`:""}}return n!=="/"&&(g.pathname=y9({basename:n,pathname:g.pathname})),yo(g)}function t_(t,e,n){if(!n||!k9(n))return{path:e};if(n.formMethod&&!e7(n.formMethod))return{path:e,error:va(405,{method:n.formMethod})};let r=()=>({path:e,error:va(400,{type:"invalid-body"})}),a=(n.formMethod||"get").toUpperCase(),u=L6(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!ns(a))return r();let S=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((_,[C,N])=>`${_}${C}=${N}
`,""):String(n.body);return{path:e,submission:{formMethod:a,formAction:u,formEncType:n.formEncType,formData:void 0,json:void 0,text:S}}}else if(n.formEncType==="application/json"){if(!ns(a))return r();try{let S=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:a,formAction:u,formEncType:n.formEncType,formData:void 0,json:S,text:void 0}}}catch{return r()}}}Rn(typeof FormData=="function","FormData is not available in this environment");let p,g;if(n.formData)p=Nb(n.formData),g=n.formData;else if(n.body instanceof FormData)p=Nb(n.body),g=n.body;else if(n.body instanceof URLSearchParams)p=n.body,g=l_(p);else if(n.body==null)p=new URLSearchParams,g=new FormData;else try{p=new URLSearchParams(n.body),g=l_(p)}catch{return r()}let y={formMethod:a,formAction:u,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(ns(y.formMethod))return{path:e,submission:y};let w=ul(e);return t&&w.search&&Zw(w.search)&&p.append("index",""),w.search=`?${p}`,{path:yo(w),submission:y}}function n_(t,e,n,r,i,a,u,p,g,y,w,S,_,C,N,R,M,L,k,j,$){let U=j?Gs(j[1])?j[1].error:j[1].data:void 0,F=i.createURL(a.location),B=i.createURL(g),Z;if(w&&a.errors){let ue=Object.keys(a.errors)[0];Z=u.findIndex(ee=>ee.route.id===ue)}else if(j&&Gs(j[1])){let ue=j[0];Z=u.findIndex(ee=>ee.route.id===ue)-1}let le=j?j[1].statusCode:void 0,Ne=le&&le>=400,G={currentUrl:F,currentParams:a.matches[0]?.params||{},nextUrl:B,nextParams:u[0].params,...p,actionResult:U,actionStatus:le},ce=Pd(u),se=u.map((ue,ee)=>{let{route:de}=ue,we=null;if(Z!=null&&ee>Z?we=!1:de.lazy?we=!0:Xw(de)?w?we=Ab(de,a.loaderData,a.errors):j9(a.loaderData,a.matches[ee],ue)&&(we=!0):we=!1,we!==null)return Cb(n,r,t,ce,ue,y,e,we);let Oe=!1;typeof $=="boolean"?Oe=$:Ne?Oe=!1:(S||F.pathname+F.search===B.pathname+B.search||F.search!==B.search||P9(a.matches[ee],ue))&&(Oe=!0);let pe={...G,defaultShouldRevalidate:Oe},K=Gh(ue,pe);return Cb(n,r,t,ce,ue,y,e,K,pe,$)}),Ee=[];return N.forEach((ue,ee)=>{if(w||!u.some(Y=>Y.route.id===ue.routeId)||C.has(ee))return;let de=a.fetchers.get(ee),we=de&&de.state!=="idle"&&de.data===void 0,Oe=Wl(M,ue.path,L);if(!Oe){if(k&&we)return;Ee.push({key:ee,routeId:ue.routeId,path:ue.path,matches:null,match:null,request:null,controller:null});return}if(R.has(ee))return;let pe=v0(Oe,ue.path),K=new AbortController,oe=Wu(i,ue.path,K.signal),ae=null;if(_.has(ee))_.delete(ee),ae=hf(n,r,oe,Oe,pe,y,e);else if(we)S&&(ae=hf(n,r,oe,Oe,pe,y,e));else{let Y;typeof $=="boolean"?Y=$:Ne?Y=!1:Y=S;let ie={...G,defaultShouldRevalidate:Y};Gh(pe,ie)&&(ae=hf(n,r,oe,Oe,pe,y,e,ie))}ae&&Ee.push({key:ee,routeId:ue.routeId,path:ue.path,matches:ae,match:pe,request:oe,controller:K})}),{dsMatches:se,revalidatingFetchers:Ee}}function Xw(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function Ab(t,e,n){if(t.lazy)return!0;if(!Xw(t))return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function j9(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function P9(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Gh(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function r_(t,e,n,r,i,a){let u;if(t){let y=r[t];Rn(y,`No route found to patch children into: routeId = ${t}`),y.children||(y.children=[]),u=y.children}else u=n;let p=[],g=[];if(e.forEach(y=>{let w=u.find(S=>O6(y,S));w?g.push({existingRoute:w,newRoute:y}):p.push(y)}),p.length>0){let y=cd(p,i,[t||"_","patch",String(u?.length||"0")],r);u.push(...y)}if(a&&g.length>0)for(let y=0;y<g.length;y++){let{existingRoute:w,newRoute:S}=g[y],_=w,[C]=cd([S],i,[],{},!0);Object.assign(_,{element:C.element?C.element:_.element,errorElement:C.errorElement?C.errorElement:_.errorElement,hydrateFallbackElement:C.hydrateFallbackElement?C.hydrateFallbackElement:_.hydrateFallbackElement})}}function O6(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>e.children?.some(i=>O6(n,i))):!1}var i_=new WeakMap,R6=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(Rn(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let a=i.lazy[t];if(!a)return;let u=i_.get(i);u||(u={},i_.set(i,u));let p=u[t];if(p)return p;let g=(async()=>{let y=e9(t),S=i[t]!==void 0&&t!=="hasErrorBoundary";if(y)Yr(!y,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),u[t]=Promise.resolve();else if(S)Yr(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let _=await a();_!=null&&(Object.assign(i,{[t]:_}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(_=>_===void 0)&&(i.lazy=void 0))})();return u[t]=g,g},s_=new WeakMap;function B9(t,e,n,r,i){let a=n[t.id];if(Rn(a,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let w=s_.get(a);if(w)return{lazyRoutePromise:w,lazyHandlerPromise:w};let S=(async()=>{Rn(typeof t.lazy=="function","No lazy route function found");let _=await t.lazy(),C={};for(let N in _){let R=_[N];if(R===void 0)continue;let M=n9(N),k=a[N]!==void 0&&N!=="hasErrorBoundary";M?Yr(!M,"Route property "+N+" is not a supported property to be returned from a lazy route function. This property will be ignored."):k?Yr(!k,`Route "${a.id}" has a static property "${N}" defined but its lazy function is also returning a value for this property. The lazy route property "${N}" will be ignored.`):C[N]=R}Object.assign(a,C),Object.assign(a,{...r(a),lazy:void 0})})();return s_.set(a,S),S.catch(()=>{}),{lazyRoutePromise:S,lazyHandlerPromise:S}}let u=Object.keys(t.lazy),p=[],g;for(let w of u){if(i&&i.includes(w))continue;let S=R6({key:w,route:t,manifest:n,mapRouteProperties:r});S&&(p.push(S),w===e&&(g=S))}let y=p.length>0?Promise.all(p).then(()=>{}):void 0;return y?.catch(()=>{}),g?.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:g}}async function a_(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,a)=>{n[e[a].route.id]=i}),n}async function U9(t){return t.matches.some(e=>e.route.middleware)?I6(t,()=>a_(t)):a_(t)}function I6(t,e){return z9(t,e,r=>{if(J9(r))throw r;return r},W9,n);function n(r,i,a){if(a)return Promise.resolve(Object.assign(a.value,{[i]:{type:"error",result:r}}));{let{matches:u}=t,p=Math.min(Math.max(u.findIndex(y=>y.route.id===i),0),Math.max(u.findIndex(y=>y.shouldCallHandler()),0)),g=Xl(u,u[p].route.id).route.id;return Promise.resolve({[g]:{type:"error",result:r}})}}}async function z9(t,e,n,r,i){let{matches:a,request:u,params:p,context:g,unstable_pattern:y}=t,w=a.flatMap(_=>_.route.middleware?_.route.middleware.map(C=>[_.route.id,C]):[]);return await M6({request:u,params:p,context:g,unstable_pattern:y},w,e,n,r,i)}async function M6(t,e,n,r,i,a,u=0){let{request:p}=t;if(p.signal.aborted)throw p.signal.reason??new Error(`Request aborted: ${p.method} ${p.url}`);let g=e[u];if(!g)return await n();let[y,w]=g,S,_=async()=>{if(S)throw new Error("You may only call `next()` once per middleware");try{return S={value:await M6(t,e,n,r,i,a,u+1)},S.value}catch(C){return S={value:await a(C,y,S)},S.value}};try{let C=await w(t,_),N=C!=null?r(C):void 0;return i(N)?N:S?N??S.value:(S={value:await _()},S.value)}catch(C){return await a(C,y,S)}}function D6(t,e,n,r,i){let a=R6({key:"middleware",route:r.route,manifest:e,mapRouteProperties:t}),u=B9(r.route,ns(n.method)?"action":"loader",e,t,i);return{middleware:a,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function Cb(t,e,n,r,i,a,u,p,g=null,y){let w=!1,S=D6(t,e,n,i,a);return{...i,_lazyPromises:S,shouldLoad:p,shouldRevalidateArgs:g,shouldCallHandler(_){return w=!0,g?typeof y=="boolean"?Gh(i,{...g,defaultShouldRevalidate:y}):typeof _=="boolean"?Gh(i,{...g,defaultShouldRevalidate:_}):Gh(i,g):p},resolve(_){let{lazy:C,loader:N,middleware:R}=i.route,M=w||p||_&&!ns(n.method)&&(C||N),L=R&&R.length>0&&!N&&!C;return M&&(ns(n.method)||!L)?q9({request:n,unstable_pattern:r,match:i,lazyHandlerPromise:S?.handler,lazyRoutePromise:S?.route,handlerOverride:_,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function hf(t,e,n,r,i,a,u,p=null){return r.map(g=>g.route.id!==i.route.id?{...g,shouldLoad:!1,shouldRevalidateArgs:p,shouldCallHandler:()=>!1,_lazyPromises:D6(t,e,n,g,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Cb(t,e,n,Pd(r),g,a,u,!0,p))}async function F9(t,e,n,r,i,a){n.some(y=>y._lazyPromises?.middleware)&&await Promise.all(n.map(y=>y._lazyPromises?.middleware));let u={request:e,unstable_pattern:Pd(n),params:n[0].params,context:i,matches:n},g=await t({...u,fetcherKey:r,runClientMiddleware:y=>{let w=u;return I6(w,()=>y({...w,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(y=>[y._lazyPromises?.handler,y._lazyPromises?.route]))}catch{}return g}async function q9({request:t,unstable_pattern:e,match:n,lazyHandlerPromise:r,lazyRoutePromise:i,handlerOverride:a,scopedContext:u}){let p,g,y=ns(t.method),w=y?"action":"loader",S=_=>{let C,N=new Promise((L,k)=>C=k);g=()=>C(),t.signal.addEventListener("abort",g);let R=L=>typeof _!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${w}" [routeId: ${n.route.id}]`)):_({request:t,unstable_pattern:e,params:n.params,context:u},...L!==void 0?[L]:[]),M=(async()=>{try{return{type:"data",result:await(a?a(k=>R(k)):R())}}catch(L){return{type:"error",result:L}}})();return Promise.race([M,N])};try{let _=y?n.route.action:n.route.loader;if(r||i)if(_){let C,[N]=await Promise.all([S(_).catch(R=>{C=R}),r,i]);if(C!==void 0)throw C;p=N}else{await r;let C=y?n.route.action:n.route.loader;if(C)[p]=await Promise.all([S(C),i]);else if(w==="action"){let N=new URL(t.url),R=N.pathname+N.search;throw va(405,{method:t.method,pathname:R,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(_)p=await S(_);else{let C=new URL(t.url),N=C.pathname+C.search;throw va(404,{pathname:N})}}catch(_){return{type:"error",result:_}}finally{g&&t.signal.removeEventListener("abort",g)}return p}async function $9(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function V9(t){let{result:e,type:n}=t;if(Qw(e)){let r;try{r=await $9(e)}catch(i){return{type:"error",error:i}}return n==="error"?{type:"error",error:new jd(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return n==="error"?h_(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:Y9(e),statusCode:ud(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:ud(e)?e.status:void 0}:h_(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function H9(t,e,n,r,i){let a=t.headers.get("Location");if(Rn(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!b1(a)){let u=r.slice(0,r.findIndex(p=>p.route.id===n)+1);a=_b(new URL(e.url),u,i,a),t.headers.set("Location",a)}return t}function o_(t,e,n){if(b1(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=Ta(i.pathname,n)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return t}function Wu(t,e,n,r){let i=t.createURL(L6(e)).toString(),a={signal:n};if(r&&ns(r.formMethod)){let{formMethod:u,formEncType:p}=r;a.method=u.toUpperCase(),p==="application/json"?(a.headers=new Headers({"Content-Type":p}),a.body=JSON.stringify(r.json)):p==="text/plain"?a.body=r.text:p==="application/x-www-form-urlencoded"&&r.formData?a.body=Nb(r.formData):a.body=r.formData}return new Request(i,a)}function Nb(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function l_(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function K9(t,e,n,r=!1,i=!1){let a={},u=null,p,g=!1,y={},w=n&&Gs(n[1])?n[1].error:void 0;return t.forEach(S=>{if(!(S.route.id in e))return;let _=S.route.id,C=e[_];if(Rn(!zc(C),"Cannot handle redirect results in processLoaderData"),Gs(C)){let N=C.error;if(w!==void 0&&(N=w,w=void 0),u=u||{},i)u[_]=N;else{let R=Xl(t,_);u[R.route.id]==null&&(u[R.route.id]=N)}r||(a[_]=T6),g||(g=!0,p=ud(C.error)?C.error.status:500),C.headers&&(y[_]=C.headers)}else a[_]=C.data,C.statusCode&&C.statusCode!==200&&!g&&(p=C.statusCode),C.headers&&(y[_]=C.headers)}),w!==void 0&&n&&(u={[n[0]]:w},n[2]&&(a[n[2]]=void 0)),{loaderData:a,errors:u,statusCode:p||200,loaderHeaders:y}}function c_(t,e,n,r,i,a){let{loaderData:u,errors:p}=K9(e,n,r);return i.filter(g=>!g.matches||g.matches.some(y=>y.shouldLoad)).forEach(g=>{let{key:y,match:w,controller:S}=g;if(S&&S.signal.aborted)return;let _=a[y];if(Rn(_,"Did not find corresponding fetcher result"),Gs(_)){let C=Xl(t.matches,w?.route.id);p&&p[C.route.id]||(p={...p,[C.route.id]:_.error}),t.fetchers.delete(y)}else if(zc(_))Rn(!1,"Unhandled fetcher revalidation redirect");else{let C=Jo(_.data);t.fetchers.set(y,C)}}),{loaderData:u,errors:p}}function u_(t,e,n,r){let i=Object.entries(e).filter(([,a])=>a!==T6).reduce((a,[u,p])=>(a[u]=p,a),{});for(let a of n){let u=a.route.id;if(!e.hasOwnProperty(u)&&t.hasOwnProperty(u)&&a.route.loader&&(i[u]=t[u]),r&&r.hasOwnProperty(u))break}return i}function f_(t){return t?Gs(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Xl(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function cm(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function va(t,{pathname:e,routeId:n,method:r,type:i,message:a}={}){let u="Unknown Server Error",p="Unknown @remix-run/router error";return t===400?(u="Bad Request",r&&e&&n?p=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(p="Unable to encode submission body")):t===403?(u="Forbidden",p=`Route "${n}" does not match URL "${e}"`):t===404?(u="Not Found",p=`No route matches URL "${e}"`):t===405&&(u="Method Not Allowed",r&&e&&n?p=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(p=`Invalid request method "${r.toUpperCase()}"`)),new jd(t||500,u,new Error(p),!0)}function um(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(zc(i))return{key:r,result:i}}}function L6(t){let e=typeof t=="string"?ul(t):t;return yo({...e,hash:""})}function G9(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Y9(t){return new jd(t.init?.status??500,t.init?.statusText??"Internal Server Error",t.data)}function W9(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,n])=>typeof e=="string"&&X9(n))}function X9(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function Q9(t){return Qw(t.result)&&C6.has(t.result.status)}function Gs(t){return t.type==="error"}function zc(t){return(t&&t.type)==="redirect"}function h_(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Qw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Z9(t){return C6.has(t)}function J9(t){return Qw(t)&&Z9(t.status)&&t.headers.has("Location")}function e7(t){return R9.has(t.toUpperCase())}function ns(t){return T9.has(t.toUpperCase())}function Zw(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function v0(t,e){let n=typeof e=="string"?ul(e).search:e.search;if(t[t.length-1].route.index&&Zw(n||""))return t[t.length-1];let r=E6(t);return r[r.length-1]}function d_(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:a,json:u}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:u,text:void 0}}}function Wy(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function t7(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Th(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function n7(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Jo(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function r7(t,e){try{let n=t.sessionStorage.getItem(N6);if(n){let r=JSON.parse(n);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function i7(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(N6,JSON.stringify(n))}catch(r){Yr(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function p_(){let t,e,n=new Promise((r,i)=>{t=async a=>{r(a);try{await n}catch{}},e=async a=>{i(a);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var cu=re.createContext(null);cu.displayName="DataRouter";var Bd=re.createContext(null);Bd.displayName="DataRouterState";var k6=re.createContext(!1);function s7(){return re.useContext(k6)}var Jw=re.createContext({isTransitioning:!1});Jw.displayName="ViewTransition";var j6=re.createContext(new Map);j6.displayName="Fetchers";var a7=re.createContext(null);a7.displayName="Await";var Js=re.createContext(null);Js.displayName="Navigation";var S1=re.createContext(null);S1.displayName="Location";var Ra=re.createContext({outlet:null,matches:[],isDataRoute:!1});Ra.displayName="Route";var e2=re.createContext(null);e2.displayName="RouteError";var P6="REACT_ROUTER_ERROR",o7="REDIRECT",l7="ROUTE_ERROR_RESPONSE";function c7(t){if(t.startsWith(`${P6}:${o7}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function u7(t){if(t.startsWith(`${P6}:${l7}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new jd(e.status,e.statusText,e.data)}catch{}}function f7(t,{relative:e}={}){Rn(Pf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=re.useContext(Js),{hash:i,pathname:a,search:u}=zd(t,{relative:e}),p=a;return n!=="/"&&(p=a==="/"?n:ho([n,a])),r.createHref({pathname:p,search:u,hash:i})}function Pf(){return re.useContext(S1)!=null}function xo(){return Rn(Pf(),"useLocation() may be used only in the context of a <Router> component."),re.useContext(S1).location}var B6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function U6(t){re.useContext(Js).static||re.useLayoutEffect(t)}function Mi(){let{isDataRoute:t}=re.useContext(Ra);return t?C7():h7()}function h7(){Rn(Pf(),"useNavigate() may be used only in the context of a <Router> component.");let t=re.useContext(cu),{basename:e,navigator:n}=re.useContext(Js),{matches:r}=re.useContext(Ra),{pathname:i}=xo(),a=JSON.stringify(w1(r)),u=re.useRef(!1);return U6(()=>{u.current=!0}),re.useCallback((g,y={})=>{if(Yr(u.current,B6),!u.current)return;if(typeof g=="number"){n.go(g);return}let w=E1(g,JSON.parse(a),i,y.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ho([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,a,i,t])}var d7=re.createContext(null);function p7(t){let e=re.useContext(Ra).outlet;return re.useMemo(()=>e&&re.createElement(d7.Provider,{value:t},e),[e,t])}function Ud(){let{matches:t}=re.useContext(Ra),e=t[t.length-1];return e?e.params:{}}function zd(t,{relative:e}={}){let{matches:n}=re.useContext(Ra),{pathname:r}=xo(),i=JSON.stringify(w1(n));return re.useMemo(()=>E1(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function m7(t,e,n,r,i){Rn(Pf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=re.useContext(Js),{matches:u}=re.useContext(Ra),p=u[u.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",S=p&&p.route;{let k=S&&S.path||"";F6(y,!S||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let _=xo(),C;C=_;let N=C.pathname||"/",R=N;if(w!=="/"){let k=w.replace(/^\//,"").split("/");R="/"+N.replace(/^\//,"").split("/").slice(k.length).join("/")}let M=Wl(t,{pathname:R});return Yr(S||M!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Yr(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),w7(M&&M.map(k=>Object.assign({},k,{params:Object.assign({},g,k.params),pathname:ho([w,a.encodeLocation?a.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?w:ho([w,a.encodeLocation?a.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),u,n,r,i)}function g7(){let t=A7(),e=ud(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=re.createElement(re.Fragment,null,re.createElement("p",null," Hey developer "),re.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",re.createElement("code",{style:a},"ErrorBoundary")," or"," ",re.createElement("code",{style:a},"errorElement")," prop on your route.")),re.createElement(re.Fragment,null,re.createElement("h2",null,"Unexpected Application Error!"),re.createElement("h3",{style:{fontStyle:"italic"}},e),n?re.createElement("pre",{style:i},n):null,u)}var y7=re.createElement(g7,null),z6=class extends re.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=u7(t.digest);n&&(t=n)}let e=t!==void 0?re.createElement(Ra.Provider,{value:this.props.routeContext},re.createElement(e2.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?re.createElement(v7,{error:t},e):e}};z6.contextType=k6;var Xy=new WeakMap;function v7({children:t,error:e}){let{basename:n}=re.useContext(Js);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=c7(e.digest);if(r){let i=Xy.get(e);if(i)throw i;let a=x6(r.location,n);if(S6&&!Xy.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Xy.set(e,u),u}return re.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function b7({routeContext:t,match:e,children:n}){let r=re.useContext(cu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),re.createElement(Ra.Provider,{value:t},n)}function w7(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=n?.errors;if(u!=null){let w=a.findIndex(S=>S.route.id&&u?.[S.route.id]!==void 0);Rn(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,w+1))}let p=!1,g=-1;if(n)for(let w=0;w<a.length;w++){let S=a[w];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(g=w),S.route.id){let{loaderData:_,errors:C}=n,N=S.route.loader&&!_.hasOwnProperty(S.route.id)&&(!C||C[S.route.id]===void 0);if(S.route.lazy||N){p=!0,g>=0?a=a.slice(0,g+1):a=[a[0]];break}}}let y=n&&r?(w,S)=>{r(w,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Pd(n.matches),errorInfo:S})}:void 0;return a.reduceRight((w,S,_)=>{let C,N=!1,R=null,M=null;n&&(C=u&&S.route.id?u[S.route.id]:void 0,R=S.route.errorElement||y7,p&&(g<0&&_===0?(F6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):g===_&&(N=!0,M=S.route.hydrateFallbackElement||null)));let L=e.concat(a.slice(0,_+1)),k=()=>{let j;return C?j=R:N?j=M:S.route.Component?j=re.createElement(S.route.Component,null):S.route.element?j=S.route.element:j=w,re.createElement(b7,{match:S,routeContext:{outlet:w,matches:L,isDataRoute:n!=null},children:j})};return n&&(S.route.ErrorBoundary||S.route.errorElement||_===0)?re.createElement(z6,{location:n.location,revalidation:n.revalidation,component:R,error:C,children:k(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:y}):k()},null)}function t2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E7(t){let e=re.useContext(cu);return Rn(e,t2(t)),e}function S7(t){let e=re.useContext(Bd);return Rn(e,t2(t)),e}function x7(t){let e=re.useContext(Ra);return Rn(e,t2(t)),e}function n2(t){let e=x7(t),n=e.matches[e.matches.length-1];return Rn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function _7(){return n2("useRouteId")}function A7(){let t=re.useContext(e2),e=S7("useRouteError"),n=n2("useRouteError");return t!==void 0?t:e.errors?.[n]}function C7(){let{router:t}=E7("useNavigate"),e=n2("useNavigate"),n=re.useRef(!1);return U6(()=>{n.current=!0}),re.useCallback(async(i,a={})=>{Yr(n.current,B6),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var m_={};function F6(t,e,n){!e&&!m_[t]&&(m_[t]=!0,Yr(!1,n))}var g_={};function y_(t,e){!t&&!g_[e]&&(g_[e]=!0,console.warn(e))}var N7="useOptimistic",v_=GD[N7],T7=()=>{};function O7(t){return v_?v_(t):[t,T7]}function R7(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Yr(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:re.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Yr(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:re.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Yr(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:re.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var I7=["HydrateFallback","hydrateFallbackElement"],M7=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function D7({router:t,flushSync:e,onError:n,unstable_useTransitions:r}){r=s7()||r;let[a,u]=re.useState(t.state),[p,g]=O7(a),[y,w]=re.useState(),[S,_]=re.useState({isTransitioning:!1}),[C,N]=re.useState(),[R,M]=re.useState(),[L,k]=re.useState(),j=re.useRef(new Map),$=re.useCallback((Z,{deletedFetchers:le,newErrors:Ne,flushSync:G,viewTransitionOpts:ce})=>{Ne&&n&&Object.values(Ne).forEach(Ee=>n(Ee,{location:Z.location,params:Z.matches[0]?.params??{},unstable_pattern:Pd(Z.matches)})),Z.fetchers.forEach((Ee,ue)=>{Ee.data!==void 0&&j.current.set(ue,Ee.data)}),le.forEach(Ee=>j.current.delete(Ee)),y_(G===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let se=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(y_(ce==null||se,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!ce||!se){e&&G?e(()=>u(Z)):r===!1?u(Z):re.startTransition(()=>{r===!0&&g(Ee=>b_(Ee,Z)),u(Z)});return}if(e&&G){e(()=>{R&&(C?.resolve(),R.skipTransition()),_({isTransitioning:!0,flushSync:!0,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation})});let Ee=t.window.document.startViewTransition(()=>{e(()=>u(Z))});Ee.finished.finally(()=>{e(()=>{N(void 0),M(void 0),w(void 0),_({isTransitioning:!1})})}),e(()=>M(Ee));return}R?(C?.resolve(),R.skipTransition(),k({state:Z,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation})):(w(Z),_({isTransitioning:!0,flushSync:!1,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation}))},[t.window,e,R,C,r,g,n]);re.useLayoutEffect(()=>t.subscribe($),[t,$]),re.useEffect(()=>{S.isTransitioning&&!S.flushSync&&N(new M7)},[S]),re.useEffect(()=>{if(C&&y&&t.window){let Z=y,le=C.promise,Ne=t.window.document.startViewTransition(async()=>{r===!1?u(Z):re.startTransition(()=>{r===!0&&g(G=>b_(G,Z)),u(Z)}),await le});Ne.finished.finally(()=>{N(void 0),M(void 0),w(void 0),_({isTransitioning:!1})}),M(Ne)}},[y,C,t.window,r,g]),re.useEffect(()=>{C&&y&&p.location.key===y.location.key&&C.resolve()},[C,R,p.location,y]),re.useEffect(()=>{!S.isTransitioning&&L&&(w(L.state),_({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}),k(void 0))},[S.isTransitioning,L]);let U=re.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:Z=>t.navigate(Z),push:(Z,le,Ne)=>t.navigate(Z,{state:le,preventScrollReset:Ne?.preventScrollReset}),replace:(Z,le,Ne)=>t.navigate(Z,{replace:!0,state:le,preventScrollReset:Ne?.preventScrollReset})}),[t]),F=t.basename||"/",B=re.useMemo(()=>({router:t,navigator:U,static:!1,basename:F,onError:n}),[t,U,F,n]);return re.createElement(re.Fragment,null,re.createElement(cu.Provider,{value:B},re.createElement(Bd.Provider,{value:p},re.createElement(j6.Provider,{value:j.current},re.createElement(Jw.Provider,{value:S},re.createElement(B7,{basename:F,location:p.location,navigationType:p.historyAction,navigator:U,unstable_useTransitions:r},re.createElement(L7,{routes:t.routes,future:t.future,state:p,onError:n})))))),null)}function b_(t,e){return{...t,navigation:e.navigation.state!=="idle"?e.navigation:t.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:t.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:t.actionData,fetchers:e.fetchers}}var L7=re.memo(k7);function k7({routes:t,future:e,state:n,onError:r}){return m7(t,void 0,n,r,e)}function j7({to:t,replace:e,state:n,relative:r}){Rn(Pf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=re.useContext(Js);Yr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=re.useContext(Ra),{pathname:u}=xo(),p=Mi(),g=E1(t,w1(a),u,r==="path"),y=JSON.stringify(g);return re.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:r})},[p,y,r,e,n]),null}function P7(t){return p7(t.context)}function B7({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:u}){Rn(!Pf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=t.replace(/^\/*/,"/"),g=re.useMemo(()=>({basename:p,navigator:i,static:a,unstable_useTransitions:u,future:{}}),[p,i,a,u]);typeof n=="string"&&(n=ul(n));let{pathname:y="/",search:w="",hash:S="",state:_=null,key:C="default"}=n,N=re.useMemo(()=>{let R=Ta(y,p);return R==null?null:{location:{pathname:R,search:w,hash:S,state:_,key:C},navigationType:r}},[p,y,w,S,_,C,r]);return Yr(N!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${S}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:re.createElement(Js.Provider,{value:g},re.createElement(S1.Provider,{children:e,value:N}))}var b0="get",w0="application/x-www-form-urlencoded";function x1(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function U7(t){return x1(t)&&t.tagName.toLowerCase()==="button"}function z7(t){return x1(t)&&t.tagName.toLowerCase()==="form"}function F7(t){return x1(t)&&t.tagName.toLowerCase()==="input"}function q7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $7(t,e){return t.button===0&&(!e||e==="_self")&&!q7(t)}function Tb(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function V7(t,e){let n=Tb(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var fm=null;function H7(){if(fm===null)try{new FormData(document.createElement("form"),0),fm=!1}catch{fm=!0}return fm}var K7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qy(t){return t!=null&&!K7.has(t)?(Yr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${w0}"`),null):t}function G7(t,e){let n,r,i,a,u;if(z7(t)){let p=t.getAttribute("action");r=p?Ta(p,e):null,n=t.getAttribute("method")||b0,i=Qy(t.getAttribute("enctype"))||w0,a=new FormData(t)}else if(U7(t)||F7(t)&&(t.type==="submit"||t.type==="image")){let p=t.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||p.getAttribute("action");if(r=g?Ta(g,e):null,n=t.getAttribute("formmethod")||p.getAttribute("method")||b0,i=Qy(t.getAttribute("formenctype"))||Qy(p.getAttribute("enctype"))||w0,a=new FormData(p,t),!H7()){let{name:y,type:w,value:S}=t;if(w==="image"){let _=y?`${y}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else y&&a.append(y,S)}}else{if(x1(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=b0,r=null,i=w0,u=t}return a&&i==="text/plain"&&(u=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function r2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Y7(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ta(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function W7(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function X7(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Q7(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let u=await W7(a,n);return u.links?u.links():[]}return[]}));return tL(r.flat(1).filter(X7).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function w_(t,e,n,r,i,a){let u=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return a==="assets"?e.filter((g,y)=>u(g,y)||p(g,y)):a==="data"?e.filter((g,y)=>{let w=r.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(u(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let S=g.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Z7(t,e,{includeHydrateFallback:n}={}){return J7(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function J7(t){return[...new Set(t)]}function eL(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function tL(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(eL(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function q6(){let t=re.useContext(cu);return r2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nL(){let t=re.useContext(Bd);return r2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var i2=re.createContext(void 0);i2.displayName="FrameworkContext";function $6(){let t=re.useContext(i2);return r2(t,"You must render this element inside a <HydratedRouter> element"),t}function rL(t,e){let n=re.useContext(i2),[r,i]=re.useState(!1),[a,u]=re.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:S}=e,_=re.useRef(null);re.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let R=L=>{L.forEach(k=>{u(k.isIntersecting)})},M=new IntersectionObserver(R,{threshold:.5});return _.current&&M.observe(_.current),()=>{M.disconnect()}}},[t]),re.useEffect(()=>{if(r){let R=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(R)}}},[r]);let C=()=>{i(!0)},N=()=>{i(!1),u(!1)};return n?t!=="intent"?[a,_,{}]:[a,_,{onFocus:Oh(p,C),onBlur:Oh(g,N),onMouseEnter:Oh(y,C),onMouseLeave:Oh(w,N),onTouchStart:Oh(S,C)}]:[!1,_,{}]}function Oh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function iL({page:t,...e}){let{router:n}=q6(),r=re.useMemo(()=>Wl(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?re.createElement(aL,{page:t,matches:r,...e}):null}function sL(t){let{manifest:e,routeModules:n}=$6(),[r,i]=re.useState([]);return re.useEffect(()=>{let a=!1;return Q7(t,e,n).then(u=>{a||i(u)}),()=>{a=!0}},[t,e,n]),r}function aL({page:t,matches:e,...n}){let r=xo(),{manifest:i,routeModules:a}=$6(),{basename:u}=q6(),{loaderData:p,matches:g}=nL(),y=re.useMemo(()=>w_(t,e,g,i,r,"data"),[t,e,g,i,r]),w=re.useMemo(()=>w_(t,e,g,i,r,"assets"),[t,e,g,i,r]),S=re.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,R=!1;if(e.forEach(L=>{let k=i.routes[L.route.id];!k||!k.hasLoader||(!y.some(j=>j.route.id===L.route.id)&&L.route.id in p&&a[L.route.id]?.shouldRevalidate||k.hasClientLoader?R=!0:N.add(L.route.id))}),N.size===0)return[];let M=Y7(t,u,"data");return R&&N.size>0&&M.searchParams.set("_routes",e.filter(L=>N.has(L.route.id)).map(L=>L.route.id).join(",")),[M.pathname+M.search]},[u,p,r,i,y,e,t,a]),_=re.useMemo(()=>Z7(w,i),[w,i]),C=sL(w);return re.createElement(re.Fragment,null,S.map(N=>re.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),_.map(N=>re.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),C.map(({key:N,link:R})=>re.createElement("link",{key:N,nonce:n.nonce,...R})))}function oL(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var lL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lL&&(window.__reactRouterVersion="7.11.0")}catch{}function cL(t,e){return L9({basename:e?.basename,getContext:e?.getContext,future:e?.future,history:XD({window:e?.window}),hydrationData:uL(),routes:t,mapRouteProperties:R7,hydrationRouteProperties:I7,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window,unstable_instrumentations:e?.unstable_instrumentations}).initialize()}function uL(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:fL(t.errors)}),t}function fL(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new jd(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let u=new a(i.message);u.stack="",n[r]=u}catch{}}if(n[r]==null){let a=new Error(i.message);a.stack="",n[r]=a}}else n[r]=i;return n}var V6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H6=re.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:u,state:p,target:g,to:y,preventScrollReset:w,viewTransition:S,unstable_defaultShouldRevalidate:_,...C},N){let{basename:R,unstable_useTransitions:M}=re.useContext(Js),L=typeof y=="string"&&V6.test(y),k=x6(y,R);y=k.to;let j=f7(y,{relative:i}),[$,U,F]=rL(r,C),B=mL(y,{replace:u,state:p,target:g,preventScrollReset:w,relative:i,viewTransition:S,unstable_defaultShouldRevalidate:_,unstable_useTransitions:M});function Z(Ne){e&&e(Ne),Ne.defaultPrevented||B(Ne)}let le=re.createElement("a",{...C,...F,href:k.absoluteURL||j,onClick:k.isExternal||a?e:Z,ref:oL(N,U),target:g,"data-discover":!L&&n==="render"?"true":void 0});return $&&!L?re.createElement(re.Fragment,null,le,re.createElement(iL,{page:j})):le});H6.displayName="Link";var hL=re.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:u,viewTransition:p,children:g,...y},w){let S=zd(u,{relative:y.relative}),_=xo(),C=re.useContext(Bd),{navigator:N,basename:R}=re.useContext(Js),M=C!=null&&wL(S)&&p===!0,L=N.encodeLocation?N.encodeLocation(S).pathname:S.pathname,k=_.pathname,j=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(k=k.toLowerCase(),j=j?j.toLowerCase():null,L=L.toLowerCase()),j&&R&&(j=Ta(j,R)||j);const $=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let U=k===L||!i&&k.startsWith(L)&&k.charAt($)==="/",F=j!=null&&(j===L||!i&&j.startsWith(L)&&j.charAt(L.length)==="/"),B={isActive:U,isPending:F,isTransitioning:M},Z=U?e:void 0,le;typeof r=="function"?le=r(B):le=[r,U?"active":null,F?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let Ne=typeof a=="function"?a(B):a;return re.createElement(H6,{...y,"aria-current":Z,className:le,ref:w,style:Ne,to:u,viewTransition:p},typeof g=="function"?g(B):g)});hL.displayName="NavLink";var dL=re.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:u=b0,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:S,unstable_defaultShouldRevalidate:_,...C},N)=>{let{unstable_useTransitions:R}=re.useContext(Js),M=vL(),L=bL(p,{relative:y}),k=u.toLowerCase()==="get"?"get":"post",j=typeof p=="string"&&V6.test(p),$=U=>{if(g&&g(U),U.defaultPrevented)return;U.preventDefault();let F=U.nativeEvent.submitter,B=F?.getAttribute("formmethod")||u,Z=()=>M(F||U.currentTarget,{fetcherKey:e,method:B,navigate:n,replace:i,state:a,relative:y,preventScrollReset:w,viewTransition:S,unstable_defaultShouldRevalidate:_});R&&n!==!1?re.startTransition(()=>Z()):Z()};return re.createElement("form",{ref:N,method:k,action:L,onSubmit:r?g:$,...C,"data-discover":!j&&t==="render"?"true":void 0})});dL.displayName="Form";function pL(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K6(t){let e=re.useContext(cu);return Rn(e,pL(t)),e}function mL(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Mi(),w=xo(),S=zd(t,{relative:a});return re.useCallback(_=>{if($7(_,e)){_.preventDefault();let C=n!==void 0?n:yo(w)===yo(S),N=()=>y(t,{replace:C,state:r,preventScrollReset:i,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:p});g?re.startTransition(()=>N()):N()}},[w,y,S,n,r,e,t,i,a,u,p,g])}function G6(t){Yr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=re.useRef(Tb(t)),n=re.useRef(!1),r=xo(),i=re.useMemo(()=>V7(r.search,n.current?null:e.current),[r.search]),a=Mi(),u=re.useCallback((p,g)=>{const y=Tb(typeof p=="function"?p(new URLSearchParams(i)):p);n.current=!0,a("?"+y,g)},[a,i]);return[i,u]}var gL=0,yL=()=>`__${String(++gL)}__`;function vL(){let{router:t}=K6("useSubmit"),{basename:e}=re.useContext(Js),n=_7(),r=t.fetch,i=t.navigate;return re.useCallback(async(a,u={})=>{let{action:p,method:g,encType:y,formData:w,body:S}=G7(a,e);if(u.navigate===!1){let _=u.fetcherKey||yL();await r(_,n,u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:w,body:S,formMethod:u.method||g,formEncType:u.encType||y,flushSync:u.flushSync})}else await i(u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:w,body:S,formMethod:u.method||g,formEncType:u.encType||y,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,i,e,n])}function bL(t,{relative:e}={}){let{basename:n}=re.useContext(Js),r=re.useContext(Ra);Rn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...zd(t||".",{relative:e})},u=xo();if(t==null){a.search=u.search;let p=new URLSearchParams(a.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(S=>S).forEach(S=>p.append("index",S));let w=p.toString();a.search=w?`?${w}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ho([n,a.pathname])),yo(a)}function wL(t,{relative:e}={}){let n=re.useContext(Jw);Rn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=K6("useViewTransitionState"),i=zd(t,{relative:e});if(!n.isTransitioning)return!1;let a=Ta(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=Ta(n.nextLocation.pathname,r)||n.nextLocation.pathname;return k0(i.pathname,u)!=null||k0(i.pathname,a)!=null}var EL=m6();function SL(t){return re.createElement(D7,{flushSync:EL.flushSync,...t})}const xL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_L=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),E_=t=>{const e=_L(t);return e.charAt(0).toUpperCase()+e.slice(1)},Y6=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),AL=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var CL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const NL=re.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:u,...p},g)=>re.createElement("svg",{ref:g,...CL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Y6("lucide",i),...!a&&!AL(p)&&{"aria-hidden":"true"},...p},[...u.map(([y,w])=>re.createElement(y,w)),...Array.isArray(a)?a:[a]]));const Qt=(t,e)=>{const n=re.forwardRef(({className:r,...i},a)=>re.createElement(NL,{ref:a,iconNode:e,className:Y6(`lucide-${xL(E_(t))}`,`lucide-${t}`,r),...i}));return n.displayName=E_(t),n};const TL=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],OL=Qt("activity",TL);const RL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gs=Qt("arrow-left",RL);const IL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],W6=Qt("arrow-right",IL);const ML=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],DL=Qt("award",ML);const LL=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Sf=Qt("book-open",LL);const kL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],X6=Qt("calendar",kL);const jL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],PL=Qt("check",jL);const BL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],j0=Qt("chevron-right",BL);const UL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xf=Qt("circle-check-big",UL);const zL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],s2=Qt("circle-question-mark",zL);const FL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],qL=Qt("circle-x",FL);const $L=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ob=Qt("clock",$L);const VL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],HL=Qt("copy",VL);const KL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],GL=Qt("database",KL);const YL=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],WL=Qt("delete",YL);const XL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Q6=Qt("download",XL);const QL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fd=Qt("file-text",QL);const ZL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],S_=Qt("file",ZL);const JL=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Rb=Qt("folder",JL);const ek=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ib=Qt("globe",ek);const tk=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],nk=Qt("graduation-cap",tk);const rk=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Mb=Qt("house",rk);const ik=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],sk=Qt("laptop",ik);const ak=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Z6=Qt("map-pin",ak);const ok=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Db=Qt("panels-top-left",ok);const lk=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],x_=Qt("play",lk);const ck=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_f=Qt("plus",ck);const uk=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],J6=Qt("qr-code",uk);const fk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_1=Qt("refresh-cw",fk);const hk=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],dk=Qt("repeat",hk);const pk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mk=Qt("save",pk);const gk=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],__=Qt("scan",gk);const yk=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],E0=Qt("school",yk);const vk=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],bk=Qt("send",vk);const wk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ek=Qt("settings",wk);const Sk=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],xk=Qt("skip-forward",Sk);const _k=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Ak=Qt("smartphone",_k);const Ck=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Nk=Qt("square-pen",Ck);const Tk=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Fc=Qt("star",Tk);const Ok=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Rk=Qt("target",Ok);const Ik=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qd=Qt("trash-2",Ik);const Mk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Dk=Qt("triangle-alert",Mk);const Lk=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Yh=Qt("trophy",Lk);const kk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jk=Qt("upload",kk);const Pk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Bk=Qt("user-plus",Pk);const Uk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],e5=Qt("user",Uk);const zk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],t5=Qt("users",zk);const Fk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qk=Qt("wifi-off",Fk);const $k=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Vk=Qt("wifi",$k);const Hk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$d=Qt("x",Hk);const Kk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],n5=Qt("zap",Kk);function r5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=r5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function A_(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=r5(t))&&(r&&(r+=" "),r+=e);return r}const Gk="modulepreload",Yk=function(t){return"/GramShiksha/"+t},C_={},A1=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let y=function(w){return Promise.all(w.map(S=>Promise.resolve(S).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var u=y;document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");i=y(n.map(w=>{if(w=Yk(w),w in C_)return;C_[w]=!0;const S=w.endsWith(".css"),_=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${_}`))return;const C=document.createElement("link");if(C.rel=S?"stylesheet":Gk,S||(C.as="script"),C.crossOrigin="",C.href=w,g&&C.setAttribute("nonce",g),document.head.appendChild(C),S)return new Promise((N,R)=>{C.addEventListener("load",N),C.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${w}`)))})}))}function a(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return i.then(p=>{for(const g of p||[])g.status==="rejected"&&a(g.reason);return e().catch(a)})};function fd(t){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fd(t)}function Wk(t,e){if(fd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Xk(t){var e=Wk(t,"string");return fd(e)=="symbol"?e:e+""}function Qk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xk(r.key),r)}}function dc(t,e,n){return e&&Qk(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zk(t){return t[t.length-1]}function hd(t){return Array.isArray(t)?t.slice(0):[t]}function Jk(t,e){t=t.slice(0);for(var n=[];t.length;){var r=t.splice(0,e);n.push(r)}return n}function P0(t){return Array.isArray(t)}function ej(t){return t!=null}function Zy(t,e){var n=0,r=-1;for(var i of t){r=r+1;var a=e(i,r);if(a)n=n+1;else break}return n}function Qc(t,e){var n=e.length;if(n!==0){var r=t.length;t.length=r+e.length;for(var i=0;i<n;++i)t[r+i]=e[i]}}function tj(t){return t.filter(function(e,n,r){return r.indexOf(e)===n})}function ac(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(r==="-")return parseInt(e,10);e+=r}throw new Error("malformatted revision: "+t)}function rl(t,e){var n=e?ac(e._rev)+1:1;return n+"-"+t}function nj(t){var e=t.split("."),n=e.length;return n===1?r=>r[t]:r=>{for(var i=r,a=0;a<n;++a){var u=e[a];if(i=i[u],typeof i>"u")return i}return i}}function Tr(t){return Object.assign({},t)}function rj(t){return Object.keys(t)[0]}function B0(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((r,i)=>typeof r=="string"&&typeof i=="string"?r.localeCompare(i):typeof r=="object"?1:-1).map(r=>B0(r,e));if(typeof t=="object"&&!Array.isArray(t)){var n={};return Object.keys(t).sort((r,i)=>r.localeCompare(i)).forEach(r=>{n[r]=B0(t[r],e)}),n}return t}function Lb(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),n=e.length;n--;)e[n]=Lb(t[n]);return e}var r={};for(var i in t)r[i]=Lb(t[i]);return r}var ys=Lb;function tl(t,e,n){return Object.defineProperty(t,e,{get:function(){return n}}),n}var a2=1;function Bf(){return{lwt:a2}}function Ga(){return""}function ij(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function sj(t,e,n){if(e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;){var a=e[r],u=n[r];if(r++,a[t]!==u[t]||a._rev!==u._rev||a._meta.lwt!==u._meta.lwt)return!1}return!0}function dd(t,e){return dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},dd(t,e)}function o2(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,dd(t,e)}function kb(t){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kb(t)}function aj(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function i5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i5=function(){return!!t})()}function oj(t,e,n){if(i5())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&dd(i,n.prototype),i}function U0(t){var e=typeof Map=="function"?new Map:void 0;return U0=function(r){if(r===null||!aj(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return oj(r,arguments,kb(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),dd(i,r)},U0(t)}var pr={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return`
        RxDB Error-Code: `+t+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function lj(t){var e="";return Object.keys(t).length===0||(e+="-".repeat(20)+`
`,e+=`Parameters:
`,e+=Object.keys(t).map(n=>{var r="[object Object]";try{n==="errors"?r=t[n].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):r=JSON.stringify(t[n],function(i,a){return a===void 0?null:a},2)}catch{}return n+": "+r}).join(`
`),e+=`
`),e}function s5(t,e,n){return`
`+t+`
`+lj(n)}var cj=(function(t){function e(r,i,a={}){var u,p=s5(i,r,a);return u=t.call(this,p)||this,u.code=r,u.message=p,u.url=l2(r),u.parameters=a,u.rxdb=!0,u}o2(e,t);var n=e.prototype;return n.toString=function(){return this.message},dc(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])})(U0(Error)),uj=(function(t){function e(r,i,a={}){var u,p=s5(i,r,a);return u=t.call(this,p)||this,u.code=r,u.message=p,u.url=l2(r),u.parameters=a,u.rxdb=!0,u}o2(e,t);var n=e.prototype;return n.toString=function(){return this.message},dc(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])})(U0(TypeError));function l2(t){return"https://rxdb.info/errors.html?console=errors#"+t}function a5(t){return`
Find out more about this error here: `+l2(t)+` 
`}function Tt(t,e){return new cj(t,pr.tunnelErrorMessage(t)+a5(t),e)}function Ea(t,e){return new uj(t,pr.tunnelErrorMessage(t)+a5(t),e)}function Af(t){return t&&t.status===409?t:!1}var fj={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function o5(t){return Tt("COL20",{name:fj[t.status],document:t.documentId,writeError:t})}var hm;function hj(){if(hm)return hm;if(typeof crypto>"u"||typeof crypto.subtle>"u"||typeof crypto.subtle.digest!="function")throw Tt("UT8",{args:{typeof_crypto:typeof crypto,typeof_crypto_subtle:typeof crypto?.subtle,typeof_crypto_subtle_digest:typeof crypto?.subtle?.digest}});return hm=crypto.subtle.digest.bind(crypto.subtle),hm}async function dj(t){var e=new TextEncoder().encode(t),n=await hj()("SHA-256",e),r=Array.prototype.map.call(new Uint8Array(n),i=>("00"+i.toString(16)).slice(-2)).join("");return r}var l5=dj;function pj(){return new Promise(t=>setTimeout(t,0))}function mj(t=0){return new Promise(e=>setTimeout(e,t))}function c5(t){return t&&typeof t.then=="function"?t:Promise.resolve(t)}var c2=Promise.resolve(!0),vo=Promise.resolve(!1),u2=Promise.resolve(null),xa=Promise.resolve();function C1(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):mj(0)}var Jy=xa;function gj(t=void 0){return Jy=Jy.then(()=>C1(t)),Jy}function yj(t){typeof requestIdleCallback=="function"&&requestIdleCallback(()=>{t()})}function vj(t,e){return t.reduce((n,r)=>n.then(r),Promise.resolve(e))}var bj=/\./g,N_="abcdefghijklmnopqrstuvwxyz";function Vd(t=10){for(var e="",n=0;n<t;n++)e+=N_.charAt(Math.floor(Math.random()*N_.length));return e}function u5(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function zh(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function pd(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!pd(t[r],e[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){var a=i[r];if(!pd(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}var jb=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},ev=new Set(["__proto__","prototype","constructor"]),wj=new Set("0123456789");function f5(t){var e=[],n="",r="start",i=!1;for(var a of t)switch(a){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=a),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=a;break}if(ev.has(n))return[];e.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=a;break}if(r==="property"){if(ev.has(n))return[];e.push(n),n=""}r="index";break}case"]":{if(r==="index"){e.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!wj.has(a))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=a}}switch(i&&(n+="\\"),r){case"property":{if(ev.has(n))return[];e.push(n);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function h5(t,e){if(typeof e!="number"&&Array.isArray(t)){var n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}function Ej(t,e){if(h5(t,e))throw new Error("Cannot use string index")}function oc(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!jb(t)||typeof e!="string")return n===void 0?t:n;var r=f5(e);if(r.length===0)return n;for(var i=0;i<r.length;i++){var a=r[i];if(h5(t,a)?t=i===r.length-1?void 0:null:t=t[a],t==null){if(i!==r.length-1)return n;break}}return t===void 0?n:t}function d5(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!jb(t)||typeof e!="string")return t;for(var r=t,i=f5(e),a=0;a<i.length;a++){var u=i[a];Ej(t,u),a===i.length-1?t[u]=n:jb(t[u])||(t[u]=typeof i[a+1]=="number"?[]:{}),t=t[u]}return r}function Cf(t,e){var n=t.get(e);if(typeof n>"u")throw new Error("missing value from map "+e);return n}function vs(t,e,n,r){var i=t.get(e);return typeof i>"u"&&(i=n(),t.set(e,i)),i}function Cr(t){var e=t.split("-"),n="RxDB";return e.forEach(r=>{n+=u5(r)}),n+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+n+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+n+`);
        `)}function Pb(t){var e={name:t.name,message:t.message,rxdb:t.rxdb,parameters:t.parameters,extensions:t.extensions,code:t.code,url:t.url,stack:t.stack?t.stack.replace(/\n/g,` 
 `):void 0};return e}var tv=0;function ea(){var t=Date.now();t=t+.01,t<=tv&&(t=tv+.01);var e=parseFloat(t.toFixed(2));return tv=e,e}function Ht(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var Hd={bufferSize:1,refCount:!0},p5="16.21.1",nv={},Sj="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93",T_=16,rv=vo,O_=!1;async function m5(){return O_||(O_=!0,rv=(async()=>!!(nv.premium&&typeof nv.premium=="string"&&await l5(nv.premium)===Sj))()),rv}var md={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postCloseRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],prePrepareRxQuery:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preCloseRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Ls(t,e){md[t].length>0&&md[t].forEach(n=>n(e))}async function Zc(t,e){for(var n of md[t])await n(e)}function Nf(t,e){var n=e;n=n.replace(bj,".properties."),n="properties."+n,n=zh(n);var r=oc(t,n);return r}function xj(t,e,n){if(typeof e.primaryKey=="string")return n;var r=pc(e,n),i=n[t];if(i&&i!==r)throw Tt("DOC19",{args:{documentData:n,existingPrimary:i,newPrimary:r},schema:e});return n[t]=r,n}function ks(t){return typeof t=="string"?t:t.key}function _j(t){var e=ks(t.primaryKey),n=Nf(t,e);return Ht(n.maxLength)}function pc(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var n=t.primaryKey;return n.fields.map(r=>{var i=oc(e,r);if(typeof i>"u")throw Tt("DOC18",{args:{field:r,documentData:e}});return i}).join(n.separator)}function Aj(t){var e=B0(t,!0);return e}function Cj(t){return["_deleted",t]}function N1(t){t=Tr(t);var e=ks(t.primaryKey);t.properties=Tr(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=Tj,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var n=g5(t);Qc(t.required,n),t.required=t.required.filter(a=>!a.includes(".")).filter((a,u,p)=>p.indexOf(a)===u),t.version=t.version||0;var r=t.indexes.map(a=>{var u=P0(a)?a.slice(0):[a];return u.includes(e)||u.push(e),u[0]!=="_deleted"&&u.unshift("_deleted"),u});r.length===0&&r.push(Cj(e)),r.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(a=>{r.push(a)});var i=new Set;return r.filter(a=>{var u=a.join(",");return i.has(u)?!1:(i.add(u),!0)}),t.indexes=r,t}var Nj=1e15,Tj={type:"object",properties:{lwt:{type:"number",minimum:a2,maximum:Nj,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function g5(t){var e=Object.keys(t.properties).filter(r=>t.properties[r].final),n=ks(t.primaryKey);return e.push(n),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(r=>e.push(r)),e}function Oj(t,e){for(var n=Object.keys(t.defaultValues),r=0;r<n.length;++r){var i=n[r];(!Object.prototype.hasOwnProperty.call(e,i)||typeof e[i]>"u")&&(e[i]=t.defaultValues[i])}return e}var y5=(function(){function t(n,r){if(this.jsonSchema=n,this.hashFunction=r,this.indexes=Rj(this.jsonSchema),this.primaryPath=ks(this.jsonSchema.primaryKey),!n.properties[this.primaryPath].maxLength)throw Tt("SC39",{schema:n});this.finalFields=g5(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(r,i){this.finalFields.forEach(a=>{if(!pd(r[a],i[a]))throw Tt("DOC9",{dataBefore:r,dataAfter:i,fieldName:a,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var r={},i=Nf(this.jsonSchema,"");return Object.keys(i).forEach(a=>{var u=a;r.__defineGetter__(a,function(){if(!(!this.get||typeof this.get!="function")){var p=this.get(u);return p}}),Object.defineProperty(r,a+"$",{get:function(){return this.get$(u)},enumerable:!1,configurable:!1}),Object.defineProperty(r,a+"$$",{get:function(){return this.get$$(u)},enumerable:!1,configurable:!1}),Object.defineProperty(r,a+"_",{get:function(){return this.populate(u)},enumerable:!1,configurable:!1})}),tl(this,"getDocumentPrototype",()=>r),r},e.getPrimaryOfDocumentData=function(r){return pc(this.jsonSchema,r)},dc(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,i])=>n[r]=i.default),tl(this,"defaultValues",n)}},{key:"hash",get:function(){return tl(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])})();function Rj(t){return(t.indexes||[]).map(e=>P0(e)?e:[e])}function Ij(t){var e=t.version?t.version:0,n=0;return new Array(e).fill(0).map(()=>n++)}function Mj(t,e,n=!0){n&&Ls("preCreateRxSchema",t);var r=N1(t);r=Aj(r),pr.deepFreezeWhenDevMode(r);var i=new y5(r,e);return Ls("createRxSchema",i),i}function Ii(t){return typeof t=="function"}function Dj(t){return Ii(t?.lift)}function _o(t){return function(e){if(Dj(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var Bb=function(t,e){return Bb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Bb(t,e)};function uu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Bb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Lj(t,e,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function p(w){try{y(r.next(w))}catch(S){u(S)}}function g(w){try{y(r.throw(w))}catch(S){u(S)}}function y(w){w.done?a(w.value):i(w.value).then(p,g)}y((r=r.apply(t,e||[])).next())})}function v5(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=p(0),u.throw=p(1),u.return=p(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(w){return g([y,w])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],i=0}finally{r=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function Tf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jc(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(p){u={error:p}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return a}function eu(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function df(t){return this instanceof df?(this.v=t,this):new df(t)}function kj(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",u),i[Symbol.asyncIterator]=function(){return this},i;function u(C){return function(N){return Promise.resolve(N).then(C,S)}}function p(C,N){r[C]&&(i[C]=function(R){return new Promise(function(M,L){a.push([C,R,M,L])>1||g(C,R)})},N&&(i[C]=N(i[C])))}function g(C,N){try{y(r[C](N))}catch(R){_(a[0][3],R)}}function y(C){C.value instanceof df?Promise.resolve(C.value.v).then(w,S):_(a[0][2],C)}function w(C){g("next",C)}function S(C){g("throw",C)}function _(C,N){C(N),a.shift(),a.length&&g(a[0][0],a[0][1])}}function jj(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Tf=="function"?Tf(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(u){return new Promise(function(p,g){u=t[a](u),i(p,g,u.done,u.value)})}}function i(a,u,p,g){Promise.resolve(g).then(function(y){a({value:y,done:p})},u)}}var b5=(function(t){return t&&typeof t.length=="number"&&typeof t!="function"});function w5(t){return Ii(t?.then)}function f2(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var iv=f2(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Ub(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var T1=(function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,a;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var p=Tf(u),g=p.next();!g.done;g=p.next()){var y=g.value;y.remove(this)}}catch(R){e={error:R}}finally{try{g&&!g.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}else u.remove(this);var w=this.initialTeardown;if(Ii(w))try{w()}catch(R){a=R instanceof iv?R.errors:[R]}var S=this._finalizers;if(S){this._finalizers=null;try{for(var _=Tf(S),C=_.next();!C.done;C=_.next()){var N=C.value;try{R_(N)}catch(R){a=a??[],R instanceof iv?a=eu(eu([],Jc(a)),Jc(R.errors)):a.push(R)}}}catch(R){r={error:R}}finally{try{C&&!C.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}}if(a)throw new iv(a)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)R_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Ub(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Ub(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=(function(){var e=new t;return e.closed=!0,e})(),t})(),E5=T1.EMPTY;function S5(t){return t instanceof T1||t&&"closed"in t&&Ii(t.remove)&&Ii(t.add)&&Ii(t.unsubscribe)}function R_(t){Ii(t)?t():t.unsubscribe()}var Pj={Promise:void 0},Bj={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,eu([t,e],Jc(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function x5(t){Bj.setTimeout(function(){throw t})}function I_(){}function S0(t){t()}var h2=(function(t){uu(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,S5(n)&&n.add(r)):r.destination=Fj,r}return e.create=function(n,r,i){return new Of(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(T1),Uj=(function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){dm(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){dm(r)}else dm(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){dm(n)}},t})(),Of=(function(t){uu(e,t);function e(n,r,i){var a=t.call(this)||this,u;return Ii(n)||!n?u={next:n??void 0,error:r??void 0,complete:i??void 0}:u=n,a.destination=new Uj(u),a}return e})(h2);function dm(t){x5(t)}function zj(t){throw t}var Fj={closed:!0,next:I_,error:zj,complete:I_},d2=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Kd(t){return t}function qj(t){return t.length===0?Kd:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Qs=(function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,a=Vj(e)?e:new Of(e,n,r);return S0(function(){var u=i,p=u.operator,g=u.source;a.add(p?p.call(a,g):g?i._subscribe(a):i._trySubscribe(a))}),a},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=M_(n),new n(function(i,a){var u=new Of({next:function(p){try{e(p)}catch(g){a(g),u.unsubscribe()}},error:a,complete:i});r.subscribe(u)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[d2]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return qj(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=M_(e),new e(function(r,i){var a;n.subscribe(function(u){return a=u},function(u){return i(u)},function(){return r(a)})})},t.create=function(e){return new t(e)},t})();function M_(t){var e;return(e=t??Pj.Promise)!==null&&e!==void 0?e:Promise}function $j(t){return t&&Ii(t.next)&&Ii(t.error)&&Ii(t.complete)}function Vj(t){return t&&t instanceof h2||$j(t)&&S5(t)}function _5(t){return Ii(t[d2])}function A5(t){return Symbol.asyncIterator&&Ii(t?.[Symbol.asyncIterator])}function C5(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Hj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var N5=Hj();function T5(t){return Ii(t?.[N5])}function O5(t){return kj(this,arguments,function(){var n,r,i,a;return v5(this,function(u){switch(u.label){case 0:n=t.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,df(n.read())];case 3:return r=u.sent(),i=r.value,a=r.done,a?[4,df(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,df(i)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function R5(t){return Ii(t?.getReader)}function fl(t){if(t instanceof Qs)return t;if(t!=null){if(_5(t))return Kj(t);if(b5(t))return Gj(t);if(w5(t))return Yj(t);if(A5(t))return I5(t);if(T5(t))return Wj(t);if(R5(t))return Xj(t)}throw C5(t)}function Kj(t){return new Qs(function(e){var n=t[d2]();if(Ii(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gj(t){return new Qs(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Yj(t){return new Qs(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,x5)})}function Wj(t){return new Qs(function(e){var n,r;try{for(var i=Tf(t),a=i.next();!a.done;a=i.next()){var u=a.value;if(e.next(u),e.closed)return}}catch(p){n={error:p}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function I5(t){return new Qs(function(e){Qj(t,e).catch(function(n){return e.error(n)})})}function Xj(t){return I5(O5(t))}function Qj(t,e){var n,r,i,a;return Lj(this,void 0,void 0,function(){var u,p;return v5(this,function(g){switch(g.label){case 0:g.trys.push([0,5,6,11]),n=jj(t),g.label=1;case 1:return[4,n.next()];case 2:if(r=g.sent(),!!r.done)return[3,4];if(u=r.value,e.next(u),e.closed)return[2];g.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return p=g.sent(),i={error:p},[3,11];case 6:return g.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:g.sent(),g.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function il(t,e,n,r,i){return new Zj(t,e,n,r,i)}var Zj=(function(t){uu(e,t);function e(n,r,i,a,u,p){var g=t.call(this,n)||this;return g.onFinalize=u,g.shouldUnsubscribe=p,g._next=r?function(y){try{r(y)}catch(w){n.error(w)}}:t.prototype._next,g._error=a?function(y){try{a(y)}catch(w){n.error(w)}finally{this.unsubscribe()}}:t.prototype._error,g._complete=i?function(){try{i()}catch(y){n.error(y)}finally{this.unsubscribe()}}:t.prototype._complete,g}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e})(h2),M5={now:function(){return(M5.delegate||Date).now()},delegate:void 0};function Jj(t){return t&&Ii(t.schedule)}function p2(t){return t[t.length-1]}function eP(t){return Ii(p2(t))?t.pop():void 0}function Gd(t){return Jj(p2(t))?t.pop():void 0}function D5(t,e){return typeof p2(t)=="number"?t.pop():e}function tc(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(a),!i)return a}var tP=Array.isArray,nP=Object.getPrototypeOf,rP=Object.prototype,iP=Object.keys;function sP(t){if(t.length===1){var e=t[0];if(tP(e))return{args:e,keys:null};if(aP(e)){var n=iP(e);return{args:n.map(function(r){return e[r]}),keys:n}}}return{args:t,keys:null}}function aP(t){return t&&typeof t=="object"&&nP(t)===rP}function L5(t,e){return e===void 0&&(e=0),_o(function(n,r){n.subscribe(il(r,function(i){return tc(r,t,function(){return r.next(i)},e)},function(){return tc(r,t,function(){return r.complete()},e)},function(i){return tc(r,t,function(){return r.error(i)},e)}))})}function k5(t,e){return e===void 0&&(e=0),_o(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function oP(t,e){return fl(t).pipe(k5(e),L5(e))}function lP(t,e){return fl(t).pipe(k5(e),L5(e))}function cP(t,e){return new Qs(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function uP(t,e){return new Qs(function(n){var r;return tc(n,e,function(){r=t[N5](),tc(n,e,function(){var i,a,u;try{i=r.next(),a=i.value,u=i.done}catch(p){n.error(p);return}u?n.complete():n.next(a)},0,!0)}),function(){return Ii(r?.return)&&r.return()}})}function j5(t,e){if(!t)throw new Error("Iterable cannot be null");return new Qs(function(n){tc(n,e,function(){var r=t[Symbol.asyncIterator]();tc(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function fP(t,e){return j5(O5(t),e)}function hP(t,e){if(t!=null){if(_5(t))return oP(t,e);if(b5(t))return cP(t,e);if(w5(t))return lP(t,e);if(A5(t))return j5(t,e);if(T5(t))return uP(t,e);if(R5(t))return fP(t,e)}throw C5(t)}function Yd(t,e){return e?hP(t,e):fl(t)}function bi(t,e){return _o(function(n,r){var i=0;n.subscribe(il(r,function(a){r.next(t.call(e,a,i++))}))})}var dP=Array.isArray;function pP(t,e){return dP(e)?t.apply(void 0,eu([],Jc(e))):t(e)}function mP(t){return bi(function(e){return pP(t,e)})}function gP(t,e){return t.reduce(function(n,r,i){return n[r]=e[i],n},{})}function P5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Gd(t),r=eP(t),i=sP(t),a=i.args,u=i.keys;if(a.length===0)return Yd([],n);var p=new Qs(yP(a,n,u?function(g){return gP(u,g)}:Kd));return r?p.pipe(mP(r)):p}function yP(t,e,n){return n===void 0&&(n=Kd),function(r){D_(e,function(){for(var i=t.length,a=new Array(i),u=i,p=i,g=function(w){D_(e,function(){var S=Yd(t[w],e),_=!1;S.subscribe(il(r,function(C){a[w]=C,_||(_=!0,p--),p||r.next(n(a.slice()))},function(){--u||r.complete()}))},r)},y=0;y<i;y++)g(y)},r)}}function D_(t,e,n){t?tc(n,t,e):e()}function vP(t,e,n,r,i,a,u,p){var g=[],y=0,w=0,S=!1,_=function(){S&&!g.length&&!y&&e.complete()},C=function(R){return y<r?N(R):g.push(R)},N=function(R){y++;var M=!1;fl(n(R,w++)).subscribe(il(e,function(L){e.next(L)},function(){M=!0},void 0,function(){if(M)try{y--;for(var L=function(){var k=g.shift();u||N(k)};g.length&&y<r;)L();_()}catch(k){e.error(k)}}))};return t.subscribe(il(e,C,function(){S=!0,_()})),function(){}}function bo(t,e,n){return n===void 0&&(n=1/0),Ii(e)?bo(function(r,i){return bi(function(a,u){return e(r,a,i,u)})(fl(t(r,i)))},n):(typeof e=="number"&&(n=e),_o(function(r,i){return vP(r,i,t,n)}))}function m2(t){return t===void 0&&(t=1/0),bo(Kd,t)}function bP(){return m2(1)}var wP=f2(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),is=(function(t){uu(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new L_(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new wP},e.prototype.next=function(n){var r=this;S0(function(){var i,a;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var u=Tf(r.currentObservers),p=u.next();!p.done;p=u.next()){var g=p.value;g.next(n)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;S0(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;S0(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,a=i.hasError,u=i.isStopped,p=i.observers;return a||u?E5:(this.currentObservers=null,p.push(n),new T1(function(){r.currentObservers=null,Ub(p,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,a=r.thrownError,u=r.isStopped;i?n.error(a):u&&n.complete()},e.prototype.asObservable=function(){var n=new Qs;return n.source=this,n},e.create=function(n,r){return new L_(n,r)},e})(Qs),L_=(function(t){uu(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:E5},e})(is);function k_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return bP()(Yd(t,Gd(t)))}var EP=new Qs(function(t){return t.complete()});function gd(t,e){return e===void 0&&(e=Kd),t=t??SP,_o(function(n,r){var i,a=!0;n.subscribe(il(r,function(u){var p=e(u);(a||!t(i,p))&&(a=!1,i=p,r.next(u))}))})}function SP(t,e){return t===e}function Nr(t,e){return _o(function(n,r){var i=0;n.subscribe(il(r,function(a){return t.call(e,a,i++)&&r.next(a)}))})}var xP=f2(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function _P(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Gd(t),r=D5(t,1/0);return _o(function(i,a){m2(r)(Yd(eu([i],Jc(t)),n)).subscribe(a)})}function AP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _P.apply(void 0,eu([],Jc(t)))}var co=(function(t){uu(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,a=n._value;if(r)throw i;return this._throwIfClosed(),a},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e})(is),CP=(function(t){uu(e,t);function e(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=M5);var a=t.call(this)||this;return a._bufferSize=n,a._windowTime=r,a._timestampProvider=i,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=r===1/0,a._bufferSize=Math.max(1,n),a._windowTime=Math.max(1,r),a}return e.prototype.next=function(n){var r=this,i=r.isStopped,a=r._buffer,u=r._infiniteTimeWindow,p=r._timestampProvider,g=r._windowTime;i||(a.push(n),!u&&a.push(p.now()+g)),this._trimBuffer(),t.prototype.next.call(this,n)},e.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,a=i._infiniteTimeWindow,u=i._buffer,p=u.slice(),g=0;g<p.length&&!n.closed;g+=a?1:2)n.next(p[g]);return this._checkFinalizedStatuses(n),r},e.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,a=n._buffer,u=n._infiniteTimeWindow,p=(u?1:2)*r;if(r<1/0&&p<a.length&&a.splice(0,a.length-p),!u){for(var g=i.now(),y=0,w=1;w<a.length&&a[w]<=g;w+=2)y=w;y&&a.splice(0,y+1)}},e})(is);function NP(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new is}:e,r=t.resetOnError,i=r===void 0?!0:r,a=t.resetOnComplete,u=a===void 0?!0:a,p=t.resetOnRefCountZero,g=p===void 0?!0:p;return function(y){var w,S,_,C=0,N=!1,R=!1,M=function(){S?.unsubscribe(),S=void 0},L=function(){M(),w=_=void 0,N=R=!1},k=function(){var j=w;L(),j?.unsubscribe()};return _o(function(j,$){C++,!R&&!N&&M();var U=_=_??n();$.add(function(){C--,C===0&&!R&&!N&&(S=sv(k,g))}),U.subscribe($),!w&&C>0&&(w=new Of({next:function(F){return U.next(F)},error:function(F){R=!0,M(),S=sv(L,i,F),U.error(F)},complete:function(){N=!0,M(),S=sv(L,u),U.complete()}}),fl(j).subscribe(w))})(y)}}function sv(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var i=new Of({next:function(){i.unsubscribe(),t()}});return fl(e.apply(void 0,eu([],Jc(n)))).subscribe(i)}}function Wd(t,e,n){var r,i,a,u,p=!1;return t&&typeof t=="object"?(r=t.bufferSize,u=r===void 0?1/0:r,i=t.windowTime,e=i===void 0?1/0:i,a=t.refCount,p=a===void 0?!1:a,n=t.scheduler):u=t??1/0,NP({connector:function(){return new CP(u,e,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:p})}function Xd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Gd(t);return _o(function(r,i){(n?k_(t,r,n):k_(t,r)).subscribe(i)})}function TP(t,e){return _o(function(n,r){var i=null,a=0,u=!1,p=function(){return u&&!i&&r.complete()};n.subscribe(il(r,function(g){i?.unsubscribe();var y=0,w=a++;fl(t(g,w)).subscribe(i=il(r,function(S){return r.next(e?e(g,S,w,y++):S)},function(){i=null,p()}))},function(){u=!0,p()}))})}function B5(t){return t.documentData?t.documentData:t.previousDocumentData}function OP(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:pr.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}var RP=new Map;function U5(t){return vs(RP,t,()=>{for(var e=new Array(t.events.length),n=t.events,r=t.collectionName,i=t.isLocal,a=pr.deepFreezeWhenDevMode,u=0;u<n.length;u++){var p=n[u];e[u]={documentId:p.documentId,collectionName:r,isLocal:i,operation:p.operation,documentData:a(p.documentData),previousDocumentData:a(p.previousDocumentData)}}return e})}function Hc(t,e){return new Promise(function(n,r){var i=new Of({next:function(a){n(a),i.unsubscribe()},error:r,complete:function(){r(new xP)}});t.subscribe(i)})}function IP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Gd(t),r=D5(t,1/0),i=t;return i.length?i.length===1?fl(i[0]):m2(r)(Yd(i,n)):EP}var pf="",mf=Number.MIN_SAFE_INTEGER;function MP(t,e){var n=e.selector,r=t.indexes?t.indexes.slice(0):[];e.index&&(r=[e.index]);var i=!!e.sort.find(w=>Object.values(w)[0]==="desc"),a=new Set;Object.keys(n).forEach(w=>{var S=Nf(t,w);S&&S.type==="boolean"&&Object.prototype.hasOwnProperty.call(n[w],"$eq")&&a.add(w)});var u=e.sort.map(w=>Object.keys(w)[0]),p=u.filter(w=>!a.has(w)).join(","),g=-1,y;if(r.forEach(w=>{var S=!0,_=!0,C=w.map(k=>{var j=n[k],$=j?Object.keys(j):[],U={};if(!j||!$.length){var F=_?mf:pf;U={startKey:F,endKey:S?pf:mf,inclusiveStart:!0,inclusiveEnd:!0}}else $.forEach(B=>{if(g2.has(B)){var Z=j[B],le=jP(B,Z);U=Object.assign(U,le)}});return typeof U.startKey>"u"&&(U.startKey=mf),typeof U.endKey>"u"&&(U.endKey=pf),typeof U.inclusiveStart>"u"&&(U.inclusiveStart=!0),typeof U.inclusiveEnd>"u"&&(U.inclusiveEnd=!0),_&&!U.inclusiveStart&&(_=!1),S&&!U.inclusiveEnd&&(S=!1),U}),N=C.map(k=>k.startKey),R=C.map(k=>k.endKey),M={index:w,startKeys:N,endKeys:R,inclusiveEnd:S,inclusiveStart:_,sortSatisfiedByIndex:!i&&p===w.filter(k=>!a.has(k)).join(","),selectorSatisfiedByIndex:kP(w,e.selector,N,R)},L=PP(t,e,M);(L>=g||e.index)&&(g=L,y=M)}),!y)throw Tt("SNH",{query:e});return y}var g2=new Set(["$eq","$gt","$gte","$lt","$lte"]),DP=new Set(["$eq","$gt","$gte"]),LP=new Set(["$eq","$lt","$lte"]);function kP(t,e,n,r){var i=Object.entries(e),a=i.find(([B,Z])=>{if(!t.includes(B))return!0;var le=Object.entries(Z).find(([Ne,G])=>!g2.has(Ne));return le});if(a||e.$and||e.$or)return!1;var u=[],p=new Set;for(var[g,y]of Object.entries(e)){if(!t.includes(g))return!1;var w=Object.keys(y).filter(B=>DP.has(B));if(w.length>1)return!1;var S=w[0];if(S&&p.add(g),S!=="$eq"){if(u.length>0)return!1;u.push(S)}}var _=[],C=new Set;for(var[N,R]of Object.entries(e)){if(!t.includes(N))return!1;var M=Object.keys(R).filter(B=>LP.has(B));if(M.length>1)return!1;var L=M[0];if(L&&C.add(N),L!=="$eq"){if(_.length>0)return!1;_.push(L)}}var k=0;for(var j of t){for(var $ of[p,C]){if(!$.has(j)&&$.size>0)return!1;$.delete(j)}var U=n[k],F=r[k];if(U!==F&&p.size>0&&C.size>0)return!1;k++}return!0}function jP(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function PP(t,e,n){var r=0,i=w=>{w>0&&(r=r+w)},a=10,u=Zy(n.startKeys,w=>w!==mf&&w!==pf);i(u*a);var p=Zy(n.startKeys,w=>w!==pf&&w!==mf);i(p*a);var g=Zy(n.startKeys,(w,S)=>w===n.endKeys[S]);i(g*a*1.5);var y=n.sortSatisfiedByIndex?5:0;return i(y),r}class O1 extends Error{}const yd=Symbol("missing"),z5=Object.freeze(new Error("mingo: cycle detected while processing object/array")),R1=t=>{const e=x0(t);let n=0,r=e.length;for(;r;)n=(n<<5)-n^e.charCodeAt(--r);return n>>>0},Jl=t=>typeof t!="object"&&typeof t!="function"||t===null,F5=t=>Jl(t)||bd(t)||Kc(t),q5={undefined:1,null:2,number:3,string:4,symbol:5,object:6,array:7,arraybuffer:8,boolean:9,date:10,regexp:11,function:12},lc=(t,e)=>{t===yd&&(t=void 0),e===yd&&(e=void 0);const[n,r]=[t,e].map(i=>q5[vd(i)]||0);return n!==r?n-r:nc(t,e)?0:t<e?-1:t>e?1:0};class z0 extends Map{#e=R1;#n=new Map;#t=e=>{const n=this.#e(e);return[(this.#n.get(n)||[]).find(r=>nc(r,e)),n]};constructor(){super()}static init(e){const n=new z0;return e&&(n.#e=e),n}clear(){super.clear(),this.#n.clear()}delete(e){if(Jl(e))return super.delete(e);const[n,r]=this.#t(e);return super.delete(n)?(this.#n.set(r,this.#n.get(r).filter(i=>!nc(i,n))),!0):!1}get(e){if(Jl(e))return super.get(e);const[n,r]=this.#t(e);return super.get(n)}has(e){if(Jl(e))return super.has(e);const[n,r]=this.#t(e);return super.has(n)}set(e,n){if(Jl(e))return super.set(e,n);const[r,i]=this.#t(e);if(super.has(r))super.set(r,n);else{super.set(e,n);const a=this.#n.get(i)||[];a.push(e),this.#n.set(i,a)}return this}get size(){return super.size}}function Bi(t,e){if(!t)throw new O1(e)}const BP=Object.keys(q5).reduce((t,e)=>(t["[object "+e[0].toUpperCase()+e.substring(1)+"]"]=e,t),{});function vd(t){const e=Object.prototype.toString.call(t);return e==="[object Object]"?t?.constructor?.name?.toLowerCase()||"object":BP[e]||e.substring(8,e.length-1).toLowerCase()}const gf=t=>typeof t=="boolean",Ya=t=>typeof t=="string",UP=t=>typeof t=="symbol",Ks=t=>!isNaN(t)&&typeof t=="number",mr=Array.isArray;function bs(t){if(!t)return!1;const e=Object.getPrototypeOf(t);return(e===Object.prototype||e===null)&&vd(t)==="object"}const $5=t=>!Jl(t),bd=t=>t instanceof Date,Kc=t=>t instanceof RegExp,y2=t=>typeof t=="function",Zs=t=>t==null,zP=(t,e=!0)=>!!t||e&&t==="",v2=t=>Zs(t)||Ya(t)&&!t||mr(t)&&t.length===0||bs(t)&&Object.keys(t).length===0,Qd=t=>mr(t)?t:[t],Rf=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),FP=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),wd=(t,e)=>{if(Zs(t)||gf(t)||Ks(t)||Ya(t))return t;if(bd(t))return new Date(t);if(Kc(t))return new RegExp(t);if(FP(t)){const n=t.constructor;return new n(t)}if(e instanceof Set||(e=new Set),e.has(t))throw z5;e.add(t);try{if(mr(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=wd(t[r],e);return n}if(bs(t)){const n={};for(const r of Object.keys(t))n[r]=wd(t[r],e);return n}}finally{e.delete(t)}return t},j_=t=>t===yd;function zb(t,e){if(j_(t)||Zs(t))return e;if(j_(e)||Zs(e))return t;if(Jl(t)||Jl(e))return e;mr(t)&&mr(e)&&Bi(t.length===e.length,"arrays must be of equal length to merge.");for(const n of Object.keys(e))t[n]=zb(t[n],e[n]);return t}function qP(t,e=R1){const n=[z0.init(e),z0.init(e)];if(t.length===0)return[];if(t.some(r=>r.length===0))return[];if(t.length===1)return[...t];t[t.length-1].forEach(r=>n[0].set(r,!0));for(let r=t.length-2;r>-1;r--){if(t[r].forEach(i=>{n[0].has(i)&&n[1].set(i,!0)}),n[1].size===0)return[];n.reverse(),n[1].clear()}return Array.from(n[0].keys())}function V5(t,e=1){const n=new Array;function r(i,a){for(let u=0,p=i.length;u<p;u++)mr(i[u])&&(a>0||a<0)?r(i[u],Math.max(-1,a-1)):n.push(i[u])}return r(t,e),n}function $P(t){const e={};for(;t;){for(const n of Object.getOwnPropertyNames(t))n in e||(e[n]=t[n]);t=Object.getPrototypeOf(t)}return e}function H5(t){for(;t;){if(Object.getOwnPropertyNames(t).includes("toString"))return t.toString!==Object.prototype.toString;t=Object.getPrototypeOf(t)}return!1}function nc(t,e){if(t===e||Object.is(t,e))return!0;if(t===null||e===null||typeof t!=typeof e||typeof t!="object"||t.constructor!==e.constructor)return!1;if(t instanceof Date)return+t==+e;if(t instanceof RegExp)return t.toString()===e.toString();const n=t.constructor;if(n===Array||n===Object){const r=Object.keys(t).sort(),i=Object.keys(e).sort();if(r.length!==i.length)return!1;for(let a=0,u=r[a];a<r.length;u=r[++a])if(u!==i[a]||!nc(t[u],e[u]))return!1;return!0}return H5(t)&&t.toString()===e.toString()}const x0=(t,e)=>{if(t===null)return"null";if(t===void 0)return"undefined";if(Ya(t)||Ks(t)||gf(t))return JSON.stringify(t);if(bd(t))return t.toISOString();if(Kc(t)||UP(t)||y2(t))return t.toString();if(e instanceof Set||(e=new Set),e.has(t))throw z5;try{if(e.add(t),mr(t))return"["+t.map(r=>x0(r,e)).join(",")+"]";if(bs(t))return"{"+Object.keys(t).sort().map(i=>`${i}:${x0(t[i],e)}`).join()+"}";const n=H5(t)?t.toString():x0($P(t),e);return vd(t)+"("+n+")"}finally{e.delete(t)}};function VP(t,e){return Zs(t)?null:(e=e||R1,e(t))}function HP(t,e,n=R1){if(t.length<1)return new Map;const r=new Map,i=new Map;for(let a=0;a<t.length;a++){const u=t[a],p=e(u,a),g=VP(p,n);if(g===null)i.has(null)?i.get(null).push(u):i.set(null,[u]);else{const y=r.has(g)?r.get(g).find(w=>nc(w,p)):null;Zs(y)?(i.set(p,[u]),r.has(g)?r.get(g).push(p):r.set(g,[p])):i.get(y).push(u)}}return i}function Fb(t,e){return $5(t)?t[e]:void 0}function KP(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function tu(t,e,n){let r=0;function i(u,p){let g=u;for(let y=0;y<p.length;y++){const w=p[y];if(/^\d+$/.exec(w)===null&&mr(g)){if(y===0&&r>0)break;r+=1;const _=p.slice(y);g=g.reduce((C,N)=>{const R=i(N,_);return R!==void 0&&C.push(R),C},[]);break}else g=Fb(g,w);if(g===void 0)break}return g}const a=F5(t)?t:i(t,e.split("."));return mr(a)&&n?.unwrapArray?KP(a,r):a}function Wh(t,e,n){const r=e.indexOf("."),i=r==-1?e:e.substring(0,r),a=e.substring(r+1),u=r!=-1;if(mr(t)){const y=/^\d+$/.test(i),w=y&&n?.preserveIndex?[...t]:[];if(y){const S=parseInt(i);let _=Fb(t,S);u&&(_=Wh(_,a,n)),n?.preserveIndex?w[S]=_:w.push(_)}else for(const S of t){const _=Wh(S,e,n);n?.preserveMissing?w.push(_??yd):(_!=null||n?.preserveIndex)&&w.push(_)}return w}const p=n?.preserveKeys?{...t}:{};let g=Fb(t,i);if(u&&(g=Wh(g,a,n)),g!==void 0)return p[i]=g,p}function qb(t){if(mr(t))for(let e=t.length-1;e>=0;e--)t[e]===yd?t.splice(e,1):qb(t[e]);else if(bs(t))for(const e in t)Rf(t,e)&&qb(t[e])}const P_=/^\d+$/;function F0(t,e,n,r){const i=e.split("."),a=i[0],u=i.slice(1).join(".");if(i.length===1)(bs(t)||mr(t)&&P_.test(a))&&n(t,a);else{r?.buildGraph&&Zs(t[a])&&(t[a]={});const p=t[a];if(!p)return;const g=!!(i.length>1&&P_.test(i[1]));mr(p)&&r?.descendArray&&!g?p.forEach(y=>F0(y,u,n,r)):F0(p,u,n,r)}}function GP(t,e,n){F0(t,e,(r,i)=>{r[i]=y2(n)?n(r[i]):n},{buildGraph:!0})}function B_(t,e,n){F0(t,e,(r,i)=>{if(mr(r)){if(/^\d+$/.test(i))r.splice(parseInt(i),1);else if(n&&n.descendArray)for(const a of r)bs(a)&&delete a[i]}else bs(r)&&delete r[i]},n)}const YP=/^\$[a-zA-Z0-9_]+$/;function fu(t){return YP.test(t)}function K5(t){if(F5(t))return Kc(t)?{$regex:t}:{$eq:t};if($5(t)){if(!Object.keys(t).some(fu))return{$eq:t};if(Rf(t,"$regex")){const e={...t};return e.$regex=new RegExp(t.$regex,t.$options),delete e.$options,e}}return t}var $b=(t=>(t[t.CLONE_OFF=0]="CLONE_OFF",t[t.CLONE_INPUT=1]="CLONE_INPUT",t[t.CLONE_OUTPUT=2]="CLONE_OUTPUT",t[t.CLONE_ALL=3]="CLONE_ALL",t))($b||{});class Gc{#e;#n;#t;constructor(e,n,r){this.#e=e,this.update(n,r)}static init(e,n,r){return e instanceof Gc?new Gc(e.#e,e.root??n,{...e.#t,...r,variables:Object.assign({},e.#t?.variables,r?.variables)}):new Gc(e,n,r)}update(e,n){this.#n=e;const r=Object.assign({},this.#t?.variables,n?.variables);return Object.keys(r).length?this.#t={...n,variables:r}:this.#t=n??{},this}getOptions(){return Object.freeze({...this.#e,context:nu.from(this.#e.context)})}get root(){return this.#n}get local(){return this.#t}get idKey(){return this.#e.idKey}get collation(){return this.#e?.collation}get processingMode(){return this.#e?.processingMode||0}get useStrictMode(){return this.#e?.useStrictMode}get scriptEnabled(){return this.#e?.scriptEnabled}get useGlobalContext(){return this.#e?.useGlobalContext}get hashFunction(){return this.#e?.hashFunction}get collectionResolver(){return this.#e?.collectionResolver}get jsonSchemaValidator(){return this.#e?.jsonSchemaValidator}get variables(){return this.#e?.variables}get context(){return this.#e?.context}}function WP(t){return t instanceof Gc?t.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:0,...t,context:t?.context?nu.from(t?.context):nu.init()})}class nu{#e=new Map;constructor(){}static init(){return new nu}static from(e){const n=nu.init();return Zs(e)||e.#e.forEach((r,i)=>n.addOperators(i,r)),n}addOperators(e,n){this.#e.has(e)||this.#e.set(e,{});for(const[r,i]of Object.entries(n))this.getOperator(e,r)||(this.#e.get(e)[r]=i);return this}getOperator(e,n){return(this.#e.get(e)??{})[n]??null}addAccumulatorOps(e){return this.addOperators("accumulator",e)}addExpressionOps(e){return this.addOperators("expression",e)}addQueryOps(e){return this.addOperators("query",e)}addPipelineOps(e){return this.addOperators("pipeline",e)}addProjectionOps(e){return this.addOperators("projection",e)}addWindowOps(e){return this.addOperators("window",e)}}const Bc=nu.init();function U_(t,e){for(const[n,r]of Object.entries(e)){Bi(y2(r)&&fu(n),`'${n}' is not a valid operator`);const i=Ed(t,n,null);Bi(!i||r===i,`${n} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":Bc.addAccumulatorOps(e);break;case"expression":Bc.addExpressionOps(e);break;case"pipeline":Bc.addPipelineOps(e);break;case"projection":Bc.addProjectionOps(e);break;case"query":Bc.addQueryOps(e);break;case"window":Bc.addWindowOps(e);break}}function Ed(t,e,n){const{context:r,useGlobalContext:i}=n||{},a=r?r.getOperator(t,e):null;return!a&&i?Bc.getOperator(t,e):a}function Xu(t,e,n,r){const i=Gc.init(r,t);return n&&fu(n)?G5(t,e,n,i):q0(t,e,i)}const XP=["$$ROOT","$$CURRENT","$$REMOVE","$$NOW"];function q0(t,e,n){if(Ya(e)&&e.length>0&&e[0]==="$"){if(QP.includes(e))return e;let r=n.root;const i=e.split(".");if(XP.includes(i[0])){switch(i[0]){case"$$ROOT":break;case"$$CURRENT":r=t;break;case"$$REMOVE":r=void 0;break;case"$$NOW":r=new Date;break}e=e.slice(i[0].length+1)}else if(i[0].slice(0,2)==="$$"){r=Object.assign({},n.variables,{this:t},n?.local?.variables);const a=i[0].slice(2);Bi(Rf(r,a),`Use of undefined variable: ${a}`),e=e.slice(2)}else e=e.slice(1);return e===""?r:tu(r,e)}if(mr(e))return e.map(r=>q0(t,r,n));if(bs(e)){const r={},i=Object.entries(e);for(const[a,u]of i){if(fu(a))return Bi(i.length==1,"expression must have single operator."),G5(t,u,a,n);r[a]=q0(t,u,n)}return r}return e}function G5(t,e,n,r){const i=Ed("expression",n,r);if(i)return i(t,e,r);const a=Ed("accumulator",n,r);return Bi(!!a,`accumulator '${n}' is not registered.`),mr(t)||(t=q0(t,e,r),e=null),Bi(mr(t),`arguments must resolve to array for ${n}.`),a(t,e,r)}const QP=["$$KEEP","$$PRUNE","$$DESCEND"];function Sd(t){return t instanceof z_?t:new z_(t)}function ZP(...t){let e=0;return Sd(()=>{for(;e<t.length;){const n=t[e].next();if(!n.done)return n;e++}return{done:!0}})}function JP(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function eB(t,e){const n=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,n)}const Vb=new Error;function tB(t,e,n){let r=!1,i=-1,a=0;return function(u){try{e:for(;!r;){let p=t();i++;let g=-1;const y=e.length;let w=!1;for(;++g<y;){const S=e[g];switch(S.action){case 0:p=S.func(p,i);break;case 1:if(!S.func(p,i))continue e;break;case 2:--S.count,S.count||(w=!0);break;case 3:--S.count,S.count||eB(e,g);continue e;default:break e}}if(r=w,u)n[a++]=p;else return{value:p,done:!1}}}catch(p){if(p!==Vb)throw p}return r=!0,{done:r}}}let z_=class{constructor(e){this.#e=[],this.#n=[],this.isDone=!1;let n;if(e instanceof Function&&(e={next:e}),JP(e)){const r=e;n=()=>{const i=r.next();if(i.done)throw Vb;return i.value}}else if(mr(e)){const r=e,i=r.length;let a=0;n=()=>{if(a<i)return r[a++];throw Vb}}else if(!(e instanceof Function))throw new O1("Lazy must be initialized with an array, generator, or function.");this.#t=tB(n,this.#e,this.#n)}#e;#n;#t;push(e,n){return typeof n=="function"?this.#e.push({action:e,func:n}):typeof n=="number"&&this.#e.push({action:e,count:n}),this}next(){return this.#t()}map(e){return this.push(0,e)}filter(e){return this.push(1,e)}take(e){return e>0?this.push(2,e):this}drop(e){return e>0?this.push(3,e):this}transform(e){const n=this;let r;return Sd(()=>(r||(r=Sd(e(n.value()))),r.next()))}value(){return this.isDone||(this.isDone=this.#t(!0).done),this.#n}each(e){for(;;){const n=this.next();if(n.done)break;if(e(n.value)===!1)return!1}return!0}reduce(e,n){let r=this.next();for(n===void 0&&!r.done&&(n=r.value,r=this.next());!r.done;)n=e(n,r.value),r=this.next();return n}size(){return this.reduce((e,n)=>++e,0)}[Symbol.iterator](){return this}};const nB=(t,e,n)=>t.take(e),Y5=(t,e,n)=>v2(e)?t:(X5(e,n),t.map(W5(e,Gc.init(n))));function W5(t,e,n=!0){const r=e.idKey,i=Object.keys(t),a=new Array,u=new Array,p={};for(const C of i){const N=t[C];if(Ks(N)||gf(N))N?u.push(C):a.push(C);else if(mr(N))p[C]=R=>N.map(M=>Xu(R,M,null,e.update(R))??null);else if(bs(N)){const R=Object.keys(N),M=R.length==1?R[0]:"",L=Ed("projection",M,e);L?M==="$slice"&&!Qd(N[M]).every(Ks)?p[C]=j=>Xu(j,N,C,e.update(j)):p[C]=j=>L(j,N[M],C,e.update(j)):fu(M)?p[C]=k=>Xu(k,N[M],M,e):(X5(N,e),p[C]=k=>{if(!Rf(k,C))return Xu(k,N,null,e);n&&e.update(k);const j=tu(k,C),$=W5(N,e,!1);return mr(j)?j.map($):bs(j)?$(j):$(k)})}else p[C]=Ya(N)&&N[0]==="$"?R=>Xu(R,N,C,e):R=>N}const g=Object.keys(p),y=a.includes(r);if(n&&y&&a.length===1&&!u.length&&!g.length)return C=>{const N={...C};return delete N[r],N};const S=n&&!y&&!u.includes(r),_={preserveMissing:!0};return C=>{const N={};if(a.length&&!u.length){zb(N,C);for(const R of a)B_(N,R,{descendArray:!0})}for(const R of u){const M=Wh(C,R,_)??{};zb(N,M)}u.length&&qb(N);for(const R of g){const M=p[R](C);M===void 0?B_(N,R,{descendArray:!0}):GP(N,R,M)}return S&&Rf(C,r)&&(N[r]=tu(C,r)),N}}function X5(t,e){let n=!1,r=!1;for(const[i,a]of Object.entries(t))Bi(!i.startsWith("$"),"Field names may not start with '$'."),Bi(!i.endsWith(".$"),"Positional projection operator '$' is not supported."),i!==e?.idKey&&(a===0||a===!1?n=!0:(a===1||a===!0)&&(r=!0),Bi(!(n&&r),"Projection cannot have a mix of inclusion and exclusion."))}const rB=(t,e,n)=>t.drop(e),Q5=(t,e,n)=>{if(v2(e)||!bs(e))return t;let r=lc;const i=n.collation;return bs(i)&&Ya(i.locale)&&(r=sB(i)),t.transform(a=>{const u=Object.keys(e);for(const p of u.reverse()){const g=HP(a,S=>tu(S,p),n.hashFunction),y=Array.from(g.keys()).sort(r);e[p]===-1&&y.reverse();let w=0;for(const S of y)for(const _ of g.get(S))a[w++]=_;Bi(w==a.length,"bug: counter must match collection size.")}return a})},iB={1:"base",2:"accent",3:"variant"};function sB(t){const e={sensitivity:iB[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));const n=new Intl.Collator(t.locale,e);return(r,i)=>{if(!Ya(r)||!Ya(i))return lc(r,i);const a=n.compare(r,i);return a<0?-1:a>0?1:0}}const aB={$sort:Q5,$skip:rB,$limit:nB};let oB=class{#e;#n;#t;#i;#a={};#r=null;#s=[];constructor(e,n,r,i){this.#e=e,this.#n=n,this.#t=r,this.#i=i}fetch(){if(this.#r)return this.#r;this.#r=Sd(this.#e).filter(this.#n);const e=this.#i.processingMode;e&$b.CLONE_INPUT&&this.#r.map(wd);for(const n of["$sort","$skip","$limit"])Rf(this.#a,n)&&(this.#r=aB[n](this.#r,this.#a[n],this.#i));return Object.keys(this.#t).length&&(this.#r=Y5(this.#r,this.#t,this.#i)),e&$b.CLONE_OUTPUT&&this.#r.map(wd),this.#r}fetchAll(){const e=Sd([...this.#s]);return this.#s=[],ZP(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.#a.$skip=e,this}limit(e){return this.#a.$limit=e,this}sort(e){return this.#a.$sort=e,this}collation(e){return this.#i={...this.#i,collation:e},this}next(){if(this.#s.length>0)return this.#s.pop();const e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.#s.length>0)return!0;const e=this.fetch().next();return e.done?!1:(this.#s.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}};const lB=new Set(Array.from(["$and","$or","$nor","$expr","$jsonSchema"]));class Zd{#e;#n;#t;constructor(e,n){this.#t=wd(e),this.#n=WP(n),this.#e=[],this.compile()}compile(){Bi(bs(this.#t),`query criteria must be an object: ${JSON.stringify(this.#t)}`);const e={};for(const[n,r]of Object.entries(this.#t)){if(n==="$where")Bi(this.#n.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true."),Object.assign(e,{field:n,expr:r});else if(lB.has(n))this.processOperator(n,n,r);else{Bi(!fu(n),`unknown top level operator: ${n}`);for(const[i,a]of Object.entries(K5(r)))this.processOperator(n,i,a)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,n,r){const i=Ed("query",n,this.#n);Bi(!!i,`unknown query operator ${n}`),this.#e.push(i(e,r,this.#n))}test(e){return this.#e.every(n=>n(e))}find(e,n){return new oB(e,r=>this.test(r),n||{},this.#n)}remove(e){return e.reduce((n,r)=>(this.test(r)||n.push(r),n),[])}}const cB=["monday","mon","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun"];new Set(cB);function ta(t){return(n,r,i)=>{const a={unwrapArray:!0},u=Math.max(1,n.split(".").length-1);return p=>{const g=tu(p,n,a);return t(g,r,{...i,depth:u})}}}function Z5(t,e,n){return nc(t,e)||Zs(t)&&Zs(e)?!0:mr(t)?t.some(r=>nc(r,e))||V5(t,n?.depth).some(r=>nc(r,e)):!1}function uB(t,e,n){return!Z5(t,e,n)}function J5(t,e,n){return Zs(t)?e.some(r=>r===null):qP([Qd(t),e],n?.hashFunction).length>0}function fB(t,e,n){return!J5(t,e,n)}function hB(t,e,n){return I1(t,e,(r,i)=>lc(r,i)<0)}function dB(t,e,n){return I1(t,e,(r,i)=>lc(r,i)<=0)}function pB(t,e,n){return I1(t,e,(r,i)=>lc(r,i)>0)}function mB(t,e,n){return I1(t,e,(r,i)=>lc(r,i)>=0)}function gB(t,e,n){return Qd(t).some(r=>e.length===2&&r%e[0]===e[1])}function yB(t,e,n){const r=Qd(t),i=a=>Ya(a)&&zP(e.exec(a),n?.useStrictMode);return r.some(i)||V5(r,1).some(i)}function vB(t,e,n){return Array.isArray(t)&&t.length===e}function bB(t){return fu(t)&&["$and","$or","$nor"].indexOf(t)===-1}function wB(t,e,n){if(mr(t)&&!v2(t)){let r=u=>u,i=e;Object.keys(e).every(bB)&&(i={temp:e},r=u=>({temp:u}));const a=new Zd(i,n);for(let u=0,p=t.length;u<p;u++)if(a.test(r(t[u])))return!0}return!1}const F_=t=>t===null,EB={array:mr,boolean:gf,bool:gf,date:bd,number:Ks,int:Ks,long:Ks,double:Ks,decimal:Ks,null:F_,object:bs,regexp:Kc,regex:Kc,string:Ya,undefined:Zs,function:t=>{throw new O1("unsupported type key `function`.")},1:Ks,2:Ya,3:bs,4:mr,6:Zs,8:gf,9:bd,10:F_,11:Kc,16:Ks,18:Ks,19:Ks};function q_(t,e,n){const r=EB[e];return r?r(t):!1}function SB(t,e,n){return mr(e)?e.findIndex(r=>q_(t,r))>=0:q_(t,e)}function I1(t,e,n){return Qd(t).some(r=>vd(r)===vd(e)&&n(r,e))}const $_=(t,e)=>{const n={};return t.split("").forEach((r,i)=>n[r]=e*(i+1)),n};({...$_("ABCDEFGHIKLM",1),...$_("NOPQRSTUVWXY",-1)});const V_={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function na(t,e=V_){const n=Object.assign({},V_,e),r=new Set(Object.keys(n));return(i,a,u)=>{const p=Xu(i,a,null,u);if(r.has(`${p}`)){const g=n[`${p}`];if(g instanceof Error)throw new O1(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return g}return t(p)}}na(Math.acos,{Infinity:1/0,0:new Error});na(Math.acosh,{Infinity:1/0,0:new Error});na(Math.asin);na(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});na(Math.atan);na(Math.atanh,{1:1/0,"-1":-1/0});na(Math.cos);na(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const xB=Math.PI/180;na(t=>t*xB,{Infinity:1/0,"-Infinity":1/0});const _B=180/Math.PI;na(t=>t*_B,{Infinity:1/0,"-Infinity":-1/0});na(Math.sin);na(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});na(Math.tan);const AB=(t,e,n)=>{Bi(mr(e),"Invalid expression: $and expects value to be an Array.");const r=e.map(i=>new Zd(i,n));return i=>r.every(a=>a.test(i))},e8=(t,e,n)=>{Bi(mr(e),"Invalid expression. $or expects value to be an Array");const r=e.map(i=>new Zd(i,n));return i=>r.some(a=>a.test(i))},CB=(t,e,n)=>{Bi(mr(e),"Invalid expression. $nor expects value to be an array.");const r=e8("$or",e,n);return i=>!r(i)},NB=(t,e,n)=>{const r={};r[t]=K5(e);const i=new Zd(r,n);return a=>!i.test(a)},TB=ta(Z5),OB=ta(pB),RB=ta(mB),IB=ta(J5),MB=ta(hB),DB=ta(dB),LB=ta(uB),kB=ta(fB),jB=ta(gB),PB=ta(yB),BB=ta(wB),UB=ta(vB),zB=(t,e,n)=>{const r=t.includes("."),i=!!e;return!r||t.match(/\.\d+$/)?a=>tu(a,t)!==void 0===i:a=>{const u=Wh(a,t,{preserveIndex:!0}),p=tu(u,t.substring(0,t.lastIndexOf(".")));return mr(p)?p.some(g=>g!==void 0)===i:p!==void 0===i}},FB=ta(SB);var H_=!1;function qB(t){return H_||(U_("pipeline",{$sort:Q5,$project:Y5}),U_("query",{$and:AB,$eq:TB,$elemMatch:BB,$exists:zB,$gt:OB,$gte:RB,$in:IB,$lt:MB,$lte:DB,$ne:LB,$nin:kB,$mod:jB,$nor:CB,$not:NB,$or:e8,$regex:PB,$size:UB,$type:FB}),H_=!0),new Zd(t)}function yf(t,e){var n=ks(t.primaryKey);e=Tr(e);var r=ys(e);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([S,_])=>{(typeof _!="object"||_===null)&&(r.selector[S]={$eq:_})})):r.selector={},r.index){var i=hd(r.index);i.includes(n)||i.push(n),r.index=i}if(r.sort){var w=r.sort.find(S=>rj(S)===n);w||(r.sort=r.sort.slice(0),r.sort.push({[n]:"asc"}))}else if(r.index)r.sort=r.index.map(S=>({[S]:"asc"}));else{if(t.indexes){var a=new Set;Object.entries(r.selector).forEach(([S,_])=>{var C=!1;typeof _=="object"&&_!==null?C=!!Object.keys(_).find(N=>g2.has(N)):C=!0,C&&a.add(S)});var u=-1,p;t.indexes.forEach(S=>{var _=P0(S)?S:[S],C=_.findIndex(N=>!a.has(N));C>0&&C>u&&(u=C,p=_)}),p&&(r.sort=p.map(S=>({[S]:"asc"})))}if(!r.sort)if(t.indexes&&t.indexes.length>0){var g=t.indexes[0],y=P0(g)?g:[g];r.sort=y.map(S=>({[S]:"asc"}))}else r.sort=[{[n]:"asc"}]}return r}function t8(t,e){if(!e.sort)throw Tt("SNH",{query:e});var n=[];e.sort.forEach(i=>{var a=Object.keys(i)[0],u=Object.values(i)[0];n.push({key:a,direction:u,getValueFn:nj(a)})});var r=(i,a)=>{for(var u=0;u<n.length;++u){var p=n[u],g=p.getValueFn(i),y=p.getValueFn(a);if(g!==y){var w=p.direction==="asc"?lc(g,y):lc(y,g);return w}}};return r}function b2(t,e){if(!e.sort)throw Tt("SNH",{query:e});var n=qB(e.selector),r=i=>n.test(i);return r}async function Rh(t,e){var n=await t.exec();if(!n)return null;if(Array.isArray(n))return Promise.all(n.map(i=>e(i)));if(n instanceof Map)return Promise.all([...n.values()].map(i=>e(i)));var r=await e(n);return r}function M1(t,e){if(!e.sort)throw Tt("SNH",{query:e});var n=MP(t,e);return{query:e,queryPlan:n}}var $B="_rxdb_internal";async function Uf(t,e){var n=await t.findDocumentsById([e],!1),r=n[0];if(r)return r}async function If(t,e,n){var r=await t.bulkWrite([e],n);if(r.error.length>0){var i=r.error[0];throw i}else{var a=ks(t.schema.primaryKey),u=Oa(a,[e],r),p=u[0];return p}}function VB(t,e){var n=Uf(t,e),r=t.changeStream().pipe(bi(i=>i.events.find(a=>a.documentId===e)),Nr(i=>!!i),bi(i=>Promise.resolve(Ht(i).documentData)),Xd(n),TP(i=>i),Nr(i=>!!i));return r}function xd(t){return Object.assign({},...t.filter(e=>!!e))}function $0(t,e,n,r){if(r)throw r.status===409?Tt("CONFLICT",{collection:t.name,id:e,writeError:r,data:n}):r.status===422?Tt("VD2",{collection:t.name,id:e,writeError:r,data:n}):r}function HB(t,e,n,r,i,a,u){for(var p=!!t.schema.attachments,g=[],y=[],w=[],S=Vd(10),_={id:S,events:[],checkpoint:null,context:i},C=_.events,N=[],R=[],M=[],L=n.size>0,k,j=r.length,$=function(){var F=r[U],B=F.document,Z=F.previous,le=B[e],Ne=B._deleted,G=Z&&Z._deleted,ce=void 0;L&&(ce=n.get(le));var se;if(ce){var ee=ce._rev;if(!Z||Z&&ee!==Z._rev){var de={isError:!0,status:409,documentId:le,writeRow:F,documentInDb:ce};return w.push(de),1}var we=p?av(F):F;p&&(Ne?Z&&Object.keys(Z._attachments).forEach(ae=>{R.push({documentId:le,attachmentId:ae,digest:Ht(Z)._attachments[ae].digest})}):(Object.entries(B._attachments).find(([ae,Y])=>{var ie=Z?Z._attachments[ae]:void 0;return!ie&&!Y.data&&(se={documentId:le,documentInDb:ce,isError:!0,status:510,writeRow:F,attachmentId:ae}),!0}),se||Object.entries(B._attachments).forEach(([ae,Y])=>{var ie=Z?Z._attachments[ae]:void 0;if(!ie)N.push({documentId:le,attachmentId:ae,attachmentData:Y,digest:Y.digest});else{var be=we.document._attachments[ae].digest;Y.data&&ie.digest!==be&&M.push({documentId:le,attachmentId:ae,attachmentData:Y,digest:Y.digest})}}))),se?w.push(se):(p?y.push(av(we)):y.push(we),k=we);var Oe=null,pe=null,K=null;if(G&&!Ne)K="INSERT",Oe=p?uo(B):B;else if(Z&&!G&&!Ne)K="UPDATE",Oe=p?uo(B):B,pe=Z;else if(Ne)K="DELETE",Oe=Ht(B),pe=Z;else throw Tt("SNH",{args:{writeRow:F}});var oe={documentId:le,documentData:Oe,previousDocumentData:pe,operation:K};C.push(oe)}else{var Ee=!!Ne;if(p&&Object.entries(B._attachments).forEach(([ae,Y])=>{Y.data?N.push({documentId:le,attachmentId:ae,attachmentData:Y,digest:Y.digest}):(se={documentId:le,isError:!0,status:510,writeRow:F,attachmentId:ae},w.push(se))}),se||(p?g.push(av(F)):g.push(F),k=F),!Ee){var ue={documentId:le,operation:"INSERT",documentData:p?uo(B):B,previousDocumentData:p&&Z?uo(Z):Z};C.push(ue)}}},U=0;U<j;U++)$();return{bulkInsertDocs:g,bulkUpdateDocs:y,newestRow:k,errors:w,eventBulk:_,attachmentsAdd:N,attachmentsRemove:R,attachmentsUpdate:M}}function av(t){return{previous:t.previous,document:uo(t.document)}}function KB(t){return atob(t).length}function GB(t){var e=t.data;if(!e)return t;var n={length:KB(e),digest:t.digest,type:t.type};return n}function uo(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=Tr(t);return e._attachments={},Object.entries(t._attachments).forEach(([n,r])=>{e._attachments[n]=GB(r)}),e}function Jd(t){return Object.assign({},t,{_meta:Tr(t._meta)})}function w2(t,e,n){pr.deepFreezeWhenDevMode(n);var r=ks(e.schema.primaryKey),i={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,async bulkWrite(a,u){for(var p=t.token,g=new Array(a.length),y=ea(),w=0;w<a.length;w++){var S=a[w],_=Jd(S.document);_._meta.lwt=y;var C=S.previous;_._rev=rl(p,C),g[w]={document:_,previous:C}}Ls("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:g});var N=await t.lockedRun(()=>e.bulkWrite(g,u)),R={error:[]};r8.set(R,g);var M=N.error.length===0?[]:N.error.filter(F=>F.status===409&&!F.writeRow.previous&&!F.writeRow.document._deleted&&Ht(F.documentInDb)._deleted?!0:(R.error.push(F),!1));if(M.length>0){var L=new Set,k=M.map(F=>(L.add(F.documentId),{previous:F.documentInDb,document:Object.assign({},F.writeRow.document,{_rev:rl(t.token,F.documentInDb)})})),j=await t.lockedRun(()=>e.bulkWrite(k,u));Qc(R.error,j.error);var $=Oa(r,g,R,L),U=Oa(r,k,j);return Qc($,U),R}return R},query(a){return t.lockedRun(()=>e.query(a))},count(a){return t.lockedRun(()=>e.count(a))},findDocumentsById(a,u){return t.lockedRun(()=>e.findDocumentsById(a,u))},getAttachmentData(a,u,p){return t.lockedRun(()=>e.getAttachmentData(a,u,p))},getChangedDocumentsSince:e.getChangedDocumentsSince?(a,u)=>t.lockedRun(()=>e.getChangedDocumentsSince(Ht(a),u)):void 0,cleanup(a){return t.lockedRun(()=>e.cleanup(a))},remove(){return t.storageInstances.delete(i),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(i),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()}};return t.storageInstances.add(i),i}function YB(t){if(t.schema.keyCompression)throw Tt("UT5",{args:{params:t}});if(V0(t.schema))throw Tt("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw Tt("UT7",{args:{params:t}})}function V0(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function WB(t,e,n){var r=ks(t.schema.primaryKey),i=n?n.lwt:a2,a=n?n.id:"";return yf(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:i}},{"_meta.lwt":{$eq:i},[r]:{$gt:n?a:""}}],"_meta.lwt":{$gte:i}},sort:[{"_meta.lwt":"asc"},{[r]:"asc"}],skip:0,limit:e})}async function n8(t,e,n){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(e,n);var r=ks(t.schema.primaryKey),i=M1(t.schema,WB(t,e,n)),a=await t.query(i),u=a.documents,p=Zk(u);return{documents:u,checkpoint:p?{id:p[r],lwt:p._meta.lwt}:n||{id:"",lwt:0}}}var r8=new WeakMap,XB=new WeakMap;function Oa(t,e,n,r){return vs(XB,n,()=>{var i=[],a=r8.get(n);if(a||(a=e),n.error.length>0||r){for(var u=r||new Set,p=0;p<n.error.length;p++){var g=n.error[p];u.add(g.documentId)}for(var y=0;y<a.length;y++){var w=a[y].document;u.has(w[t])||i.push(uo(w))}}else{i.length=e.length-n.error.length;for(var S=0;S<a.length;S++){var _=a[S].document;i[S]=uo(_)}}return i})}var i8=(function(){function t(n,r,i,a){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=n,this.primaryPath=r,this.preWrite=i,this.postWrite=a}var e=t.prototype;return e.addWrite=function(r,i){var a=r[this.primaryPath],u=vs(this.queueByDocId,a,()=>[]),p=new Promise((g,y)=>{var w={lastKnownDocumentState:r,modifier:i,resolve:g,reject:y};Ht(u).push(w),this.triggerRun()});return p},e.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],i=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(i.entries()).map(async([u,p])=>{var g=QB(p.map(S=>S.lastKnownDocumentState)),y=g;for(var w of p)try{y=await w.modifier(ys(y))}catch(S){w.reject(S),w.reject=()=>{},w.resolve=()=>{}}try{await this.preWrite(y,g)}catch(S){p.forEach(_=>_.reject(S));return}r.push({previous:g,document:y})}));var a=r.length>0?await this.storageInstance.bulkWrite(r,"incremental-write"):{error:[]};return await Promise.all(Oa(this.primaryPath,r,a).map(u=>{var p=u[this.primaryPath];this.postWrite(u);var g=Cf(i,p);g.forEach(y=>y.resolve(u))})),a.error.forEach(u=>{var p=u.documentId,g=Cf(i,p),y=Af(u);if(y){var w=vs(this.queueByDocId,p,()=>[]);g.reverse().forEach(_=>{_.lastKnownDocumentState=Ht(y.documentInDb),Ht(w).unshift(_)})}else{var S=o5(u);g.forEach(_=>_.reject(S))}}),this.isRunning=!1,this.triggerRun()}},t})();function K_(t){var e=async n=>{var r=ij(n);r._deleted=n._deleted;var i=await t(r),a=Object.assign({},i,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:typeof i._deleted<"u"?i._deleted:n._deleted});return typeof a._deleted>"u"&&(a._deleted=!1),a};return e}function QB(t){var e=t[0],n=ac(e._rev);return t.forEach(r=>{var i=ac(r._rev);i>n&&(e=r,n=i)}),e}var D1={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(bi(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this,e=this.primary;return t.collection.eventBulks$.pipe(Nr(n=>!n.isLocal),bi(n=>n.events.find(r=>r.documentId===e)),Nr(n=>!!n),bi(n=>B5(Ht(n))),Xd(t.collection._docCache.getLatestDocumentData(e)),gd((n,r)=>n._rev===r._rev),bi(n=>this.collection._docCache.getCachedRxDocument(n)),Wd(Hd))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(pr.isDevMode()){if(t.includes(".item."))throw Tt("DOC1",{path:t});if(t===this.primaryPath)throw Tt("DOC2");if(this.collection.schema.finalFields.includes(t))throw Tt("DOC3",{path:t});var e=Nf(this.collection.schema.jsonSchema,t);if(!e)throw Tt("DOC4",{path:t})}return this.$.pipe(bi(n=>oc(n,t)),gd())},get$$(t){var e=this.get$(t),n=this.collection.database.getReactivityFactory();return n.fromObservable(e,this.getLatest().get(t),this.collection.database)},populate(t){var e=Nf(this.collection.schema.jsonSchema,t),n=this.get(t);if(!n)return u2;if(!e)throw Tt("DOC5",{path:t});if(!e.ref)throw Tt("DOC6",{path:t,schemaObj:e});var r=this.collection.database.collections[e.ref];if(!r)throw Tt("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?r.findByIds(n).exec().then(i=>{var a=i.values();return Array.from(a)}):r.findOne(n).exec()},get(t){return o8(this,t)},toJSON(t=!1){if(t)return pr.deepFreezeWhenDevMode(this._data);var e=Tr(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,pr.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return ys(this.toJSON(t))},update(t){throw Cr("update")},incrementalUpdate(t){throw Cr("update")},updateCRDT(t){throw Cr("crdt")},putAttachment(){throw Cr("attachments")},putAttachmentBase64(){throw Cr("attachments")},getAttachment(){throw Cr("attachments")},allAttachments(){throw Cr("attachments")},get allAttachments$(){throw Cr("attachments")},async modify(t,e){var n=this._data,r=await K_(t)(n);return this._saveData(r,n)},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,K_(t)).then(n=>this.collection._docCache.getCachedRxDocument(n))},patch(t){var e=this._data,n=ys(e);return Object.entries(t).forEach(([r,i])=>{n[r]=i}),this._saveData(n,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([n,r])=>{e[n]=r}),e))},async _saveData(t,e){if(t=Tr(t),this._data._deleted)throw Tt("DOC11",{id:this.primary,document:this});await a8(this.collection,t,e);var n=[{previous:e,document:t}],r=await this.collection.storageInstance.bulkWrite(n,"rx-document-save-data"),i=r.error[0];return $0(this.collection,this.primary,t,i),await this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(Oa(this.collection.schema.primaryPath,n,r)[0])},async remove(){if(this.deleted)return Promise.reject(Tt("DOC13",{document:this,id:this.primary}));var t=await this.collection.bulkRemove([this]);if(t.error.length>0){var e=t.error[0];$0(this.collection,this.primary,this._data,e)}return t.success[0]},incrementalRemove(){return this.incrementalModify(async t=>(await this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t)).then(async t=>(await this.collection._runHooks("post","remove",t._data,t),t))},close(){throw Tt("DOC14")}};function s8(t=D1){var e=function(r,i){this.collection=r,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function ZB(t,e,n){var r=new t(e,n);return Ls("createRxDocument",r),r}function a8(t,e,n){return e._meta=Object.assign({},n._meta,e._meta),pr.isDevMode()&&t.schema.validateChange(n,e),t._runHooks("pre","save",e,n)}function o8(t,e){return vs(t._propertyCache,e,()=>{var n=oc(t._data,e);if(typeof n!="object"||n===null||Array.isArray(n))return pr.deepFreezeWhenDevMode(n);var r=new Proxy(Tr(n),{get(i,a){if(typeof a!="string")return i[a];var u=a.charAt(a.length-1);if(u==="$")if(a.endsWith("$$")){var p=a.slice(0,-2);return t.get$$(zh(e+"."+p))}else{var g=a.slice(0,-1);return t.get$(zh(e+"."+g))}else if(u==="_"){var y=a.slice(0,-1);return t.populate(zh(e+"."+y))}else{var w=i[a];return typeof w=="number"||typeof w=="string"||typeof w=="boolean"?w:o8(t,zh(e+"."+a))}}});return r})}function E2(t){return t[t.length-1]}function JB(t){const e=typeof t;return t!==null&&(e==="object"||e==="function")}function G_(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!JB(t)||typeof e!="string")return t;const r=e.split(".");if(r.length===0)return n;for(let i=0;i<r.length;i++){const a=r[i];if(eU(t,a)?t=i===r.length-1?void 0:null:t=t[a],t==null){if(i!==r.length-1)return n;break}}return t===void 0?n:t}function eU(t,e){if(typeof e!="number"&&Array.isArray(t)){const n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}const l8=t=>!!t.queryParams.limit,tU=t=>t.queryParams.limit===1,nU=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),rU=t=>t.changeEvent.operation==="DELETE",iU=t=>t.changeEvent.operation==="INSERT",sU=t=>t.changeEvent.operation==="UPDATE",aU=t=>l8(t)&&t.previousResults.length>=t.queryParams.limit,oU=t=>{const e=t.queryParams.sortFields,n=t.changeEvent.previous,r=t.changeEvent.doc;if(!r)return!1;if(!n)return!0;for(let i=0;i<e.length;i++){const a=e[i],u=G_(n,a),p=G_(r,a);if(u!==p)return!0}return!1},lU=t=>{const e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{const n=t.queryParams.primaryKey,r=t.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===e)return!0;return!1}},cU=t=>{const e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},uU=t=>{const e=E2(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},fU=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=t.previousResults[0];return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)<0:!1},hU=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=E2(t.previousResults);return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)>0:!1},dU=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=t.previousResults[0];return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)<0:!1},pU=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=E2(t.previousResults);return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)>0:!1},mU=t=>{const e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},gU=t=>{const e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},yU=t=>t.previousResults.length===0,vU={0:iU,1:sU,2:rU,3:l8,4:tU,5:nU,6:yU,7:aU,8:cU,9:uU,10:oU,11:lU,12:fU,13:hU,14:dU,15:pU,16:mU,17:gU};function bU(t,e,n,r){var i=t.length,a=i-1,u=0;if(i===0)return t.push(e),0;for(var p;r<=a;)u=r+(a-r>>1),p=t[u],n(p,e)<=0?r=u+1:a=u-1;return n(p,e)<=0&&u++,t.splice(u,0,e),u}const wU=t=>{},S2=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},x2=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},_2=t=>{const e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},A2=t=>{const e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},EU=t=>{_2(t),x2(t)},SU=t=>{A2(t),S2(t)},xU=t=>{_2(t),S2(t)},_U=t=>{A2(t),x2(t)},c8=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);const e=t.queryParams.primaryKey,n=t.previousResults;for(let r=0;r<n.length;r++)if(n[r][e]===t.changeEvent.id){n.splice(r,1);break}},AU=t=>{const e=t.changeEvent.doc,n=t.queryParams.primaryKey,r=t.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===t.changeEvent.id){r[i]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},CU=t=>{const e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},u8=t=>{const e=t.changeEvent.id,n=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,n)}else if(t.previousResults.find(i=>i[t.queryParams.primaryKey]===e))return;bU(t.previousResults,n,t.queryParams.sortComparator,0)},NU=t=>{c8(t),u8(t)},TU=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},OU=t=>{throw new Error("Action unknownAction should never be called")},RU=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],IU={doNothing:wU,insertFirst:S2,insertLast:x2,removeFirstItem:_2,removeLastItem:A2,removeFirstInsertLast:EU,removeLastInsertFirst:SU,removeFirstInsertFirst:xU,removeLastInsertLast:_U,removeExisting:c8,replaceExisting:AU,alwaysWrong:CU,insertAtSortPosition:u8,removeExistingAndInsertAtSortPosition:NU,runFullQueryAgain:TU,unknownAction:OU},MU=40;function ov(t){return t.charCodeAt(0)-MU}function DU(t){return t?"1":"0"}function Y_(t,e){const n=[];for(let r=0,i=t.length;r<i;r+=e)n.push(t.substring(r,r+e));return n}function LU(t){const e=new Map,r=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,i=t.substring(2,r),a=Y_(i,2);for(let R=0;R<a.length;R++){const M=a[R],L=M.charAt(0),k=ov(M.charAt(1));e.set(L,k)}const u=t.substring(r,t.length-3),p=Y_(u,4);for(let R=0;R<p.length;R++){const M=p[R],L=M.charAt(0),k=M.charAt(1),j=M.charAt(2),$=ov(M.charAt(3));if(!e.has(k))throw new Error("missing node with id "+k);if(!e.has(j))throw new Error("missing node with id "+j);const U=e.get(k),F=e.get(j),B={l:$,0:U,1:F};e.set(L,B)}const g=t.slice(-3),y=g.charAt(0),w=g.charAt(1),S=ov(g.charAt(2)),_=e.get(y),C=e.get(w);return{l:S,0:_,1:C}}function kU(t,e,n){let r=t,i=t.l;for(;;){const a=e[i](n),u=DU(a);if(r=r[u],typeof r=="number"||typeof r=="string")return r;i=r.l}}const jU="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9bf9bq9cg9ck9cn9nd9np9nq9nf9ng9nm9nk9mr9ms9mt9mj9mk9ml9mn9mc8{8}888mn88m8m4z4w4z44444m4v7yn77~777n777m77m7m7m5m5m55m555m55m5m552|2u2222x222|222222n2n222n2/an/bn/cn///////////,cn,,,,,,,ac0bc00000000000m-m-----------3333(((++++11*m*.";let lv;function PU(){return lv||(lv=LU(jU)),lv}const BU=t=>kU(PU(),vU,t);function UU(t){const e=BU(t);return RU[e]}function zU(t,e,n,r,i){const a=IU[t];return a({queryParams:e,changeEvent:n,previousResults:r,keyDocumentMap:i}),r}function FU(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(n=>Object.keys(n)[0])}var qU=new WeakMap;function $U(t){return vs(qU,t,()=>{var e=t.collection,n=yf(e.storageInstance.schema,ys(t.mangoQuery)),r=e.schema.primaryPath,i=t8(e.schema.jsonSchema,n),a=(y,w)=>{var S={docA:y,docB:w};return i(S.docA,S.docB)},u=b2(e.schema.jsonSchema,n),p=y=>{var w={doc:y};return u(w.doc)},g={primaryKey:t.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:FU(r,n),sortComparator:a,queryMatcher:p};return g})}function VU(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};for(var n=$U(t),r=Ht(t._result).docsData.slice(0),i=Ht(t._result).docsDataMap,a=!1,u=[],p=0;p<e.length;p++){var g=e[p],y=OP(g);y&&u.push(y)}var w=u.find(S=>{var _={queryParams:n,changeEvent:S,previousResults:r,keyDocumentMap:i},C=UU(_);if(C==="runFullQueryAgain")return!0;if(C!=="doNothing")return a=!0,zU(C,n,S,r,i),!1});return w?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:a,newResults:r}}var HU=(function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(r){var i=r.toString(),a=vs(this._map,i,()=>r);return a},t})();function KU(){return new HU}function W_(t,e){e.uncached=!0;var n=e.toString();t._map.delete(n)}function GU(t){return t.refCount$.observers.length}var YU=100,WU=30*1e3,XU=(t,e)=>(n,r)=>{if(!(r._map.size<t)){var i=ea()-e,a=[],u=Array.from(r._map.values());for(var p of u)if(!(GU(p)>0)){if(p._lastEnsureEqual===0&&p._creationTime<i){W_(r,p);continue}a.push(p)}var g=a.length-t;if(!(g<=0)){var y=a.sort((S,_)=>S._lastEnsureEqual-_._lastEnsureEqual),w=y.slice(0,g);w.forEach(S=>W_(r,S))}}},f8=XU(YU,WU),cv=new WeakSet;function QU(t){cv.has(t)||(cv.add(t),pj().then(()=>gj(200)).then(()=>{t.closed||t.cacheReplacementPolicy(t,t._queryCache),cv.delete(t)}))}var h8=(function(){function t(n,r,i){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(a=>{var u=a.docId,p=this.cacheItemByDocId.get(u);p&&(p[0].delete(a.revisionHeight+a.lwt+""),p[0].size===0&&this.cacheItemByDocId.delete(u))}):void 0,this.primaryPath=n,this.changes$=r,this.documentCreator=i,r.subscribe(a=>{this.tasks.add(()=>{for(var u=this.cacheItemByDocId,p=0;p<a.length;p++){var g=a[p],y=u.get(g.documentId);if(y){var w=g.documentData;w||(w=g.previousDocumentData),y[1]=w}}}),this.tasks.size<=1&&C1().then(()=>{this.processTasks()})})}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},e.getLatestDocumentData=function(r){this.processTasks();var i=Cf(this.cacheItemByDocId,r);return i[1]},e.getLatestDocumentDataIfExists=function(r){this.processTasks();var i=this.cacheItemByDocId.get(r);if(i)return i[1]},dc(t,[{key:"getCachedRxDocuments",get:function(){var n=X_(this);return tl(this,"getCachedRxDocuments",n)}},{key:"getCachedRxDocument",get:function(){var n=X_(this);return tl(this,"getCachedRxDocument",r=>n([r])[0])}}])})();function X_(t){var e=t.primaryPath,n=t.cacheItemByDocId,r=t.registry,i=pr.deepFreezeWhenDevMode,a=t.documentCreator,u=p=>{for(var g=new Array(p.length),y=[],w=0;w<p.length;w++){var S=p[w],_=S[e],C=ac(S._rev),N=void 0,R=void 0,M=n.get(_);M?(N=M[0],R=N.get(C+S._meta.lwt+"")):(N=new Map,M=[N,S],n.set(_,M));var L=R?R.deref():void 0;L||(S=i(S),L=a(S),N.set(C+S._meta.lwt+"",JU(L)),r&&y.push(L)),g[w]=L}return y.length>0&&r&&(t.tasks.add(()=>{for(var k=0;k<y.length;k++){var j=y[k];r.register(j,{docId:j.primary,revisionHeight:ac(j.revision),lwt:j._data._meta.lwt})}}),t.tasks.size<=1&&C1().then(()=>{t.processTasks()})),g};return u}function Hb(t,e){var n=t.getCachedRxDocuments;return n(e)}var ZU=typeof WeakRef=="function",JU=ZU?ez:tz;function ez(t){return new WeakRef(t)}function tz(t){return{deref(){return t}}}var Q_=(function(){function t(n,r,i){this.time=ea(),this.query=n,this.count=i,this.documents=Hb(this.query.collection._docCache,r)}var e=t.prototype;return e.getValue=function(r){var i=this.query.op;if(i==="count")return this.count;if(i==="findOne"){var a=this.documents.length===0?null:this.documents[0];if(!a&&r)throw Tt("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:i});return a}else return i==="findByIds"?this.docsMap:this.documents.slice(0)},dc(t,[{key:"docsData",get:function(){return tl(this,"docsData",this.documents.map(n=>n._data))}},{key:"docsDataMap",get:function(){var n=new Map;return this.documents.forEach(r=>{n.set(r.primary,r._data)}),tl(this,"docsDataMap",n)}},{key:"docsMap",get:function(){for(var n=new Map,r=this.documents,i=0;i<r.length;i++){var a=r[i];n.set(a.primary,a)}return tl(this,"docsMap",n)}}])})(),nz=0,rz=function(){return++nz},d8=(function(){function t(n,r,i,a={}){this.id=rz(),this._execOverDatabaseCount=0,this._creationTime=ea(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new co(null),this._result=null,this._latestChangeEvent=-1,this._ensureEqualQueue=vo,this.op=n,this.mangoQuery=r,this.collection=i,this.other=a,r||(this.mangoQuery=_0()),this.isFindOneByIdQuery=lz(this.collection.schema.primaryPath,r)}var e=t.prototype;return e._setResultData=function(r){if(typeof r>"u")throw Tt("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof r=="number"){this._result=new Q_(this,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var i=new Q_(this,r,r.length);this._result=i},e._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this.op==="count"){var r=this.getPreparedQuery(),i=await this.collection.storageInstance.count(r);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw Tt("QU14",{collection:this.collection,queryObj:this.mangoQuery});return{result:i.count,counter:this.collection._changeEventBuffer.getCounter()}}if(this.op==="findByIds"){var a=Ht(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,u=new Map,p=[];if(a.forEach(w=>{var S=this.collection._docCache.getLatestDocumentDataIfExists(w);if(S){if(!S._deleted){var _=this.collection._docCache.getCachedRxDocument(S);u.set(w,_)}}else p.push(w)}),p.length>0){var g=await this.collection.storageInstance.findDocumentsById(p,!1);g.forEach(w=>{var S=this.collection._docCache.getCachedRxDocument(w);u.set(S.primary,S)})}return{result:u,counter:this.collection._changeEventBuffer.getCounter()}}var y=await oz(this);return{result:y.docs,counter:y.counter}},e.exec=async function(r){if(r&&this.op!=="findOne")throw Tt("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});await Z_(this);var i=Ht(this._result);return i.getValue(r)},e.toString=function(){var r=B0({op:this.op,query:yf(this.collection.schema.jsonSchema,this.mangoQuery),other:this.other},!0),i=JSON.stringify(r);return this.toString=()=>i,i},e.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:yf(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),Ls("prePrepareQuery",r);var i=M1(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>i,i},e.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},e.remove=async function(){var r=await this.exec();if(Array.isArray(r)){var i=await this.collection.bulkRemove(r);if(i.error.length>0)throw o5(i.error[0]);return i.success}else return r.remove()},e.incrementalRemove=function(){return Rh(this.asRxQuery,r=>r.incrementalRemove())},e.update=function(r){throw Cr("update")},e.patch=function(r){return Rh(this.asRxQuery,i=>i.patch(r))},e.incrementalPatch=function(r){return Rh(this.asRxQuery,i=>i.incrementalPatch(r))},e.modify=function(r){return Rh(this.asRxQuery,i=>i.modify(r))},e.incrementalModify=function(r){return Rh(this.asRxQuery,i=>i.incrementalModify(r))},e.where=function(r){throw Cr("query-builder")},e.sort=function(r){throw Cr("query-builder")},e.skip=function(r){throw Cr("query-builder")},e.limit=function(r){throw Cr("query-builder")},dc(t,[{key:"$",get:function(){if(!this._$){var n=this.collection.eventBulks$.pipe(Nr(r=>!r.isLocal),Xd(null),bo(()=>Z_(this)),bi(()=>this._result),Wd(Hd),gd((r,i)=>!!(r&&r.time===Ht(i).time)),Nr(r=>!!r),bi(r=>Ht(r).getValue()));this._$=IP(n,this.refCount$.pipe(Nr(()=>!1)))}return this._$}},{key:"$$",get:function(){var n=this.collection.database.getReactivityFactory();return n.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var n=this.collection.schema.jsonSchema,r=yf(this.collection.schema.jsonSchema,this.mangoQuery);return tl(this,"queryMatcher",b2(n,r))}},{key:"asRxQuery",get:function(){return this}}])})();function _0(){return{selector:{}}}function iz(t){return t.collection._queryCache.getByQuery(t)}function Qu(t,e,n,r){Ls("preCreateRxQuery",{op:t,queryObj:e,collection:n,other:r});var i=new d8(t,e,n,r);return i=iz(i),QU(n),i}function sz(t){var e=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=e}async function Z_(t){return t.collection.awaitBeforeReads.size>0&&await Promise.all(Array.from(t.collection.awaitBeforeReads).map(e=>e())),t._ensureEqualQueue=t._ensureEqualQueue.then(()=>az(t)),t._ensureEqualQueue}function az(t){if(t._lastEnsureEqual=ea(),t.collection.database.closed||sz(t))return vo;var e=!1,n=!1;if(t._latestChangeEvent===-1&&(n=!0),!n){var r=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(r===null)n=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var i=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(t.op==="count"){var a=Ht(t._result).count,u=a;i.forEach(g=>{var y=g.previousDocumentData&&t.doesDocumentDataMatch(g.previousDocumentData),w=t.doesDocumentDataMatch(g.documentData);!y&&w&&u++,y&&!w&&u--}),u!==a&&(e=!0,t._setResultData(u))}else{var p=VU(t,i);p.runFullQueryAgain?n=!0:p.changed&&(e=!0,t._setResultData(p.newResults))}}}return n?t._execOverDatabase().then(g=>{var y=g.result;return t._latestChangeEvent=g.counter,typeof y=="number"?((!t._result||y!==t._result.count)&&(e=!0,t._setResultData(y)),e):((!t._result||!sj(t.collection.schema.primaryPath,y,t._result.docsData))&&(e=!0,t._setResultData(y)),e)}):Promise.resolve(e)}async function oz(t){var e=[],n=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var r=t.isFindOneByIdQuery;if(r=r.filter(w=>{var S=t.collection._docCache.getLatestDocumentDataIfExists(w);return S?(S._deleted||e.push(S),!1):!0}),r.length>0){var i=await n.storageInstance.findDocumentsById(r,!1);Qc(e,i)}}else{var a=t.isFindOneByIdQuery,u=t.collection._docCache.getLatestDocumentDataIfExists(a);if(!u){var p=await n.storageInstance.findDocumentsById([a],!1);p[0]&&(u=p[0])}u&&!u._deleted&&e.push(u)}else{var g=t.getPreparedQuery(),y=await n.storageInstance.query(g);e=y.documents}return{docs:e,counter:n._changeEventBuffer.getCounter()}}function lz(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var n=e.selector[t];if(typeof n=="string")return n;if(Object.keys(n).length===1&&typeof n.$eq=="string"||Object.keys(n).length===1&&Array.isArray(n.$eq)&&!n.$eq.find(r=>typeof r!="string"))return n.$eq}return!1}var rc="collection",C2="storage-token",A0="rx-migration-status",cz="rx-pipeline-checkpoint",uz="RxInternalDocument",N2=N1({version:0,title:uz,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[rc,C2,A0,cz,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function ru(t,e){return pc(N2,{key:t,context:e})}async function p8(t){var e=M1(t.schema,{selector:{context:rc,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),n=await t.query(e),r=n.documents;return r}var m8="storageToken",fz=ru(m8,C2);async function hz(t){var e=Vd(10),n=t.password?await t.hashFunction(JSON.stringify(t.password)):void 0,r={id:fz,context:C2,key:m8,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:n},_deleted:!1,_meta:Bf(),_rev:Ga(),_attachments:{}},i=[{document:r}],a=await t.internalStore.bulkWrite(i,"internal-add-storage-token");if(!a.error[0])return Oa("id",i,a)[0];var u=Ht(a.error[0]);if(u.isError&&Af(u)){var p=u;if(!dz(p.documentInDb.data.rxdbVersion,t.rxdbVersion))throw Tt("DM5",{args:{database:t.name,databaseStateVersion:p.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(n&&n!==p.documentInDb.data.passwordHash)throw Tt("DB1",{passwordHash:n,existingPasswordHash:p.documentInDb.data.passwordHash});var g=p.documentInDb;return Ht(g)}throw u}function dz(t,e){if(!t)return!1;var n=t.split(".")[0],r=e.split(".")[0];return n==="15"&&r==="16"?!0:n===r}async function g8(t,e,n){if(t.schema.version!==n.version)throw Tt("SNH",{schema:n,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var r=H0(t.name,t.schema.jsonSchema),i=ru(r,rc);;){var a=await Uf(t.database.internalStore,i),u=ys(Ht(a)),p=u.data.connectedStorages.find(g=>g.collectionName===e&&g.schema.version===n.version);if(p)return;u.data.connectedStorages.push({collectionName:e,schema:n});try{await If(t.database.internalStore,{previous:Ht(a),document:u},"add-connected-storage-to-collection")}catch(g){if(!Af(g))throw g}}}async function pz(t,e,n){if(t.schema.version!==n.version)throw Tt("SNH",{schema:n,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var r=H0(t.name,t.schema.jsonSchema),i=ru(r,rc);;){var a=await Uf(t.database.internalStore,i),u=ys(Ht(a)),p=u.data.connectedStorages.find(g=>g.collectionName===e&&g.schema.version===n.version);if(!p)return;u.data.connectedStorages=u.data.connectedStorages.filter(g=>g.collectionName!==e);try{await If(t.database.internalStore,{previous:Ht(a),document:u},"remove-connected-storage-from-collection")}catch(g){if(!Af(g))throw g}}}function H0(t,e){return t+"-"+e.version}function pm(t,e){return e=Tr(e),e=Oj(t,e),typeof t.jsonSchema.primaryKey!="string"&&(e=xj(t.primaryPath,t.jsonSchema,e)),e._meta=Bf(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=Ga()),e}async function mz(t,e){e.multiInstance=t.multiInstance;var n=await t.storage.createStorageInstance(e);return n}async function y8(t,e,n,r,i,a,u,p){var g=await p8(e),y=g.filter(C=>C.data.name===i),w=[];y.forEach(C=>{w.push({collectionName:C.data.name,schema:C.data.schema,isCollection:!0}),C.data.connectedStorages.forEach(N=>w.push({collectionName:N.collectionName,isCollection:!1,schema:N.schema}))});var S=new Set;if(w=w.filter(C=>{var N=C.collectionName+"||"+C.schema.version;return S.has(N)?!1:(S.add(N),!0)}),await Promise.all(w.map(async C=>{var N=await t.createStorageInstance({collectionName:C.collectionName,databaseInstanceToken:n,databaseName:r,multiInstance:a,options:{},schema:C.schema,password:u,devMode:pr.isDevMode()});await N.remove(),C.isCollection&&await Zc("postRemoveRxCollection",{storage:t,databaseName:r,collectionName:i})})),p){var _=y.map(C=>{var N=Jd(C);return N._deleted=!0,N._meta.lwt=ea(),N._rev=rl(n,C),{previous:C,document:N}});await e.bulkWrite(_,"rx-database-remove-collection-all")}}function ga(t){if(t.closed)throw Tt("COL21",{collection:t.name,version:t.schema.version})}var gz=(function(){function t(n){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=n,this.subs.push(this.collection.eventBulks$.pipe(Nr(r=>!r.isLocal)).subscribe(r=>{this.tasks.add(()=>this._handleChangeEvents(r.events)),this.tasks.size<=1&&C1().then(()=>{this.processTasks()})}))}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},e._handleChangeEvents=function(r){var i=this.counter;this.counter=this.counter+r.length,r.length>this.limit?this.buffer=r.slice(r.length*-1):(Qc(this.buffer,r),this.buffer=this.buffer.slice(this.limit*-1));for(var a=i+1,u=this.eventCounterMap,p=0;p<r.length;p++){var g=r[p];u.set(g,a+p)}},e.getCounter=function(){return this.processTasks(),this.counter},e.getBuffer=function(){return this.processTasks(),this.buffer},e.getArrayIndexByPointer=function(r){this.processTasks();var i=this.buffer[0],a=this.eventCounterMap.get(i);if(r<a)return null;var u=r-a;return u},e.getFrom=function(r){this.processTasks();var i=[],a=this.getArrayIndexByPointer(r);if(a===null)return null;for(;;){var u=this.buffer[a];if(a++,u)i.push(u);else return i}},e.runFrom=function(r,i){this.processTasks();var a=this.getFrom(r);if(a===null)throw new Error("out of bounds");a.forEach(u=>i(u))},e.reduceByLastOfDoc=function(r){return this.processTasks(),r.slice(0)},e.close=function(){this.tasks.clear(),this.subs.forEach(r=>r.unsubscribe())},t})();function yz(t){return new gz(t)}var vz=new WeakMap;function bz(t){var e=t.schema.getDocumentPrototype(),n=Sz(t),r=D1,i={};return[e,n,r].forEach(a=>{var u=Object.getOwnPropertyNames(a);u.forEach(p=>{var g=Object.getOwnPropertyDescriptor(a,p),y=!0;(p.startsWith("_")||p.endsWith("_")||p.startsWith("$")||p.endsWith("$"))&&(y=!1),typeof g.value=="function"?Object.defineProperty(i,p,{get(){return g.value.bind(this)},enumerable:y,configurable:!1}):(g.enumerable=y,g.configurable=!1,g.writable&&(g.writable=!1),Object.defineProperty(i,p,g))})}),i}function wz(t){return vs(vz,t,()=>s8(bz(t)))}function Ez(t,e,n){var r=ZB(e,t,pr.deepFreezeWhenDevMode(n));return t._runHooksSync("post","create",n,r),Ls("postCreateRxDocument",r),r}function Sz(t){var e={};return Object.entries(t.methods).forEach(([n,r])=>{e[n]=r}),e}var K0={isEqual(t,e,n){t=J_(t),e=J_(e);var r=pd(uo(t),uo(e));return r},resolve(t){return t.realMasterState}};function J_(t){return t._attachments||(t=Tr(t),t._attachments={}),t}var v8=["pre","post"],b8=["insert","save","remove","create"],eA=!1,Zu=new Set,w8=(function(){function t(n,r,i,a,u={},p={},g={},y={},w={},S=f8,_={},C=K0){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=KU(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.eventBulks$={},this.onClose=[],this.closed=!1,this.onRemove=[],this.database=n,this.name=r,this.schema=i,this.internalStorageInstance=a,this.instanceCreationOptions=u,this.migrationStrategies=p,this.methods=g,this.attachments=y,this.options=w,this.cacheReplacementPolicy=S,this.statics=_,this.conflictHandler=C,xz(this.asRxCollection),n&&(this.eventBulks$=n.eventBulks$.pipe(Nr(N=>N.collectionName===this.name))),this.database&&Zu.add(this)}var e=t.prototype;return e.prepare=async function(){if(!await m5()){for(var r=0;r<10&&Zu.size>T_;)r++,await this.promiseWait(30);if(Zu.size>T_)throw Tt("COL23",{database:this.database.name,collection:this.name,args:{existing:Array.from(Zu.values()).map(g=>({db:g.database?g.database.name:"",c:g.name}))}})}this.storageInstance=w2(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new i8(this.storageInstance,this.schema.primaryPath,(g,y)=>a8(this,g,y),g=>this._runHooks("post","save",g)),this.$=this.eventBulks$.pipe(bo(g=>U5(g))),this.checkpoint$=this.eventBulks$.pipe(bi(g=>g.checkpoint)),this._changeEventBuffer=yz(this.asRxCollection);var i;this._docCache=new h8(this.schema.primaryPath,this.eventBulks$.pipe(Nr(g=>!g.isLocal),bi(g=>g.events)),g=>(i||(i=wz(this.asRxCollection)),Ez(this.asRxCollection,i,g)));var a=this.database.internalStore.changeStream().pipe(Nr(g=>{var y=this.name+"-"+this.schema.version,w=g.events.find(S=>S.documentData.context==="collection"&&S.documentData.key===y&&S.operation==="DELETE");return!!w})).subscribe(async()=>{await this.close(),await Promise.all(this.onRemove.map(g=>g()))});this._subs.push(a);var u=await this.database.storageToken,p=this.storageInstance.changeStream().subscribe(g=>{var y={id:g.id,isLocal:!1,internal:!1,collectionName:this.name,storageToken:u,events:g.events,databaseToken:this.database.token,checkpoint:g.checkpoint,context:g.context};this.database.$emit(y)});return this._subs.push(p),xa},e.cleanup=function(r){throw ga(this),Cr("cleanup")},e.migrationNeeded=function(){throw Cr("migration-schema")},e.getMigrationState=function(){throw Cr("migration-schema")},e.startMigration=function(r=10){return ga(this),this.getMigrationState().startMigration(r)},e.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},e.insert=async function(r){ga(this);var i=await this.bulkInsert([r]),a=i.error[0];$0(this,r[this.schema.primaryPath],r,a);var u=Ht(i.success[0]);return u},e.insertIfNotExists=async function(r){var i=await this.bulkInsert([r]);if(i.error.length>0){var a=i.error[0];if(a.status===409){var u=a.documentInDb;return Hb(this._docCache,[u])[0]}else throw a}return i.success[0]},e.bulkInsert=async function(r){if(ga(this),r.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,a=new Set,u;if(this.hasHooks("pre","insert"))u=await Promise.all(r.map(M=>{var L=pm(this.schema,M);return this._runHooks("pre","insert",L).then(()=>(a.add(L[i]),{document:L}))}));else{u=new Array(r.length);for(var p=this.schema,g=0;g<r.length;g++){var y=r[g],w=pm(p,y);a.add(w[i]),u[g]={document:w}}}if(a.size!==r.length)throw Tt("COL22",{collection:this.name,args:{documents:r}});var S=await this.storageInstance.bulkWrite(u,"rx-collection-bulk-insert"),_,C=this,N={get success(){if(!_){var M=Oa(C.schema.primaryPath,u,S);_=Hb(C._docCache,M)}return _},error:S.error};if(this.hasHooks("post","insert")){var R=new Map;u.forEach(M=>{var L=M.document;R.set(L[i],L)}),await Promise.all(N.success.map(M=>this._runHooks("post","insert",R.get(M.primary),M)))}return N},e.bulkRemove=async function(r){ga(this);var i=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var a;typeof r[0]=="string"?a=await this.findByIds(r).exec():(a=new Map,r.forEach(C=>a.set(C.primary,C)));var u=[],p=new Map;Array.from(a.values()).forEach(C=>{var N=C.toMutableJSON(!0);u.push(N),p.set(C.primary,N)}),await Promise.all(u.map(C=>{var N=C[this.schema.primaryPath];return this._runHooks("pre","remove",C,a.get(N))}));var g=u.map(C=>{var N=Tr(C);return N._deleted=!0,{previous:C,document:N}}),y=await this.storageInstance.bulkWrite(g,"rx-collection-bulk-remove"),w=Oa(this.schema.primaryPath,g,y),S=[],_=w.map(C=>{var N=C[i],R=this._docCache.getCachedRxDocument(C);return S.push(R),N});return await Promise.all(_.map(C=>this._runHooks("post","remove",p.get(C),a.get(C)))),{success:S,error:y.error}},e.bulkUpsert=async function(r){ga(this);var i=[],a=new Map;r.forEach(y=>{var w=pm(this.schema,y),S=w[this.schema.primaryPath];if(!S)throw Tt("COL3",{primaryPath:this.schema.primaryPath,data:w,schema:this.schema.jsonSchema});a.set(S,w),i.push(w)});var u=await this.bulkInsert(i),p=u.success.slice(0),g=[];return await Promise.all(u.error.map(async y=>{if(y.status!==409)g.push(y);else{var w=y.documentId,S=Cf(a,w),_=Ht(y.documentInDb),C=this._docCache.getCachedRxDocuments([_])[0],N=await C.incrementalModify(()=>S);p.push(N)}})),{error:g,success:p}},e.upsert=async function(r){ga(this);var i=await this.bulkUpsert([r]);return $0(this.asRxCollection,r[this.schema.primaryPath],r,i.error[0]),i.success[0]},e.incrementalUpsert=function(r){ga(this);var i=pm(this.schema,r),a=i[this.schema.primaryPath];if(!a)throw Tt("COL4",{data:r});var u=this._incrementalUpsertQueues.get(a);return u||(u=xa),u=u.then(()=>Az(this,a,i)).then(p=>p.inserted?p.doc:_z(p.doc,i)),this._incrementalUpsertQueues.set(a,u),u},e.find=function(r){ga(this),Ls("prePrepareRxQuery",{op:"find",queryObj:r,collection:this}),r||(r=_0());var i=Qu("find",r,this);return i},e.findOne=function(r){ga(this),Ls("prePrepareRxQuery",{op:"findOne",queryObj:r,collection:this});var i;if(typeof r=="string")i=Qu("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=_0()),r.limit)throw Tt("QU6");r=Tr(r),r.limit=1,i=Qu("findOne",r,this)}return i},e.count=function(r){ga(this),r||(r=_0());var i=Qu("count",r,this);return i},e.findByIds=function(r){ga(this);var i={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},a=Qu("findByIds",i,this);return a},e.exportJSON=function(){throw Cr("json-dump")},e.importJSON=function(r){throw Cr("json-dump")},e.insertCRDT=function(r){throw Cr("crdt")},e.addPipeline=function(r){throw Cr("pipeline")},e.addHook=function(r,i,a,u=!1){if(typeof a!="function")throw Ea("COL7",{key:i,when:r});if(!v8.includes(r))throw Ea("COL8",{key:i,when:r});if(!b8.includes(i))throw Tt("COL9",{key:i});if(r==="post"&&i==="create"&&u===!0)throw Tt("COL10",{when:r,key:i,parallel:u});var p=a.bind(this),g=u?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][g].push(p)},e.getHooks=function(r,i){return!this.hooks[i]||!this.hooks[i][r]?{series:[],parallel:[]}:this.hooks[i][r]},e.hasHooks=function(r,i){if(!this.hooks[i]||!this.hooks[i][r])return!1;var a=this.getHooks(r,i);return a?a.series.length>0||a.parallel.length>0:!1},e._runHooks=function(r,i,a,u){var p=this.getHooks(r,i);if(!p)return xa;var g=p.series.map(y=>()=>y(a,u));return vj(g).then(()=>Promise.all(p.parallel.map(y=>y(a,u))))},e._runHooksSync=function(r,i,a,u){if(this.hasHooks(r,i)){var p=this.getHooks(r,i);p&&p.series.forEach(g=>g(a,u))}},e.promiseWait=function(r){var i=new Promise(a=>{var u=setTimeout(()=>{this.timeouts.delete(u),a()},r);this.timeouts.add(u)});return i},e.close=async function(){return this.closed?vo:(Zu.delete(this),await Promise.all(this.onClose.map(r=>r())),this.closed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.close(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],Zc("postCloseRxCollection",this).then(()=>!0))))},e.remove=async function(){await this.close(),await Promise.all(this.onRemove.map(r=>r())),await y8(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.multiInstance,this.database.password,this.database.hashFunction)},dc(t,[{key:"insert$",get:function(){return this.$.pipe(Nr(n=>n.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(Nr(n=>n.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(Nr(n=>n.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])})();function xz(t){if(!eA){eA=!0;var e=Object.getPrototypeOf(t);b8.forEach(n=>{v8.map(r=>{var i=r+u5(n);e[i]=function(a,u){return this.addHook(r,n,a,u)}})})}}function _z(t,e){return t.incrementalModify(n=>e)}function Az(t,e,n){var r=t._docCache.getLatestDocumentDataIfExists(e);return r?Promise.resolve({doc:t._docCache.getCachedRxDocuments([r])[0],inserted:!1}):t.findOne(e).exec().then(i=>i?{doc:i,inserted:!1}:t.insert(n).then(a=>({doc:a,inserted:!0})))}async function Cz({database:t,name:e,schema:n,instanceCreationOptions:r={},migrationStrategies:i={},autoMigrate:a=!0,statics:u={},methods:p={},attachments:g={},options:y={},localDocuments:w=!1,cacheReplacementPolicy:S=f8,conflictHandler:_=K0}){var C={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:n.jsonSchema,options:r,multiInstance:t.multiInstance,password:t.password,devMode:pr.isDevMode()};Ls("preCreateRxStorageInstance",C);var N=await mz(t,C),R=new w8(t,e,n,N,r,i,p,g,y,S,u,_);try{await R.prepare(),Object.entries(u).forEach(([M,L])=>{Object.defineProperty(R,M,{get:()=>L.bind(R)})}),Ls("createRxCollection",{collection:R,creator:{name:e,schema:n,storageInstance:N,instanceCreationOptions:r,migrationStrategies:i,methods:p,attachments:g,options:y,cacheReplacementPolicy:S,localDocuments:w,statics:u}}),a&&R.schema.version!==0&&await R.migratePromise()}catch(M){throw Zu.delete(R),await N.close(),M}return R}var E8=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};E8.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Kb(this)},wrapCall:function(e){var n=this;this._qC++;var r;try{r=e()}catch(i){throw this.unlock(),i}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i})},requestIdlePromise:function(e){var n=this;e=e||{};var r,i=new Promise(function(p){return r=p}),a=function(){uv(n,i),r()};if(i._manRes=a,e.timeout){var u=setTimeout(function(){i._manRes()},e.timeout);i._timeoutObj=u}return this._iC.add(i),Kb(this),i},cancelIdlePromise:function(e){uv(this,e)},requestIdleCallback:function(e,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return e()}),r},cancelIdleCallback:function(e){var n=this._hPM.get(e);this.cancelIdlePromise(n)},clear:function(){var e=this;this._iC.forEach(function(n){return uv(e,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function Nz(t){if(t._iC.size!==0){var e=t._iC.values(),n=e.next().value;n._manRes(),setTimeout(function(){return Kb(t)},0)}}function uv(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var n=t._pHM.get(e);t._hPM.delete(n),t._pHM.delete(e)}t._iC.delete(e)}}function Kb(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}Nz(t),t._tryIR=!1},0)},0))}let Tz=class{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,S8()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,Oz(this)},0))}clear(){this.map.clear()}};function Oz(t){const e=S8()-t.ttl,n=t.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const i=r[0];if(r[1]<e)t.map.delete(i);else return}}function S8(){return Date.now()}var Gb=new Set,tA=new Map,T2=(function(){function t(n,r,i,a,u,p,g=!1,y={},w,S,_,C,N,R){this.idleQueue=new E8,this.rxdbVersion=p5,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onClose=[],this.closed=!1,this.collections={},this.states={},this.eventBulks$=new is,this.closePromise=null,this.observable$=this.eventBulks$.pipe(bo(M=>U5(M))),this.storageToken=vo,this.storageTokenDocument=vo,this.emittedEventBulkIds=new Tz(60*1e3),this.name=n,this.token=r,this.storage=i,this.instanceCreationOptions=a,this.password=u,this.multiInstance=p,this.eventReduce=g,this.options=y,this.internalStore=w,this.hashFunction=S,this.cleanupPolicy=_,this.allowSlowCount=C,this.reactivity=N,this.onClosed=R,this.name!=="pseudoInstance"&&(this.internalStore=w2(this.asRxDatabase,w,N2),this.storageTokenDocument=hz(this.asRxDatabase).catch(M=>this.startupErrors.push(M)),this.storageToken=this.storageTokenDocument.then(M=>M.data.token).catch(M=>this.startupErrors.push(M)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw Tt("DB14",{database:this.name});return this.reactivity},e.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},e.removeCollectionDoc=async function(r,i){var a=await Uf(this.internalStore,ru(H0(r,i),rc));if(!a)throw Tt("SNH",{name:r,schema:i});var u=Jd(a);u._deleted=!0,await this.internalStore.bulkWrite([{document:u,previous:a}],"rx-database-remove-collection")},e.addCollections=async function(r){var i={},a={},u=[],p={};await Promise.all(Object.entries(r).map(async([w,S])=>{var _=w,C=S.schema;i[_]=C;var N=Mj(C,this.hashFunction);if(a[_]=N,this.collections[w])throw Tt("DB3",{name:w});var R=H0(w,C),M={id:ru(R,rc),key:R,context:rc,data:{name:_,schemaHash:await N.hash,schema:N.jsonSchema,version:N.version,connectedStorages:[]},_deleted:!1,_meta:Bf(),_rev:Ga(),_attachments:{}};u.push({document:M});var L=Object.assign({},S,{name:_,schema:N,database:this}),k=Tr(S);k.database=this,k.name=w,Ls("preCreateRxCollection",k),L.conflictHandler=k.conflictHandler,p[_]=L}));var g=await this.internalStore.bulkWrite(u,"rx-database-add-collection");await Lz(this),await Promise.all(g.error.map(async w=>{if(w.status!==409)throw Tt("DB12",{database:this.name,writeError:w});var S=Ht(w.documentInDb),_=S.data.name,C=a[_];if(S.data.schemaHash!==await C.hash)throw Tt("DB6",{database:this.name,collection:_,previousSchemaHash:S.data.schemaHash,schemaHash:await C.hash,previousSchema:S.data.schema,schema:Ht(i[_])})}));var y={};return await Promise.all(Object.keys(r).map(async w=>{var S=p[w],_=await Cz(S);y[w]=_,this.collections[w]=_,this[w]||Object.defineProperty(this,w,{get:()=>this.collections[w]})})),y},e.lockedRun=function(r){return this.idleQueue.wrapCall(r)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(r){throw Cr("json-dump")},e.addState=function(r){throw Cr("state")},e.importJSON=function(r){throw Cr("json-dump")},e.backup=function(r){throw Cr("backup")},e.leaderElector=function(){throw Cr("leader-election")},e.isLeader=function(){throw Cr("leader-election")},e.waitForLeadership=function(){throw Cr("leader-election")},e.migrationStates=function(){throw Cr("migration-schema")},e.close=function(){if(this.closePromise)return this.closePromise;var{promise:r,resolve:i}=x8(),a=u=>{this.onClosed&&this.onClosed(),this.closed=!0,i(u)};return this.closePromise=r,(async()=>{if(await Zc("preCloseRxDatabase",this),this.eventBulks$.complete(),this._subs.map(u=>u.unsubscribe()),this.name==="pseudoInstance"){a(!1);return}return this.requestIdlePromise().then(()=>Promise.all(this.onClose.map(u=>u()))).then(()=>Promise.all(Object.keys(this.collections).map(u=>this.collections[u]).map(u=>u.close()))).then(()=>this.internalStore.close()).then(()=>a(!0))})(),r},e.remove=function(){return this.close().then(()=>Mz(this.name,this.storage,this.multiInstance,this.password))},dc(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])})();function Rz(t,e){if(Gb.has(_8(t,e)))throw Tt("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function x8(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function _8(t,e){return e.name+"|"+t}async function A8(t,e,n,r,i,a){var u=await e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:$B,schema:N2,options:r,multiInstance:i,password:a,devMode:pr.isDevMode()});return u}function Iz({storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i=!0,eventReduce:a=!0,ignoreDuplicate:u=!1,options:p={},cleanupPolicy:g,closeDuplicates:y=!1,allowSlowCount:w=!1,localDocuments:S=!1,hashFunction:_=l5,reactivity:C}){Ls("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i,eventReduce:a,ignoreDuplicate:u,options:p,localDocuments:S});var N=_8(n,t),R=tA.get(N)||new Set,M=x8(),L=Array.from(R),k=()=>{R.delete(M.promise),Gb.delete(N)};return R.add(M.promise),tA.set(N,R),(async()=>{if(y&&await Promise.all(L.map(F=>F.catch(()=>null).then(B=>B&&B.close()))),u){if(!pr.isDevMode())throw Tt("DB9",{database:n})}else Rz(n,t);Gb.add(N);var j=Vd(10),$=await A8(j,t,n,e,i,r),U=new T2(n,j,t,e,r,i,a,p,$,_,g,w,C,k);return await Zc("createRxDatabase",{database:U,creator:{storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i,eventReduce:a,ignoreDuplicate:u,options:p,localDocuments:S}}),U})().then(j=>{M.resolve(j)}).catch(j=>{M.reject(j),k()}),M.promise}async function Mz(t,e,n=!0,r){var i=Vd(10),a=await A8(i,e,t,{},n,r),u=await p8(a),p=new Set;u.forEach(y=>p.add(y.data.name));var g=Array.from(p);return await Promise.all(g.map(y=>y8(e,a,i,t,y,n,r))),await Zc("postRemoveRxDatabase",{databaseName:t,storage:e}),await a.remove(),g}function Dz(t){return t instanceof T2}async function Lz(t){if(await t.storageToken,t.startupErrors[0])throw t.startupErrors[0]}var kz={RxSchema:y5.prototype,RxDocument:D1,RxQuery:d8.prototype,RxCollection:w8.prototype,RxDatabase:T2.prototype},fv=new Set,nA=new Set;function L1(t){if(Ls("preAddRxPlugin",{plugin:t,plugins:fv}),!fv.has(t)){{if(nA.has(t.name))throw Tt("PL3",{name:t.name,plugin:t});fv.add(t),nA.add(t.name)}if(!t.rxdb)throw Ea("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,n])=>n(kz[e])),t.overwritable&&Object.assign(pr,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,n])=>{n.after&&md[e].push(n.after),n.before&&md[e].unshift(n.before)})}}async function G0(t,e){var n=pc(t.input.metaInstance.schema,{isCheckpoint:"1",itemId:e}),r=await t.input.metaInstance.findDocumentsById([n],!1),i=r[0];if(t.lastCheckpointDoc[e]=i,i)return i.checkpointData}async function Y0(t,e,n){t.checkpointQueue=t.checkpointQueue.then(async()=>{var r=t.lastCheckpointDoc[e];if(n&&!t.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(n))){var i={id:"",isCheckpoint:"1",itemId:e,_deleted:!1,_attachments:{},checkpointData:n,_meta:Bf(),_rev:Ga()};for(i.id=pc(t.input.metaInstance.schema,i);!t.events.canceled.getValue();){if(r&&(i.checkpointData=xd([r.checkpointData,i.checkpointData])),i._meta.lwt=ea(),i._rev=rl(await t.checkpointKey,r),t.events.canceled.getValue())return;var a=[{previous:r,document:i}],u=await t.input.metaInstance.bulkWrite(a,"replication-set-checkpoint"),p=Oa(t.primaryPath,a,u)[0];if(p){t.lastCheckpointDoc[e]=p;return}else{var g=u.error[0];if(g.status!==409)throw g;r=Ht(g.documentInDb),i._rev=rl(await t.checkpointKey,r)}}}}),await t.checkpointQueue}async function jz(t){var e=await t.hashFunction([t.identifier,t.forkInstance.databaseName,t.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+e}function rA(t,e,n,r,i){var a=Object.assign({},r,{_attachments:e&&r._attachments?r._attachments:{},_meta:n?r._meta:Object.assign({},i?i._meta:{},{lwt:ea()}),_rev:n?r._rev:Ga()});return a._rev||(a._rev=rl(t,i)),a}function Yl(t,e,n){var r=Tr(t);return e||delete r._attachments,n||(delete r._meta,delete r._rev),r}function Yb(t,e){return t.hasAttachments?e.map(n=>{var r=ys(n.document);return r.docData=uo(r.docData),{document:r,previous:n.previous}}):e}function Wb(t){for(;;)if(t.underlyingPersistentStorage)t=t.underlyingPersistentStorage;else return t}var C0="RxReplicationProtocolMetaData";function Xb(t,e){var n=_j(t),r={title:C0,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:t.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:n+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:n>4?n:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:t.properties},isResolvedConflict:{type:"string"}},keyCompression:t.keyCompression,required:["id","isCheckpoint","itemId"]};e&&(r.encrypted=["docData"]);var i=N1(r);return i}function C8(t,e){return t.input.metaInstance.findDocumentsById(e.map(n=>{var r=pc(t.input.metaInstance.schema,{itemId:n,isCheckpoint:"0"});return r}),!0).then(n=>{var r={};return Object.values(n).forEach(i=>{r[i.itemId]={docData:i.docData,metaDocument:i}}),r})}async function W0(t,e,n,r){var i=e[t.primaryPath],a=n?Jd(n):{id:"",isCheckpoint:"0",itemId:i,docData:e,_attachments:{},_deleted:!1,_rev:Ga(),_meta:{lwt:0}};a.docData=e,r&&(a.isResolvedConflict=r),a._meta.lwt=ea(),a.id=pc(t.input.metaInstance.schema,a),a._rev=rl(await t.checkpointKey,n);var u={previous:n,document:a};return u}async function Pz(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.downstream){var e=await G0(t,"down");e||await Y0(t,"down",t.input.initialCheckpoint.downstream)}var n=await t.input.hashFunction(t.input.identifier),r=t.input.replicationHandler,i=0,a=[];function u(N){t.stats.down.addNewTask=t.stats.down.addNewTask+1;var R={time:i++,task:N};a.push(R),t.streamQueue.down=t.streamQueue.down.then(()=>{for(var M=[];a.length>0;){t.events.active.down.next(!0);var L=Ht(a.shift());if(!(L.time<g)){if(L.task==="RESYNC")if(M.length===0){M.push(L.task);break}else break;M.push(L.task)}}if(M.length!==0)return M[0]==="RESYNC"?y():w(M)}).then(()=>{t.events.active.down.next(!1),!t.firstSyncDone.down.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.down.next(!0)})}if(u("RESYNC"),!t.events.canceled.getValue()){var p=r.masterChangeStream$.pipe(bo(async N=>(await Hc(t.events.active.up.pipe(Nr(R=>!R))),N))).subscribe(N=>{t.stats.down.masterChangeStreamEmit=t.stats.down.masterChangeStreamEmit+1,u(N)});Hc(t.events.canceled.pipe(Nr(N=>!!N))).then(()=>p.unsubscribe())}var g=-1;async function y(){if(t.stats.down.downstreamResyncOnce=t.stats.down.downstreamResyncOnce+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>G0(t,"down"));for(var N=await t.checkpointQueue,R=[];!t.events.canceled.getValue();){g=i++;var M=await r.masterChangesSince(N,t.input.pullBatchSize);if(M.documents.length===0||(N=xd([N,M.checkpoint]),R.push(C(M.documents,N)),M.documents.length<t.input.pullBatchSize))break}await Promise.all(R)}}function w(N){t.stats.down.downstreamProcessChanges=t.stats.down.downstreamProcessChanges+1;var R=[],M=null;return N.forEach(L=>{if(L==="RESYNC")throw new Error("SNH");Qc(R,L.documents),M=xd([M,L.checkpoint])}),C(R,Ht(M))}var S=xa,_={docs:{}};function C(N,R){var M=t.primaryPath;return t.stats.down.persistFromMaster=t.stats.down.persistFromMaster+1,N.forEach(L=>{var k=L[M];_.docs[k]=L}),_.checkpoint=R,S=S.then(()=>{var L=_.docs;_.docs={};var k=_.checkpoint,j=Object.keys(L);if(t.events.canceled.getValue()||j.length===0)return xa;var $=[],U={},F={},B=[];return Promise.all([t.input.forkInstance.findDocumentsById(j,!0),C8(t,j)]).then(([Z,le])=>{var Ne=new Map;return Z.forEach(G=>Ne.set(G[M],G)),Promise.all(j.map(async G=>{var ce=Ne.get(G),se=ce?Yl(ce,t.hasAttachments,!1):void 0,Ee=L[G],ue=le[G];ue&&ce&&ue.metaDocument.isResolvedConflict===ce._rev&&await t.streamQueue.up;var ee=!ue||!se?!1:t.input.conflictHandler.isEqual(ue.docData,se,"downstream-check-if-equal-0");if(!ee&&ue&&ue.docData._rev&&ce&&ce._meta[t.input.identifier]&&ac(ce._rev)===ce._meta[t.input.identifier]&&(ee=!0),ce&&ue&&ee===!1||ce&&!ue)return xa;var de=se?t.input.conflictHandler.isEqual(Ee,se,"downstream-check-if-equal-1"):!1;if(se&&de)return(!ue||ee===!1)&&B.push(await W0(t,se,ue?ue.metaDocument:void 0)),xa;var we=Object.assign({},Ee,ce?{_meta:Tr(ce._meta),_attachments:t.hasAttachments&&Ee._attachments?Ee._attachments:{},_rev:Ga()}:{_meta:{lwt:ea()},_rev:Ga(),_attachments:t.hasAttachments&&Ee._attachments?Ee._attachments:{}});if(Ee._rev){var Oe=ce?ac(ce._rev)+1:1;we._meta[t.input.identifier]=Oe,t.input.keepMeta&&(we._rev=Ee._rev)}t.input.keepMeta&&Ee._meta&&(we._meta=Ee._meta);var pe={previous:ce,document:we};pe.document._rev=pe.document._rev?pe.document._rev:rl(n,pe.previous),$.push(pe),U[G]=pe,F[G]=await W0(t,Ee,ue?ue.metaDocument:void 0)}))}).then(async()=>{if($.length>0)return t.input.forkInstance.bulkWrite($,await t.downstreamBulkWriteFlag).then(Z=>{var le=Oa(t.primaryPath,$,Z);le.forEach(G=>{var ce=G[M];t.events.processed.down.next(U[ce]),B.push(F[ce])});var Ne;if(Z.error.forEach(G=>{if(G.status!==409){var ce=Tt("RC_PULL",{writeError:G});t.events.error.next(ce),Ne=ce}}),Ne)throw Ne})}).then(()=>{if(B.length>0)return t.input.metaInstance.bulkWrite(Yb(t,B),"replication-down-write-meta").then(Z=>{Z.error.forEach(le=>{t.events.error.next(Tt("RC_PULL",{id:le.documentId,writeError:le}))})})}).then(()=>{Y0(t,"down",k)})}).catch(L=>t.events.error.next(L)),S}}async function Bz(t,e,n){var r=t.input.conflictHandler,i=r.isEqual(e.realMasterState,e.newDocumentState,"replication-resolve-conflict");if(!i){var a=await r.resolve(e,"replication-resolve-conflict"),u=Object.assign({},a,{_meta:Tr(n._meta),_rev:Ga(),_attachments:Tr(n._attachments)});return u._meta.lwt=ea(),u._rev=rl(await t.checkpointKey,n),u}}async function Qb(t,e,n,r){if(!n._attachments||r&&!r._attachments)throw new Error("_attachments missing");var i=n[t],a=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return await Promise.all(Object.entries(n._attachments).map(async([u,p])=>{if((!a.has(u)||r&&Ht(r._attachments)[u].digest!==p.digest)&&!p.data){var g=await e.getAttachmentData(i,u,p.digest);p.data=g}})),n}async function Uz(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.upstream){var e=await G0(t,"up");e||await Y0(t,"up",t.input.initialCheckpoint.upstream)}var n=t.input.replicationHandler;t.streamQueue.up=t.streamQueue.up.then(()=>w().then(()=>S()));var r=0,i=-1,a=[],u=vo,p={docs:{}},g=t.input.forkInstance.changeStream().subscribe(C=>{if(!t.events.paused.getValue())return t.stats.up.forkChangeStreamEmit=t.stats.up.forkChangeStreamEmit+1,a.push({task:C,time:r++}),t.events.active.up.getValue()||t.events.active.up.next(!0),t.input.waitBeforePersist?t.input.waitBeforePersist().then(()=>S()):S()}),y=n.masterChangeStream$.pipe(Nr(C=>C==="RESYNC")).subscribe(()=>{a.push({task:"RESYNC",time:r++}),S()});Hc(t.events.canceled.pipe(Nr(C=>!!C))).then(()=>{g.unsubscribe(),y.unsubscribe()});async function w(){if(t.stats.up.upstreamInitialSync=t.stats.up.upstreamInitialSync+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>G0(t,"up"));for(var C=await t.checkpointQueue,N=new Set,R=async function(){i=r++,N.size>3&&await Promise.race(Array.from(N));var k=await n8(t.input.forkInstance,t.input.pushBatchSize,C);if(k.documents.length===0)return 1;C=xd([C,k.checkpoint]);var j=_(k.documents,Ht(C));N.add(j),j.catch().then(()=>N.delete(j))};!t.events.canceled.getValue()&&!await R(););var M=await Promise.all(N),L=M.find(k=>!!k);L?await w():!t.firstSyncDone.up.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.up.next(!0)}}function S(){if(t.events.canceled.getValue()||a.length===0){t.events.active.up.next(!1);return}t.stats.up.processTasks=t.stats.up.processTasks+1,t.events.active.up.next(!0),t.streamQueue.up=t.streamQueue.up.then(async()=>{for(var C=[],N;a.length>0;){var R=Ht(a.shift());if(!(R.time<i)){if(R.task==="RESYNC"){t.events.active.up.next(!1),await w();return}R.task.context!==await t.downstreamBulkWriteFlag&&Qc(C,R.task.events.map(M=>M.documentData)),N=xd([N,R.task.checkpoint])}}if(await _(C,N),a.length===0)t.events.active.up.next(!1);else return S()})}function _(C,N){return t.stats.up.persistToMaster=t.stats.up.persistToMaster+1,C.forEach(R=>{var M=R[t.primaryPath];p.docs[M]=R}),p.checkpoint=N,u=u.then(async()=>{if(t.events.canceled.getValue())return!1;var R=p.docs;p.docs={};var M=p.checkpoint,L=Object.keys(R);function k(){return Y0(t,"up",M)}if(L.length===0)return k(),!1;var j=await C8(t,L),$={},U=[],F={},B={};if(await Promise.all(L.map(async pe=>{var K=R[pe];B[pe]=K;var oe=Yl(K,t.hasAttachments,!!t.input.keepMeta),ae=j[pe];ae&&ae.metaDocument.isResolvedConflict!==K._rev&&t.input.conflictHandler.isEqual(ae.docData,oe,"upstream-check-if-equal")||ae&&ae.docData._rev&&ac(K._rev)===K._meta[t.input.identifier]||(U.push(pe),$[pe]={assumedMasterState:ae?ae.docData:void 0,newDocumentState:oe},F[pe]=await W0(t,oe,ae?ae.metaDocument:void 0))})),U.length===0)return k(),!1;var Z=Object.values($),le=new Set,Ne={},G=Jk(Z,t.input.pushBatchSize);await Promise.all(G.map(async pe=>{t.hasAttachments&&await Promise.all(pe.map(async oe=>{oe.newDocumentState=await Qb(t.primaryPath,t.input.forkInstance,ys(oe.newDocumentState),oe.assumedMasterState)}));var K=await n.masterWrite(pe);K.forEach(oe=>{var ae=oe[t.primaryPath];le.add(ae),Ne[ae]=oe})}));var ce=[];if(U.forEach(pe=>{le.has(pe)||(t.events.processed.up.next($[pe]),ce.push(F[pe]))}),t.events.canceled.getValue())return!1;ce.length>0&&await t.input.metaInstance.bulkWrite(Yb(t,ce),"replication-up-write-meta");var se=!1;if(le.size>0){t.stats.up.persistToMasterHadConflicts=t.stats.up.persistToMasterHadConflicts+1;var Ee=[],ue={};if(await Promise.all(Object.entries(Ne).map(([pe,K])=>{var oe=$[pe],ae={newDocumentState:oe.newDocumentState,assumedMasterState:oe.assumedMasterState,realMasterState:K};return Bz(t,ae,B[pe]).then(async Y=>{if(Y){t.events.resolvedConflicts.next({input:ae,output:Y}),Ee.push({previous:B[pe],document:Y});var ie=j[pe];ue[pe]=await W0(t,Ht(K),ie?ie.metaDocument:void 0,Y._rev)}})})),Ee.length>0){se=!0,t.stats.up.persistToMasterConflictWrites=t.stats.up.persistToMasterConflictWrites+1;var ee=await t.input.forkInstance.bulkWrite(Ee,"replication-up-write-conflict"),de;if(ee.error.forEach(pe=>{if(pe.status!==409){var K=Tt("RC_PUSH",{writeError:pe});t.events.error.next(K),de=K}}),de)throw de;var we=[],Oe=Oa(t.primaryPath,Ee,ee);Oe.forEach(pe=>{var K=pe[t.primaryPath];we.push(ue[K])}),we.length>0&&await t.input.metaInstance.bulkWrite(Yb(t,we),"replication-up-write-conflict-meta")}}return k(),se}).catch(R=>(t.events.error.next(R),!1)),u}}function N8(t){t=Tr(t),t.forkInstance=Wb(t.forkInstance),t.metaInstance=Wb(t.metaInstance);var e=jz(t),n={primaryPath:ks(t.forkInstance.schema.primaryKey),hasAttachments:!!t.forkInstance.schema.attachments,input:t,checkpointKey:e,downstreamBulkWriteFlag:e.then(r=>"replication-downstream-"+r),events:{canceled:new co(!1),paused:new co(!1),active:{down:new co(!0),up:new co(!0)},processed:{down:new is,up:new is},resolvedConflicts:new is,error:new is},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new co(!1),up:new co(!1)},streamQueue:{down:xa,up:xa},checkpointQueue:xa,lastCheckpointDoc:{}};return Pz(n),Uz(n),n}function N0(t){return Hc(P5([t.firstSyncDone.down.pipe(Nr(e=>!!e)),t.firstSyncDone.up.pipe(Nr(e=>!!e))])).then(()=>{})}function Zb(t){return Promise.all([t.streamQueue.up,t.streamQueue.down,t.checkpointQueue])}function zz(t,e,n,r=!1){t=Wb(t);var i=!!t.schema.attachments,a=ks(t.schema.primaryKey),u={masterChangeStream$:t.changeStream().pipe(bo(async p=>{var g={checkpoint:p.checkpoint,documents:await Promise.all(p.events.map(async y=>{var w=Yl(y.documentData,i,r);return i&&(w=await Qb(a,t,ys(w),void 0)),w}))};return g})),masterChangesSince(p,g){return n8(t,g,p).then(async y=>({checkpoint:y.documents.length>0?y.checkpoint:p,documents:await Promise.all(y.documents.map(async w=>{var S=Yl(w,i,r);return i&&(S=await Qb(a,t,ys(S),void 0)),S}))}))},async masterWrite(p){var g={};p.forEach(R=>{var M=R.newDocumentState[a];g[M]=R});var y=Object.keys(g),w=await t.findDocumentsById(y,!0),S=new Map;w.forEach(R=>S.set(R[a],R));var _=[],C=[];if(await Promise.all(Object.entries(g).map(([R,M])=>{var L=S.get(R);L?L&&!M.assumedMasterState?_.push(Yl(L,i,r)):e.isEqual(Yl(L,i,r),Ht(M.assumedMasterState),"rxStorageInstanceToReplicationHandler-masterWrite")===!0?C.push({previous:L,document:rA(n,i,r,M.newDocumentState,L)}):_.push(Yl(L,i,r)):C.push({document:rA(n,i,r,M.newDocumentState)})})),C.length>0){var N=await t.bulkWrite(C,"replication-master-write");N.error.forEach(R=>{if(R.status!==409)throw Tt("SNH",{name:"non conflict error",error:R});_.push(Yl(Ht(R.documentInDb),i,r))})}return _}};return u}async function T8(t){t.events.canceled.next(!0),t.events.active.up.complete(),t.events.active.down.complete(),t.events.processed.up.complete(),t.events.processed.down.complete(),t.events.resolvedConflicts.complete(),t.events.canceled.complete(),await t.checkpointQueue}function Fz(t){return t&&typeof t.then=="function"}Promise.resolve(!1);var qz=Promise.resolve(!0),nl=Promise.resolve();function qc(t,e){return t||(t=0),new Promise(function(n){return setTimeout(function(){return n(e)},t)})}function $z(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function ep(){return Math.random().toString(36).substring(2)}var hv=0;function tp(){var t=Date.now()*1e3;return t<=hv&&(t=hv+1),hv=t,t}function Vz(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var Hz=tp,Kz="native";function Gz(t){var e={time:tp(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(n){e.messagesCallback&&e.messagesCallback(n.data)},e}function Yz(t){t.bc.close(),t.subFns=[]}function Wz(t,e){try{return t.bc.postMessage(e,!1),nl}catch(n){return Promise.reject(n)}}function Xz(t,e){t.messagesCallback=e}function Qz(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function Zz(){return 150}var Jz={create:Gz,close:Yz,onMessage:Xz,postMessage:Wz,canBeUsed:Qz,type:Kz,averageResponseTime:Zz,microSeconds:Hz};class O8{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){const n=this.map.get(e);return typeof n>"u"?!1:n<Jb()-this.ttl?(this.map.delete(e),!1):!0}add(e){this.map.delete(e),this.map.set(e,Jb()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,eF(this)},0))}clear(){this.map.clear()}}function eF(t){const e=Jb()-t.ttl,n=t.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)break;const i=r[0];if(r[1]<e)t.map.delete(i);else break}}function Jb(){return Date.now()}function O2(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var tF=tp,nF="pubkey.broadcast-channel-0-",sl="messages",k1={durability:"relaxed"},rF="idb";function R8(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function R2(t){t.commit&&t.commit()}function iF(t){var e=R8(),n=nF+t,r=e.open(n);return r.onupgradeneeded=function(i){var a=i.target.result;a.createObjectStore(sl,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,a){r.onerror=function(u){return a(u)},r.onsuccess=function(){i(r.result)}})}function sF(t,e,n){var r=Date.now(),i={uuid:e,time:r,data:n},a=t.transaction([sl],"readwrite",k1);return new Promise(function(u,p){a.oncomplete=function(){return u()},a.onerror=function(y){return p(y)};var g=a.objectStore(sl);g.add(i),R2(a)})}function aF(t,e){var n=t.transaction(sl,"readonly",k1),r=n.objectStore(sl),i=[],a=IDBKeyRange.bound(e+1,1/0);if(r.getAll){var u=r.getAll(a);return new Promise(function(g,y){u.onerror=function(w){return y(w)},u.onsuccess=function(w){g(w.target.result)}})}function p(){try{return a=IDBKeyRange.bound(e+1,1/0),r.openCursor(a)}catch{return r.openCursor()}}return new Promise(function(g,y){var w=p();w.onerror=function(S){return y(S)},w.onsuccess=function(S){var _=S.target.result;_?_.value.id<e+1?_.continue(e+1):(i.push(_.value),_.continue()):(R2(n),g(i))}})}function oF(t,e){if(t.closed)return Promise.resolve([]);var n=t.db.transaction(sl,"readwrite",k1),r=n.objectStore(sl);return Promise.all(e.map(function(i){var a=r.delete(i);return new Promise(function(u){a.onsuccess=function(){return u()}})}))}function lF(t,e){var n=Date.now()-e,r=t.transaction(sl,"readonly",k1),i=r.objectStore(sl),a=[];return new Promise(function(u){i.openCursor().onsuccess=function(p){var g=p.target.result;if(g){var y=g.value;y.time<n?(a.push(y),g.continue()):(R2(r),u(a))}else u(a)}})}function cF(t){return lF(t.db,t.options.idb.ttl).then(function(e){return oF(t,e.map(function(n){return n.id}))})}function uF(t,e){return e=O2(e),iF(t).then(function(n){var r={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:ep(),eMIs:new O8(e.idb.ttl*2),writeBlockPromise:nl,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,e.idb.onclose&&e.idb.onclose()},I8(r),r})}function I8(t){t.closed||M8(t).then(function(){return qc(t.options.idb.fallbackInterval)}).then(function(){return I8(t)})}function fF(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function M8(t){return t.closed||!t.messagesCallback?nl:aF(t.db,t.lastCursorId).then(function(e){var n=e.filter(function(r){return!!r}).map(function(r){return r.id>t.lastCursorId&&(t.lastCursorId=r.id),r}).filter(function(r){return fF(r,t)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){t.messagesCallback&&(t.eMIs.add(r.id),t.messagesCallback(r.data))}),nl})}function hF(t){t.closed=!0,t.db.close()}function dF(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return sF(t.db,t.uuid,e)}).then(function(){$z(0,10)===0&&cF(t)}),t.writeBlockPromise}function pF(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e,M8(t)}function mF(){return!!R8()}function gF(t){return t.idb.fallbackInterval*2}var yF={create:uF,close:hF,onMessage:pF,postMessage:dF,canBeUsed:mF,type:rF,averageResponseTime:gF,microSeconds:tF},vF=tp,bF="pubkey.broadcastChannel-",wF="localstorage";function D8(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function L8(t){return bF+t}function EF(t,e){return new Promise(function(n){qc().then(function(){var r=L8(t.channelName),i={token:ep(),time:Date.now(),data:e,uuid:t.uuid},a=JSON.stringify(i);D8().setItem(r,a);var u=document.createEvent("Event");u.initEvent("storage",!0,!0),u.key=r,u.newValue=a,window.dispatchEvent(u),n()})})}function SF(t,e){var n=L8(t),r=function(a){a.key===n&&e(JSON.parse(a.newValue))};return window.addEventListener("storage",r),r}function xF(t){window.removeEventListener("storage",t)}function _F(t,e){if(e=O2(e),!k8())throw new Error("BroadcastChannel: localstorage cannot be used");var n=ep(),r=new O8(e.localstorage.removeTimeout),i={channelName:t,uuid:n,eMIs:r};return i.listener=SF(t,function(a){i.messagesCallback&&a.uuid!==n&&(!a.token||r.has(a.token)||a.data.time&&a.data.time<i.messagesCallbackTime||(r.add(a.token),i.messagesCallback(a.data)))}),i}function AF(t){xF(t.listener)}function CF(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e}function k8(){var t=D8();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function NF(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var TF={create:_F,close:AF,onMessage:CF,postMessage:EF,canBeUsed:k8,type:wF,averageResponseTime:NF,microSeconds:vF},j8=tp,OF="simulate",I2=new Set;function RF(t){var e={time:j8(),name:t,messagesCallback:null};return I2.add(e),e}function IF(t){I2.delete(t)}var P8=5;function MF(t,e){return new Promise(function(n){return setTimeout(function(){var r=Array.from(I2);r.forEach(function(i){i.name===t.name&&i!==t&&i.messagesCallback&&i.time<e.time&&i.messagesCallback(e)}),n()},P8)})}function DF(t,e){t.messagesCallback=e}function LF(){return!0}function kF(){return P8}var jF={create:RF,close:IF,onMessage:DF,postMessage:MF,canBeUsed:LF,type:OF,averageResponseTime:kF,microSeconds:j8},iA=[Jz,yF,TF];function PF(t){var e=[].concat(t.methods,iA).filter(Boolean);if(t.type){if(t.type==="simulate")return jF;var n=e.find(function(i){return i.type===t.type});if(n)return n;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(i){return i.type!=="idb"}));var r=e.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(iA.map(function(i){return i.type})))}var B8=new Set,BF=0,j1=function(e,n){this.id=BF++,B8.add(this),this.name=e,this.options=O2(n),this.method=PF(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,UF(this)};j1._pubkey=!0;j1.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return sA(this,"message",e)},postInternal:function(e){return sA(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),n={time:e,fn:t};oA(this,"message",this._onML),t&&typeof t=="function"?(this._onML=n,aA(this,"message",n)):this._onML=null},addEventListener:function(e,n){var r=this.method.microSeconds(),i={time:r,fn:n};aA(this,e,i)},removeEventListener:function(e,n){var r=this._addEL[e].find(function(i){return i.fn===n});oA(this,e,r)},close:function(){var e=this;if(!this.closed){B8.delete(this),this.closed=!0;var n=this._prepP?this._prepP:nl;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(r){return r()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function sA(t,e,n){var r=t.method.microSeconds(),i={time:r,type:e,data:n},a=t._prepP?t._prepP:nl;return a.then(function(){var u=t.method.postMessage(t._state,i);return t._uMP.add(u),u.catch().then(function(){return t._uMP.delete(u)}),u})}function UF(t){var e=t.method.create(t.name,t.options);Fz(e)?(t._prepP=e,e.then(function(n){t._state=n})):t._state=e}function U8(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function aA(t,e,n){t._addEL[e].push(n),zF(t)}function oA(t,e,n){t._addEL[e]=t._addEL[e].filter(function(r){return r!==n}),FF(t)}function zF(t){if(!t._iL&&U8(t)){var e=function(i){t._addEL[i.type].forEach(function(a){i.time>=a.time&&a.fn(i.data)})},n=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,n)}):(t._iL=!0,t.method.onMessage(t._state,e,n))}}function FF(t){if(t._iL&&!U8(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}function qF(t){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var e=self.close.bind(self);self.close=function(){return t(),e()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){t()},!0),window.addEventListener("unload",function(){t()},!0)}}function $F(t){process.on("exit",function(){return t()}),process.on("beforeExit",function(){return t().then(function(){return process.exit()})}),process.on("SIGINT",function(){return t().then(function(){return process.exit()})}),process.on("uncaughtException",function(e){return t().then(function(){console.trace(e),process.exit(101)})})}var VF=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",HF=VF?$F:qF,Xh=new Set,lA=!1;function KF(){lA||(lA=!0,HF(YF))}function GF(t){if(KF(),typeof t!="function")throw new Error("Listener is no function");Xh.add(t);var e={remove:function(){return Xh.delete(t)},run:function(){return Xh.delete(t),t()}};return e}function YF(){var t=[];return Xh.forEach(function(e){t.push(e()),Xh.delete(e)}),Promise.all(t)}function Yc(t,e){var n={context:"leader",action:e,token:t.token};return t.broadcastChannel.postInternal(n)}function z8(t){t.isLeader=!0,t._hasLeader=!0;var e=GF(function(){return t.die()});t._unl.push(e);var n=function(i){i.context==="leader"&&i.action==="apply"&&Yc(t,"tell"),i.context==="leader"&&i.action==="tell"&&!t._dpLC&&(t._dpLC=!0,t._dpL(),Yc(t,"tell"))};return t.broadcastChannel.addEventListener("internal",n),t._lstns.push(n),Yc(t,"tell")}var F8=function(e,n){var r=this;this.broadcastChannel=e,e._befC.push(function(){return r.die()}),this._options=n,this.isLeader=!1,this.isDead=!1,this.token=ep(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};F8.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then(function(n){var r=n.held?n.held.filter(function(i){return i.name===e.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var n=new Promise(function(r,i){e._wKMC.res=r,e._wKMC.rej=i});this._wLMP=new Promise(function(r,i){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},function(){return e._wKMC.c=void 0,z8(e),r(),n}).catch(function(a){e._wKMC.rej&&e._wKMC.rej(a),i(a)})})}return this._wLMP},set onduplicate(t){},die:function(){var e=this;return this._lstns.forEach(function(n){return e.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Yc(this,"death")}};var q8=function(e,n){var r=this;this.broadcastChannel=e,this._options=n,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=ep(),this._aplQ=nl,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var i=function(u){u.context==="leader"&&(u.action==="death"&&(r._hasLeader=!1),u.action==="tell"&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",i),this._lstns.push(i)};q8.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var n=this;if(this.isLeader)return qc(0,!0);if(this.isDead)return qc(0,!1);if(this._aplQC>1)return this._aplQ;var r=function(){if(n.isLeader)return qz;var a=!1,u,p=new Promise(function(w){u=function(){a=!0,w()}}),g=function(S){S.context==="leader"&&S.token!=n.token&&(S.action==="apply"&&S.token>n.token&&u(),S.action==="tell"&&(u(),n._hasLeader=!0))};n.broadcastChannel.addEventListener("internal",g);var y=e?n._options.responseTime*4:n._options.responseTime;return Yc(n,"apply").then(function(){return Promise.race([qc(y),p.then(function(){return Promise.reject(new Error)})])}).then(function(){return Yc(n,"apply")}).then(function(){return Promise.race([qc(y),p.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return n.broadcastChannel.removeEventListener("internal",g),a?!1:z8(n).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return r()}).then(function(){n._aplQC=n._aplQC-1}),this._aplQ.then(function(){return n.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=WF(this)),this._aLP},set onduplicate(t){this._dpL=t},die:function(){var e=this;return this._lstns.forEach(function(n){return e.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Yc(this,"death")}};function WF(t){return t.isLeader?nl:new Promise(function(e){var n=!1;function r(){n||(n=!0,t.broadcastChannel.removeEventListener("internal",a),e(!0))}t.applyOnce().then(function(){t.isLeader&&r()});var i=function(){return qc(t._options.fallbackInterval).then(function(){if(!(t.isDead||n))if(t.isLeader)r();else return t.applyOnce(!0).then(function(){t.isLeader?r():i()})})};i();var a=function(p){p.context==="leader"&&p.action==="death"&&(t._hasLeader=!1,t.applyOnce().then(function(){t.isLeader&&r()}))};t.broadcastChannel.addEventListener("internal",a),t._lstns.push(a)})}function XF(t,e){return t||(t={}),t=JSON.parse(JSON.stringify(t)),t.fallbackInterval||(t.fallbackInterval=3e3),t.responseTime||(t.responseTime=e.method.averageResponseTime(e.options)),t}function $8(t,e){if(t._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");e=XF(e,t);var n=Vz()?new F8(t,e):new q8(t,e);return t._befC.push(function(){return n.die()}),t._leaderElector=n,n}var X0=new Map;function V8(t,e,n,r){var i=X0.get(e);return i||(i={bc:new j1(["RxDB:",t,n].join("|")),refs:new Set},X0.set(e,i)),i.refs.add(r),i.bc}function ew(t,e){var n=X0.get(t);if(n&&(n.refs.delete(e),n.refs.size===0))return X0.delete(t),n.bc.close()}function QF(t,e,n,r){if(e.multiInstance){var i=V8(t,e.databaseInstanceToken,n.databaseName,n),a=new is,u=_=>{_.storageName===t&&_.databaseName===e.databaseName&&_.collectionName===e.collectionName&&_.version===e.schema.version&&a.next(_.eventBulk)};i.addEventListener("message",u);var p=n.changeStream(),g=!1,y=p.subscribe(_=>{g||i.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:_})});n.changeStream=function(){return a.asObservable().pipe(AP(p))};var w=n.close.bind(n);n.close=async function(){return g=!0,y.unsubscribe(),i.removeEventListener("message",u),await ew(e.databaseInstanceToken,n),w()};var S=n.remove.bind(n);n.remove=async function(){return g=!0,y.unsubscribe(),i.removeEventListener("message",u),await ew(e.databaseInstanceToken,n),S()}}}var ZF=new Map;function JF(t,e){var n=vs(ZF,e,()=>new Map);function r(i){return vs(n,JSON.stringify(i),()=>t(i))}return i=>Object.assign({},i.storage,{name:"validate-"+e+"-"+i.storage.name,async createStorageInstance(a){var u=await i.storage.createStorageInstance(a),p=ks(a.schema.primaryKey),g;yj(()=>g=r(a.schema));var y=u.bulkWrite.bind(u);return u.bulkWrite=(w,S)=>{g||(g=r(a.schema));var _=[],C=[];w.forEach(R=>{var M=R.document[p],L=g(R.document);L.length>0?_.push({status:422,isError:!0,documentId:M,validationErrors:L,schema:u.schema,writeRow:R}):C.push(R)});var N=C.length>0?y(C,S):Promise.resolve({error:[],success:[]});return N.then(R=>(_.forEach(M=>{R.error.push(M)}),R))},u}})}var T0={exports:{}},eq=T0.exports,cA;function tq(){return cA||(cA=1,(function(t,e){(function(n,r){t.exports=r()})(eq,function(){var n=function(c,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(b[A]=x[A])})(c,h)},r=function(){return(r=Object.assign||function(c){for(var h,b=1,x=arguments.length;b<x;b++)for(var A in h=arguments[b])Object.prototype.hasOwnProperty.call(h,A)&&(c[A]=h[A]);return c}).apply(this,arguments)};function i(c,h,b){for(var x,A=0,I=h.length;A<I;A++)!x&&A in h||((x=x||Array.prototype.slice.call(h,0,A))[A]=h[A]);return c.concat(x||Array.prototype.slice.call(h))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,u=Object.keys,p=Array.isArray;function g(c,h){return typeof h!="object"||u(h).forEach(function(b){c[b]=h[b]}),c}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var y=Object.getPrototypeOf,w={}.hasOwnProperty;function S(c,h){return w.call(c,h)}function _(c,h){typeof h=="function"&&(h=h(y(c))),(typeof Reflect>"u"?u:Reflect.ownKeys)(h).forEach(function(b){N(c,b,h[b])})}var C=Object.defineProperty;function N(c,h,b,x){C(c,h,g(b&&S(b,"get")&&typeof b.get=="function"?{get:b.get,set:b.set,configurable:!0}:{value:b,configurable:!0,writable:!0},x))}function R(c){return{from:function(h){return c.prototype=Object.create(h.prototype),N(c.prototype,"constructor",c),{extend:_.bind(null,c.prototype)}}}}var M=Object.getOwnPropertyDescriptor,L=[].slice;function k(c,h,b){return L.call(c,h,b)}function j(c,h){return h(c)}function $(c){if(!c)throw new Error("Assertion Failed")}function U(c){a.setImmediate?setImmediate(c):setTimeout(c,0)}function F(c,h){if(typeof h=="string"&&S(c,h))return c[h];if(!h)return c;if(typeof h!="string"){for(var b=[],x=0,A=h.length;x<A;++x){var I=F(c,h[x]);b.push(I)}return b}var P=h.indexOf(".");if(P!==-1){var z=c[h.substr(0,P)];return z==null?void 0:F(z,h.substr(P+1))}}function B(c,h,b){if(c&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(c)))if(typeof h!="string"&&"length"in h){$(typeof b!="string"&&"length"in b);for(var x=0,A=h.length;x<A;++x)B(c,h[x],b[x])}else{var I,P,z=h.indexOf(".");z!==-1?(I=h.substr(0,z),(P=h.substr(z+1))===""?b===void 0?p(c)&&!isNaN(parseInt(I))?c.splice(I,1):delete c[I]:c[I]=b:B(z=!(z=c[I])||!S(c,I)?c[I]={}:z,P,b)):b===void 0?p(c)&&!isNaN(parseInt(h))?c.splice(h,1):delete c[h]:c[h]=b}}function Z(c){var h,b={};for(h in c)S(c,h)&&(b[h]=c[h]);return b}var le=[].concat;function Ne(c){return le.apply([],c)}var he="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ne([8,16,32,64].map(function(c){return["Int","Uint","Float"].map(function(h){return h+c+"Array"})}))).filter(function(c){return a[c]}),G=new Set(he.map(function(c){return a[c]})),ce=null;function se(c){return ce=new WeakMap,c=(function h(b){if(!b||typeof b!="object")return b;var x=ce.get(b);if(x)return x;if(p(b)){x=[],ce.set(b,x);for(var A=0,I=b.length;A<I;++A)x.push(h(b[A]))}else if(G.has(b.constructor))x=b;else{var P,z=y(b);for(P in x=z===Object.prototype?{}:Object.create(z),ce.set(b,x),b)S(b,P)&&(x[P]=h(b[P]))}return x})(c),ce=null,c}var Ee={}.toString;function ue(c){return Ee.call(c).slice(8,-1)}var ee=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof ee=="symbol"?function(c){var h;return c!=null&&(h=c[ee])&&h.apply(c)}:function(){return null};function we(c,h){return h=c.indexOf(h),0<=h&&c.splice(h,1),0<=h}var Oe={};function pe(c){var h,b,x,A;if(arguments.length===1){if(p(c))return c.slice();if(this===Oe&&typeof c=="string")return[c];if(A=de(c)){for(b=[];!(x=A.next()).done;)b.push(x.value);return b}if(c==null)return[c];if(typeof(h=c.length)!="number")return[c];for(b=new Array(h);h--;)b[h]=c[h];return b}for(h=arguments.length,b=new Array(h);h--;)b[h]=arguments[h];return b}var K=typeof Symbol<"u"?function(c){return c[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},gr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],_i=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(gr),oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ae(c,h){this.name=c,this.message=h}function Y(c,h){return c+". Errors: "+Object.keys(h).map(function(b){return h[b].toString()}).filter(function(b,x,A){return A.indexOf(b)===x}).join(`
`)}function ie(c,h,b,x){this.failures=h,this.failedKeys=x,this.successCount=b,this.message=Y(c,h)}function be(c,h){this.name="BulkError",this.failures=Object.keys(h).map(function(b){return h[b]}),this.failuresByPos=h,this.message=Y(c,this.failures)}R(ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),R(ie).from(ae),R(be).from(ae);var Ye=_i.reduce(function(c,h){return c[h]=h+"Error",c},{}),Ve=ae,$e=_i.reduce(function(c,h){var b=h+"Error";function x(A,I){this.name=b,A?typeof A=="string"?(this.message="".concat(A).concat(I?`
 `+I:""),this.inner=I||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=oe[h]||b,this.inner=null)}return R(x).from(Ve),c[h]=x,c},{});$e.Syntax=SyntaxError,$e.Type=TypeError,$e.Range=RangeError;var bt=gr.reduce(function(c,h){return c[h+"Error"]=$e[h],c},{}),xe=_i.reduce(function(c,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(c[h+"Error"]=$e[h]),c},{});function Se(){}function Me(c){return c}function Qe(c,h){return c==null||c===Me?h:function(b){return h(c(b))}}function ct(c,h){return function(){c.apply(this,arguments),h.apply(this,arguments)}}function Mt(c,h){return c===Se?h:function(){var b=c.apply(this,arguments);b!==void 0&&(arguments[0]=b);var x=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var I=h.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?ct(x,this.onsuccess):x),A&&(this.onerror=this.onerror?ct(A,this.onerror):A),I!==void 0?I:b}}function ln(c,h){return c===Se?h:function(){c.apply(this,arguments);var b=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?ct(b,this.onsuccess):b),x&&(this.onerror=this.onerror?ct(x,this.onerror):x)}}function Zt(c,h){return c===Se?h:function(b){var x=c.apply(this,arguments);g(b,x);var A=this.onsuccess,I=this.onerror;return this.onsuccess=null,this.onerror=null,b=h.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?ct(A,this.onsuccess):A),I&&(this.onerror=this.onerror?ct(I,this.onerror):I),x===void 0?b===void 0?void 0:b:g(x,b)}}function jt(c,h){return c===Se?h:function(){return h.apply(this,arguments)!==!1&&c.apply(this,arguments)}}function jn(c,h){return c===Se?h:function(){var b=c.apply(this,arguments);if(b&&typeof b.then=="function"){for(var x=this,A=arguments.length,I=new Array(A);A--;)I[A]=arguments[A];return b.then(function(){return h.apply(x,I)})}return h.apply(this,arguments)}}xe.ModifyError=ie,xe.DexieError=ae,xe.BulkError=be;var ot=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wr(c){ot=c}var nr={},Jt=100,he=typeof Promise>"u"?[]:(function(){var c=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[c,y(c),c];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,y(h),c]})(),gr=he[0],_i=he[1],he=he[2],_i=_i&&_i.then,zn=gr&&gr.constructor,jr=!!he,Cn=function(c,h){Ft.push([c,h]),yr&&(queueMicrotask(Ji),yr=!1)},xn=!0,yr=!0,fi=[],zi=[],Pn=Me,et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},ft=et,Ft=[],vn=0,ni=[];function dt(c){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=ft;if(typeof c!="function"){if(c!==nr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&vr(this,this._value))}this._state=null,this._value=null,++h.ref,(function b(x,A){try{A(function(I){if(x._state===null){if(I===x)throw new TypeError("A promise cannot be resolved with itself.");var P=x._lib&&Dn();I&&typeof I.then=="function"?b(x,function(z,H){I instanceof dt?I._then(z,H):I.then(z,H)}):(x._state=!0,x._value=I,hi(x)),P&&Jn()}},vr.bind(null,x))}catch(I){vr(x,I)}})(this,c)}var Xr={get:function(){var c=ft,h=Je;function b(x,A){var I=this,P=!c.global&&(c!==ft||h!==Je),z=P&&!ut(),H=new dt(function(X,J){ri(I,new rn(Gn(x,c,P,z),Gn(A,c,P,z),X,J,c))});return this._consoleTask&&(H._consoleTask=this._consoleTask),H}return b.prototype=nr,b},set:function(c){N(this,"then",c&&c.prototype===nr?Xr:{get:function(){return c},set:Xr.set})}};function rn(c,h,b,x,A){this.onFulfilled=typeof c=="function"?c:null,this.onRejected=typeof h=="function"?h:null,this.resolve=b,this.reject=x,this.psd=A}function vr(c,h){var b,x;zi.push(h),c._state===null&&(b=c._lib&&Dn(),h=Pn(h),c._state=!1,c._value=h,x=c,fi.some(function(A){return A._value===x._value})||fi.push(x),hi(c),b&&Jn())}function hi(c){var h=c._listeners;c._listeners=[];for(var b=0,x=h.length;b<x;++b)ri(c,h[b]);var A=c._PSD;--A.ref||A.finalize(),vn===0&&(++vn,Cn(function(){--vn==0&&ii()},[]))}function ri(c,h){if(c._state!==null){var b=c._state?h.onFulfilled:h.onRejected;if(b===null)return(c._state?h.resolve:h.reject)(c._value);++h.psd.ref,++vn,Cn(Or,[b,c,h])}else c._listeners.push(h)}function Or(c,h,b){try{var x,A=h._value;!h._state&&zi.length&&(zi=[]),x=ot&&h._consoleTask?h._consoleTask.run(function(){return c(A)}):c(A),h._state||zi.indexOf(A)!==-1||(function(I){for(var P=fi.length;P;)if(fi[--P]._value===I._value)return fi.splice(P,1)})(h),b.resolve(x)}catch(I){b.reject(I)}finally{--vn==0&&ii(),--b.psd.ref||b.psd.finalize()}}function Ji(){en(et,function(){Dn()&&Jn()})}function Dn(){var c=xn;return yr=xn=!1,c}function Jn(){var c,h,b;do for(;0<Ft.length;)for(c=Ft,Ft=[],b=c.length,h=0;h<b;++h){var x=c[h];x[0].apply(null,x[1])}while(0<Ft.length);yr=xn=!0}function ii(){var c=fi;fi=[],c.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var h=ni.slice(0),b=h.length;b;)h[--b]()}function ir(c){return new dt(nr,!1,c)}function Fn(c,h){var b=ft;return function(){var x=Dn(),A=ft;try{return xt(b,!0),c.apply(this,arguments)}catch(I){h&&h(I)}finally{xt(A,!1),x&&Jn()}}}_(dt.prototype,{then:Xr,_then:function(c,h){ri(this,new rn(null,null,c,h,ft))},catch:function(c){if(arguments.length===1)return this.then(null,c);var h=c,b=arguments[1];return typeof h=="function"?this.then(null,function(x){return(x instanceof h?b:ir)(x)}):this.then(null,function(x){return(x&&x.name===h?b:ir)(x)})},finally:function(c){return this.then(function(h){return dt.resolve(c()).then(function(){return h})},function(h){return dt.resolve(c()).then(function(){return ir(h)})})},timeout:function(c,h){var b=this;return c<1/0?new dt(function(x,A){var I=setTimeout(function(){return A(new $e.Timeout(h))},c);b.then(x,A).finally(clearTimeout.bind(null,I))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(dt.prototype,Symbol.toStringTag,"Dexie.Promise"),et.env=Gt(),_(dt,{all:function(){var c=pe.apply(null,arguments).map(Et);return new dt(function(h,b){c.length===0&&h([]);var x=c.length;c.forEach(function(A,I){return dt.resolve(A).then(function(P){c[I]=P,--x||h(c)},b)})})},resolve:function(c){return c instanceof dt?c:c&&typeof c.then=="function"?new dt(function(h,b){c.then(h,b)}):new dt(nr,!0,c)},reject:ir,race:function(){var c=pe.apply(null,arguments).map(Et);return new dt(function(h,b){c.map(function(x){return dt.resolve(x).then(h,b)})})},PSD:{get:function(){return ft},set:function(c){return ft=c}},totalEchoes:{get:function(){return Je}},newPSD:pt,usePSD:en,scheduler:{get:function(){return Cn},set:function(c){Cn=c}},rejectionMapper:{get:function(){return Pn},set:function(c){Pn=c}},follow:function(c,h){return new dt(function(b,x){return pt(function(A,I){var P=ft;P.unhandleds=[],P.onunhandled=I,P.finalize=ct(function(){var z,H=this;z=function(){H.unhandleds.length===0?A():I(H.unhandleds[0])},ni.push(function X(){z(),ni.splice(ni.indexOf(X),1)}),++vn,Cn(function(){--vn==0&&ii()},[])},P.finalize),c()},h,b,x)})}}),zn&&(zn.allSettled&&N(dt,"allSettled",function(){var c=pe.apply(null,arguments).map(Et);return new dt(function(h){c.length===0&&h([]);var b=c.length,x=new Array(b);c.forEach(function(A,I){return dt.resolve(A).then(function(P){return x[I]={status:"fulfilled",value:P}},function(P){return x[I]={status:"rejected",reason:P}}).then(function(){return--b||h(x)})})})}),zn.any&&typeof AggregateError<"u"&&N(dt,"any",function(){var c=pe.apply(null,arguments).map(Et);return new dt(function(h,b){c.length===0&&b(new AggregateError([]));var x=c.length,A=new Array(x);c.forEach(function(I,P){return dt.resolve(I).then(function(z){return h(z)},function(z){A[P]=z,--x||b(new AggregateError(A))})})})}),zn.withResolvers&&(dt.withResolvers=zn.withResolvers));var ve={awaits:0,echoes:0,id:0},Ie=0,Le=[],nt=0,Je=0,Ge=0;function pt(c,h,b,x){var A=ft,I=Object.create(A);return I.parent=A,I.ref=0,I.global=!1,I.id=++Ge,et.env,I.env=jr?{Promise:dt,PromiseProp:{value:dt,configurable:!0,writable:!0},all:dt.all,race:dt.race,allSettled:dt.allSettled,any:dt.any,resolve:dt.resolve,reject:dt.reject}:{},h&&g(I,h),++A.ref,I.finalize=function(){--this.parent.ref||this.parent.finalize()},x=en(I,c,b,x),I.ref===0&&I.finalize(),x}function mt(){return ve.id||(ve.id=++Ie),++ve.awaits,ve.echoes+=Jt,ve.id}function ut(){return!!ve.awaits&&(--ve.awaits==0&&(ve.id=0),ve.echoes=ve.awaits*Jt,!0)}function Et(c){return ve.echoes&&c&&c.constructor===zn?(mt(),c.then(function(h){return ut(),h},function(h){return ut(),_t(h)})):c}function St(){var c=Le[Le.length-1];Le.pop(),xt(c,!1)}function xt(c,h){var b,x=ft;(h?!ve.echoes||nt++&&c===ft:!nt||--nt&&c===ft)||queueMicrotask(h?(function(A){++Je,ve.echoes&&--ve.echoes!=0||(ve.echoes=ve.awaits=ve.id=0),Le.push(ft),xt(A,!0)}).bind(null,c):St),c!==ft&&(ft=c,x===et&&(et.env=Gt()),jr&&(b=et.env.Promise,h=c.env,(x.global||c.global)&&(Object.defineProperty(a,"Promise",h.PromiseProp),b.all=h.all,b.race=h.race,b.resolve=h.resolve,b.reject=h.reject,h.allSettled&&(b.allSettled=h.allSettled),h.any&&(b.any=h.any))))}function Gt(){var c=a.Promise;return jr?{Promise:c,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:c.all,race:c.race,allSettled:c.allSettled,any:c.any,resolve:c.resolve,reject:c.reject}:{}}function en(c,h,b,x,A){var I=ft;try{return xt(c,!0),h(b,x,A)}finally{xt(I,!1)}}function Gn(c,h,b,x){return typeof c!="function"?c:function(){var A=ft;b&&mt(),xt(h,!0);try{return c.apply(this,arguments)}finally{xt(A,!1),x&&queueMicrotask(ut)}}}function wn(c){Promise===zn&&ve.echoes===0?nt===0?c():enqueueNativeMicroTask(c):setTimeout(c,0)}(""+_i).indexOf("[native code]")===-1&&(mt=ut=Se);var _t=dt.reject,Nt="",qn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",rr="String expected.",Nn=[],We="__dbnames",Mr="readonly",gn="readwrite";function Hn(c,h){return c?h?function(){return c.apply(this,arguments)&&h.apply(this,arguments)}:c:h}var Pr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function tn(c){return typeof c!="string"||/\./.test(c)?function(h){return h}:function(h){return h[c]===void 0&&c in h&&delete(h=se(h))[c],h}}function cn(){throw $e.Type()}function st(c,h){try{var b=Yn(c),x=Yn(h);if(b!==x)return b==="Array"?1:x==="Array"?-1:b==="binary"?1:x==="binary"?-1:b==="string"?1:x==="string"?-1:b==="Date"?1:x!=="Date"?NaN:-1;switch(b){case"number":case"Date":case"string":return h<c?1:c<h?-1:0;case"binary":return(function(A,I){for(var P=A.length,z=I.length,H=P<z?P:z,X=0;X<H;++X)if(A[X]!==I[X])return A[X]<I[X]?-1:1;return P===z?0:P<z?-1:1})(si(c),si(h));case"Array":return(function(A,I){for(var P=A.length,z=I.length,H=P<z?P:z,X=0;X<H;++X){var J=st(A[X],I[X]);if(J!==0)return J}return P===z?0:P<z?-1:1})(c,h)}}catch{}return NaN}function Yn(c){var h=typeof c;return h!="object"?h:ArrayBuffer.isView(c)?"binary":(c=ue(c),c==="ArrayBuffer"?"binary":c)}function si(c){return c instanceof Uint8Array?c:ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c)}var br=(gt.prototype._trans=function(c,h,b){var x=this._tx||ft.trans,A=this.name,I=ot&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(c==="readonly"?"read":"write"," ").concat(this.name));function P(X,J,Q){if(!Q.schema[A])throw new $e.NotFound("Table "+A+" not part of transaction");return h(Q.idbtrans,Q)}var z=Dn();try{var H=x&&x.db._novip===this.db._novip?x===ft.trans?x._promise(c,P,b):pt(function(){return x._promise(c,P,b)},{trans:x,transless:ft.transless||ft}):(function X(J,Q,fe,me){if(J.idbdb&&(J._state.openComplete||ft.letThrough||J._vip)){var ge=J._createTransaction(Q,fe,J._dbSchema);try{ge.create(),J._state.PR1398_maxLoop=3}catch(ye){return ye.name===Ye.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return X(J,Q,fe,me)})):_t(ye)}return ge._promise(Q,function(ye,_e){return pt(function(){return ft.trans=ge,me(ye,_e,ge)})}).then(function(ye){if(Q==="readwrite")try{ge.idbtrans.commit()}catch{}return Q==="readonly"?ye:ge._completion.then(function(){return ye})})}if(J._state.openComplete)return _t(new $e.DatabaseClosed(J._state.dbOpenError));if(!J._state.isBeingOpened){if(!J._state.autoOpen)return _t(new $e.DatabaseClosed);J.open().catch(Se)}return J._state.dbReadyPromise.then(function(){return X(J,Q,fe,me)})})(this.db,c,[this.name],P);return I&&(H._consoleTask=I,H=H.catch(function(X){return console.trace(X),_t(X)})),H}finally{z&&Jn()}},gt.prototype.get=function(c,h){var b=this;return c&&c.constructor===Object?this.where(c).first(h):c==null?_t(new $e.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return b.core.get({trans:x,key:c}).then(function(A){return b.hook.reading.fire(A)})}).then(h)},gt.prototype.where=function(c){if(typeof c=="string")return new this.db.WhereClause(this,c);if(p(c))return new this.db.WhereClause(this,"[".concat(c.join("+"),"]"));var h=u(c);if(h.length===1)return this.where(h[0]).equals(c[h[0]]);var b=this.schema.indexes.concat(this.schema.primKey).filter(function(z){if(z.compound&&h.every(function(X){return 0<=z.keyPath.indexOf(X)})){for(var H=0;H<h.length;++H)if(h.indexOf(z.keyPath[H])===-1)return!1;return!0}return!1}).sort(function(z,H){return z.keyPath.length-H.keyPath.length})[0];if(b&&this.db._maxKey!==Nt){var I=b.keyPath.slice(0,h.length);return this.where(I).equals(I.map(function(H){return c[H]}))}!b&&ot&&console.warn("The query ".concat(JSON.stringify(c)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var x=this.schema.idxByName;function A(z,H){return st(z,H)===0}var P=h.reduce(function(Q,H){var X=Q[0],J=Q[1],Q=x[H],fe=c[H];return[X||Q,X||!Q?Hn(J,Q&&Q.multi?function(me){return me=F(me,H),p(me)&&me.some(function(ge){return A(fe,ge)})}:function(me){return A(fe,F(me,H))}):J]},[null,null]),I=P[0],P=P[1];return I?this.where(I.name).equals(c[I.keyPath]).filter(P):b?this.filter(P):this.where(h).equals("")},gt.prototype.filter=function(c){return this.toCollection().and(c)},gt.prototype.count=function(c){return this.toCollection().count(c)},gt.prototype.offset=function(c){return this.toCollection().offset(c)},gt.prototype.limit=function(c){return this.toCollection().limit(c)},gt.prototype.each=function(c){return this.toCollection().each(c)},gt.prototype.toArray=function(c){return this.toCollection().toArray(c)},gt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},gt.prototype.orderBy=function(c){return new this.db.Collection(new this.db.WhereClause(this,p(c)?"[".concat(c.join("+"),"]"):c))},gt.prototype.reverse=function(){return this.toCollection().reverse()},gt.prototype.mapToClass=function(c){var h,b=this.db,x=this.name;function A(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=c).prototype instanceof cn&&((function(H,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");function J(){this.constructor=H}n(H,X),H.prototype=X===null?Object.create(X):(J.prototype=X.prototype,new J)})(A,h=c),Object.defineProperty(A.prototype,"db",{get:function(){return b},enumerable:!1,configurable:!0}),A.prototype.table=function(){return x},c=A);for(var I=new Set,P=c.prototype;P;P=y(P))Object.getOwnPropertyNames(P).forEach(function(H){return I.add(H)});function z(H){if(!H)return H;var X,J=Object.create(c.prototype);for(X in H)if(!I.has(X))try{J[X]=H[X]}catch{}return J}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=z,this.hook("reading",z),c},gt.prototype.defineClass=function(){return this.mapToClass(function(c){g(this,c)})},gt.prototype.add=function(c,h){var b=this,x=this.schema.primKey,A=x.auto,I=x.keyPath,P=c;return I&&A&&(P=tn(I)(c)),this._trans("readwrite",function(z){return b.core.mutate({trans:z,type:"add",keys:h!=null?[h]:null,values:[P]})}).then(function(z){return z.numFailures?dt.reject(z.failures[0]):z.lastResult}).then(function(z){if(I)try{B(c,I,z)}catch{}return z})},gt.prototype.update=function(c,h){return typeof c!="object"||p(c)?this.where(":id").equals(c).modify(h):(c=F(c,this.schema.primKey.keyPath),c===void 0?_t(new $e.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(h))},gt.prototype.put=function(c,h){var b=this,x=this.schema.primKey,A=x.auto,I=x.keyPath,P=c;return I&&A&&(P=tn(I)(c)),this._trans("readwrite",function(z){return b.core.mutate({trans:z,type:"put",values:[P],keys:h!=null?[h]:null})}).then(function(z){return z.numFailures?dt.reject(z.failures[0]):z.lastResult}).then(function(z){if(I)try{B(c,I,z)}catch{}return z})},gt.prototype.delete=function(c){var h=this;return this._trans("readwrite",function(b){return h.core.mutate({trans:b,type:"delete",keys:[c]})}).then(function(b){return b.numFailures?dt.reject(b.failures[0]):void 0})},gt.prototype.clear=function(){var c=this;return this._trans("readwrite",function(h){return c.core.mutate({trans:h,type:"deleteRange",range:Pr})}).then(function(h){return h.numFailures?dt.reject(h.failures[0]):void 0})},gt.prototype.bulkGet=function(c){var h=this;return this._trans("readonly",function(b){return h.core.getMany({keys:c,trans:b}).then(function(x){return x.map(function(A){return h.hook.reading.fire(A)})})})},gt.prototype.bulkAdd=function(c,h,b){var x=this,A=Array.isArray(h)?h:void 0,I=(b=b||(A?void 0:h))?b.allKeys:void 0;return this._trans("readwrite",function(P){var X=x.schema.primKey,z=X.auto,X=X.keyPath;if(X&&A)throw new $e.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==c.length)throw new $e.InvalidArgument("Arguments objects and keys must have the same length");var H=c.length,X=X&&z?c.map(tn(X)):c;return x.core.mutate({trans:P,type:"add",keys:A,values:X,wantResults:I}).then(function(ge){var Q=ge.numFailures,fe=ge.results,me=ge.lastResult,ge=ge.failures;if(Q===0)return I?fe:me;throw new be("".concat(x.name,".bulkAdd(): ").concat(Q," of ").concat(H," operations failed"),ge)})})},gt.prototype.bulkPut=function(c,h,b){var x=this,A=Array.isArray(h)?h:void 0,I=(b=b||(A?void 0:h))?b.allKeys:void 0;return this._trans("readwrite",function(P){var X=x.schema.primKey,z=X.auto,X=X.keyPath;if(X&&A)throw new $e.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==c.length)throw new $e.InvalidArgument("Arguments objects and keys must have the same length");var H=c.length,X=X&&z?c.map(tn(X)):c;return x.core.mutate({trans:P,type:"put",keys:A,values:X,wantResults:I}).then(function(ge){var Q=ge.numFailures,fe=ge.results,me=ge.lastResult,ge=ge.failures;if(Q===0)return I?fe:me;throw new be("".concat(x.name,".bulkPut(): ").concat(Q," of ").concat(H," operations failed"),ge)})})},gt.prototype.bulkUpdate=function(c){var h=this,b=this.core,x=c.map(function(P){return P.key}),A=c.map(function(P){return P.changes}),I=[];return this._trans("readwrite",function(P){return b.getMany({trans:P,keys:x,cache:"clone"}).then(function(z){var H=[],X=[];c.forEach(function(Q,fe){var me=Q.key,ge=Q.changes,ye=z[fe];if(ye){for(var _e=0,Re=Object.keys(ge);_e<Re.length;_e++){var je=Re[_e],Ue=ge[je];if(je===h.schema.primKey.keyPath){if(st(Ue,me)!==0)throw new $e.Constraint("Cannot update primary key in bulkUpdate()")}else B(ye,je,Ue)}I.push(fe),H.push(me),X.push(ye)}});var J=H.length;return b.mutate({trans:P,type:"put",keys:H,values:X,updates:{keys:x,changeSpecs:A}}).then(function(Q){var fe=Q.numFailures,me=Q.failures;if(fe===0)return J;for(var ge=0,ye=Object.keys(me);ge<ye.length;ge++){var _e,Re=ye[ge],je=I[Number(Re)];je!=null&&(_e=me[Re],delete me[Re],me[je]=_e)}throw new be("".concat(h.name,".bulkUpdate(): ").concat(fe," of ").concat(J," operations failed"),me)})})})},gt.prototype.bulkDelete=function(c){var h=this,b=c.length;return this._trans("readwrite",function(x){return h.core.mutate({trans:x,type:"delete",keys:c})}).then(function(P){var A=P.numFailures,I=P.lastResult,P=P.failures;if(A===0)return I;throw new be("".concat(h.name,".bulkDelete(): ").concat(A," of ").concat(b," operations failed"),P)})},gt);function gt(){}function wr(c){function h(P,z){if(z){for(var H=arguments.length,X=new Array(H-1);--H;)X[H-1]=arguments[H];return b[P].subscribe.apply(null,X),c}if(typeof P=="string")return b[P]}var b={};h.addEventType=I;for(var x=1,A=arguments.length;x<A;++x)I(arguments[x]);return h;function I(P,z,H){if(typeof P!="object"){var X;z=z||jt;var J={subscribers:[],fire:H=H||Se,subscribe:function(Q){J.subscribers.indexOf(Q)===-1&&(J.subscribers.push(Q),J.fire=z(J.fire,Q))},unsubscribe:function(Q){J.subscribers=J.subscribers.filter(function(fe){return fe!==Q}),J.fire=J.subscribers.reduce(z,H)}};return b[P]=h[P]=J}u(X=P).forEach(function(Q){var fe=X[Q];if(p(fe))I(Q,X[Q][0],X[Q][1]);else{if(fe!=="asap")throw new $e.InvalidArgument("Invalid event config");var me=I(Q,Me,function(){for(var ge=arguments.length,ye=new Array(ge);ge--;)ye[ge]=arguments[ge];me.subscribers.forEach(function(_e){U(function(){_e.apply(null,ye)})})})}})}}function wi(c,h){return R(h).from({prototype:c}),h}function Tn(c,h){return!(c.filter||c.algorithm||c.or)&&(h?c.justLimit:!c.replayFilter)}function Ei(c,h){c.filter=Hn(c.filter,h)}function Ss(c,h,b){var x=c.replayFilter;c.replayFilter=x?function(){return Hn(x(),h())}:h,c.justLimit=b&&!x}function Fi(c,h){if(c.isPrimKey)return h.primaryKey;var b=h.getIndexByKeyPath(c.index);if(!b)throw new $e.Schema("KeyPath "+c.index+" on object store "+h.name+" is not indexed");return b}function un(c,h,b){var x=Fi(c,h.schema);return h.openCursor({trans:b,values:!c.keysOnly,reverse:c.dir==="prev",unique:!!c.unique,query:{index:x,range:c.range}})}function sr(c,h,b,x){var A=c.replayFilter?Hn(c.filter,c.replayFilter()):c.filter;if(c.or){var I={},P=function(z,H,X){var J,Q;A&&!A(H,X,function(fe){return H.stop(fe)},function(fe){return H.fail(fe)})||((Q=""+(J=H.primaryKey))=="[object ArrayBuffer]"&&(Q=""+new Uint8Array(J)),S(I,Q)||(I[Q]=!0,h(z,H,X)))};return Promise.all([c.or._iterate(P,b),ke(un(c,x,b),c.algorithm,P,!c.keysOnly&&c.valueMapper)])}return ke(un(c,x,b),Hn(c.algorithm,A),h,!c.keysOnly&&c.valueMapper)}function ke(c,h,b,x){var A=Fn(x?function(I,P,z){return b(x(I),P,z)}:b);return c.then(function(I){if(I)return I.start(function(){var P=function(){return I.continue()};h&&!h(I,function(z){return P=z},function(z){I.stop(z),P=Se},function(z){I.fail(z),P=Se})||A(I.value,I,function(z){return P=z}),P()})})}var he=Symbol(),At=(Wn.prototype.execute=function(c){if(this.add!==void 0){var h=this.add;if(p(h))return i(i([],p(c)?c:[],!0),h).sort();if(typeof h=="number")return(Number(c)||0)+h;if(typeof h=="bigint")try{return BigInt(c)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(this.remove!==void 0){var b=this.remove;if(p(b))return p(c)?c.filter(function(x){return!b.includes(x)}).sort():[];if(typeof b=="number")return Number(c)-b;if(typeof b=="bigint")try{return BigInt(c)-b}catch{return BigInt(0)-b}throw new TypeError("Invalid subtrahend ".concat(b))}return h=(h=this.replacePrefix)===null||h===void 0?void 0:h[0],h&&typeof c=="string"&&c.startsWith(h)?this.replacePrefix[1]+c.substring(h.length):c},Wn);function Wn(c){Object.assign(this,c)}var ar=(Yt.prototype._read=function(c,h){var b=this._ctx;return b.error?b.table._trans(null,_t.bind(null,b.error)):b.table._trans("readonly",c).then(h)},Yt.prototype._write=function(c){var h=this._ctx;return h.error?h.table._trans(null,_t.bind(null,h.error)):h.table._trans("readwrite",c,"locked")},Yt.prototype._addAlgorithm=function(c){var h=this._ctx;h.algorithm=Hn(h.algorithm,c)},Yt.prototype._iterate=function(c,h){return sr(this._ctx,c,h,this._ctx.table.core)},Yt.prototype.clone=function(c){var h=Object.create(this.constructor.prototype),b=Object.create(this._ctx);return c&&g(b,c),h._ctx=b,h},Yt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Yt.prototype.each=function(c){var h=this._ctx;return this._read(function(b){return sr(h,c,b,h.table.core)})},Yt.prototype.count=function(c){var h=this;return this._read(function(b){var x=h._ctx,A=x.table.core;if(Tn(x,!0))return A.count({trans:b,query:{index:Fi(x,A.schema),range:x.range}}).then(function(P){return Math.min(P,x.limit)});var I=0;return sr(x,function(){return++I,!1},b,A).then(function(){return I})}).then(c)},Yt.prototype.sortBy=function(c,h){var b=c.split(".").reverse(),x=b[0],A=b.length-1;function I(H,X){return X?I(H[b[X]],X-1):H[x]}var P=this._ctx.dir==="next"?1:-1;function z(H,X){return st(I(H,A),I(X,A))*P}return this.toArray(function(H){return H.sort(z)}).then(h)},Yt.prototype.toArray=function(c){var h=this;return this._read(function(b){var x=h._ctx;if(x.dir==="next"&&Tn(x,!0)&&0<x.limit){var A=x.valueMapper,I=Fi(x,x.table.core.schema);return x.table.core.query({trans:b,limit:x.limit,values:!0,query:{index:I,range:x.range}}).then(function(z){return z=z.result,A?z.map(A):z})}var P=[];return sr(x,function(z){return P.push(z)},b,x.table.core).then(function(){return P})},c)},Yt.prototype.offset=function(c){var h=this._ctx;return c<=0||(h.offset+=c,Tn(h)?Ss(h,function(){var b=c;return function(x,A){return b===0||(b===1?--b:A(function(){x.advance(b),b=0}),!1)}}):Ss(h,function(){var b=c;return function(){return--b<0}})),this},Yt.prototype.limit=function(c){return this._ctx.limit=Math.min(this._ctx.limit,c),Ss(this._ctx,function(){var h=c;return function(b,x,A){return--h<=0&&x(A),0<=h}},!0),this},Yt.prototype.until=function(c,h){return Ei(this._ctx,function(b,x,A){return!c(b.value)||(x(A),h)}),this},Yt.prototype.first=function(c){return this.limit(1).toArray(function(h){return h[0]}).then(c)},Yt.prototype.last=function(c){return this.reverse().first(c)},Yt.prototype.filter=function(c){var h;return Ei(this._ctx,function(b){return c(b.value)}),(h=this._ctx).isMatch=Hn(h.isMatch,c),this},Yt.prototype.and=function(c){return this.filter(c)},Yt.prototype.or=function(c){return new this.db.WhereClause(this._ctx.table,c,this)},Yt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Yt.prototype.desc=function(){return this.reverse()},Yt.prototype.eachKey=function(c){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(b,x){c(x.key,x)})},Yt.prototype.eachUniqueKey=function(c){return this._ctx.unique="unique",this.eachKey(c)},Yt.prototype.eachPrimaryKey=function(c){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(b,x){c(x.primaryKey,x)})},Yt.prototype.keys=function(c){var h=this._ctx;h.keysOnly=!h.isMatch;var b=[];return this.each(function(x,A){b.push(A.key)}).then(function(){return b}).then(c)},Yt.prototype.primaryKeys=function(c){var h=this._ctx;if(h.dir==="next"&&Tn(h,!0)&&0<h.limit)return this._read(function(x){var A=Fi(h,h.table.core.schema);return h.table.core.query({trans:x,values:!1,limit:h.limit,query:{index:A,range:h.range}})}).then(function(x){return x.result}).then(c);h.keysOnly=!h.isMatch;var b=[];return this.each(function(x,A){b.push(A.primaryKey)}).then(function(){return b}).then(c)},Yt.prototype.uniqueKeys=function(c){return this._ctx.unique="unique",this.keys(c)},Yt.prototype.firstKey=function(c){return this.limit(1).keys(function(h){return h[0]}).then(c)},Yt.prototype.lastKey=function(c){return this.reverse().firstKey(c)},Yt.prototype.distinct=function(){var c=this._ctx,c=c.index&&c.table.schema.idxByName[c.index];if(!c||!c.multi)return this;var h={};return Ei(this._ctx,function(A){var x=A.primaryKey.toString(),A=S(h,x);return h[x]=!0,!A}),this},Yt.prototype.modify=function(c){var h=this,b=this._ctx;return this._write(function(x){var A,I,P;P=typeof c=="function"?c:(A=u(c),I=A.length,function(_e){for(var Re=!1,je=0;je<I;++je){var Ue=A[je],Ke=c[Ue],Ze=F(_e,Ue);Ke instanceof At?(B(_e,Ue,Ke.execute(Ze)),Re=!0):Ze!==Ke&&(B(_e,Ue,Ke),Re=!0)}return Re});var z=b.table.core,Q=z.schema.primaryKey,H=Q.outbound,X=Q.extractKey,J=200,Q=h.db._options.modifyChunkSize;Q&&(J=typeof Q=="object"?Q[z.name]||Q["*"]||200:Q);function fe(_e,Ue){var je=Ue.failures,Ue=Ue.numFailures;ge+=_e-Ue;for(var Ke=0,Ze=u(je);Ke<Ze.length;Ke++){var lt=Ze[Ke];me.push(je[lt])}}var me=[],ge=0,ye=[];return h.clone().primaryKeys().then(function(_e){function Re(Ue){var Ke=Math.min(J,_e.length-Ue);return z.getMany({trans:x,keys:_e.slice(Ue,Ue+Ke),cache:"immutable"}).then(function(Ze){for(var lt=[],at=[],ht=H?[]:null,yt=[],vt=0;vt<Ke;++vt){var Ct=Ze[vt],Vt={value:se(Ct),primKey:_e[Ue+vt]};P.call(Vt,Vt.value,Vt)!==!1&&(Vt.value==null?yt.push(_e[Ue+vt]):H||st(X(Ct),X(Vt.value))===0?(at.push(Vt.value),H&&ht.push(_e[Ue+vt])):(yt.push(_e[Ue+vt]),lt.push(Vt.value)))}return Promise.resolve(0<lt.length&&z.mutate({trans:x,type:"add",values:lt}).then(function(yn){for(var Wt in yn.failures)yt.splice(parseInt(Wt),1);fe(lt.length,yn)})).then(function(){return(0<at.length||je&&typeof c=="object")&&z.mutate({trans:x,type:"put",keys:ht,values:at,criteria:je,changeSpec:typeof c!="function"&&c,isAdditionalChunk:0<Ue}).then(function(yn){return fe(at.length,yn)})}).then(function(){return(0<yt.length||je&&c===Di)&&z.mutate({trans:x,type:"delete",keys:yt,criteria:je,isAdditionalChunk:0<Ue}).then(function(yn){return fe(yt.length,yn)})}).then(function(){return _e.length>Ue+Ke&&Re(Ue+J)})})}var je=Tn(b)&&b.limit===1/0&&(typeof c!="function"||c===Di)&&{index:b.index,range:b.range};return Re(0).then(function(){if(0<me.length)throw new ie("Error modifying one or more objects",me,ge,ye);return _e.length})})})},Yt.prototype.delete=function(){var c=this._ctx,h=c.range;return Tn(c)&&(c.isPrimKey||h.type===3)?this._write(function(b){var x=c.table.core.schema.primaryKey,A=h;return c.table.core.count({trans:b,query:{index:x,range:A}}).then(function(I){return c.table.core.mutate({trans:b,type:"deleteRange",range:A}).then(function(P){var z=P.failures;if(P.lastResult,P.results,P=P.numFailures,P)throw new ie("Could not delete some values",Object.keys(z).map(function(H){return z[H]}),I-P);return I-P})})}):this.modify(Di)},Yt);function Yt(){}var Di=function(c,h){return h.value=null};function di(c,h){return c<h?-1:c===h?0:1}function Ot(c,h){return h<c?-1:c===h?0:1}function hn(c,h,b){return c=c instanceof Dr?new c.Collection(c):c,c._ctx.error=new(b||TypeError)(h),c}function as(c){return new c.Collection(c,function(){return ai("")}).limit(0)}function ia(c,h,b,x){var A,I,P,z,H,X,J,Q=b.length;if(!b.every(function(ge){return typeof ge=="string"}))return hn(c,rr);function fe(ge){A=ge==="next"?function(_e){return _e.toUpperCase()}:function(_e){return _e.toLowerCase()},I=ge==="next"?function(_e){return _e.toLowerCase()}:function(_e){return _e.toUpperCase()},P=ge==="next"?di:Ot;var ye=b.map(function(_e){return{lower:I(_e),upper:A(_e)}}).sort(function(_e,Re){return P(_e.lower,Re.lower)});z=ye.map(function(_e){return _e.upper}),H=ye.map(function(_e){return _e.lower}),J=(X=ge)==="next"?"":x}fe("next"),c=new c.Collection(c,function(){return pi(z[0],H[Q-1]+x)}),c._ondirectionchange=function(ge){fe(ge)};var me=0;return c._addAlgorithm(function(ge,ye,_e){var Re=ge.key;if(typeof Re!="string")return!1;var je=I(Re);if(h(je,H,me))return!0;for(var Ue=null,Ke=me;Ke<Q;++Ke){var Ze=(function(lt,at,ht,yt,vt,Ct){for(var Vt=Math.min(lt.length,yt.length),yn=-1,Wt=0;Wt<Vt;++Wt){var Ai=at[Wt];if(Ai!==yt[Wt])return vt(lt[Wt],ht[Wt])<0?lt.substr(0,Wt)+ht[Wt]+ht.substr(Wt+1):vt(lt[Wt],yt[Wt])<0?lt.substr(0,Wt)+yt[Wt]+ht.substr(Wt+1):0<=yn?lt.substr(0,yn)+at[yn]+ht.substr(yn+1):null;vt(lt[Wt],Ai)<0&&(yn=Wt)}return Vt<yt.length&&Ct==="next"?lt+ht.substr(lt.length):Vt<lt.length&&Ct==="prev"?lt.substr(0,ht.length):yn<0?null:lt.substr(0,yn)+yt[yn]+ht.substr(yn+1)})(Re,je,z[Ke],H[Ke],P,X);Ze===null&&Ue===null?me=Ke+1:(Ue===null||0<P(Ue,Ze))&&(Ue=Ze)}return ye(Ue!==null?function(){ge.continue(Ue+J)}:_e),!1}),c}function pi(c,h,b,x){return{type:2,lower:c,upper:h,lowerOpen:b,upperOpen:x}}function ai(c){return{type:1,lower:c,upper:c}}var Dr=(Object.defineProperty(or.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),or.prototype.between=function(c,h,b,x){b=b!==!1,x=x===!0;try{return 0<this._cmp(c,h)||this._cmp(c,h)===0&&(b||x)&&(!b||!x)?as(this):new this.Collection(this,function(){return pi(c,h,!b,!x)})}catch{return hn(this,qn)}},or.prototype.equals=function(c){return c==null?hn(this,qn):new this.Collection(this,function(){return ai(c)})},or.prototype.above=function(c){return c==null?hn(this,qn):new this.Collection(this,function(){return pi(c,void 0,!0)})},or.prototype.aboveOrEqual=function(c){return c==null?hn(this,qn):new this.Collection(this,function(){return pi(c,void 0,!1)})},or.prototype.below=function(c){return c==null?hn(this,qn):new this.Collection(this,function(){return pi(void 0,c,!1,!0)})},or.prototype.belowOrEqual=function(c){return c==null?hn(this,qn):new this.Collection(this,function(){return pi(void 0,c)})},or.prototype.startsWith=function(c){return typeof c!="string"?hn(this,rr):this.between(c,c+Nt,!0,!0)},or.prototype.startsWithIgnoreCase=function(c){return c===""?this.startsWith(c):ia(this,function(h,b){return h.indexOf(b[0])===0},[c],Nt)},or.prototype.equalsIgnoreCase=function(c){return ia(this,function(h,b){return h===b[0]},[c],"")},or.prototype.anyOfIgnoreCase=function(){var c=pe.apply(Oe,arguments);return c.length===0?as(this):ia(this,function(h,b){return b.indexOf(h)!==-1},c,"")},or.prototype.startsWithAnyOfIgnoreCase=function(){var c=pe.apply(Oe,arguments);return c.length===0?as(this):ia(this,function(h,b){return b.some(function(x){return h.indexOf(x)===0})},c,Nt)},or.prototype.anyOf=function(){var c=this,h=pe.apply(Oe,arguments),b=this._cmp;try{h.sort(b)}catch{return hn(this,qn)}if(h.length===0)return as(this);var x=new this.Collection(this,function(){return pi(h[0],h[h.length-1])});x._ondirectionchange=function(I){b=I==="next"?c._ascending:c._descending,h.sort(b)};var A=0;return x._addAlgorithm(function(I,P,z){for(var H=I.key;0<b(H,h[A]);)if(++A===h.length)return P(z),!1;return b(H,h[A])===0||(P(function(){I.continue(h[A])}),!1)}),x},or.prototype.notEqual=function(c){return this.inAnyRange([[-1/0,c],[c,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},or.prototype.noneOf=function(){var c=pe.apply(Oe,arguments);if(c.length===0)return new this.Collection(this);try{c.sort(this._ascending)}catch{return hn(this,qn)}var h=c.reduce(function(b,x){return b?b.concat([[b[b.length-1][1],x]]):[[-1/0,x]]},null);return h.push([c[c.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},or.prototype.inAnyRange=function(Re,h){var b=this,x=this._cmp,A=this._ascending,I=this._descending,P=this._min,z=this._max;if(Re.length===0)return as(this);if(!Re.every(function(je){return je[0]!==void 0&&je[1]!==void 0&&A(je[0],je[1])<=0}))return hn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$e.InvalidArgument);var H=!h||h.includeLowers!==!1,X=h&&h.includeUppers===!0,J,Q=A;function fe(je,Ue){return Q(je[0],Ue[0])}try{(J=Re.reduce(function(je,Ue){for(var Ke=0,Ze=je.length;Ke<Ze;++Ke){var lt=je[Ke];if(x(Ue[0],lt[1])<0&&0<x(Ue[1],lt[0])){lt[0]=P(lt[0],Ue[0]),lt[1]=z(lt[1],Ue[1]);break}}return Ke===Ze&&je.push(Ue),je},[])).sort(fe)}catch{return hn(this,qn)}var me=0,ge=X?function(je){return 0<A(je,J[me][1])}:function(je){return 0<=A(je,J[me][1])},ye=H?function(je){return 0<I(je,J[me][0])}:function(je){return 0<=I(je,J[me][0])},_e=ge,Re=new this.Collection(this,function(){return pi(J[0][0],J[J.length-1][1],!H,!X)});return Re._ondirectionchange=function(je){Q=je==="next"?(_e=ge,A):(_e=ye,I),J.sort(fe)},Re._addAlgorithm(function(je,Ue,Ke){for(var Ze,lt=je.key;_e(lt);)if(++me===J.length)return Ue(Ke),!1;return!ge(Ze=lt)&&!ye(Ze)||(b._cmp(lt,J[me][1])===0||b._cmp(lt,J[me][0])===0||Ue(function(){Q===A?je.continue(J[me][0]):je.continue(J[me][1])}),!1)}),Re},or.prototype.startsWithAnyOf=function(){var c=pe.apply(Oe,arguments);return c.every(function(h){return typeof h=="string"})?c.length===0?as(this):this.inAnyRange(c.map(function(h){return[h,h+Nt]})):hn(this,"startsWithAnyOf() only works with strings")},or);function or(){}function En(c){return Fn(function(h){return Br(h),c(h.target.error),!1})}function Br(c){c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault()}var Qr="storagemutated",Dt="x-storagemutated-1",qi=wr(null,Qr),Kt=(pn.prototype._lock=function(){return $(!ft.global),++this._reculock,this._reculock!==1||ft.global||(ft.lockOwnerFor=this),this},pn.prototype._unlock=function(){if($(!ft.global),--this._reculock==0)for(ft.global||(ft.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var c=this._blockedFuncs.shift();try{en(c[1],c[0])}catch{}}return this},pn.prototype._locked=function(){return this._reculock&&ft.lockOwnerFor!==this},pn.prototype.create=function(c){var h=this;if(!this.mode)return this;var b=this.db.idbdb,x=this.db._state.dbOpenError;if($(!this.idbtrans),!c&&!b)switch(x&&x.name){case"DatabaseClosedError":throw new $e.DatabaseClosed(x);case"MissingAPIError":throw new $e.MissingAPI(x.message,x);default:throw new $e.OpenFailed(x)}if(!this.active)throw new $e.TransactionInactive;return $(this._completion._state===null),(c=this.idbtrans=c||(this.db.core||b).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Fn(function(A){Br(A),h._reject(c.error)}),c.onabort=Fn(function(A){Br(A),h.active&&h._reject(new $e.Abort(c.error)),h.active=!1,h.on("abort").fire(A)}),c.oncomplete=Fn(function(){h.active=!1,h._resolve(),"mutatedParts"in c&&qi.storagemutated.fire(c.mutatedParts)}),this},pn.prototype._promise=function(c,h,b){var x=this;if(c==="readwrite"&&this.mode!=="readwrite")return _t(new $e.ReadOnly("Transaction is readonly"));if(!this.active)return _t(new $e.TransactionInactive);if(this._locked())return new dt(function(I,P){x._blockedFuncs.push([function(){x._promise(c,h,b).then(I,P)},ft])});if(b)return pt(function(){var I=new dt(function(P,z){x._lock();var H=h(P,z,x);H&&H.then&&H.then(P,z)});return I.finally(function(){return x._unlock()}),I._lib=!0,I});var A=new dt(function(I,P){var z=h(I,P,x);z&&z.then&&z.then(I,P)});return A._lib=!0,A},pn.prototype._root=function(){return this.parent?this.parent._root():this},pn.prototype.waitFor=function(c){var h,b=this._root(),x=dt.resolve(c);b._waitingFor?b._waitingFor=b._waitingFor.then(function(){return x}):(b._waitingFor=x,b._waitingQueue=[],h=b.idbtrans.objectStore(b.storeNames[0]),(function I(){for(++b._spinCount;b._waitingQueue.length;)b._waitingQueue.shift()();b._waitingFor&&(h.get(-1/0).onsuccess=I)})());var A=b._waitingFor;return new dt(function(I,P){x.then(function(z){return b._waitingQueue.push(Fn(I.bind(null,z)))},function(z){return b._waitingQueue.push(Fn(P.bind(null,z)))}).finally(function(){b._waitingFor===A&&(b._waitingFor=null)})})},pn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $e.Abort))},pn.prototype.table=function(c){var h=this._memoizedTables||(this._memoizedTables={});if(S(h,c))return h[c];var b=this.schema[c];if(!b)throw new $e.NotFound("Table "+c+" not part of transaction");return b=new this.db.Table(c,b,this),b.core=this.db.core.table(c),h[c]=b},pn);function pn(){}function xs(c,h,b,x,A,I,P){return{name:c,keyPath:h,unique:b,multi:x,auto:A,compound:I,src:(b&&!P?"&":"")+(x?"*":"")+(A?"++":"")+Zr(h)}}function Zr(c){return typeof c=="string"?c:c?"["+[].join.call(c,"+")+"]":""}function Si(c,h,b){return{name:c,primKey:h,indexes:b,mappedClass:null,idxByName:(x=function(A){return[A.name,A]},b.reduce(function(A,I,P){return P=x(I,P),P&&(A[P[0]]=P[1]),A},{}))};var x}var Jr=function(c){try{return c.only([[]]),Jr=function(){return[[]]},[[]]}catch{return Jr=function(){return Nt},Nt}};function _s(c){return c==null?function(){}:typeof c=="string"?(h=c).split(".").length===1?function(b){return b[h]}:function(b){return F(b,h)}:function(b){return F(b,c)};var h}function os(c){return[].slice.call(c)}var q=0;function ne(c){return c==null?":id":typeof c=="string"?c:"[".concat(c.join("+"),"]")}function Ce(c,h,H){function x(_e){if(_e.type===3)return null;if(_e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var me=_e.lower,ge=_e.upper,ye=_e.lowerOpen,_e=_e.upperOpen;return me===void 0?ge===void 0?null:h.upperBound(ge,!!_e):ge===void 0?h.lowerBound(me,!!ye):h.bound(me,ge,!!ye,!!_e)}function A(fe){var me,ge=fe.name;return{name:ge,schema:fe,mutate:function(ye){var _e=ye.trans,Re=ye.type,je=ye.keys,Ue=ye.values,Ke=ye.range;return new Promise(function(Ze,lt){Ze=Fn(Ze);var at=_e.objectStore(ge),ht=at.keyPath==null,yt=Re==="put"||Re==="add";if(!yt&&Re!=="delete"&&Re!=="deleteRange")throw new Error("Invalid operation type: "+Re);var vt,Ct=(je||Ue||{length:1}).length;if(je&&Ue&&je.length!==Ue.length)throw new Error("Given keys array must have same length as given values array.");if(Ct===0)return Ze({numFailures:0,failures:{},results:[],lastResult:void 0});function Vt(ei){++Ai,Br(ei)}var yn=[],Wt=[],Ai=0;if(Re==="deleteRange"){if(Ke.type===4)return Ze({numFailures:Ai,failures:Wt,results:[],lastResult:void 0});Ke.type===3?yn.push(vt=at.clear()):yn.push(vt=at.delete(x(Ke)))}else{var ht=yt?ht?[Ue,je]:[Ue,null]:[je,null],an=ht[0],mi=ht[1];if(yt)for(var gi=0;gi<Ct;++gi)yn.push(vt=mi&&mi[gi]!==void 0?at[Re](an[gi],mi[gi]):at[Re](an[gi])),vt.onerror=Vt;else for(gi=0;gi<Ct;++gi)yn.push(vt=at[Re](an[gi])),vt.onerror=Vt}function wl(ei){ei=ei.target.result,yn.forEach(function(no,El){return no.error!=null&&(Wt[El]=no.error)}),Ze({numFailures:Ai,failures:Wt,results:Re==="delete"?je:yn.map(function(no){return no.result}),lastResult:ei})}vt.onerror=function(ei){Vt(ei),wl(ei)},vt.onsuccess=wl})},getMany:function(ye){var _e=ye.trans,Re=ye.keys;return new Promise(function(je,Ue){je=Fn(je);for(var Ke,Ze=_e.objectStore(ge),lt=Re.length,at=new Array(lt),ht=0,yt=0,vt=function(yn){yn=yn.target,at[yn._pos]=yn.result,++yt===ht&&je(at)},Ct=En(Ue),Vt=0;Vt<lt;++Vt)Re[Vt]!=null&&((Ke=Ze.get(Re[Vt]))._pos=Vt,Ke.onsuccess=vt,Ke.onerror=Ct,++ht);ht===0&&je(at)})},get:function(ye){var _e=ye.trans,Re=ye.key;return new Promise(function(je,Ue){je=Fn(je);var Ke=_e.objectStore(ge).get(Re);Ke.onsuccess=function(Ze){return je(Ze.target.result)},Ke.onerror=En(Ue)})},query:(me=X,function(ye){return new Promise(function(_e,Re){_e=Fn(_e);var je,Ue,Ke,ht=ye.trans,Ze=ye.values,lt=ye.limit,vt=ye.query,at=lt===1/0?void 0:lt,yt=vt.index,vt=vt.range,ht=ht.objectStore(ge),yt=yt.isPrimaryKey?ht:ht.index(yt.name),vt=x(vt);if(lt===0)return _e({result:[]});me?((at=Ze?yt.getAll(vt,at):yt.getAllKeys(vt,at)).onsuccess=function(Ct){return _e({result:Ct.target.result})},at.onerror=En(Re)):(je=0,Ue=!Ze&&"openKeyCursor"in yt?yt.openKeyCursor(vt):yt.openCursor(vt),Ke=[],Ue.onsuccess=function(Ct){var Vt=Ue.result;return Vt?(Ke.push(Ze?Vt.value:Vt.primaryKey),++je===lt?_e({result:Ke}):void Vt.continue()):_e({result:Ke})},Ue.onerror=En(Re))})}),openCursor:function(ye){var _e=ye.trans,Re=ye.values,je=ye.query,Ue=ye.reverse,Ke=ye.unique;return new Promise(function(Ze,lt){Ze=Fn(Ze);var yt=je.index,at=je.range,ht=_e.objectStore(ge),ht=yt.isPrimaryKey?ht:ht.index(yt.name),yt=Ue?Ke?"prevunique":"prev":Ke?"nextunique":"next",vt=!Re&&"openKeyCursor"in ht?ht.openKeyCursor(x(at),yt):ht.openCursor(x(at),yt);vt.onerror=En(lt),vt.onsuccess=Fn(function(Ct){var Vt,yn,Wt,Ai,an=vt.result;an?(an.___id=++q,an.done=!1,Vt=an.continue.bind(an),yn=(yn=an.continuePrimaryKey)&&yn.bind(an),Wt=an.advance.bind(an),Ai=function(){throw new Error("Cursor not stopped")},an.trans=_e,an.stop=an.continue=an.continuePrimaryKey=an.advance=function(){throw new Error("Cursor not started")},an.fail=Fn(lt),an.next=function(){var mi=this,gi=1;return this.start(function(){return gi--?mi.continue():mi.stop()}).then(function(){return mi})},an.start=function(mi){function gi(){if(vt.result)try{mi()}catch(ei){an.fail(ei)}else an.done=!0,an.start=function(){throw new Error("Cursor behind last entry")},an.stop()}var wl=new Promise(function(ei,no){ei=Fn(ei),vt.onerror=En(no),an.fail=no,an.stop=function(El){an.stop=an.continue=an.continuePrimaryKey=an.advance=Ai,ei(El)}});return vt.onsuccess=Fn(function(ei){vt.onsuccess=gi,gi()}),an.continue=Vt,an.continuePrimaryKey=yn,an.advance=Wt,gi(),wl},Ze(an)):Ze(null)},lt)})},count:function(ye){var _e=ye.query,Re=ye.trans,je=_e.index,Ue=_e.range;return new Promise(function(Ke,Ze){var lt=Re.objectStore(ge),at=je.isPrimaryKey?lt:lt.index(je.name),lt=x(Ue),at=lt?at.count(lt):at.count();at.onsuccess=Fn(function(ht){return Ke(ht.target.result)}),at.onerror=En(Ze)})}}}var I,P,z,J=(P=H,z=os((I=c).objectStoreNames),{schema:{name:I.name,tables:z.map(function(fe){return P.objectStore(fe)}).map(function(fe){var me=fe.keyPath,_e=fe.autoIncrement,ge=p(me),ye={},_e={name:fe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:me==null,compound:ge,keyPath:me,autoIncrement:_e,unique:!0,extractKey:_s(me)},indexes:os(fe.indexNames).map(function(Re){return fe.index(Re)}).map(function(Ke){var je=Ke.name,Ue=Ke.unique,Ze=Ke.multiEntry,Ke=Ke.keyPath,Ze={name:je,compound:p(Ke),keyPath:Ke,unique:Ue,multiEntry:Ze,extractKey:_s(Ke)};return ye[ne(Ke)]=Ze}),getIndexByKeyPath:function(Re){return ye[ne(Re)]}};return ye[":id"]=_e.primaryKey,me!=null&&(ye[ne(me)]=_e.primaryKey),_e})},hasGetAll:0<z.length&&"getAll"in P.objectStore(z[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),H=J.schema,X=J.hasGetAll,J=H.tables.map(A),Q={};return J.forEach(function(fe){return Q[fe.name]=fe}),{stack:"dbcore",transaction:c.transaction.bind(c),table:function(fe){if(!Q[fe])throw new Error("Table '".concat(fe,"' not found"));return Q[fe]},MIN_KEY:-1/0,MAX_KEY:Jr(h),schema:H}}function qe(c,h,b,x){var A=b.IDBKeyRange;return b.indexedDB,{dbcore:(x=Ce(h,A,x),c.dbcore.reduce(function(I,P){return P=P.create,r(r({},I),P(I))},x))}}function kt(c,x){var b=x.db,x=qe(c._middlewares,b,c._deps,x);c.core=x.dbcore,c.tables.forEach(function(A){var I=A.name;c.core.schema.tables.some(function(P){return P.name===I})&&(A.core=c.core.table(I),c[I]instanceof c.Table&&(c[I].core=A.core))})}function wt(c,h,b,x){b.forEach(function(A){var I=x[A];h.forEach(function(P){var z=(function H(X,J){return M(X,J)||(X=y(X))&&H(X,J)})(P,A);(!z||"value"in z&&z.value===void 0)&&(P===c.Transaction.prototype||P instanceof c.Transaction?N(P,A,{get:function(){return this.table(A)},set:function(H){C(this,A,{value:H,writable:!0,configurable:!0,enumerable:!0})}}):P[A]=new c.Table(A,I))})})}function dn(c,h){h.forEach(function(b){for(var x in b)b[x]instanceof c.Table&&delete b[x]})}function _n(c,h){return c._cfg.version-h._cfg.version}function lr(c,h,b,x){var A=c._dbSchema;b.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=Si("$meta",ji("")[0],[]),c._storeNames.push("$meta"));var I=c._createTransaction("readwrite",c._storeNames,A);I.create(b),I._completion.catch(x);var P=I._reject.bind(I),z=ft.transless||ft;pt(function(){return ft.trans=I,ft.transless=z,h!==0?(kt(c,b),X=h,((H=I).storeNames.includes("$meta")?H.table("$meta").get("version").then(function(J){return J??X}):dt.resolve(X)).then(function(J){return fe=J,me=I,ge=b,ye=[],J=(Q=c)._versions,_e=Q._dbSchema=cr(0,Q.idbdb,ge),(J=J.filter(function(Re){return Re._cfg.version>=fe})).length!==0?(J.forEach(function(Re){ye.push(function(){var je=_e,Ue=Re._cfg.dbschema;Vr(Q,je,ge),Vr(Q,Ue,ge),_e=Q._dbSchema=Ue;var Ke=Er(je,Ue);Ke.add.forEach(function(yt){Ur(ge,yt[0],yt[1].primKey,yt[1].indexes)}),Ke.change.forEach(function(yt){if(yt.recreate)throw new $e.Upgrade("Not yet support for changing primary key");var vt=ge.objectStore(yt.name);yt.add.forEach(function(Ct){return Lr(vt,Ct)}),yt.change.forEach(function(Ct){vt.deleteIndex(Ct.name),Lr(vt,Ct)}),yt.del.forEach(function(Ct){return vt.deleteIndex(Ct)})});var Ze=Re._cfg.contentUpgrade;if(Ze&&Re._cfg.version>fe){kt(Q,ge),me._memoizedTables={};var lt=Z(Ue);Ke.del.forEach(function(yt){lt[yt]=je[yt]}),dn(Q,[Q.Transaction.prototype]),wt(Q,[Q.Transaction.prototype],u(lt),lt),me.schema=lt;var at,ht=K(Ze);return ht&&mt(),Ke=dt.follow(function(){var yt;(at=Ze(me))&&ht&&(yt=ut.bind(null,null),at.then(yt,yt))}),at&&typeof at.then=="function"?dt.resolve(at):Ke.then(function(){return at})}}),ye.push(function(je){var Ue,Ke,Ze=Re._cfg.dbschema;Ue=Ze,Ke=je,[].slice.call(Ke.db.objectStoreNames).forEach(function(lt){return Ue[lt]==null&&Ke.db.deleteObjectStore(lt)}),dn(Q,[Q.Transaction.prototype]),wt(Q,[Q.Transaction.prototype],Q._storeNames,Q._dbSchema),me.schema=Q._dbSchema}),ye.push(function(je){Q.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Q.idbdb.version/10)===Re._cfg.version?(Q.idbdb.deleteObjectStore("$meta"),delete Q._dbSchema.$meta,Q._storeNames=Q._storeNames.filter(function(Ue){return Ue!=="$meta"})):je.objectStore("$meta").put(Re._cfg.version,"version"))})}),(function Re(){return ye.length?dt.resolve(ye.shift()(me.idbtrans)).then(Re):dt.resolve()})().then(function(){$t(_e,ge)})):dt.resolve();var Q,fe,me,ge,ye,_e}).catch(P)):(u(A).forEach(function(J){Ur(b,J,A[J].primKey,A[J].indexes)}),kt(c,b),void dt.follow(function(){return c.on.populate.fire(I)}).catch(P));var H,X})}function Mn(c,h){$t(c._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var b=cr(0,c.idbdb,h);Vr(c,c._dbSchema,h);for(var x=0,A=Er(b,c._dbSchema).change;x<A.length;x++){var I=(function(P){if(P.change.length||P.recreate)return console.warn("Unable to patch indexes of table ".concat(P.name," because it has changes on the type of index or primary key.")),{value:void 0};var z=h.objectStore(P.name);P.add.forEach(function(H){ot&&console.debug("Dexie upgrade patch: Creating missing index ".concat(P.name,".").concat(H.src)),Lr(z,H)})})(A[x]);if(typeof I=="object")return I.value}}function Er(c,h){var b,x={del:[],add:[],change:[]};for(b in c)h[b]||x.del.push(b);for(b in h){var A=c[b],I=h[b];if(A){var P={name:b,def:I,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(I.primKey.keyPath||"")||A.primKey.auto!==I.primKey.auto)P.recreate=!0,x.change.push(P);else{var z=A.idxByName,H=I.idxByName,X=void 0;for(X in z)H[X]||P.del.push(X);for(X in H){var J=z[X],Q=H[X];J?J.src!==Q.src&&P.change.push(Q):P.add.push(Q)}(0<P.del.length||0<P.add.length||0<P.change.length)&&x.change.push(P)}}else x.add.push([b,I])}return x}function Ur(c,h,b,x){var A=c.db.createObjectStore(h,b.keyPath?{keyPath:b.keyPath,autoIncrement:b.auto}:{autoIncrement:b.auto});return x.forEach(function(I){return Lr(A,I)}),A}function $t(c,h){u(c).forEach(function(b){h.db.objectStoreNames.contains(b)||(ot&&console.debug("Dexie: Creating missing table",b),Ur(h,b,c[b].primKey,c[b].indexes))})}function Lr(c,h){c.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function cr(c,h,b){var x={};return k(h.objectStoreNames,0).forEach(function(A){for(var I=b.objectStore(A),P=xs(Zr(X=I.keyPath),X||"",!0,!1,!!I.autoIncrement,X&&typeof X!="string",!0),z=[],H=0;H<I.indexNames.length;++H){var J=I.index(I.indexNames[H]),X=J.keyPath,J=xs(J.name,X,!!J.unique,!!J.multiEntry,!1,X&&typeof X!="string",!1);z.push(J)}x[A]=Si(A,P,z)}),x}function Vr(c,h,b){for(var x=b.db.objectStoreNames,A=0;A<x.length;++A){var I=x[A],P=b.objectStore(I);c._hasGetAll="getAll"in P;for(var z=0;z<P.indexNames.length;++z){var H=P.indexNames[z],X=P.index(H).keyPath,J=typeof X=="string"?X:"["+k(X).join("+")+"]";!h[I]||(X=h[I].idxByName[J])&&(X.name=H,delete h[I].idxByName[J],h[I].idxByName[H]=X)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(c._hasGetAll=!1)}function ji(c){return c.split(",").map(function(h,b){var x=(h=h.trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return xs(x,A||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),p(A),b===0)})}var ze=(nn.prototype._parseStoresSpec=function(c,h){u(c).forEach(function(b){if(c[b]!==null){var x=ji(c[b]),A=x.shift();if(A.unique=!0,A.multi)throw new $e.Schema("Primary key cannot be multi-valued");x.forEach(function(I){if(I.auto)throw new $e.Schema("Only primary key can be marked as autoIncrement (++)");if(!I.keyPath)throw new $e.Schema("Index must have a name and cannot be an empty string")}),h[b]=Si(b,A,x)}})},nn.prototype.stores=function(b){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,b):b;var b=h._versions,x={},A={};return b.forEach(function(I){g(x,I._cfg.storesSource),A=I._cfg.dbschema={},I._parseStoresSpec(x,A)}),h._dbSchema=A,dn(h,[h._allTables,h,h.Transaction.prototype]),wt(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],u(A),A),h._storeNames=u(A),this},nn.prototype.upgrade=function(c){return this._cfg.contentUpgrade=jn(this._cfg.contentUpgrade||Se,c),this},nn);function nn(){}function Sr(c,h){var b=c._dbNamesDB;return b||(b=c._dbNamesDB=new Vi(We,{addons:[],indexedDB:c,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),b.table("dbnames")}function ls(c){return c&&typeof c.databases=="function"}function pl(c){return pt(function(){return ft.letThrough=!0,c()})}function ml(c){return!("from"in c)}var xi=function(c,h){if(!this){var b=new xi;return c&&"d"in c&&g(b,c),b}g(this,arguments.length?{d:1,from:c,to:1<arguments.length?h:c}:{d:0})};function No(c,h,b){var x=st(h,b);if(!isNaN(x)){if(0<x)throw RangeError();if(ml(c))return g(c,{from:h,to:b,d:1});var A=c.l,x=c.r;if(st(b,c.from)<0)return A?No(A,h,b):c.l={from:h,to:b,d:1,l:null,r:null},Rr(c);if(0<st(h,c.to))return x?No(x,h,b):c.r={from:h,to:b,d:1,l:null,r:null},Rr(c);st(h,c.from)<0&&(c.from=h,c.l=null,c.d=x?x.d+1:1),0<st(b,c.to)&&(c.to=b,c.r=null,c.d=c.l?c.l.d+1:1),b=!c.r,A&&!c.l&&Ia(c,A),x&&b&&Ia(c,x)}}function Ia(c,h){ml(h)||(function b(x,H){var I=H.from,P=H.to,z=H.l,H=H.r;No(x,I,P),z&&b(x,z),H&&b(x,H)})(c,h)}function Hr(c,h){var b=sa(h),x=b.next();if(x.done)return!1;for(var A=x.value,I=sa(c),P=I.next(A.from),z=P.value;!x.done&&!P.done;){if(st(z.from,A.to)<=0&&0<=st(z.to,A.from))return!0;st(A.from,z.from)<0?A=(x=b.next(z.from)).value:z=(P=I.next(A.from)).value}return!1}function sa(c){var h=ml(c)?null:{s:0,n:c};return{next:function(b){for(var x=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,x)for(;h.n.l&&st(b,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!x||st(b,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Rr(c){var h,b,x=(((h=c.r)===null||h===void 0?void 0:h.d)||0)-(((b=c.l)===null||b===void 0?void 0:b.d)||0),A=1<x?"r":x<-1?"l":"";A&&(h=A=="r"?"l":"r",b=r({},c),x=c[A],c.from=x.from,c.to=x.to,c[A]=x[A],b[A]=x[h],(c[h]=b).d=To(b)),c.d=To(c)}function To(b){var h=b.r,b=b.l;return(h?b?Math.max(h.d,b.d):h.d:b?b.d:0)+1}function As(c,h){return u(h).forEach(function(b){c[b]?Ia(c[b],h[b]):c[b]=(function x(A){var I,P,z={};for(I in A)S(A,I)&&(P=A[I],z[I]=!P||typeof P!="object"||G.has(P.constructor)?P:x(P));return z})(h[b])}),c}function Kn(c,h){return c.all||h.all||Object.keys(c).some(function(b){return h[b]&&Hr(h[b],c[b])})}_(xi.prototype,((_i={add:function(c){return Ia(this,c),this},addKey:function(c){return No(this,c,c),this},addKeys:function(c){var h=this;return c.forEach(function(b){return No(h,b,b)}),this},hasKey:function(c){var h=sa(this).next(c).value;return h&&st(h.from,c)<=0&&0<=st(h.to,c)}})[ee]=function(){return sa(this)},_i));var Pt={},bc={},er=!1;function Cs(c){As(bc,c),er||(er=!0,setTimeout(function(){er=!1,aa(bc,!(bc={}))},0))}function aa(c,h){h===void 0&&(h=!1);var b=new Set;if(c.all)for(var x=0,A=Object.values(Pt);x<A.length;x++)vu(P=A[x],c,b,h);else for(var I in c){var P,z=/^idb\:\/\/(.*)\/(.*)\//.exec(I);z&&(I=z[1],z=z[2],(P=Pt["idb://".concat(I,"/").concat(z)])&&vu(P,c,b,h))}b.forEach(function(H){return H()})}function vu(c,h,b,x){for(var A=[],I=0,P=Object.entries(c.queries.query);I<P.length;I++){for(var z=P[I],H=z[0],X=[],J=0,Q=z[1];J<Q.length;J++){var fe=Q[J];Kn(h,fe.obsSet)?fe.subscribers.forEach(function(_e){return b.add(_e)}):x&&X.push(fe)}x&&A.push([H,X])}if(x)for(var me=0,ge=A;me<ge.length;me++){var ye=ge[me],H=ye[0],X=ye[1];c.queries.query[H]=X}}function Ns(c){var h=c._state,b=c._deps.indexedDB;if(h.isBeingOpened||c.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?_t(h.dbOpenError):c});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var x=h.openCanceller,A=Math.round(10*c.verno),I=!1;function P(){if(h.openCanceller!==x)throw new $e.DatabaseClosed("db.open() was cancelled")}function z(){return new dt(function(fe,me){if(P(),!b)throw new $e.MissingAPI;var ge=c.name,ye=h.autoSchema||!A?b.open(ge):b.open(ge,A);if(!ye)throw new $e.MissingAPI;ye.onerror=En(me),ye.onblocked=Fn(c._fireOnBlocked),ye.onupgradeneeded=Fn(function(_e){var Re;J=ye.transaction,h.autoSchema&&!c._options.allowEmptyDB?(ye.onerror=Br,J.abort(),ye.result.close(),(Re=b.deleteDatabase(ge)).onsuccess=Re.onerror=Fn(function(){me(new $e.NoSuchDatabase("Database ".concat(ge," doesnt exist")))})):(J.onerror=En(me),_e=_e.oldVersion>Math.pow(2,62)?0:_e.oldVersion,Q=_e<1,c.idbdb=ye.result,I&&Mn(c,J),lr(c,_e/10,J,me))},me),ye.onsuccess=Fn(function(){J=null;var _e,Re,je,Ue,Ke,Ze=c.idbdb=ye.result,lt=k(Ze.objectStoreNames);if(0<lt.length)try{var at=Ze.transaction((Ue=lt).length===1?Ue[0]:Ue,"readonly");if(h.autoSchema)Re=Ze,je=at,(_e=c).verno=Re.version/10,je=_e._dbSchema=cr(0,Re,je),_e._storeNames=k(Re.objectStoreNames,0),wt(_e,[_e._allTables],u(je),je);else if(Vr(c,c._dbSchema,at),((Ke=Er(cr(0,(Ke=c).idbdb,at),Ke._dbSchema)).add.length||Ke.change.some(function(ht){return ht.add.length||ht.change.length}))&&!I)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ze.close(),A=Ze.version+1,I=!0,fe(z());kt(c,at)}catch{}Nn.push(c),Ze.onversionchange=Fn(function(ht){h.vcFired=!0,c.on("versionchange").fire(ht)}),Ze.onclose=Fn(function(ht){c.on("close").fire(ht)}),Q&&(Ke=c._deps,at=ge,Ze=Ke.indexedDB,Ke=Ke.IDBKeyRange,ls(Ze)||at===We||Sr(Ze,Ke).put({name:at}).catch(Se)),fe()},me)}).catch(function(fe){switch(fe?.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),z();break;case"VersionError":if(0<A)return A=0,z()}return dt.reject(fe)})}var H,X=h.dbReadyResolve,J=null,Q=!1;return dt.race([x,(typeof navigator>"u"?dt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(fe){function me(){return indexedDB.databases().finally(fe)}H=setInterval(me,100),me()}).finally(function(){return clearInterval(H)}):Promise.resolve()).then(z)]).then(function(){return P(),h.onReadyBeingFired=[],dt.resolve(pl(function(){return c.on.ready.fire(c.vip)})).then(function fe(){if(0<h.onReadyBeingFired.length){var me=h.onReadyBeingFired.reduce(jn,Se);return h.onReadyBeingFired=[],dt.resolve(pl(function(){return me(c.vip)})).then(fe)}})}).finally(function(){h.openCanceller===x&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(fe){h.dbOpenError=fe;try{J&&J.abort()}catch{}return x===h.openCanceller&&c._close(),_t(fe)}).finally(function(){h.openComplete=!0,X()}).then(function(){var fe;return Q&&(fe={},c.tables.forEach(function(me){me.schema.indexes.forEach(function(ge){ge.name&&(fe["idb://".concat(c.name,"/").concat(me.name,"/").concat(ge.name)]=new xi(-1/0,[[[]]]))}),fe["idb://".concat(c.name,"/").concat(me.name,"/")]=fe["idb://".concat(c.name,"/").concat(me.name,"/:dels")]=new xi(-1/0,[[[]]])}),qi(Qr).fire(fe),aa(fe,!0)),c})}function Oo(c){function h(I){return c.next(I)}var b=A(h),x=A(function(I){return c.throw(I)});function A(I){return function(H){var z=I(H),H=z.value;return z.done?H:H&&typeof H.then=="function"?H.then(b,x):p(H)?Promise.all(H).then(b,x):b(H)}}return A(h)()}function Ro(c,h,b){for(var x=p(c)?c.slice():[c],A=0;A<b;++A)x.push(h);return x}var Io={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(c){return r(r({},c),{table:function(h){var b=c.table(h),x=b.schema,A={},I=[];function P(Q,fe,me){var ge=ne(Q),ye=A[ge]=A[ge]||[],_e=Q==null?0:typeof Q=="string"?1:Q.length,Re=0<fe,Re=r(r({},me),{name:Re?"".concat(ge,"(virtual-from:").concat(me.name,")"):me.name,lowLevelIndex:me,isVirtual:Re,keyTail:fe,keyLength:_e,extractKey:_s(Q),unique:!Re&&me.unique});return ye.push(Re),Re.isPrimaryKey||I.push(Re),1<_e&&P(_e===2?Q[0]:Q.slice(0,_e-1),fe+1,me),ye.sort(function(je,Ue){return je.keyTail-Ue.keyTail}),Re}h=P(x.primaryKey.keyPath,0,x.primaryKey),A[":id"]=[h];for(var z=0,H=x.indexes;z<H.length;z++){var X=H[z];P(X.keyPath,0,X)}function J(Q){var fe,me=Q.query.index;return me.isVirtual?r(r({},Q),{query:{index:me.lowLevelIndex,range:(fe=Q.query.range,me=me.keyTail,{type:fe.type===1?2:fe.type,lower:Ro(fe.lower,fe.lowerOpen?c.MAX_KEY:c.MIN_KEY,me),lowerOpen:!0,upper:Ro(fe.upper,fe.upperOpen?c.MIN_KEY:c.MAX_KEY,me),upperOpen:!0})}}):Q}return r(r({},b),{schema:r(r({},x),{primaryKey:h,indexes:I,getIndexByKeyPath:function(Q){return(Q=A[ne(Q)])&&Q[0]}}),count:function(Q){return b.count(J(Q))},query:function(Q){return b.query(J(Q))},openCursor:function(Q){var fe=Q.query.index,me=fe.keyTail,ge=fe.isVirtual,ye=fe.keyLength;return ge?b.openCursor(J(Q)).then(function(Re){return Re&&_e(Re)}):b.openCursor(Q);function _e(Re){return Object.create(Re,{continue:{value:function(je){je!=null?Re.continue(Ro(je,Q.reverse?c.MAX_KEY:c.MIN_KEY,me)):Q.unique?Re.continue(Re.key.slice(0,ye).concat(Q.reverse?c.MIN_KEY:c.MAX_KEY,me)):Re.continue()}},continuePrimaryKey:{value:function(je,Ue){Re.continuePrimaryKey(Ro(je,c.MAX_KEY,me),Ue)}},primaryKey:{get:function(){return Re.primaryKey}},key:{get:function(){var je=Re.key;return ye===1?je[0]:je.slice(0,ye)}},value:{get:function(){return Re.value}}})}}})}})}};function oa(c,h,b,x){return b=b||{},x=x||"",u(c).forEach(function(A){var I,P,z;S(h,A)?(I=c[A],P=h[A],typeof I=="object"&&typeof P=="object"&&I&&P?(z=ue(I))!==ue(P)?b[x+A]=h[A]:z==="Object"?oa(I,P,b,x+A+"."):I!==P&&(b[x+A]=h[A]):I!==P&&(b[x+A]=h[A])):b[x+A]=void 0}),u(h).forEach(function(A){S(c,A)||(b[x+A]=h[A])}),b}function gl(c,h){return h.type==="delete"?h.keys:h.keys||h.values.map(c.extractKey)}var bu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(c){return r(r({},c),{table:function(h){var b=c.table(h),x=b.schema.primaryKey;return r(r({},b),{mutate:function(A){var I=ft.trans,P=I.table(h).hook,z=P.deleting,H=P.creating,X=P.updating;switch(A.type){case"add":if(H.fire===Se)break;return I._promise("readwrite",function(){return J(A)},!0);case"put":if(H.fire===Se&&X.fire===Se)break;return I._promise("readwrite",function(){return J(A)},!0);case"delete":if(z.fire===Se)break;return I._promise("readwrite",function(){return J(A)},!0);case"deleteRange":if(z.fire===Se)break;return I._promise("readwrite",function(){return(function Q(fe,me,ge){return b.query({trans:fe,values:!1,query:{index:x,range:me},limit:ge}).then(function(ye){var _e=ye.result;return J({type:"delete",keys:_e,trans:fe}).then(function(Re){return 0<Re.numFailures?Promise.reject(Re.failures[0]):_e.length<ge?{failures:[],numFailures:0,lastResult:void 0}:Q(fe,r(r({},me),{lower:_e[_e.length-1],lowerOpen:!0}),ge)})})})(A.trans,A.range,1e4)},!0)}return b.mutate(A);function J(Q){var fe,me,ge,ye=ft.trans,_e=Q.keys||gl(x,Q);if(!_e)throw new Error("Keys missing");return(Q=Q.type==="add"||Q.type==="put"?r(r({},Q),{keys:_e}):r({},Q)).type!=="delete"&&(Q.values=i([],Q.values)),Q.keys&&(Q.keys=i([],Q.keys)),fe=b,ge=_e,((me=Q).type==="add"?Promise.resolve([]):fe.getMany({trans:me.trans,keys:ge,cache:"immutable"})).then(function(Re){var je=_e.map(function(Ue,Ke){var Ze,lt,at,ht=Re[Ke],yt={onerror:null,onsuccess:null};return Q.type==="delete"?z.fire.call(yt,Ue,ht,ye):Q.type==="add"||ht===void 0?(Ze=H.fire.call(yt,Ue,Q.values[Ke],ye),Ue==null&&Ze!=null&&(Q.keys[Ke]=Ue=Ze,x.outbound||B(Q.values[Ke],x.keyPath,Ue))):(Ze=oa(ht,Q.values[Ke]),(lt=X.fire.call(yt,Ze,Ue,ht,ye))&&(at=Q.values[Ke],Object.keys(lt).forEach(function(vt){S(at,vt)?at[vt]=lt[vt]:B(at,vt,lt[vt])}))),yt});return b.mutate(Q).then(function(Ue){for(var Ke=Ue.failures,Ze=Ue.results,lt=Ue.numFailures,Ue=Ue.lastResult,at=0;at<_e.length;++at){var ht=(Ze||_e)[at],yt=je[at];ht==null?yt.onerror&&yt.onerror(Ke[at]):yt.onsuccess&&yt.onsuccess(Q.type==="put"&&Re[at]?Q.values[at]:ht)}return{failures:Ke,results:Ze,numFailures:lt,lastResult:Ue}}).catch(function(Ue){return je.forEach(function(Ke){return Ke.onerror&&Ke.onerror(Ue)}),Promise.reject(Ue)})})}}})}})}};function la(c,h,b){try{if(!h||h.keys.length<c.length)return null;for(var x=[],A=0,I=0;A<h.keys.length&&I<c.length;++A)st(h.keys[A],c[I])===0&&(x.push(b?se(h.values[A]):h.values[A]),++I);return x.length===c.length?x:null}catch{return null}}var yl={stack:"dbcore",level:-1,create:function(c){return{table:function(h){var b=c.table(h);return r(r({},b),{getMany:function(x){if(!x.cache)return b.getMany(x);var A=la(x.keys,x.trans._cache,x.cache==="clone");return A?dt.resolve(A):b.getMany(x).then(function(I){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?se(I):I},I})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),b.mutate(x)}})}}}};function wc(c,h){return c.trans.mode==="readonly"&&!!c.subscr&&!c.trans.explicit&&c.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function Ma(c,h){switch(c){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ja={stack:"dbcore",level:0,name:"Observability",create:function(c){var h=c.schema.name,b=new xi(c.MIN_KEY,c.MAX_KEY);return r(r({},c),{transaction:function(x,A,I){if(ft.subscr&&A!=="readonly")throw new $e.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ft.querier));return c.transaction(x,A,I)},table:function(x){var A=c.table(x),I=A.schema,P=I.primaryKey,Q=I.indexes,z=P.extractKey,H=P.outbound,X=P.autoIncrement&&Q.filter(function(me){return me.compound&&me.keyPath.includes(P.keyPath)}),J=r(r({},A),{mutate:function(me){function ge(vt){return vt="idb://".concat(h,"/").concat(x,"/").concat(vt),Ue[vt]||(Ue[vt]=new xi)}var ye,_e,Re,je=me.trans,Ue=me.mutatedParts||(me.mutatedParts={}),Ke=ge(""),Ze=ge(":dels"),lt=me.type,yt=me.type==="deleteRange"?[me.range]:me.type==="delete"?[me.keys]:me.values.length<50?[gl(P,me).filter(function(vt){return vt}),me.values]:[],at=yt[0],ht=yt[1],yt=me.trans._cache;return p(at)?(Ke.addKeys(at),(yt=lt==="delete"||at.length===ht.length?la(at,yt):null)||Ze.addKeys(at),(yt||ht)&&(ye=ge,_e=yt,Re=ht,I.indexes.forEach(function(vt){var Ct=ye(vt.name||"");function Vt(Wt){return Wt!=null?vt.extractKey(Wt):null}function yn(Wt){return vt.multiEntry&&p(Wt)?Wt.forEach(function(Ai){return Ct.addKey(Ai)}):Ct.addKey(Wt)}(_e||Re).forEach(function(Wt,mi){var an=_e&&Vt(_e[mi]),mi=Re&&Vt(Re[mi]);st(an,mi)!==0&&(an!=null&&yn(an),mi!=null&&yn(mi))})}))):at?(ht={from:(ht=at.lower)!==null&&ht!==void 0?ht:c.MIN_KEY,to:(ht=at.upper)!==null&&ht!==void 0?ht:c.MAX_KEY},Ze.add(ht),Ke.add(ht)):(Ke.add(b),Ze.add(b),I.indexes.forEach(function(vt){return ge(vt.name).add(b)})),A.mutate(me).then(function(vt){return!at||me.type!=="add"&&me.type!=="put"||(Ke.addKeys(vt.results),X&&X.forEach(function(Ct){for(var Vt=me.values.map(function(an){return Ct.extractKey(an)}),yn=Ct.keyPath.findIndex(function(an){return an===P.keyPath}),Wt=0,Ai=vt.results.length;Wt<Ai;++Wt)Vt[Wt][yn]=vt.results[Wt];ge(Ct.name).addKeys(Vt)})),je.mutatedParts=As(je.mutatedParts||{},Ue),vt})}}),Q=function(ge){var ye=ge.query,ge=ye.index,ye=ye.range;return[ge,new xi((ge=ye.lower)!==null&&ge!==void 0?ge:c.MIN_KEY,(ye=ye.upper)!==null&&ye!==void 0?ye:c.MAX_KEY)]},fe={get:function(me){return[P,new xi(me.key)]},getMany:function(me){return[P,new xi().addKeys(me.keys)]},count:Q,query:Q,openCursor:Q};return u(fe).forEach(function(me){J[me]=function(ge){var ye=ft.subscr,_e=!!ye,Re=wc(ft,A)&&Ma(me,ge)?ge.obsSet={}:ye;if(_e){var je=function(ht){return ht="idb://".concat(h,"/").concat(x,"/").concat(ht),Re[ht]||(Re[ht]=new xi)},Ue=je(""),Ke=je(":dels"),ye=fe[me](ge),_e=ye[0],ye=ye[1];if((me==="query"&&_e.isPrimaryKey&&!ge.values?Ke:je(_e.name||"")).add(ye),!_e.isPrimaryKey){if(me!=="count"){var Ze=me==="query"&&H&&ge.values&&A.query(r(r({},ge),{values:!1}));return A[me].apply(this,arguments).then(function(ht){if(me==="query"){if(H&&ge.values)return Ze.then(function(Vt){return Vt=Vt.result,Ue.addKeys(Vt),ht});var yt=ge.values?ht.result.map(z):ht.result;(ge.values?Ue:Ke).addKeys(yt)}else if(me==="openCursor"){var vt=ht,Ct=ge.values;return vt&&Object.create(vt,{key:{get:function(){return Ke.addKey(vt.primaryKey),vt.key}},primaryKey:{get:function(){var Vt=vt.primaryKey;return Ke.addKey(Vt),Vt}},value:{get:function(){return Ct&&Ue.addKey(vt.primaryKey),vt.value}}})}return ht})}Ke.add(b)}}return A[me].apply(this,arguments)}}),J}})}};function js(c,h,b){if(b.numFailures===0)return h;if(h.type==="deleteRange")return null;var x=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return b.numFailures===x?null:(h=r({},h),p(h.keys)&&(h.keys=h.keys.filter(function(A,I){return!(I in b.failures)})),"values"in h&&p(h.values)&&(h.values=h.values.filter(function(A,I){return!(I in b.failures)})),h)}function eo(c,h){return b=c,((x=h).lower===void 0||(x.lowerOpen?0<st(b,x.lower):0<=st(b,x.lower)))&&(c=c,(h=h).upper===void 0||(h.upperOpen?st(c,h.upper)<0:st(c,h.upper)<=0));var b,x}function $i(c,h,fe,x,A,I){if(!fe||fe.length===0)return c;var P=h.query.index,z=P.multiEntry,H=h.query.range,X=x.schema.primaryKey.extractKey,J=P.extractKey,Q=(P.lowLevelIndex||P).extractKey,fe=fe.reduce(function(me,ge){var ye=me,_e=[];if(ge.type==="add"||ge.type==="put")for(var Re=new xi,je=ge.values.length-1;0<=je;--je){var Ue,Ke=ge.values[je],Ze=X(Ke);Re.hasKey(Ze)||(Ue=J(Ke),(z&&p(Ue)?Ue.some(function(vt){return eo(vt,H)}):eo(Ue,H))&&(Re.addKey(Ze),_e.push(Ke)))}switch(ge.type){case"add":var lt=new xi().addKeys(h.values?me.map(function(Ct){return X(Ct)}):me),ye=me.concat(h.values?_e.filter(function(Ct){return Ct=X(Ct),!lt.hasKey(Ct)&&(lt.addKey(Ct),!0)}):_e.map(function(Ct){return X(Ct)}).filter(function(Ct){return!lt.hasKey(Ct)&&(lt.addKey(Ct),!0)}));break;case"put":var at=new xi().addKeys(ge.values.map(function(Ct){return X(Ct)}));ye=me.filter(function(Ct){return!at.hasKey(h.values?X(Ct):Ct)}).concat(h.values?_e:_e.map(function(Ct){return X(Ct)}));break;case"delete":var ht=new xi().addKeys(ge.keys);ye=me.filter(function(Ct){return!ht.hasKey(h.values?X(Ct):Ct)});break;case"deleteRange":var yt=ge.range;ye=me.filter(function(Ct){return!eo(X(Ct),yt)})}return ye},c);return fe===c?c:(fe.sort(function(me,ge){return st(Q(me),Q(ge))||st(X(me),X(ge))}),h.limit&&h.limit<1/0&&(fe.length>h.limit?fe.length=h.limit:c.length===h.limit&&fe.length<h.limit&&(A.dirty=!0)),I?Object.freeze(fe):fe)}function vl(c,h){return st(c.lower,h.lower)===0&&st(c.upper,h.upper)===0&&!!c.lowerOpen==!!h.lowerOpen&&!!c.upperOpen==!!h.upperOpen}function cs(c,h){return(function(b,x,A,I){if(b===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((x=st(b,x))===0){if(A&&I)return 0;if(A)return 1;if(I)return-1}return x})(c.lower,h.lower,c.lowerOpen,h.lowerOpen)<=0&&0<=(function(b,x,A,I){if(b===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((x=st(b,x))===0){if(A&&I)return 0;if(A)return-1;if(I)return 1}return x})(c.upper,h.upper,c.upperOpen,h.upperOpen)}function Mo(c,h,b,x){c.subscribers.add(b),x.addEventListener("abort",function(){var A,I;c.subscribers.delete(b),c.subscribers.size===0&&(A=c,I=h,setTimeout(function(){A.subscribers.size===0&&we(I,A)},3e3))})}var Da={stack:"dbcore",level:0,name:"Cache",create:function(c){var h=c.schema.name;return r(r({},c),{transaction:function(b,x,A){var I,P,z=c.transaction(b,x,A);return x==="readwrite"&&(P=(I=new AbortController).signal,A=function(H){return function(){if(I.abort(),x==="readwrite"){for(var X=new Set,J=0,Q=b;J<Q.length;J++){var fe=Q[J],me=Pt["idb://".concat(h,"/").concat(fe)];if(me){var ge=c.table(fe),ye=me.optimisticOps.filter(function(Ct){return Ct.trans===z});if(z._explicit&&H&&z.mutatedParts)for(var _e=0,Re=Object.values(me.queries.query);_e<Re.length;_e++)for(var je=0,Ue=(lt=Re[_e]).slice();je<Ue.length;je++)Kn((at=Ue[je]).obsSet,z.mutatedParts)&&(we(lt,at),at.subscribers.forEach(function(Ct){return X.add(Ct)}));else if(0<ye.length){me.optimisticOps=me.optimisticOps.filter(function(Ct){return Ct.trans!==z});for(var Ke=0,Ze=Object.values(me.queries.query);Ke<Ze.length;Ke++)for(var lt,at,ht,yt=0,vt=(lt=Ze[Ke]).slice();yt<vt.length;yt++)(at=vt[yt]).res!=null&&z.mutatedParts&&(H&&!at.dirty?(ht=Object.isFrozen(at.res),ht=$i(at.res,at.req,ye,ge,at,ht),at.dirty?(we(lt,at),at.subscribers.forEach(function(Ct){return X.add(Ct)})):ht!==at.res&&(at.res=ht,at.promise=dt.resolve({result:ht}))):(at.dirty&&we(lt,at),at.subscribers.forEach(function(Ct){return X.add(Ct)})))}}}X.forEach(function(Ct){return Ct()})}}},z.addEventListener("abort",A(!1),{signal:P}),z.addEventListener("error",A(!1),{signal:P}),z.addEventListener("complete",A(!0),{signal:P})),z},table:function(b){var x=c.table(b),A=x.schema.primaryKey;return r(r({},x),{mutate:function(I){var P=ft.trans;if(A.outbound||P.db._options.cache==="disabled"||P.explicit||P.idbtrans.mode!=="readwrite")return x.mutate(I);var z=Pt["idb://".concat(h,"/").concat(b)];return z?(P=x.mutate(I),I.type!=="add"&&I.type!=="put"||!(50<=I.values.length||gl(A,I).some(function(H){return H==null}))?(z.optimisticOps.push(I),I.mutatedParts&&Cs(I.mutatedParts),P.then(function(H){0<H.numFailures&&(we(z.optimisticOps,I),(H=js(0,I,H))&&z.optimisticOps.push(H),I.mutatedParts&&Cs(I.mutatedParts))}),P.catch(function(){we(z.optimisticOps,I),I.mutatedParts&&Cs(I.mutatedParts)})):P.then(function(H){var X=js(0,r(r({},I),{values:I.values.map(function(J,Q){var fe;return H.failures[Q]?J:(J=(fe=A.keyPath)!==null&&fe!==void 0&&fe.includes(".")?se(J):r({},J),B(J,A.keyPath,H.results[Q]),J)})}),H);z.optimisticOps.push(X),queueMicrotask(function(){return I.mutatedParts&&Cs(I.mutatedParts)})}),P):x.mutate(I)},query:function(I){if(!wc(ft,x)||!Ma("query",I))return x.query(I);var P=((X=ft.trans)===null||X===void 0?void 0:X.db._options.cache)==="immutable",Q=ft,z=Q.requery,H=Q.signal,X=(function(ge,ye,_e,Re){var je=Pt["idb://".concat(ge,"/").concat(ye)];if(!je)return[];if(!(ye=je.queries[_e]))return[null,!1,je,null];var Ue=ye[(Re.query?Re.query.index.name:null)||""];if(!Ue)return[null,!1,je,null];switch(_e){case"query":var Ke=Ue.find(function(Ze){return Ze.req.limit===Re.limit&&Ze.req.values===Re.values&&vl(Ze.req.query.range,Re.query.range)});return Ke?[Ke,!0,je,Ue]:[Ue.find(function(Ze){return("limit"in Ze.req?Ze.req.limit:1/0)>=Re.limit&&(!Re.values||Ze.req.values)&&cs(Ze.req.query.range,Re.query.range)}),!1,je,Ue];case"count":return Ke=Ue.find(function(Ze){return vl(Ze.req.query.range,Re.query.range)}),[Ke,!!Ke,je,Ue]}})(h,b,"query",I),J=X[0],Q=X[1],fe=X[2],me=X[3];return J&&Q?J.obsSet=I.obsSet:(Q=x.query(I).then(function(ge){var ye=ge.result;if(J&&(J.res=ye),P){for(var _e=0,Re=ye.length;_e<Re;++_e)Object.freeze(ye[_e]);Object.freeze(ye)}else ge.result=se(ye);return ge}).catch(function(ge){return me&&J&&we(me,J),Promise.reject(ge)}),J={obsSet:I.obsSet,promise:Q,subscribers:new Set,type:"query",req:I,dirty:!1},me?me.push(J):(me=[J],(fe=fe||(Pt["idb://".concat(h,"/").concat(b)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[I.query.index.name||""]=me)),Mo(J,me,z,H),J.promise.then(function(ge){return{result:$i(ge.result,I,fe?.optimisticOps,x,J,P)}})}})}})}};function bl(c,h){return new Proxy(c,{get:function(b,x,A){return x==="db"?h:Reflect.get(b,x,A)}})}var Vi=($n.prototype.version=function(c){if(isNaN(c)||c<.1)throw new $e.Type("Given version is not a positive number");if(c=Math.round(10*c)/10,this.idbdb||this._state.isBeingOpened)throw new $e.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,c);var h=this._versions,b=h.filter(function(x){return x._cfg.version===c})[0];return b||(b=new this.Version(c),h.push(b),h.sort(_n),b.stores({}),this._state.autoSchema=!1,b)},$n.prototype._whenReady=function(c){var h=this;return this.idbdb&&(this._state.openComplete||ft.letThrough||this._vip)?c():new dt(function(b,x){if(h._state.openComplete)return x(new $e.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void x(new $e.DatabaseClosed);h.open().catch(Se)}h._state.dbReadyPromise.then(b,x)}).then(c)},$n.prototype.use=function(c){var h=c.stack,b=c.create,x=c.level,A=c.name;return A&&this.unuse({stack:h,name:A}),c=this._middlewares[h]||(this._middlewares[h]=[]),c.push({stack:h,create:b,level:x??10,name:A}),c.sort(function(I,P){return I.level-P.level}),this},$n.prototype.unuse=function(c){var h=c.stack,b=c.name,x=c.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(A){return x?A.create!==x:!!b&&A.name!==b})),this},$n.prototype.open=function(){var c=this;return en(et,function(){return Ns(c)})},$n.prototype._close=function(){var c=this._state,h=Nn.indexOf(this);if(0<=h&&Nn.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}c.isBeingOpened||(c.dbReadyPromise=new dt(function(b){c.dbReadyResolve=b}),c.openCanceller=new dt(function(b,x){c.cancelOpen=x}))},$n.prototype.close=function(b){var h=(b===void 0?{disableAutoOpen:!0}:b).disableAutoOpen,b=this._state;h?(b.isBeingOpened&&b.cancelOpen(new $e.DatabaseClosed),this._close(),b.autoOpen=!1,b.dbOpenError=new $e.DatabaseClosed):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)},$n.prototype.delete=function(c){var h=this;c===void 0&&(c={disableAutoOpen:!0});var b=0<arguments.length&&typeof arguments[0]!="object",x=this._state;return new dt(function(A,I){function P(){h.close(c);var z=h._deps.indexedDB.deleteDatabase(h.name);z.onsuccess=Fn(function(){var H,X,J;H=h._deps,X=h.name,J=H.indexedDB,H=H.IDBKeyRange,ls(J)||X===We||Sr(J,H).delete(X).catch(Se),A()}),z.onerror=En(I),z.onblocked=h._fireOnBlocked}if(b)throw new $e.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(P):P()})},$n.prototype.backendDB=function(){return this.idbdb},$n.prototype.isOpen=function(){return this.idbdb!==null},$n.prototype.hasBeenClosed=function(){var c=this._state.dbOpenError;return c&&c.name==="DatabaseClosed"},$n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},$n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty($n.prototype,"tables",{get:function(){var c=this;return u(this._allTables).map(function(h){return c._allTables[h]})},enumerable:!1,configurable:!0}),$n.prototype.transaction=function(){var c=(function(h,b,x){var A=arguments.length;if(A<2)throw new $e.InvalidArgument("Too few arguments");for(var I=new Array(A-1);--A;)I[A-1]=arguments[A];return x=I.pop(),[h,Ne(I),x]}).apply(this,arguments);return this._transaction.apply(this,c)},$n.prototype._transaction=function(c,h,b){var x=this,A=ft.trans;A&&A.db===this&&c.indexOf("!")===-1||(A=null);var I,P,z=c.indexOf("?")!==-1;c=c.replace("!","").replace("?","");try{if(P=h.map(function(X){if(X=X instanceof x.Table?X.name:X,typeof X!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return X}),c=="r"||c===Mr)I=Mr;else{if(c!="rw"&&c!=gn)throw new $e.InvalidArgument("Invalid transaction mode: "+c);I=gn}if(A){if(A.mode===Mr&&I===gn){if(!z)throw new $e.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&P.forEach(function(X){if(A&&A.storeNames.indexOf(X)===-1){if(!z)throw new $e.SubTransaction("Table "+X+" not included in parent transaction.");A=null}}),z&&A&&!A.active&&(A=null)}}catch(X){return A?A._promise(null,function(J,Q){Q(X)}):_t(X)}var H=(function X(J,Q,fe,me,ge){return dt.resolve().then(function(){var ye=ft.transless||ft,_e=J._createTransaction(Q,fe,J._dbSchema,me);if(_e.explicit=!0,ye={trans:_e,transless:ye},me)_e.idbtrans=me.idbtrans;else try{_e.create(),_e.idbtrans._explicit=!0,J._state.PR1398_maxLoop=3}catch(Ue){return Ue.name===Ye.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return X(J,Q,fe,null,ge)})):_t(Ue)}var Re,je=K(ge);return je&&mt(),ye=dt.follow(function(){var Ue;(Re=ge.call(_e,_e))&&(je?(Ue=ut.bind(null,null),Re.then(Ue,Ue)):typeof Re.next=="function"&&typeof Re.throw=="function"&&(Re=Oo(Re)))},ye),(Re&&typeof Re.then=="function"?dt.resolve(Re).then(function(Ue){return _e.active?Ue:_t(new $e.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ye.then(function(){return Re})).then(function(Ue){return me&&_e._resolve(),_e._completion.then(function(){return Ue})}).catch(function(Ue){return _e._reject(Ue),_t(Ue)})})}).bind(null,this,I,P,A,b);return A?A._promise(I,H,"lock"):ft.trans?en(ft.transless,function(){return x._whenReady(H)}):this._whenReady(H)},$n.prototype.table=function(c){if(!S(this._allTables,c))throw new $e.InvalidTable("Table ".concat(c," does not exist"));return this._allTables[c]},$n);function $n(c,h){var b=this;this._middlewares={},this.verno=0;var x=$n.dependencies;this._options=h=r({addons:$n.addons,autoOpen:!0,indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},x=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,I,P,z,H,X={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};X.dbReadyPromise=new dt(function(Q){X.dbReadyResolve=Q}),X.openCanceller=new dt(function(Q,fe){X.cancelOpen=fe}),this._state=X,this.name=c,this.on=wr(this,"populate","blocked","versionchange","close",{ready:[jn,Se]}),this.on.ready.subscribe=j(this.on.ready.subscribe,function(Q){return function(fe,me){$n.vip(function(){var ge,ye=b._state;ye.openComplete?(ye.dbOpenError||dt.resolve().then(fe),me&&Q(fe)):ye.onReadyBeingFired?(ye.onReadyBeingFired.push(fe),me&&Q(fe)):(Q(fe),ge=b,me||Q(function _e(){ge.on.ready.unsubscribe(fe),ge.on.ready.unsubscribe(_e)}))})}}),this.Collection=(A=this,wi(ar.prototype,function(Re,_e){this.db=A;var me=Pr,ge=null;if(_e)try{me=_e()}catch(je){ge=je}var ye=Re._ctx,_e=ye.table,Re=_e.hook.reading.fire;this._ctx={table:_e,index:ye.index,isPrimKey:!ye.index||_e.schema.primKey.keyPath&&ye.index===_e.schema.primKey.name,range:me,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ge,or:ye.or,valueMapper:Re!==Me?Re:null}})),this.Table=(I=this,wi(br.prototype,function(Q,fe,me){this.db=I,this._tx=me,this.name=Q,this.schema=fe,this.hook=I._allTables[Q]?I._allTables[Q].hook:wr(null,{creating:[Mt,Se],reading:[Qe,Me],updating:[Zt,Se],deleting:[ln,Se]})})),this.Transaction=(P=this,wi(Kt.prototype,function(Q,fe,me,ge,ye){var _e=this;this.db=P,this.mode=Q,this.storeNames=fe,this.schema=me,this.chromeTransactionDurability=ge,this.idbtrans=null,this.on=wr(this,"complete","error","abort"),this.parent=ye||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new dt(function(Re,je){_e._resolve=Re,_e._reject=je}),this._completion.then(function(){_e.active=!1,_e.on.complete.fire()},function(Re){var je=_e.active;return _e.active=!1,_e.on.error.fire(Re),_e.parent?_e.parent._reject(Re):je&&_e.idbtrans&&_e.idbtrans.abort(),_t(Re)})})),this.Version=(z=this,wi(ze.prototype,function(Q){this.db=z,this._cfg={version:Q,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(H=this,wi(Dr.prototype,function(Q,fe,me){if(this.db=H,this._ctx={table:Q,index:fe===":id"?null:fe,or:me},this._cmp=this._ascending=st,this._descending=function(ge,ye){return st(ye,ge)},this._max=function(ge,ye){return 0<st(ge,ye)?ge:ye},this._min=function(ge,ye){return st(ge,ye)<0?ge:ye},this._IDBKeyRange=H._deps.IDBKeyRange,!this._IDBKeyRange)throw new $e.MissingAPI})),this.on("versionchange",function(Q){0<Q.newVersion?console.warn("Another connection wants to upgrade database '".concat(b.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(b.name,"'. Closing db now to resume the delete request.")),b.close({disableAutoOpen:!1})}),this.on("blocked",function(Q){!Q.newVersion||Q.newVersion<Q.oldVersion?console.warn("Dexie.delete('".concat(b.name,"') was blocked")):console.warn("Upgrade '".concat(b.name,"' blocked by other connection holding version ").concat(Q.oldVersion/10))}),this._maxKey=Jr(h.IDBKeyRange),this._createTransaction=function(Q,fe,me,ge){return new b.Transaction(Q,fe,me,b._options.chromeTransactionDurability,ge)},this._fireOnBlocked=function(Q){b.on("blocked").fire(Q),Nn.filter(function(fe){return fe.name===b.name&&fe!==b&&!fe._state.vcFired}).map(function(fe){return fe.on("versionchange").fire(Q)})},this.use(yl),this.use(Da),this.use(Ja),this.use(Io),this.use(bu);var J=new Proxy(this,{get:function(Q,fe,me){if(fe==="_vip")return!0;if(fe==="table")return function(ye){return bl(b.table(ye),J)};var ge=Reflect.get(Q,fe,me);return ge instanceof br?bl(ge,J):fe==="tables"?ge.map(function(ye){return bl(ye,J)}):fe==="_createTransaction"?function(){return bl(ge.apply(this,arguments),J)}:ge}});this.vip=J,x.forEach(function(Q){return Q(b)})}var Do,_i=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",La=(An.prototype.subscribe=function(c,h,b){return this._subscribe(c&&typeof c!="function"?c:{next:c,error:h,complete:b})},An.prototype[_i]=function(){return this},An);function An(c){this._subscribe=c}try{Do={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Do={indexedDB:null,IDBKeyRange:null}}function to(c){var h,b=!1,x=new La(function(A){var I=K(c),P,z=!1,H={},X={},J={get closed(){return z},unsubscribe:function(){z||(z=!0,P&&P.abort(),Q&&qi.storagemutated.unsubscribe(me))}};A.start&&A.start(J);var Q=!1,fe=function(){return wn(ge)},me=function(ye){As(H,ye),Kn(X,H)&&fe()},ge=function(){var ye,_e,Re;!z&&Do.indexedDB&&(H={},ye={},P&&P.abort(),P=new AbortController,Re=(function(je){var Ue=Dn();try{I&&mt();var Ke=pt(c,je);return Ke=I?Ke.finally(ut):Ke}finally{Ue&&Jn()}})(_e={subscr:ye,signal:P.signal,requery:fe,querier:c,trans:null}),Promise.resolve(Re).then(function(je){b=!0,h=je,z||_e.signal.aborted||(H={},(function(Ue){for(var Ke in Ue)if(S(Ue,Ke))return;return 1})(X=ye)||Q||(qi(Qr,me),Q=!0),wn(function(){return!z&&A.next&&A.next(je)}))},function(je){b=!1,["DatabaseClosedError","AbortError"].includes(je?.name)||z||wn(function(){z||A.error&&A.error(je)})}))};return setTimeout(fe,0),J});return x.hasValue=function(){return b},x.getValue=function(){return h},x}var W=Vi;function o(c){var h=d;try{d=!0,qi.storagemutated.fire(c),aa(c,!0)}finally{d=h}}_(W,r(r({},xe),{delete:function(c){return new W(c,{addons:[]}).delete()},exists:function(c){return new W(c,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(c){try{return h=W.dependencies,b=h.indexedDB,h=h.IDBKeyRange,(ls(b)?Promise.resolve(b.databases()).then(function(x){return x.map(function(A){return A.name}).filter(function(A){return A!==We})}):Sr(b,h).toCollection().primaryKeys()).then(c)}catch{return _t(new $e.MissingAPI)}var h,b},defineClass:function(){return function(c){g(this,c)}},ignoreTransaction:function(c){return ft.trans?en(ft.transless,c):c()},vip:pl,async:function(c){return function(){try{var h=Oo(c.apply(this,arguments));return h&&typeof h.then=="function"?h:dt.resolve(h)}catch(b){return _t(b)}}},spawn:function(c,h,b){try{var x=Oo(c.apply(b,h||[]));return x&&typeof x.then=="function"?x:dt.resolve(x)}catch(A){return _t(A)}},currentTransaction:{get:function(){return ft.trans||null}},waitFor:function(c,h){return h=dt.resolve(typeof c=="function"?W.ignoreTransaction(c):c).timeout(h||6e4),ft.trans?ft.trans.waitFor(h):h},Promise:dt,debug:{get:function(){return ot},set:function(c){Wr(c)}},derive:R,extend:g,props:_,override:j,Events:wr,on:qi,liveQuery:to,extendObservabilitySet:As,getByKeyPath:F,setByKeyPath:B,delByKeyPath:function(c,h){typeof h=="string"?B(c,h,void 0):"length"in h&&[].map.call(h,function(b){B(c,b,void 0)})},shallowClone:Z,deepClone:se,getObjectDiff:oa,cmp:st,asap:U,minKey:-1/0,addons:[],connections:Nn,errnames:Ye,dependencies:Do,cache:Pt,semVer:"4.0.10",version:"4.0.10".split(".").map(function(c){return parseInt(c)}).reduce(function(c,h,b){return c+h/Math.pow(10,2*b)})})),W.maxKey=Jr(W.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(qi(Qr,function(c){d||(c=new CustomEvent(Dt,{detail:c}),d=!0,dispatchEvent(c),d=!1)}),addEventListener(Dt,function(c){c=c.detail,d||o(c)}));var f,d=!1,v=function(){};return typeof BroadcastChannel<"u"&&((v=function(){(f=new BroadcastChannel(Dt)).onmessage=function(c){return c.data&&o(c.data)}})(),typeof f.unref=="function"&&f.unref(),qi(Qr,function(c){d||f.postMessage(c)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(c){if(!Vi.disableBfCache&&c.persisted){ot&&console.debug("Dexie: handling persisted pagehide"),f?.close();for(var h=0,b=Nn;h<b.length;h++)b[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(c){!Vi.disableBfCache&&c.persisted&&(ot&&console.debug("Dexie: handling persisted pageshow"),v(),o({all:new xi(-1/0,[[]])}))})),dt.rejectionMapper=function(c,h){return!c||c instanceof ae||c instanceof TypeError||c instanceof SyntaxError||!c.name||!bt[c.name]?c:(h=new bt[c.name](h||c.message,c),"stack"in c&&N(h,"stack",{get:function(){return this.inner.stack}}),h)},Wr(ot),r(Vi,Object.freeze({__proto__:null,Dexie:Vi,liveQuery:to,Entity:cn,cmp:st,PropModSymbol:he,PropModification:At,replacePrefix:function(c,h){return new At({replacePrefix:[c,h]})},add:function(c){return new At({add:c})},remove:function(c){return new At({remove:c})},default:Vi,RangeSet:xi,mergeRanges:Ia,rangesOverlap:Hr}),{default:Vi}),Vi})})(T0)),T0.exports}var nq=tq();const tw=So(nq),uA=Symbol.for("Dexie"),Q0=globalThis[uA]||(globalThis[uA]=tw);if(tw.semVer!==Q0.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${tw.semVer} and ${Q0.semVer}`);const{liveQuery:Zie,mergeRanges:Jie,rangesOverlap:ese,RangeSet:tse,cmp:nse,Entity:rse,PropModSymbol:ise,PropModification:sse,replacePrefix:ase,add:ose,remove:lse}=Q0;var Z0="docs",rq="changes",fA="attachments",H8="dexie",hA=new Map,O0=new Map;function iq(t,e,n,r){var i="rxdb-dexie-"+t+"--"+r.version+"--"+e,a=vs(hA,i,()=>{var u=(async()=>{var p=Tr(n);p.autoOpen=!1;var g=new Q0(i,p);n.onCreate&&await n.onCreate(g,i);var y={[Z0]:oq(r),[rq]:"++sequence, id",[fA]:"id"};return g.version(1).stores(y),await g.open(),{dexieDb:g,dexieTable:g[Z0],dexieAttachmentsTable:g[fA],booleanIndexes:lq(r)}})();return hA.set(i,a),O0.set(a,0),u});return a}async function sq(t){var e=await t,n=O0.get(t),r=n-1;r===0?(e.dexieDb.close(),O0.delete(t)):O0.set(t,r)}var nw="__";function zf(t){var e=t.split(".");if(e.length>1)return e.map(r=>zf(r)).join(".");if(t.startsWith("|")){var n=t.substring(1);return nw+n}else return t}function K8(t){var e=t.split(".");if(e.length>1)return e.map(r=>K8(r)).join(".");if(t.startsWith(nw)){var n=t.substring(nw.length);return"|"+n}else return t}function aq(t,e){if(!e)return e;var n=Tr(e);return n=rw(n),t.forEach(r=>{var i=oc(e,r),a=i?"1":"0",u=zf(r);d5(n,u,a)}),n}function G8(t,e){return e&&(e=Tr(e),e=iw(e),t.forEach(n=>{var r=oc(e,n),i=r==="1";d5(e,n,i)}),e)}function rw(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(n=>rw(n));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="object"&&(r=rw(r)),e[zf(n)]=r}),e}}function iw(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(n=>iw(n));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([n,r])=>{(typeof r=="object"||Array.isArray(t))&&(r=iw(r)),e[K8(n)]=r}),e}}function oq(t){var e=[],n=ks(t.primaryKey);e.push([n]),e.push(["_deleted",n]),t.indexes&&t.indexes.forEach(a=>{var u=hd(a);e.push(u)}),e.push(["_meta.lwt",n]),e.push(["_meta.lwt"]),e=e.map(a=>a.map(u=>zf(u)));var r=e.map(a=>a.length===1?a[0]:"["+a.join("+")+"]");r=r.filter((a,u,p)=>p.indexOf(a)===u);var i=r.join(", ");return i}async function dA(t,e){var n=await t,r=await n.dexieTable.bulkGet(e);return r.map(i=>G8(n.booleanIndexes,i))}function mm(t,e){return t+"||"+e}function lq(t){var e=new Set,n=[];return t.indexes?(t.indexes.forEach(r=>{var i=hd(r);i.forEach(a=>{if(!e.has(a)){e.add(a);var u=Nf(t,a);u.type==="boolean"&&n.push(a)}})}),n.push("_deleted"),tj(n)):n}function pA(t){return t===mf?-1/0:t}function mA(t,e,n){if(t.includes(e)){var r=n===pf||n===!0?"1":"0";return r}else return n}function Y8(t,e,n){if(!n){if(typeof window>"u")throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var r=e.startKeys.map((u,p)=>{var g=e.index[p];return mA(t,g,u)}).map(pA),i=e.endKeys.map((u,p)=>{var g=e.index[p];return mA(t,g,u)}).map(pA),a=n.bound(r,i,!e.inclusiveStart,!e.inclusiveEnd);return a}async function gA(t,e){var n=await t.internals,r=e.query,i=r.skip?r.skip:0,a=r.limit?r.limit:1/0,u=i+a,p=e.queryPlan,g=!1;p.selectorSatisfiedByIndex||(g=b2(t.schema,e.query));var y=Y8(n.booleanIndexes,p,n.dexieDb._options.IDBKeyRange),w=p.index,S=[];if(await n.dexieDb.transaction("r",n.dexieTable,async C=>{var N=C.idbtrans,R=N.objectStore(Z0),M,L;L="["+w.map(j=>zf(j)).join("+")+"]",M=R.index(L);var k=M.openCursor(y);await new Promise(j=>{k.onsuccess=function($){var U=$.target.result;if(U){var F=G8(n.booleanIndexes,U.value);(!g||g(F))&&S.push(F),p.sortSatisfiedByIndex&&S.length===u?j():U.continue()}else j()}})}),!p.sortSatisfiedByIndex){var _=t8(t.schema,e.query);S=S.sort(_)}return S=S.slice(i,u),{documents:S}}async function cq(t,e){var n=await t.internals,r=e.queryPlan,i=r.index,a=Y8(n.booleanIndexes,r,n.dexieDb._options.IDBKeyRange),u=-1;return await n.dexieDb.transaction("r",n.dexieTable,async p=>{var g=p.idbtrans,y=g.objectStore(Z0),w,S;S="["+i.map(C=>zf(C)).join("+")+"]",w=y.index(S);var _=w.count(a);u=await new Promise((C,N)=>{_.onsuccess=function(){C(_.result)},_.onerror=R=>N(R)})}),u}var uq=ea(),dv=!1,fq=(function(){function t(n,r,i,a,u,p,g,y){this.changes$=new is,this.instanceId=uq++,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=a,this.internals=u,this.options=p,this.settings=g,this.devMode=y,this.primaryPath=ks(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=async function(r,i){Dc(this),!dv&&!await m5()&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium/?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),dv=!0,r.forEach(w=>{if(!w.document._rev||w.previous&&!w.previous._rev)throw Tt("SNH",{args:{row:w}})});var a=await this.internals,u={error:[]};this.devMode&&(r=r.map(w=>{var S=Jd(w.document);return{previous:w.previous,document:S}}));var p=r.map(w=>w.document[this.primaryPath]),g;if(await a.dexieDb.transaction("rw",a.dexieTable,a.dexieAttachmentsTable,async()=>{var w=new Map,S=await dA(this.internals,p);S.forEach(N=>{var R=N;return R&&w.set(R[this.primaryPath],R),R}),g=HB(this,this.primaryPath,w,r,i),u.error=g.errors;var _=[];g.bulkInsertDocs.forEach(N=>{_.push(N.document)}),g.bulkUpdateDocs.forEach(N=>{_.push(N.document)}),_=_.map(N=>aq(a.booleanIndexes,N)),_.length>0&&await a.dexieTable.bulkPut(_);var C=[];g.attachmentsAdd.forEach(N=>{C.push({id:mm(N.documentId,N.attachmentId),data:N.attachmentData.data})}),g.attachmentsUpdate.forEach(N=>{C.push({id:mm(N.documentId,N.attachmentId),data:N.attachmentData.data})}),await a.dexieAttachmentsTable.bulkPut(C),await a.dexieAttachmentsTable.bulkDelete(g.attachmentsRemove.map(N=>mm(N.documentId,N.attachmentId)))}),g=Ht(g),g.eventBulk.events.length>0){var y=Ht(g.newestRow).document;g.eventBulk.checkpoint={id:y[this.primaryPath],lwt:y._meta.lwt},this.changes$.next(g.eventBulk)}return u},e.findDocumentsById=async function(r,i){Dc(this);var a=await this.internals,u=[];return await a.dexieDb.transaction("r",a.dexieTable,async()=>{var p=await dA(this.internals,r);p.forEach(g=>{g&&(!g._deleted||i)&&u.push(g)})}),u},e.query=function(r){return Dc(this),gA(this,r)},e.count=async function(r){if(r.queryPlan.selectorSatisfiedByIndex){var i=await cq(this,r);return{count:i,mode:"fast"}}else{var a=await gA(this,r);return{count:a.documents.length,mode:"slow"}}},e.changeStream=function(){return Dc(this),this.changes$.asObservable()},e.cleanup=async function(r){Dc(this);var i=await this.internals;return await i.dexieDb.transaction("rw",i.dexieTable,async()=>{var a=ea()-r,u=await i.dexieTable.where("_meta.lwt").below(a).toArray(),p=[];u.forEach(g=>{g._deleted==="1"&&p.push(g[this.primaryPath])}),await i.dexieTable.bulkDelete(p)}),!0},e.getAttachmentData=async function(r,i,a){Dc(this);var u=await this.internals,p=mm(r,i);return await u.dexieDb.transaction("r",u.dexieAttachmentsTable,async()=>{var g=await u.dexieAttachmentsTable.get(p);if(g)return g.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+i)})},e.remove=async function(){Dc(this);var r=await this.internals;return await r.dexieTable.clear(),this.close()},e.close=function(){return this.closed?this.closed:(this.closed=(async()=>{this.changes$.complete(),await sq(this.internals)})(),this.closed)},t})();async function hq(t,e,n){var r=iq(e.databaseName,e.collectionName,n,e.schema),i=new fq(t,e.databaseName,e.collectionName,e.schema,r,e.options,n,e.devMode);return await QF(H8,e,i),Promise.resolve(i)}function Dc(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var dq=(function(){function t(n){this.name=H8,this.rxdbVersion=p5,this.settings=n}var e=t.prototype;return e.createStorageInstance=function(r){if(YB(r),r.schema.indexes){var i=r.schema.indexes.flat();i.filter(a=>!a.includes(".")).forEach(a=>{if(!r.schema.required||!r.schema.required.includes(a))throw Tt("DXE1",{field:a,schema:r.schema})})}return hq(this,r,this.settings)},t})();function pq(t={}){var e=new dq(t);return e}var gm={exports:{}},pv={},Wo={},Lc={},mv={},gv={},yv={},yA;function J0(){return yA||(yA=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(k){if(super(),!t.IDENTIFIER.test(k))throw new Error("CodeGen: name must be a valid identifier");this.str=k}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(k){super(),this._items=typeof k=="string"?[k]:k}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const k=this._items[0];return k===""||k==='""'}get str(){var k;return(k=this._str)!==null&&k!==void 0?k:this._str=this._items.reduce((j,$)=>`${j}${$}`,"")}get names(){var k;return(k=this._names)!==null&&k!==void 0?k:this._names=this._items.reduce((j,$)=>($ instanceof n&&(j[$.str]=(j[$.str]||0)+1),j),{})}}t._Code=r,t.nil=new r("");function i(L,...k){const j=[L[0]];let $=0;for(;$<k.length;)p(j,k[$]),j.push(L[++$]);return new r(j)}t._=i;const a=new r("+");function u(L,...k){const j=[C(L[0])];let $=0;for(;$<k.length;)j.push(a),p(j,k[$]),j.push(a,C(L[++$]));return g(j),new r(j)}t.str=u;function p(L,k){k instanceof r?L.push(...k._items):k instanceof n?L.push(k):L.push(S(k))}t.addCodeArg=p;function g(L){let k=1;for(;k<L.length-1;){if(L[k]===a){const j=y(L[k-1],L[k+1]);if(j!==void 0){L.splice(k-1,3,j);continue}L[k++]="+"}k++}}function y(L,k){if(k==='""')return L;if(L==='""')return k;if(typeof L=="string")return k instanceof n||L[L.length-1]!=='"'?void 0:typeof k!="string"?`${L.slice(0,-1)}${k}"`:k[0]==='"'?L.slice(0,-1)+k.slice(1):void 0;if(typeof k=="string"&&k[0]==='"'&&!(L instanceof n))return`"${L}${k.slice(1)}`}function w(L,k){return k.emptyStr()?L:L.emptyStr()?k:u`${L}${k}`}t.strConcat=w;function S(L){return typeof L=="number"||typeof L=="boolean"||L===null?L:C(Array.isArray(L)?L.join(","):L)}function _(L){return new r(C(L))}t.stringify=_;function C(L){return JSON.stringify(L).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=C;function N(L){return typeof L=="string"&&t.IDENTIFIER.test(L)?new r(`.${L}`):i`[${L}]`}t.getProperty=N;function R(L){if(typeof L=="string"&&t.IDENTIFIER.test(L))return new r(`${L}`);throw new Error(`CodeGen: invalid export name: ${L}, use explicit $id name mapping`)}t.getEsmExportName=R;function M(L){return new r(L.toString())}t.regexpCode=M})(yv)),yv}var vv={},vA;function bA(){return vA||(vA=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=J0();class n extends Error{constructor(y){super(`CodeGen: "code" for ${y} not defined`),this.value=y.value}}var r;(function(g){g[g.Started=0]="Started",g[g.Completed=1]="Completed"})(r||(t.UsedValueState=r={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:y,parent:w}={}){this._names={},this._prefixes=y,this._parent=w}toName(y){return y instanceof e.Name?y:this.name(y)}name(y){return new e.Name(this._newName(y))}_newName(y){const w=this._names[y]||this._nameGroup(y);return`${y}${w.index++}`}_nameGroup(y){var w,S;if(!((S=(w=this._parent)===null||w===void 0?void 0:w._prefixes)===null||S===void 0)&&S.has(y)||this._prefixes&&!this._prefixes.has(y))throw new Error(`CodeGen: prefix "${y}" is not allowed in this scope`);return this._names[y]={prefix:y,index:0}}}t.Scope=i;class a extends e.Name{constructor(y,w){super(w),this.prefix=y}setValue(y,{property:w,itemIndex:S}){this.value=y,this.scopePath=(0,e._)`.${new e.Name(w)}[${S}]`}}t.ValueScopeName=a;const u=(0,e._)`\n`;class p extends i{constructor(y){super(y),this._values={},this._scope=y.scope,this.opts={...y,_n:y.lines?u:e.nil}}get(){return this._scope}name(y){return new a(y,this._newName(y))}value(y,w){var S;if(w.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const _=this.toName(y),{prefix:C}=_,N=(S=w.key)!==null&&S!==void 0?S:w.ref;let R=this._values[C];if(R){const k=R.get(N);if(k)return k}else R=this._values[C]=new Map;R.set(N,_);const M=this._scope[C]||(this._scope[C]=[]),L=M.length;return M[L]=w.ref,_.setValue(w,{property:C,itemIndex:L}),_}getValue(y,w){const S=this._values[y];if(S)return S.get(w)}scopeRefs(y,w=this._values){return this._reduceValues(w,S=>{if(S.scopePath===void 0)throw new Error(`CodeGen: name "${S}" has no value`);return(0,e._)`${y}${S.scopePath}`})}scopeCode(y=this._values,w,S){return this._reduceValues(y,_=>{if(_.value===void 0)throw new Error(`CodeGen: name "${_}" has no value`);return _.value.code},w,S)}_reduceValues(y,w,S={},_){let C=e.nil;for(const N in y){const R=y[N];if(!R)continue;const M=S[N]=S[N]||new Map;R.forEach(L=>{if(M.has(L))return;M.set(L,r.Started);let k=w(L);if(k){const j=this.opts.es5?t.varKinds.var:t.varKinds.const;C=(0,e._)`${C}${j} ${L} = ${k};${this.opts._n}`}else if(k=_?.(L))C=(0,e._)`${C}${k}${this.opts._n}`;else throw new n(L);M.set(L,r.Completed)})}return C}}t.ValueScope=p})(vv)),vv}var wA;function In(){return wA||(wA=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=J0(),n=bA();var r=J0();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var i=bA();Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class a{optimizeNodes(){return this}optimizeNames(Y,ie){return this}}class u extends a{constructor(Y,ie,be){super(),this.varKind=Y,this.name=ie,this.rhs=be}render({es5:Y,_n:ie}){const be=Y?n.varKinds.var:this.varKind,Ye=this.rhs===void 0?"":` = ${this.rhs}`;return`${be} ${this.name}${Ye};`+ie}optimizeNames(Y,ie){if(Y[this.name.str])return this.rhs&&(this.rhs=Ee(this.rhs,Y,ie)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class p extends a{constructor(Y,ie,be){super(),this.lhs=Y,this.rhs=ie,this.sideEffects=be}render({_n:Y}){return`${this.lhs} = ${this.rhs};`+Y}optimizeNames(Y,ie){if(!(this.lhs instanceof e.Name&&!Y[this.lhs.str]&&!this.sideEffects))return this.rhs=Ee(this.rhs,Y,ie),this}get names(){const Y=this.lhs instanceof e.Name?{}:{...this.lhs.names};return se(Y,this.rhs)}}class g extends p{constructor(Y,ie,be,Ye){super(Y,be,Ye),this.op=ie}render({_n:Y}){return`${this.lhs} ${this.op}= ${this.rhs};`+Y}}class y extends a{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`${this.label}:`+Y}}class w extends a{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`break${this.label?` ${this.label}`:""};`+Y}}class S extends a{constructor(Y){super(),this.error=Y}render({_n:Y}){return`throw ${this.error};`+Y}get names(){return this.error.names}}class _ extends a{constructor(Y){super(),this.code=Y}render({_n:Y}){return`${this.code};`+Y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Y,ie){return this.code=Ee(this.code,Y,ie),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class C extends a{constructor(Y=[]){super(),this.nodes=Y}render(Y){return this.nodes.reduce((ie,be)=>ie+be.render(Y),"")}optimizeNodes(){const{nodes:Y}=this;let ie=Y.length;for(;ie--;){const be=Y[ie].optimizeNodes();Array.isArray(be)?Y.splice(ie,1,...be):be?Y[ie]=be:Y.splice(ie,1)}return Y.length>0?this:void 0}optimizeNames(Y,ie){const{nodes:be}=this;let Ye=be.length;for(;Ye--;){const Ve=be[Ye];Ve.optimizeNames(Y,ie)||(ue(Y,Ve.names),be.splice(Ye,1))}return be.length>0?this:void 0}get names(){return this.nodes.reduce((Y,ie)=>ce(Y,ie.names),{})}}class N extends C{render(Y){return"{"+Y._n+super.render(Y)+"}"+Y._n}}class R extends C{}class M extends N{}M.kind="else";class L extends N{constructor(Y,ie){super(ie),this.condition=Y}render(Y){let ie=`if(${this.condition})`+super.render(Y);return this.else&&(ie+="else "+this.else.render(Y)),ie}optimizeNodes(){super.optimizeNodes();const Y=this.condition;if(Y===!0)return this.nodes;let ie=this.else;if(ie){const be=ie.optimizeNodes();ie=this.else=Array.isArray(be)?new M(be):be}if(ie)return Y===!1?ie instanceof L?ie:ie.nodes:this.nodes.length?this:new L(ee(Y),ie instanceof L?[ie]:ie.nodes);if(!(Y===!1||!this.nodes.length))return this}optimizeNames(Y,ie){var be;if(this.else=(be=this.else)===null||be===void 0?void 0:be.optimizeNames(Y,ie),!!(super.optimizeNames(Y,ie)||this.else))return this.condition=Ee(this.condition,Y,ie),this}get names(){const Y=super.names;return se(Y,this.condition),this.else&&ce(Y,this.else.names),Y}}L.kind="if";class k extends N{}k.kind="for";class j extends k{constructor(Y){super(),this.iteration=Y}render(Y){return`for(${this.iteration})`+super.render(Y)}optimizeNames(Y,ie){if(super.optimizeNames(Y,ie))return this.iteration=Ee(this.iteration,Y,ie),this}get names(){return ce(super.names,this.iteration.names)}}class $ extends k{constructor(Y,ie,be,Ye){super(),this.varKind=Y,this.name=ie,this.from=be,this.to=Ye}render(Y){const ie=Y.es5?n.varKinds.var:this.varKind,{name:be,from:Ye,to:Ve}=this;return`for(${ie} ${be}=${Ye}; ${be}<${Ve}; ${be}++)`+super.render(Y)}get names(){const Y=se(super.names,this.from);return se(Y,this.to)}}class U extends k{constructor(Y,ie,be,Ye){super(),this.loop=Y,this.varKind=ie,this.name=be,this.iterable=Ye}render(Y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Y)}optimizeNames(Y,ie){if(super.optimizeNames(Y,ie))return this.iterable=Ee(this.iterable,Y,ie),this}get names(){return ce(super.names,this.iterable.names)}}class F extends N{constructor(Y,ie,be){super(),this.name=Y,this.args=ie,this.async=be}render(Y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Y)}}F.kind="func";class B extends C{render(Y){return"return "+super.render(Y)}}B.kind="return";class Z extends N{render(Y){let ie="try"+super.render(Y);return this.catch&&(ie+=this.catch.render(Y)),this.finally&&(ie+=this.finally.render(Y)),ie}optimizeNodes(){var Y,ie;return super.optimizeNodes(),(Y=this.catch)===null||Y===void 0||Y.optimizeNodes(),(ie=this.finally)===null||ie===void 0||ie.optimizeNodes(),this}optimizeNames(Y,ie){var be,Ye;return super.optimizeNames(Y,ie),(be=this.catch)===null||be===void 0||be.optimizeNames(Y,ie),(Ye=this.finally)===null||Ye===void 0||Ye.optimizeNames(Y,ie),this}get names(){const Y=super.names;return this.catch&&ce(Y,this.catch.names),this.finally&&ce(Y,this.finally.names),Y}}class le extends N{constructor(Y){super(),this.error=Y}render(Y){return`catch(${this.error})`+super.render(Y)}}le.kind="catch";class Ne extends N{render(Y){return"finally"+super.render(Y)}}Ne.kind="finally";class G{constructor(Y,ie={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ie,_n:ie.lines?`
`:""},this._extScope=Y,this._scope=new n.Scope({parent:Y}),this._nodes=[new R]}toString(){return this._root.render(this.opts)}name(Y){return this._scope.name(Y)}scopeName(Y){return this._extScope.name(Y)}scopeValue(Y,ie){const be=this._extScope.value(Y,ie);return(this._values[be.prefix]||(this._values[be.prefix]=new Set)).add(be),be}getScopeValue(Y,ie){return this._extScope.getValue(Y,ie)}scopeRefs(Y){return this._extScope.scopeRefs(Y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Y,ie,be,Ye){const Ve=this._scope.toName(ie);return be!==void 0&&Ye&&(this._constants[Ve.str]=be),this._leafNode(new u(Y,Ve,be)),Ve}const(Y,ie,be){return this._def(n.varKinds.const,Y,ie,be)}let(Y,ie,be){return this._def(n.varKinds.let,Y,ie,be)}var(Y,ie,be){return this._def(n.varKinds.var,Y,ie,be)}assign(Y,ie,be){return this._leafNode(new p(Y,ie,be))}add(Y,ie){return this._leafNode(new g(Y,t.operators.ADD,ie))}code(Y){return typeof Y=="function"?Y():Y!==e.nil&&this._leafNode(new _(Y)),this}object(...Y){const ie=["{"];for(const[be,Ye]of Y)ie.length>1&&ie.push(","),ie.push(be),(be!==Ye||this.opts.es5)&&(ie.push(":"),(0,e.addCodeArg)(ie,Ye));return ie.push("}"),new e._Code(ie)}if(Y,ie,be){if(this._blockNode(new L(Y)),ie&&be)this.code(ie).else().code(be).endIf();else if(ie)this.code(ie).endIf();else if(be)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Y){return this._elseNode(new L(Y))}else(){return this._elseNode(new M)}endIf(){return this._endBlockNode(L,M)}_for(Y,ie){return this._blockNode(Y),ie&&this.code(ie).endFor(),this}for(Y,ie){return this._for(new j(Y),ie)}forRange(Y,ie,be,Ye,Ve=this.opts.es5?n.varKinds.var:n.varKinds.let){const $e=this._scope.toName(Y);return this._for(new $(Ve,$e,ie,be),()=>Ye($e))}forOf(Y,ie,be,Ye=n.varKinds.const){const Ve=this._scope.toName(Y);if(this.opts.es5){const $e=ie instanceof e.Name?ie:this.var("_arr",ie);return this.forRange("_i",0,(0,e._)`${$e}.length`,bt=>{this.var(Ve,(0,e._)`${$e}[${bt}]`),be(Ve)})}return this._for(new U("of",Ye,Ve,ie),()=>be(Ve))}forIn(Y,ie,be,Ye=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Y,(0,e._)`Object.keys(${ie})`,be);const Ve=this._scope.toName(Y);return this._for(new U("in",Ye,Ve,ie),()=>be(Ve))}endFor(){return this._endBlockNode(k)}label(Y){return this._leafNode(new y(Y))}break(Y){return this._leafNode(new w(Y))}return(Y){const ie=new B;if(this._blockNode(ie),this.code(Y),ie.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(B)}try(Y,ie,be){if(!ie&&!be)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ye=new Z;if(this._blockNode(Ye),this.code(Y),ie){const Ve=this.name("e");this._currNode=Ye.catch=new le(Ve),ie(Ve)}return be&&(this._currNode=Ye.finally=new Ne,this.code(be)),this._endBlockNode(le,Ne)}throw(Y){return this._leafNode(new S(Y))}block(Y,ie){return this._blockStarts.push(this._nodes.length),Y&&this.code(Y).endBlock(ie),this}endBlock(Y){const ie=this._blockStarts.pop();if(ie===void 0)throw new Error("CodeGen: not in self-balancing block");const be=this._nodes.length-ie;if(be<0||Y!==void 0&&be!==Y)throw new Error(`CodeGen: wrong number of nodes: ${be} vs ${Y} expected`);return this._nodes.length=ie,this}func(Y,ie=e.nil,be,Ye){return this._blockNode(new F(Y,ie,be)),Ye&&this.code(Ye).endFunc(),this}endFunc(){return this._endBlockNode(F)}optimize(Y=1){for(;Y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Y){return this._currNode.nodes.push(Y),this}_blockNode(Y){this._currNode.nodes.push(Y),this._nodes.push(Y)}_endBlockNode(Y,ie){const be=this._currNode;if(be instanceof Y||ie&&be instanceof ie)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ie?`${Y.kind}/${ie.kind}`:Y.kind}"`)}_elseNode(Y){const ie=this._currNode;if(!(ie instanceof L))throw new Error('CodeGen: "else" without "if"');return this._currNode=ie.else=Y,this}get _root(){return this._nodes[0]}get _currNode(){const Y=this._nodes;return Y[Y.length-1]}set _currNode(Y){const ie=this._nodes;ie[ie.length-1]=Y}}t.CodeGen=G;function ce(ae,Y){for(const ie in Y)ae[ie]=(ae[ie]||0)+(Y[ie]||0);return ae}function se(ae,Y){return Y instanceof e._CodeOrName?ce(ae,Y.names):ae}function Ee(ae,Y,ie){if(ae instanceof e.Name)return be(ae);if(!Ye(ae))return ae;return new e._Code(ae._items.reduce((Ve,$e)=>($e instanceof e.Name&&($e=be($e)),$e instanceof e._Code?Ve.push(...$e._items):Ve.push($e),Ve),[]));function be(Ve){const $e=ie[Ve.str];return $e===void 0||Y[Ve.str]!==1?Ve:(delete Y[Ve.str],$e)}function Ye(Ve){return Ve instanceof e._Code&&Ve._items.some($e=>$e instanceof e.Name&&Y[$e.str]===1&&ie[$e.str]!==void 0)}}function ue(ae,Y){for(const ie in Y)ae[ie]=(ae[ie]||0)-(Y[ie]||0)}function ee(ae){return typeof ae=="boolean"||typeof ae=="number"||ae===null?!ae:(0,e._)`!${oe(ae)}`}t.not=ee;const de=K(t.operators.AND);function we(...ae){return ae.reduce(de)}t.and=we;const Oe=K(t.operators.OR);function pe(...ae){return ae.reduce(Oe)}t.or=pe;function K(ae){return(Y,ie)=>Y===e.nil?ie:ie===e.nil?Y:(0,e._)`${oe(Y)} ${ae} ${oe(ie)}`}function oe(ae){return ae instanceof e.Name?ae:(0,e._)`(${ae})`}})(gv)),gv}var On={},EA;function Zn(){if(EA)return On;EA=1,Object.defineProperty(On,"__esModule",{value:!0}),On.checkStrictMode=On.getErrorPath=On.Type=On.useFunc=On.setEvaluated=On.evaluatedPropsToName=On.mergeEvaluated=On.eachItem=On.unescapeJsonPointer=On.escapeJsonPointer=On.escapeFragment=On.unescapeFragment=On.schemaRefOrVal=On.schemaHasRulesButRef=On.schemaHasRules=On.checkUnknownRules=On.alwaysValidSchema=On.toHash=void 0;const t=In(),e=J0();function n(U){const F={};for(const B of U)F[B]=!0;return F}On.toHash=n;function r(U,F){return typeof F=="boolean"?F:Object.keys(F).length===0?!0:(i(U,F),!a(F,U.self.RULES.all))}On.alwaysValidSchema=r;function i(U,F=U.schema){const{opts:B,self:Z}=U;if(!B.strictSchema||typeof F=="boolean")return;const le=Z.RULES.keywords;for(const Ne in F)le[Ne]||$(U,`unknown keyword: "${Ne}"`)}On.checkUnknownRules=i;function a(U,F){if(typeof U=="boolean")return!U;for(const B in U)if(F[B])return!0;return!1}On.schemaHasRules=a;function u(U,F){if(typeof U=="boolean")return!U;for(const B in U)if(B!=="$ref"&&F.all[B])return!0;return!1}On.schemaHasRulesButRef=u;function p({topSchemaRef:U,schemaPath:F},B,Z,le){if(!le){if(typeof B=="number"||typeof B=="boolean")return B;if(typeof B=="string")return(0,t._)`${B}`}return(0,t._)`${U}${F}${(0,t.getProperty)(Z)}`}On.schemaRefOrVal=p;function g(U){return S(decodeURIComponent(U))}On.unescapeFragment=g;function y(U){return encodeURIComponent(w(U))}On.escapeFragment=y;function w(U){return typeof U=="number"?`${U}`:U.replace(/~/g,"~0").replace(/\//g,"~1")}On.escapeJsonPointer=w;function S(U){return U.replace(/~1/g,"/").replace(/~0/g,"~")}On.unescapeJsonPointer=S;function _(U,F){if(Array.isArray(U))for(const B of U)F(B);else F(U)}On.eachItem=_;function C({mergeNames:U,mergeToName:F,mergeValues:B,resultToName:Z}){return(le,Ne,G,ce)=>{const se=G===void 0?Ne:G instanceof t.Name?(Ne instanceof t.Name?U(le,Ne,G):F(le,Ne,G),G):Ne instanceof t.Name?(F(le,G,Ne),Ne):B(Ne,G);return ce===t.Name&&!(se instanceof t.Name)?Z(le,se):se}}On.mergeEvaluated={props:C({mergeNames:(U,F,B)=>U.if((0,t._)`${B} !== true && ${F} !== undefined`,()=>{U.if((0,t._)`${F} === true`,()=>U.assign(B,!0),()=>U.assign(B,(0,t._)`${B} || {}`).code((0,t._)`Object.assign(${B}, ${F})`))}),mergeToName:(U,F,B)=>U.if((0,t._)`${B} !== true`,()=>{F===!0?U.assign(B,!0):(U.assign(B,(0,t._)`${B} || {}`),R(U,B,F))}),mergeValues:(U,F)=>U===!0?!0:{...U,...F},resultToName:N}),items:C({mergeNames:(U,F,B)=>U.if((0,t._)`${B} !== true && ${F} !== undefined`,()=>U.assign(B,(0,t._)`${F} === true ? true : ${B} > ${F} ? ${B} : ${F}`)),mergeToName:(U,F,B)=>U.if((0,t._)`${B} !== true`,()=>U.assign(B,F===!0?!0:(0,t._)`${B} > ${F} ? ${B} : ${F}`)),mergeValues:(U,F)=>U===!0?!0:Math.max(U,F),resultToName:(U,F)=>U.var("items",F)})};function N(U,F){if(F===!0)return U.var("props",!0);const B=U.var("props",(0,t._)`{}`);return F!==void 0&&R(U,B,F),B}On.evaluatedPropsToName=N;function R(U,F,B){Object.keys(B).forEach(Z=>U.assign((0,t._)`${F}${(0,t.getProperty)(Z)}`,!0))}On.setEvaluated=R;const M={};function L(U,F){return U.scopeValue("func",{ref:F,code:M[F.code]||(M[F.code]=new e._Code(F.code))})}On.useFunc=L;var k;(function(U){U[U.Num=0]="Num",U[U.Str=1]="Str"})(k||(On.Type=k={}));function j(U,F,B){if(U instanceof t.Name){const Z=F===k.Num;return B?Z?(0,t._)`"[" + ${U} + "]"`:(0,t._)`"['" + ${U} + "']"`:Z?(0,t._)`"/" + ${U}`:(0,t._)`"/" + ${U}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return B?(0,t.getProperty)(U).toString():"/"+w(U)}On.getErrorPath=j;function $(U,F,B=U.opts.strictSchema){if(B){if(F=`strict mode: ${F}`,B===!0)throw new Error(F);U.self.logger.warn(F)}}return On.checkStrictMode=$,On}var ym={},SA;function mc(){if(SA)return ym;SA=1,Object.defineProperty(ym,"__esModule",{value:!0});const t=In(),e={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};return ym.default=e,ym}var xA;function P1(){return xA||(xA=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=In(),n=Zn(),r=mc();t.keywordError={message:({keyword:M})=>(0,e.str)`must pass "${M}" keyword validation`},t.keyword$DataError={message:({keyword:M,schemaType:L})=>L?(0,e.str)`"${M}" keyword must be ${L} ($data)`:(0,e.str)`"${M}" keyword is invalid ($data)`};function i(M,L=t.keywordError,k,j){const{it:$}=M,{gen:U,compositeRule:F,allErrors:B}=$,Z=S(M,L,k);j??(F||B)?g(U,Z):y($,(0,e._)`[${Z}]`)}t.reportError=i;function a(M,L=t.keywordError,k){const{it:j}=M,{gen:$,compositeRule:U,allErrors:F}=j,B=S(M,L,k);g($,B),U||F||y(j,r.default.vErrors)}t.reportExtraError=a;function u(M,L){M.assign(r.default.errors,L),M.if((0,e._)`${r.default.vErrors} !== null`,()=>M.if(L,()=>M.assign((0,e._)`${r.default.vErrors}.length`,L),()=>M.assign(r.default.vErrors,null)))}t.resetErrorsCount=u;function p({gen:M,keyword:L,schemaValue:k,data:j,errsCount:$,it:U}){if($===void 0)throw new Error("ajv implementation error");const F=M.name("err");M.forRange("i",$,r.default.errors,B=>{M.const(F,(0,e._)`${r.default.vErrors}[${B}]`),M.if((0,e._)`${F}.instancePath === undefined`,()=>M.assign((0,e._)`${F}.instancePath`,(0,e.strConcat)(r.default.instancePath,U.errorPath))),M.assign((0,e._)`${F}.schemaPath`,(0,e.str)`${U.errSchemaPath}/${L}`),U.opts.verbose&&(M.assign((0,e._)`${F}.schema`,k),M.assign((0,e._)`${F}.data`,j))})}t.extendErrors=p;function g(M,L){const k=M.const("err",L);M.if((0,e._)`${r.default.vErrors} === null`,()=>M.assign(r.default.vErrors,(0,e._)`[${k}]`),(0,e._)`${r.default.vErrors}.push(${k})`),M.code((0,e._)`${r.default.errors}++`)}function y(M,L){const{gen:k,validateName:j,schemaEnv:$}=M;$.$async?k.throw((0,e._)`new ${M.ValidationError}(${L})`):(k.assign((0,e._)`${j}.errors`,L),k.return(!1))}const w={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function S(M,L,k){const{createErrors:j}=M.it;return j===!1?(0,e._)`{}`:_(M,L,k)}function _(M,L,k={}){const{gen:j,it:$}=M,U=[C($,k),N(M,k)];return R(M,L,U),j.object(...U)}function C({errorPath:M},{instancePath:L}){const k=L?(0,e.str)`${M}${(0,n.getErrorPath)(L,n.Type.Str)}`:M;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,k)]}function N({keyword:M,it:{errSchemaPath:L}},{schemaPath:k,parentSchema:j}){let $=j?L:(0,e.str)`${L}/${M}`;return k&&($=(0,e.str)`${$}${(0,n.getErrorPath)(k,n.Type.Str)}`),[w.schemaPath,$]}function R(M,{params:L,message:k},j){const{keyword:$,data:U,schemaValue:F,it:B}=M,{opts:Z,propertyName:le,topSchemaRef:Ne,schemaPath:G}=B;j.push([w.keyword,$],[w.params,typeof L=="function"?L(M):L||(0,e._)`{}`]),Z.messages&&j.push([w.message,typeof k=="function"?k(M):k]),Z.verbose&&j.push([w.schema,F],[w.parentSchema,(0,e._)`${Ne}${G}`],[r.default.data,U]),le&&j.push([w.propertyName,le])}})(mv)),mv}var _A;function mq(){if(_A)return Lc;_A=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.boolOrEmptySchema=Lc.topBoolOrEmptySchema=void 0;const t=P1(),e=In(),n=mc(),r={message:"boolean schema is false"};function i(p){const{gen:g,schema:y,validateName:w}=p;y===!1?u(p,!1):typeof y=="object"&&y.$async===!0?g.return(n.default.data):(g.assign((0,e._)`${w}.errors`,null),g.return(!0))}Lc.topBoolOrEmptySchema=i;function a(p,g){const{gen:y,schema:w}=p;w===!1?(y.var(g,!1),u(p)):y.var(g,!0)}Lc.boolOrEmptySchema=a;function u(p,g){const{gen:y,data:w}=p,S={gen:y,keyword:"false schema",data:w,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:p};(0,t.reportError)(S,r,void 0,g)}return Lc}var Wi={},kc={},AA;function W8(){if(AA)return kc;AA=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.getRules=kc.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function n(i){return typeof i=="string"&&e.has(i)}kc.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return kc.getRules=r,kc}var Xo={},CA;function X8(){if(CA)return Xo;CA=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.shouldUseRule=Xo.shouldUseGroup=Xo.schemaHasRulesForType=void 0;function t({schema:r,self:i},a){const u=i.RULES.types[a];return u&&u!==!0&&e(r,u)}Xo.schemaHasRulesForType=t;function e(r,i){return i.rules.some(a=>n(r,a))}Xo.shouldUseGroup=e;function n(r,i){var a;return r[i.keyword]!==void 0||((a=i.definition.implements)===null||a===void 0?void 0:a.some(u=>r[u]!==void 0))}return Xo.shouldUseRule=n,Xo}var NA;function e1(){if(NA)return Wi;NA=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.reportTypeError=Wi.checkDataTypes=Wi.checkDataType=Wi.coerceAndCheckDataType=Wi.getJSONTypes=Wi.getSchemaTypes=Wi.DataType=void 0;const t=W8(),e=X8(),n=P1(),r=In(),i=Zn();var a;(function(k){k[k.Correct=0]="Correct",k[k.Wrong=1]="Wrong"})(a||(Wi.DataType=a={}));function u(k){const j=p(k.type);if(j.includes("null")){if(k.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!j.length&&k.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');k.nullable===!0&&j.push("null")}return j}Wi.getSchemaTypes=u;function p(k){const j=Array.isArray(k)?k:k?[k]:[];if(j.every(t.isJSONType))return j;throw new Error("type must be JSONType or JSONType[]: "+j.join(","))}Wi.getJSONTypes=p;function g(k,j){const{gen:$,data:U,opts:F}=k,B=w(j,F.coerceTypes),Z=j.length>0&&!(B.length===0&&j.length===1&&(0,e.schemaHasRulesForType)(k,j[0]));if(Z){const le=N(j,U,F.strictNumbers,a.Wrong);$.if(le,()=>{B.length?S(k,j,B):M(k)})}return Z}Wi.coerceAndCheckDataType=g;const y=new Set(["string","number","integer","boolean","null"]);function w(k,j){return j?k.filter($=>y.has($)||j==="array"&&$==="array"):[]}function S(k,j,$){const{gen:U,data:F,opts:B}=k,Z=U.let("dataType",(0,r._)`typeof ${F}`),le=U.let("coerced",(0,r._)`undefined`);B.coerceTypes==="array"&&U.if((0,r._)`${Z} == 'object' && Array.isArray(${F}) && ${F}.length == 1`,()=>U.assign(F,(0,r._)`${F}[0]`).assign(Z,(0,r._)`typeof ${F}`).if(N(j,F,B.strictNumbers),()=>U.assign(le,F))),U.if((0,r._)`${le} !== undefined`);for(const G of $)(y.has(G)||G==="array"&&B.coerceTypes==="array")&&Ne(G);U.else(),M(k),U.endIf(),U.if((0,r._)`${le} !== undefined`,()=>{U.assign(F,le),_(k,le)});function Ne(G){switch(G){case"string":U.elseIf((0,r._)`${Z} == "number" || ${Z} == "boolean"`).assign(le,(0,r._)`"" + ${F}`).elseIf((0,r._)`${F} === null`).assign(le,(0,r._)`""`);return;case"number":U.elseIf((0,r._)`${Z} == "boolean" || ${F} === null
              || (${Z} == "string" && ${F} && ${F} == +${F})`).assign(le,(0,r._)`+${F}`);return;case"integer":U.elseIf((0,r._)`${Z} === "boolean" || ${F} === null
              || (${Z} === "string" && ${F} && ${F} == +${F} && !(${F} % 1))`).assign(le,(0,r._)`+${F}`);return;case"boolean":U.elseIf((0,r._)`${F} === "false" || ${F} === 0 || ${F} === null`).assign(le,!1).elseIf((0,r._)`${F} === "true" || ${F} === 1`).assign(le,!0);return;case"null":U.elseIf((0,r._)`${F} === "" || ${F} === 0 || ${F} === false`),U.assign(le,null);return;case"array":U.elseIf((0,r._)`${Z} === "string" || ${Z} === "number"
              || ${Z} === "boolean" || ${F} === null`).assign(le,(0,r._)`[${F}]`)}}}function _({gen:k,parentData:j,parentDataProperty:$},U){k.if((0,r._)`${j} !== undefined`,()=>k.assign((0,r._)`${j}[${$}]`,U))}function C(k,j,$,U=a.Correct){const F=U===a.Correct?r.operators.EQ:r.operators.NEQ;let B;switch(k){case"null":return(0,r._)`${j} ${F} null`;case"array":B=(0,r._)`Array.isArray(${j})`;break;case"object":B=(0,r._)`${j} && typeof ${j} == "object" && !Array.isArray(${j})`;break;case"integer":B=Z((0,r._)`!(${j} % 1) && !isNaN(${j})`);break;case"number":B=Z();break;default:return(0,r._)`typeof ${j} ${F} ${k}`}return U===a.Correct?B:(0,r.not)(B);function Z(le=r.nil){return(0,r.and)((0,r._)`typeof ${j} == "number"`,le,$?(0,r._)`isFinite(${j})`:r.nil)}}Wi.checkDataType=C;function N(k,j,$,U){if(k.length===1)return C(k[0],j,$,U);let F;const B=(0,i.toHash)(k);if(B.array&&B.object){const Z=(0,r._)`typeof ${j} != "object"`;F=B.null?Z:(0,r._)`!${j} || ${Z}`,delete B.null,delete B.array,delete B.object}else F=r.nil;B.number&&delete B.integer;for(const Z in B)F=(0,r.and)(F,C(Z,j,$,U));return F}Wi.checkDataTypes=N;const R={message:({schema:k})=>`must be ${k}`,params:({schema:k,schemaValue:j})=>typeof k=="string"?(0,r._)`{type: ${k}}`:(0,r._)`{type: ${j}}`};function M(k){const j=L(k);(0,n.reportError)(j,R)}Wi.reportTypeError=M;function L(k){const{gen:j,data:$,schema:U}=k,F=(0,i.schemaRefOrVal)(k,U,"type");return{gen:j,keyword:"type",data:$,schema:U.type,schemaCode:F,schemaValue:F,parentSchema:U,params:{},it:k}}return Wi}var Ih={},TA;function gq(){if(TA)return Ih;TA=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.assignDefaults=void 0;const t=In(),e=Zn();function n(i,a){const{properties:u,items:p}=i.schema;if(a==="object"&&u)for(const g in u)r(i,g,u[g].default);else a==="array"&&Array.isArray(p)&&p.forEach((g,y)=>r(i,y,g.default))}Ih.assignDefaults=n;function r(i,a,u){const{gen:p,compositeRule:g,data:y,opts:w}=i;if(u===void 0)return;const S=(0,t._)`${y}${(0,t.getProperty)(a)}`;if(g){(0,e.checkStrictMode)(i,`default is ignored for: ${S}`);return}let _=(0,t._)`${S} === undefined`;w.useDefaults==="empty"&&(_=(0,t._)`${_} || ${S} === null || ${S} === ""`),p.if(_,(0,t._)`${S} = ${(0,t.stringify)(u)}`)}return Ih}var Pa={},hr={},OA;function Xa(){if(OA)return hr;OA=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.validateUnion=hr.validateArray=hr.usePattern=hr.callValidateCode=hr.schemaProperties=hr.allSchemaProperties=hr.noPropertyInData=hr.propertyInData=hr.isOwnProperty=hr.hasPropFunc=hr.reportMissingProp=hr.checkMissingProp=hr.checkReportMissingProp=void 0;const t=In(),e=Zn(),n=mc(),r=Zn();function i(k,j){const{gen:$,data:U,it:F}=k;$.if(w($,U,j,F.opts.ownProperties),()=>{k.setParams({missingProperty:(0,t._)`${j}`},!0),k.error()})}hr.checkReportMissingProp=i;function a({gen:k,data:j,it:{opts:$}},U,F){return(0,t.or)(...U.map(B=>(0,t.and)(w(k,j,B,$.ownProperties),(0,t._)`${F} = ${B}`)))}hr.checkMissingProp=a;function u(k,j){k.setParams({missingProperty:j},!0),k.error()}hr.reportMissingProp=u;function p(k){return k.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}hr.hasPropFunc=p;function g(k,j,$){return(0,t._)`${p(k)}.call(${j}, ${$})`}hr.isOwnProperty=g;function y(k,j,$,U){const F=(0,t._)`${j}${(0,t.getProperty)($)} !== undefined`;return U?(0,t._)`${F} && ${g(k,j,$)}`:F}hr.propertyInData=y;function w(k,j,$,U){const F=(0,t._)`${j}${(0,t.getProperty)($)} === undefined`;return U?(0,t.or)(F,(0,t.not)(g(k,j,$))):F}hr.noPropertyInData=w;function S(k){return k?Object.keys(k).filter(j=>j!=="__proto__"):[]}hr.allSchemaProperties=S;function _(k,j){return S(j).filter($=>!(0,e.alwaysValidSchema)(k,j[$]))}hr.schemaProperties=_;function C({schemaCode:k,data:j,it:{gen:$,topSchemaRef:U,schemaPath:F,errorPath:B},it:Z},le,Ne,G){const ce=G?(0,t._)`${k}, ${j}, ${U}${F}`:j,se=[[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,B)],[n.default.parentData,Z.parentData],[n.default.parentDataProperty,Z.parentDataProperty],[n.default.rootData,n.default.rootData]];Z.opts.dynamicRef&&se.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const Ee=(0,t._)`${ce}, ${$.object(...se)}`;return Ne!==t.nil?(0,t._)`${le}.call(${Ne}, ${Ee})`:(0,t._)`${le}(${Ee})`}hr.callValidateCode=C;const N=(0,t._)`new RegExp`;function R({gen:k,it:{opts:j}},$){const U=j.unicodeRegExp?"u":"",{regExp:F}=j.code,B=F($,U);return k.scopeValue("pattern",{key:B.toString(),ref:B,code:(0,t._)`${F.code==="new RegExp"?N:(0,r.useFunc)(k,F)}(${$}, ${U})`})}hr.usePattern=R;function M(k){const{gen:j,data:$,keyword:U,it:F}=k,B=j.name("valid");if(F.allErrors){const le=j.let("valid",!0);return Z(()=>j.assign(le,!1)),le}return j.var(B,!0),Z(()=>j.break()),B;function Z(le){const Ne=j.const("len",(0,t._)`${$}.length`);j.forRange("i",0,Ne,G=>{k.subschema({keyword:U,dataProp:G,dataPropType:e.Type.Num},B),j.if((0,t.not)(B),le)})}}hr.validateArray=M;function L(k){const{gen:j,schema:$,keyword:U,it:F}=k;if(!Array.isArray($))throw new Error("ajv implementation error");if($.some(Ne=>(0,e.alwaysValidSchema)(F,Ne))&&!F.opts.unevaluated)return;const Z=j.let("valid",!1),le=j.name("_valid");j.block(()=>$.forEach((Ne,G)=>{const ce=k.subschema({keyword:U,schemaProp:G,compositeRule:!0},le);j.assign(Z,(0,t._)`${Z} || ${le}`),k.mergeValidEvaluated(ce,le)||j.if((0,t.not)(Z))})),k.result(Z,()=>k.reset(),()=>k.error(!0))}return hr.validateUnion=L,hr}var RA;function yq(){if(RA)return Pa;RA=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.validateKeywordUsage=Pa.validSchemaType=Pa.funcKeywordCode=Pa.macroKeywordCode=void 0;const t=In(),e=mc(),n=Xa(),r=P1();function i(_,C){const{gen:N,keyword:R,schema:M,parentSchema:L,it:k}=_,j=C.macro.call(k.self,M,L,k),$=y(N,R,j);k.opts.validateSchema!==!1&&k.self.validateSchema(j,!0);const U=N.name("valid");_.subschema({schema:j,schemaPath:t.nil,errSchemaPath:`${k.errSchemaPath}/${R}`,topSchemaRef:$,compositeRule:!0},U),_.pass(U,()=>_.error(!0))}Pa.macroKeywordCode=i;function a(_,C){var N;const{gen:R,keyword:M,schema:L,parentSchema:k,$data:j,it:$}=_;g($,C);const U=!j&&C.compile?C.compile.call($.self,L,k,$):C.validate,F=y(R,M,U),B=R.let("valid");_.block$data(B,Z),_.ok((N=C.valid)!==null&&N!==void 0?N:B);function Z(){if(C.errors===!1)G(),C.modifying&&u(_),ce(()=>_.error());else{const se=C.async?le():Ne();C.modifying&&u(_),ce(()=>p(_,se))}}function le(){const se=R.let("ruleErrs",null);return R.try(()=>G((0,t._)`await `),Ee=>R.assign(B,!1).if((0,t._)`${Ee} instanceof ${$.ValidationError}`,()=>R.assign(se,(0,t._)`${Ee}.errors`),()=>R.throw(Ee))),se}function Ne(){const se=(0,t._)`${F}.errors`;return R.assign(se,null),G(t.nil),se}function G(se=C.async?(0,t._)`await `:t.nil){const Ee=$.opts.passContext?e.default.this:e.default.self,ue=!("compile"in C&&!j||C.schema===!1);R.assign(B,(0,t._)`${se}${(0,n.callValidateCode)(_,F,Ee,ue)}`,C.modifying)}function ce(se){var Ee;R.if((0,t.not)((Ee=C.valid)!==null&&Ee!==void 0?Ee:B),se)}}Pa.funcKeywordCode=a;function u(_){const{gen:C,data:N,it:R}=_;C.if(R.parentData,()=>C.assign(N,(0,t._)`${R.parentData}[${R.parentDataProperty}]`))}function p(_,C){const{gen:N}=_;N.if((0,t._)`Array.isArray(${C})`,()=>{N.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${C} : ${e.default.vErrors}.concat(${C})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,r.extendErrors)(_)},()=>_.error())}function g({schemaEnv:_},C){if(C.async&&!_.$async)throw new Error("async keyword in sync schema")}function y(_,C,N){if(N===void 0)throw new Error(`keyword "${C}" failed to compile`);return _.scopeValue("keyword",typeof N=="function"?{ref:N}:{ref:N,code:(0,t.stringify)(N)})}function w(_,C,N=!1){return!C.length||C.some(R=>R==="array"?Array.isArray(_):R==="object"?_&&typeof _=="object"&&!Array.isArray(_):typeof _==R||N&&typeof _>"u")}Pa.validSchemaType=w;function S({schema:_,opts:C,self:N,errSchemaPath:R},M,L){if(Array.isArray(M.keyword)?!M.keyword.includes(L):M.keyword!==L)throw new Error("ajv implementation error");const k=M.dependencies;if(k?.some(j=>!Object.prototype.hasOwnProperty.call(_,j)))throw new Error(`parent schema must have dependencies of ${L}: ${k.join(",")}`);if(M.validateSchema&&!M.validateSchema(_[L])){const $=`keyword "${L}" value is invalid at path "${R}": `+N.errorsText(M.validateSchema.errors);if(C.validateSchema==="log")N.logger.error($);else throw new Error($)}}return Pa.validateKeywordUsage=S,Pa}var Qo={},IA;function vq(){if(IA)return Qo;IA=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.extendSubschemaMode=Qo.extendSubschemaData=Qo.getSubschema=void 0;const t=In(),e=Zn();function n(a,{keyword:u,schemaProp:p,schema:g,schemaPath:y,errSchemaPath:w,topSchemaRef:S}){if(u!==void 0&&g!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(u!==void 0){const _=a.schema[u];return p===void 0?{schema:_,schemaPath:(0,t._)`${a.schemaPath}${(0,t.getProperty)(u)}`,errSchemaPath:`${a.errSchemaPath}/${u}`}:{schema:_[p],schemaPath:(0,t._)`${a.schemaPath}${(0,t.getProperty)(u)}${(0,t.getProperty)(p)}`,errSchemaPath:`${a.errSchemaPath}/${u}/${(0,e.escapeFragment)(p)}`}}if(g!==void 0){if(y===void 0||w===void 0||S===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:g,schemaPath:y,topSchemaRef:S,errSchemaPath:w}}throw new Error('either "keyword" or "schema" must be passed')}Qo.getSubschema=n;function r(a,u,{dataProp:p,dataPropType:g,data:y,dataTypes:w,propertyName:S}){if(y!==void 0&&p!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:_}=u;if(p!==void 0){const{errorPath:N,dataPathArr:R,opts:M}=u,L=_.let("data",(0,t._)`${u.data}${(0,t.getProperty)(p)}`,!0);C(L),a.errorPath=(0,t.str)`${N}${(0,e.getErrorPath)(p,g,M.jsPropertySyntax)}`,a.parentDataProperty=(0,t._)`${p}`,a.dataPathArr=[...R,a.parentDataProperty]}if(y!==void 0){const N=y instanceof t.Name?y:_.let("data",y,!0);C(N),S!==void 0&&(a.propertyName=S)}w&&(a.dataTypes=w);function C(N){a.data=N,a.dataLevel=u.dataLevel+1,a.dataTypes=[],u.definedProperties=new Set,a.parentData=u.data,a.dataNames=[...u.dataNames,N]}}Qo.extendSubschemaData=r;function i(a,{jtdDiscriminator:u,jtdMetadata:p,compositeRule:g,createErrors:y,allErrors:w}){g!==void 0&&(a.compositeRule=g),y!==void 0&&(a.createErrors=y),w!==void 0&&(a.allErrors=w),a.jtdDiscriminator=u,a.jtdMetadata=p}return Qo.extendSubschemaMode=i,Qo}var fs={},bv,MA;function Q8(){return MA||(MA=1,bv=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var u=a[i];if(!t(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}),bv}var wv={exports:{}},DA;function bq(){if(DA)return wv.exports;DA=1;var t=wv.exports=function(r,i,a){typeof i=="function"&&(a=i,i={}),a=i.cb||a;var u=typeof a=="function"?a:a.pre||function(){},p=a.post||function(){};e(i,u,p,r,"",r)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(r,i,a,u,p,g,y,w,S,_){if(u&&typeof u=="object"&&!Array.isArray(u)){i(u,p,g,y,w,S,_);for(var C in u){var N=u[C];if(Array.isArray(N)){if(C in t.arrayKeywords)for(var R=0;R<N.length;R++)e(r,i,a,N[R],p+"/"+C+"/"+R,g,p,C,u,R)}else if(C in t.propsKeywords){if(N&&typeof N=="object")for(var M in N)e(r,i,a,N[M],p+"/"+C+"/"+n(M),g,p,C,u,M)}else(C in t.keywords||r.allKeys&&!(C in t.skipKeywords))&&e(r,i,a,N,p+"/"+C,g,p,C,u)}a(u,p,g,y,w,S,_)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return wv.exports}var LA;function B1(){if(LA)return fs;LA=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.getSchemaRefs=fs.resolveUrl=fs.normalizeId=fs._getFullPath=fs.getFullPath=fs.inlineRef=void 0;const t=Zn(),e=Q8(),n=bq(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(R,M=!0){return typeof R=="boolean"?!0:M===!0?!u(R):M?p(R)<=M:!1}fs.inlineRef=i;const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function u(R){for(const M in R){if(a.has(M))return!0;const L=R[M];if(Array.isArray(L)&&L.some(u)||typeof L=="object"&&u(L))return!0}return!1}function p(R){let M=0;for(const L in R){if(L==="$ref")return 1/0;if(M++,!r.has(L)&&(typeof R[L]=="object"&&(0,t.eachItem)(R[L],k=>M+=p(k)),M===1/0))return 1/0}return M}function g(R,M="",L){L!==!1&&(M=S(M));const k=R.parse(M);return y(R,k)}fs.getFullPath=g;function y(R,M){return R.serialize(M).split("#")[0]+"#"}fs._getFullPath=y;const w=/#\/?$/;function S(R){return R?R.replace(w,""):""}fs.normalizeId=S;function _(R,M,L){return L=S(L),R.resolve(M,L)}fs.resolveUrl=_;const C=/^[a-z_][-a-z0-9._]*$/i;function N(R,M){if(typeof R=="boolean")return{};const{schemaId:L,uriResolver:k}=this.opts,j=S(R[L]||M),$={"":j},U=g(k,j,!1),F={},B=new Set;return n(R,{allKeys:!0},(Ne,G,ce,se)=>{if(se===void 0)return;const Ee=U+G;let ue=$[se];typeof Ne[L]=="string"&&(ue=ee.call(this,Ne[L])),de.call(this,Ne.$anchor),de.call(this,Ne.$dynamicAnchor),$[G]=ue;function ee(we){const Oe=this.opts.uriResolver.resolve;if(we=S(ue?Oe(ue,we):we),B.has(we))throw le(we);B.add(we);let pe=this.refs[we];return typeof pe=="string"&&(pe=this.refs[pe]),typeof pe=="object"?Z(Ne,pe.schema,we):we!==S(Ee)&&(we[0]==="#"?(Z(Ne,F[we],we),F[we]=Ne):this.refs[we]=Ee),we}function de(we){if(typeof we=="string"){if(!C.test(we))throw new Error(`invalid anchor "${we}"`);ee.call(this,`#${we}`)}}}),F;function Z(Ne,G,ce){if(G!==void 0&&!e(Ne,G))throw le(ce)}function le(Ne){return new Error(`reference "${Ne}" resolves to more than one schema`)}}return fs.getSchemaRefs=N,fs}var kA;function U1(){if(kA)return Wo;kA=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.getData=Wo.KeywordCxt=Wo.validateFunctionCode=void 0;const t=mq(),e=e1(),n=X8(),r=e1(),i=gq(),a=yq(),u=vq(),p=In(),g=mc(),y=B1(),w=Zn(),S=P1();function _(xe){if(U(xe)&&(B(xe),$(xe))){M(xe);return}C(xe,()=>(0,t.topBoolOrEmptySchema)(xe))}Wo.validateFunctionCode=_;function C({gen:xe,validateName:Se,schema:Me,schemaEnv:Qe,opts:ct},Mt){ct.code.es5?xe.func(Se,(0,p._)`${g.default.data}, ${g.default.valCxt}`,Qe.$async,()=>{xe.code((0,p._)`"use strict"; ${k(Me,ct)}`),R(xe,ct),xe.code(Mt)}):xe.func(Se,(0,p._)`${g.default.data}, ${N(ct)}`,Qe.$async,()=>xe.code(k(Me,ct)).code(Mt))}function N(xe){return(0,p._)`{${g.default.instancePath}="", ${g.default.parentData}, ${g.default.parentDataProperty}, ${g.default.rootData}=${g.default.data}${xe.dynamicRef?(0,p._)`, ${g.default.dynamicAnchors}={}`:p.nil}}={}`}function R(xe,Se){xe.if(g.default.valCxt,()=>{xe.var(g.default.instancePath,(0,p._)`${g.default.valCxt}.${g.default.instancePath}`),xe.var(g.default.parentData,(0,p._)`${g.default.valCxt}.${g.default.parentData}`),xe.var(g.default.parentDataProperty,(0,p._)`${g.default.valCxt}.${g.default.parentDataProperty}`),xe.var(g.default.rootData,(0,p._)`${g.default.valCxt}.${g.default.rootData}`),Se.dynamicRef&&xe.var(g.default.dynamicAnchors,(0,p._)`${g.default.valCxt}.${g.default.dynamicAnchors}`)},()=>{xe.var(g.default.instancePath,(0,p._)`""`),xe.var(g.default.parentData,(0,p._)`undefined`),xe.var(g.default.parentDataProperty,(0,p._)`undefined`),xe.var(g.default.rootData,g.default.data),Se.dynamicRef&&xe.var(g.default.dynamicAnchors,(0,p._)`{}`)})}function M(xe){const{schema:Se,opts:Me,gen:Qe}=xe;C(xe,()=>{Me.$comment&&Se.$comment&&se(xe),Ne(xe),Qe.let(g.default.vErrors,null),Qe.let(g.default.errors,0),Me.unevaluated&&L(xe),Z(xe),Ee(xe)})}function L(xe){const{gen:Se,validateName:Me}=xe;xe.evaluated=Se.const("evaluated",(0,p._)`${Me}.evaluated`),Se.if((0,p._)`${xe.evaluated}.dynamicProps`,()=>Se.assign((0,p._)`${xe.evaluated}.props`,(0,p._)`undefined`)),Se.if((0,p._)`${xe.evaluated}.dynamicItems`,()=>Se.assign((0,p._)`${xe.evaluated}.items`,(0,p._)`undefined`))}function k(xe,Se){const Me=typeof xe=="object"&&xe[Se.schemaId];return Me&&(Se.code.source||Se.code.process)?(0,p._)`/*# sourceURL=${Me} */`:p.nil}function j(xe,Se){if(U(xe)&&(B(xe),$(xe))){F(xe,Se);return}(0,t.boolOrEmptySchema)(xe,Se)}function $({schema:xe,self:Se}){if(typeof xe=="boolean")return!xe;for(const Me in xe)if(Se.RULES.all[Me])return!0;return!1}function U(xe){return typeof xe.schema!="boolean"}function F(xe,Se){const{schema:Me,gen:Qe,opts:ct}=xe;ct.$comment&&Me.$comment&&se(xe),G(xe),ce(xe);const Mt=Qe.const("_errs",g.default.errors);Z(xe,Mt),Qe.var(Se,(0,p._)`${Mt} === ${g.default.errors}`)}function B(xe){(0,w.checkUnknownRules)(xe),le(xe)}function Z(xe,Se){if(xe.opts.jtd)return ee(xe,[],!1,Se);const Me=(0,e.getSchemaTypes)(xe.schema),Qe=(0,e.coerceAndCheckDataType)(xe,Me);ee(xe,Me,!Qe,Se)}function le(xe){const{schema:Se,errSchemaPath:Me,opts:Qe,self:ct}=xe;Se.$ref&&Qe.ignoreKeywordsWithRef&&(0,w.schemaHasRulesButRef)(Se,ct.RULES)&&ct.logger.warn(`$ref: keywords ignored in schema at path "${Me}"`)}function Ne(xe){const{schema:Se,opts:Me}=xe;Se.default!==void 0&&Me.useDefaults&&Me.strictSchema&&(0,w.checkStrictMode)(xe,"default is ignored in the schema root")}function G(xe){const Se=xe.schema[xe.opts.schemaId];Se&&(xe.baseId=(0,y.resolveUrl)(xe.opts.uriResolver,xe.baseId,Se))}function ce(xe){if(xe.schema.$async&&!xe.schemaEnv.$async)throw new Error("async schema in sync schema")}function se({gen:xe,schemaEnv:Se,schema:Me,errSchemaPath:Qe,opts:ct}){const Mt=Me.$comment;if(ct.$comment===!0)xe.code((0,p._)`${g.default.self}.logger.log(${Mt})`);else if(typeof ct.$comment=="function"){const ln=(0,p.str)`${Qe}/$comment`,Zt=xe.scopeValue("root",{ref:Se.root});xe.code((0,p._)`${g.default.self}.opts.$comment(${Mt}, ${ln}, ${Zt}.schema)`)}}function Ee(xe){const{gen:Se,schemaEnv:Me,validateName:Qe,ValidationError:ct,opts:Mt}=xe;Me.$async?Se.if((0,p._)`${g.default.errors} === 0`,()=>Se.return(g.default.data),()=>Se.throw((0,p._)`new ${ct}(${g.default.vErrors})`)):(Se.assign((0,p._)`${Qe}.errors`,g.default.vErrors),Mt.unevaluated&&ue(xe),Se.return((0,p._)`${g.default.errors} === 0`))}function ue({gen:xe,evaluated:Se,props:Me,items:Qe}){Me instanceof p.Name&&xe.assign((0,p._)`${Se}.props`,Me),Qe instanceof p.Name&&xe.assign((0,p._)`${Se}.items`,Qe)}function ee(xe,Se,Me,Qe){const{gen:ct,schema:Mt,data:ln,allErrors:Zt,opts:jt,self:jn}=xe,{RULES:ot}=jn;if(Mt.$ref&&(jt.ignoreKeywordsWithRef||!(0,w.schemaHasRulesButRef)(Mt,ot))){ct.block(()=>Ye(xe,"$ref",ot.all.$ref.definition));return}jt.jtd||we(xe,Se),ct.block(()=>{for(const nr of ot.rules)Wr(nr);Wr(ot.post)});function Wr(nr){(0,n.shouldUseGroup)(Mt,nr)&&(nr.type?(ct.if((0,r.checkDataType)(nr.type,ln,jt.strictNumbers)),de(xe,nr),Se.length===1&&Se[0]===nr.type&&Me&&(ct.else(),(0,r.reportTypeError)(xe)),ct.endIf()):de(xe,nr),Zt||ct.if((0,p._)`${g.default.errors} === ${Qe||0}`))}}function de(xe,Se){const{gen:Me,schema:Qe,opts:{useDefaults:ct}}=xe;ct&&(0,i.assignDefaults)(xe,Se.type),Me.block(()=>{for(const Mt of Se.rules)(0,n.shouldUseRule)(Qe,Mt)&&Ye(xe,Mt.keyword,Mt.definition,Se.type)})}function we(xe,Se){xe.schemaEnv.meta||!xe.opts.strictTypes||(Oe(xe,Se),xe.opts.allowUnionTypes||pe(xe,Se),K(xe,xe.dataTypes))}function Oe(xe,Se){if(Se.length){if(!xe.dataTypes.length){xe.dataTypes=Se;return}Se.forEach(Me=>{ae(xe.dataTypes,Me)||ie(xe,`type "${Me}" not allowed by context "${xe.dataTypes.join(",")}"`)}),Y(xe,Se)}}function pe(xe,Se){Se.length>1&&!(Se.length===2&&Se.includes("null"))&&ie(xe,"use allowUnionTypes to allow union type keyword")}function K(xe,Se){const Me=xe.self.RULES.all;for(const Qe in Me){const ct=Me[Qe];if(typeof ct=="object"&&(0,n.shouldUseRule)(xe.schema,ct)){const{type:Mt}=ct.definition;Mt.length&&!Mt.some(ln=>oe(Se,ln))&&ie(xe,`missing type "${Mt.join(",")}" for keyword "${Qe}"`)}}}function oe(xe,Se){return xe.includes(Se)||Se==="number"&&xe.includes("integer")}function ae(xe,Se){return xe.includes(Se)||Se==="integer"&&xe.includes("number")}function Y(xe,Se){const Me=[];for(const Qe of xe.dataTypes)ae(Se,Qe)?Me.push(Qe):Se.includes("integer")&&Qe==="number"&&Me.push("integer");xe.dataTypes=Me}function ie(xe,Se){const Me=xe.schemaEnv.baseId+xe.errSchemaPath;Se+=` at "${Me}" (strictTypes)`,(0,w.checkStrictMode)(xe,Se,xe.opts.strictTypes)}class be{constructor(Se,Me,Qe){if((0,a.validateKeywordUsage)(Se,Me,Qe),this.gen=Se.gen,this.allErrors=Se.allErrors,this.keyword=Qe,this.data=Se.data,this.schema=Se.schema[Qe],this.$data=Me.$data&&Se.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,w.schemaRefOrVal)(Se,this.schema,Qe,this.$data),this.schemaType=Me.schemaType,this.parentSchema=Se.schema,this.params={},this.it=Se,this.def=Me,this.$data)this.schemaCode=Se.gen.const("vSchema",bt(this.$data,Se));else if(this.schemaCode=this.schemaValue,!(0,a.validSchemaType)(this.schema,Me.schemaType,Me.allowUndefined))throw new Error(`${Qe} value must be ${JSON.stringify(Me.schemaType)}`);("code"in Me?Me.trackErrors:Me.errors!==!1)&&(this.errsCount=Se.gen.const("_errs",g.default.errors))}result(Se,Me,Qe){this.failResult((0,p.not)(Se),Me,Qe)}failResult(Se,Me,Qe){this.gen.if(Se),Qe?Qe():this.error(),Me?(this.gen.else(),Me(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(Se,Me){this.failResult((0,p.not)(Se),void 0,Me)}fail(Se){if(Se===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(Se),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(Se){if(!this.$data)return this.fail(Se);const{schemaCode:Me}=this;this.fail((0,p._)`${Me} !== undefined && (${(0,p.or)(this.invalid$data(),Se)})`)}error(Se,Me,Qe){if(Me){this.setParams(Me),this._error(Se,Qe),this.setParams({});return}this._error(Se,Qe)}_error(Se,Me){(Se?S.reportExtraError:S.reportError)(this,this.def.error,Me)}$dataError(){(0,S.reportError)(this,this.def.$dataError||S.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,S.resetErrorsCount)(this.gen,this.errsCount)}ok(Se){this.allErrors||this.gen.if(Se)}setParams(Se,Me){Me?Object.assign(this.params,Se):this.params=Se}block$data(Se,Me,Qe=p.nil){this.gen.block(()=>{this.check$data(Se,Qe),Me()})}check$data(Se=p.nil,Me=p.nil){if(!this.$data)return;const{gen:Qe,schemaCode:ct,schemaType:Mt,def:ln}=this;Qe.if((0,p.or)((0,p._)`${ct} === undefined`,Me)),Se!==p.nil&&Qe.assign(Se,!0),(Mt.length||ln.validateSchema)&&(Qe.elseIf(this.invalid$data()),this.$dataError(),Se!==p.nil&&Qe.assign(Se,!1)),Qe.else()}invalid$data(){const{gen:Se,schemaCode:Me,schemaType:Qe,def:ct,it:Mt}=this;return(0,p.or)(ln(),Zt());function ln(){if(Qe.length){if(!(Me instanceof p.Name))throw new Error("ajv implementation error");const jt=Array.isArray(Qe)?Qe:[Qe];return(0,p._)`${(0,r.checkDataTypes)(jt,Me,Mt.opts.strictNumbers,r.DataType.Wrong)}`}return p.nil}function Zt(){if(ct.validateSchema){const jt=Se.scopeValue("validate$data",{ref:ct.validateSchema});return(0,p._)`!${jt}(${Me})`}return p.nil}}subschema(Se,Me){const Qe=(0,u.getSubschema)(this.it,Se);(0,u.extendSubschemaData)(Qe,this.it,Se),(0,u.extendSubschemaMode)(Qe,Se);const ct={...this.it,...Qe,items:void 0,props:void 0};return j(ct,Me),ct}mergeEvaluated(Se,Me){const{it:Qe,gen:ct}=this;Qe.opts.unevaluated&&(Qe.props!==!0&&Se.props!==void 0&&(Qe.props=w.mergeEvaluated.props(ct,Se.props,Qe.props,Me)),Qe.items!==!0&&Se.items!==void 0&&(Qe.items=w.mergeEvaluated.items(ct,Se.items,Qe.items,Me)))}mergeValidEvaluated(Se,Me){const{it:Qe,gen:ct}=this;if(Qe.opts.unevaluated&&(Qe.props!==!0||Qe.items!==!0))return ct.if(Me,()=>this.mergeEvaluated(Se,p.Name)),!0}}Wo.KeywordCxt=be;function Ye(xe,Se,Me,Qe){const ct=new be(xe,Me,Se);"code"in Me?Me.code(ct,Qe):ct.$data&&Me.validate?(0,a.funcKeywordCode)(ct,Me):"macro"in Me?(0,a.macroKeywordCode)(ct,Me):(Me.compile||Me.validate)&&(0,a.funcKeywordCode)(ct,Me)}const Ve=/^\/(?:[^~]|~0|~1)*$/,$e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function bt(xe,{dataLevel:Se,dataNames:Me,dataPathArr:Qe}){let ct,Mt;if(xe==="")return g.default.rootData;if(xe[0]==="/"){if(!Ve.test(xe))throw new Error(`Invalid JSON-pointer: ${xe}`);ct=xe,Mt=g.default.rootData}else{const jn=$e.exec(xe);if(!jn)throw new Error(`Invalid JSON-pointer: ${xe}`);const ot=+jn[1];if(ct=jn[2],ct==="#"){if(ot>=Se)throw new Error(jt("property/index",ot));return Qe[Se-ot]}if(ot>Se)throw new Error(jt("data",ot));if(Mt=Me[Se-ot],!ct)return Mt}let ln=Mt;const Zt=ct.split("/");for(const jn of Zt)jn&&(Mt=(0,p._)`${Mt}${(0,p.getProperty)((0,w.unescapeJsonPointer)(jn))}`,ln=(0,p._)`${ln} && ${Mt}`);return ln;function jt(jn,ot){return`Cannot access ${jn} ${ot} levels up, current level is ${Se}`}}return Wo.getData=bt,Wo}var vm={},jA;function M2(){if(jA)return vm;jA=1,Object.defineProperty(vm,"__esModule",{value:!0});class t extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return vm.default=t,vm}var bm={},PA;function z1(){if(PA)return bm;PA=1,Object.defineProperty(bm,"__esModule",{value:!0});const t=B1();class e extends Error{constructor(r,i,a,u){super(u||`can't resolve reference ${a} from id ${i}`),this.missingRef=(0,t.resolveUrl)(r,i,a),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(r,this.missingRef))}}return bm.default=e,bm}var $s={},BA;function D2(){if(BA)return $s;BA=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.resolveSchema=$s.getCompilingSchema=$s.resolveRef=$s.compileSchema=$s.SchemaEnv=void 0;const t=In(),e=M2(),n=mc(),r=B1(),i=Zn(),a=U1();class u{constructor(L){var k;this.refs={},this.dynamicAnchors={};let j;typeof L.schema=="object"&&(j=L.schema),this.schema=L.schema,this.schemaId=L.schemaId,this.root=L.root||this,this.baseId=(k=L.baseId)!==null&&k!==void 0?k:(0,r.normalizeId)(j?.[L.schemaId||"$id"]),this.schemaPath=L.schemaPath,this.localRefs=L.localRefs,this.meta=L.meta,this.$async=j?.$async,this.refs={}}}$s.SchemaEnv=u;function p(M){const L=w.call(this,M);if(L)return L;const k=(0,r.getFullPath)(this.opts.uriResolver,M.root.baseId),{es5:j,lines:$}=this.opts.code,{ownProperties:U}=this.opts,F=new t.CodeGen(this.scope,{es5:j,lines:$,ownProperties:U});let B;M.$async&&(B=F.scopeValue("Error",{ref:e.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));const Z=F.scopeName("validate");M.validateName=Z;const le={gen:F,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:F.scopeValue("schema",this.opts.code.source===!0?{ref:M.schema,code:(0,t.stringify)(M.schema)}:{ref:M.schema}),validateName:Z,ValidationError:B,schema:M.schema,schemaEnv:M,rootId:k,baseId:M.baseId||k,schemaPath:t.nil,errSchemaPath:M.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this};let Ne;try{this._compilations.add(M),(0,a.validateFunctionCode)(le),F.optimize(this.opts.code.optimize);const G=F.toString();Ne=`${F.scopeRefs(n.default.scope)}return ${G}`,this.opts.code.process&&(Ne=this.opts.code.process(Ne,M));const se=new Function(`${n.default.self}`,`${n.default.scope}`,Ne)(this,this.scope.get());if(this.scope.value(Z,{ref:se}),se.errors=null,se.schema=M.schema,se.schemaEnv=M,M.$async&&(se.$async=!0),this.opts.code.source===!0&&(se.source={validateName:Z,validateCode:G,scopeValues:F._values}),this.opts.unevaluated){const{props:Ee,items:ue}=le;se.evaluated={props:Ee instanceof t.Name?void 0:Ee,items:ue instanceof t.Name?void 0:ue,dynamicProps:Ee instanceof t.Name,dynamicItems:ue instanceof t.Name},se.source&&(se.source.evaluated=(0,t.stringify)(se.evaluated))}return M.validate=se,M}catch(G){throw delete M.validate,delete M.validateName,Ne&&this.logger.error("Error compiling schema, function code:",Ne),G}finally{this._compilations.delete(M)}}$s.compileSchema=p;function g(M,L,k){var j;k=(0,r.resolveUrl)(this.opts.uriResolver,L,k);const $=M.refs[k];if($)return $;let U=_.call(this,M,k);if(U===void 0){const F=(j=M.localRefs)===null||j===void 0?void 0:j[k],{schemaId:B}=this.opts;F&&(U=new u({schema:F,schemaId:B,root:M,baseId:L}))}if(U!==void 0)return M.refs[k]=y.call(this,U)}$s.resolveRef=g;function y(M){return(0,r.inlineRef)(M.schema,this.opts.inlineRefs)?M.schema:M.validate?M:p.call(this,M)}function w(M){for(const L of this._compilations)if(S(L,M))return L}$s.getCompilingSchema=w;function S(M,L){return M.schema===L.schema&&M.root===L.root&&M.baseId===L.baseId}function _(M,L){let k;for(;typeof(k=this.refs[L])=="string";)L=k;return k||this.schemas[L]||C.call(this,M,L)}function C(M,L){const k=this.opts.uriResolver.parse(L),j=(0,r._getFullPath)(this.opts.uriResolver,k);let $=(0,r.getFullPath)(this.opts.uriResolver,M.baseId,void 0);if(Object.keys(M.schema).length>0&&j===$)return R.call(this,k,M);const U=(0,r.normalizeId)(j),F=this.refs[U]||this.schemas[U];if(typeof F=="string"){const B=C.call(this,M,F);return typeof B?.schema!="object"?void 0:R.call(this,k,B)}if(typeof F?.schema=="object"){if(F.validate||p.call(this,F),U===(0,r.normalizeId)(L)){const{schema:B}=F,{schemaId:Z}=this.opts,le=B[Z];return le&&($=(0,r.resolveUrl)(this.opts.uriResolver,$,le)),new u({schema:B,schemaId:Z,root:M,baseId:$})}return R.call(this,k,F)}}$s.resolveSchema=C;const N=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function R(M,{baseId:L,schema:k,root:j}){var $;if((($=M.fragment)===null||$===void 0?void 0:$[0])!=="/")return;for(const B of M.fragment.slice(1).split("/")){if(typeof k=="boolean")return;const Z=k[(0,i.unescapeFragment)(B)];if(Z===void 0)return;k=Z;const le=typeof k=="object"&&k[this.opts.schemaId];!N.has(B)&&le&&(L=(0,r.resolveUrl)(this.opts.uriResolver,L,le))}let U;if(typeof k!="boolean"&&k.$ref&&!(0,i.schemaHasRulesButRef)(k,this.RULES)){const B=(0,r.resolveUrl)(this.opts.uriResolver,L,k.$ref);U=C.call(this,j,B)}const{schemaId:F}=this.opts;if(U=U||new u({schema:k,schemaId:F,root:j,baseId:L}),U.schema!==U.root.schema)return U}return $s}const wq="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Eq="Meta-schema for $data reference (JSON AnySchema extension proposal)",Sq="object",xq=["$data"],_q={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Aq=!1,Cq={$id:wq,description:Eq,type:Sq,required:xq,properties:_q,additionalProperties:Aq};var wm={},Mh={exports:{}},Ev,UA;function Z8(){if(UA)return Ev;UA=1;const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),e=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function n(_){let C="",N=0,R=0;for(R=0;R<_.length;R++)if(N=_[R].charCodeAt(0),N!==48){if(!(N>=48&&N<=57||N>=65&&N<=70||N>=97&&N<=102))return"";C+=_[R];break}for(R+=1;R<_.length;R++){if(N=_[R].charCodeAt(0),!(N>=48&&N<=57||N>=65&&N<=70||N>=97&&N<=102))return"";C+=_[R]}return C}const r=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function i(_){return _.length=0,!0}function a(_,C,N){if(_.length){const R=n(_);if(R!=="")C.push(R);else return N.error=!0,!1;_.length=0}return!0}function u(_){let C=0;const N={error:!1,address:"",zone:""},R=[],M=[];let L=!1,k=!1,j=a;for(let $=0;$<_.length;$++){const U=_[$];if(!(U==="["||U==="]"))if(U===":"){if(L===!0&&(k=!0),!j(M,R,N))break;if(++C>7){N.error=!0;break}$>0&&_[$-1]===":"&&(L=!0),R.push(":");continue}else if(U==="%"){if(!j(M,R,N))break;j=i}else{M.push(U);continue}}return M.length&&(j===i?N.zone=M.join(""):k?R.push(M.join("")):R.push(n(M))),N.address=R.join(""),N}function p(_){if(g(_,":")<2)return{host:_,isIPV6:!1};const C=u(_);if(C.error)return{host:_,isIPV6:!1};{let N=C.address,R=C.address;return C.zone&&(N+="%"+C.zone,R+="%25"+C.zone),{host:N,isIPV6:!0,escapedHost:R}}}function g(_,C){let N=0;for(let R=0;R<_.length;R++)_[R]===C&&N++;return N}function y(_){let C=_;const N=[];let R=-1,M=0;for(;M=C.length;){if(M===1){if(C===".")break;if(C==="/"){N.push("/");break}else{N.push(C);break}}else if(M===2){if(C[0]==="."){if(C[1]===".")break;if(C[1]==="/"){C=C.slice(2);continue}}else if(C[0]==="/"&&(C[1]==="."||C[1]==="/")){N.push("/");break}}else if(M===3&&C==="/.."){N.length!==0&&N.pop(),N.push("/");break}if(C[0]==="."){if(C[1]==="."){if(C[2]==="/"){C=C.slice(3);continue}}else if(C[1]==="/"){C=C.slice(2);continue}}else if(C[0]==="/"&&C[1]==="."){if(C[2]==="/"){C=C.slice(2);continue}else if(C[2]==="."&&C[3]==="/"){C=C.slice(3),N.length!==0&&N.pop();continue}}if((R=C.indexOf("/",1))===-1){N.push(C);break}else N.push(C.slice(0,R)),C=C.slice(R)}return N.join("")}function w(_,C){const N=C!==!0?escape:unescape;return _.scheme!==void 0&&(_.scheme=N(_.scheme)),_.userinfo!==void 0&&(_.userinfo=N(_.userinfo)),_.host!==void 0&&(_.host=N(_.host)),_.path!==void 0&&(_.path=N(_.path)),_.query!==void 0&&(_.query=N(_.query)),_.fragment!==void 0&&(_.fragment=N(_.fragment)),_}function S(_){const C=[];if(_.userinfo!==void 0&&(C.push(_.userinfo),C.push("@")),_.host!==void 0){let N=unescape(_.host);if(!e(N)){const R=p(N);R.isIPV6===!0?N=`[${R.escapedHost}]`:N=_.host}C.push(N)}return(typeof _.port=="number"||typeof _.port=="string")&&(C.push(":"),C.push(String(_.port))),C.length?C.join(""):void 0}return Ev={nonSimpleDomain:r,recomposeAuthority:S,normalizeComponentEncoding:w,removeDotSegments:y,isIPv4:e,isUUID:t,normalizeIPv6:p,stringArrayToHexStripped:n},Ev}var Sv,zA;function Nq(){if(zA)return Sv;zA=1;const{isUUID:t}=Z8(),e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,n=["http","https","ws","wss","urn","urn:uuid"];function r(U){return n.indexOf(U)!==-1}function i(U){return U.secure===!0?!0:U.secure===!1?!1:U.scheme?U.scheme.length===3&&(U.scheme[0]==="w"||U.scheme[0]==="W")&&(U.scheme[1]==="s"||U.scheme[1]==="S")&&(U.scheme[2]==="s"||U.scheme[2]==="S"):!1}function a(U){return U.host||(U.error=U.error||"HTTP URIs must have a host."),U}function u(U){const F=String(U.scheme).toLowerCase()==="https";return(U.port===(F?443:80)||U.port==="")&&(U.port=void 0),U.path||(U.path="/"),U}function p(U){return U.secure=i(U),U.resourceName=(U.path||"/")+(U.query?"?"+U.query:""),U.path=void 0,U.query=void 0,U}function g(U){if((U.port===(i(U)?443:80)||U.port==="")&&(U.port=void 0),typeof U.secure=="boolean"&&(U.scheme=U.secure?"wss":"ws",U.secure=void 0),U.resourceName){const[F,B]=U.resourceName.split("?");U.path=F&&F!=="/"?F:void 0,U.query=B,U.resourceName=void 0}return U.fragment=void 0,U}function y(U,F){if(!U.path)return U.error="URN can not be parsed",U;const B=U.path.match(e);if(B){const Z=F.scheme||U.scheme||"urn";U.nid=B[1].toLowerCase(),U.nss=B[2];const le=`${Z}:${F.nid||U.nid}`,Ne=$(le);U.path=void 0,Ne&&(U=Ne.parse(U,F))}else U.error=U.error||"URN can not be parsed.";return U}function w(U,F){if(U.nid===void 0)throw new Error("URN without nid cannot be serialized");const B=F.scheme||U.scheme||"urn",Z=U.nid.toLowerCase(),le=`${B}:${F.nid||Z}`,Ne=$(le);Ne&&(U=Ne.serialize(U,F));const G=U,ce=U.nss;return G.path=`${Z||F.nid}:${ce}`,F.skipEscape=!0,G}function S(U,F){const B=U;return B.uuid=B.nss,B.nss=void 0,!F.tolerant&&(!B.uuid||!t(B.uuid))&&(B.error=B.error||"UUID is not valid."),B}function _(U){const F=U;return F.nss=(U.uuid||"").toLowerCase(),F}const C={scheme:"http",domainHost:!0,parse:a,serialize:u},N={scheme:"https",domainHost:C.domainHost,parse:a,serialize:u},R={scheme:"ws",domainHost:!0,parse:p,serialize:g},M={scheme:"wss",domainHost:R.domainHost,parse:R.parse,serialize:R.serialize},j={http:C,https:N,ws:R,wss:M,urn:{scheme:"urn",parse:y,serialize:w,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:S,serialize:_,skipNormalize:!0}};Object.setPrototypeOf(j,null);function $(U){return U&&(j[U]||j[U.toLowerCase()])||void 0}return Sv={wsIsSecure:i,SCHEMES:j,isValidSchemeName:r,getSchemeHandler:$},Sv}var FA;function Tq(){if(FA)return Mh.exports;FA=1;const{normalizeIPv6:t,removeDotSegments:e,recomposeAuthority:n,normalizeComponentEncoding:r,isIPv4:i,nonSimpleDomain:a}=Z8(),{SCHEMES:u,getSchemeHandler:p}=Nq();function g(M,L){return typeof M=="string"?M=_(N(M,L),L):typeof M=="object"&&(M=N(_(M,L),L)),M}function y(M,L,k){const j=k?Object.assign({scheme:"null"},k):{scheme:"null"},$=w(N(M,j),N(L,j),j,!0);return j.skipEscape=!0,_($,j)}function w(M,L,k,j){const $={};return j||(M=N(_(M,k),k),L=N(_(L,k),k)),k=k||{},!k.tolerant&&L.scheme?($.scheme=L.scheme,$.userinfo=L.userinfo,$.host=L.host,$.port=L.port,$.path=e(L.path||""),$.query=L.query):(L.userinfo!==void 0||L.host!==void 0||L.port!==void 0?($.userinfo=L.userinfo,$.host=L.host,$.port=L.port,$.path=e(L.path||""),$.query=L.query):(L.path?(L.path[0]==="/"?$.path=e(L.path):((M.userinfo!==void 0||M.host!==void 0||M.port!==void 0)&&!M.path?$.path="/"+L.path:M.path?$.path=M.path.slice(0,M.path.lastIndexOf("/")+1)+L.path:$.path=L.path,$.path=e($.path)),$.query=L.query):($.path=M.path,L.query!==void 0?$.query=L.query:$.query=M.query),$.userinfo=M.userinfo,$.host=M.host,$.port=M.port),$.scheme=M.scheme),$.fragment=L.fragment,$}function S(M,L,k){return typeof M=="string"?(M=unescape(M),M=_(r(N(M,k),!0),{...k,skipEscape:!0})):typeof M=="object"&&(M=_(r(M,!0),{...k,skipEscape:!0})),typeof L=="string"?(L=unescape(L),L=_(r(N(L,k),!0),{...k,skipEscape:!0})):typeof L=="object"&&(L=_(r(L,!0),{...k,skipEscape:!0})),M.toLowerCase()===L.toLowerCase()}function _(M,L){const k={host:M.host,scheme:M.scheme,userinfo:M.userinfo,port:M.port,path:M.path,query:M.query,nid:M.nid,nss:M.nss,uuid:M.uuid,fragment:M.fragment,reference:M.reference,resourceName:M.resourceName,secure:M.secure,error:""},j=Object.assign({},L),$=[],U=p(j.scheme||k.scheme);U&&U.serialize&&U.serialize(k,j),k.path!==void 0&&(j.skipEscape?k.path=unescape(k.path):(k.path=escape(k.path),k.scheme!==void 0&&(k.path=k.path.split("%3A").join(":")))),j.reference!=="suffix"&&k.scheme&&$.push(k.scheme,":");const F=n(k);if(F!==void 0&&(j.reference!=="suffix"&&$.push("//"),$.push(F),k.path&&k.path[0]!=="/"&&$.push("/")),k.path!==void 0){let B=k.path;!j.absolutePath&&(!U||!U.absolutePath)&&(B=e(B)),F===void 0&&B[0]==="/"&&B[1]==="/"&&(B="/%2F"+B.slice(2)),$.push(B)}return k.query!==void 0&&$.push("?",k.query),k.fragment!==void 0&&$.push("#",k.fragment),$.join("")}const C=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function N(M,L){const k=Object.assign({},L),j={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let $=!1;k.reference==="suffix"&&(k.scheme?M=k.scheme+":"+M:M="//"+M);const U=M.match(C);if(U){if(j.scheme=U[1],j.userinfo=U[3],j.host=U[4],j.port=parseInt(U[5],10),j.path=U[6]||"",j.query=U[7],j.fragment=U[8],isNaN(j.port)&&(j.port=U[5]),j.host)if(i(j.host)===!1){const Z=t(j.host);j.host=Z.host.toLowerCase(),$=Z.isIPV6}else $=!0;j.scheme===void 0&&j.userinfo===void 0&&j.host===void 0&&j.port===void 0&&j.query===void 0&&!j.path?j.reference="same-document":j.scheme===void 0?j.reference="relative":j.fragment===void 0?j.reference="absolute":j.reference="uri",k.reference&&k.reference!=="suffix"&&k.reference!==j.reference&&(j.error=j.error||"URI is not a "+k.reference+" reference.");const F=p(k.scheme||j.scheme);if(!k.unicodeSupport&&(!F||!F.unicodeSupport)&&j.host&&(k.domainHost||F&&F.domainHost)&&$===!1&&a(j.host))try{j.host=URL.domainToASCII(j.host.toLowerCase())}catch(B){j.error=j.error||"Host's domain name can not be converted to ASCII: "+B}(!F||F&&!F.skipNormalize)&&(M.indexOf("%")!==-1&&(j.scheme!==void 0&&(j.scheme=unescape(j.scheme)),j.host!==void 0&&(j.host=unescape(j.host))),j.path&&(j.path=escape(unescape(j.path))),j.fragment&&(j.fragment=encodeURI(decodeURIComponent(j.fragment)))),F&&F.parse&&F.parse(j,k)}else j.error=j.error||"URI can not be parsed.";return j}const R={SCHEMES:u,normalize:g,resolve:y,resolveComponent:w,equal:S,serialize:_,parse:N};return Mh.exports=R,Mh.exports.default=R,Mh.exports.fastUri=R,Mh.exports}var qA;function Oq(){if(qA)return wm;qA=1,Object.defineProperty(wm,"__esModule",{value:!0});const t=Tq();return t.code='require("ajv/dist/runtime/uri").default',wm.default=t,wm}var $A;function Rq(){return $A||($A=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=U1();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=In();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=M2(),i=z1(),a=W8(),u=D2(),p=In(),g=B1(),y=e1(),w=Zn(),S=Cq,_=Oq(),C=(pe,K)=>new RegExp(pe,K);C.code="new RegExp";const N=["removeAdditional","useDefaults","coerceTypes"],R=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),M={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},L={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},k=200;function j(pe){var K,oe,ae,Y,ie,be,Ye,Ve,$e,bt,xe,Se,Me,Qe,ct,Mt,ln,Zt,jt,jn,ot,Wr,nr,Jt,gr;const zn=pe.strict,jr=(K=pe.code)===null||K===void 0?void 0:K.optimize,Cn=jr===!0||jr===void 0?1:jr||0,xn=(ae=(oe=pe.code)===null||oe===void 0?void 0:oe.regExp)!==null&&ae!==void 0?ae:C,yr=(Y=pe.uriResolver)!==null&&Y!==void 0?Y:_.default;return{strictSchema:(be=(ie=pe.strictSchema)!==null&&ie!==void 0?ie:zn)!==null&&be!==void 0?be:!0,strictNumbers:(Ve=(Ye=pe.strictNumbers)!==null&&Ye!==void 0?Ye:zn)!==null&&Ve!==void 0?Ve:!0,strictTypes:(bt=($e=pe.strictTypes)!==null&&$e!==void 0?$e:zn)!==null&&bt!==void 0?bt:"log",strictTuples:(Se=(xe=pe.strictTuples)!==null&&xe!==void 0?xe:zn)!==null&&Se!==void 0?Se:"log",strictRequired:(Qe=(Me=pe.strictRequired)!==null&&Me!==void 0?Me:zn)!==null&&Qe!==void 0?Qe:!1,code:pe.code?{...pe.code,optimize:Cn,regExp:xn}:{optimize:Cn,regExp:xn},loopRequired:(ct=pe.loopRequired)!==null&&ct!==void 0?ct:k,loopEnum:(Mt=pe.loopEnum)!==null&&Mt!==void 0?Mt:k,meta:(ln=pe.meta)!==null&&ln!==void 0?ln:!0,messages:(Zt=pe.messages)!==null&&Zt!==void 0?Zt:!0,inlineRefs:(jt=pe.inlineRefs)!==null&&jt!==void 0?jt:!0,schemaId:(jn=pe.schemaId)!==null&&jn!==void 0?jn:"$id",addUsedSchema:(ot=pe.addUsedSchema)!==null&&ot!==void 0?ot:!0,validateSchema:(Wr=pe.validateSchema)!==null&&Wr!==void 0?Wr:!0,validateFormats:(nr=pe.validateFormats)!==null&&nr!==void 0?nr:!0,unicodeRegExp:(Jt=pe.unicodeRegExp)!==null&&Jt!==void 0?Jt:!0,int32range:(gr=pe.int32range)!==null&&gr!==void 0?gr:!0,uriResolver:yr}}class ${constructor(K={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,K=this.opts={...K,...j(K)};const{es5:oe,lines:ae}=this.opts.code;this.scope=new p.ValueScope({scope:{},prefixes:R,es5:oe,lines:ae}),this.logger=ce(K.logger);const Y=K.validateFormats;K.validateFormats=!1,this.RULES=(0,a.getRules)(),U.call(this,M,K,"NOT SUPPORTED"),U.call(this,L,K,"DEPRECATED","warn"),this._metaOpts=Ne.call(this),K.formats&&Z.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),K.keywords&&le.call(this,K.keywords),typeof K.meta=="object"&&this.addMetaSchema(K.meta),B.call(this),K.validateFormats=Y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:K,meta:oe,schemaId:ae}=this.opts;let Y=S;ae==="id"&&(Y={...S},Y.id=Y.$id,delete Y.$id),oe&&K&&this.addMetaSchema(Y,Y[ae],!1)}defaultMeta(){const{meta:K,schemaId:oe}=this.opts;return this.opts.defaultMeta=typeof K=="object"?K[oe]||K:void 0}validate(K,oe){let ae;if(typeof K=="string"){if(ae=this.getSchema(K),!ae)throw new Error(`no schema with key or ref "${K}"`)}else ae=this.compile(K);const Y=ae(oe);return"$async"in ae||(this.errors=ae.errors),Y}compile(K,oe){const ae=this._addSchema(K,oe);return ae.validate||this._compileSchemaEnv(ae)}compileAsync(K,oe){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ae}=this.opts;return Y.call(this,K,oe);async function Y(bt,xe){await ie.call(this,bt.$schema);const Se=this._addSchema(bt,xe);return Se.validate||be.call(this,Se)}async function ie(bt){bt&&!this.getSchema(bt)&&await Y.call(this,{$ref:bt},!0)}async function be(bt){try{return this._compileSchemaEnv(bt)}catch(xe){if(!(xe instanceof i.default))throw xe;return Ye.call(this,xe),await Ve.call(this,xe.missingSchema),be.call(this,bt)}}function Ye({missingSchema:bt,missingRef:xe}){if(this.refs[bt])throw new Error(`AnySchema ${bt} is loaded but ${xe} cannot be resolved`)}async function Ve(bt){const xe=await $e.call(this,bt);this.refs[bt]||await ie.call(this,xe.$schema),this.refs[bt]||this.addSchema(xe,bt,oe)}async function $e(bt){const xe=this._loading[bt];if(xe)return xe;try{return await(this._loading[bt]=ae(bt))}finally{delete this._loading[bt]}}}addSchema(K,oe,ae,Y=this.opts.validateSchema){if(Array.isArray(K)){for(const be of K)this.addSchema(be,void 0,ae,Y);return this}let ie;if(typeof K=="object"){const{schemaId:be}=this.opts;if(ie=K[be],ie!==void 0&&typeof ie!="string")throw new Error(`schema ${be} must be string`)}return oe=(0,g.normalizeId)(oe||ie),this._checkUnique(oe),this.schemas[oe]=this._addSchema(K,ae,oe,Y,!0),this}addMetaSchema(K,oe,ae=this.opts.validateSchema){return this.addSchema(K,oe,!0,ae),this}validateSchema(K,oe){if(typeof K=="boolean")return!0;let ae;if(ae=K.$schema,ae!==void 0&&typeof ae!="string")throw new Error("$schema must be a string");if(ae=ae||this.opts.defaultMeta||this.defaultMeta(),!ae)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Y=this.validate(ae,K);if(!Y&&oe){const ie="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ie);else throw new Error(ie)}return Y}getSchema(K){let oe;for(;typeof(oe=F.call(this,K))=="string";)K=oe;if(oe===void 0){const{schemaId:ae}=this.opts,Y=new u.SchemaEnv({schema:{},schemaId:ae});if(oe=u.resolveSchema.call(this,Y,K),!oe)return;this.refs[K]=oe}return oe.validate||this._compileSchemaEnv(oe)}removeSchema(K){if(K instanceof RegExp)return this._removeAllSchemas(this.schemas,K),this._removeAllSchemas(this.refs,K),this;switch(typeof K){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const oe=F.call(this,K);return typeof oe=="object"&&this._cache.delete(oe.schema),delete this.schemas[K],delete this.refs[K],this}case"object":{const oe=K;this._cache.delete(oe);let ae=K[this.opts.schemaId];return ae&&(ae=(0,g.normalizeId)(ae),delete this.schemas[ae],delete this.refs[ae]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(K){for(const oe of K)this.addKeyword(oe);return this}addKeyword(K,oe){let ae;if(typeof K=="string")ae=K,typeof oe=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),oe.keyword=ae);else if(typeof K=="object"&&oe===void 0){if(oe=K,ae=oe.keyword,Array.isArray(ae)&&!ae.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ee.call(this,ae,oe),!oe)return(0,w.eachItem)(ae,ie=>ue.call(this,ie)),this;de.call(this,oe);const Y={...oe,type:(0,y.getJSONTypes)(oe.type),schemaType:(0,y.getJSONTypes)(oe.schemaType)};return(0,w.eachItem)(ae,Y.type.length===0?ie=>ue.call(this,ie,Y):ie=>Y.type.forEach(be=>ue.call(this,ie,Y,be))),this}getKeyword(K){const oe=this.RULES.all[K];return typeof oe=="object"?oe.definition:!!oe}removeKeyword(K){const{RULES:oe}=this;delete oe.keywords[K],delete oe.all[K];for(const ae of oe.rules){const Y=ae.rules.findIndex(ie=>ie.keyword===K);Y>=0&&ae.rules.splice(Y,1)}return this}addFormat(K,oe){return typeof oe=="string"&&(oe=new RegExp(oe)),this.formats[K]=oe,this}errorsText(K=this.errors,{separator:oe=", ",dataVar:ae="data"}={}){return!K||K.length===0?"No errors":K.map(Y=>`${ae}${Y.instancePath} ${Y.message}`).reduce((Y,ie)=>Y+oe+ie)}$dataMetaSchema(K,oe){const ae=this.RULES.all;K=JSON.parse(JSON.stringify(K));for(const Y of oe){const ie=Y.split("/").slice(1);let be=K;for(const Ye of ie)be=be[Ye];for(const Ye in ae){const Ve=ae[Ye];if(typeof Ve!="object")continue;const{$data:$e}=Ve.definition,bt=be[Ye];$e&&bt&&(be[Ye]=Oe(bt))}}return K}_removeAllSchemas(K,oe){for(const ae in K){const Y=K[ae];(!oe||oe.test(ae))&&(typeof Y=="string"?delete K[ae]:Y&&!Y.meta&&(this._cache.delete(Y.schema),delete K[ae]))}}_addSchema(K,oe,ae,Y=this.opts.validateSchema,ie=this.opts.addUsedSchema){let be;const{schemaId:Ye}=this.opts;if(typeof K=="object")be=K[Ye];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof K!="boolean")throw new Error("schema must be object or boolean")}let Ve=this._cache.get(K);if(Ve!==void 0)return Ve;ae=(0,g.normalizeId)(be||ae);const $e=g.getSchemaRefs.call(this,K,ae);return Ve=new u.SchemaEnv({schema:K,schemaId:Ye,meta:oe,baseId:ae,localRefs:$e}),this._cache.set(Ve.schema,Ve),ie&&!ae.startsWith("#")&&(ae&&this._checkUnique(ae),this.refs[ae]=Ve),Y&&this.validateSchema(K,!0),Ve}_checkUnique(K){if(this.schemas[K]||this.refs[K])throw new Error(`schema with key or id "${K}" already exists`)}_compileSchemaEnv(K){if(K.meta?this._compileMetaSchema(K):u.compileSchema.call(this,K),!K.validate)throw new Error("ajv implementation error");return K.validate}_compileMetaSchema(K){const oe=this.opts;this.opts=this._metaOpts;try{u.compileSchema.call(this,K)}finally{this.opts=oe}}}$.ValidationError=r.default,$.MissingRefError=i.default,t.default=$;function U(pe,K,oe,ae="error"){for(const Y in pe){const ie=Y;ie in K&&this.logger[ae](`${oe}: option ${Y}. ${pe[ie]}`)}}function F(pe){return pe=(0,g.normalizeId)(pe),this.schemas[pe]||this.refs[pe]}function B(){const pe=this.opts.schemas;if(pe)if(Array.isArray(pe))this.addSchema(pe);else for(const K in pe)this.addSchema(pe[K],K)}function Z(){for(const pe in this.opts.formats){const K=this.opts.formats[pe];K&&this.addFormat(pe,K)}}function le(pe){if(Array.isArray(pe)){this.addVocabulary(pe);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const K in pe){const oe=pe[K];oe.keyword||(oe.keyword=K),this.addKeyword(oe)}}function Ne(){const pe={...this.opts};for(const K of N)delete pe[K];return pe}const G={log(){},warn(){},error(){}};function ce(pe){if(pe===!1)return G;if(pe===void 0)return console;if(pe.log&&pe.warn&&pe.error)return pe;throw new Error("logger must implement log, warn and error methods")}const se=/^[a-z_$][a-z0-9_$:-]*$/i;function Ee(pe,K){const{RULES:oe}=this;if((0,w.eachItem)(pe,ae=>{if(oe.keywords[ae])throw new Error(`Keyword ${ae} is already defined`);if(!se.test(ae))throw new Error(`Keyword ${ae} has invalid name`)}),!!K&&K.$data&&!("code"in K||"validate"in K))throw new Error('$data keyword must have "code" or "validate" function')}function ue(pe,K,oe){var ae;const Y=K?.post;if(oe&&Y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ie}=this;let be=Y?ie.post:ie.rules.find(({type:Ve})=>Ve===oe);if(be||(be={type:oe,rules:[]},ie.rules.push(be)),ie.keywords[pe]=!0,!K)return;const Ye={keyword:pe,definition:{...K,type:(0,y.getJSONTypes)(K.type),schemaType:(0,y.getJSONTypes)(K.schemaType)}};K.before?ee.call(this,be,Ye,K.before):be.rules.push(Ye),ie.all[pe]=Ye,(ae=K.implements)===null||ae===void 0||ae.forEach(Ve=>this.addKeyword(Ve))}function ee(pe,K,oe){const ae=pe.rules.findIndex(Y=>Y.keyword===oe);ae>=0?pe.rules.splice(ae,0,K):(pe.rules.push(K),this.logger.warn(`rule ${oe} is not defined`))}function de(pe){let{metaSchema:K}=pe;K!==void 0&&(pe.$data&&this.opts.$data&&(K=Oe(K)),pe.validateSchema=this.compile(K,!0))}const we={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Oe(pe){return{anyOf:[pe,we]}}})(pv)),pv}var Em={},Sm={},xm={},VA;function Iq(){if(VA)return xm;VA=1,Object.defineProperty(xm,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return xm.default=t,xm}var Vl={},HA;function Mq(){if(HA)return Vl;HA=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.callRef=Vl.getValidate=void 0;const t=z1(),e=Xa(),n=In(),r=mc(),i=D2(),a=Zn(),u={keyword:"$ref",schemaType:"string",code(y){const{gen:w,schema:S,it:_}=y,{baseId:C,schemaEnv:N,validateName:R,opts:M,self:L}=_,{root:k}=N;if((S==="#"||S==="#/")&&C===k.baseId)return $();const j=i.resolveRef.call(L,k,C,S);if(j===void 0)throw new t.default(_.opts.uriResolver,C,S);if(j instanceof i.SchemaEnv)return U(j);return F(j);function $(){if(N===k)return g(y,R,N,N.$async);const B=w.scopeValue("root",{ref:k});return g(y,(0,n._)`${B}.validate`,k,k.$async)}function U(B){const Z=p(y,B);g(y,Z,B,B.$async)}function F(B){const Z=w.scopeValue("schema",M.code.source===!0?{ref:B,code:(0,n.stringify)(B)}:{ref:B}),le=w.name("valid"),Ne=y.subschema({schema:B,dataTypes:[],schemaPath:n.nil,topSchemaRef:Z,errSchemaPath:S},le);y.mergeEvaluated(Ne),y.ok(le)}}};function p(y,w){const{gen:S}=y;return w.validate?S.scopeValue("validate",{ref:w.validate}):(0,n._)`${S.scopeValue("wrapper",{ref:w})}.validate`}Vl.getValidate=p;function g(y,w,S,_){const{gen:C,it:N}=y,{allErrors:R,schemaEnv:M,opts:L}=N,k=L.passContext?r.default.this:n.nil;_?j():$();function j(){if(!M.$async)throw new Error("async schema referenced by sync schema");const B=C.let("valid");C.try(()=>{C.code((0,n._)`await ${(0,e.callValidateCode)(y,w,k)}`),F(w),R||C.assign(B,!0)},Z=>{C.if((0,n._)`!(${Z} instanceof ${N.ValidationError})`,()=>C.throw(Z)),U(Z),R||C.assign(B,!1)}),y.ok(B)}function $(){y.result((0,e.callValidateCode)(y,w,k),()=>F(w),()=>U(w))}function U(B){const Z=(0,n._)`${B}.errors`;C.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${Z} : ${r.default.vErrors}.concat(${Z})`),C.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function F(B){var Z;if(!N.opts.unevaluated)return;const le=(Z=S?.validate)===null||Z===void 0?void 0:Z.evaluated;if(N.props!==!0)if(le&&!le.dynamicProps)le.props!==void 0&&(N.props=a.mergeEvaluated.props(C,le.props,N.props));else{const Ne=C.var("props",(0,n._)`${B}.evaluated.props`);N.props=a.mergeEvaluated.props(C,Ne,N.props,n.Name)}if(N.items!==!0)if(le&&!le.dynamicItems)le.items!==void 0&&(N.items=a.mergeEvaluated.items(C,le.items,N.items));else{const Ne=C.var("items",(0,n._)`${B}.evaluated.items`);N.items=a.mergeEvaluated.items(C,Ne,N.items,n.Name)}}}return Vl.callRef=g,Vl.default=u,Vl}var KA;function Dq(){if(KA)return Sm;KA=1,Object.defineProperty(Sm,"__esModule",{value:!0});const t=Iq(),e=Mq(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default];return Sm.default=n,Sm}var _m={},Am={},GA;function Lq(){if(GA)return Am;GA=1,Object.defineProperty(Am,"__esModule",{value:!0});const t=In(),e=t.operators,n={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},r={message:({keyword:a,schemaCode:u})=>(0,t.str)`must be ${n[a].okStr} ${u}`,params:({keyword:a,schemaCode:u})=>(0,t._)`{comparison: ${n[a].okStr}, limit: ${u}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(a){const{keyword:u,data:p,schemaCode:g}=a;a.fail$data((0,t._)`${p} ${n[u].fail} ${g} || isNaN(${p})`)}};return Am.default=i,Am}var Cm={},YA;function kq(){if(YA)return Cm;YA=1,Object.defineProperty(Cm,"__esModule",{value:!0});const t=In(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,t.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,t._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:a,schemaCode:u,it:p}=r,g=p.opts.multipleOfPrecision,y=i.let("res"),w=g?(0,t._)`Math.abs(Math.round(${y}) - ${y}) > 1e-${g}`:(0,t._)`${y} !== parseInt(${y})`;r.fail$data((0,t._)`(${u} === 0 || (${y} = ${a}/${u}, ${w}))`)}};return Cm.default=n,Cm}var Nm={},Tm={},WA;function jq(){if(WA)return Tm;WA=1,Object.defineProperty(Tm,"__esModule",{value:!0});function t(e){const n=e.length;let r=0,i=0,a;for(;i<n;)r++,a=e.charCodeAt(i++),a>=55296&&a<=56319&&i<n&&(a=e.charCodeAt(i),(a&64512)===56320&&i++);return r}return Tm.default=t,t.code='require("ajv/dist/runtime/ucs2length").default',Tm}var XA;function Pq(){if(XA)return Nm;XA=1,Object.defineProperty(Nm,"__esModule",{value:!0});const t=In(),e=Zn(),n=jq(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:u}){const p=a==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${p} than ${u} characters`},params:({schemaCode:a})=>(0,t._)`{limit: ${a}}`},code(a){const{keyword:u,data:p,schemaCode:g,it:y}=a,w=u==="maxLength"?t.operators.GT:t.operators.LT,S=y.opts.unicode===!1?(0,t._)`${p}.length`:(0,t._)`${(0,e.useFunc)(a.gen,n.default)}(${p})`;a.fail$data((0,t._)`${S} ${w} ${g}`)}};return Nm.default=i,Nm}var Om={},QA;function Bq(){if(QA)return Om;QA=1,Object.defineProperty(Om,"__esModule",{value:!0});const t=Xa(),e=In(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,e.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,e._)`{pattern: ${i}}`},code(i){const{data:a,$data:u,schema:p,schemaCode:g,it:y}=i,w=y.opts.unicodeRegExp?"u":"",S=u?(0,e._)`(new RegExp(${g}, ${w}))`:(0,t.usePattern)(i,p);i.fail$data((0,e._)`!${S}.test(${a})`)}};return Om.default=r,Om}var Rm={},ZA;function Uq(){if(ZA)return Rm;ZA=1,Object.defineProperty(Rm,"__esModule",{value:!0});const t=In(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const a=r==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${a} than ${i} properties`},params:({schemaCode:r})=>(0,t._)`{limit: ${r}}`},code(r){const{keyword:i,data:a,schemaCode:u}=r,p=i==="maxProperties"?t.operators.GT:t.operators.LT;r.fail$data((0,t._)`Object.keys(${a}).length ${p} ${u}`)}};return Rm.default=n,Rm}var Im={},JA;function zq(){if(JA)return Im;JA=1,Object.defineProperty(Im,"__esModule",{value:!0});const t=Xa(),e=In(),n=Zn(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:a}})=>(0,e.str)`must have required property '${a}'`,params:({params:{missingProperty:a}})=>(0,e._)`{missingProperty: ${a}}`},code(a){const{gen:u,schema:p,schemaCode:g,data:y,$data:w,it:S}=a,{opts:_}=S;if(!w&&p.length===0)return;const C=p.length>=_.loopRequired;if(S.allErrors?N():R(),_.strictRequired){const k=a.parentSchema.properties,{definedProperties:j}=a.it;for(const $ of p)if(k?.[$]===void 0&&!j.has($)){const U=S.schemaEnv.baseId+S.errSchemaPath,F=`required property "${$}" is not defined at "${U}" (strictRequired)`;(0,n.checkStrictMode)(S,F,S.opts.strictRequired)}}function N(){if(C||w)a.block$data(e.nil,M);else for(const k of p)(0,t.checkReportMissingProp)(a,k)}function R(){const k=u.let("missing");if(C||w){const j=u.let("valid",!0);a.block$data(j,()=>L(k,j)),a.ok(j)}else u.if((0,t.checkMissingProp)(a,p,k)),(0,t.reportMissingProp)(a,k),u.else()}function M(){u.forOf("prop",g,k=>{a.setParams({missingProperty:k}),u.if((0,t.noPropertyInData)(u,y,k,_.ownProperties),()=>a.error())})}function L(k,j){a.setParams({missingProperty:k}),u.forOf(k,g,()=>{u.assign(j,(0,t.propertyInData)(u,y,k,_.ownProperties)),u.if((0,e.not)(j),()=>{a.error(),u.break()})},e.nil)}}};return Im.default=i,Im}var Mm={},eC;function Fq(){if(eC)return Mm;eC=1,Object.defineProperty(Mm,"__esModule",{value:!0});const t=In(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const a=r==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${a} than ${i} items`},params:({schemaCode:r})=>(0,t._)`{limit: ${r}}`},code(r){const{keyword:i,data:a,schemaCode:u}=r,p=i==="maxItems"?t.operators.GT:t.operators.LT;r.fail$data((0,t._)`${a}.length ${p} ${u}`)}};return Mm.default=n,Mm}var Dm={},Lm={},tC;function L2(){if(tC)return Lm;tC=1,Object.defineProperty(Lm,"__esModule",{value:!0});const t=Q8();return t.code='require("ajv/dist/runtime/equal").default',Lm.default=t,Lm}var nC;function qq(){if(nC)return Dm;nC=1,Object.defineProperty(Dm,"__esModule",{value:!0});const t=e1(),e=In(),n=Zn(),r=L2(),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:u,j:p}})=>(0,e.str)`must NOT have duplicate items (items ## ${p} and ${u} are identical)`,params:({params:{i:u,j:p}})=>(0,e._)`{i: ${u}, j: ${p}}`},code(u){const{gen:p,data:g,$data:y,schema:w,parentSchema:S,schemaCode:_,it:C}=u;if(!y&&!w)return;const N=p.let("valid"),R=S.items?(0,t.getSchemaTypes)(S.items):[];u.block$data(N,M,(0,e._)`${_} === false`),u.ok(N);function M(){const $=p.let("i",(0,e._)`${g}.length`),U=p.let("j");u.setParams({i:$,j:U}),p.assign(N,!0),p.if((0,e._)`${$} > 1`,()=>(L()?k:j)($,U))}function L(){return R.length>0&&!R.some($=>$==="object"||$==="array")}function k($,U){const F=p.name("item"),B=(0,t.checkDataTypes)(R,F,C.opts.strictNumbers,t.DataType.Wrong),Z=p.const("indices",(0,e._)`{}`);p.for((0,e._)`;${$}--;`,()=>{p.let(F,(0,e._)`${g}[${$}]`),p.if(B,(0,e._)`continue`),R.length>1&&p.if((0,e._)`typeof ${F} == "string"`,(0,e._)`${F} += "_"`),p.if((0,e._)`typeof ${Z}[${F}] == "number"`,()=>{p.assign(U,(0,e._)`${Z}[${F}]`),u.error(),p.assign(N,!1).break()}).code((0,e._)`${Z}[${F}] = ${$}`)})}function j($,U){const F=(0,n.useFunc)(p,r.default),B=p.name("outer");p.label(B).for((0,e._)`;${$}--;`,()=>p.for((0,e._)`${U} = ${$}; ${U}--;`,()=>p.if((0,e._)`${F}(${g}[${$}], ${g}[${U}])`,()=>{u.error(),p.assign(N,!1).break(B)})))}}};return Dm.default=a,Dm}var km={},rC;function $q(){if(rC)return km;rC=1,Object.defineProperty(km,"__esModule",{value:!0});const t=In(),e=Zn(),n=L2(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:a})=>(0,t._)`{allowedValue: ${a}}`},code(a){const{gen:u,data:p,$data:g,schemaCode:y,schema:w}=a;g||w&&typeof w=="object"?a.fail$data((0,t._)`!${(0,e.useFunc)(u,n.default)}(${p}, ${y})`):a.fail((0,t._)`${w} !== ${p}`)}};return km.default=i,km}var jm={},iC;function Vq(){if(iC)return jm;iC=1,Object.defineProperty(jm,"__esModule",{value:!0});const t=In(),e=Zn(),n=L2(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:a})=>(0,t._)`{allowedValues: ${a}}`},code(a){const{gen:u,data:p,$data:g,schema:y,schemaCode:w,it:S}=a;if(!g&&y.length===0)throw new Error("enum must have non-empty array");const _=y.length>=S.opts.loopEnum;let C;const N=()=>C??(C=(0,e.useFunc)(u,n.default));let R;if(_||g)R=u.let("valid"),a.block$data(R,M);else{if(!Array.isArray(y))throw new Error("ajv implementation error");const k=u.const("vSchema",w);R=(0,t.or)(...y.map((j,$)=>L(k,$)))}a.pass(R);function M(){u.assign(R,!1),u.forOf("v",w,k=>u.if((0,t._)`${N()}(${p}, ${k})`,()=>u.assign(R,!0).break()))}function L(k,j){const $=y[j];return typeof $=="object"&&$!==null?(0,t._)`${N()}(${p}, ${k}[${j}])`:(0,t._)`${p} === ${$}`}}};return jm.default=i,jm}var sC;function Hq(){if(sC)return _m;sC=1,Object.defineProperty(_m,"__esModule",{value:!0});const t=Lq(),e=kq(),n=Pq(),r=Bq(),i=Uq(),a=zq(),u=Fq(),p=qq(),g=$q(),y=Vq(),w=[t.default,e.default,n.default,r.default,i.default,a.default,u.default,p.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},g.default,y.default];return _m.default=w,_m}var Pm={},Hu={},aC;function J8(){if(aC)return Hu;aC=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.validateAdditionalItems=void 0;const t=In(),e=Zn(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,t.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,t._)`{limit: ${a}}`},code(a){const{parentSchema:u,it:p}=a,{items:g}=u;if(!Array.isArray(g)){(0,e.checkStrictMode)(p,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(a,g)}};function i(a,u){const{gen:p,schema:g,data:y,keyword:w,it:S}=a;S.items=!0;const _=p.const("len",(0,t._)`${y}.length`);if(g===!1)a.setParams({len:u.length}),a.pass((0,t._)`${_} <= ${u.length}`);else if(typeof g=="object"&&!(0,e.alwaysValidSchema)(S,g)){const N=p.var("valid",(0,t._)`${_} <= ${u.length}`);p.if((0,t.not)(N),()=>C(N)),a.ok(N)}function C(N){p.forRange("i",u.length,_,R=>{a.subschema({keyword:w,dataProp:R,dataPropType:e.Type.Num},N),S.allErrors||p.if((0,t.not)(N),()=>p.break())})}}return Hu.validateAdditionalItems=i,Hu.default=r,Hu}var Bm={},Ku={},oC;function eO(){if(oC)return Ku;oC=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.validateTuple=void 0;const t=In(),e=Zn(),n=Xa(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(a){const{schema:u,it:p}=a;if(Array.isArray(u))return i(a,"additionalItems",u);p.items=!0,!(0,e.alwaysValidSchema)(p,u)&&a.ok((0,n.validateArray)(a))}};function i(a,u,p=a.schema){const{gen:g,parentSchema:y,data:w,keyword:S,it:_}=a;R(y),_.opts.unevaluated&&p.length&&_.items!==!0&&(_.items=e.mergeEvaluated.items(g,p.length,_.items));const C=g.name("valid"),N=g.const("len",(0,t._)`${w}.length`);p.forEach((M,L)=>{(0,e.alwaysValidSchema)(_,M)||(g.if((0,t._)`${N} > ${L}`,()=>a.subschema({keyword:S,schemaProp:L,dataProp:L},C)),a.ok(C))});function R(M){const{opts:L,errSchemaPath:k}=_,j=p.length,$=j===M.minItems&&(j===M.maxItems||M[u]===!1);if(L.strictTuples&&!$){const U=`"${S}" is ${j}-tuple, but minItems or maxItems/${u} are not specified or different at path "${k}"`;(0,e.checkStrictMode)(_,U,L.strictTuples)}}}return Ku.validateTuple=i,Ku.default=r,Ku}var lC;function Kq(){if(lC)return Bm;lC=1,Object.defineProperty(Bm,"__esModule",{value:!0});const t=eO(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,t.validateTuple)(n,"items")};return Bm.default=e,Bm}var Um={},cC;function Gq(){if(cC)return Um;cC=1,Object.defineProperty(Um,"__esModule",{value:!0});const t=In(),e=Zn(),n=Xa(),r=J8(),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:u}})=>(0,t.str)`must NOT have more than ${u} items`,params:({params:{len:u}})=>(0,t._)`{limit: ${u}}`},code(u){const{schema:p,parentSchema:g,it:y}=u,{prefixItems:w}=g;y.items=!0,!(0,e.alwaysValidSchema)(y,p)&&(w?(0,r.validateAdditionalItems)(u,w):u.ok((0,n.validateArray)(u)))}};return Um.default=a,Um}var zm={},uC;function Yq(){if(uC)return zm;uC=1,Object.defineProperty(zm,"__esModule",{value:!0});const t=In(),e=Zn(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:a}})=>a===void 0?(0,t.str)`must contain at least ${i} valid item(s)`:(0,t.str)`must contain at least ${i} and no more than ${a} valid item(s)`,params:({params:{min:i,max:a}})=>a===void 0?(0,t._)`{minContains: ${i}}`:(0,t._)`{minContains: ${i}, maxContains: ${a}}`},code(i){const{gen:a,schema:u,parentSchema:p,data:g,it:y}=i;let w,S;const{minContains:_,maxContains:C}=p;y.opts.next?(w=_===void 0?1:_,S=C):w=1;const N=a.const("len",(0,t._)`${g}.length`);if(i.setParams({min:w,max:S}),S===void 0&&w===0){(0,e.checkStrictMode)(y,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(S!==void 0&&w>S){(0,e.checkStrictMode)(y,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,e.alwaysValidSchema)(y,u)){let j=(0,t._)`${N} >= ${w}`;S!==void 0&&(j=(0,t._)`${j} && ${N} <= ${S}`),i.pass(j);return}y.items=!0;const R=a.name("valid");S===void 0&&w===1?L(R,()=>a.if(R,()=>a.break())):w===0?(a.let(R,!0),S!==void 0&&a.if((0,t._)`${g}.length > 0`,M)):(a.let(R,!1),M()),i.result(R,()=>i.reset());function M(){const j=a.name("_valid"),$=a.let("count",0);L(j,()=>a.if(j,()=>k($)))}function L(j,$){a.forRange("i",0,N,U=>{i.subschema({keyword:"contains",dataProp:U,dataPropType:e.Type.Num,compositeRule:!0},j),$()})}function k(j){a.code((0,t._)`${j}++`),S===void 0?a.if((0,t._)`${j} >= ${w}`,()=>a.assign(R,!0).break()):(a.if((0,t._)`${j} > ${S}`,()=>a.assign(R,!1).break()),w===1?a.assign(R,!0):a.if((0,t._)`${j} >= ${w}`,()=>a.assign(R,!0)))}}};return zm.default=r,zm}var xv={},fC;function Wq(){return fC||(fC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=In(),n=Zn(),r=Xa();t.error={message:({params:{property:g,depsCount:y,deps:w}})=>{const S=y===1?"property":"properties";return(0,e.str)`must have ${S} ${w} when property ${g} is present`},params:({params:{property:g,depsCount:y,deps:w,missingProperty:S}})=>(0,e._)`{property: ${g},
    missingProperty: ${S},
    depsCount: ${y},
    deps: ${w}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(g){const[y,w]=a(g);u(g,y),p(g,w)}};function a({schema:g}){const y={},w={};for(const S in g){if(S==="__proto__")continue;const _=Array.isArray(g[S])?y:w;_[S]=g[S]}return[y,w]}function u(g,y=g.schema){const{gen:w,data:S,it:_}=g;if(Object.keys(y).length===0)return;const C=w.let("missing");for(const N in y){const R=y[N];if(R.length===0)continue;const M=(0,r.propertyInData)(w,S,N,_.opts.ownProperties);g.setParams({property:N,depsCount:R.length,deps:R.join(", ")}),_.allErrors?w.if(M,()=>{for(const L of R)(0,r.checkReportMissingProp)(g,L)}):(w.if((0,e._)`${M} && (${(0,r.checkMissingProp)(g,R,C)})`),(0,r.reportMissingProp)(g,C),w.else())}}t.validatePropertyDeps=u;function p(g,y=g.schema){const{gen:w,data:S,keyword:_,it:C}=g,N=w.name("valid");for(const R in y)(0,n.alwaysValidSchema)(C,y[R])||(w.if((0,r.propertyInData)(w,S,R,C.opts.ownProperties),()=>{const M=g.subschema({keyword:_,schemaProp:R},N);g.mergeValidEvaluated(M,N)},()=>w.var(N,!0)),g.ok(N))}t.validateSchemaDeps=p,t.default=i})(xv)),xv}var Fm={},hC;function Xq(){if(hC)return Fm;hC=1,Object.defineProperty(Fm,"__esModule",{value:!0});const t=In(),e=Zn(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,t._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:a,schema:u,data:p,it:g}=i;if((0,e.alwaysValidSchema)(g,u))return;const y=a.name("valid");a.forIn("key",p,w=>{i.setParams({propertyName:w}),i.subschema({keyword:"propertyNames",data:w,dataTypes:["string"],propertyName:w,compositeRule:!0},y),a.if((0,t.not)(y),()=>{i.error(!0),g.allErrors||a.break()})}),i.ok(y)}};return Fm.default=r,Fm}var qm={},dC;function tO(){if(dC)return qm;dC=1,Object.defineProperty(qm,"__esModule",{value:!0});const t=Xa(),e=In(),n=mc(),r=Zn(),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:u})=>(0,e._)`{additionalProperty: ${u.additionalProperty}}`},code(u){const{gen:p,schema:g,parentSchema:y,data:w,errsCount:S,it:_}=u;if(!S)throw new Error("ajv implementation error");const{allErrors:C,opts:N}=_;if(_.props=!0,N.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(_,g))return;const R=(0,t.allSchemaProperties)(y.properties),M=(0,t.allSchemaProperties)(y.patternProperties);L(),u.ok((0,e._)`${S} === ${n.default.errors}`);function L(){p.forIn("key",w,F=>{!R.length&&!M.length?$(F):p.if(k(F),()=>$(F))})}function k(F){let B;if(R.length>8){const Z=(0,r.schemaRefOrVal)(_,y.properties,"properties");B=(0,t.isOwnProperty)(p,Z,F)}else R.length?B=(0,e.or)(...R.map(Z=>(0,e._)`${F} === ${Z}`)):B=e.nil;return M.length&&(B=(0,e.or)(B,...M.map(Z=>(0,e._)`${(0,t.usePattern)(u,Z)}.test(${F})`))),(0,e.not)(B)}function j(F){p.code((0,e._)`delete ${w}[${F}]`)}function $(F){if(N.removeAdditional==="all"||N.removeAdditional&&g===!1){j(F);return}if(g===!1){u.setParams({additionalProperty:F}),u.error(),C||p.break();return}if(typeof g=="object"&&!(0,r.alwaysValidSchema)(_,g)){const B=p.name("valid");N.removeAdditional==="failing"?(U(F,B,!1),p.if((0,e.not)(B),()=>{u.reset(),j(F)})):(U(F,B),C||p.if((0,e.not)(B),()=>p.break()))}}function U(F,B,Z){const le={keyword:"additionalProperties",dataProp:F,dataPropType:r.Type.Str};Z===!1&&Object.assign(le,{compositeRule:!0,createErrors:!1,allErrors:!1}),u.subschema(le,B)}}};return qm.default=a,qm}var $m={},pC;function Qq(){if(pC)return $m;pC=1,Object.defineProperty($m,"__esModule",{value:!0});const t=U1(),e=Xa(),n=Zn(),r=tO(),i={keyword:"properties",type:"object",schemaType:"object",code(a){const{gen:u,schema:p,parentSchema:g,data:y,it:w}=a;w.opts.removeAdditional==="all"&&g.additionalProperties===void 0&&r.default.code(new t.KeywordCxt(w,r.default,"additionalProperties"));const S=(0,e.allSchemaProperties)(p);for(const M of S)w.definedProperties.add(M);w.opts.unevaluated&&S.length&&w.props!==!0&&(w.props=n.mergeEvaluated.props(u,(0,n.toHash)(S),w.props));const _=S.filter(M=>!(0,n.alwaysValidSchema)(w,p[M]));if(_.length===0)return;const C=u.name("valid");for(const M of _)N(M)?R(M):(u.if((0,e.propertyInData)(u,y,M,w.opts.ownProperties)),R(M),w.allErrors||u.else().var(C,!0),u.endIf()),a.it.definedProperties.add(M),a.ok(C);function N(M){return w.opts.useDefaults&&!w.compositeRule&&p[M].default!==void 0}function R(M){a.subschema({keyword:"properties",schemaProp:M,dataProp:M},C)}}};return $m.default=i,$m}var Vm={},mC;function Zq(){if(mC)return Vm;mC=1,Object.defineProperty(Vm,"__esModule",{value:!0});const t=Xa(),e=In(),n=Zn(),r=Zn(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(a){const{gen:u,schema:p,data:g,parentSchema:y,it:w}=a,{opts:S}=w,_=(0,t.allSchemaProperties)(p),C=_.filter($=>(0,n.alwaysValidSchema)(w,p[$]));if(_.length===0||C.length===_.length&&(!w.opts.unevaluated||w.props===!0))return;const N=S.strictSchema&&!S.allowMatchingProperties&&y.properties,R=u.name("valid");w.props!==!0&&!(w.props instanceof e.Name)&&(w.props=(0,r.evaluatedPropsToName)(u,w.props));const{props:M}=w;L();function L(){for(const $ of _)N&&k($),w.allErrors?j($):(u.var(R,!0),j($),u.if(R))}function k($){for(const U in N)new RegExp($).test(U)&&(0,n.checkStrictMode)(w,`property ${U} matches pattern ${$} (use allowMatchingProperties)`)}function j($){u.forIn("key",g,U=>{u.if((0,e._)`${(0,t.usePattern)(a,$)}.test(${U})`,()=>{const F=C.includes($);F||a.subschema({keyword:"patternProperties",schemaProp:$,dataProp:U,dataPropType:r.Type.Str},R),w.opts.unevaluated&&M!==!0?u.assign((0,e._)`${M}[${U}]`,!0):!F&&!w.allErrors&&u.if((0,e.not)(R),()=>u.break())})})}}};return Vm.default=i,Vm}var Hm={},gC;function Jq(){if(gC)return Hm;gC=1,Object.defineProperty(Hm,"__esModule",{value:!0});const t=Zn(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:a}=n;if((0,t.alwaysValidSchema)(a,i)){n.fail();return}const u=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},u),n.failResult(u,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return Hm.default=e,Hm}var Km={},yC;function e$(){if(yC)return Km;yC=1,Object.defineProperty(Km,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Xa().validateUnion,error:{message:"must match a schema in anyOf"}};return Km.default=e,Km}var Gm={},vC;function t$(){if(vC)return Gm;vC=1,Object.defineProperty(Gm,"__esModule",{value:!0});const t=In(),e=Zn(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,t._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:a,schema:u,parentSchema:p,it:g}=i;if(!Array.isArray(u))throw new Error("ajv implementation error");if(g.opts.discriminator&&p.discriminator)return;const y=u,w=a.let("valid",!1),S=a.let("passing",null),_=a.name("_valid");i.setParams({passing:S}),a.block(C),i.result(w,()=>i.reset(),()=>i.error(!0));function C(){y.forEach((N,R)=>{let M;(0,e.alwaysValidSchema)(g,N)?a.var(_,!0):M=i.subschema({keyword:"oneOf",schemaProp:R,compositeRule:!0},_),R>0&&a.if((0,t._)`${_} && ${w}`).assign(w,!1).assign(S,(0,t._)`[${S}, ${R}]`).else(),a.if(_,()=>{a.assign(w,!0),a.assign(S,R),M&&i.mergeEvaluated(M,t.Name)})})}}};return Gm.default=r,Gm}var Ym={},bC;function n$(){if(bC)return Ym;bC=1,Object.defineProperty(Ym,"__esModule",{value:!0});const t=Zn(),e={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:a}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const u=r.name("valid");i.forEach((p,g)=>{if((0,t.alwaysValidSchema)(a,p))return;const y=n.subschema({keyword:"allOf",schemaProp:g},u);n.ok(u),n.mergeEvaluated(y)})}};return Ym.default=e,Ym}var Wm={},wC;function r$(){if(wC)return Wm;wC=1,Object.defineProperty(Wm,"__esModule",{value:!0});const t=In(),e=Zn(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:a})=>(0,t.str)`must match "${a.ifClause}" schema`,params:({params:a})=>(0,t._)`{failingKeyword: ${a.ifClause}}`},code(a){const{gen:u,parentSchema:p,it:g}=a;p.then===void 0&&p.else===void 0&&(0,e.checkStrictMode)(g,'"if" without "then" and "else" is ignored');const y=i(g,"then"),w=i(g,"else");if(!y&&!w)return;const S=u.let("valid",!0),_=u.name("_valid");if(C(),a.reset(),y&&w){const R=u.let("ifClause");a.setParams({ifClause:R}),u.if(_,N("then",R),N("else",R))}else y?u.if(_,N("then")):u.if((0,t.not)(_),N("else"));a.pass(S,()=>a.error(!0));function C(){const R=a.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},_);a.mergeEvaluated(R)}function N(R,M){return()=>{const L=a.subschema({keyword:R},_);u.assign(S,_),a.mergeValidEvaluated(L,S),M?u.assign(M,(0,t._)`${R}`):a.setParams({ifClause:R})}}}};function i(a,u){const p=a.schema[u];return p!==void 0&&!(0,e.alwaysValidSchema)(a,p)}return Wm.default=r,Wm}var Xm={},EC;function i$(){if(EC)return Xm;EC=1,Object.defineProperty(Xm,"__esModule",{value:!0});const t=Zn(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,t.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return Xm.default=e,Xm}var SC;function s$(){if(SC)return Pm;SC=1,Object.defineProperty(Pm,"__esModule",{value:!0});const t=J8(),e=Kq(),n=eO(),r=Gq(),i=Yq(),a=Wq(),u=Xq(),p=tO(),g=Qq(),y=Zq(),w=Jq(),S=e$(),_=t$(),C=n$(),N=r$(),R=i$();function M(L=!1){const k=[w.default,S.default,_.default,C.default,N.default,R.default,u.default,p.default,a.default,g.default,y.default];return L?k.push(e.default,r.default):k.push(t.default,n.default),k.push(i.default),k}return Pm.default=M,Pm}var Qm={},Zm={},xC;function a$(){if(xC)return Zm;xC=1,Object.defineProperty(Zm,"__esModule",{value:!0});const t=In(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,t.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,t._)`{format: ${r}}`},code(r,i){const{gen:a,data:u,$data:p,schema:g,schemaCode:y,it:w}=r,{opts:S,errSchemaPath:_,schemaEnv:C,self:N}=w;if(!S.validateFormats)return;p?R():M();function R(){const L=a.scopeValue("formats",{ref:N.formats,code:S.code.formats}),k=a.const("fDef",(0,t._)`${L}[${y}]`),j=a.let("fType"),$=a.let("format");a.if((0,t._)`typeof ${k} == "object" && !(${k} instanceof RegExp)`,()=>a.assign(j,(0,t._)`${k}.type || "string"`).assign($,(0,t._)`${k}.validate`),()=>a.assign(j,(0,t._)`"string"`).assign($,k)),r.fail$data((0,t.or)(U(),F()));function U(){return S.strictSchema===!1?t.nil:(0,t._)`${y} && !${$}`}function F(){const B=C.$async?(0,t._)`(${k}.async ? await ${$}(${u}) : ${$}(${u}))`:(0,t._)`${$}(${u})`,Z=(0,t._)`(typeof ${$} == "function" ? ${B} : ${$}.test(${u}))`;return(0,t._)`${$} && ${$} !== true && ${j} === ${i} && !${Z}`}}function M(){const L=N.formats[g];if(!L){U();return}if(L===!0)return;const[k,j,$]=F(L);k===i&&r.pass(B());function U(){if(S.strictSchema===!1){N.logger.warn(Z());return}throw new Error(Z());function Z(){return`unknown format "${g}" ignored in schema at path "${_}"`}}function F(Z){const le=Z instanceof RegExp?(0,t.regexpCode)(Z):S.code.formats?(0,t._)`${S.code.formats}${(0,t.getProperty)(g)}`:void 0,Ne=a.scopeValue("formats",{key:g,ref:Z,code:le});return typeof Z=="object"&&!(Z instanceof RegExp)?[Z.type||"string",Z.validate,(0,t._)`${Ne}.validate`]:["string",Z,Ne]}function B(){if(typeof L=="object"&&!(L instanceof RegExp)&&L.async){if(!C.$async)throw new Error("async format in sync schema");return(0,t._)`await ${$}(${u})`}return typeof j=="function"?(0,t._)`${$}(${u})`:(0,t._)`${$}.test(${u})`}}}};return Zm.default=n,Zm}var _C;function o$(){if(_C)return Qm;_C=1,Object.defineProperty(Qm,"__esModule",{value:!0});const e=[a$().default];return Qm.default=e,Qm}var jc={},AC;function l$(){return AC||(AC=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.contentVocabulary=jc.metadataVocabulary=void 0,jc.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],jc.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),jc}var CC;function c$(){if(CC)return Em;CC=1,Object.defineProperty(Em,"__esModule",{value:!0});const t=Dq(),e=Hq(),n=s$(),r=o$(),i=l$(),a=[t.default,e.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return Em.default=a,Em}var Jm={},Dh={},NC;function u$(){if(NC)return Dh;NC=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.DiscrError=void 0;var t;return(function(e){e.Tag="tag",e.Mapping="mapping"})(t||(Dh.DiscrError=t={})),Dh}var TC;function f$(){if(TC)return Jm;TC=1,Object.defineProperty(Jm,"__esModule",{value:!0});const t=In(),e=u$(),n=D2(),r=z1(),i=Zn(),u={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:p,tagName:g}})=>p===e.DiscrError.Tag?`tag "${g}" must be string`:`value of tag "${g}" must be in oneOf`,params:({params:{discrError:p,tag:g,tagName:y}})=>(0,t._)`{error: ${p}, tag: ${y}, tagValue: ${g}}`},code(p){const{gen:g,data:y,schema:w,parentSchema:S,it:_}=p,{oneOf:C}=S;if(!_.opts.discriminator)throw new Error("discriminator: requires discriminator option");const N=w.propertyName;if(typeof N!="string")throw new Error("discriminator: requires propertyName");if(w.mapping)throw new Error("discriminator: mapping is not supported");if(!C)throw new Error("discriminator: requires oneOf keyword");const R=g.let("valid",!1),M=g.const("tag",(0,t._)`${y}${(0,t.getProperty)(N)}`);g.if((0,t._)`typeof ${M} == "string"`,()=>L(),()=>p.error(!1,{discrError:e.DiscrError.Tag,tag:M,tagName:N})),p.ok(R);function L(){const $=j();g.if(!1);for(const U in $)g.elseIf((0,t._)`${M} === ${U}`),g.assign(R,k($[U]));g.else(),p.error(!1,{discrError:e.DiscrError.Mapping,tag:M,tagName:N}),g.endIf()}function k($){const U=g.name("valid"),F=p.subschema({keyword:"oneOf",schemaProp:$},U);return p.mergeEvaluated(F,t.Name),U}function j(){var $;const U={},F=Z(S);let B=!0;for(let G=0;G<C.length;G++){let ce=C[G];if(ce?.$ref&&!(0,i.schemaHasRulesButRef)(ce,_.self.RULES)){const Ee=ce.$ref;if(ce=n.resolveRef.call(_.self,_.schemaEnv.root,_.baseId,Ee),ce instanceof n.SchemaEnv&&(ce=ce.schema),ce===void 0)throw new r.default(_.opts.uriResolver,_.baseId,Ee)}const se=($=ce?.properties)===null||$===void 0?void 0:$[N];if(typeof se!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${N}"`);B=B&&(F||Z(ce)),le(se,G)}if(!B)throw new Error(`discriminator: "${N}" must be required`);return U;function Z({required:G}){return Array.isArray(G)&&G.includes(N)}function le(G,ce){if(G.const)Ne(G.const,ce);else if(G.enum)for(const se of G.enum)Ne(se,ce);else throw new Error(`discriminator: "properties/${N}" must have "const" or "enum"`)}function Ne(G,ce){if(typeof G!="string"||G in U)throw new Error(`discriminator: "${N}" values must be unique strings`);U[G]=ce}}}};return Jm.default=u,Jm}const h$="http://json-schema.org/draft-07/schema#",d$="http://json-schema.org/draft-07/schema#",p$="Core schema meta-schema",m$={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},g$=["object","boolean"],y$={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},v$={$schema:h$,$id:d$,title:p$,definitions:m$,type:g$,properties:y$,default:!0};var OC;function nO(){return OC||(OC=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const n=Rq(),r=c$(),i=f$(),a=v$,u=["/properties"],p="http://json-schema.org/draft-07/schema";class g extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(N=>this.addVocabulary(N)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const N=this.opts.$data?this.$dataMetaSchema(a,u):a;this.addMetaSchema(N,p,!1),this.refs["http://json-schema.org/schema"]=p}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(p)?p:void 0)}}e.Ajv=g,t.exports=e=g,t.exports.Ajv=g,Object.defineProperty(e,"__esModule",{value:!0}),e.default=g;var y=U1();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return y.KeywordCxt}});var w=In();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return w._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return w.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return w.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return w.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return w.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return w.CodeGen}});var S=M2();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return S.default}});var _=z1();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return _.default}})})(gm,gm.exports)),gm.exports}var b$=nO();const w$=So(b$);var e0={exports:{}},_v={},RC;function E$(){return RC||(RC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(G,ce){return{validate:G,compare:ce}}t.fullFormats={date:e(a,u),time:e(g(!0),y),"date-time":e(_(!0),C),"iso-time":e(g(),w),"iso-date-time":e(_(),N),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:L,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Ne,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:j,int32:{type:"number",validate:F},int64:{type:"number",validate:B},float:{type:"number",validate:Z},double:{type:"number",validate:Z},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,u),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,y),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,C),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,w),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,N),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function n(G){return G%4===0&&(G%100!==0||G%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function a(G){const ce=r.exec(G);if(!ce)return!1;const se=+ce[1],Ee=+ce[2],ue=+ce[3];return Ee>=1&&Ee<=12&&ue>=1&&ue<=(Ee===2&&n(se)?29:i[Ee])}function u(G,ce){if(G&&ce)return G>ce?1:G<ce?-1:0}const p=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function g(G){return function(se){const Ee=p.exec(se);if(!Ee)return!1;const ue=+Ee[1],ee=+Ee[2],de=+Ee[3],we=Ee[4],Oe=Ee[5]==="-"?-1:1,pe=+(Ee[6]||0),K=+(Ee[7]||0);if(pe>23||K>59||G&&!we)return!1;if(ue<=23&&ee<=59&&de<60)return!0;const oe=ee-K*Oe,ae=ue-pe*Oe-(oe<0?1:0);return(ae===23||ae===-1)&&(oe===59||oe===-1)&&de<61}}function y(G,ce){if(!(G&&ce))return;const se=new Date("2020-01-01T"+G).valueOf(),Ee=new Date("2020-01-01T"+ce).valueOf();if(se&&Ee)return se-Ee}function w(G,ce){if(!(G&&ce))return;const se=p.exec(G),Ee=p.exec(ce);if(se&&Ee)return G=se[1]+se[2]+se[3],ce=Ee[1]+Ee[2]+Ee[3],G>ce?1:G<ce?-1:0}const S=/t|\s/i;function _(G){const ce=g(G);return function(Ee){const ue=Ee.split(S);return ue.length===2&&a(ue[0])&&ce(ue[1])}}function C(G,ce){if(!(G&&ce))return;const se=new Date(G).valueOf(),Ee=new Date(ce).valueOf();if(se&&Ee)return se-Ee}function N(G,ce){if(!(G&&ce))return;const[se,Ee]=G.split(S),[ue,ee]=ce.split(S),de=u(se,ue);if(de!==void 0)return de||y(Ee,ee)}const R=/\/|:/,M=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function L(G){return R.test(G)&&M.test(G)}const k=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function j(G){return k.lastIndex=0,k.test(G)}const $=-2147483648,U=2**31-1;function F(G){return Number.isInteger(G)&&G<=U&&G>=$}function B(G){return Number.isInteger(G)}function Z(){return!0}const le=/[^\\]\\Z/;function Ne(G){if(le.test(G))return!1;try{return new RegExp(G),!0}catch{return!1}}})(_v)),_v}var Av={},IC;function S$(){return IC||(IC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=nO(),n=In(),r=n.operators,i={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},a={message:({keyword:p,schemaCode:g})=>(0,n.str)`should be ${i[p].okStr} ${g}`,params:({keyword:p,schemaCode:g})=>(0,n._)`{comparison: ${i[p].okStr}, limit: ${g}}`};t.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:a,code(p){const{gen:g,data:y,schemaCode:w,keyword:S,it:_}=p,{opts:C,self:N}=_;if(!C.validateFormats)return;const R=new e.KeywordCxt(_,N.RULES.all.format.definition,"format");R.$data?M():L();function M(){const j=g.scopeValue("formats",{ref:N.formats,code:C.code.formats}),$=g.const("fmt",(0,n._)`${j}[${R.schemaCode}]`);p.fail$data((0,n.or)((0,n._)`typeof ${$} != "object"`,(0,n._)`${$} instanceof RegExp`,(0,n._)`typeof ${$}.compare != "function"`,k($)))}function L(){const j=R.schema,$=N.formats[j];if(!$||$===!0)return;if(typeof $!="object"||$ instanceof RegExp||typeof $.compare!="function")throw new Error(`"${S}": format "${j}" does not define "compare" function`);const U=g.scopeValue("formats",{key:j,ref:$,code:C.code.formats?(0,n._)`${C.code.formats}${(0,n.getProperty)(j)}`:void 0});p.fail$data(k(U))}function k(j){return(0,n._)`${j}.compare(${y}, ${w}) ${i[S].fail} 0`}},dependencies:["format"]};const u=p=>(p.addKeyword(t.formatLimitDefinition),p);t.default=u})(Av)),Av}var MC;function x$(){return MC||(MC=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=E$(),r=S$(),i=In(),a=new i.Name("fullFormats"),u=new i.Name("fastFormats"),p=(y,w={keywords:!0})=>{if(Array.isArray(w))return g(y,w,n.fullFormats,a),y;const[S,_]=w.mode==="fast"?[n.fastFormats,u]:[n.fullFormats,a],C=w.formats||n.formatNames;return g(y,C,S,_),w.keywords&&(0,r.default)(y),y};p.get=(y,w="full")=>{const _=(w==="fast"?n.fastFormats:n.fullFormats)[y];if(!_)throw new Error(`Unknown format "${y}"`);return _};function g(y,w,S,_){var C,N;(C=(N=y.opts.code).formats)!==null&&C!==void 0||(N.formats=(0,i._)`require("ajv-formats/dist/formats").${_}`);for(const R of w)y.addFormat(R,S[R])}t.exports=e=p,Object.defineProperty(e,"__esModule",{value:!0}),e.default=p})(e0,e0.exports)),e0.exports}var _$=x$();const A$=So(_$);var hs;function C$(){return hs||(hs=new w$({strict:!0}),hs.addKeyword("version"),hs.addKeyword("keyCompression"),hs.addKeyword("primaryKey"),hs.addKeyword("indexes"),hs.addKeyword("encrypted"),hs.addKeyword("final"),hs.addKeyword("sharding"),hs.addKeyword("internalIndexes"),hs.addKeyword("attachments"),hs.addKeyword("ref"),hs.addKeyword("crdt"),A$(hs)),hs}function N$(t){var e=C$().compile(t);return n=>{var r=e(n);return r?[]:e.errors}}var T$=JF(N$,"ajv"),O$=["__proto__","constructor","prototype"];function Fh(t,e){Object.keys(e).forEach(n=>{O$.includes(n)||(typeof t[n]>"u"?t[n]=e[n]:Qh(e[n])?Fh(t[n],e[n]):t[n]=e[n])})}function Qh(t){return t.toString()==="[object Object]"}var F1=(function(){function t(n,r){if(this.options={},this._conditions={},this._fields={},this._path=r,n){var i=this;n.selector&&i.find(n.selector),n.limit&&i.limit(n.limit),n.skip&&i.skip(n.skip),n.sort&&n.sort.forEach(a=>i.sort(a))}}var e=t.prototype;return e.where=function(r,i){if(!arguments.length)return this;var a=typeof arguments[0];if(a==="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(a==="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw Ea("MQ1",{path:arguments[0]})},e.equals=function(r){this._ensurePath("equals");var i=this._path;return this._conditions[i]=r,this},e.eq=function(r){this._ensurePath("eq");var i=this._path;return this._conditions[i]=r,this},e.or=function(r){var i=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},e.nor=function(r){var i=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},e.and=function(r){var i=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},e.mod=function(r,i){var a,u;arguments.length===1?(this._ensurePath("mod"),a=arguments[0],u=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),a=arguments.slice(),u=this._path):arguments.length===3?(a=arguments.slice(1),u=arguments[0]):(a=arguments[1],u=arguments[0]);var p=this._conditions[u]||(this._conditions[u]={});return p.$mod=a,this},e.exists=function(r,i){var a,u;arguments.length===0?(this._ensurePath("exists"),a=this._path,u=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),a=this._path,u=arguments[0]):(a=arguments[0],u=!0):arguments.length===2&&(a=arguments[0],u=arguments[1]);var p=this._conditions[a]||(this._conditions[a]={});return p.$exists=u,this},e.elemMatch=function(r,i){if(arguments[0]===null)throw Ea("MQ2");var a,u,p;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),u=this._path,a=arguments[0];else if(Qh(arguments[0]))this._ensurePath("elemMatch"),u=this._path,p=arguments[0];else if(typeof arguments[1]=="function")u=arguments[0],a=arguments[1];else if(arguments[1]&&Qh(arguments[1]))u=arguments[0],p=arguments[1];else throw Ea("MQ2");a&&(p=new t,a(p),p=p._conditions);var g=this._conditions[u]||(this._conditions[u]={});return g.$elemMatch=p,this},e.sort=function(r){if(!r)return this;var i,a=typeof r;if(Array.isArray(r)){i=r.length;for(var u=0;u<r.length;++u)I$(this.options,r[u][0],r[u][1]);return this}if(arguments.length===1&&a==="string"){r=r.split(/\s+/),i=r.length;for(var p=0;p<i;++p){var g=r[p];if(g){var y=g[0]==="-"?-1:1;y===-1&&(g=g.substring(1)),DC(this.options,g,y)}}return this}if(Qh(r)){var w=Object.keys(r);return w.forEach(S=>DC(this.options,S,r[S])),this}throw Ea("MQ3",{args:arguments})},e.merge=function(r){if(!r)return this;if(!LC(r))throw Ea("MQ4",{source:r});return r instanceof t?(r._conditions&&Fh(this._conditions,r._conditions),r._fields&&(this._fields||(this._fields={}),Fh(this._fields,r._fields)),r.options&&(this.options||(this.options={}),Fh(this.options,r.options)),r._distinct&&(this._distinct=r._distinct),this):(Fh(this._conditions,r),this)},e.find=function(r){return LC(r)&&this.merge(r),this},e._ensurePath=function(r){if(!this._path)throw Tt("MQ5",{method:r})},e.toJSON=function(){var r={selector:this._conditions};return this.options.skip&&(r.skip=this.options.skip),this.options.limit&&(r.limit=this.options.limit),this.options.sort&&(r.sort=R$(this.options.sort)),{query:r,path:this._path}},t})();function R$(t){return Object.entries(t).map(([e,n])=>{var r=n===1?"asc":"desc",i={[e]:r};return i})}var rO=["limit","skip","maxScan","batchSize","comment"];rO.forEach(function(t){F1.prototype[t]=function(e){return this.options[t]=e,this}});var iO=["gt","gte","lt","lte","ne","in","nin","all","regex","size"];iO.forEach(function(t){F1.prototype[t]=function(){var e,n;arguments.length===1?(this._ensurePath(t),n=arguments[0],e=this._path):(n=arguments[1],e=arguments[0]);var r=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};if(t==="regex"){if(n instanceof RegExp)throw Tt("QU16",{field:e,query:this._conditions});typeof n=="string"?r["$"+t]=n:(r["$"+t]=n.$regex,n.$options&&(r.$options=n.$options))}else r["$"+t]=n;return this}});function DC(t,e,n){if(Array.isArray(t.sort))throw Ea("MQ6",{opts:t,field:e,value:n});if(n&&n.$meta){var r=t.sort||(t.sort={});r[e]={$meta:n.$meta};return}var i=String(n||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(i))throw Array.isArray(n)&&(n="["+n+"]"),Ea("MQ7",{field:e,value:n});var a=t.sort||(t.sort={}),u=n.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");a[e]=parseInt(u,10)}function I$(t,e,n){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw Ea("MQ8",{opts:t,field:e,value:n});t.sort.push([e,n])}function LC(t){return t instanceof F1||Qh(t)}function M$(t,e){return new F1(t,e)}var kC="queryBuilderPath";function D$(t,e,n){var r=M$(ys(t.mangoQuery),t.other[kC]);r[e](n);var i=r.toJSON();return Qu(t.op,i.query,t.collection,{...t.other,[kC]:i.path})}function Cv(t,e){t[e]=function(n){if(pr.isDevMode()&&this.op==="findByIds")throw Tt("QU17",{collection:this.collection.name,query:this.mangoQuery});return D$(this,e,n)}}var L$={name:"query-builder",rxdb:!0,prototypes:{RxQuery(t){["where","equals","eq","or","nor","and","mod","exists","elemMatch","sort"].forEach(e=>{Cv(t,e)}),rO.forEach(e=>{Cv(t,e)}),iO.forEach(e=>{Cv(t,e)})}}};async function sO(t){var e=Ij(t.collection.schema.jsonSchema).map(a=>t.collection.name+"-"+a),n=await t.database.internalStore.findDocumentsById(e.map(a=>ru(a,rc)),!1),r={};n.forEach(a=>r[a.key]=a);var i=e.find(a=>r[a]);return i?r[i]:void 0}function k$(t,e,n){var r=Tr(n._attachments),i=ys(n),a=i._meta;delete i._meta,i._attachments=r;for(var u=e+1,p=Promise.resolve(i),g=function(){var y=u;p=p.then(w=>j$(t,y,w)),u++};u<=t.schema.version;)g();return p.then(y=>y===null?u2:(a&&(y._meta=a),y))}function j$(t,e,n){if(n===null)return u2;var r=t.migrationStrategies[e](n,t),i=c5(r);return i}async function aO(t){if(t.collection.schema.version===0)return vo;var e=await sO(t);return!!e}var P$=200,oO=new WeakMap;function B$(t){var e=lO(t.database),n=e.getValue().slice(0);n.push(t),e.next(n)}function lO(t){return vs(oO,t,()=>new co([]))}function U$(t){var e=oO.get(t);e&&e.complete()}var z$=(function(){function t(n,r,i=[n.name,"v",n.schema.version].join("-")){this.started=!1,this.canceled=!1,this.updateStatusHandlers=[],this.updateStatusQueue=c2,this.collection=n,this.migrationStrategies=r,this.statusDocKey=i,this.database=n.database,this.oldCollectionMeta=sO(this),this.mustMigrate=aO(this),this.statusDocId=ru(this.statusDocKey,A0),B$(this),this.$=VB(this.database.internalStore,this.statusDocId).pipe(Nr(a=>!!a),bi(a=>Ht(a).data),Wd(Hd))}var e=t.prototype;return e.getStatus=function(){return Hc(this.$)},e.startMigration=async function(r=P$){var i=await this.mustMigrate;if(i){if(this.started)throw Tt("DM1");if(this.started=!0,this.database.multiInstance){this.broadcastChannel=new j1(["rx-migration-state",this.database.name,this.collection.name,this.collection.schema.version].join("|"));var a=$8(this.broadcastChannel);await a.awaitLeadership()}var u=await this.oldCollectionMeta,p=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:this.collection.name,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Ht(u).data.schema,password:this.database.password,devMode:pr.isDevMode()}),g=await this.getConnectedStorageInstances(),y=await this.countAllDocuments([p].concat(g.map(S=>S.oldStorage)));await this.updateStatus(S=>(S.count.total=y,S));try{await Promise.all(g.map(async S=>{await g8(this.collection,S.newStorage.collectionName,S.newStorage.schema),await this.migrateStorage(S.oldStorage,S.newStorage,r),await S.newStorage.close()})),await this.migrateStorage(p,this.collection.storageInstance.originalStorageInstance,r)}catch(S){await p.close(),await this.updateStatus(_=>(_.status="ERROR",_.error=Pb(S),_));return}try{await If(this.database.internalStore,{previous:u,document:Object.assign({},u,{_deleted:!0})},"rx-migration-remove-collection-meta")}catch(S){var w=Af(S);if(!(w&&w.documentInDb._deleted))throw S}await this.updateStatus(S=>(S.status="DONE",S)),this.broadcastChannel&&await this.broadcastChannel.close()}},e.updateStatus=function(r){return this.updateStatusHandlers.push(r),this.updateStatusQueue=this.updateStatusQueue.then(async()=>{if(this.updateStatusHandlers.length!==0){var i=this.updateStatusHandlers;for(this.updateStatusHandlers=[];;){var a=await Uf(this.database.internalStore,this.statusDocId),u=ys(a);a||(u={id:this.statusDocId,key:this.statusDocKey,context:A0,data:{collectionName:this.collection.name,status:"RUNNING",count:{total:0,handled:0,percent:0}},_deleted:!1,_meta:Bf(),_rev:Ga(),_attachments:{}});var p=Ht(u).data;for(var g of i)p=g(p);if(p.count.percent=Math.round(p.count.handled/p.count.total*100),u&&a&&pd(u.data,a.data))break;try{await If(this.database.internalStore,{previous:a,document:Ht(u)},A0);break}catch(y){if(!Af(y))throw y}}}}),this.updateStatusQueue},e.migrateStorage=async function(r,i,a){this.collection.onClose.push(()=>this.cancel()),this.database.onClose.push(()=>this.cancel());var u=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:"rx-migration-state-meta-"+r.collectionName+"-"+r.schema.version,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Xb(r.schema,V0(r.schema)),password:this.database.password,devMode:pr.isDevMode()}),p=zz(i,K0,this.database.token,!0),g=N8({keepMeta:!0,identifier:["rx-migration-state",r.collectionName,r.schema.version,this.collection.schema.version].join("-"),replicationHandler:{masterChangesSince(){return Promise.resolve({checkpoint:null,documents:[]})},masterWrite:async w=>{var S=await Promise.all(w.map(async C=>{var N=C.newDocumentState;if(i.schema.title===C0&&(N=C.newDocumentState.docData,C.newDocumentState.isCheckpoint==="1"))return{assumedMasterState:void 0,newDocumentState:C.newDocumentState};var R=await k$(this.collection,r.schema.version,N);if(R===null)return null;var M={assumedMasterState:void 0,newDocumentState:i.schema.title===C0?Object.assign({},C.newDocumentState,{docData:R}):R};return M}));S=S.filter(C=>!!C&&!!C.newDocumentState);var _=await p.masterWrite(S);return _},masterChangeStream$:new is().asObservable()},forkInstance:r,metaInstance:u,pushBatchSize:a,pullBatchSize:0,conflictHandler:K0,hashFunction:this.database.hashFunction}),y=!1;if(g.events.error.subscribe(w=>y=w),g.events.processed.up.subscribe(()=>{this.updateStatus(w=>(w.count.handled=w.count.handled+1,w))}),await N0(g),await Zb(g),await this.updateStatusQueue,y)throw await u.close(),y;await Promise.all([r.remove(),u.remove()]),await this.cancel()},e.cancel=async function(){this.canceled=!0,this.replicationState&&await T8(this.replicationState),this.broadcastChannel&&await this.broadcastChannel.close()},e.countAllDocuments=async function(r){var i=0;return await Promise.all(r.map(async a=>{var u=M1(a.schema,yf(a.schema,{selector:{}})),p=await a.count(u);i+=p.count})),i},e.getConnectedStorageInstances=async function(){var r=Ht(await this.oldCollectionMeta),i=[];return await Promise.all(await Promise.all(r.data.connectedStorages.map(async a=>{if(a.schema.title!==C0)throw new Error("unknown migration handling for schema");var u=Xb(ys(this.collection.schema.jsonSchema),V0(a.schema));u.version=this.collection.schema.version;var[p,g]=await Promise.all([this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:pr.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:a.schema,password:this.database.password,collectionName:a.collectionName}),this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:pr.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:u,password:this.database.password,collectionName:a.collectionName})]);i.push({oldStorage:p,newStorage:g})}))),i},e.migratePromise=async function(r){this.startMigration(r);var i=await this.mustMigrate;if(!i)return{status:"DONE",collectionName:this.collection.name,count:{handled:0,percent:0,total:0}};var a=await Promise.race([Hc(this.$.pipe(Nr(u=>u.status==="DONE"))),Hc(this.$.pipe(Nr(u=>u.status==="ERROR")))]);if(a.status==="ERROR")throw Tt("DM4",{collection:this.collection.name,error:a.error});return a},t})(),t1=new WeakMap,sw=new WeakMap;function Zh(t){var e=t1.get(t);if(!e){var n=t.database?t.database:t,r=t.database?t.name:"";throw Tt("LD8",{database:n.name,collection:r})}return e}function cO(t,e,n,r,i,a){return e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:F$(r),schema:uO,options:i,multiInstance:a,devMode:pr.isDevMode()})}function jC(t){var e=t1.get(t);if(e)return t1.delete(t),e.then(n=>n.storageInstance.close())}async function PC(t,e,n){var r=Vd(10),i=await cO(r,t,e,n,{},!1);await i.remove()}function F$(t){return"plugin-local-documents-"+t}var uO=N1({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function BC(t,e){var n=await Zh(this),r={id:t,data:e,_deleted:!1,_meta:Bf(),_rev:Ga(),_attachments:{}};return If(n.storageInstance,{document:r},"local-document-insert").then(i=>n.docCache.getCachedRxDocument(i))}function UC(t,e){return this.getLocal(t).then(n=>{if(n)return n.incrementalModify(()=>e);var r=this.insertLocal(t,e);return r})}async function zC(t){var e=await Zh(this),n=e.docCache,r=n.getLatestDocumentDataIfExists(t);return r?Promise.resolve(n.getCachedRxDocument(r)):Uf(e.storageInstance,t).then(i=>i?e.docCache.getCachedRxDocument(i):null)}function FC(t){return this.$.pipe(Xd(null),bo(async e=>{if(e)return{changeEvent:e};var n=await this.getLocal(t);return{doc:n}}),bo(async e=>{if(e.changeEvent){var n=e.changeEvent;if(!n.isLocal||n.documentId!==t)return{use:!1};var r=await this.getLocal(t);return{use:!0,doc:r}}else return{use:!0,doc:e.doc}}),Nr(e=>e.use),bi(e=>e.doc))}var q$=s8(),$$=(function(t){function e(n,r,i){var a;return a=t.call(this,null,r)||this,a.id=n,a.parent=i,a}return o2(e,t),e})(q$),Jh={get isLocal(){return!0},get allAttachments$(){throw Tt("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var t=this,e=Cf(sw,this.parent),n=this.primary;return t.parent.eventBulks$.pipe(Nr(r=>!!r.isLocal),bi(r=>r.events.find(i=>i.documentId===n)),Nr(r=>!!r),bi(r=>B5(Ht(r))),Xd(e.docCache.getLatestDocumentData(this.primary)),gd((r,i)=>r._rev===i._rev),bi(r=>e.docCache.getCachedRxDocument(r)),Wd(Hd))},get $$(){var t=this,e=Nv(t),n=e.getReactivityFactory();return n.fromObservable(t.$,t.getLatest()._data,e)},get deleted$$(){var t=this,e=Nv(t),n=e.getReactivityFactory();return n.fromObservable(t.deleted$,t.getLatest().deleted,e)},getLatest(){var t=Cf(sw,this.parent),e=t.docCache.getLatestDocumentData(this.primary);return t.docCache.getCachedRxDocument(e)},get(t){if(t="data."+t,!!this._data){if(typeof t!="string")throw Ea("LD2",{objPath:t});var e=oc(this._data,t);return e=pr.deepFreezeWhenDevMode(e),e}},get$(t){if(t="data."+t,pr.isDevMode()){if(t.includes(".item."))throw Tt("LD3",{objPath:t});if(t===this.primaryPath)throw Tt("LD4")}return this.$.pipe(bi(e=>e._data),bi(e=>oc(e,t)),gd())},get$$(t){var e=Nv(this),n=e.getReactivityFactory();return n.fromObservable(this.get$(t),this.getLatest().get(t),e)},async incrementalModify(t){var e=await Zh(this.parent);return e.incrementalWriteQueue.addWrite(this._data,async n=>(n.data=await t(n.data,this),n)).then(n=>e.docCache.getCachedRxDocument(n))},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([n,r])=>{e[n]=r}),e))},async _saveData(t){var e=await Zh(this.parent),n=this._data;t.id=this.id;var r=[{previous:n,document:t}];return e.storageInstance.bulkWrite(r,"local-document-save-data").then(i=>{if(i.error[0])throw i.error[0];var a=Oa(this.collection.schema.primaryPath,r,i)[0];t=Tr(t),t._rev=a._rev})},async remove(){var t=await Zh(this.parent),e=Tr(this._data);return e._deleted=!0,If(t.storageInstance,{previous:this._data,document:e},"local-document-remove").then(n=>t.docCache.getCachedRxDocument(n))}},qC=!1,V$=()=>{if(!qC){qC=!0;var t=D1,e=Object.getOwnPropertyNames(t);e.forEach(r=>{var i=Object.getOwnPropertyDescriptor(Jh,r);if(!i){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(Jh,r,a)}});var n=r=>()=>{throw Tt("LD6",{functionName:r})};["populate","update","putAttachment","putAttachmentBase64","getAttachment","allAttachments"].forEach(r=>Jh[r]=n(r))}};function H$(t,e){V$();var n=new $$(t.id,t,e);return Object.setPrototypeOf(n,Jh),n.prototype=Jh,n}function Nv(t){var e=t.parent;return Dz(e)?e:e.database}function $C(t){var e=t.database?t.database:t,n=t.database?t.name:"",r=(async()=>{var i=await cO(e.token,e.storage,e.name,n,e.instanceCreationOptions,e.multiInstance);i=w2(e,i,uO);var a=new h8("id",e.eventBulks$.pipe(Nr(w=>{var S=!1;return(n===""&&!w.collectionName||n!==""&&w.collectionName===n)&&(S=!0),S&&w.isLocal}),bi(w=>w.events)),w=>H$(w,t)),u=new i8(i,"id",()=>{},()=>{}),p=await e.storageToken,g=i.changeStream().subscribe(w=>{for(var S=new Array(w.events.length),_=w.events,C=t.database?t.name:void 0,N=0;N<_.length;N++){var R=_[N];S[N]={documentId:R.documentId,collectionName:C,isLocal:!0,operation:R.operation,documentData:pr.deepFreezeWhenDevMode(R.documentData),previousDocumentData:pr.deepFreezeWhenDevMode(R.previousDocumentData)}}var M={id:w.id,isLocal:!0,internal:!1,collectionName:t.database?t.name:void 0,storageToken:p,events:S,databaseToken:e.token,checkpoint:w.checkpoint,context:w.context};e.$emit(M)});t._subs.push(g);var y={database:e,parent:t,storageInstance:i,docCache:a,incrementalWriteQueue:u};return sw.set(t,y),y})();t1.set(t,r)}var K$={name:"local-documents",rxdb:!0,prototypes:{RxCollection:t=>{t.insertLocal=BC,t.upsertLocal=UC,t.getLocal=zC,t.getLocal$=FC},RxDatabase:t=>{t.insertLocal=BC,t.upsertLocal=UC,t.getLocal=zC,t.getLocal$=FC}},hooks:{createRxDatabase:{before:t=>{t.creator.localDocuments&&$C(t.database)}},createRxCollection:{before:t=>{t.creator.localDocuments&&$C(t.collection)}},preCloseRxDatabase:{after:t=>jC(t)},postCloseRxCollection:{after:t=>jC(t)},postRemoveRxDatabase:{after:t=>PC(t.storage,t.databaseName,"")},postRemoveRxCollection:{after:t=>PC(t.storage,t.databaseName,t.collectionName)}},overwritable:{}},G$=new WeakMap,Y$={name:"migration-schema",rxdb:!0,init(){L1(K$)},hooks:{preCloseRxDatabase:{after:U$}},prototypes:{RxDatabase:t=>{t.migrationStates=function(){return lO(this).pipe(Wd(Hd))}},RxCollection:t=>{t.getMigrationState=function(){return vs(G$,this,()=>new z$(this.asRxCollection,this.migrationStrategies))},t.migrationNeeded=function(){return this.schema.version===0?vo:aO(this.getMigrationState())}}}},W$=Y$;const X$={version:7,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},avatarId:{type:"string"},pinHash:{type:"string"},role:{type:"string",enum:["student","teacher"],default:"student"},classId:{type:"string"},birthdate:{type:"string"},rollNo:{type:"string"},schoolName:{type:"string"},villageName:{type:"string"},state:{type:"string"},country:{type:"string"},ipAddress:{type:"string"},password:{type:"string"},medium:{type:"string",enum:["english","marathi"]},phone:{type:"string"},teacherClassId:{type:"string"},createdAt:{type:"number"}},required:["id","name","avatarId","pinHash","createdAt","role"]},Q$={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},userId:{type:"string",maxLength:100},levelId:{type:"string"},score:{type:"number"},stars:{type:"number",minimum:0,maximum:3},timestamp:{type:"number"}},required:["id","userId","levelId","score","stars","timestamp"],indexes:["userId"]},Z$={version:6,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},type:{type:"string",enum:["subject","module","text","quiz","lesson"]},title:{type:"string"},thumbnail:{type:"string"},description:{type:"string"},classId:{type:"string"},subjectId:{type:"string"},moduleId:{type:"string"},isHomework:{type:"boolean"},data:{type:"object",properties:{content:{type:"string"},questions:{type:"array",items:{type:"object",properties:{id:{type:"string"},text:{type:"string"},options:{type:"array",items:{type:"string"}},correctAnswer:{type:"number"}}}},translations:{type:"object"},attachments:{type:"array",items:{type:"object",properties:{id:{type:"string"},name:{type:"string"},type:{type:"string"},data:{type:"string"}}}}}},teacherId:{type:"string"},createdAt:{type:"number"},updatedAt:{type:"number"},medium:{type:"string",enum:["english","marathi"]}},required:["id","type","title","createdAt"]},J$={version:3,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},standard:{type:"string"},medium:{type:"string",enum:["english","marathi"]},teacherId:{type:"string"},code:{type:"string",maxLength:6},createdAt:{type:"number"}},required:["id","name","teacherId","createdAt"]},Xi=[];for(let t=0;t<256;++t)Xi.push((t+256).toString(16).slice(1));function eV(t,e=0){return(Xi[t[e+0]]+Xi[t[e+1]]+Xi[t[e+2]]+Xi[t[e+3]]+"-"+Xi[t[e+4]]+Xi[t[e+5]]+"-"+Xi[t[e+6]]+Xi[t[e+7]]+"-"+Xi[t[e+8]]+Xi[t[e+9]]+"-"+Xi[t[e+10]]+Xi[t[e+11]]+Xi[t[e+12]]+Xi[t[e+13]]+Xi[t[e+14]]+Xi[t[e+15]]).toLowerCase()}let Tv;const tV=new Uint8Array(16);function nV(){if(!Tv){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Tv=crypto.getRandomValues.bind(crypto)}return Tv(tV)}const rV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),VC={randomUUID:rV};function iV(t,e,n){t=t||{};const r=t.random??t.rng?.()??nV();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,eV(r)}function Ca(t,e,n){return VC.randomUUID&&!t?VC.randomUUID():iV(t)}const Ov={english:{en:"English",mr:""},marathi:{en:"Marathi",mr:""},hindi:{en:"Hindi",mr:""},math:{en:"Mathematics",mr:""},evs:{en:"Environmental Studies",mr:" "},science:{en:"General Science",mr:" "},history_civics:{en:"History & Civics",mr:"  "},geography:{en:"Geography",mr:""},math_1:{en:"Mathematics Part-I (Algebra)",mr:" - ()"},math_2:{en:"Mathematics Part-II (Geometry)",mr:" - ()"},science_1:{en:"Science & Technology Part-I",mr:"   -"},science_2:{en:"Science & Technology Part-II",mr:"   -"},history_poly:{en:"History & Political Science",mr:"  "},defense:{en:"Defense Studies",mr:" "}},HC={math:{en:["Number Systems","Addition","Subtraction","Multiplication","Shapes"],mr:[" ","","","",""]},math_1:{en:["Linear Equations","Quadratic Equations","Arithmetic Progression","Financial Planning","Probability","Statistics"],mr:["   ",""," ","","",""]},math_2:{en:["Similarity","Pythagoras Theorem","Circle","Geometric Constructions","Coordinate Geometry","Trigonometry","Mensuration"],mr:[""," ",""," "," ","",""]},science:{en:["Living World","Force and Motion","Current Electricity","Measurement of Matter","Acids, Bases and Salts","Sound","Light"],mr:[" ","  "," "," ",",   ","",""]},science_1:{en:["Gravitation","Periodic Classification of Elements","Chemical Reactions","Effects of Electric Current","Heat","Refraction of Light"],mr:["","  "," ","  ",""," "]},science_2:{en:["Heredity and Evolution","Life Processes","Environmental Management","Animal Classification","Introduction to Microbiology","Cell Biology"],mr:["  "," "," "," "," ",""]},history_civics:{en:["Sources of History","India before 1947","The Constitution","Local Government","Fundamental Rights"],mr:[" ","  ","","  "," "]},history_poly:{en:["Historiography","Applied History","Mass Media and History","Working of the Constitution","Electoral Process","Political Parties"],mr:[""," ","  "," "," "," "]},geography:{en:["The Earth","Interior of Earth","Climate","Natural Vegetation","Water Resources","Agriculture","Human Geography"],mr:[""," ",""," ","","","  "]},english:{en:["The Fun They Had","Sound of Music","Little Girl","Snake and Mirror","My Childhood","Packing"],mr:["   ","  "," ","  "," ",""]},marathi:{en:["Santvani","Beta Me Aikato Ahe","G.P.","Vayam Motham Khotam","Maza Abhyas","Aaji Kuthe?"],mr:["","   ","... ","  "," "," ?"]},hindi:{en:["Dukh Ka Adhikar","Everest: Meri Shikhar Yatra","Tum Kab Jaoge Atithi","Vaigyanik Chetana","Kichad Ka Kavya"],mr:["  ",":   ","   "," ","  "]},evs:{en:["Our Surroundings","Water for All","Food for Health","Shelter","Clothes We Wear"],mr:[" "," ","  ",""," "]},defense:{en:["National Security","Internal Security","Disaster Management","Armed Forces"],mr:[" "," "," "," "]}},sV=()=>{const t=[],e=["1","2","3","4","5","6","7","8","9","10"],n=["english","marathi"];return e.forEach(r=>{n.forEach(i=>{const a=parseInt(r);let u=[];a>=1&&a<=4?u=["english","marathi","math","evs"]:a>=5&&a<=8?u=["english","hindi","marathi","math","science","history_civics","geography"]:a>=9&&(u=["english","hindi","marathi","math_1","math_2","science_1","science_2","history_poly","geography"],a===10&&u.push("defense")),u.forEach(p=>{const g=Ca(),y=i==="marathi"?Ov[p].mr:Ov[p].en,w=Ov[p].en;t.push({id:g,type:"subject",title:y,description:`${w} for Class ${r} (${i==="english"?"English":"Marathi"} Medium)`,classId:r,medium:i,createdAt:Date.now()});const S=HC[p]||HC.math;S&&(i==="marathi"?S.mr:S.en).forEach((C,N)=>{const R=Ca();t.push({id:R,type:"lesson",title:C,description:`Chapter ${N+1} of ${y}`,classId:r,subjectId:g,medium:i,createdAt:Date.now()+N,thumbnail:`https://source.unsplash.com/random/800x600?${p.split("_")[0]},education,${N}`,data:{attachments:[{id:Ca(),name:"TextBook.pdf",type:"application/pdf",data:"data:application/pdf;base64,JVBERi0xLjAKMSAwIG9iajw8L1BhZ2VzIDIgMCBSPj5lbmRvYmogMiAwIG9iajw8L0tpZHNbMyAwIFJdL0NvdW50IDE+PmVuZG9iaWogMyAwIG9iajw8L01lZGlhQm94WzAgMCAzIDNdPj5lbmRvYmoKdHJhaWxlcjw8L1Jvb3QgMSAwIFI+Pgo="}]}})})})})}),t};async function fO(t){const e=await t.count().exec();if(e>100){console.log("Database likely already seeded with full curriculum. Skipping. (Count:",e,")");return}console.log("Seeding comprehensive curriculum (Classes 1-10, English & Marathi)...");try{const n=sV(),r=100;for(let i=0;i<n.length;i+=r){const a=n.slice(i,i+r);await t.bulkUpsert(a),console.log(`Seeded chunk ${i} to ${i+a.length}`)}console.log("Seeding complete!  Total items:",n.length)}catch(n){console.error("Seeding failed:",n)}}const aV=Object.freeze(Object.defineProperty({__proto__:null,seedContent:fO},Symbol.toStringTag,{value:"Module"}));var hO=new WeakMap,oV=new WeakMap;function KC(t){return vs(oV,t,()=>$8(t))}function lV(){var t=V8(this.storage.name,this.token,this.name,this),e=this.close.bind(this);this.close=function(){return ew(this.token,this),e()};var n=KC(t);return n||(n=KC(t),hO.set(this,n)),this.leaderElector=()=>n,n}function cV(){return this.multiInstance?this.leaderElector().isLeader:!0}function uV(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):c2}function fV(t){var e=hO.get(t);e&&e.die()}var hV=!0,dV={RxDatabase:t=>{t.leaderElector=lV,t.isLeader=cV,t.waitForLeadership=uV}},pV={name:"leader-election",rxdb:hV,prototypes:dV,hooks:{preCloseRxDatabase:{after:fV}}},GC=t=>Promise.resolve(t);function YC(t,e){if(t==="_deleted")return e;e=Tr(e);var n=!!e._deleted;return e[t]=n,delete e._deleted,e}function Rv(t,e,n){return n.map(r=>{var i=Tr(r);if(e!=="_deleted"){var a=!!i[e];i._deleted=a,delete i[e]}else i._deleted=!!i._deleted;var u=t.schema.primaryPath;return i[u]=pc(t.schema.jsonSchema,i),i})}function WC(t,e){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return t.promiseWait(e);var n,r=new Promise(i=>{n=()=>{window.removeEventListener("online",n),i()},window.addEventListener("online",n)});return Promise.race([r,t.promiseWait(e)]).then(()=>{window.removeEventListener("online",n)})}function mV(t){function e(){if(!(typeof document>"u"||typeof document.dispatchEvent!="function")){var r=new Event("mousemove");document.dispatchEvent(r)}}var n=setInterval(e,20*1e3);t.onCancel.push(()=>clearInterval(n))}var gV=new WeakMap,yV=(function(){function t(n,r,i,a,u,p,g,y,w){this.subs=[],this.subjects={received:new is,sent:new is,error:new is,canceled:new co(!1),active:new co(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.wasStarted=!1,this.startQueue=xa,this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new is,this.replicationIdentifier=n,this.collection=r,this.deletedField=i,this.pull=a,this.push=u,this.live=p,this.retryTime=g,this.autoStart=y,this.toggleOnDocumentVisible=w,this.metaInfoPromise=(async()=>{var C="rx-replication-meta-"+await r.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-")),N=Xb(this.collection.schema.jsonSchema,V0(this.collection.schema.jsonSchema));return{collectionName:C,schema:N}})();var S=vs(gV,r,()=>[]);S.push(this),this.collection.onClose.push(()=>this.cancel()),Object.keys(this.subjects).forEach(C=>{Object.defineProperty(this,C+"$",{get:function(){return this.subjects[C].asObservable()}})});var _=new Promise(C=>{this.callOnStart=C});this.startPromise=_}var e=t.prototype;return e.start=function(){return this.startQueue=this.startQueue.then(()=>this._start()),this.startQueue},e._start=async function(){if(!this.isStopped()){if(this.internalReplicationState&&this.internalReplicationState.events.paused.next(!1),this.wasStarted){this.reSync();return}this.wasStarted=!0,this.toggleOnDocumentVisible||mV(this);var r=this.pull&&this.pull.modifier?this.pull.modifier:GC,i=this.push&&this.push.modifier?this.push.modifier:GC,a=this.collection.database,u=await this.metaInfoPromise,[p]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:a.name,collectionName:u.collectionName,databaseInstanceToken:a.token,multiInstance:a.multiInstance,options:{},schema:u.schema,password:a.password,devMode:pr.isDevMode()}),g8(this.collection,u.collectionName,u.schema)]);this.metaInstance=p,this.internalReplicationState=N8({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:a.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(Nr(g=>!!this.pull),bo(async g=>{if(g==="RESYNC")return g;var y=Tr(g);return y.documents=Rv(this.collection,this.deletedField,y.documents),y.documents=await Promise.all(y.documents.map(w=>r(w))),y})),masterChangesSince:async(g,y)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var w=!1,S={};!w&&!this.isStoppedOrPaused();)try{S=await this.pull.handler(g,y),w=!0}catch(N){var _=Tt("RC_PULL",{checkpoint:g,errors:hd(N).map(R=>Pb(R)),direction:"pull"});this.subjects.error.next(_),await WC(this.collection,Ht(this.retryTime))}if(this.isStoppedOrPaused())return{checkpoint:null,documents:[]};var C=Tr(S);return C.documents=Rv(this.collection,this.deletedField,C.documents),C.documents=await Promise.all(C.documents.map(N=>r(N))),C},masterWrite:async g=>{if(!this.push)return[];var y=!1;await Zc("preReplicationMasterWrite",{rows:g,collection:this.collection});var w=await Promise.all(g.map(async R=>(R.newDocumentState=await i(R.newDocumentState),R.newDocumentState===null?null:(R.assumedMasterState&&(R.assumedMasterState=await i(R.assumedMasterState)),this.deletedField!=="_deleted"&&(R.newDocumentState=YC(this.deletedField,R.newDocumentState),R.assumedMasterState&&(R.assumedMasterState=YC(this.deletedField,R.assumedMasterState))),R)))),S=w.filter(ej),_=null;for(S.length===0&&(y=!0,_=[]);!y&&!this.isStoppedOrPaused();)try{if(_=await this.push.handler(S),!Array.isArray(_))throw Tt("RC_PUSH_NO_AR",{pushRows:g,direction:"push",args:{result:_}});y=!0}catch(R){var C=R.rxdb?R:Tt("RC_PUSH",{pushRows:g,errors:hd(R).map(M=>Pb(M)),direction:"push"});this.subjects.error.next(C),await WC(this.collection,Ht(this.retryTime))}if(this.isStoppedOrPaused())return[];await Zc("preReplicationMasterWriteDocumentsHandle",{result:_,collection:this.collection});var N=Rv(this.collection,this.deletedField,Ht(_));return N}}}),this.subs.push(this.internalReplicationState.events.error.subscribe(g=>{this.subjects.error.next(g)}),this.internalReplicationState.events.processed.down.subscribe(g=>this.subjects.received.next(g.document)),this.internalReplicationState.events.processed.up.subscribe(g=>{this.subjects.sent.next(g.newDocumentState)}),P5([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([g,y])=>{var w=g||y;this.subjects.active.next(w)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:g=>{this.isStoppedOrPaused()||this.remoteEvents$.next(g)},error:g=>{this.subjects.error.next(g)}})),this.live||(await N0(this.internalReplicationState),await Zb(this.internalReplicationState),await this._cancel()),this.callOnStart()}},e.pause=function(){return this.startQueue=this.startQueue.then(()=>{this.internalReplicationState&&this.internalReplicationState.events.paused.next(!0)}),this.startQueue},e.isPaused=function(){return!!(this.internalReplicationState&&this.internalReplicationState.events.paused.getValue())},e.isStopped=function(){return!!this.subjects.canceled.getValue()},e.isStoppedOrPaused=function(){return this.isPaused()||this.isStopped()},e.awaitInitialReplication=async function(){return await this.startPromise,N0(Ht(this.internalReplicationState))},e.awaitInSync=async function(){await this.startPromise,await N0(Ht(this.internalReplicationState));for(var r=2;r>0;)r--,await this.collection.database.requestIdlePromise(),await Zb(Ht(this.internalReplicationState));return!0},e.reSync=function(){this.remoteEvents$.next("RESYNC")},e.emitEvent=function(r){this.remoteEvents$.next(r)},e.cancel=async function(){this.startQueue=this.startQueue.catch(()=>{}).then(async()=>{await this._cancel()}),await this.startQueue},e._cancel=async function(r=!1){if(this.isStopped())return vo;var i=this.onCancel.map(a=>c5(a()));return this.internalReplicationState&&await T8(this.internalReplicationState),this.metaInstance&&!r&&i.push(Ht(this.internalReplicationState).checkpointQueue.then(()=>Ht(this.metaInstance).close())),this.subs.forEach(a=>a.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(i)},e.remove=async function(){return this.startQueue=this.startQueue.then(async()=>{var r=await this.metaInfoPromise;await this._cancel(!0),await Ht(this.internalReplicationState).checkpointQueue.then(()=>Ht(this.metaInstance).remove()),await pz(this.collection,r.collectionName,r.schema)}),this.startQueue},t})();function Iv({replicationIdentifier:t,collection:e,deletedField:n="_deleted",pull:r,push:i,live:a=!0,retryTime:u=1e3*5,waitForLeadership:p=!0,autoStart:g=!0,toggleOnDocumentVisible:y=!1}){if(L1(pV),!r&&!i)throw Tt("UT3",{collection:e.name,args:{replicationIdentifier:t}});var w=new yV(t,e,n,r,i,a,u,g,y);if(y&&typeof document<"u"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"){var S=()=>{if(!w.isStopped()){var _=document.visibilityState==="visible";_?w.start():e.database.isLeader()||w.pause()}};document.addEventListener("visibilitychange",S),w.onCancel.push(()=>document.removeEventListener("visibilitychange",S))}return vV(p,w),w}function vV(t,e){var n=t&&e.collection.database.multiInstance,r=n?e.collection.database.waitForLeadership():c2;return r.then(()=>{e.isStopped()||e.autoStart&&e.start()})}L1(L$);L1(W$);const bV=T$({storage:pq()});let t0=null;const dO=async()=>t0||(t0=(async()=>{console.log("Initializing Database...");const t=await Iz({name:"edudb_v6",storage:bV,ignoreDuplicate:!0});return console.log("Adding Collections..."),await t.addCollections({users:{schema:X$,migrationStrategies:{1:function(e){return e.role="student",e},2:function(e){return e.classId=null,e},3:function(e){return e},4:function(e){return e.medium="english",e},5:function(e){return e.phone="",e},6:function(e){return e.classId&&(e.classId=e.classId.replace(/\D/g,"")),e},7:function(e){return e}}},progress:{schema:Q$},content:{schema:Z$,migrationStrategies:{1:function(e){return e},2:function(e){return e.classId=null,e},3:function(e){return e},4:function(e){return e.translations={},e.attachments=[],e},5:function(e){return e.data&&e.data.questions&&e.data.questions.forEach(n=>{n.correctAnswer=Number(n.correctAnswer)||0}),e},6:function(e){return e.medium="english",e}}},classes:{schema:J$,migrationStrategies:{1:function(e){return e},2:function(e){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let r="";for(let i=0;i<6;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return e.code=r,e},3:function(e){if(!e.code){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let r="";for(let i=0;i<6;i++)r+=n.charAt(Math.floor(Math.random()*n.length));e.code=r}return e}}}}),await fO(t.content),console.log("Database Ready!"),t})(),t0),wV=async(t,e,n)=>{console.log("Starting Sync with",e);const r=e.replace(/\/$/,"");try{await Iv({collection:t.users,replicationIdentifier:"users-sync",pull:{handler:async i=>{try{return{documents:(await(await fetch(`${r}/users/_all_docs?include_docs=true`)).json()).rows.map(g=>g.doc),checkpoint:{id:"last"}}}catch(a){return console.warn("Sync Pull Failed (Offline?)",a),{documents:[],checkpoint:i}}}},push:{handler:async i=>{try{return await fetch(`${r}/users/_bulk_docs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:i.map(a=>a.newDocumentState)})}),[]}catch(a){return console.warn("Sync Push Failed",a),[]}}}}),await Iv({collection:t.progress,replicationIdentifier:"progress-sync",pull:{handler:async i=>{try{return{documents:(await(await fetch(`${r}/progress/_all_docs?include_docs=true`)).json()).rows.map(g=>g.doc),checkpoint:{id:"last"}}}catch{return{documents:[],checkpoint:i}}}},push:{handler:async i=>{try{return await fetch(`${r}/progress/_bulk_docs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:i.map(a=>a.newDocumentState)})}),[]}catch{return[]}}}}),await Iv({collection:t.content,replicationIdentifier:"content-sync",pull:{handler:async i=>{try{let p=(await(await fetch(`${r}/content/_all_docs?include_docs=true`)).json()).rows.map(g=>g.doc);return n&&(p=p.filter(g=>g.classId===n)),{documents:p,checkpoint:{id:"last"}}}catch{return{documents:[],checkpoint:i}}}}}),console.log("Sync Initiated")}catch(i){console.error("Sync Setup Error",i)}},EV=Object.freeze(Object.defineProperty({__proto__:null,createDB:dO,syncDatabase:wV},Symbol.toStringTag,{value:"Module"})),pO=re.createContext({db:null,isReady:!1}),SV=({children:t})=>{const[e,n]=re.useState(null),[r,i]=re.useState(null);if(re.useEffect(()=>{(async()=>{try{const u=await dO();n(u)}catch(u){console.error("Failed to initialize database:",u),i(u.message||"Unknown Database Error")}})()},[]),r){const a=async()=>{confirm("This will Delete ALL Data and Reset the App. Continue?")&&((await window.indexedDB.databases()).forEach(p=>window.indexedDB.deleteDatabase(p.name)),window.location.reload())};return O.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-950 text-white p-6 text-center",children:O.jsxs("div",{className:"space-y-4 max-w-md bg-black/40 p-8 rounded-xl border border-red-500/30",children:[O.jsx("h2",{className:"text-xl font-bold text-red-400",children:"Database Error (Migration)"}),O.jsx("p",{className:"text-red-200 text-sm",children:r}),O.jsxs("div",{className:"flex gap-4 justify-center",children:[O.jsx("button",{onClick:()=>window.location.reload(),className:"bg-white/10 hover:bg-white/20 px-4 py-2 rounded text-sm",children:"Try Reload"}),O.jsx("button",{onClick:a,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded font-bold text-sm shadow-lg shadow-red-900/50",children:"Reset Data (Fix)"})]})]})})}return e?O.jsx(pO.Provider,{value:{db:e,isReady:!0},children:t}):O.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white",children:O.jsxs("div",{className:"flex flex-col items-center gap-4",children:[O.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-primary-500 border-t-transparent animate-spin"}),O.jsx("span",{className:"text-sm text-slate-400",children:"Loading Offline Database..."})]})})},Ui=()=>re.useContext(pO),mO=re.createContext(null);async function XC(t){const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}const xV=({children:t})=>{const{db:e}=Ui(),[n,r]=re.useState(null);re.useEffect(()=>{const g=localStorage.getItem("activeUserId");g&&e&&e.users.findOne(g).exec().then(y=>{y&&r(y.toJSON())})},[e]);const i=async(g,y)=>{if(!e)return!1;const w=await e.users.findOne(g).exec();if(!w)return!1;const S=await XC(y);return w.get("pinHash")===S?(r(w.toJSON()),localStorage.setItem("activeUserId",g),!0):!1},a=async g=>{if(!e)return;const y=Ca(),{pin:w,...S}=g,_=await XC(w);try{if(await e.users.insert({id:y,name:g.name||"Anonymous",role:g.role||"student",avatarId:g.avatarId||"",pinHash:_,createdAt:Date.now(),...S}),g.role==="student"&&g.classId&&g.medium){console.log("Seeding subjects for student...");try{const{getSubjects:C}=await A1(async()=>{const{getSubjects:L}=await import("./syllabus-DL4VRE7A.js");return{getSubjects:L}},[]),N=C(g.classId,g.medium),R=Date.now(),M=N.map(L=>({id:Ca(),type:"subject",title:L,classId:g.classId,createdAt:R,updatedAt:R,thumbnail:"",description:`Standard ${g.classId} Subject`}));await e.content.bulkInsert(M),console.log(`Seeded ${N.length} subjects for Class ${g.classId}`)}catch(C){console.error("Failed to seed subjects:",C)}}}catch(C){console.error("User Insert Failed:",C),alert("Failed to create profile: "+C.message);return}await i(y,g.pin)},u=()=>{r(null),localStorage.removeItem("activeUserId")},p=async()=>e?(await e.users.find().sort({createdAt:"desc"}).exec()).map(y=>y.toJSON()):[];return O.jsx(mO.Provider,{value:{currentUser:n,login:i,signup:a,logout:u,getAllUsers:p},children:t})},ws=()=>{const t=re.useContext(mO);if(!t)throw new Error("useAuth must be used within AuthProvider");return t};function _V(){const[t,e]=re.useState(navigator.onLine),[n,r]=re.useState("idle"),{db:i}=Ui(),{currentUser:a}=ws();re.useEffect(()=>{const p=()=>e(!0),g=()=>e(!1);return window.addEventListener("online",p),window.addEventListener("offline",g),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",g)}},[]);const u=async()=>{if(!(!t||!i)){r("syncing");try{const p=localStorage.getItem("teacherIP")||"http://localhost:5984/db",{syncDatabase:g}=await A1(async()=>{const{syncDatabase:y}=await Promise.resolve().then(()=>EV);return{syncDatabase:y}},void 0);await g(i,p,a?.classId),r("idle")}catch(p){console.error("Sync Failed",p),r("error"),setTimeout(()=>r("idle"),3e3)}}};return t?O.jsx("button",{onClick:u,className:`fixed bottom-4 right-4 border p-3 rounded-full flex items-center justify-center shadow-lg transition-all ${n==="syncing"?"bg-blue-900/50 border-blue-500/50 text-blue-200":"bg-slate-800 border-green-900/50 text-green-400 hover:bg-slate-700"}`,title:n==="syncing"?"Syncing...":"Online",children:n==="syncing"?O.jsx(_1,{className:"w-4 h-4 animate-spin"}):O.jsx(Vk,{className:"w-4 h-4"})}):O.jsx("div",{className:"fixed bottom-4 right-4 bg-slate-800 border border-slate-700 text-slate-400 p-3 rounded-full flex items-center justify-center shadow-lg",title:"Offline",children:O.jsx(qk,{className:"w-4 h-4"})})}const fn=t=>typeof t=="string",Lh=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},QC=t=>t==null?"":""+t,AV=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},CV=/###/g,ZC=t=>t&&t.indexOf("###")>-1?t.replace(CV,"."):t,JC=t=>!t||fn(t),ed=(t,e,n)=>{const r=fn(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(JC(t))return{};const a=ZC(r[i]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return JC(t)?{}:{obj:t,k:ZC(r[i])}},e3=(t,e,n)=>{const{obj:r,k:i}=ed(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let a=e[e.length-1],u=e.slice(0,e.length-1),p=ed(t,u,Object);for(;p.obj===void 0&&u.length;)a=`${u[u.length-1]}.${a}`,u=u.slice(0,u.length-1),p=ed(t,u,Object),p?.obj&&typeof p.obj[`${p.k}.${a}`]<"u"&&(p.obj=void 0);p.obj[`${p.k}.${a}`]=n},NV=(t,e,n,r)=>{const{obj:i,k:a}=ed(t,e,Object);i[a]=i[a]||[],i[a].push(n)},n1=(t,e)=>{const{obj:n,k:r}=ed(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},TV=(t,e,n)=>{const r=n1(t,n);return r!==void 0?r:n1(e,n)},gO=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?fn(t[r])||t[r]instanceof String||fn(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):gO(t[r],e[r],n):t[r]=e[r]);return t},Gu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var OV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const RV=t=>fn(t)?t.replace(/[&<>"'\/]/g,e=>OV[e]):t;class IV{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const MV=[" ",",","?","!",";"],DV=new IV(20),LV=(t,e,n)=>{e=e||"",n=n||"";const r=MV.filter(u=>e.indexOf(u)<0&&n.indexOf(u)<0);if(r.length===0)return!0;const i=DV.getRegExp(`(${r.map(u=>u==="?"?"\\?":u).join("|")})`);let a=!i.test(t);if(!a){const u=t.indexOf(n);u>0&&!i.test(t.substring(0,u))&&(a=!0)}return a},aw=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let u,p="";for(let g=a;g<r.length;++g)if(g!==a&&(p+=n),p+=r[g],u=i[p],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&g<r.length-1)continue;a+=g-a+1;break}i=u}return i},_d=t=>t?.replace("_","-"),kV={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class r1{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||kV,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(fn(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new r1(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new r1(this.logger,e)}}var fo=new r1;let q1=class{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let u=0;u<a;u++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let u=0;u<a;u++)i.apply(i,[e,...n])})}};class t3 extends q1{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,u=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let p;e.indexOf(".")>-1?p=e.split("."):(p=[e,n],r&&(Array.isArray(r)?p.push(...r):fn(r)&&a?p.push(...r.split(a)):p.push(r)));const g=n1(this.data,p);return!g&&!n&&!r&&e.indexOf(".")>-1&&(e=p[0],n=p[1],r=p.slice(2).join(".")),g||!u||!fn(r)?g:aw(this.data?.[e]?.[n],r,a)}addResource(e,n,r,i,a={silent:!1}){const u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let p=[e,n];r&&(p=p.concat(u?r.split(u):r)),e.indexOf(".")>-1&&(p=e.split("."),i=n,n=p[1]),this.addNamespaces(n),e3(this.data,p,i),a.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const a in r)(fn(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,a,u={silent:!1,skipCopy:!1}){let p=[e,n];e.indexOf(".")>-1&&(p=e.split("."),i=r,r=n,n=p[1]),this.addNamespaces(n);let g=n1(this.data,p)||{};u.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?gO(g,r,a):g={...g,...r},e3(this.data,p,g),u.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var yO={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(a=>{e=this.processors[a]?.process(e,n,r,i)??e}),e}};const vO=Symbol("i18next/PATH_KEY");function jV(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>(n?.revoke?.(),i===vO?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function ow(t,e){const{[vO]:n}=t(jV());return n.join(e?.keySeparator??".")}const n3={},Mv=t=>!fn(t)&&typeof t!="boolean"&&typeof t!="number";class i1 extends q1{constructor(e,n={}){super(),AV(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=fo.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);if(i?.res===void 0)return!1;const a=Mv(i.res);return!(r.returnObjects===!1&&a)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const u=r&&e.indexOf(r)>-1,p=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!LV(e,r,i);if(u&&!p){const g=e.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:e,namespaces:fn(a)?[a]:a};const y=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(y[0])>-1)&&(a=y.shift()),e=y.join(i)}return{key:e,namespaces:fn(a)?[a]:a}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=ow(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,u=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:p,namespaces:g}=this.extractFromKey(e[e.length-1],i),y=g[g.length-1];let w=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;w===void 0&&(w=":");const S=i.lng||this.language,_=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(S?.toLowerCase()==="cimode")return _?a?{res:`${y}${w}${p}`,usedKey:p,exactUsedKey:p,usedLng:S,usedNS:y,usedParams:this.getUsedParamsDetails(i)}:`${y}${w}${p}`:a?{res:p,usedKey:p,exactUsedKey:p,usedLng:S,usedNS:y,usedParams:this.getUsedParamsDetails(i)}:p;const C=this.resolve(e,i);let N=C?.res;const R=C?.usedKey||p,M=C?.exactUsedKey||p,L=["[object Number]","[object Function]","[object RegExp]"],k=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject,$=i.count!==void 0&&!fn(i.count),U=i1.hasDefaultValue(i),F=$?this.pluralResolver.getSuffix(S,i.count,i):"",B=i.ordinal&&$?this.pluralResolver.getSuffix(S,i.count,{ordinal:!1}):"",Z=$&&!i.ordinal&&i.count===0,le=Z&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${F}`]||i[`defaultValue${B}`]||i.defaultValue;let Ne=N;j&&!N&&U&&(Ne=le);const G=Mv(Ne),ce=Object.prototype.toString.apply(Ne);if(j&&Ne&&G&&L.indexOf(ce)<0&&!(fn(k)&&Array.isArray(Ne))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const se=this.options.returnedObjectHandler?this.options.returnedObjectHandler(R,Ne,{...i,ns:g}):`key '${p} (${this.language})' returned an object instead of string.`;return a?(C.res=se,C.usedParams=this.getUsedParamsDetails(i),C):se}if(u){const se=Array.isArray(Ne),Ee=se?[]:{},ue=se?M:R;for(const ee in Ne)if(Object.prototype.hasOwnProperty.call(Ne,ee)){const de=`${ue}${u}${ee}`;U&&!N?Ee[ee]=this.translate(de,{...i,defaultValue:Mv(le)?le[ee]:void 0,joinArrays:!1,ns:g}):Ee[ee]=this.translate(de,{...i,joinArrays:!1,ns:g}),Ee[ee]===de&&(Ee[ee]=Ne[ee])}N=Ee}}else if(j&&fn(k)&&Array.isArray(N))N=N.join(k),N&&(N=this.extendTranslation(N,e,i,r));else{let se=!1,Ee=!1;!this.isValidLookup(N)&&U&&(se=!0,N=le),this.isValidLookup(N)||(Ee=!0,N=p);const ee=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ee?void 0:N,de=U&&le!==N&&this.options.updateMissing;if(Ee||se||de){if(this.logger.log(de?"updateKey":"missingKey",S,y,p,de?le:N),u){const K=this.resolve(p,{...i,keySeparator:!1});K&&K.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let we=[];const Oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Oe&&Oe[0])for(let K=0;K<Oe.length;K++)we.push(Oe[K]);else this.options.saveMissingTo==="all"?we=this.languageUtils.toResolveHierarchy(i.lng||this.language):we.push(i.lng||this.language);const pe=(K,oe,ae)=>{const Y=U&&ae!==N?ae:ee;this.options.missingKeyHandler?this.options.missingKeyHandler(K,y,oe,Y,de,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(K,y,oe,Y,de,i),this.emit("missingKey",K,y,oe,N)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?we.forEach(K=>{const oe=this.pluralResolver.getSuffixes(K,i);Z&&i[`defaultValue${this.options.pluralSeparator}zero`]&&oe.indexOf(`${this.options.pluralSeparator}zero`)<0&&oe.push(`${this.options.pluralSeparator}zero`),oe.forEach(ae=>{pe([K],p+ae,i[`defaultValue${ae}`]||le)})}):pe(we,p,le))}N=this.extendTranslation(N,e,i,C,r),Ee&&N===p&&this.options.appendNamespaceToMissingKey&&(N=`${y}${w}${p}`),(Ee||se)&&this.options.parseMissingKeyHandler&&(N=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${y}${w}${p}`:p,se?N:void 0,i))}return a?(C.res=N,C.usedParams=this.getUsedParamsDetails(i),C):N}extendTranslation(e,n,r,i,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const g=fn(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let y;if(g){const S=e.match(this.interpolator.nestingRegexp);y=S&&S.length}let w=r.replace&&!fn(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),e=this.interpolator.interpolate(e,w,r.lng||this.language||i.usedLng,r),g){const S=e.match(this.interpolator.nestingRegexp),_=S&&S.length;y<_&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...S)=>a?.[0]===S[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${S[0]} in key: ${n[0]}`),null):this.translate(...S,n),r)),r.interpolation&&this.interpolator.reset()}const u=r.postProcess||this.options.postProcess,p=fn(u)?[u]:u;return e!=null&&p?.length&&r.applyPostProcessor!==!1&&(e=yO.handle(p,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,a,u,p;return fn(e)&&(e=[e]),e.forEach(g=>{if(this.isValidLookup(r))return;const y=this.extractFromKey(g,n),w=y.key;i=w;let S=y.namespaces;this.options.fallbackNS&&(S=S.concat(this.options.fallbackNS));const _=n.count!==void 0&&!fn(n.count),C=_&&!n.ordinal&&n.count===0,N=n.context!==void 0&&(fn(n.context)||typeof n.context=="number")&&n.context!=="",R=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);S.forEach(M=>{this.isValidLookup(r)||(p=M,!n3[`${R[0]}-${M}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(p)&&(n3[`${R[0]}-${M}`]=!0,this.logger.warn(`key "${i}" for languages "${R.join(", ")}" won't get resolved as namespace "${p}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),R.forEach(L=>{if(this.isValidLookup(r))return;u=L;const k=[w];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(k,w,L,M,n);else{let $;_&&($=this.pluralResolver.getSuffix(L,n.count,n));const U=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(_&&(n.ordinal&&$.indexOf(F)===0&&k.push(w+$.replace(F,this.options.pluralSeparator)),k.push(w+$),C&&k.push(w+U)),N){const B=`${w}${this.options.contextSeparator||"_"}${n.context}`;k.push(B),_&&(n.ordinal&&$.indexOf(F)===0&&k.push(B+$.replace(F,this.options.pluralSeparator)),k.push(B+$),C&&k.push(B+U))}}let j;for(;j=k.pop();)this.isValidLookup(r)||(a=j,r=this.getResource(L,M,j,n))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:u,usedNS:p}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!fn(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of n)delete i[a]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class r3{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=fo.create("languageUtils")}getScriptPartFromCode(e){if(e=_d(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=_d(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(fn(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(u=>{if(u===a)return u;if(!(u.indexOf("-")<0&&a.indexOf("-")<0)&&(u.indexOf("-")>0&&a.indexOf("-")<0&&u.substring(0,u.indexOf("-"))===a||u.indexOf(a)===0&&a.length>1))return u})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),fn(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],a=u=>{u&&(this.isSupportedCode(u)?i.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return fn(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):fn(e)&&a(this.formatLanguageCode(e)),r.forEach(u=>{i.indexOf(u)<0&&a(this.formatLanguageCode(u))}),i}}const i3={zero:0,one:1,two:2,few:3,many:4,other:5},s3={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PV{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=fo.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=_d(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let u;try{u=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),s3;if(!e.match(/-|_/))return s3;const g=this.languageUtils.getLanguagePartFromCode(e);u=this.getRule(g,n)}return this.pluralRulesCache[a]=u,u}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>i3[i]-i3[a]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const a3=(t,e,n,r=".",i=!0)=>{let a=TV(t,e,n);return!a&&i&&fn(n)&&(a=aw(t,n,r),a===void 0&&(a=aw(e,n,r))),a},Dv=t=>t.replace(/\$/g,"$$$$");class o3{constructor(e={}){this.logger=fo.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:u,suffix:p,suffixEscaped:g,formatSeparator:y,unescapeSuffix:w,unescapePrefix:S,nestingPrefix:_,nestingPrefixEscaped:C,nestingSuffix:N,nestingSuffixEscaped:R,nestingOptionsSeparator:M,maxReplaces:L,alwaysFormat:k}=e.interpolation;this.escape=n!==void 0?n:RV,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Gu(a):u||"{{",this.suffix=p?Gu(p):g||"}}",this.formatSeparator=y||",",this.unescapePrefix=w?"":S||"-",this.unescapeSuffix=this.unescapePrefix?"":w||"",this.nestingPrefix=_?Gu(_):C||Gu("$t("),this.nestingSuffix=N?Gu(N):R||Gu(")"),this.nestingOptionsSeparator=M||",",this.maxReplaces=L||1e3,this.alwaysFormat=k!==void 0?k:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let a,u,p;const g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},y=C=>{if(C.indexOf(this.formatSeparator)<0){const L=a3(n,g,C,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,r,{...i,...n,interpolationkey:C}):L}const N=C.split(this.formatSeparator),R=N.shift().trim(),M=N.join(this.formatSeparator).trim();return this.format(a3(n,g,R,this.options.keySeparator,this.options.ignoreJSONStructure),M,r,{...i,...n,interpolationkey:R})};this.resetRegExp();const w=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,S=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:C=>Dv(C)},{regex:this.regexp,safeValue:C=>this.escapeValue?Dv(this.escape(C)):Dv(C)}].forEach(C=>{for(p=0;a=C.regex.exec(e);){const N=a[1].trim();if(u=y(N),u===void 0)if(typeof w=="function"){const M=w(e,a,i);u=fn(M)?M:""}else if(i&&Object.prototype.hasOwnProperty.call(i,N))u="";else if(S){u=a[0];continue}else this.logger.warn(`missed to pass in variable ${N} for interpolating ${e}`),u="";else!fn(u)&&!this.useRawValueToEscape&&(u=QC(u));const R=C.safeValue(u);if(e=e.replace(a[0],R),S?(C.regex.lastIndex+=u.length,C.regex.lastIndex-=a[0].length):C.regex.lastIndex=0,p++,p>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,a,u;const p=(g,y)=>{const w=this.nestingOptionsSeparator;if(g.indexOf(w)<0)return g;const S=g.split(new RegExp(`${w}[ ]*{`));let _=`{${S[1]}`;g=S[0],_=this.interpolate(_,u);const C=_.match(/'/g),N=_.match(/"/g);((C?.length??0)%2===0&&!N||N.length%2!==0)&&(_=_.replace(/'/g,'"'));try{u=JSON.parse(_),y&&(u={...y,...u})}catch(R){return this.logger.warn(`failed parsing options string in nesting for key ${g}`,R),`${g}${w}${_}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,g};for(;i=this.nestingRegexp.exec(e);){let g=[];u={...r},u=u.replace&&!fn(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;const y=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(y!==-1&&(g=i[1].slice(y).split(this.formatSeparator).map(w=>w.trim()).filter(Boolean),i[1]=i[1].slice(0,y)),a=n(p.call(this,i[1].trim(),u),u),a&&i[0]===e&&!fn(a))return a;fn(a)||(a=QC(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),g.length&&(a=g.reduce((w,S)=>this.format(w,S,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const BV=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(u=>{if(u){const[p,...g]=u.split(":"),y=g.join(":").trim().replace(/^'+|'+$/g,""),w=p.trim();n[w]||(n[w]=y),y==="false"&&(n[w]=!1),y==="true"&&(n[w]=!0),isNaN(y)||(n[w]=parseInt(y,10))}})}return{formatName:e,formatOptions:n}},l3=t=>{const e={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const u=r+JSON.stringify(a);let p=e[u];return p||(p=t(_d(r),i),e[u]=p),p(n)}},UV=t=>(e,n,r)=>t(_d(n),r)(e);class zV{constructor(e={}){this.logger=fo.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?l3:UV;this.formats={number:r((i,a)=>{const u=new Intl.NumberFormat(i,{...a});return p=>u.format(p)}),currency:r((i,a)=>{const u=new Intl.NumberFormat(i,{...a,style:"currency"});return p=>u.format(p)}),datetime:r((i,a)=>{const u=new Intl.DateTimeFormat(i,{...a});return p=>u.format(p)}),relativetime:r((i,a)=>{const u=new Intl.RelativeTimeFormat(i,{...a});return p=>u.format(p,a.range||"day")}),list:r((i,a)=>{const u=new Intl.ListFormat(i,{...a});return p=>u.format(p)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=l3(n)}format(e,n,r,i={}){const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(p=>p.indexOf(")")>-1)){const p=a.findIndex(g=>g.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,p)].join(this.formatSeparator)}return a.reduce((p,g)=>{const{formatName:y,formatOptions:w}=BV(g);if(this.formats[y]){let S=p;try{const _=i?.formatParams?.[i.interpolationkey]||{},C=_.locale||_.lng||i.locale||i.lng||r;S=this.formats[y](p,C,{...w,...i,..._})}catch(_){this.logger.warn(_)}return S}else this.logger.warn(`there was no format function for ${y}`);return p},e)}}const FV=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class qV extends q1{constructor(e,n,r,i={}){super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=fo.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,n,r,i){const a={},u={},p={},g={};return e.forEach(y=>{let w=!0;n.forEach(S=>{const _=`${y}|${S}`;!r.reload&&this.store.hasResourceBundle(y,S)?this.state[_]=2:this.state[_]<0||(this.state[_]===1?u[_]===void 0&&(u[_]=!0):(this.state[_]=1,w=!1,u[_]===void 0&&(u[_]=!0),a[_]===void 0&&(a[_]=!0),g[S]===void 0&&(g[S]=!0)))}),w||(p[y]=!0)}),(Object.keys(a).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(u),toLoadLanguages:Object.keys(p),toLoadNamespaces:Object.keys(g)}}loaded(e,n,r){const i=e.split("|"),a=i[0],u=i[1];n&&this.emit("failedLoading",a,u,n),!n&&r&&this.store.addResourceBundle(a,u,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const p={};this.queue.forEach(g=>{NV(g.loaded,[a],u),FV(g,e),n&&g.errors.push(n),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(y=>{p[y]||(p[y]={});const w=g.loaded[y];w.length&&w.forEach(S=>{p[y][S]===void 0&&(p[y][S]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",p),this.queue=this.queue.filter(g=>!g.done)}read(e,n,r,i=0,a=this.retryTimeout,u){if(!e.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:a,callback:u});return}this.readingCalls++;const p=(y,w)=>{if(this.readingCalls--,this.waitingReads.length>0){const S=this.waitingReads.shift();this.read(S.lng,S.ns,S.fcName,S.tried,S.wait,S.callback)}if(y&&w&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,a*2,u)},a);return}u(y,w)},g=this.backend[r].bind(this.backend);if(g.length===2){try{const y=g(e,n);y&&typeof y.then=="function"?y.then(w=>p(null,w)).catch(p):p(null,y)}catch(y){p(y)}return}return g(e,n,p)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();fn(e)&&(e=this.languageUtils.toResolveHierarchy(e)),fn(n)&&(n=[n]);const a=this.queueLoad(e,n,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(u=>{this.loadOne(u)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(u,p)=>{u&&this.logger.warn(`${n}loading namespace ${a} for language ${i} failed`,u),!u&&p&&this.logger.log(`${n}loaded namespace ${a} for language ${i}`,p),this.loaded(e,u,p)})}saveMissing(e,n,r,i,a,u={},p=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const g={...u,isUpdate:a},y=this.backend.create.bind(this.backend);if(y.length<6)try{let w;y.length===5?w=y(e,n,r,i,g):w=y(e,n,r,i),w&&typeof w.then=="function"?w.then(S=>p(null,S)).catch(p):p(null,w)}catch(w){p(w)}else y(e,n,r,i,p,g)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const c3=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),fn(t[1])&&(e.defaultValue=t[1]),fn(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),u3=t=>(fn(t.ns)&&(t.ns=[t.ns]),fn(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),fn(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),n0=()=>{},$V=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class td extends q1{constructor(e={},n){if(super(),this.options=u3(e),this.services={},this.logger=fo,this.modules={external:[]},$V(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(fn(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=c3();this.options={...r,...this.options,...u3(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const i=y=>y?typeof y=="function"?new y:y:null;if(!this.options.isClone){this.modules.logger?fo.init(i(this.modules.logger),this.options):fo.init(null,this.options);let y;this.modules.formatter?y=this.modules.formatter:y=zV;const w=new r3(this.options);this.store=new t3(this.options.resources,this.options);const S=this.services;S.logger=fo,S.resourceStore=this.store,S.languageUtils=w,S.pluralResolver=new PV(w,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),y&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(S.formatter=i(y),S.formatter.init&&S.formatter.init(S,this.options),this.options.interpolation.format=S.formatter.format.bind(S.formatter)),S.interpolator=new o3(this.options),S.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},S.backendConnector=new qV(i(this.modules.backend),S.resourceStore,S,this.options),S.backendConnector.on("*",(C,...N)=>{this.emit(C,...N)}),this.modules.languageDetector&&(S.languageDetector=i(this.modules.languageDetector),S.languageDetector.init&&S.languageDetector.init(S,this.options.detection,this.options)),this.modules.i18nFormat&&(S.i18nFormat=i(this.modules.i18nFormat),S.i18nFormat.init&&S.i18nFormat.init(this)),this.translator=new i1(this.services,this.options),this.translator.on("*",(C,...N)=>{this.emit(C,...N)}),this.modules.external.forEach(C=>{C.init&&C.init(this)})}if(this.format=this.options.interpolation.format,n||(n=n0),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const y=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);y.length>0&&y[0]!=="dev"&&(this.options.lng=y[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(y=>{this[y]=(...w)=>this.store[y](...w)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(y=>{this[y]=(...w)=>(this.store[y](...w),this)});const p=Lh(),g=()=>{const y=(w,S)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),p.resolve(S),n(w,S)};if(this.languages&&!this.isInitialized)return y(null,this.t.bind(this));this.changeLanguage(this.options.lng,y)};return this.options.resources||!this.options.initAsync?g():setTimeout(g,0),p}loadResources(e,n=n0){let r=n;const i=fn(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],u=p=>{if(!p||p==="cimode")return;this.services.languageUtils.toResolveHierarchy(p).forEach(y=>{y!=="cimode"&&a.indexOf(y)<0&&a.push(y)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>u(g)),this.options.preload?.forEach?.(p=>u(p)),this.services.backendConnector.load(a,this.options.ns,p=>{!p&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(p)})}else r(null)}reloadResources(e,n,r){const i=Lh();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=n0),this.services.backendConnector.reload(e,n,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&yO.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Lh();this.emit("languageChanging",e);const i=p=>{this.language=p,this.languages=this.services.languageUtils.toResolveHierarchy(p),this.resolvedLanguage=void 0,this.setResolvedLanguage(p)},a=(p,g)=>{g?this.isLanguageChangingTo===e&&(i(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,r.resolve((...y)=>this.t(...y)),n&&n(p,(...y)=>this.t(...y))},u=p=>{!e&&!p&&this.services.languageDetector&&(p=[]);const g=fn(p)?p:p&&p[0],y=this.store.hasLanguageSomeTranslations(g)?g:this.services.languageUtils.getBestMatchFromCodes(fn(p)?[p]:p);y&&(this.language||i(y),this.translator.language||this.translator.changeLanguage(y),this.services.languageDetector?.cacheUserLanguage?.(y)),this.loadResources(y,w=>{a(w,y)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(e),r}getFixedT(e,n,r){const i=(a,u,...p)=>{let g;typeof u!="object"?g=this.options.overloadTranslationOptionHandler([a,u].concat(p)):g={...u},g.lng=g.lng||i.lng,g.lngs=g.lngs||i.lngs,g.ns=g.ns||i.ns,g.keyPrefix!==""&&(g.keyPrefix=g.keyPrefix||r||i.keyPrefix);const y=this.options.keySeparator||".";let w;return g.keyPrefix&&Array.isArray(a)?w=a.map(S=>(typeof S=="function"&&(S=ow(S,{...this.options,...u})),`${g.keyPrefix}${y}${S}`)):(typeof a=="function"&&(a=ow(a,{...this.options,...u})),w=g.keyPrefix?`${g.keyPrefix}${y}${a}`:a),this.t(w,g)};return fn(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const u=(p,g)=>{const y=this.services.backendConnector.state[`${p}|${g}`];return y===-1||y===0||y===2};if(n.precheck){const p=n.precheck(this,u);if(p!==void 0)return p}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(r,e)&&(!i||u(a,e)))}loadNamespaces(e,n){const r=Lh();return this.options.ns?(fn(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Lh();fn(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(u=>i.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return a.length?(this.options.preload=i.concat(a),this.loadResources(u=>{r.resolve(),n&&n(u)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const a=i.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new r3(c3());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const r=new td(e,n);return r.createInstance=td.createInstance,r}cloneInstance(e={},n=n0){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new td(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(p=>{a[p]=this[p]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const p=Object.keys(this.store.data).reduce((g,y)=>(g[y]={...this.store.data[y]},g[y]=Object.keys(g[y]).reduce((w,S)=>(w[S]={...g[y][S]},w),g[y]),g),{});a.store=new t3(p,i),a.services.resourceStore=a.store}return e.interpolation&&(a.services.interpolator=new o3(i)),a.translator=new i1(a.services,i),a.translator.on("*",(p,...g)=>{a.emit(p,...g)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Es=td.createInstance();Es.createInstance;Es.dir;Es.init;Es.loadResources;Es.reloadResources;Es.use;Es.changeLanguage;Es.getFixedT;Es.t;Es.exists;Es.setDefaultNamespace;Es.hasLoadedNamespace;Es.loadNamespaces;Es.loadLanguages;const VV=(t,e,n,r)=>{const i=[n,{code:e,...r||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);iu(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...i):console?.warn&&console.warn(...i)},f3={},bO=(t,e,n,r)=>{iu(n)&&f3[n]||(iu(n)&&(f3[n]=new Date),VV(t,e,n,r))},wO=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},lw=(t,e,n)=>{t.loadNamespaces(e,wO(t,n))},h3=(t,e,n,r)=>{if(iu(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return lw(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,wO(t,r))},HV=(t,e,n={})=>!e.languages||!e.languages.length?(bO(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),iu=t=>typeof t=="string",KV=t=>typeof t=="object"&&t!==null,GV=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,YV={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},WV=t=>YV[t],XV=t=>t.replace(GV,WV);let cw={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:XV,transDefaultProps:void 0};const QV=(t={})=>{cw={...cw,...t}},ZV=()=>cw;let EO;const JV=t=>{EO=t},eH=()=>EO,tH={type:"3rdParty",init(t){QV(t.options.react),JV(t)}},nH=re.createContext();class rH{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Lv={exports:{}},kv={};var d3;function iH(){if(d3)return kv;d3=1;var t=jf();function e(S,_){return S===_&&(S!==0||1/S===1/_)||S!==S&&_!==_}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,u=t.useDebugValue;function p(S,_){var C=_(),N=r({inst:{value:C,getSnapshot:_}}),R=N[0].inst,M=N[1];return a(function(){R.value=C,R.getSnapshot=_,g(R)&&M({inst:R})},[S,C,_]),i(function(){return g(R)&&M({inst:R}),S(function(){g(R)&&M({inst:R})})},[S]),u(C),C}function g(S){var _=S.getSnapshot;S=S.value;try{var C=_();return!n(S,C)}catch{return!0}}function y(S,_){return _()}var w=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y:p;return kv.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:w,kv}var p3;function sH(){return p3||(p3=1,Lv.exports=iH()),Lv.exports}var aH=sH();const oH=(t,e)=>iu(e)?e:KV(e)&&iu(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,lH={t:oH,ready:!1},cH=()=>()=>{},Ff=(t,e={})=>{const{i18n:n}=e,{i18n:r,defaultNS:i}=re.useContext(nH)||{},a=n||r||eH();a&&!a.reportNamespaces&&(a.reportNamespaces=new rH),a||bO(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=re.useMemo(()=>({...ZV(),...a?.options?.react,...e}),[a,e]),{useSuspense:p,keyPrefix:g}=u,y=i||a?.options?.defaultNS,w=iu(y)?[y]:y||["translation"],S=re.useMemo(()=>w,w);a?.reportNamespaces?.addUsedNamespaces?.(S);const _=re.useRef(0),C=re.useCallback(le=>{if(!a)return cH;const{bindI18n:Ne,bindI18nStore:G}=u,ce=()=>{_.current+=1,le()};return Ne&&a.on(Ne,ce),G&&a.store.on(G,ce),()=>{Ne&&Ne.split(" ").forEach(se=>a.off(se,ce)),G&&G.split(" ").forEach(se=>a.store.off(se,ce))}},[a,u]),N=re.useRef(),R=re.useCallback(()=>{if(!a)return lH;const le=!!(a.isInitialized||a.initializedStoreOnce)&&S.every(ue=>HV(ue,a,u)),Ne=e.lng||a.language,G=_.current,ce=N.current;if(ce&&ce.ready===le&&ce.lng===Ne&&ce.keyPrefix===g&&ce.revision===G)return ce;const Ee={t:a.getFixedT(Ne,u.nsMode==="fallback"?S:S[0],g),ready:le,lng:Ne,keyPrefix:g,revision:G};return N.current=Ee,Ee},[a,S,g,u,e.lng]),[M,L]=re.useState(0),{t:k,ready:j}=aH.useSyncExternalStore(C,R,R);re.useEffect(()=>{if(a&&!j&&!p){const le=()=>L(Ne=>Ne+1);e.lng?h3(a,e.lng,S,le):lw(a,S,le)}},[a,e.lng,S,j,p,M]);const $=a||{},U=re.useRef(null),F=re.useRef(),B=le=>{const Ne=Object.getOwnPropertyDescriptors(le);Ne.__original&&delete Ne.__original;const G=Object.create(Object.getPrototypeOf(le),Ne);if(!Object.prototype.hasOwnProperty.call(G,"__original"))try{Object.defineProperty(G,"__original",{value:le,writable:!1,enumerable:!1,configurable:!1})}catch{}return G},Z=re.useMemo(()=>{const le=$,Ne=le?.language;let G=le;le&&(U.current&&U.current.__original===le?F.current!==Ne?(G=B(le),U.current=G,F.current=Ne):G=U.current:(G=B(le),U.current=G,F.current=Ne));const ce=[k,G,j];return ce.t=k,ce.i18n=G,ce.ready=j,ce},[k,$,j,$.resolvedLanguage,$.language,$.languages]);if(a&&p&&!j)throw new Promise(le=>{const Ne=()=>le();e.lng?h3(a,e.lng,S,Ne):lw(a,S,Ne)});return Z};function uH(){const t=Mi(),e=xo(),{t:n}=Ff(),r=[{icon:Mb,label:n("nav.home"),path:"/dashboard"},{icon:_1,label:n("nav.sync"),path:"/sync"},{icon:Ek,label:n("nav.settings"),path:"/settings"}],i=e.pathname==="/",a=e.pathname.includes("/play/");return O.jsx("div",{className:"min-h-screen bg-transparent text-foreground font-sans selection:bg-primary/30 flex justify-center aurora-bg",children:O.jsxs("div",{className:`w-full max-w-md h-screen relative shadow-2xl bg-black/50 glass-panel flex flex-col border-x border-white/5 overflow-hidden ${a?"border-none bg-black/80":""}`,children:[O.jsx("main",{className:"flex-1 overflow-y-auto no-scrollbar",children:O.jsx(P7,{})}),O.jsx(_V,{}),!i&&!e.pathname.includes("/play/")&&O.jsx("nav",{className:"h-16 bg-slate-900/90 backdrop-blur-lg border-t border-white/5 grid grid-cols-3 shrink-0 z-40",children:r.map(u=>{const p=e.pathname===u.path,g=u.icon;return O.jsxs("button",{onClick:()=>t(u.path),className:A_("flex flex-col items-center justify-center gap-1 transition-all active:scale-95",p?"text-primary-400":"text-slate-500 hover:text-slate-300"),children:[O.jsx(g,{className:A_("w-6 h-6",p&&"fill-current/20")}),O.jsx("span",{className:"text-[10px] font-medium",children:u.label})]},u.label)})})]})})}const fH="/GramShiksha/assets/logo-vWW33kSL.png";function hH({className:t="w-24 h-24"}){return O.jsx("div",{className:`relative flex items-center justify-center ${t}`,children:O.jsx("img",{src:fH,alt:"GramSiksha Logo",className:"w-full h-full object-contain mix-blend-screen filter grayscale brightness-200 sepia hue-rotate-[160deg] saturate-[500%] contrast-125 drop-shadow-[0_0_15px_rgba(6,182,212,0.6)]"})})}const k2=re.createContext({});function j2(t){const e=re.useRef(null);return e.current===null&&(e.current=t()),e.current}const P2=typeof window<"u",SO=P2?re.useLayoutEffect:re.useEffect,$1=re.createContext(null);function B2(t,e){t.indexOf(e)===-1&&t.push(e)}function U2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const al=(t,e,n)=>n>e?e:n<t?t:n;let z2=()=>{};const ol={},xO=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function _O(t){return typeof t=="object"&&t!==null}const AO=t=>/^0[^.\s]+$/u.test(t);function F2(t){let e;return()=>(e===void 0&&(e=t()),e)}const Na=t=>t,dH=(t,e)=>n=>e(t(n)),np=(...t)=>t.reduce(dH),Ad=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class q2{constructor(){this.subscriptions=[]}add(e){return B2(this.subscriptions,e),()=>U2(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const u=this.subscriptions[a];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const po=t=>t*1e3,_a=t=>t/1e3;function CO(t,e){return e?t*(1e3/e):0}const NO=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,pH=1e-7,mH=12;function gH(t,e,n,r,i){let a,u,p=0;do u=e+(n-e)/2,a=NO(u,r,i)-t,a>0?n=u:e=u;while(Math.abs(a)>pH&&++p<mH);return u}function rp(t,e,n,r){if(t===e&&n===r)return Na;const i=a=>gH(a,0,1,t,n);return a=>a===0||a===1?a:NO(i(a),e,r)}const TO=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,OO=t=>e=>1-t(1-e),RO=rp(.33,1.53,.69,.99),$2=OO(RO),IO=TO($2),MO=t=>(t*=2)<1?.5*$2(t):.5*(2-Math.pow(2,-10*(t-1))),V2=t=>1-Math.sin(Math.acos(t)),DO=OO(V2),LO=TO(V2),yH=rp(.42,0,1,1),vH=rp(0,0,.58,1),kO=rp(.42,0,.58,1),bH=t=>Array.isArray(t)&&typeof t[0]!="number",jO=t=>Array.isArray(t)&&typeof t[0]=="number",wH={linear:Na,easeIn:yH,easeInOut:kO,easeOut:vH,circIn:V2,circInOut:LO,circOut:DO,backIn:$2,backInOut:IO,backOut:RO,anticipate:MO},EH=t=>typeof t=="string",m3=t=>{if(jO(t)){z2(t.length===4);const[e,n,r,i]=t;return rp(e,n,r,i)}else if(EH(t))return wH[t];return t},r0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function SH(t,e){let n=new Set,r=new Set,i=!1,a=!1;const u=new WeakSet;let p={delta:0,timestamp:0,isProcessing:!1};function g(w){u.has(w)&&(y.schedule(w),t()),w(p)}const y={schedule:(w,S=!1,_=!1)=>{const N=_&&i?n:r;return S&&u.add(w),N.has(w)||N.add(w),w},cancel:w=>{r.delete(w),u.delete(w)},process:w=>{if(p=w,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(g),n.clear(),i=!1,a&&(a=!1,y.process(w))}};return y}const xH=40;function PO(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=r0.reduce((j,$)=>(j[$]=SH(a),j),{}),{setup:p,read:g,resolveKeyframes:y,preUpdate:w,update:S,preRender:_,render:C,postRender:N}=u,R=()=>{const j=ol.useManualTiming?i.timestamp:performance.now();n=!1,ol.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(j-i.timestamp,xH),1)),i.timestamp=j,i.isProcessing=!0,p.process(i),g.process(i),y.process(i),w.process(i),S.process(i),_.process(i),C.process(i),N.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(R))},M=()=>{n=!0,r=!0,i.isProcessing||t(R)};return{schedule:r0.reduce((j,$)=>{const U=u[$];return j[$]=(F,B=!1,Z=!1)=>(n||M(),U.schedule(F,B,Z)),j},{}),cancel:j=>{for(let $=0;$<r0.length;$++)u[r0[$]].cancel(j)},state:i,steps:u}}const{schedule:Gr,cancel:cc,state:Qi,steps:jv}=PO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Na,!0);let R0;function _H(){R0=void 0}const Ds={now:()=>(R0===void 0&&Ds.set(Qi.isProcessing||ol.useManualTiming?Qi.timestamp:performance.now()),R0),set:t=>{R0=t,queueMicrotask(_H)}},BO=t=>e=>typeof e=="string"&&e.startsWith(t),UO=BO("--"),AH=BO("var(--"),H2=t=>AH(t)?CH.test(t.split("/*")[0].trim()):!1,CH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Cd={...qf,transform:t=>al(0,1,t)},i0={...qf,default:1},nd=t=>Math.round(t*1e5)/1e5,K2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function NH(t){return t==null}const TH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,G2=(t,e)=>n=>!!(typeof n=="string"&&TH.test(n)&&n.startsWith(t)||e&&!NH(n)&&Object.prototype.hasOwnProperty.call(n,e)),zO=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,u,p]=r.match(K2);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(u),alpha:p!==void 0?parseFloat(p):1}},OH=t=>al(0,255,t),Pv={...qf,transform:t=>Math.round(OH(t))},$c={test:G2("rgb","red"),parse:zO("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Pv.transform(t)+", "+Pv.transform(e)+", "+Pv.transform(n)+", "+nd(Cd.transform(r))+")"};function RH(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const uw={test:G2("#"),parse:RH,transform:$c.transform},ip=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Kl=ip("deg"),mo=ip("%"),sn=ip("px"),IH=ip("vh"),MH=ip("vw"),g3={...mo,parse:t=>mo.parse(t)/100,transform:t=>mo.transform(t*100)},af={test:G2("hsl","hue"),parse:zO("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+mo.transform(nd(e))+", "+mo.transform(nd(n))+", "+nd(Cd.transform(r))+")"},Ri={test:t=>$c.test(t)||uw.test(t)||af.test(t),parse:t=>$c.test(t)?$c.parse(t):af.test(t)?af.parse(t):uw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$c.transform(t):af.transform(t),getAnimatableNone:t=>{const e=Ri.parse(t);return e.alpha=0,Ri.transform(e)}},DH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LH(t){return isNaN(t)&&typeof t=="string"&&(t.match(K2)?.length||0)+(t.match(DH)?.length||0)>0}const FO="number",qO="color",kH="var",jH="var(",y3="${}",PH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const p=e.replace(PH,g=>(Ri.test(g)?(r.color.push(a),i.push(qO),n.push(Ri.parse(g))):g.startsWith(jH)?(r.var.push(a),i.push(kH),n.push(g)):(r.number.push(a),i.push(FO),n.push(parseFloat(g))),++a,y3)).split(y3);return{values:n,split:p,indexes:r,types:i}}function $O(t){return Nd(t).values}function VO(t){const{split:e,types:n}=Nd(t),r=e.length;return i=>{let a="";for(let u=0;u<r;u++)if(a+=e[u],i[u]!==void 0){const p=n[u];p===FO?a+=nd(i[u]):p===qO?a+=Ri.transform(i[u]):a+=i[u]}return a}}const BH=t=>typeof t=="number"?0:Ri.test(t)?Ri.getAnimatableNone(t):t;function UH(t){const e=$O(t);return VO(t)(e.map(BH))}const uc={test:LH,parse:$O,createTransformer:VO,getAnimatableNone:UH};function Bv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zH({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,u=0;if(!e)i=a=u=n;else{const p=n<.5?n*(1+e):n+e-n*e,g=2*n-p;i=Bv(g,p,t+1/3),a=Bv(g,p,t),u=Bv(g,p,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}function s1(t,e){return n=>n>0?e:t}const ti=(t,e,n)=>t+(e-t)*n,Uv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},FH=[uw,$c,af],qH=t=>FH.find(e=>e.test(t));function v3(t){const e=qH(t);if(!e)return!1;let n=e.parse(t);return e===af&&(n=zH(n)),n}const b3=(t,e)=>{const n=v3(t),r=v3(e);if(!n||!r)return s1(t,e);const i={...n};return a=>(i.red=Uv(n.red,r.red,a),i.green=Uv(n.green,r.green,a),i.blue=Uv(n.blue,r.blue,a),i.alpha=ti(n.alpha,r.alpha,a),$c.transform(i))},fw=new Set(["none","hidden"]);function $H(t,e){return fw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function VH(t,e){return n=>ti(t,e,n)}function Y2(t){return typeof t=="number"?VH:typeof t=="string"?H2(t)?s1:Ri.test(t)?b3:GH:Array.isArray(t)?HO:typeof t=="object"?Ri.test(t)?b3:HH:s1}function HO(t,e){const n=[...t],r=n.length,i=t.map((a,u)=>Y2(a)(a,e[u]));return a=>{for(let u=0;u<r;u++)n[u]=i[u](a);return n}}function HH(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Y2(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function KH(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],u=t.indexes[a][r[a]],p=t.values[u]??0;n[i]=p,r[a]++}return n}const GH=(t,e)=>{const n=uc.createTransformer(e),r=Nd(t),i=Nd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?fw.has(t)&&!i.values.length||fw.has(e)&&!r.values.length?$H(t,e):np(HO(KH(r,i),i.values),n):s1(t,e)};function KO(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ti(t,e,n):Y2(t)(t,e)}const YH=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Gr.update(e,n),stop:()=>cc(e),now:()=>Qi.isProcessing?Qi.timestamp:Ds.now()}},GO=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},a1=2e4;function W2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<a1;)e+=n,r=t.next(e);return e>=a1?1/0:e}function WH(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(W2(r),a1);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:_a(i)}}const XH=5;function YO(t,e,n){const r=Math.max(e-XH,0);return CO(n-t(r),e-r)}const ui={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zv=.001;function QH({duration:t=ui.duration,bounce:e=ui.bounce,velocity:n=ui.velocity,mass:r=ui.mass}){let i,a,u=1-e;u=al(ui.minDamping,ui.maxDamping,u),t=al(ui.minDuration,ui.maxDuration,_a(t)),u<1?(i=y=>{const w=y*u,S=w*t,_=w-n,C=hw(y,u),N=Math.exp(-S);return zv-_/C*N},a=y=>{const S=y*u*t,_=S*n+n,C=Math.pow(u,2)*Math.pow(y,2)*t,N=Math.exp(-S),R=hw(Math.pow(y,2),u);return(-i(y)+zv>0?-1:1)*((_-C)*N)/R}):(i=y=>{const w=Math.exp(-y*t),S=(y-n)*t+1;return-zv+w*S},a=y=>{const w=Math.exp(-y*t),S=(n-y)*(t*t);return w*S});const p=5/t,g=JH(i,a,p);if(t=po(t),isNaN(g))return{stiffness:ui.stiffness,damping:ui.damping,duration:t};{const y=Math.pow(g,2)*r;return{stiffness:y,damping:u*2*Math.sqrt(r*y),duration:t}}}const ZH=12;function JH(t,e,n){let r=n;for(let i=1;i<ZH;i++)r=r-t(r)/e(r);return r}function hw(t,e){return t*Math.sqrt(1-e*e)}const eK=["duration","bounce"],tK=["stiffness","damping","mass"];function w3(t,e){return e.some(n=>t[n]!==void 0)}function nK(t){let e={velocity:ui.velocity,stiffness:ui.stiffness,damping:ui.damping,mass:ui.mass,isResolvedFromDuration:!1,...t};if(!w3(t,tK)&&w3(t,eK))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*al(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ui.mass,stiffness:i,damping:a}}else{const n=QH(t);e={...e,...n,mass:ui.mass},e.isResolvedFromDuration=!0}return e}function o1(t=ui.visualDuration,e=ui.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],p={done:!1,value:a},{stiffness:g,damping:y,mass:w,duration:S,velocity:_,isResolvedFromDuration:C}=nK({...n,velocity:-_a(n.velocity||0)}),N=_||0,R=y/(2*Math.sqrt(g*w)),M=u-a,L=_a(Math.sqrt(g/w)),k=Math.abs(M)<5;r||(r=k?ui.restSpeed.granular:ui.restSpeed.default),i||(i=k?ui.restDelta.granular:ui.restDelta.default);let j;if(R<1){const U=hw(L,R);j=F=>{const B=Math.exp(-R*L*F);return u-B*((N+R*L*M)/U*Math.sin(U*F)+M*Math.cos(U*F))}}else if(R===1)j=U=>u-Math.exp(-L*U)*(M+(N+L*M)*U);else{const U=L*Math.sqrt(R*R-1);j=F=>{const B=Math.exp(-R*L*F),Z=Math.min(U*F,300);return u-B*((N+R*L*M)*Math.sinh(Z)+U*M*Math.cosh(Z))/U}}const $={calculatedDuration:C&&S||null,next:U=>{const F=j(U);if(C)p.done=U>=S;else{let B=U===0?N:0;R<1&&(B=U===0?po(N):YO(j,U,F));const Z=Math.abs(B)<=r,le=Math.abs(u-F)<=i;p.done=Z&&le}return p.value=p.done?u:F,p},toString:()=>{const U=Math.min(W2($),a1),F=GO(B=>$.next(U*B).value,U,30);return U+"ms "+F},toTransition:()=>{}};return $}o1.applyToOptions=t=>{const e=WH(t,100,o1);return t.ease=e.ease,t.duration=po(e.duration),t.type="keyframes",t};function dw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:u,min:p,max:g,restDelta:y=.5,restSpeed:w}){const S=t[0],_={done:!1,value:S},C=Z=>p!==void 0&&Z<p||g!==void 0&&Z>g,N=Z=>p===void 0?g:g===void 0||Math.abs(p-Z)<Math.abs(g-Z)?p:g;let R=n*e;const M=S+R,L=u===void 0?M:u(M);L!==M&&(R=L-S);const k=Z=>-R*Math.exp(-Z/r),j=Z=>L+k(Z),$=Z=>{const le=k(Z),Ne=j(Z);_.done=Math.abs(le)<=y,_.value=_.done?L:Ne};let U,F;const B=Z=>{C(_.value)&&(U=Z,F=o1({keyframes:[_.value,N(_.value)],velocity:YO(j,Z,_.value),damping:i,stiffness:a,restDelta:y,restSpeed:w}))};return B(0),{calculatedDuration:null,next:Z=>{let le=!1;return!F&&U===void 0&&(le=!0,$(Z),B(Z)),U!==void 0&&Z>=U?F.next(Z-U):(!le&&$(Z),_)}}}function rK(t,e,n){const r=[],i=n||ol.mix||KO,a=t.length-1;for(let u=0;u<a;u++){let p=i(t[u],t[u+1]);if(e){const g=Array.isArray(e)?e[u]||Na:e;p=np(g,p)}r.push(p)}return r}function iK(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(z2(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const p=rK(e,r,i),g=p.length,y=w=>{if(u&&w<t[0])return e[0];let S=0;if(g>1)for(;S<t.length-2&&!(w<t[S+1]);S++);const _=Ad(t[S],t[S+1],w);return p[S](_)};return n?w=>y(al(t[0],t[a-1],w)):y}function sK(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ad(0,e,r);t.push(ti(n,1,i))}}function aK(t){const e=[0];return sK(e,t.length-1),e}function oK(t,e){return t.map(n=>n*e)}function lK(t,e){return t.map(()=>e||kO).splice(0,t.length-1)}function rd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=bH(r)?r.map(m3):m3(r),a={done:!1,value:e[0]},u=oK(n&&n.length===e.length?n:aK(e),t),p=iK(u,e,{ease:Array.isArray(i)?i:lK(e,i)});return{calculatedDuration:t,next:g=>(a.value=p(g),a.done=g>=t,a)}}const cK=t=>t!==null;function X2(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(cK),p=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!p||r===void 0?a[p]:r}const uK={decay:dw,inertia:dw,tween:rd,keyframes:rd,spring:o1};function WO(t){typeof t.type=="string"&&(t.type=uK[t.type])}class Q2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const fK=t=>t/100;class Z2 extends Q2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Ds.now()&&this.tick(Ds.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;WO(e);const{type:n=rd,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:u=0}=e;let{keyframes:p}=e;const g=n||rd;g!==rd&&typeof p[0]!="number"&&(this.mixKeyframes=np(fK,KO(p[0],p[1])),p=[0,100]);const y=g({...e,keyframes:p});a==="mirror"&&(this.mirroredGenerator=g({...e,keyframes:[...p].reverse(),velocity:-u})),y.calculatedDuration===null&&(y.calculatedDuration=W2(y));const{calculatedDuration:w}=y;this.calculatedDuration=w,this.resolvedDuration=w+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=y}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:u,resolvedDuration:p,calculatedDuration:g}=this;if(this.startTime===null)return r.next(0);const{delay:y=0,keyframes:w,repeat:S,repeatType:_,repeatDelay:C,type:N,onUpdate:R,finalKeyframe:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const L=this.currentTime-y*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?L<0:L>i;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let j=this.currentTime,$=r;if(S){const Z=Math.min(this.currentTime,i)/p;let le=Math.floor(Z),Ne=Z%1;!Ne&&Z>=1&&(Ne=1),Ne===1&&le--,le=Math.min(le,S+1),le%2&&(_==="reverse"?(Ne=1-Ne,C&&(Ne-=C/p)):_==="mirror"&&($=u)),j=al(0,1,Ne)*p}const U=k?{done:!1,value:w[0]}:$.next(j);a&&(U.value=a(U.value));let{done:F}=U;!k&&g!==null&&(F=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return B&&N!==dw&&(U.value=X2(w,this.options,M,this.speed)),R&&R(U.value),B&&this.finish(),U}then(e,n){return this.finished.then(e,n)}get duration(){return _a(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_a(e)}get time(){return _a(this.currentTime)}set time(e){e=po(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ds.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=_a(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=YH,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ds.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function hK(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vc=t=>t*180/Math.PI,pw=t=>{const e=Vc(Math.atan2(t[1],t[0]));return mw(e)},dK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:pw,rotateZ:pw,skewX:t=>Vc(Math.atan(t[1])),skewY:t=>Vc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},mw=t=>(t=t%360,t<0&&(t+=360),t),E3=pw,S3=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),x3=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),pK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:S3,scaleY:x3,scale:t=>(S3(t)+x3(t))/2,rotateX:t=>mw(Vc(Math.atan2(t[6],t[5]))),rotateY:t=>mw(Vc(Math.atan2(-t[2],t[0]))),rotateZ:E3,rotate:E3,skewX:t=>Vc(Math.atan(t[4])),skewY:t=>Vc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function gw(t){return t.includes("scale")?1:0}function yw(t,e){if(!t||t==="none")return gw(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=pK,i=n;else{const p=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=dK,i=p}if(!i)return gw(e);const a=r[e],u=i[1].split(",").map(gK);return typeof a=="function"?a(u):u[a]}const mK=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return yw(n,e)};function gK(t){return parseFloat(t.trim())}const $f=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vf=new Set($f),_3=t=>t===qf||t===sn,yK=new Set(["x","y","z"]),vK=$f.filter(t=>!yK.has(t));function bK(t){const e=[];return vK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Wc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>yw(e,"x"),y:(t,{transform:e})=>yw(e,"y")};Wc.translateX=Wc.x;Wc.translateY=Wc.y;const Xc=new Set;let vw=!1,bw=!1,ww=!1;function XO(){if(bw){const t=Array.from(Xc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=bK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,u])=>{r.getValue(a)?.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}bw=!1,vw=!1,Xc.forEach(t=>t.complete(ww)),Xc.clear()}function QO(){Xc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bw=!0)})}function wK(){ww=!0,QO(),XO(),ww=!1}class J2{constructor(e,n,r,i,a,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Xc.add(this),vw||(vw=!0,Gr.read(QO),Gr.resolveKeyframes(XO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const p=r.readValue(n,u);p!=null&&(e[0]=p)}e[0]===void 0&&(e[0]=u),i&&a===void 0&&i.set(e[0])}hK(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Xc.delete(this)}cancel(){this.state==="scheduled"&&(Xc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const EK=t=>t.startsWith("--");function SK(t,e,n){EK(e)?t.style.setProperty(e,n):t.style[e]=n}const xK=F2(()=>window.ScrollTimeline!==void 0),_K={};function AK(t,e){const n=F2(t);return()=>_K[e]??n()}const ZO=AK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,A3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qh([0,.65,.55,1]),circOut:qh([.55,0,1,.45]),backIn:qh([.31,.01,.66,-.59]),backOut:qh([.33,1.53,.69,.99])};function JO(t,e){if(t)return typeof t=="function"?ZO()?GO(t,e):"ease-out":jO(t)?qh(t):Array.isArray(t)?t.map(n=>JO(n,e)||A3.easeOut):A3[t]}function CK(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:u="loop",ease:p="easeOut",times:g}={},y=void 0){const w={[e]:n};g&&(w.offset=g);const S=JO(p,i);Array.isArray(S)&&(w.easing=S);const _={delay:r,duration:i,easing:Array.isArray(S)?"linear":S,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"};return y&&(_.pseudoElement=y),t.animate(w,_)}function eR(t){return typeof t=="function"&&"applyToOptions"in t}function NK({type:t,...e}){return eR(t)&&ZO()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class TK extends Q2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:u=!1,finalKeyframe:p,onComplete:g}=e;this.isPseudoElement=!!a,this.allowFlatten=u,this.options=e,z2(typeof e.type!="string");const y=NK(e);this.animation=CK(n,r,i,y,a),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const w=X2(i,this.options,p,this.speed);this.updateMotionValue?this.updateMotionValue(w):SK(n,r,w),this.animation.cancel()}g?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return _a(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_a(e)}get time(){return _a(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=po(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&xK()?(this.animation.timeline=e,Na):n(this)}}const tR={anticipate:MO,backInOut:IO,circInOut:LO};function OK(t){return t in tR}function RK(t){typeof t.ease=="string"&&OK(t.ease)&&(t.ease=tR[t.ease])}const C3=10;class IK extends TK{constructor(e){RK(e),WO(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const p=new Z2({...u,autoplay:!1}),g=po(this.finishedTime??this.time);n.setWithVelocity(p.sample(g-C3).value,p.sample(g).value,C3),p.stop()}}const N3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(uc.test(t)||t==="0")&&!t.startsWith("url("));function MK(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function DK(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],u=N3(i,e),p=N3(a,e);return!u||!p?!1:MK(t)||(n==="spring"||eR(n))&&r}function Ew(t){t.duration=0,t.type="keyframes"}const LK=new Set(["opacity","clipPath","filter","transform"]),kK=F2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function jK(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:y}=e.owner.getProps();return kK()&&n&&LK.has(n)&&(n!=="transform"||!y)&&!g&&!r&&i!=="mirror"&&a!==0&&u!=="inertia"}const PK=40;class BK extends Q2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:u="loop",keyframes:p,name:g,motionValue:y,element:w,...S}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ds.now();const _={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:u,name:g,motionValue:y,element:w,...S},C=w?.KeyframeResolver||J2;this.keyframeResolver=new C(p,(N,R,M)=>this.onKeyframesResolved(N,R,_,!M),g,y,w),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:u,velocity:p,delay:g,isHandoff:y,onUpdate:w}=r;this.resolvedAt=Ds.now(),DK(e,a,u,p)||((ol.instantAnimations||!g)&&w?.(X2(e,r,n)),e[0]=e[e.length-1],Ew(r),r.repeat=0);const _={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>PK?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},C=!y&&jK(_)?new IK({..._,element:_.motionValue.owner.current}):new Z2(_);C.finished.then(()=>this.notifyFinished()).catch(Na),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),wK()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const UK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zK(t){const e=UK.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function nR(t,e,n=1){const[r,i]=zK(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const u=a.trim();return xO(u)?parseFloat(u):u}return H2(i)?nR(i,e,n+1):i}function eE(t,e){return t?.[e]??t?.default??t}const rR=new Set(["width","height","top","left","right","bottom",...$f]),FK={test:t=>t==="auto",parse:t=>t},iR=t=>e=>e.test(t),sR=[qf,sn,mo,Kl,MH,IH,FK],T3=t=>sR.find(iR(t));function qK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||AO(t):!0}const $K=new Set(["brightness","contrast","saturate","opacity"]);function VK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(K2)||[];if(!r)return t;const i=n.replace(r,"");let a=$K.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const HK=/\b([a-z-]*)\(.*?\)/gu,Sw={...uc,getAnimatableNone:t=>{const e=t.match(HK);return e?e.map(VK).join(" "):t}},O3={...qf,transform:Math.round},KK={rotate:Kl,rotateX:Kl,rotateY:Kl,rotateZ:Kl,scale:i0,scaleX:i0,scaleY:i0,scaleZ:i0,skew:Kl,skewX:Kl,skewY:Kl,distance:sn,translateX:sn,translateY:sn,translateZ:sn,x:sn,y:sn,z:sn,perspective:sn,transformPerspective:sn,opacity:Cd,originX:g3,originY:g3,originZ:sn},tE={borderWidth:sn,borderTopWidth:sn,borderRightWidth:sn,borderBottomWidth:sn,borderLeftWidth:sn,borderRadius:sn,radius:sn,borderTopLeftRadius:sn,borderTopRightRadius:sn,borderBottomRightRadius:sn,borderBottomLeftRadius:sn,width:sn,maxWidth:sn,height:sn,maxHeight:sn,top:sn,right:sn,bottom:sn,left:sn,padding:sn,paddingTop:sn,paddingRight:sn,paddingBottom:sn,paddingLeft:sn,margin:sn,marginTop:sn,marginRight:sn,marginBottom:sn,marginLeft:sn,backgroundPositionX:sn,backgroundPositionY:sn,...KK,zIndex:O3,fillOpacity:Cd,strokeOpacity:Cd,numOctaves:O3},GK={...tE,color:Ri,backgroundColor:Ri,outlineColor:Ri,fill:Ri,stroke:Ri,borderColor:Ri,borderTopColor:Ri,borderRightColor:Ri,borderBottomColor:Ri,borderLeftColor:Ri,filter:Sw,WebkitFilter:Sw},aR=t=>GK[t];function oR(t,e){let n=aR(t);return n!==Sw&&(n=uc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const YK=new Set(["auto","none","0"]);function WK(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!YK.has(a)&&Nd(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=oR(n,i)}class XK extends J2{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),H2(y))){const w=nR(y,n.current);w!==void 0&&(e[g]=w),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!rR.has(r)||e.length!==2)return;const[i,a]=e,u=T3(i),p=T3(a);if(u!==p)if(_3(u)&&_3(p))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else Wc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||qK(e[i]))&&r.push(i);r.length&&WK(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=Wc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([p,g])=>{e.getValue(p).set(g)}),this.resolveNoneKeyframes()}}function QK(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const lR=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function cR(t){return _O(t)&&"offsetHeight"in t}const R3=30,ZK=t=>!isNaN(parseFloat(t));class JK{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Ds.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ds.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZK(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new q2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Gr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ds.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>R3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,R3);return CO(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mf(t,e){return new JK(t,e)}const{schedule:nE}=PO(queueMicrotask,!1),Fa={x:!1,y:!1};function uR(){return Fa.x||Fa.y}function eG(t){return t==="x"||t==="y"?Fa[t]?null:(Fa[t]=!0,()=>{Fa[t]=!1}):Fa.x||Fa.y?null:(Fa.x=Fa.y=!0,()=>{Fa.x=Fa.y=!1})}function fR(t,e){const n=QK(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function I3(t){return!(t.pointerType==="touch"||uR())}function tG(t,e,n={}){const[r,i,a]=fR(t,n),u=p=>{if(!I3(p))return;const{target:g}=p,y=e(g,p);if(typeof y!="function"||!g)return;const w=S=>{I3(S)&&(y(S),g.removeEventListener("pointerleave",w))};g.addEventListener("pointerleave",w,i)};return r.forEach(p=>{p.addEventListener("pointerenter",u,i)}),a}const hR=(t,e)=>e?t===e?!0:hR(t,e.parentElement):!1,rE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,nG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function rG(t){return nG.has(t.tagName)||t.tabIndex!==-1}const I0=new WeakSet;function M3(t){return e=>{e.key==="Enter"&&t(e)}}function Fv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iG=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=M3(()=>{if(I0.has(n))return;Fv(n,"down");const i=M3(()=>{Fv(n,"up")}),a=()=>Fv(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function D3(t){return rE(t)&&!uR()}function sG(t,e,n={}){const[r,i,a]=fR(t,n),u=p=>{const g=p.currentTarget;if(!D3(p))return;I0.add(g);const y=e(g,p),w=(C,N)=>{window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",_),I0.has(g)&&I0.delete(g),D3(C)&&typeof y=="function"&&y(C,{success:N})},S=C=>{w(C,g===window||g===document||n.useGlobalTarget||hR(g,C.target))},_=C=>{w(C,!1)};window.addEventListener("pointerup",S,i),window.addEventListener("pointercancel",_,i)};return r.forEach(p=>{(n.useGlobalTarget?window:p).addEventListener("pointerdown",u,i),cR(p)&&(p.addEventListener("focus",y=>iG(y,i)),!rG(p)&&!p.hasAttribute("tabindex")&&(p.tabIndex=0))}),a}function dR(t){return _O(t)&&"ownerSVGElement"in t}function aG(t){return dR(t)&&t.tagName==="svg"}const ss=t=>!!(t&&t.getVelocity),oG=[...sR,Ri,uc],lG=t=>oG.find(iR(t)),iE=re.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function L3(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function cG(...t){return e=>{let n=!1;const r=t.map(i=>{const a=L3(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():L3(t[i],null)}}}}function uG(...t){return re.useCallback(cG(...t),t)}class fG extends re.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=cR(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function hG({children:t,isPresent:e,anchorX:n,root:r}){const i=re.useId(),a=re.useRef(null),u=re.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=re.useContext(iE),g=uG(a,t?.ref);return re.useInsertionEffect(()=>{const{width:y,height:w,top:S,left:_,right:C}=u.current;if(e||!a.current||!y||!w)return;const N=n==="left"?`left: ${_}`:`right: ${C}`;a.current.dataset.motionPopId=i;const R=document.createElement("style");p&&(R.nonce=p);const M=r??document.head;return M.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${w}px !important;
            ${N}px !important;
            top: ${S}px !important;
          }
        `),()=>{M.contains(R)&&M.removeChild(R)}},[e]),O.jsx(fG,{isPresent:e,childRef:a,sizeRef:u,children:re.cloneElement(t,{ref:g})})}const dG=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:u,anchorX:p,root:g})=>{const y=j2(pG),w=re.useId();let S=!0,_=re.useMemo(()=>(S=!1,{id:w,initial:e,isPresent:n,custom:i,onExitComplete:C=>{y.set(C,!0);for(const N of y.values())if(!N)return;r&&r()},register:C=>(y.set(C,!1),()=>y.delete(C))}),[n,y,r]);return a&&S&&(_={..._}),re.useMemo(()=>{y.forEach((C,N)=>y.set(N,!1))},[n]),re.useEffect(()=>{!n&&!y.size&&r&&r()},[n]),u==="popLayout"&&(t=O.jsx(hG,{isPresent:n,anchorX:p,root:g,children:t})),O.jsx($1.Provider,{value:_,children:t})};function pG(){return new Map}function pR(t=!0){const e=re.useContext($1);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=re.useId();re.useEffect(()=>{if(t)return i(a)},[t]);const u=re.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,u]:[!0]}const s0=t=>t.key||"";function k3(t){const e=[];return re.Children.forEach(t,n=>{re.isValidElement(n)&&e.push(n)}),e}const wo=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:u=!1,anchorX:p="left",root:g})=>{const[y,w]=pR(u),S=re.useMemo(()=>k3(t),[t]),_=u&&!y?[]:S.map(s0),C=re.useRef(!0),N=re.useRef(S),R=j2(()=>new Map),[M,L]=re.useState(S),[k,j]=re.useState(S);SO(()=>{C.current=!1,N.current=S;for(let F=0;F<k.length;F++){const B=s0(k[F]);_.includes(B)?R.delete(B):R.get(B)!==!0&&R.set(B,!1)}},[k,_.length,_.join("-")]);const $=[];if(S!==M){let F=[...S];for(let B=0;B<k.length;B++){const Z=k[B],le=s0(Z);_.includes(le)||(F.splice(B,0,Z),$.push(Z))}return a==="wait"&&$.length&&(F=$),j(k3(F)),L(S),null}const{forceRender:U}=re.useContext(k2);return O.jsx(O.Fragment,{children:k.map(F=>{const B=s0(F),Z=u&&!y?!1:S===k||_.includes(B),le=()=>{if(R.has(B))R.set(B,!0);else return;let Ne=!0;R.forEach(G=>{G||(Ne=!1)}),Ne&&(U?.(),j(N.current),u&&w?.(),r&&r())};return O.jsx(dG,{isPresent:Z,initial:!C.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:g,onExitComplete:Z?void 0:le,anchorX:p,children:F},B)})})},mR=re.createContext({strict:!1}),j3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Df={};for(const t in j3)Df[t]={isEnabled:e=>j3[t].some(n=>!!e[n])};function mG(t){for(const e in t)Df[e]={...Df[e],...t[e]}}const gG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function l1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||gG.has(t)}let gR=t=>!l1(t);function yG(t){typeof t=="function"&&(gR=e=>e.startsWith("on")?!l1(e):t(e))}try{yG(require("@emotion/is-prop-valid").default)}catch{}function vG(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(gR(i)||n===!0&&l1(i)||!e&&!l1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const V1=re.createContext({});function H1(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Td(t){return typeof t=="string"||Array.isArray(t)}const sE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],aE=["initial",...sE];function K1(t){return H1(t.animate)||aE.some(e=>Td(t[e]))}function yR(t){return!!(K1(t)||t.variants)}function bG(t,e){if(K1(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Td(n)?n:void 0,animate:Td(r)?r:void 0}}return t.inherit!==!1?e:{}}function wG(t){const{initial:e,animate:n}=bG(t,re.useContext(V1));return re.useMemo(()=>({initial:e,animate:n}),[P3(e),P3(n)])}function P3(t){return Array.isArray(t)?t.join(" "):t}function B3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(sn.test(t))t=parseFloat(t);else return t;const n=B3(t,e.target.x),r=B3(t,e.target.y);return`${n}% ${r}%`}},EG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=uc.parse(t);if(i.length>5)return r;const a=uc.createTransformer(t),u=typeof i[0]!="number"?1:0,p=n.x.scale*e.x,g=n.y.scale*e.y;i[0+u]/=p,i[1+u]/=g;const y=ti(p,g,.5);return typeof i[2+u]=="number"&&(i[2+u]/=y),typeof i[3+u]=="number"&&(i[3+u]/=y),a(i)}},xw={borderRadius:{...kh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kh,borderTopRightRadius:kh,borderBottomLeftRadius:kh,borderBottomRightRadius:kh,boxShadow:EG};function vR(t,{layout:e,layoutId:n}){return Vf.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!xw[t]||t==="opacity")}const SG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xG=$f.length;function _G(t,e,n){let r="",i=!0;for(let a=0;a<xG;a++){const u=$f[a],p=t[u];if(p===void 0)continue;let g=!0;if(typeof p=="number"?g=p===(u.startsWith("scale")?1:0):g=parseFloat(p)===0,!g||n){const y=lR(p,tE[u]);if(!g){i=!1;const w=SG[u]||u;r+=`${w}(${y}) `}n&&(e[u]=y)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function oE(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let u=!1,p=!1;for(const g in e){const y=e[g];if(Vf.has(g)){u=!0;continue}else if(UO(g)){i[g]=y;continue}else{const w=lR(y,tE[g]);g.startsWith("origin")?(p=!0,a[g]=w):r[g]=w}}if(e.transform||(u||n?r.transform=_G(e,t.transform,n):r.transform&&(r.transform="none")),p){const{originX:g="50%",originY:y="50%",originZ:w=0}=a;r.transformOrigin=`${g} ${y} ${w}`}}const lE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bR(t,e,n){for(const r in e)!ss(e[r])&&!vR(r,n)&&(t[r]=e[r])}function AG({transformTemplate:t},e){return re.useMemo(()=>{const n=lE();return oE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function CG(t,e){const n=t.style||{},r={};return bR(r,n,t),Object.assign(r,AG(t,e)),r}function NG(t,e){const n={},r=CG(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const TG={offset:"stroke-dashoffset",array:"stroke-dasharray"},OG={offset:"strokeDashoffset",array:"strokeDasharray"};function RG(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?TG:OG;t[a.offset]=sn.transform(-r);const u=sn.transform(e),p=sn.transform(n);t[a.array]=`${u} ${p}`}function wR(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:u=0,...p},g,y,w){if(oE(t,p,y),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:S,style:_}=t;S.transform&&(_.transform=S.transform,delete S.transform),(_.transform||S.transformOrigin)&&(_.transformOrigin=S.transformOrigin??"50% 50%",delete S.transformOrigin),_.transform&&(_.transformBox=w?.transformBox??"fill-box",delete S.transformBox),e!==void 0&&(S.x=e),n!==void 0&&(S.y=n),r!==void 0&&(S.scale=r),i!==void 0&&RG(S,i,a,u,!1)}const ER=()=>({...lE(),attrs:{}}),SR=t=>typeof t=="string"&&t.toLowerCase()==="svg";function IG(t,e,n,r){const i=re.useMemo(()=>{const a=ER();return wR(a,e,SR(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};bR(a,t.style,t),i.style={...a,...i.style}}return i}const MG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cE(t){return typeof t!="string"||t.includes("-")?!1:!!(MG.indexOf(t)>-1||/[A-Z]/u.test(t))}function DG(t,e,n,{latestValues:r},i,a=!1){const p=(cE(t)?IG:NG)(e,r,i,t),g=vG(e,typeof t=="string",a),y=t!==re.Fragment?{...g,...p,ref:n}:{},{children:w}=e,S=re.useMemo(()=>ss(w)?w.get():w,[w]);return re.createElement(t,{...y,children:S})}function U3(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function uE(t,e,n,r){if(typeof e=="function"){const[i,a]=U3(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=U3(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function M0(t){return ss(t)?t.get():t}function LG({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:kG(n,r,i,t),renderState:e()}}function kG(t,e,n,r){const i={},a=r(t,{});for(const _ in a)i[_]=M0(a[_]);let{initial:u,animate:p}=t;const g=K1(t),y=yR(t);e&&y&&!g&&t.inherit!==!1&&(u===void 0&&(u=e.initial),p===void 0&&(p=e.animate));let w=n?n.initial===!1:!1;w=w||u===!1;const S=w?p:u;if(S&&typeof S!="boolean"&&!H1(S)){const _=Array.isArray(S)?S:[S];for(let C=0;C<_.length;C++){const N=uE(t,_[C]);if(N){const{transitionEnd:R,transition:M,...L}=N;for(const k in L){let j=L[k];if(Array.isArray(j)){const $=w?j.length-1:0;j=j[$]}j!==null&&(i[k]=j)}for(const k in R)i[k]=R[k]}}}return i}const xR=t=>(e,n)=>{const r=re.useContext(V1),i=re.useContext($1),a=()=>LG(t,e,r,i);return n?a():j2(a)};function fE(t,e,n){const{style:r}=t,i={};for(const a in r)(ss(r[a])||e.style&&ss(e.style[a])||vR(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const jG=xR({scrapeMotionValuesFromProps:fE,createRenderState:lE});function _R(t,e,n){const r=fE(t,e,n);for(const i in t)if(ss(t[i])||ss(e[i])){const a=$f.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const PG=xR({scrapeMotionValuesFromProps:_R,createRenderState:ER}),BG=Symbol.for("motionComponentSymbol");function of(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function UG(t,e,n){return re.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):of(n)&&(n.current=r))},[e])}const hE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zG="framerAppearId",AR="data-"+hE(zG),CR=re.createContext({});function FG(t,e,n,r,i){const{visualElement:a}=re.useContext(V1),u=re.useContext(mR),p=re.useContext($1),g=re.useContext(iE).reducedMotion,y=re.useRef(null);r=r||u.renderer,!y.current&&r&&(y.current=r(t,{visualState:e,parent:a,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g}));const w=y.current,S=re.useContext(CR);w&&!w.projection&&i&&(w.type==="html"||w.type==="svg")&&qG(y.current,n,i,S);const _=re.useRef(!1);re.useInsertionEffect(()=>{w&&_.current&&w.update(n,p)});const C=n[AR],N=re.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return SO(()=>{w&&(_.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),w.scheduleRenderMicrotask(),N.current&&w.animationState&&w.animationState.animateChanges())}),re.useEffect(()=>{w&&(!N.current&&w.animationState&&w.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),N.current=!1),w.enteringChildren=void 0)}),w}function qG(t,e,n,r){const{layoutId:i,layout:a,drag:u,dragConstraints:p,layoutScroll:g,layoutRoot:y,layoutCrossfade:w}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:NR(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!u||p&&of(p),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:w,layoutScroll:g,layoutRoot:y})}function NR(t){if(t)return t.options.allowProjection!==!1?t.projection:NR(t.parent)}function qv(t,{forwardMotionProps:e=!1}={},n,r){n&&mG(n);const i=cE(t)?PG:jG;function a(p,g){let y;const w={...re.useContext(iE),...p,layoutId:$G(p)},{isStatic:S}=w,_=wG(p),C=i(p,S);if(!S&&P2){VG();const N=HG(w);y=N.MeasureLayout,_.visualElement=FG(t,C,w,r,N.ProjectionNode)}return O.jsxs(V1.Provider,{value:_,children:[y&&_.visualElement?O.jsx(y,{visualElement:_.visualElement,...w}):null,DG(t,p,UG(C,_.visualElement,g),C,S,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=re.forwardRef(a);return u[BG]=t,u}function $G({layoutId:t}){const e=re.useContext(k2).id;return e&&t!==void 0?e+"-"+t:t}function VG(t,e){re.useContext(mR).strict}function HG(t){const{drag:e,layout:n}=Df;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function KG(t,e){if(typeof Proxy>"u")return qv;const n=new Map,r=(a,u)=>qv(a,u,t,e),i=(a,u)=>r(a,u);return new Proxy(i,{get:(a,u)=>u==="create"?r:(n.has(u)||n.set(u,qv(u,void 0,t,e)),n.get(u))})}function TR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function GG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function YG(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function $v(t){return t===void 0||t===1}function _w({scale:t,scaleX:e,scaleY:n}){return!$v(t)||!$v(e)||!$v(n)}function Uc(t){return _w(t)||OR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function OR(t){return z3(t.x)||z3(t.y)}function z3(t){return t&&t!=="0%"}function c1(t,e,n){const r=t-n,i=e*r;return n+i}function F3(t,e,n,r,i){return i!==void 0&&(t=c1(t,i,r)),c1(t,n,r)+e}function Aw(t,e=0,n=1,r,i){t.min=F3(t.min,e,n,r,i),t.max=F3(t.max,e,n,r,i)}function RR(t,{x:e,y:n}){Aw(t.x,e.translate,e.scale,e.originPoint),Aw(t.y,n.translate,n.scale,n.originPoint)}const q3=.999999999999,$3=1.0000000000001;function WG(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,u;for(let p=0;p<i;p++){a=n[p],u=a.projectionDelta;const{visualElement:g}=a.options;g&&g.props.style&&g.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&cf(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,RR(t,u)),r&&Uc(a.latestValues)&&cf(t,a.latestValues))}e.x<$3&&e.x>q3&&(e.x=1),e.y<$3&&e.y>q3&&(e.y=1)}function lf(t,e){t.min=t.min+e,t.max=t.max+e}function V3(t,e,n,r,i=.5){const a=ti(t.min,t.max,i);Aw(t,e,n,a,r)}function cf(t,e){V3(t.x,e.x,e.scaleX,e.scale,e.originX),V3(t.y,e.y,e.scaleY,e.scale,e.originY)}function IR(t,e){return TR(YG(t.getBoundingClientRect(),e))}function XG(t,e,n){const r=IR(t,n),{scroll:i}=e;return i&&(lf(r.x,i.offset.x),lf(r.y,i.offset.y)),r}const H3=()=>({translate:0,scale:1,origin:0,originPoint:0}),uf=()=>({x:H3(),y:H3()}),K3=()=>({min:0,max:0}),ki=()=>({x:K3(),y:K3()}),Cw={current:null},MR={current:!1};function QG(){if(MR.current=!0,!!P2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Cw.current=t.matches;t.addEventListener("change",e),e()}else Cw.current=!1}const ZG=new WeakMap;function JG(t,e,n){for(const r in e){const i=e[r],a=n[r];if(ss(i))t.addValue(r,i);else if(ss(a))t.addValue(r,Mf(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(i):u.hasAnimated||u.set(i)}else{const u=t.getStaticValue(r);t.addValue(r,Mf(u!==void 0?u:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const G3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class eY{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:u},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=J2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Ds.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Gr.render(this.render,!1,!0))};const{latestValues:g,renderState:y}=u;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=y,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=p,this.blockInitialAnimation=!!a,this.isControllingVariants=K1(n),this.isVariantNode=yR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,...S}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in S){const C=S[_];g[_]!==void 0&&ss(C)&&C.set(g[_])}}mount(e){this.current=e,ZG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),MR.current||QG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cc(this.notifyUpdate),cc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vf.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Gr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Df){const n=Df[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ki()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<G3.length;r++){const i=G3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,u=e[a];u&&(this.propEventSubscriptions[i]=this.on(i,u))}this.prevMotionValues=JG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Mf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(xO(r)||AO(r))?r=parseFloat(r):!lG(r)&&uc.test(n)&&(r=oR(e,n)),this.setBaseTarget(e,ss(r)?r.get():r)),ss(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=uE(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ss(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new q2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){nE.render(this.render)}}class DR extends eY{constructor(){super(...arguments),this.KeyframeResolver=XK}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ss(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function LR(t,{style:e,vars:n},r,i){const a=t.style;let u;for(u in e)a[u]=e[u];i?.applyProjectionStyles(a,r);for(u in n)a.setProperty(u,n[u])}function tY(t){return window.getComputedStyle(t)}class nY extends DR{constructor(){super(...arguments),this.type="html",this.renderInstance=LR}readValueFromInstance(e,n){if(Vf.has(n))return this.projection?.isProjecting?gw(n):mK(e,n);{const r=tY(e),i=(UO(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return IR(e,n)}build(e,n,r){oE(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return fE(e,n,r)}}const kR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rY(t,e,n,r){LR(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(kR.has(i)?i:hE(i),e.attrs[i])}class iY extends DR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ki}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Vf.has(n)){const r=aR(n);return r&&r.default||0}return n=kR.has(n)?n:hE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return _R(e,n,r)}build(e,n,r){wR(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){rY(e,n,r,i)}mount(e){this.isSVGTag=SR(e.tagName),super.mount(e)}}const sY=(t,e)=>cE(t)?new iY(e):new nY(e,{allowProjection:t!==re.Fragment});function vf(t,e,n){const r=t.getProps();return uE(r,e,n!==void 0?n:r.custom,t)}const Nw=t=>Array.isArray(t);function aY(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Mf(n))}function oY(t){return Nw(t)?t[t.length-1]||0:t}function lY(t,e){const n=vf(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const u in a){const p=oY(a[u]);aY(t,u,p)}}function cY(t){return!!(ss(t)&&t.add)}function Tw(t,e){const n=t.getValue("willChange");if(cY(n))return n.add(e);if(!n&&ol.WillChange){const r=new ol.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function jR(t){return t.props[AR]}const uY=t=>t!==null;function fY(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(uY),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const hY={type:"spring",stiffness:500,damping:25,restSpeed:10},dY=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),pY={type:"keyframes",duration:.8},mY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gY=(t,{keyframes:e})=>e.length>2?pY:Vf.has(t)?t.startsWith("scale")?dY(e[1]):hY:mY;function yY({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:u,repeatDelay:p,from:g,elapsed:y,...w}){return!!Object.keys(w).length}const dE=(t,e,n,r={},i,a)=>u=>{const p=eE(r,t)||{},g=p.delay||r.delay||0;let{elapsed:y=0}=r;y=y-po(g);const w={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...p,delay:-y,onUpdate:_=>{e.set(_),p.onUpdate&&p.onUpdate(_)},onComplete:()=>{u(),p.onComplete&&p.onComplete()},name:t,motionValue:e,element:a?void 0:i};yY(p)||Object.assign(w,gY(t,w)),w.duration&&(w.duration=po(w.duration)),w.repeatDelay&&(w.repeatDelay=po(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let S=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(Ew(w),w.delay===0&&(S=!0)),(ol.instantAnimations||ol.skipAnimations)&&(S=!0,Ew(w),w.delay=0),w.allowFlatten=!p.type&&!p.ease,S&&!a&&e.get()!==void 0){const _=fY(w.keyframes,p);if(_!==void 0){Gr.update(()=>{w.onUpdate(_),w.onComplete()});return}}return p.isSync?new Z2(w):new BK(w)};function vY({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function PR(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:u,...p}=e;r&&(a=r);const g=[],y=i&&t.animationState&&t.animationState.getState()[i];for(const w in p){const S=t.getValue(w,t.latestValues[w]??null),_=p[w];if(_===void 0||y&&vY(y,w))continue;const C={delay:n,...eE(a||{},w)},N=S.get();if(N!==void 0&&!S.isAnimating&&!Array.isArray(_)&&_===N&&!C.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const L=jR(t);if(L){const k=window.MotionHandoffAnimation(L,w,Gr);k!==null&&(C.startTime=k,R=!0)}}Tw(t,w),S.start(dE(w,S,_,t.shouldReduceMotion&&rR.has(w)?{type:!1}:C,t,R));const M=S.animation;M&&g.push(M)}return u&&Promise.all(g).then(()=>{Gr.update(()=>{u&&lY(t,u)})}),g}function BR(t,e,n,r=0,i=1){const a=Array.from(t).sort((y,w)=>y.sortNodePosition(w)).indexOf(e),u=t.size,p=(u-1)*r;return typeof n=="function"?n(a,u):i===1?a*r:p-a*r}function Ow(t,e,n={}){const r=vf(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(PR(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(g=0)=>{const{delayChildren:y=0,staggerChildren:w,staggerDirection:S}=i;return bY(t,e,g,y,w,S,n)}:()=>Promise.resolve(),{when:p}=i;if(p){const[g,y]=p==="beforeChildren"?[a,u]:[u,a];return g().then(()=>y())}else return Promise.all([a(),u(n.delay)])}function bY(t,e,n=0,r=0,i=0,a=1,u){const p=[];for(const g of t.variantChildren)g.notify("AnimationStart",e),p.push(Ow(g,e,{...u,delay:n+(typeof r=="function"?0:r)+BR(t.variantChildren,g,r,i,a)}).then(()=>g.notify("AnimationComplete",e)));return Promise.all(p)}function wY(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Ow(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Ow(t,e,n);else{const i=typeof e=="function"?vf(t,e,n.custom):e;r=Promise.all(PR(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function UR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const EY=aE.length;function zR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?zR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<EY;n++){const r=aE[n],i=t.props[r];(Td(i)||i===!1)&&(e[r]=i)}return e}const SY=[...sE].reverse(),xY=sE.length;function _Y(t){return e=>Promise.all(e.map(({animation:n,options:r})=>wY(t,n,r)))}function AY(t){let e=_Y(t),n=Y3(),r=!0;const i=g=>(y,w)=>{const S=vf(t,w,g==="exit"?t.presenceContext?.custom:void 0);if(S){const{transition:_,transitionEnd:C,...N}=S;y={...y,...N,...C}}return y};function a(g){e=g(t)}function u(g){const{props:y}=t,w=zR(t.parent)||{},S=[],_=new Set;let C={},N=1/0;for(let M=0;M<xY;M++){const L=SY[M],k=n[L],j=y[L]!==void 0?y[L]:w[L],$=Td(j),U=L===g?k.isActive:null;U===!1&&(N=M);let F=j===w[L]&&j!==y[L]&&$;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),k.protectedKeys={...C},!k.isActive&&U===null||!j&&!k.prevProp||H1(j)||typeof j=="boolean")continue;const B=CY(k.prevProp,j);let Z=B||L===g&&k.isActive&&!F&&$||M>N&&$,le=!1;const Ne=Array.isArray(j)?j:[j];let G=Ne.reduce(i(L),{});U===!1&&(G={});const{prevResolvedValues:ce={}}=k,se={...ce,...G},Ee=de=>{Z=!0,_.has(de)&&(le=!0,_.delete(de)),k.needsAnimating[de]=!0;const we=t.getValue(de);we&&(we.liveStyle=!1)};for(const de in se){const we=G[de],Oe=ce[de];if(C.hasOwnProperty(de))continue;let pe=!1;Nw(we)&&Nw(Oe)?pe=!UR(we,Oe):pe=we!==Oe,pe?we!=null?Ee(de):_.add(de):we!==void 0&&_.has(de)?Ee(de):k.protectedKeys[de]=!0}k.prevProp=j,k.prevResolvedValues=G,k.isActive&&(C={...C,...G}),r&&t.blockInitialAnimation&&(Z=!1);const ue=F&&B;Z&&(!ue||le)&&S.push(...Ne.map(de=>{const we={type:L};if(typeof de=="string"&&r&&!ue&&t.manuallyAnimateOnMount&&t.parent){const{parent:Oe}=t,pe=vf(Oe,de);if(Oe.enteringChildren&&pe){const{delayChildren:K}=pe.transition||{};we.delay=BR(Oe.enteringChildren,t,K)}}return{animation:de,options:we}}))}if(_.size){const M={};if(typeof y.initial!="boolean"){const L=vf(t,Array.isArray(y.initial)?y.initial[0]:y.initial);L&&L.transition&&(M.transition=L.transition)}_.forEach(L=>{const k=t.getBaseTarget(L),j=t.getValue(L);j&&(j.liveStyle=!0),M[L]=k??null}),S.push({animation:M})}let R=!!S.length;return r&&(y.initial===!1||y.initial===y.animate)&&!t.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(S):Promise.resolve()}function p(g,y){if(n[g].isActive===y)return Promise.resolve();t.variantChildren?.forEach(S=>S.animationState?.setActive(g,y)),n[g].isActive=y;const w=u(g);for(const S in n)n[S].protectedKeys={};return w}return{animateChanges:u,setActive:p,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Y3()}}}function CY(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!UR(e,t):!1}function Pc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Y3(){return{animate:Pc(!0),whileInView:Pc(),whileHover:Pc(),whileTap:Pc(),whileDrag:Pc(),whileFocus:Pc(),exit:Pc()}}class gc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NY extends gc{constructor(e){super(e),e.animationState||(e.animationState=AY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();H1(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let TY=0;class OY extends gc{constructor(){super(...arguments),this.id=TY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const RY={animation:{Feature:NY},exit:{Feature:OY}};function Od(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function sp(t){return{point:{x:t.pageX,y:t.pageY}}}const IY=t=>e=>rE(e)&&t(e,sp(e));function id(t,e,n,r){return Od(t,e,IY(n),r)}const FR=1e-4,MY=1-FR,DY=1+FR,qR=.01,LY=0-qR,kY=0+qR;function ps(t){return t.max-t.min}function jY(t,e,n){return Math.abs(t-e)<=n}function W3(t,e,n,r=.5){t.origin=r,t.originPoint=ti(e.min,e.max,t.origin),t.scale=ps(n)/ps(e),t.translate=ti(n.min,n.max,t.origin)-t.originPoint,(t.scale>=MY&&t.scale<=DY||isNaN(t.scale))&&(t.scale=1),(t.translate>=LY&&t.translate<=kY||isNaN(t.translate))&&(t.translate=0)}function sd(t,e,n,r){W3(t.x,e.x,n.x,r?r.originX:void 0),W3(t.y,e.y,n.y,r?r.originY:void 0)}function X3(t,e,n){t.min=n.min+e.min,t.max=t.min+ps(e)}function PY(t,e,n){X3(t.x,e.x,n.x),X3(t.y,e.y,n.y)}function Q3(t,e,n){t.min=e.min-n.min,t.max=t.min+ps(e)}function u1(t,e,n){Q3(t.x,e.x,n.x),Q3(t.y,e.y,n.y)}function ya(t){return[t("x"),t("y")]}const $R=({current:t})=>t?t.ownerDocument.defaultView:null,Z3=(t,e)=>Math.abs(t-e);function BY(t,e){const n=Z3(t.x,e.x),r=Z3(t.y,e.y);return Math.sqrt(n**2+r**2)}class VR{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Hv(this.lastMoveEventInfo,this.history),C=this.startEvent!==null,N=BY(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!C&&!N)return;const{point:R}=_,{timestamp:M}=Qi;this.history.push({...R,timestamp:M});const{onStart:L,onMove:k}=this.handlers;C||(L&&L(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,_)},this.handlePointerMove=(_,C)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Vv(C,this.transformPagePoint),Gr.update(this.updatePoint,!0)},this.handlePointerUp=(_,C)=>{this.end();const{onEnd:N,onSessionEnd:R,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=Hv(_.type==="pointercancel"?this.lastMoveEventInfo:Vv(C,this.transformPagePoint),this.history);this.startEvent&&N&&N(_,L),R&&R(_,L)},!rE(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=u,this.contextWindow=i||window;const p=sp(e),g=Vv(p,this.transformPagePoint),{point:y}=g,{timestamp:w}=Qi;this.history=[{...y,timestamp:w}];const{onSessionStart:S}=n;S&&S(e,Hv(g,this.history)),this.removeListeners=np(id(this.contextWindow,"pointermove",this.handlePointerMove),id(this.contextWindow,"pointerup",this.handlePointerUp),id(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cc(this.updatePoint)}}function Vv(t,e){return e?{point:e(t.point)}:t}function J3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Hv({point:t},e){return{point:t,delta:J3(t,HR(e)),offset:J3(t,UY(e)),velocity:zY(e,.1)}}function UY(t){return t[0]}function HR(t){return t[t.length-1]}function zY(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=HR(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>po(e)));)n--;if(!r)return{x:0,y:0};const a=_a(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function FY(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ti(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ti(n,t,r.max):Math.min(t,n)),t}function eN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function qY(t,{top:e,left:n,bottom:r,right:i}){return{x:eN(t.x,n,i),y:eN(t.y,e,r)}}function tN(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $Y(t,e){return{x:tN(t.x,e.x),y:tN(t.y,e.y)}}function VY(t,e){let n=.5;const r=ps(t),i=ps(e);return i>r?n=Ad(e.min,e.max-r,t.min):r>i&&(n=Ad(t.min,t.max-i,e.min)),al(0,1,n)}function HY(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Rw=.35;function KY(t=Rw){return t===!1?t=0:t===!0&&(t=Rw),{x:nN(t,"left","right"),y:nN(t,"top","bottom")}}function nN(t,e,n){return{min:rN(t,e),max:rN(t,n)}}function rN(t,e){return typeof t=="number"?t:t[e]||0}const GY=new WeakMap;class YY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ki(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=S=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sp(S).point)},u=(S,_)=>{const{drag:C,dragPropagation:N,onDragStart:R}=this.getProps();if(C&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eG(C),!this.openDragLock))return;this.latestPointerEvent=S,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ya(L=>{let k=this.getAxisMotionValue(L).get()||0;if(mo.test(k)){const{projection:j}=this.visualElement;if(j&&j.layout){const $=j.layout.layoutBox[L];$&&(k=ps($)*(parseFloat(k)/100))}}this.originPoint[L]=k}),R&&Gr.postRender(()=>R(S,_)),Tw(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},p=(S,_)=>{this.latestPointerEvent=S,this.latestPanInfo=_;const{dragPropagation:C,dragDirectionLock:N,onDirectionLock:R,onDrag:M}=this.getProps();if(!C&&!this.openDragLock)return;const{offset:L}=_;if(N&&this.currentDirection===null){this.currentDirection=WY(L),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",_.point,L),this.updateAxis("y",_.point,L),this.visualElement.render(),M&&M(S,_)},g=(S,_)=>{this.latestPointerEvent=S,this.latestPanInfo=_,this.stop(S,_),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>ya(S=>this.getAnimationState(S)==="paused"&&this.getAxisMotionValue(S).animation?.play()),{dragSnapToOrigin:w}=this.getProps();this.panSession=new VR(e,{onSessionStart:a,onStart:u,onMove:p,onSessionEnd:g,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,distanceThreshold:r,contextWindow:$R(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:u}=i;this.startAnimation(u);const{onDragEnd:p}=this.getProps();p&&Gr.postRender(()=>p(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!a0(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=FY(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&of(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=qY(r.layoutBox,e):this.constraints=!1,this.elastic=KY(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ya(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=HY(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!of(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=XG(r,i.root,this.visualElement.getTransformPagePoint());let u=$Y(i.layout.layoutBox,a);if(n){const p=n(GG(u));this.hasMutatedConstraints=!!p,p&&(u=TR(p))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:p}=this.getProps(),g=this.constraints||{},y=ya(w=>{if(!a0(w,n,this.currentDirection))return;let S=g&&g[w]||{};u&&(S={min:0,max:0});const _=i?200:1e6,C=i?40:1e7,N={type:"inertia",velocity:r?e[w]:0,bounceStiffness:_,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...a,...S};return this.startAxisValueAnimation(w,N)});return Promise.all(y).then(p)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Tw(this.visualElement,e),r.start(dE(e,r,0,n,this.visualElement,!1))}stopAnimation(){ya(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ya(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ya(n=>{const{drag:r}=this.getProps();if(!a0(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:p}=i.layout.layoutBox[n];a.set(e[n]-ti(u,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!of(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ya(u=>{const p=this.getAxisMotionValue(u);if(p&&this.constraints!==!1){const g=p.get();i[u]=VY({min:g,max:g},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ya(u=>{if(!a0(u,e,null))return;const p=this.getAxisMotionValue(u),{min:g,max:y}=this.constraints[u];p.set(ti(g,y,i[u]))})}addListeners(){if(!this.visualElement.current)return;GY.set(this.visualElement,this);const e=this.visualElement.current,n=id(e,"pointerdown",g=>{const{drag:y,dragListener:w=!0}=this.getProps();y&&w&&this.start(g)}),r=()=>{const{dragConstraints:g}=this.getProps();of(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gr.read(r);const u=Od(window,"resize",()=>this.scalePositionWithinConstraints()),p=i.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:y})=>{this.isDragging&&y&&(ya(w=>{const S=this.getAxisMotionValue(w);S&&(this.originPoint[w]+=g[w].translate,S.set(S.get()+g[w].translate))}),this.visualElement.render())}));return()=>{u(),n(),a(),p&&p()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:u=Rw,dragMomentum:p=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:u,dragMomentum:p}}}function a0(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function WY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class XY extends gc{constructor(e){super(e),this.removeGroupControls=Na,this.removeListeners=Na,this.controls=new YY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Na}unmount(){this.removeGroupControls(),this.removeListeners()}}const iN=t=>(e,n)=>{t&&Gr.postRender(()=>t(e,n))};class QY extends gc{constructor(){super(...arguments),this.removePointerDownListener=Na}onPointerDown(e){this.session=new VR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$R(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:iN(e),onStart:iN(n),onMove:r,onEnd:(a,u)=>{delete this.session,i&&Gr.postRender(()=>i(a,u))}}}mount(){this.removePointerDownListener=id(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const D0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Kv=!1;class ZY extends re.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),Kv&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),D0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:u}=r;return u&&(u.isPresent=a,Kv=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||Gr.postRender(()=>{const p=u.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Kv=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function KR(t){const[e,n]=pR(),r=re.useContext(k2);return O.jsx(ZY,{...t,layoutGroup:r,switchLayoutGroup:re.useContext(CR),isPresent:e,safeToRemove:n})}function JY(t,e,n){const r=ss(t)?t:Mf(t);return r.start(dE("",r,e,n)),r.animation}const eW=(t,e)=>t.depth-e.depth;class tW{constructor(){this.children=[],this.isDirty=!1}add(e){B2(this.children,e),this.isDirty=!0}remove(e){U2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eW),this.isDirty=!1,this.children.forEach(e)}}function nW(t,e){const n=Ds.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(cc(r),t(a-e))};return Gr.setup(r,!0),()=>cc(r)}const GR=["TopLeft","TopRight","BottomLeft","BottomRight"],rW=GR.length,sN=t=>typeof t=="string"?parseFloat(t):t,aN=t=>typeof t=="number"||sn.test(t);function iW(t,e,n,r,i,a){i?(t.opacity=ti(0,n.opacity??1,sW(r)),t.opacityExit=ti(e.opacity??1,0,aW(r))):a&&(t.opacity=ti(e.opacity??1,n.opacity??1,r));for(let u=0;u<rW;u++){const p=`border${GR[u]}Radius`;let g=oN(e,p),y=oN(n,p);if(g===void 0&&y===void 0)continue;g||(g=0),y||(y=0),g===0||y===0||aN(g)===aN(y)?(t[p]=Math.max(ti(sN(g),sN(y),r),0),(mo.test(y)||mo.test(g))&&(t[p]+="%")):t[p]=y}(e.rotate||n.rotate)&&(t.rotate=ti(e.rotate||0,n.rotate||0,r))}function oN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sW=YR(0,.5,DO),aW=YR(.5,.95,Na);function YR(t,e,n){return r=>r<t?0:r>e?1:n(Ad(t,e,r))}function lN(t,e){t.min=e.min,t.max=e.max}function Ba(t,e){lN(t.x,e.x),lN(t.y,e.y)}function cN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function uN(t,e,n,r,i){return t-=e,t=c1(t,1/n,r),i!==void 0&&(t=c1(t,1/i,r)),t}function oW(t,e=0,n=1,r=.5,i,a=t,u=t){if(mo.test(e)&&(e=parseFloat(e),e=ti(u.min,u.max,e/100)-u.min),typeof e!="number")return;let p=ti(a.min,a.max,r);t===a&&(p-=e),t.min=uN(t.min,e,n,p,i),t.max=uN(t.max,e,n,p,i)}function fN(t,e,[n,r,i],a,u){oW(t,e[n],e[r],e[i],e.scale,a,u)}const lW=["x","scaleX","originX"],cW=["y","scaleY","originY"];function hN(t,e,n,r){fN(t.x,e,lW,n?n.x:void 0,r?r.x:void 0),fN(t.y,e,cW,n?n.y:void 0,r?r.y:void 0)}function dN(t){return t.translate===0&&t.scale===1}function WR(t){return dN(t.x)&&dN(t.y)}function pN(t,e){return t.min===e.min&&t.max===e.max}function uW(t,e){return pN(t.x,e.x)&&pN(t.y,e.y)}function mN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function XR(t,e){return mN(t.x,e.x)&&mN(t.y,e.y)}function gN(t){return ps(t.x)/ps(t.y)}function yN(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class fW{constructor(){this.members=[]}add(e){B2(this.members,e),e.scheduleRender()}remove(e){if(U2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hW(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,u=n?.z||0;if((i||a||u)&&(r=`translate3d(${i}px, ${a}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:y,rotate:w,rotateX:S,rotateY:_,skewX:C,skewY:N}=n;y&&(r=`perspective(${y}px) ${r}`),w&&(r+=`rotate(${w}deg) `),S&&(r+=`rotateX(${S}deg) `),_&&(r+=`rotateY(${_}deg) `),C&&(r+=`skewX(${C}deg) `),N&&(r+=`skewY(${N}deg) `)}const p=t.x.scale*e.x,g=t.y.scale*e.y;return(p!==1||g!==1)&&(r+=`scale(${p}, ${g})`),r||"none"}const Gv=["","X","Y","Z"],dW=1e3;let pW=0;function Yv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function QR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=jR(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gr,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&QR(r)}function ZR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(u={},p=e?.()){this.id=pW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(yW),this.nodes.forEach(EW),this.nodes.forEach(SW),this.nodes.forEach(vW)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new tW)}addEventListener(u,p){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new q2),this.eventHandlers.get(u).add(p)}notifyListeners(u,...p){const g=this.eventHandlers.get(u);g&&g.notify(...p)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=dR(u)&&!aG(u),this.instance=u;const{layoutId:p,layout:g,visualElement:y}=this.options;if(y&&!y.current&&y.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||p)&&(this.isLayoutDirty=!0),t){let w,S=0;const _=()=>this.root.updateBlockedByResize=!1;Gr.read(()=>{S=window.innerWidth}),t(u,()=>{const C=window.innerWidth;C!==S&&(S=C,this.root.updateBlockedByResize=!0,w&&w(),w=nW(_,250),D0.hasAnimatedSinceResize&&(D0.hasAnimatedSinceResize=!1,this.nodes.forEach(wN)))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&y&&(p||g)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:S,hasRelativeLayoutChanged:_,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||y.getDefaultTransition()||NW,{onLayoutAnimationStart:R,onLayoutAnimationComplete:M}=y.getProps(),L=!this.targetLayout||!XR(this.targetLayout,C),k=!S&&_;if(this.options.layoutRoot||this.resumeFrom||k||S&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...eE(N,"layout"),onPlay:R,onComplete:M};(y.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(w,k)}else S||wN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xW),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const S=this.path[w];S.shouldResetTransform=!0,S.updateScroll("snapshot"),S.options.layoutRoot&&S.willUpdate(!1)}const{layoutId:p,layout:g}=this.options;if(p===void 0&&!g)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(bN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wW),this.nodes.forEach(mW),this.nodes.forEach(gW)):this.nodes.forEach(bN),this.clearAllSnapshots();const p=Ds.now();Qi.delta=al(0,1e3/60,p-Qi.timestamp),Qi.timestamp=p,Qi.isProcessing=!0,jv.update.process(Qi),jv.preRender.process(Qi),jv.render.process(Qi),Qi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bW),this.sharedNodes.forEach(_W)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ps(this.snapshot.measuredBox.x)&&!ps(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ki(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(p=!1),p&&this.instance){const g=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:g,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!WR(this.projectionDelta),g=this.getTransformTemplate(),y=g?g(this.latestValues,""):void 0,w=y!==this.prevTransformTemplateValue;u&&this.instance&&(p||Uc(this.latestValues)||w)&&(i(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const p=this.measurePageBox();let g=this.removeElementScroll(p);return u&&(g=this.removeTransform(g)),TW(g),{animationId:this.root.animationId,measuredBox:p,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return ki();const p=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(OW))){const{scroll:y}=this.root;y&&(lf(p.x,y.offset.x),lf(p.y,y.offset.y))}return p}removeElementScroll(u){const p=ki();if(Ba(p,u),this.scroll?.wasRoot)return p;for(let g=0;g<this.path.length;g++){const y=this.path[g],{scroll:w,options:S}=y;y!==this.root&&w&&S.layoutScroll&&(w.wasRoot&&Ba(p,u),lf(p.x,w.offset.x),lf(p.y,w.offset.y))}return p}applyTransform(u,p=!1){const g=ki();Ba(g,u);for(let y=0;y<this.path.length;y++){const w=this.path[y];!p&&w.options.layoutScroll&&w.scroll&&w!==w.root&&cf(g,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),Uc(w.latestValues)&&cf(g,w.latestValues)}return Uc(this.latestValues)&&cf(g,this.latestValues),g}removeTransform(u){const p=ki();Ba(p,u);for(let g=0;g<this.path.length;g++){const y=this.path[g];if(!y.instance||!Uc(y.latestValues))continue;_w(y.latestValues)&&y.updateSnapshot();const w=ki(),S=y.measurePageBox();Ba(w,S),hN(p,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,w)}return Uc(this.latestValues)&&hN(p,this.latestValues),p}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==p;if(!(u||g&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:S}=this.options;if(!this.layout||!(w||S))return;this.resolvedRelativeTargetAt=Qi.timestamp;const _=this.getClosestProjectingParent();_&&this.linkedParentVersion!==_.layoutVersion&&!_.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(_&&_.layout?this.createRelativeTarget(_,this.layout.layoutBox,_.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ki(),this.targetWithTransforms=ki()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),PY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ba(this.target,this.layout.layoutBox),RR(this.target,this.targetDelta)):Ba(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?this.createRelativeTarget(_,this.target,_.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||_w(this.parent.latestValues)||OR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,p,g){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ki(),this.relativeTargetOrigin=ki(),u1(this.relativeTargetOrigin,p,g),Ba(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const u=this.getLead(),p=!!this.resumingFrom||this!==u;let g=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(g=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Qi.timestamp&&(g=!1),g)return;const{layout:y,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||w))return;Ba(this.layoutCorrected,this.layout.layoutBox);const S=this.treeScale.x,_=this.treeScale.y;WG(this.layoutCorrected,this.treeScale,this.path,p),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=ki());const{target:C}=u;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cN(this.prevProjectionDelta.x,this.projectionDelta.x),cN(this.prevProjectionDelta.y,this.projectionDelta.y)),sd(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==S||this.treeScale.y!==_||!yN(this.projectionDelta.x,this.prevProjectionDelta.x)||!yN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uf(),this.projectionDelta=uf(),this.projectionDeltaWithTransform=uf()}setAnimationOrigin(u,p=!1){const g=this.snapshot,y=g?g.latestValues:{},w={...this.latestValues},S=uf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const _=ki(),C=g?g.source:void 0,N=this.layout?this.layout.source:void 0,R=C!==N,M=this.getStack(),L=!M||M.members.length<=1,k=!!(R&&!L&&this.options.crossfade===!0&&!this.path.some(CW));this.animationProgress=0;let j;this.mixTargetDelta=$=>{const U=$/1e3;EN(S.x,u.x,U),EN(S.y,u.y,U),this.setTargetDelta(S),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(u1(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AW(this.relativeTarget,this.relativeTargetOrigin,_,U),j&&uW(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=ki()),Ba(j,this.relativeTarget)),R&&(this.animationValues=w,iW(w,y,this.latestValues,U,k,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gr.update(()=>{D0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Mf(0)),this.currentAnimation=JY(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),u.onUpdate&&u.onUpdate(p)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:p,target:g,layout:y,latestValues:w}=u;if(!(!p||!g||!y)){if(this!==u&&this.layout&&y&&JR(this.options.animationType,this.layout.layoutBox,y.layoutBox)){g=this.target||ki();const S=ps(this.layout.layoutBox.x);g.x.min=u.target.x.min,g.x.max=g.x.min+S;const _=ps(this.layout.layoutBox.y);g.y.min=u.target.y.min,g.y.max=g.y.min+_}Ba(p,g),cf(p,w),sd(this.projectionDeltaWithTransform,this.layoutCorrected,p,w)}}registerSharedNode(u,p){this.sharedNodes.has(u)||this.sharedNodes.set(u,new fW),this.sharedNodes.get(u).add(p);const y=p.options.initialPromotionConfig;p.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(p):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:p,preserveFollowOpacity:g}={}){const y=this.getStack();y&&y.promote(this,g),u&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let p=!1;const{latestValues:g}=u;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(p=!0),!p)return;const y={};g.z&&Yv("z",u,y,this.animationValues);for(let w=0;w<Gv.length;w++)Yv(`rotate${Gv[w]}`,u,y,this.animationValues),Yv(`skew${Gv[w]}`,u,y,this.animationValues);u.render();for(const w in y)u.setStaticValue(w,y[w]),this.animationValues&&(this.animationValues[w]=y[w]);u.scheduleRender()}applyProjectionStyles(u,p){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=M0(p?.pointerEvents)||"",u.transform=g?g(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=M0(p?.pointerEvents)||""),this.hasProjected&&!Uc(this.latestValues)&&(u.transform=g?g({},""):"none",this.hasProjected=!1);return}u.visibility="";const w=y.animationValues||y.latestValues;this.applyTransformsToTarget();let S=hW(this.projectionDeltaWithTransform,this.treeScale,w);g&&(S=g(w,S)),u.transform=S;const{x:_,y:C}=this.projectionDelta;u.transformOrigin=`${_.origin*100}% ${C.origin*100}% 0`,y.animationValues?u.opacity=y===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:u.opacity=y===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const N in xw){if(w[N]===void 0)continue;const{correct:R,applyTo:M,isCSSVariable:L}=xw[N],k=S==="none"?w[N]:R(w[N],y);if(M){const j=M.length;for(let $=0;$<j;$++)u[M[$]]=k}else L?this.options.visualElement.renderState.vars[N]=k:u[N]=k}this.options.layoutId&&(u.pointerEvents=y===this?M0(p?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(vN),this.root.sharedNodes.clear()}}}function mW(t){t.updateLayout()}function gW(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?ya(w=>{const S=a?e.measuredBox[w]:e.layoutBox[w],_=ps(S);S.min=n[w].min,S.max=S.min+_}):JR(i,e.layoutBox,n)&&ya(w=>{const S=a?e.measuredBox[w]:e.layoutBox[w],_=ps(n[w]);S.max=S.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[w].max=t.relativeTarget[w].min+_)});const u=uf();sd(u,n,e.layoutBox);const p=uf();a?sd(p,t.applyTransform(r,!0),e.measuredBox):sd(p,n,e.layoutBox);const g=!WR(u);let y=!1;if(!t.resumeFrom){const w=t.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:S,layout:_}=w;if(S&&_){const C=ki();u1(C,e.layoutBox,S.layoutBox);const N=ki();u1(N,n,_.layoutBox),XR(C,N)||(y=!0),w.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=C,t.relativeParent=w)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:p,layoutDelta:u,hasLayoutChanged:g,hasRelativeLayoutChanged:y})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function yW(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bW(t){t.clearSnapshot()}function vN(t){t.clearMeasurements()}function bN(t){t.isLayoutDirty=!1}function wW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wN(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function EW(t){t.resolveTargetDelta()}function SW(t){t.calcProjection()}function xW(t){t.resetSkewAndRotation()}function _W(t){t.removeLeadSnapshot()}function EN(t,e,n){t.translate=ti(e.translate,0,n),t.scale=ti(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function SN(t,e,n,r){t.min=ti(e.min,n.min,r),t.max=ti(e.max,n.max,r)}function AW(t,e,n,r){SN(t.x,e.x,n.x,r),SN(t.y,e.y,n.y,r)}function CW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const NW={duration:.45,ease:[.4,0,.1,1]},xN=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_N=xN("applewebkit/")&&!xN("chrome/")?Math.round:Na;function AN(t){t.min=_N(t.min),t.max=_N(t.max)}function TW(t){AN(t.x),AN(t.y)}function JR(t,e,n){return t==="position"||t==="preserve-aspect"&&!jY(gN(e),gN(n),.2)}function OW(t){return t!==t.root&&t.scroll?.wasRoot}const RW=ZR({attachResizeListener:(t,e)=>Od(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wv={current:void 0},eI=ZR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wv.current){const t=new RW({});t.mount(window),t.setOptions({layoutScroll:!0}),Wv.current=t}return Wv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),IW={pan:{Feature:QY},drag:{Feature:XY,ProjectionNode:eI,MeasureLayout:KR}};function CN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Gr.postRender(()=>a(e,sp(e)))}class MW extends gc{mount(){const{current:e}=this.node;e&&(this.unmount=tG(e,(n,r)=>(CN(this.node,r,"Start"),i=>CN(this.node,i,"End"))))}unmount(){}}class DW extends gc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=np(Od(this.node.current,"focus",()=>this.onFocus()),Od(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NN(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Gr.postRender(()=>a(e,sp(e)))}class LW extends gc{mount(){const{current:e}=this.node;e&&(this.unmount=sG(e,(n,r)=>(NN(this.node,r,"Start"),(i,{success:a})=>NN(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Iw=new WeakMap,Xv=new WeakMap,kW=t=>{const e=Iw.get(t.target);e&&e(t)},jW=t=>{t.forEach(kW)};function PW({root:t,...e}){const n=t||document;Xv.has(n)||Xv.set(n,{});const r=Xv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(jW,{root:t,...e})),r[i]}function BW(t,e,n){const r=PW(e);return Iw.set(t,n),r.observe(t),()=>{Iw.delete(t),r.unobserve(t)}}const UW={some:0,all:1};class zW extends gc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UW[i]},p=g=>{const{isIntersecting:y}=g;if(this.isInView===y||(this.isInView=y,a&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:w,onViewportLeave:S}=this.node.getProps(),_=y?w:S;_&&_(g)};return BW(this.node.current,u,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(FW(e,n))&&this.startObserver()}unmount(){}}function FW({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const qW={inView:{Feature:zW},tap:{Feature:LW},focus:{Feature:DW},hover:{Feature:MW}},$W={layout:{ProjectionNode:eI,MeasureLayout:KR}},VW={...RY,...qW,...IW,...$W},on=KG(VW,sY);function Mw({length:t=4,onSubmit:e,onCancel:n,title:r="Enter PIN",description:i="Secure your profile"}){const[a,u]=re.useState(""),p=y=>{if(a.length<t){const w=a+y;u(w),w.length===t&&setTimeout(()=>e(w),300)}},g=()=>{u(y=>y.slice(0,-1))};return re.useEffect(()=>{const y=w=>{/\d/.test(w.key)?p(parseInt(w.key)):w.key==="Backspace"&&g()};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[a]),O.jsxs("div",{className:"flex flex-col items-center space-y-8 w-full max-w-sm mx-auto p-6 bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl",children:[O.jsxs("div",{className:"text-center space-y-2",children:[O.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-fuchsia-400 text-transparent bg-clip-text drop-shadow-[0_0_10px_rgba(34,211,238,0.5)]",children:r}),O.jsx("p",{className:"text-slate-400 text-sm font-medium",children:i})]}),O.jsx("div",{className:"flex gap-4 mb-4",children:[...Array(t)].map((y,w)=>O.jsx(on.div,{initial:!1,animate:{scale:w<a.length?1.3:1,backgroundColor:w<a.length?"#22d3ee":"rgba(255,255,255,0.1)",boxShadow:w<a.length?"0 0 15px #22d3ee":"none"},className:"w-4 h-4 rounded-full transition-colors duration-200"},w))}),O.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full",children:[[1,2,3,4,5,6,7,8,9].map(y=>O.jsx("button",{onClick:()=>p(y),className:`h-16 w-16 rounded-2xl bg-white/5 border border-white/10 text-2xl font-bold text-white shadow-lg active:scale-95 transition-all outline-none \r
                                   hover:bg-cyan-500/20 hover:border-cyan-500/50 hover:text-cyan-400 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)]`,children:y},y)),O.jsx("div",{}),O.jsx("button",{onClick:()=>p(0),className:`h-16 w-16 rounded-2xl bg-white/5 border border-white/10 text-2xl font-bold text-white shadow-lg active:scale-95 transition-all outline-none \r
                               hover:bg-cyan-500/20 hover:border-cyan-500/50 hover:text-cyan-400 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)]`,children:"0"}),O.jsx("button",{onClick:g,className:`h-16 w-16 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-red-400 shadow-lg active:scale-95 transition-all outline-none \r
                               hover:bg-red-500/20 hover:border-red-500/50 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)]`,children:O.jsx(WL,{className:"w-6 h-6"})})]}),n&&O.jsx("button",{onClick:n,className:"text-slate-500 text-sm hover:text-white transition-colors uppercase tracking-wider font-semibold",children:"Cancel"})]})}function HW(){const{login:t,currentUser:e}=ws(),{db:n}=Ui(),r=Mi(),[i,a]=re.useState([]),[u,p]=re.useState(null),[g,y]=re.useState(0),[w,S]=re.useState(!0);re.useEffect(()=>{e&&(e.role==="teacher"?r("/teacher"):r("/dashboard"))},[e,r]),re.useEffect(()=>{if(!n)return;const N=n.users.find().sort({createdAt:"desc"}).$.subscribe(R=>{a(R.map(M=>M.toJSON()))});return n.content.count().exec().then(R=>{y(R),S(!1)}),()=>N.unsubscribe()},[n]);const _=async N=>{if(!u)return;await t(u.id,N)?u.role==="teacher"?r("/teacher"):r("/dashboard"):alert("Incorrect PIN! Try again.")},C=async()=>{if(n){S(!0);try{const{seedContent:N}=await A1(async()=>{const{seedContent:M}=await Promise.resolve().then(()=>aV);return{seedContent:M}},void 0);await N(n.content);const R=await n.content.count().exec();y(R),alert("Content Loaded: "+R)}catch(N){alert("Seeding failed: "+N)}S(!1)}};return O.jsxs("div",{className:"flex flex-col items-center justify-start min-h-full w-full p-6 pt-10 pb-32 relative text-center",children:[O.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden pointer-events-none z-0 bg-[#030712]",children:[O.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(at_0%_0%,rgba(14,165,233,0.15)_0px,transparent_50%),radial-gradient(at_100%_0%,rgba(99,102,241,0.15)_0px,transparent_50%),radial-gradient(at_100%_100%,rgba(217,70,239,0.15)_0px,transparent_50%),radial-gradient(at_0%_100%,rgba(14,165,233,0.1)_0px,transparent_50%)]"}),O.jsx("div",{className:"absolute top-0 left-0 w-full h-[40%] overflow-hidden pointer-events-none z-0",children:[...Array(50)].map((N,R)=>O.jsx(on.div,{initial:{opacity:0,y:0,scale:.5},animate:{opacity:[0,.4,0],y:-100,rotate:Math.random()*360,x:Math.random()*40-20+"px"},transition:{duration:Math.random()*5+5,repeat:1/0,delay:Math.random()*5,ease:"linear"},className:"absolute text-primary-400/10 font-mono font-bold text-2xl select-none",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},children:["A","B","C","1","2","3","+","","","?","",""][Math.floor(Math.random()*12)]},R))}),O.jsx("div",{className:"absolute top-[-10%] left-[20%] w-[500px] h-[500px] bg-primary-500/10 rounded-full blur-[100px] animate-pulse-slow"}),O.jsx("div",{className:"absolute bottom-[-10%] right-[20%] w-[500px] h-[500px] bg-accent-500/10 rounded-full blur-[100px] animate-pulse-slow delay-1000"})]}),O.jsxs("div",{className:" relative z-10 w-full max-w-5xl mx-auto flex flex-col items-center gap-12",children:[O.jsx("div",{className:"relative w-full max-w-lg mx-auto flex flex-col items-center",children:O.jsxs(on.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"space-y-0 relative z-10",children:[O.jsxs("div",{className:"flex justify-center relative",children:[O.jsx("div",{className:"absolute top-[60%] left-1/2 -translate-x-1/2 w-48 h-28 bg-[conic-gradient(from_180deg_at_50%_0%,rgba(251,191,36,0.2)_0deg,transparent_45deg,transparent_315deg,rgba(251,191,36,0.2)_360deg)] blur-xl pointer-events-none -z-10 mix-blend-screen [mask-image:linear-gradient(to_bottom,black_50%,transparent)]"}),O.jsx(on.div,{whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300},className:"",children:O.jsx(hH,{className:"w-32 h-32"})})]}),O.jsx("h1",{className:"text-4xl md:text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-amber-200 via-white to-cyan-200 drop-shadow-[0_4px_15px_rgba(251,191,36,0.3)] -mt-4 pb-4",children:"GramSiksha"}),g===0&&!w&&O.jsx("button",{onClick:C,className:"opacity-0 hover:opacity-100 text-xs text-slate-700 bg-slate-900 px-2 py-1 rounded",children:"Initialize"})]})}),O.jsxs(on.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.6},className:"w-full max-w-md mx-auto space-y-3",children:[O.jsxs("button",{onClick:()=>r("/create-profile"),className:"w-full group relative overflow-hidden rounded-2xl bg-slate-900/50 p-[1px] transition-all hover:scale-[1.02]",children:[O.jsx("span",{className:"absolute inset-[-100%] animate-[spin_3s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#0ea5e9_0%,#030712_50%,#0ea5e9_100%)] opacity-50"}),O.jsxs("span",{className:"relative flex w-full cursor-pointer items-center justify-center gap-3 rounded-2xl bg-slate-950/90 px-6 py-4 text-sm font-bold text-white backdrop-blur-3xl transition-colors hover:bg-slate-900/80",children:[O.jsx(Bk,{className:"h-5 w-5 text-cyan-400"}),"Create New Profile"]})]}),i.length>0&&O.jsxs("div",{className:"relative py-4",children:[O.jsx("div",{className:"absolute inset-0 flex items-center",children:O.jsx("span",{className:"w-full border-t border-white/5"})}),O.jsx("div",{className:"relative flex justify-center text-xs uppercase tracking-widest",children:O.jsx("span",{className:"bg-[#030712] px-2 text-slate-500",children:"Or continue as"})})]}),O.jsx("div",{className:"space-y-4 w-full pb-4",children:i.map(N=>{const R=N.role==="teacher",M=R?"hover:shadow-[0_0_20px_rgba(168,85,247,0.5)] hover:border-purple-500/50":"hover:shadow-[0_0_20px_rgba(6,182,212,0.5)] hover:border-cyan-500/50",L=R?"group-hover:text-purple-300":"group-hover:text-cyan-300",k=R?"bg-purple-500/10 text-purple-400 border-purple-500/20":"bg-cyan-500/10 text-cyan-400 border-cyan-500/20";return O.jsxs("div",{onClick:()=>p(N),className:`group relative flex items-center gap-4 p-4 rounded-xl bg-slate-900/90 border border-white/10 transition-all duration-300 cursor-pointer hover:-translate-y-1 hover:scale-[1.02] shadow-lg ${M}`,children:[O.jsx("div",{className:`absolute inset-0 rounded-xl opacity-0 group-hover:opacity-20 transition-opacity duration-500 bg-gradient-to-r ${R?"from-purple-600 via-transparent to-transparent":"from-cyan-600 via-transparent to-transparent"}`}),O.jsx("div",{className:`relative z-10 w-14 h-14 rounded-lg flex items-center justify-center text-2xl shadow-inner border border-white/5 bg-slate-950 transition-colors duration-300 ${R?"group-hover:border-purple-500/30":"group-hover:border-cyan-500/30"}`,children:O.jsx("div",{className:`${R?"text-purple-400":"text-cyan-400"}`,children:R?O.jsx(Sf,{className:"w-7 h-7"}):O.jsx(e5,{className:"w-7 h-7"})})}),O.jsx("div",{className:"relative z-10 flex-1 text-left",children:O.jsx("div",{className:`font-bold text-slate-100 text-lg transition-colors duration-300 ${L}`,children:N.name})}),O.jsx("div",{className:"relative z-10 flex items-center",children:O.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border ${k}`,children:N.role})}),O.jsx("div",{className:`relative z-10 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 ${R?"text-purple-400":"text-cyan-400"}`,children:O.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},N.id)})})]})]}),O.jsx(wo,{children:u&&O.jsx(on.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4",children:O.jsxs(on.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-sm bg-[#0a0a0a] border border-white/10 rounded-3xl p-8 relative shadow-2xl ring-1 ring-white/10",children:[O.jsx("button",{onClick:()=>p(null),className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-white rounded-full hover:bg-white/5 transition-colors",children:O.jsx($d,{className:"w-5 h-5"})}),O.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[O.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-900 border-2 border-white/10 flex items-center justify-center text-5xl mb-4 shadow-xl shadow-primary-500/10",children:u.avatarId}),O.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome back!"}),O.jsxs("p",{className:"text-slate-400 text-sm",children:["Enter PIN for ",u.name]})]}),O.jsx(Mw,{onSubmit:_,title:"",description:""})]})})})]})}const oo=({label:t,value:e,onChange:n,type:r="text",placeholder:i,required:a=!0})=>O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:t}),O.jsx("input",{type:r,value:e,onChange:u=>n(u.target.value),placeholder:i,required:a,className:"w-full bg-[#333] border-none rounded text-white p-3 focus:ring-2 focus:ring-red-600 focus:outline-none placeholder:text-slate-500 transition-all font-medium"})]});function KW(){const t=Mi(),{signup:e}=ws(),{db:n}=Ui(),[r,i]=re.useState("role"),[a,u]=re.useState(!1),[p,g]=re.useState({role:"student",name:"",classId:"",birthdate:"",rollNo:"",medium:"english",schoolName:"",villageName:"",state:"",country:"India",ipAddress:"",password:""}),y=(M,L)=>{g(k=>({...k,[M]:L}))},w=M=>{g(L=>({...L,role:M})),i(M==="student"?"student-form":"teacher-form")},[S,_]=re.useState(""),C=M=>{M.preventDefault(),i("student-join-class")},N=async()=>{if(!(!n||!S||S.length<6)){u(!0);try{const L=(await n.classes.find().exec()).find(k=>k.get("code")===S);L?(g(k=>({...k,teacherClassId:L.get("id"),classId:L.get("standard").replace(/\D/g,""),medium:L.get("medium")})),i("student-password")):alert("Invalid Class Code. Please try again.")}catch(M){console.error(M),alert("Error joining class")}finally{u(!1)}}},R=M=>{M.preventDefault(),i("teacher-password")};return O.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4 font-sans relative overflow-hidden",children:[O.jsx("div",{className:"absolute inset-0 bg-[url('https://assets.nflxext.com/ffe/siteui/vlv3/ab180a27-b661-44cd-9579-9fb69939e338/f2e6e187-5f78-4389-9d7a-75a7b2123f95/IN-en-20231009-popsignuptwoweeks-perspective_alpha_website_medium.jpg')] opacity-10 bg-cover bg-center pointer-events-none"}),O.jsx("div",{className:"absolute inset-0 bg-black/80 pointer-events-none"}),O.jsxs(on.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative z-10 w-full max-w-[450px] bg-black/75 backdrop-blur-md rounded-xl p-12 py-16 border border-white/10 shadow-2xl",children:[r!=="role"&&O.jsx("button",{onClick:()=>i("role"),className:"absolute top-6 left-6 text-slate-400 hover:text-white transition-colors",children:O.jsx(gs,{className:"w-5 h-5"})}),r!=="teacher-password"&&r!=="student-password"&&O.jsxs("h1",{className:"text-3xl font-bold text-white mb-8 text-center tracking-tight",children:[r==="role"&&"Who's Learning?",r==="student-form"&&"Student Profile",r==="teacher-form"&&"Teacher Profile"]}),O.jsxs(wo,{mode:"wait",children:[r==="role"&&O.jsxs(on.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid gap-4",children:[O.jsxs("button",{onClick:()=>w("student"),className:"group flex items-center gap-6 p-6 bg-[#333] hover:bg-[#444] rounded-lg transition-all border border-transparent hover:border-white/20",children:[O.jsx("div",{className:"p-3 bg-blue-600/20 rounded-lg group-hover:scale-110 transition-transform",children:O.jsx(nk,{className:"w-8 h-8 text-blue-400"})}),O.jsxs("div",{className:"text-left",children:[O.jsx("h3",{className:"text-xl font-bold text-white",children:"Student"}),O.jsx("p",{className:"text-sm text-slate-400",children:"Join your class to learn"})]}),O.jsx(j0,{className:"w-6 h-6 text-slate-500 ml-auto group-hover:translate-x-1 transition-transform"})]}),O.jsxs("button",{onClick:()=>w("teacher"),className:"group flex items-center gap-6 p-6 bg-[#333] hover:bg-[#444] rounded-lg transition-all border border-transparent hover:border-white/20",children:[O.jsx("div",{className:"p-3 bg-red-600/20 rounded-lg group-hover:scale-110 transition-transform",children:O.jsx(E0,{className:"w-8 h-8 text-red-500"})}),O.jsxs("div",{className:"text-left",children:[O.jsx("h3",{className:"text-xl font-bold text-white",children:"Teacher"}),O.jsx("p",{className:"text-sm text-slate-400",children:"Manage school & content"})]}),O.jsx(j0,{className:"w-6 h-6 text-slate-500 ml-auto group-hover:translate-x-1 transition-transform"})]})]},"role"),r==="student-form"&&O.jsxs(on.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:C,className:"space-y-5",children:[O.jsx(oo,{label:"Full Name",value:p.name,onChange:M=>y("name",M),placeholder:"e.g. Rahul Kumar"}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Standard / Class"}),O.jsx("div",{className:"grid grid-cols-5 gap-2",children:["1","2","3","4","5","6","7","8","9","10"].map(M=>{const L=M+(M==="1"?"st":M==="2"?"nd":M==="3"?"rd":"th");return O.jsx("button",{type:"button",onClick:()=>y("classId",M),className:`p-2 rounded text-xs font-bold transition-all border ${p.classId===M?"bg-blue-600/20 text-blue-400 border-blue-600":"bg-[#333] text-gray-400 border-transparent hover:bg-[#444]"}`,children:L},M)})})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Medium of Education"}),O.jsx("div",{className:"grid grid-cols-2 gap-3",children:["english","marathi"].map(M=>O.jsx("button",{type:"button",onClick:()=>y("medium",M),className:`p-3 rounded text-sm font-bold capitalize transition-all border ${p.medium===M?"bg-red-600/20 text-red-500 border-red-600":"bg-[#333] text-gray-400 border-transparent hover:bg-[#444]"}`,children:M},M))})]}),O.jsx(oo,{label:"Roll Number",value:p.rollNo,onChange:M=>y("rollNo",M),placeholder:"e.g. 24"}),O.jsx(oo,{label:"Date of Birth",type:"date",value:p.birthdate,onChange:M=>y("birthdate",M)}),O.jsx("button",{type:"submit",disabled:a,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded mt-6 transition-colors shadow-lg shadow-black/40 disabled:opacity-50",children:"Next"})]},"student-form"),r==="student-join-class"&&O.jsxs(on.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[O.jsxs("div",{className:"text-center space-y-2",children:[O.jsx("h2",{className:"text-xl font-bold text-white",children:"Join Your Class"}),O.jsx("p",{className:"text-sm text-slate-400",children:"Enter the 6-character code given by your teacher."})]}),O.jsxs("div",{className:"space-y-4",children:[O.jsx(oo,{label:"Class Code",value:S,onChange:M=>_(M.toUpperCase()),placeholder:"Ex: X7A9B2",required:!1}),O.jsx("button",{onClick:N,disabled:a||S.length<6,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded transition-colors shadow-lg shadow-blue-900/40 disabled:opacity-50",children:a?"Verifying...":"Verify & Join Class"}),O.jsxs("div",{className:"relative flex py-2 items-center",children:[O.jsx("div",{className:"flex-grow border-t border-gray-600"}),O.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-400 text-xs uppercase",children:"OR"}),O.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),O.jsx("button",{onClick:()=>i("student-password"),className:"w-full bg-white/5 hover:bg-white/10 text-slate-300 font-bold py-3 rounded transition-colors border border-white/10",children:"Skip (Self Study)"})]})]},"student-join-class"),r==="student-password"&&O.jsx(on.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex justify-center",children:O.jsx(Mw,{title:"Set PIN",description:"Create a 4-digit secret code",onSubmit:async M=>{u(!0);try{await e({...p,pin:M,avatarId:""}),t("/dashboard")}catch(L){console.error(L),u(!1)}}})},"student-password"),r==="teacher-form"&&O.jsxs(on.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:R,className:"space-y-4",children:[O.jsx(oo,{label:"Full Name",value:p.name,onChange:M=>y("name",M),placeholder:"e.g. Priya Sharma"}),O.jsx(oo,{label:"School Name",value:p.schoolName,onChange:M=>y("schoolName",M),placeholder:"e.g. GramSiksha High"}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsx(oo,{label:"Village/City",value:p.villageName,onChange:M=>y("villageName",M),placeholder:"Village"}),O.jsx(oo,{label:"State",value:p.state,onChange:M=>y("state",M),placeholder:"State"})]}),O.jsx(oo,{label:"Country",value:p.country,onChange:M=>y("country",M),placeholder:"Country"}),O.jsx(oo,{label:"Device IP (Auto/Manual)",value:p.ipAddress,onChange:M=>y("ipAddress",M),placeholder:"e.g. 192.168.1.5",required:!1}),O.jsx("button",{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded mt-6 transition-colors shadow-lg shadow-black/40",children:"Next"})]},"teacher-form"),r==="teacher-password"&&O.jsx(on.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex justify-center",children:O.jsx(Mw,{title:"Set Access PIN",description:"Create a 4-digit security code",onSubmit:async M=>{u(!0);try{await e({...p,pin:M,avatarId:""}),t("/teacher")}catch(L){console.error(L),u(!1)}}})},"teacher-password")]})]})]})}const tI=async(t,e)=>{const r=(await t.users.find().exec()).filter(g=>{const y=g.get("role")!=="teacher";return e?y&&g.get("teacherClassId")===e:y}),i=await t.progress.find().exec(),a={},u={};i.forEach(g=>{const y=g.get("userId"),w=g.get("score")||0,S=g.get("stars")||0;a[y]||(a[y]=0),u[y]||(u[y]=0),u[y]+=S,a[y]+=w});const p=r.map(g=>({id:g.get("id"),name:g.get("name"),avatarId:g.get("avatarId"),totalStars:u[g.get("id")]||0,totalScore:a[g.get("id")]||0,rank:0}));return p.sort((g,y)=>y.totalStars!==g.totalStars?y.totalStars-g.totalStars:y.totalScore-g.totalScore),p.map((g,y)=>({...g,rank:y+1}))};function GW(){const{currentUser:t}=ws(),{db:e}=Ui(),n=Mi(),{t:r}=Ff(),[i,a]=re.useState({stars:0,xp:0,completed:0,rank:0}),[u,p]=re.useState(!0),[g,y]=re.useState(0),[w,S]=re.useState(null),_=[{title:r("nav.my_class"),icon:OL,path:"/learn",color:"from-cyan-400 to-blue-400",desc:r("nav.subjects_lessons"),shadow:"shadow-cyan-500/50"},{title:r("nav.homework"),icon:Fc,path:"/homework",color:"from-purple-400 to-pink-400",desc:r("nav.pending_assignments"),shadow:"shadow-purple-500/50"},{title:r("nav.leaderboard"),icon:Yh,path:"/leaderboard",color:"from-yellow-400 to-orange-400",desc:r("nav.class_rankings"),shadow:"shadow-yellow-500/50"},{title:r("nav.village_rank"),icon:Z6,path:"/village",color:"from-blue-400 to-indigo-400",desc:r("nav.community_standing"),shadow:"shadow-blue-500/50"},{title:r("nav.recently_sync"),icon:Q6,path:"/sync",color:"from-emerald-400 to-green-400",desc:r("nav.sync_history"),shadow:"shadow-emerald-500/50"},{title:r("nav.attendance"),icon:X6,path:"/attendance",color:"from-rose-400 to-red-400",desc:r("nav.track_presence"),shadow:"shadow-rose-500/50"}];return re.useEffect(()=>{if(!e||!t)return;(async()=>{const N=await e.progress.find({selector:{userId:t.id}}).exec();let R=0,M=0,L=0;N.forEach(U=>{R+=U.get("stars")||0,M+=U.get("xp")||0,L+=1});const j=(await tI(e,t.teacherClassId)).find(U=>U.id===t.id),$=j?j.rank:0;a({stars:R,xp:M,completed:L,rank:$}),p(!1)})()},[e,t]),re.useEffect(()=>{const C=setInterval(()=>{y(N=>(N+1)%3)},3e3);return()=>clearInterval(C)},[]),u?O.jsx("div",{className:"min-h-screen grid place-items-center text-cyan-400 animate-pulse",children:"Initializing Interface..."}):O.jsxs("div",{className:"min-h-screen p-4 pb-24 font-sans relative animate-fade-in",children:[O.jsx("div",{className:"cosmic-bg"}),O.jsxs("header",{className:"flex justify-between items-center mb-8 pt-2",children:[O.jsxs("div",{children:[O.jsxs("h1",{className:"text-3xl font-black text-white tracking-tight drop-shadow-lg",children:[r("dashboard.hello",{name:""})," ",O.jsx("span",{className:"bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:t?.name})]}),O.jsx("p",{className:"text-sm text-slate-400 font-medium tracking-wide",children:r("dashboard.ready")})]}),O.jsx("div",{className:"flex gap-4",children:O.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center overflow-hidden",children:O.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${t?.avatarId}`,alt:"avatar"})})})]}),O.jsx("div",{className:"mb-8 relative h-48 flex items-center justify-center",children:O.jsxs(wo,{mode:"wait",children:[g===0&&O.jsx(on.div,{initial:{opacity:0,scale:.8,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:.8,filter:"blur(10px)"},transition:{duration:.5},className:"absolute inset-0 flex items-center justify-center",children:O.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[O.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center mb-2",children:[O.jsx(on.div,{animate:{rotate:360},transition:{duration:10,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border border-cyan-500/30 border-dashed"}),O.jsx(on.div,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute inset-2 rounded-full border-2 border-transparent border-t-cyan-500/80 border-b-cyan-500/20"}),O.jsxs("div",{className:"absolute inset-6 rounded-full bg-black/80 backdrop-blur-md border border-cyan-500/50 flex flex-col items-center justify-center shadow-[0_0_50px_rgba(6,182,212,0.6)]",children:[O.jsx(n5,{className:"w-10 h-10 text-cyan-400 fill-cyan-400 mb-1 drop-shadow-md"}),O.jsx("span",{className:"text-2xl font-black text-white leading-none tracking-tighter",children:i.xp}),O.jsx("span",{className:"text-[8px] text-cyan-500 font-bold uppercase tracking-widest mt-1",children:r("dashboard.xp")})]})]}),O.jsx("div",{className:"text-center",children:O.jsx("p",{className:"text-cyan-400 font-bold tracking-[0.3em] uppercase text-xs drop-shadow-lg",children:r("dashboard.system_energy")})})]})},"xp"),g===1&&O.jsx(on.div,{initial:{opacity:0,scale:.8,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:.8,filter:"blur(10px)"},transition:{duration:.5},className:"absolute inset-0 flex items-center justify-center",children:O.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[O.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center mb-2",children:[O.jsx(on.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border border-yellow-500/30 border-dashed"}),O.jsx(on.div,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute inset-2 rounded-full border-2 border-transparent border-t-yellow-500/80 border-b-yellow-500/20"}),O.jsxs("div",{className:"absolute inset-6 rounded-full bg-black/80 backdrop-blur-md border border-yellow-500/50 flex flex-col items-center justify-center shadow-[0_0_50px_rgba(234,179,8,0.5)]",children:[O.jsx(Yh,{className:"w-8 h-8 text-yellow-400 mb-1 drop-shadow-md"}),O.jsxs("span",{className:"text-3xl font-black text-white leading-none tracking-tighter",children:["#",i.rank>0?i.rank:"-"]})]})]}),O.jsx("div",{className:"text-center",children:O.jsx("p",{className:"text-yellow-500 font-bold tracking-[0.3em] uppercase text-xs drop-shadow-lg",children:r("dashboard.elite_status")})})]})},"rank"),g===2&&O.jsx(on.div,{initial:{opacity:0,scale:.8,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:.8,filter:"blur(10px)"},transition:{duration:.5},className:"absolute inset-0 flex items-center justify-center",children:O.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[O.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center mb-2",children:[O.jsx(on.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},className:"absolute inset-0 border border-fuchsia-500/30 rounded-full skew-x-12"}),O.jsx(on.div,{animate:{rotate:-360},transition:{duration:12,repeat:1/0,ease:"linear"},className:"absolute inset-2 border border-fuchsia-500/20 rounded-full skew-y-12"}),O.jsxs("div",{className:"absolute inset-8 rounded-full bg-black/80 backdrop-blur-md border border-fuchsia-500/50 flex flex-col items-center justify-center shadow-[0_0_60px_rgba(232,121,249,0.5)]",children:[O.jsx(Fc,{className:"w-8 h-8 text-fuchsia-400 fill-fuchsia-400 mb-1"}),O.jsx("span",{className:"text-2xl font-black text-white leading-none tracking-tighter",children:i.stars})]})]}),O.jsx("div",{className:"text-center",children:O.jsx("p",{className:"text-fuchsia-500 font-bold tracking-[0.3em] uppercase text-xs drop-shadow-lg",children:r("dashboard.star_currency")})})]})},"stars")]})}),O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6 relative z-10 max-w-4xl mx-auto perspective-1000",children:_.map((C,N)=>{const R=w===N;return O.jsxs(on.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0,scale:R?1.02:1},transition:{delay:N*.1,duration:.3},onMouseEnter:()=>S(N),onMouseLeave:()=>S(null),onClick:()=>n(C.path),className:`group relative h-40 lg:h-48 rounded-3xl overflow-hidden glass-panel border transition-all duration-300 text-left p-6 flex flex-col justify-between
                                ${R?`border-white/40 shadow-2xl ${C.shadow} z-20`:"border-white/5 shadow-lg z-10"}
                            `,children:[O.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:O.jsx(C.icon,{className:"w-24 h-24 text-white"})}),O.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${C.color} p-0.5 shadow-lg group-hover:scale-110 transition-transform`,children:O.jsx("div",{className:"w-full h-full bg-black/50 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:O.jsx(C.icon,{className:"w-6 h-6 text-white"})})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-cyan-400 transition-colors mb-1",children:C.title}),O.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase tracking-wider",children:C.desc})]})]},C.title)})})]})}const YW=(t,e)=>{const n=t/e;let r=0,i=0;return n>=.6&&(r=1),n>=.8&&(r=2),n===1&&(r=3),r===1&&(i=10),r===2&&(i=25),r===3&&(i=50),{score:Math.round(n*100),total:e,stars:r,passed:r>0,coinsEarned:i}};function WW({questions:t,onComplete:e,onExit:n}){const[r,i]=re.useState(0),[a,u]=re.useState(null),[p,g]=re.useState(!1),[y,w]=re.useState(0),S=t[r],_=L=>{p||u(L)},C=()=>{if(a===null)return;Number(a)===Number(S.correctAnswer)&&w(k=>k+1),g(!0)},N=()=>{g(!0)},R=()=>{r<t.length-1?(i(L=>L+1),u(null),g(!1)):M()},M=()=>{const L=YW(y,t.length);e(L)};return O.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-slate-100 overflow-hidden",children:[O.jsxs("header",{className:"h-16 px-4 flex items-center justify-between border-b border-white/10 bg-slate-950/80 backdrop-blur-md z-10 shrink-0",children:[O.jsx("button",{onClick:n,className:"text-sm font-medium text-slate-400 hover:text-white transition-colors",children:"Exit"}),O.jsxs("div",{className:"px-3 py-1 bg-white/10 rounded-full text-xs font-bold text-primary-400 border border-white/5",children:["Question ",r+1," / ",t.length]})]}),O.jsx("div",{className:"flex-1 overflow-y-auto p-6 pb-32 scrollbar-hide",children:O.jsx(wo,{mode:"wait",children:O.jsxs(on.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:"max-w-2xl mx-auto space-y-8",children:[O.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white leading-relaxed",children:S.text}),O.jsx("div",{className:"space-y-3",children:S.options.map((L,k)=>{let j="border-slate-700 bg-slate-800/50 text-slate-300 hover:bg-slate-800";if(a===k&&(j="border-primary-500 bg-primary-500/20 text-white ring-2 ring-primary-500/50"),p){const $=Number(S.correctAnswer)===k;$?j="border-green-500 bg-green-500/20 text-white":a===k&&!$?j="border-red-500 bg-red-500/20 text-white opacity-50":j="border-slate-800 bg-slate-900/50 text-slate-600 opacity-50"}return O.jsx("button",{onClick:()=>_(k),disabled:p,className:`w-full p-4 rounded-xl border-2 text-left font-medium transition-all transform active:scale-[0.98] relative z-20 ${j}`,children:O.jsxs("div",{className:"flex items-center justify-between pointer-events-none",children:[O.jsx("span",{children:L}),p&&Number(S.correctAnswer)===k&&O.jsx(xf,{className:"text-green-500 w-5 h-5"}),p&&a===k&&Number(S.correctAnswer)!==k&&O.jsx(qL,{className:"text-red-500 w-5 h-5"})]})},k)})})]},r)})}),O.jsx("div",{className:"h-24 px-4 border-t border-white/10 bg-slate-950/80 backdrop-blur-md z-30 shrink-0 flex items-center justify-center pb-4",children:O.jsx("div",{className:"w-full max-w-2xl flex gap-3",children:p?O.jsxs("button",{onClick:R,className:`w-full font-bold py-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 z-30 ${Number(S.correctAnswer)===a?"bg-green-600 hover:bg-green-500 shadow-green-500/20 text-white":"bg-white/10 hover:bg-white/20 text-white"}`,children:[r===t.length-1?"Finish Quiz":"Next Question"," ",O.jsx(W6,{className:"w-5 h-5"})]}):O.jsxs(O.Fragment,{children:[O.jsx("button",{onClick:N,className:"px-6 py-4 rounded-xl font-bold text-slate-400 hover:bg-white/5 hover:text-white transition-colors z-30",children:O.jsx(xk,{className:"w-6 h-6"})}),O.jsxs("button",{onClick:C,disabled:a===null,className:`flex-1 font-bold py-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 z-30 ${a!==null?"bg-primary text-primary-foreground hover:bg-primary/90 shadow-primary/20":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:["Submit Answer ",O.jsx(bk,{className:"w-4 h-4"})]})]})})})]})}const XW=[{code:"en",label:"English"},{code:"hi",label:"Hindi"},{code:"mr",label:"Marathi"}];function TN({data:t,onComplete:e,onExit:n}){const[r,i]=re.useState("list"),[a,u]=re.useState(null),[p,g]=re.useState("en");if(!t)return O.jsx("div",{className:"p-10 text-center text-slate-400",children:"Loading lesson content..."});const y=()=>t.translations&&t.translations[p]?t.translations[p]:t.translations&&t.translations.en?t.translations.en:t.content?t.content:t.sections&&t.sections.length>0?t.sections.map(N=>`<h3>${N.title}</h3><p>${N.content}</p>`).join("<hr/>"):null,w=y(),S=t.attachments?.find(N=>N.name==="TextBook.pdf"),_=t.attachments?.filter(N=>N.name!=="TextBook.pdf")||[],C=(N,R,M)=>{u({type:N,content:R,name:M}),i("viewer")};return r==="list"?O.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-slate-100 aurora-bg",children:[O.jsxs("header",{className:"h-16 px-4 flex items-center justify-between border-b border-white/10 bg-slate-950/60 backdrop-blur-xl z-10 shrink-0 sticky top-0",children:[O.jsx("button",{onClick:n,className:"text-sm font-bold text-slate-300 hover:text-white px-3 py-1.5 rounded-lg hover:bg-white/10 transition-colors",children:" Back"}),O.jsx("h2",{className:"font-bold text-white",children:"Lesson Resources"}),O.jsx("div",{className:"w-10"})]}),O.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 pb-32 scrollbar-hide",children:O.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[S?O.jsxs(on.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>C("pdf",S.data,S.name),className:"w-full text-left p-6 rounded-3xl bg-gradient-to-br from-red-500/10 to-orange-500/10 border border-red-500/20 hover:border-red-500/50 hover:bg-red-500/20 transition-all group flex items-start gap-4",children:[O.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-500/20 flex items-center justify-center shrink-0 border border-red-500/30 group-hover:scale-110 transition-transform",children:O.jsx("div",{className:"text-xl font-bold text-red-400",children:"PDF"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-xl font-bold text-white mb-1 group-hover:text-red-400 transition-colors",children:"TextBook"}),O.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"Official Digital Textbook PDF"})]})]}):O.jsx("div",{className:"p-4 border border-dashed border-white/10 rounded-2xl text-center text-slate-500 text-sm",children:"No Textbook Linked"}),w&&O.jsxs(on.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>C("html",w,"Lesson Notes"),className:"w-full text-left p-6 rounded-3xl glass-panel border-white/5 hover:border-cyan-500/50 hover:bg-white/5 transition-all group flex items-start gap-4",children:[O.jsx("div",{className:"w-14 h-14 rounded-2xl bg-cyan-500/20 flex items-center justify-center shrink-0 border border-cyan-500/30 group-hover:scale-110 transition-transform",children:O.jsx(Fd,{className:"w-8 h-8 text-cyan-400"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-xl font-bold text-white mb-1 group-hover:text-cyan-400 transition-colors",children:"Lesson Notes"}),O.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"Key concepts and summary"})]})]}),_.map((N,R)=>O.jsxs(on.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2+R*.05},onClick:()=>C(N.type.includes("pdf")||N.name.endsWith(".pdf")?"pdf":"unknown",N.data,N.name),className:"w-full text-left p-6 rounded-3xl glass-panel border-white/5 hover:border-purple-500/50 hover:bg-white/5 transition-all group flex items-start gap-4",children:[O.jsx("div",{className:"w-14 h-14 rounded-2xl bg-purple-500/20 flex items-center justify-center shrink-0 border border-purple-500/30 group-hover:scale-110 transition-transform",children:O.jsx(Q6,{className:"w-8 h-8 text-purple-400"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-xl font-bold text-white mb-1 group-hover:text-purple-400 transition-colors",children:N.name}),O.jsx("p",{className:"text-sm text-slate-400 font-medium uppercase",children:N.type.split("/")[1]||"FILE"})]})]},N.id))]})})]}):O.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-slate-100 aurora-bg",children:[O.jsxs("header",{className:"h-16 px-4 flex items-center justify-between border-b border-white/10 bg-slate-950/60 backdrop-blur-xl z-20 shrink-0 sticky top-0",children:[O.jsx("button",{onClick:()=>i("list"),className:"text-sm font-bold text-slate-300 hover:text-white px-3 py-1.5 rounded-lg hover:bg-white/10 transition-colors flex items-center gap-2",children:"Start Back"}),O.jsx("h2",{className:"font-bold text-white line-clamp-1 max-w-[50%]",children:a?.name}),O.jsx("div",{className:"flex gap-1 bg-black/20 rounded-xl p-1 border border-white/5",children:a?.type==="html"&&XW.map(N=>O.jsx("button",{onClick:()=>g(N.code),className:`px-3 py-1 text-xs font-bold rounded-lg transition-all ${p===N.code?"bg-cyan-500/20 text-cyan-400 shadow-sm border border-cyan-500/30":"text-slate-500 hover:text-slate-300"}`,children:N.label},N.code))})]}),O.jsx("div",{className:"flex-1 overflow-y-auto w-full h-full relative",children:a?.type==="pdf"?O.jsx("div",{className:"w-full h-full bg-slate-900 flex flex-col items-center justify-center p-4",children:O.jsx("object",{data:a.content,type:"application/pdf",className:"w-full h-full rounded-xl shadow-2xl border border-white/10",children:O.jsxs("div",{className:"text-center text-slate-500 space-y-4",children:[O.jsx("p",{children:"Preview not available."}),O.jsx("a",{href:a.content,download:a.name,className:"px-6 py-3 bg-blue-600 rounded-xl text-white font-bold inline-block",children:"Download PDF"})]})})}):a?.type==="html"?O.jsx("div",{className:"p-4 md:p-8 max-w-3xl mx-auto pb-32",children:O.jsx("div",{className:`prose prose-invert prose-lg max-w-none \r
                            prose-headings:text-transparent prose-headings:bg-clip-text prose-headings:bg-gradient-to-r prose-headings:from-cyan-400 prose-headings:to-blue-400\r
                            prose-p:text-slate-300 prose-strong:text-white prose-li:text-slate-300\r
                            glass-panel p-6 md:p-10 rounded-3xl`,dangerouslySetInnerHTML:{__html:y()||""}})}):O.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 gap-4",children:[O.jsx("p",{children:"File type not supported for preview."}),O.jsx("a",{href:a.content,download:a.name,className:"px-6 py-3 bg-white/10 rounded-xl hover:bg-white/20 text-white transition-colors",children:"Download File"})]})})]})}function QW(){const{levelId:t}=Ud(),e=Mi(),{db:n}=Ui(),{currentUser:r}=ws(),[i,a]=re.useState(!0),[u,p]=re.useState(null),[g,y]=re.useState([]),[w,S]=re.useState(null),[_,C]=re.useState(!1);re.useEffect(()=>{!n||!t||n.content.findOne(t).exec().then(async R=>{if(R){let M=R.toJSON();const L=M.type;if(L==="lesson"||L==="module"||L==="text"){const k=M.data||{},j=k.attachments||[];if(!j.some($=>$.name==="TextBook.pdf")){console.log("Auto-Seeding Missing Textbook...");const U=[...j,{id:Ca(),name:"TextBook.pdf",type:"application/pdf",data:"data:application/pdf;base64,JVBERi0xLjcKCjEgMCBvYmoKPDwvVHlwZSAvQ2F0YWxvZwovUGFnZXMgMiAwIFIKPj4KZW5kb2JqCgoyIDAgb2JqCjw8L1R5cGUgL1BhZ2VzCi9LaWRzIFszIDAgUl0KL0NvdW50IDEKPj4KZW5kb2JqCgozIDAgb2JqCjw8L1R5cGUgL1BhZ2wJL01lZGlhQm94IFswIDAgNTk1LjI4IDg0MS44OV0KL1Jlc291cmNlcyA8PC9Qcm9jU2V0IFsvUERGXS4+PgovQ29udGVudHMgNCAwIFIKPj4KZW5kb2JqCgo0IDAgb2JqCjw8L0xlbmd0aCA0ND4+CnN0cmVhbQpxCjEwMCAxMDAgTDc1IDIwMCByZQpTClFZW5kc3RyZWFtCmVuZG9iagoKeHJlZgowIDUKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDEwIDAwMDAwIG4gCjAwMDAwMDAwNjAgMDAwMDAgbiAKMDAwMDAwMDExNyAwMDAwMCBuIAowMDAwMDAwMjI0IDAwMDAwIG4gCnRyYWlsZXIKPDwvU2l6ZSA1Ci9Sb290IDEgMCBSCj4+CnN0YXJ0eHJlZgoyNzUKJSVFT0YK"}];await R.patch({data:{...k,attachments:U}}),M={...M,data:{...k,attachments:U}}}}p(M),(M.type==="module"||M.type==="lesson")&&n.content.find().exec().then(k=>{const j=k.map($=>$.toJSON()).filter($=>$.moduleId===t).sort(($,U)=>($.createdAt||0)-(U.createdAt||0));y(j)})}else console.error("Level not found"),e("/dashboard");a(!1)})},[n,t,e]);const N=async R=>{if(!n||!r||!t)return;S(R);const L=(await n.progress.find({selector:{userId:r.id,levelId:t}}).exec())[0];L?R.score>L.get("score")&&await L.patch({score:R.score,stars:Math.max(R.stars,L.get("stars")),timestamp:Date.now()}):await n.progress.insert({id:Ca(),userId:r.id,levelId:t,score:R.score,stars:R.stars,timestamp:Date.now()})};if(i)return O.jsx("div",{className:"text-white p-6",children:"Loading Level..."});if(!u)return null;if(w)return O.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-6 space-y-8 text-center",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx("h1",{className:"text-4xl font-bold text-white",children:w.passed?"Level Complete!":"Try Again"}),O.jsxs("p",{className:"text-slate-400",children:["You scored ",w.score,"%"]})]}),O.jsx("div",{className:"flex gap-4",children:[1,2,3].map(R=>O.jsx(Fc,{className:`w-12 h-12 ${R<=w.stars?"text-yellow-400 fill-yellow-400":"text-slate-700"}`},R))}),w.passed&&O.jsx("div",{className:"bg-slate-800 p-4 rounded-xl border border-white/10",children:O.jsxs("span",{className:"text-yellow-400 font-bold text-xl",children:["+",w.coinsEarned," Coins"]})}),O.jsxs("div",{className:"flex gap-4 w-full max-w-xs",children:[O.jsxs("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white py-4 rounded-xl flex items-center justify-center gap-2",children:[O.jsx(dk,{className:"w-5 h-5"})," Retry"]}),O.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex-1 bg-primary-600 hover:bg-primary-500 text-white py-4 rounded-xl flex items-center justify-center gap-2 font-bold shadow-lg shadow-primary-500/20",children:[O.jsx(Mb,{className:"w-5 h-5"})," Done"]})]})]});if(u.type==="quiz")return O.jsx("div",{className:"h-full bg-transparent",children:O.jsx(WW,{questions:u.data.questions,onComplete:N,onExit:()=>e("/dashboard")})});if(u.type==="text")return O.jsx("div",{className:"h-full bg-transparent",children:O.jsx(TN,{data:u.data||u,onComplete:N,onExit:()=>e("/dashboard")})});if(_)return O.jsx("div",{className:"h-full bg-transparent",children:O.jsx(TN,{data:u.data||u,onComplete:N,onExit:()=>C(!1)})});if(u.type==="module"||u.type==="lesson"){const R=u.type==="lesson"&&(u.data?.content||u.data?.translations||u.data?.attachments?.some(M=>M.name==="TextBook.pdf"));return O.jsxs("div",{className:"min-h-screen p-6 bg-slate-950 text-white font-sans animate-fade-in relative",children:[O.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-950 to-slate-950 -z-10"}),O.jsxs("header",{className:"flex items-center gap-4 mb-8",children:[O.jsx("button",{onClick:()=>e("/learn"),className:"p-3 glass-panel rounded-xl text-slate-400 hover:text-white transition-colors",children:O.jsx(Mb,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400",children:u.title}),O.jsxs("p",{className:"text-sm text-slate-400",children:[g.length+(R?1:0)," items"]})]})]}),O.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[R&&O.jsxs("button",{onClick:()=>C(!0),className:"w-full glass-panel p-6 rounded-2xl flex items-center gap-4 group hover:bg-white/5 transition-all text-left border border-white/5 hover:border-indigo-500/30 mb-4 bg-indigo-500/10",children:[O.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500 flex items-center justify-center text-white shadow-lg shadow-indigo-500/20",children:O.jsx(Sf,{className:"w-6 h-6"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("h3",{className:"font-bold text-lg text-white group-hover:text-indigo-300 transition-colors",children:"Start Reading"}),O.jsx("p",{className:"text-sm text-slate-400",children:"Main Lesson Content / Textbook"})]}),O.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:O.jsx("span",{className:"px-3 py-1 bg-indigo-500 rounded-lg text-xs font-bold",children:"OPEN"})})]}),g.map(M=>O.jsxs("button",{onClick:()=>e(`/play/${M.id}`),className:"w-full glass-panel p-6 rounded-2xl flex items-center gap-4 group hover:bg-white/5 transition-all text-left border border-white/5 hover:border-indigo-500/30",children:[O.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center text-indigo-400 group-hover:scale-110 transition-transform shadow-lg shadow-indigo-500/10",children:M.type==="quiz"?"?":""}),O.jsxs("div",{className:"flex-1",children:[O.jsx("h3",{className:"font-bold text-lg text-white group-hover:text-indigo-300 transition-colors",children:M.title}),O.jsx("p",{className:"text-sm text-slate-500",children:M.type==="quiz"?"Quiz Assessment":"Study Material"})]}),O.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0",children:O.jsx("span",{className:"text-indigo-400 font-bold text-sm",children:"Start "})})]},M.id)),g.length===0&&O.jsxs("div",{className:"text-center py-20 text-slate-500",children:[O.jsx("p",{children:"This module is empty."}),O.jsx("button",{onClick:()=>e("/learn"),className:"text-indigo-400 text-sm mt-4 hover:underline",children:"Go Back"})]})]})]})}return O.jsxs("div",{className:"text-white p-6",children:["Unknown Content Type: ",u.type]})}var Yu={},Qv={exports:{}},Zv,ON;function ZW(){if(ON)return Zv;ON=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Zv=t,Zv}var Jv,RN;function JW(){if(RN)return Jv;RN=1;var t=ZW();function e(){}function n(){}return n.resetWarningCache=e,Jv=function(){function r(u,p,g,y,w,S){if(S!==t){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},Jv}var IN;function nI(){return IN||(IN=1,Qv.exports=JW()()),Qv.exports}var eb,MN;function rI(){return MN||(MN=1,eb={L:1,M:0,Q:3,H:2}),eb}var tb,DN;function iI(){return DN||(DN=1,tb={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),tb}var nb,LN;function eX(){if(LN)return nb;LN=1;var t=iI();function e(n){this.mode=t.MODE_8BIT_BYTE,this.data=n}return e.prototype={getLength:function(n){return this.data.length},write:function(n){for(var r=0;r<this.data.length;r++)n.put(this.data.charCodeAt(r),8)}},nb=e,nb}var rb,kN;function tX(){if(kN)return rb;kN=1;var t=rI();function e(n,r){this.totalCount=n,this.dataCount=r}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(n,r){var i=e.getRsBlockTable(n,r);if(i==null)throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+r);for(var a=i.length/3,u=new Array,p=0;p<a;p++)for(var g=i[p*3+0],y=i[p*3+1],w=i[p*3+2],S=0;S<g;S++)u.push(new e(y,w));return u},e.getRsBlockTable=function(n,r){switch(r){case t.L:return e.RS_BLOCK_TABLE[(n-1)*4+0];case t.M:return e.RS_BLOCK_TABLE[(n-1)*4+1];case t.Q:return e.RS_BLOCK_TABLE[(n-1)*4+2];case t.H:return e.RS_BLOCK_TABLE[(n-1)*4+3];default:return}},rb=e,rb}var ib,jN;function nX(){if(jN)return ib;jN=1;function t(){this.buffer=new Array,this.length=0}return t.prototype={get:function(e){var n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)==1},put:function(e,n){for(var r=0;r<n;r++)this.putBit((e>>>n-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},ib=t,ib}var sb,PN;function sI(){if(PN)return sb;PN=1;for(var t={glog:function(n){if(n<1)throw new Error("glog("+n+")");return t.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return t.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)t.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)t.EXP_TABLE[e]=t.EXP_TABLE[e-4]^t.EXP_TABLE[e-5]^t.EXP_TABLE[e-6]^t.EXP_TABLE[e-8];for(var e=0;e<255;e++)t.LOG_TABLE[t.EXP_TABLE[e]]=e;return sb=t,sb}var ab,BN;function aI(){if(BN)return ab;BN=1;var t=sI();function e(n,r){if(n.length==null)throw new Error(n.length+"/"+r);for(var i=0;i<n.length&&n[i]==0;)i++;this.num=new Array(n.length-i+r);for(var a=0;a<n.length-i;a++)this.num[a]=n[a+i]}return e.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length},multiply:function(n){for(var r=new Array(this.getLength()+n.getLength()-1),i=0;i<this.getLength();i++)for(var a=0;a<n.getLength();a++)r[i+a]^=t.gexp(t.glog(this.get(i))+t.glog(n.get(a)));return new e(r,0)},mod:function(n){if(this.getLength()-n.getLength()<0)return this;for(var r=t.glog(this.get(0))-t.glog(n.get(0)),i=new Array(this.getLength()),a=0;a<this.getLength();a++)i[a]=this.get(a);for(var a=0;a<n.getLength();a++)i[a]^=t.gexp(t.glog(n.get(a))+r);return new e(i,0).mod(n)}},ab=e,ab}var ob,UN;function rX(){if(UN)return ob;UN=1;var t=iI(),e=aI(),n=sI(),r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var u=a<<10;i.getBCHDigit(u)-i.getBCHDigit(i.G15)>=0;)u^=i.G15<<i.getBCHDigit(u)-i.getBCHDigit(i.G15);return(a<<10|u)^i.G15_MASK},getBCHTypeNumber:function(a){for(var u=a<<12;i.getBCHDigit(u)-i.getBCHDigit(i.G18)>=0;)u^=i.G18<<i.getBCHDigit(u)-i.getBCHDigit(i.G18);return a<<12|u},getBCHDigit:function(a){for(var u=0;a!=0;)u++,a>>>=1;return u},getPatternPosition:function(a){return i.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,u,p){switch(a){case r.PATTERN000:return(u+p)%2==0;case r.PATTERN001:return u%2==0;case r.PATTERN010:return p%3==0;case r.PATTERN011:return(u+p)%3==0;case r.PATTERN100:return(Math.floor(u/2)+Math.floor(p/3))%2==0;case r.PATTERN101:return u*p%2+u*p%3==0;case r.PATTERN110:return(u*p%2+u*p%3)%2==0;case r.PATTERN111:return(u*p%3+(u+p)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var u=new e([1],0),p=0;p<a;p++)u=u.multiply(new e([1,n.gexp(p)],0));return u},getLengthInBits:function(a,u){if(1<=u&&u<10)switch(a){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:return 8;case t.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(u<27)switch(a){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else if(u<41)switch(a){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}else throw new Error("type:"+u)},getLostPoint:function(a){for(var u=a.getModuleCount(),p=0,g=0;g<u;g++)for(var y=0;y<u;y++){for(var w=0,S=a.isDark(g,y),_=-1;_<=1;_++)if(!(g+_<0||u<=g+_))for(var C=-1;C<=1;C++)y+C<0||u<=y+C||_==0&&C==0||S==a.isDark(g+_,y+C)&&w++;w>5&&(p+=3+w-5)}for(var g=0;g<u-1;g++)for(var y=0;y<u-1;y++){var N=0;a.isDark(g,y)&&N++,a.isDark(g+1,y)&&N++,a.isDark(g,y+1)&&N++,a.isDark(g+1,y+1)&&N++,(N==0||N==4)&&(p+=3)}for(var g=0;g<u;g++)for(var y=0;y<u-6;y++)a.isDark(g,y)&&!a.isDark(g,y+1)&&a.isDark(g,y+2)&&a.isDark(g,y+3)&&a.isDark(g,y+4)&&!a.isDark(g,y+5)&&a.isDark(g,y+6)&&(p+=40);for(var y=0;y<u;y++)for(var g=0;g<u-6;g++)a.isDark(g,y)&&!a.isDark(g+1,y)&&a.isDark(g+2,y)&&a.isDark(g+3,y)&&a.isDark(g+4,y)&&!a.isDark(g+5,y)&&a.isDark(g+6,y)&&(p+=40);for(var R=0,y=0;y<u;y++)for(var g=0;g<u;g++)a.isDark(g,y)&&R++;var M=Math.abs(100*R/u/u-50)/5;return p+=M*10,p}};return ob=i,ob}var lb,zN;function iX(){if(zN)return lb;zN=1;var t=eX(),e=tX(),n=nX(),r=rX(),i=aI();function a(p,g){this.typeNumber=p,this.errorCorrectLevel=g,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var u=a.prototype;return u.addData=function(p){var g=new t(p);this.dataList.push(g),this.dataCache=null},u.isDark=function(p,g){if(p<0||this.moduleCount<=p||g<0||this.moduleCount<=g)throw new Error(p+","+g);return this.modules[p][g]},u.getModuleCount=function(){return this.moduleCount},u.make=function(){if(this.typeNumber<1){var p=1;for(p=1;p<40;p++){for(var g=e.getRSBlocks(p,this.errorCorrectLevel),y=new n,w=0,S=0;S<g.length;S++)w+=g[S].dataCount;for(var S=0;S<this.dataList.length;S++){var _=this.dataList[S];y.put(_.mode,4),y.put(_.getLength(),r.getLengthInBits(_.mode,p)),_.write(y)}if(y.getLengthInBits()<=w*8)break}this.typeNumber=p}this.makeImpl(!1,this.getBestMaskPattern())},u.makeImpl=function(p,g){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var y=0;y<this.moduleCount;y++){this.modules[y]=new Array(this.moduleCount);for(var w=0;w<this.moduleCount;w++)this.modules[y][w]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(p,g),this.typeNumber>=7&&this.setupTypeNumber(p),this.dataCache==null&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,g)},u.setupPositionProbePattern=function(p,g){for(var y=-1;y<=7;y++)if(!(p+y<=-1||this.moduleCount<=p+y))for(var w=-1;w<=7;w++)g+w<=-1||this.moduleCount<=g+w||(0<=y&&y<=6&&(w==0||w==6)||0<=w&&w<=6&&(y==0||y==6)||2<=y&&y<=4&&2<=w&&w<=4?this.modules[p+y][g+w]=!0:this.modules[p+y][g+w]=!1)},u.getBestMaskPattern=function(){for(var p=0,g=0,y=0;y<8;y++){this.makeImpl(!0,y);var w=r.getLostPoint(this);(y==0||p>w)&&(p=w,g=y)}return g},u.createMovieClip=function(p,g,y){var w=p.createEmptyMovieClip(g,y),S=1;this.make();for(var _=0;_<this.modules.length;_++)for(var C=_*S,N=0;N<this.modules[_].length;N++){var R=N*S,M=this.modules[_][N];M&&(w.beginFill(0,100),w.moveTo(R,C),w.lineTo(R+S,C),w.lineTo(R+S,C+S),w.lineTo(R,C+S),w.endFill())}return w},u.setupTimingPattern=function(){for(var p=8;p<this.moduleCount-8;p++)this.modules[p][6]==null&&(this.modules[p][6]=p%2==0);for(var g=8;g<this.moduleCount-8;g++)this.modules[6][g]==null&&(this.modules[6][g]=g%2==0)},u.setupPositionAdjustPattern=function(){for(var p=r.getPatternPosition(this.typeNumber),g=0;g<p.length;g++)for(var y=0;y<p.length;y++){var w=p[g],S=p[y];if(this.modules[w][S]==null)for(var _=-2;_<=2;_++)for(var C=-2;C<=2;C++)_==-2||_==2||C==-2||C==2||_==0&&C==0?this.modules[w+_][S+C]=!0:this.modules[w+_][S+C]=!1}},u.setupTypeNumber=function(p){for(var g=r.getBCHTypeNumber(this.typeNumber),y=0;y<18;y++){var w=!p&&(g>>y&1)==1;this.modules[Math.floor(y/3)][y%3+this.moduleCount-8-3]=w}for(var y=0;y<18;y++){var w=!p&&(g>>y&1)==1;this.modules[y%3+this.moduleCount-8-3][Math.floor(y/3)]=w}},u.setupTypeInfo=function(p,g){for(var y=this.errorCorrectLevel<<3|g,w=r.getBCHTypeInfo(y),S=0;S<15;S++){var _=!p&&(w>>S&1)==1;S<6?this.modules[S][8]=_:S<8?this.modules[S+1][8]=_:this.modules[this.moduleCount-15+S][8]=_}for(var S=0;S<15;S++){var _=!p&&(w>>S&1)==1;S<8?this.modules[8][this.moduleCount-S-1]=_:S<9?this.modules[8][15-S-1+1]=_:this.modules[8][15-S-1]=_}this.modules[this.moduleCount-8][8]=!p},u.mapData=function(p,g){for(var y=-1,w=this.moduleCount-1,S=7,_=0,C=this.moduleCount-1;C>0;C-=2)for(C==6&&C--;;){for(var N=0;N<2;N++)if(this.modules[w][C-N]==null){var R=!1;_<p.length&&(R=(p[_]>>>S&1)==1);var M=r.getMask(g,w,C-N);M&&(R=!R),this.modules[w][C-N]=R,S--,S==-1&&(_++,S=7)}if(w+=y,w<0||this.moduleCount<=w){w-=y,y=-y;break}}},a.PAD0=236,a.PAD1=17,a.createData=function(p,g,y){for(var w=e.getRSBlocks(p,g),S=new n,_=0;_<y.length;_++){var C=y[_];S.put(C.mode,4),S.put(C.getLength(),r.getLengthInBits(C.mode,p)),C.write(S)}for(var N=0,_=0;_<w.length;_++)N+=w[_].dataCount;if(S.getLengthInBits()>N*8)throw new Error("code length overflow. ("+S.getLengthInBits()+">"+N*8+")");for(S.getLengthInBits()+4<=N*8&&S.put(0,4);S.getLengthInBits()%8!=0;)S.putBit(!1);for(;!(S.getLengthInBits()>=N*8||(S.put(a.PAD0,8),S.getLengthInBits()>=N*8));)S.put(a.PAD1,8);return a.createBytes(S,w)},a.createBytes=function(p,g){for(var y=0,w=0,S=0,_=new Array(g.length),C=new Array(g.length),N=0;N<g.length;N++){var R=g[N].dataCount,M=g[N].totalCount-R;w=Math.max(w,R),S=Math.max(S,M),_[N]=new Array(R);for(var L=0;L<_[N].length;L++)_[N][L]=255&p.buffer[L+y];y+=R;var k=r.getErrorCorrectPolynomial(M),j=new i(_[N],k.getLength()-1),$=j.mod(k);C[N]=new Array(k.getLength()-1);for(var L=0;L<C[N].length;L++){var U=L+$.getLength()-C[N].length;C[N][L]=U>=0?$.get(U):0}}for(var F=0,L=0;L<g.length;L++)F+=g[L].totalCount;for(var B=new Array(F),Z=0,L=0;L<w;L++)for(var N=0;N<g.length;N++)L<_[N].length&&(B[Z++]=_[N][L]);for(var L=0;L<S;L++)for(var N=0;N<g.length;N++)L<C[N].length&&(B[Z++]=C[N][L]);return B},lb=a,lb}var o0={},FN;function sX(){if(FN)return o0;FN=1,Object.defineProperty(o0,"__esModule",{value:!0});var t=Object.assign||function(y){for(var w=1;w<arguments.length;w++){var S=arguments[w];for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(y[_]=S[_])}return y},e=nI(),n=a(e),r=jf(),i=a(r);function a(y){return y&&y.__esModule?y:{default:y}}function u(y,w){var S={};for(var _ in y)w.indexOf(_)>=0||Object.prototype.hasOwnProperty.call(y,_)&&(S[_]=y[_]);return S}var p={bgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,bgD:n.default.string.isRequired,fgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,fgD:n.default.string.isRequired,size:n.default.number.isRequired,title:n.default.string,viewBoxSize:n.default.number.isRequired,xmlns:n.default.string},g=(0,r.forwardRef)(function(y,w){var S=y.bgColor,_=y.bgD,C=y.fgD,N=y.fgColor,R=y.size,M=y.title,L=y.viewBoxSize,k=y.xmlns,j=k===void 0?"http://www.w3.org/2000/svg":k,$=u(y,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return i.default.createElement("svg",t({},$,{height:R,ref:w,viewBox:"0 0 "+L+" "+L,width:R,xmlns:j}),M?i.default.createElement("title",null,M):null,i.default.createElement("path",{d:_,fill:S}),i.default.createElement("path",{d:C,fill:N}))});return g.displayName="QRCodeSvg",g.propTypes=p,o0.default=g,o0}var qN;function aX(){if(qN)return Yu;qN=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.QRCode=void 0;var t=Object.assign||function(R){for(var M=1;M<arguments.length;M++){var L=arguments[M];for(var k in L)Object.prototype.hasOwnProperty.call(L,k)&&(R[k]=L[k])}return R},e=nI(),n=S(e),r=rI(),i=S(r),a=iX(),u=S(a),p=jf(),g=S(p),y=sX(),w=S(y);function S(R){return R&&R.__esModule?R:{default:R}}function _(R,M){var L={};for(var k in R)M.indexOf(k)>=0||Object.prototype.hasOwnProperty.call(R,k)&&(L[k]=R[k]);return L}var C={bgColor:n.default.oneOfType([n.default.object,n.default.string]),fgColor:n.default.oneOfType([n.default.object,n.default.string]),level:n.default.string,size:n.default.number,value:n.default.string.isRequired},N=(0,p.forwardRef)(function(R,M){var L=R.bgColor,k=L===void 0?"#FFFFFF":L,j=R.fgColor,$=j===void 0?"#000000":j,U=R.level,F=U===void 0?"L":U,B=R.size,Z=B===void 0?256:B,le=R.value,Ne=_(R,["bgColor","fgColor","level","size","value"]),G=new u.default(-1,i.default[F]);G.addData(le),G.make();var ce=G.modules;return g.default.createElement(w.default,t({},Ne,{bgColor:k,bgD:ce.map(function(se,Ee){return se.map(function(ue,ee){return ue?"":"M "+ee+" "+Ee+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:$,fgD:ce.map(function(se,Ee){return se.map(function(ue,ee){return ue?"M "+ee+" "+Ee+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:M,size:Z,viewBoxSize:ce.length}))});return Yu.QRCode=N,N.displayName="QRCode",N.propTypes=C,Yu.default=N,Yu}var oX=aX();const oI=So(oX);var cb={exports:{}},$N;function lX(){return $N||($N=1,(function(t){var e=(function(){var n=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={};function u(g,y){if(!a[g]){a[g]={};for(var w=0;w<g.length;w++)a[g][g.charAt(w)]=w}return a[g][y]}var p={compressToBase64:function(g){if(g==null)return"";var y=p._compress(g,6,function(w){return r.charAt(w)});switch(y.length%4){default:case 0:return y;case 1:return y+"===";case 2:return y+"==";case 3:return y+"="}},decompressFromBase64:function(g){return g==null?"":g==""?null:p._decompress(g.length,32,function(y){return u(r,g.charAt(y))})},compressToUTF16:function(g){return g==null?"":p._compress(g,15,function(y){return n(y+32)})+" "},decompressFromUTF16:function(g){return g==null?"":g==""?null:p._decompress(g.length,16384,function(y){return g.charCodeAt(y)-32})},compressToUint8Array:function(g){for(var y=p.compress(g),w=new Uint8Array(y.length*2),S=0,_=y.length;S<_;S++){var C=y.charCodeAt(S);w[S*2]=C>>>8,w[S*2+1]=C%256}return w},decompressFromUint8Array:function(g){if(g==null)return p.decompress(g);for(var y=new Array(g.length/2),w=0,S=y.length;w<S;w++)y[w]=g[w*2]*256+g[w*2+1];var _=[];return y.forEach(function(C){_.push(n(C))}),p.decompress(_.join(""))},compressToEncodedURIComponent:function(g){return g==null?"":p._compress(g,6,function(y){return i.charAt(y)})},decompressFromEncodedURIComponent:function(g){return g==null?"":g==""?null:(g=g.replace(/ /g,"+"),p._decompress(g.length,32,function(y){return u(i,g.charAt(y))}))},compress:function(g){return p._compress(g,16,function(y){return n(y)})},_compress:function(g,y,w){if(g==null)return"";var S,_,C={},N={},R="",M="",L="",k=2,j=3,$=2,U=[],F=0,B=0,Z;for(Z=0;Z<g.length;Z+=1)if(R=g.charAt(Z),Object.prototype.hasOwnProperty.call(C,R)||(C[R]=j++,N[R]=!0),M=L+R,Object.prototype.hasOwnProperty.call(C,M))L=M;else{if(Object.prototype.hasOwnProperty.call(N,L)){if(L.charCodeAt(0)<256){for(S=0;S<$;S++)F=F<<1,B==y-1?(B=0,U.push(w(F)),F=0):B++;for(_=L.charCodeAt(0),S=0;S<8;S++)F=F<<1|_&1,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=_>>1}else{for(_=1,S=0;S<$;S++)F=F<<1|_,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=0;for(_=L.charCodeAt(0),S=0;S<16;S++)F=F<<1|_&1,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=_>>1}k--,k==0&&(k=Math.pow(2,$),$++),delete N[L]}else for(_=C[L],S=0;S<$;S++)F=F<<1|_&1,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=_>>1;k--,k==0&&(k=Math.pow(2,$),$++),C[M]=j++,L=String(R)}if(L!==""){if(Object.prototype.hasOwnProperty.call(N,L)){if(L.charCodeAt(0)<256){for(S=0;S<$;S++)F=F<<1,B==y-1?(B=0,U.push(w(F)),F=0):B++;for(_=L.charCodeAt(0),S=0;S<8;S++)F=F<<1|_&1,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=_>>1}else{for(_=1,S=0;S<$;S++)F=F<<1|_,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=0;for(_=L.charCodeAt(0),S=0;S<16;S++)F=F<<1|_&1,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=_>>1}k--,k==0&&(k=Math.pow(2,$),$++),delete N[L]}else for(_=C[L],S=0;S<$;S++)F=F<<1|_&1,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=_>>1;k--,k==0&&(k=Math.pow(2,$),$++)}for(_=2,S=0;S<$;S++)F=F<<1|_&1,B==y-1?(B=0,U.push(w(F)),F=0):B++,_=_>>1;for(;;)if(F=F<<1,B==y-1){U.push(w(F));break}else B++;return U.join("")},decompress:function(g){return g==null?"":g==""?null:p._decompress(g.length,32768,function(y){return g.charCodeAt(y)})},_decompress:function(g,y,w){var S=[],_=4,C=4,N=3,R="",M=[],L,k,j,$,U,F,B,Z={val:w(0),position:y,index:1};for(L=0;L<3;L+=1)S[L]=L;for(j=0,U=Math.pow(2,2),F=1;F!=U;)$=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=y,Z.val=w(Z.index++)),j|=($>0?1:0)*F,F<<=1;switch(j){case 0:for(j=0,U=Math.pow(2,8),F=1;F!=U;)$=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=y,Z.val=w(Z.index++)),j|=($>0?1:0)*F,F<<=1;B=n(j);break;case 1:for(j=0,U=Math.pow(2,16),F=1;F!=U;)$=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=y,Z.val=w(Z.index++)),j|=($>0?1:0)*F,F<<=1;B=n(j);break;case 2:return""}for(S[3]=B,k=B,M.push(B);;){if(Z.index>g)return"";for(j=0,U=Math.pow(2,N),F=1;F!=U;)$=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=y,Z.val=w(Z.index++)),j|=($>0?1:0)*F,F<<=1;switch(B=j){case 0:for(j=0,U=Math.pow(2,8),F=1;F!=U;)$=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=y,Z.val=w(Z.index++)),j|=($>0?1:0)*F,F<<=1;S[C++]=n(j),B=C-1,_--;break;case 1:for(j=0,U=Math.pow(2,16),F=1;F!=U;)$=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=y,Z.val=w(Z.index++)),j|=($>0?1:0)*F,F<<=1;S[C++]=n(j),B=C-1,_--;break;case 2:return M.join("")}if(_==0&&(_=Math.pow(2,N),N++),S[B])R=S[B];else if(B===C)R=k+k.charAt(0);else return null;M.push(R),S[C++]=k+R.charAt(0),_--,k=R,_==0&&(_=Math.pow(2,N),N++)}}};return p})();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(cb)),cb.exports}var cX=lX();const pE=So(cX),uX=async(t,e)=>{const n=await t.users.findOne(e).exec();if(!n)throw new Error("User not found");const r=n.toJSON(),i=await t.progress.find({selector:{userId:e}}).exec(),a={type:"profile",u:r.id,n:r.name,tn:r.role==="teacher"?r.name:void 0,tp:r.phone||void 0,p:i.map(g=>({l:g.get("levelId"),s:g.get("score"),t:g.get("stars")}))},u=JSON.stringify(a);return pE.compressToEncodedURIComponent(u)},fX=async(t,e,n)=>{const r=await t.users.findOne(e).exec();if(!r)throw new Error("User not found");const i=await t.content.find({selector:{id:{$in:n}}}).exec(),a={type:"content",u:r.get("id"),n:r.get("name"),c:i.map(p=>p.toJSON())},u=pE.compressToEncodedURIComponent(JSON.stringify(a));return u.length>2500&&console.warn("Payload size warning:",u.length),u},hX=async(t,e,n)=>{const r=pE.decompressFromEncodedURIComponent(n);if(!r)throw new Error("Invalid QR Code (Decompression failed)");let i;try{i=JSON.parse(r)}catch{throw new Error("Invalid Data Format")}if(i.type==="profile"||!i.type&&i.p){const a=i;if(!a.u||!Array.isArray(a.p))throw new Error("Invalid Profile Data");let u=0,p=0;for(const g of a.p){const y=await t.progress.findOne({selector:{userId:e,levelId:g.l}}).exec();y?g.s>y.get("score")&&(await y.patch({score:g.s,stars:Math.max(g.t,y.get("stars")),timestamp:Date.now()}),u++):(await t.progress.insert({id:Ca(),userId:e,levelId:g.l,score:g.s,stars:g.t,timestamp:Date.now()}),u++,p+=g.t)}return VN({title:u>0?"Synced Progress":"Check-in Sync",type:"Progress",teacher:a.tn||a.n,phone:a.tp}),dX(),{success:!0,type:"profile",message:`Synced ${u} levels from ${a.n}`,details:{levelsUpdated:u,newStars:p,importerName:a.n}}}if(i.type==="content"){const a=i;if(!Array.isArray(a.c))throw new Error("Invalid Content Data");let u=0;for(const p of a.c){const g=await t.content.findOne(p.id).exec();g?await g.patch(p):await t.content.insert(p),u++}return VN({title:`Received ${u} Resources`,type:"Content",teacher:a.n}),{success:!0,type:"content",message:`Imported ${u} items from ${a.n}`,details:{itemsImported:u,importerName:a.n}}}throw new Error("Unknown Payload Type")},VN=t=>{try{const e={id:Date.now(),title:t.title,type:t.type,date:new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),teacher:t.teacher,phone:t.phone||"N/A"},n=JSON.parse(localStorage.getItem("sync_history")||"[]");localStorage.setItem("sync_history",JSON.stringify([e,...n].slice(0,20)))}catch(e){console.warn("Failed to save sync log",e)}},dX=()=>{try{const t=new Date().toISOString().split("T")[0],e=JSON.parse(localStorage.getItem("attendance_log")||"[]");e.includes(t)||(localStorage.setItem("attendance_log",JSON.stringify([...e,t])),console.log("Marked Attendance for",t))}catch(t){console.warn("Failed to mark attendance",t)}};function pX(){const{currentUser:t}=ws(),{db:e}=Ui(),[n,r]=re.useState(null),[i,a]=re.useState([]),[u,p]=re.useState(null),[g,y]=re.useState(""),[w,S]=re.useState(!1),[_,C]=re.useState(!1),N=async()=>{if(!(!t||!e)){S(!0);try{const L=await uX(e,t.id);y(L)}catch(L){console.error(L)}finally{S(!1)}}};re.useEffect(()=>{if(!e||n!=="content")return;(async()=>{const k=await e.content.find({selector:{type:{$in:["quiz","lesson"]}},limit:50}).exec();a(k.map(j=>j.toJSON()))})()},[e,n]);const R=async L=>{if(!(!e||!t)){S(!0),p(L);try{const k=await fX(e,t.id,[L]);y(k)}catch(k){console.error(k)}finally{S(!1)}}},M=()=>{g&&(navigator.clipboard.writeText(g),C(!0),setTimeout(()=>C(!1),2e3))};return n?n==="content"&&!u?O.jsxs("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:[O.jsxs("div",{className:"flex items-center justify-between mb-2",children:[O.jsx("button",{onClick:()=>r(null),className:"text-xs text-slate-400 hover:text-white",children:" Back"}),O.jsx("span",{className:"text-xs font-bold text-emerald-400",children:"Select Item"})]}),i.map(L=>O.jsxs("button",{onClick:()=>R(L.id),className:"w-full text-left p-3 rounded-lg bg-white/5 border border-white/10 hover:bg-emerald-500/20 transition-all",children:[O.jsx("p",{className:"font-bold text-white text-sm line-clamp-1",children:L.title}),O.jsxs("p",{className:"text-xs text-slate-500 uppercase",children:[L.type,"  ",L.medium]})]},L.id))]}):O.jsxs("div",{className:"flex flex-col items-center space-y-6 pt-2",children:[O.jsxs("div",{className:"w-full flex justify-between items-center px-2",children:[O.jsx("button",{onClick:()=>{r(null),p(null)},className:"text-xs text-slate-400 hover:text-white",children:" Change"}),O.jsx("span",{className:"text-sm font-bold text-white",children:n==="profile"?"My Progress":"Shared Content"}),O.jsx("div",{className:"w-8"})]}),w?O.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400 animate-pulse",children:"Generating..."}):O.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-2xl relative group",children:[O.jsx(oI,{value:g,size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"}),O.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-white/90 transition-opacity",children:O.jsx("span",{className:"text-black font-bold text-sm",children:"Scan to Sync"})})]}),O.jsx("p",{className:"text-slate-400 text-xs text-center max-w-xs",children:n==="profile"?"Contains your user ID and level progress.":"Contains the selected Quiz/Lesson data."}),O.jsxs("button",{onClick:M,className:"flex items-center gap-2 text-slate-500 hover:text-white transition-colors text-xs border border-white/10 px-3 py-1.5 rounded-full",children:[_?O.jsx(PL,{className:"w-3 h-3 text-green-400"}):O.jsx(HL,{className:"w-3 h-3"}),_?"Copied":"Copy Payload String"]})]}):O.jsxs("div",{className:"space-y-4",children:[O.jsx("h3",{className:"text-white font-bold mb-4",children:"What do you want to share?"}),O.jsxs("button",{onClick:()=>{r("profile"),N()},className:"w-full text-left p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-cyan-500/20 hover:border-cyan-500/50 transition-all flex items-center gap-4 group",children:[O.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 group-hover:bg-cyan-500/30 group-hover:text-cyan-200",children:O.jsx(e5,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h4",{className:"font-bold text-white",children:"My Progress"}),O.jsx("p",{className:"text-xs text-slate-400",children:"Sync scores and stars to another device."})]}),O.jsx(j0,{className:"w-5 h-5 text-slate-500 ml-auto group-hover:text-cyan-400"})]}),O.jsxs("button",{onClick:()=>r("content"),className:"w-full text-left p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-emerald-500/20 hover:border-emerald-500/50 transition-all flex items-center gap-4 group",children:[O.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center text-green-400 group-hover:bg-emerald-500/30 group-hover:text-emerald-200",children:O.jsx(Fd,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h4",{className:"font-bold text-white",children:"Educational Content"}),O.jsx("p",{className:"text-xs text-slate-400",children:"Share a specific Quiz or Lesson."})]}),O.jsx(j0,{className:"w-5 h-5 text-slate-500 ml-auto group-hover:text-emerald-400"})]})]})}var Rt;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Rt||(Rt={}));var HN=new Map([[Rt.QR_CODE,"QR_CODE"],[Rt.AZTEC,"AZTEC"],[Rt.CODABAR,"CODABAR"],[Rt.CODE_39,"CODE_39"],[Rt.CODE_93,"CODE_93"],[Rt.CODE_128,"CODE_128"],[Rt.DATA_MATRIX,"DATA_MATRIX"],[Rt.MAXICODE,"MAXICODE"],[Rt.ITF,"ITF"],[Rt.EAN_13,"EAN_13"],[Rt.EAN_8,"EAN_8"],[Rt.PDF_417,"PDF_417"],[Rt.RSS_14,"RSS_14"],[Rt.RSS_EXPANDED,"RSS_EXPANDED"],[Rt.UPC_A,"UPC_A"],[Rt.UPC_E,"UPC_E"],[Rt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),KN;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(KN||(KN={}));function mX(t){return Object.values(Rt).includes(t)}var fc;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(fc||(fc={}));var qa=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[fc.SCAN_TYPE_CAMERA,fc.SCAN_TYPE_FILE],t})(),lI=(function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!HN.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,HN.get(e))},t})(),GN=(function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),Dw;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Dw||(Dw={}));var cI=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Dw.UNKWOWN_ERROR}},t})(),uI=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function lo(t){return typeof t>"u"||t===null}function gX(t,e,n){return t>n?n:t<e?e:t}var ff=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),dr=(function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t})(),YN=(function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t})(),fI=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),u=Object.keys(e),p=0,g=u;p<g.length;p++){var y=g[p];if(a.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},t})(),$h={exports:{}},yX=$h.exports,WN;function vX(){return WN||(WN=1,(function(t,e){(function(n,r){r(e)})(yX,(function(n){function r(W){return W==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,o){W.__proto__=o}||function(W,o){for(var f in o)o.hasOwnProperty(f)&&(W[f]=o[f])};function a(W,o){i(W,o);function f(){this.constructor=W}W.prototype=o===null?Object.create(o):(f.prototype=o.prototype,new f)}function u(W,o){var f=Object.setPrototypeOf;f?f(W,o):W.__proto__=o}function p(W,o){o===void 0&&(o=W.constructor);var f=Error.captureStackTrace;f&&f(W,o)}var g=(function(W){a(o,W);function o(f){var d=this.constructor,v=W.call(this,f)||this;return Object.defineProperty(v,"name",{value:d.name,enumerable:!1}),u(v,d.prototype),p(v),v}return o})(Error);class y extends g{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}y.kind="Exception";class w extends y{}w.kind="ArgumentException";class S extends y{}S.kind="IllegalArgumentException";class _{constructor(o){if(this.binarizer=o,o===null)throw new S("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,f){return this.binarizer.getBlackRow(o,f)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,f,d,v){const c=this.binarizer.getLuminanceSource().crop(o,f,d,v);return new _(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class C extends y{static getChecksumInstance(){return new C}}C.kind="ChecksumException";class N{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class R{static arraycopy(o,f,d,v,c){for(;c--;)d[v++]=o[f++]}static currentTimeMillis(){return Date.now()}}class M extends y{}M.kind="IndexOutOfBoundsException";class L extends M{constructor(o=void 0,f=void 0){super(f),this.index=o,this.message=f}}L.kind="ArrayIndexOutOfBoundsException";class k{static fill(o,f){for(let d=0,v=o.length;d<v;d++)o[d]=f}static fillWithin(o,f,d,v){k.rangeCheck(o.length,f,d);for(let c=f;c<d;c++)o[c]=v}static rangeCheck(o,f,d){if(f>d)throw new S("fromIndex("+f+") > toIndex("+d+")");if(f<0)throw new L(f);if(d>o)throw new L(d)}static asList(...o){return o}static create(o,f,d){return Array.from({length:o}).map(c=>Array.from({length:f}).fill(d))}static createInt32Array(o,f,d){return Array.from({length:o}).map(c=>Int32Array.from({length:f}).fill(d))}static equals(o,f){if(!o||!f||!o.length||!f.length||o.length!==f.length)return!1;for(let d=0,v=o.length;d<v;d++)if(o[d]!==f[d])return!1;return!0}static hashCode(o){if(o===null)return 0;let f=1;for(const d of o)f=31*f+d;return f}static fillUint8Array(o,f){for(let d=0;d!==o.length;d++)o[d]=f}static copyOf(o,f){return o.slice(0,f)}static copyOfUint8Array(o,f){if(o.length<=f){const d=new Uint8Array(f);return d.set(o),d}return o.slice(0,f)}static copyOfRange(o,f,d){const v=d-f,c=new Int32Array(v);return R.arraycopy(o,f,c,0,v),c}static binarySearch(o,f,d){d===void 0&&(d=k.numberComparator);let v=0,c=o.length-1;for(;v<=c;){const h=c+v>>1,b=d(f,o[h]);if(b>0)v=h+1;else if(b<0)c=h-1;else return h}return-v-1}static numberComparator(o,f){return o-f}}class j{static numberOfTrailingZeros(o){let f;if(o===0)return 32;let d=31;return f=o<<16,f!==0&&(d-=16,o=f),f=o<<8,f!==0&&(d-=8,o=f),f=o<<4,f!==0&&(d-=4,o=f),f=o<<2,f!==0&&(d-=2,o=f),d-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let f=1;return o>>>16||(f+=16,o<<=16),o>>>24||(f+=8,o<<=8),o>>>28||(f+=4,o<<=4),o>>>30||(f+=2,o<<=2),f-=o>>>31,f}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,f){return Math.trunc(o/f)}static parseInt(o,f=void 0){return parseInt(o,f)}}j.MIN_VALUE_32_BITS=-2147483648,j.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ${constructor(o,f){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,f==null?this.bits=$.makeArray(o):this.bits=f)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const f=$.makeArray(o);R.arraycopy(this.bits,0,f,0,this.bits.length),this.bits=f}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const f=this.size;if(o>=f)return f;const d=this.bits;let v=Math.floor(o/32),c=d[v];c&=~((1<<(o&31))-1);const h=d.length;for(;c===0;){if(++v===h)return f;c=d[v]}const b=v*32+j.numberOfTrailingZeros(c);return b>f?f:b}getNextUnset(o){const f=this.size;if(o>=f)return f;const d=this.bits;let v=Math.floor(o/32),c=~d[v];c&=~((1<<(o&31))-1);const h=d.length;for(;c===0;){if(++v===h)return f;c=~d[v]}const b=v*32+j.numberOfTrailingZeros(c);return b>f?f:b}setBulk(o,f){this.bits[Math.floor(o/32)]=f}setRange(o,f){if(f<o||o<0||f>this.size)throw new S;if(f===o)return;f--;const d=Math.floor(o/32),v=Math.floor(f/32),c=this.bits;for(let h=d;h<=v;h++){const b=h>d?0:o&31,A=(2<<(h<v?31:f&31))-(1<<b);c[h]|=A}}clear(){const o=this.bits.length,f=this.bits;for(let d=0;d<o;d++)f[d]=0}isRange(o,f,d){if(f<o||o<0||f>this.size)throw new S;if(f===o)return!0;f--;const v=Math.floor(o/32),c=Math.floor(f/32),h=this.bits;for(let b=v;b<=c;b++){const x=b>v?0:o&31,I=(2<<(b<c?31:f&31))-(1<<x)&4294967295;if((h[b]&I)!==(d?I:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,f){if(f<0||f>32)throw new S("Num bits must be between 0 and 32");this.ensureCapacity(this.size+f);for(let d=f;d>0;d--)this.appendBit((o>>d-1&1)===1)}appendBitArray(o){const f=o.size;this.ensureCapacity(this.size+f);for(let d=0;d<f;d++)this.appendBit(o.get(d))}xor(o){if(this.size!==o.size)throw new S("Sizes don't match");const f=this.bits;for(let d=0,v=f.length;d<v;d++)f[d]^=o.bits[d]}toBytes(o,f,d,v){for(let c=0;c<v;c++){let h=0;for(let b=0;b<8;b++)this.get(o)&&(h|=1<<7-b),o++;f[d+c]=h}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),f=Math.floor((this.size-1)/32),d=f+1,v=this.bits;for(let c=0;c<d;c++){let h=v[c];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,o[f-c]=h}if(this.size!==d*32){const c=d*32-this.size;let h=o[0]>>>c;for(let b=1;b<d;b++){const x=o[b];h|=x<<32-c,o[b-1]=h,h=x>>>c}o[d-1]=h}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof $))return!1;const f=o;return this.size===f.size&&k.equals(this.bits,f.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let o="";for(let f=0,d=this.size;f<d;f++)(f&7)===0&&(o+=" "),o+=this.get(f)?"X":".";return o}clone(){return new $(this.size,this.bits.slice())}}var U;(function(W){W[W.OTHER=0]="OTHER",W[W.PURE_BARCODE=1]="PURE_BARCODE",W[W.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",W[W.TRY_HARDER=3]="TRY_HARDER",W[W.CHARACTER_SET=4]="CHARACTER_SET",W[W.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",W[W.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",W[W.ASSUME_GS1=7]="ASSUME_GS1",W[W.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",W[W.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",W[W.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var F=U;class B extends y{static getFormatInstance(){return new B}}B.kind="FormatException";var Z;(function(W){W[W.Cp437=0]="Cp437",W[W.ISO8859_1=1]="ISO8859_1",W[W.ISO8859_2=2]="ISO8859_2",W[W.ISO8859_3=3]="ISO8859_3",W[W.ISO8859_4=4]="ISO8859_4",W[W.ISO8859_5=5]="ISO8859_5",W[W.ISO8859_6=6]="ISO8859_6",W[W.ISO8859_7=7]="ISO8859_7",W[W.ISO8859_8=8]="ISO8859_8",W[W.ISO8859_9=9]="ISO8859_9",W[W.ISO8859_10=10]="ISO8859_10",W[W.ISO8859_11=11]="ISO8859_11",W[W.ISO8859_13=12]="ISO8859_13",W[W.ISO8859_14=13]="ISO8859_14",W[W.ISO8859_15=14]="ISO8859_15",W[W.ISO8859_16=15]="ISO8859_16",W[W.SJIS=16]="SJIS",W[W.Cp1250=17]="Cp1250",W[W.Cp1251=18]="Cp1251",W[W.Cp1252=19]="Cp1252",W[W.Cp1256=20]="Cp1256",W[W.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",W[W.UTF8=22]="UTF8",W[W.ASCII=23]="ASCII",W[W.Big5=24]="Big5",W[W.GB18030=25]="GB18030",W[W.EUC_KR=26]="EUC_KR"})(Z||(Z={}));class le{constructor(o,f,d,...v){this.valueIdentifier=o,this.name=d,typeof f=="number"?this.values=Int32Array.from([f]):this.values=f,this.otherEncodingNames=v,le.VALUE_IDENTIFIER_TO_ECI.set(o,this),le.NAME_TO_ECI.set(d,this);const c=this.values;for(let h=0,b=c.length;h!==b;h++){const x=c[h];le.VALUES_TO_ECI.set(x,this)}for(const h of v)le.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new B("incorect value");const f=le.VALUES_TO_ECI.get(o);if(f===void 0)throw new B("incorect value");return f}static getCharacterSetECIByName(o){const f=le.NAME_TO_ECI.get(o);if(f===void 0)throw new B("incorect value");return f}equals(o){if(!(o instanceof le))return!1;const f=o;return this.getName()===f.getName()}}le.VALUE_IDENTIFIER_TO_ECI=new Map,le.VALUES_TO_ECI=new Map,le.NAME_TO_ECI=new Map,le.Cp437=new le(Z.Cp437,Int32Array.from([0,2]),"Cp437"),le.ISO8859_1=new le(Z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),le.ISO8859_2=new le(Z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),le.ISO8859_3=new le(Z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),le.ISO8859_4=new le(Z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),le.ISO8859_5=new le(Z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),le.ISO8859_6=new le(Z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),le.ISO8859_7=new le(Z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),le.ISO8859_8=new le(Z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),le.ISO8859_9=new le(Z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),le.ISO8859_10=new le(Z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),le.ISO8859_11=new le(Z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),le.ISO8859_13=new le(Z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),le.ISO8859_14=new le(Z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),le.ISO8859_15=new le(Z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),le.ISO8859_16=new le(Z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),le.SJIS=new le(Z.SJIS,20,"SJIS","Shift_JIS"),le.Cp1250=new le(Z.Cp1250,21,"Cp1250","windows-1250"),le.Cp1251=new le(Z.Cp1251,22,"Cp1251","windows-1251"),le.Cp1252=new le(Z.Cp1252,23,"Cp1252","windows-1252"),le.Cp1256=new le(Z.Cp1256,24,"Cp1256","windows-1256"),le.UnicodeBigUnmarked=new le(Z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),le.UTF8=new le(Z.UTF8,26,"UTF8","UTF-8"),le.ASCII=new le(Z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),le.Big5=new le(Z.Big5,28,"Big5"),le.GB18030=new le(Z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),le.EUC_KR=new le(Z.EUC_KR,30,"EUC_KR","EUC-KR");class Ne extends y{}Ne.kind="UnsupportedOperationException";class G{static decode(o,f){const d=this.encodingName(f);return this.customDecoder?this.customDecoder(o,d):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(d)?this.decodeFallback(o,d):new TextDecoder(d).decode(o)}static shouldDecodeOnFallback(o){return!G.isBrowser()&&o==="ISO-8859-1"}static encode(o,f){const d=this.encodingName(f);return this.customEncoder?this.customEncoder(o,d):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof le?o:le.getCharacterSetECIByName(o)}static decodeFallback(o,f){const d=this.encodingCharacterSet(f);if(G.isDecodeFallbackSupported(d)){let v="";for(let c=0,h=o.length;c<h;c++){let b=o[c].toString(16);b.length<2&&(b="0"+b),v+="%"+b}return decodeURIComponent(v)}if(d.equals(le.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new Ne(`Encoding ${this.encodingName(f)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(le.UTF8)||o.equals(le.ISO8859_1)||o.equals(le.ASCII)}static encodeFallback(o){const d=btoa(unescape(encodeURIComponent(o))).split(""),v=[];for(let c=0;c<d.length;c++)v.push(d[c].charCodeAt(0));return new Uint8Array(v)}}class ce{static castAsNonUtf8Char(o,f=null){const d=f?f.getName():this.ISO88591;return G.decode(new Uint8Array([o]),d)}static guessEncoding(o,f){if(f!=null&&f.get(F.CHARACTER_SET)!==void 0)return f.get(F.CHARACTER_SET).toString();const d=o.length;let v=!0,c=!0,h=!0,b=0,x=0,A=0,I=0,P=0,z=0,H=0,X=0,J=0,Q=0,fe=0;const me=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let ge=0;ge<d&&(v||c||h);ge++){const ye=o[ge]&255;h&&(b>0?(ye&128)===0?h=!1:b--:(ye&128)!==0&&((ye&64)===0?h=!1:(b++,(ye&32)===0?x++:(b++,(ye&16)===0?A++:(b++,(ye&8)===0?I++:h=!1))))),v&&(ye>127&&ye<160?v=!1:ye>159&&(ye<192||ye===215||ye===247)&&fe++),c&&(P>0?ye<64||ye===127||ye>252?c=!1:P--:ye===128||ye===160||ye>239?c=!1:ye>160&&ye<224?(z++,X=0,H++,H>J&&(J=H)):ye>127?(P++,H=0,X++,X>Q&&(Q=X)):(H=0,X=0))}return h&&b>0&&(h=!1),c&&P>0&&(c=!1),h&&(me||x+A+I>0)?ce.UTF8:c&&(ce.ASSUME_SHIFT_JIS||J>=3||Q>=3)?ce.SHIFT_JIS:v&&c?J===2&&z===2||fe*10>=d?ce.SHIFT_JIS:ce.ISO88591:v?ce.ISO88591:c?ce.SHIFT_JIS:h?ce.UTF8:ce.PLATFORM_DEFAULT_ENCODING}static format(o,...f){let d=-1;function v(h,b,x,A,I,P){if(h==="%%")return"%";if(f[++d]===void 0)return;h=A?parseInt(A.substr(1)):void 0;let z=I?parseInt(I.substr(1)):void 0,H;switch(P){case"s":H=f[d];break;case"c":H=f[d][0];break;case"f":H=parseFloat(f[d]).toFixed(h);break;case"p":H=parseFloat(f[d]).toPrecision(h);break;case"e":H=parseFloat(f[d]).toExponential(h);break;case"x":H=parseInt(f[d]).toString(z||16);break;case"d":H=parseFloat(parseInt(f[d],z||10).toPrecision(h)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(z);let X=parseInt(x),J=x&&x[0]+""=="0"?"0":" ";for(;H.length<X;)H=b!==void 0?H+J:J+H;return H}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(c,v)}static getBytes(o,f){return G.encode(o,f)}static getCharCode(o,f=0){return o.charCodeAt(f)}static getCharAt(o){return String.fromCharCode(o)}}ce.SHIFT_JIS=le.SJIS.getName(),ce.GB2312="GB2312",ce.ISO88591=le.ISO8859_1.getName(),ce.EUC_JP="EUC_JP",ce.UTF8=le.UTF8.getName(),ce.PLATFORM_DEFAULT_ENCODING=ce.UTF8,ce.ASSUME_SHIFT_JIS=!1;class se{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=ce.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,f,d){for(let v=f;f<f+d;v++)this.append(o[v]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,f){this.value=this.value.substr(0,o)+f+this.value.substr(o+1)}substring(o,f){return this.value.substring(o,f)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,f){this.value=this.value.substr(0,o)+f+this.value.substr(o+f.length)}}class Ee{constructor(o,f,d,v){if(this.width=o,this.height=f,this.rowSize=d,this.bits=v,f==null&&(f=o),this.height=f,o<1||f<1)throw new S("Both dimensions must be greater than 0");d==null&&(d=Math.floor((o+31)/32)),this.rowSize=d,v==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const f=o.length,d=o[0].length,v=new Ee(d,f);for(let c=0;c<f;c++){const h=o[c];for(let b=0;b<d;b++)h[b]&&v.set(b,c)}return v}static parseFromString(o,f,d){if(o===null)throw new S("stringRepresentation cannot be null");const v=new Array(o.length);let c=0,h=0,b=-1,x=0,A=0;for(;A<o.length;)if(o.charAt(A)===`
`||o.charAt(A)==="\r"){if(c>h){if(b===-1)b=c-h;else if(c-h!==b)throw new S("row lengths do not match");h=c,x++}A++}else if(o.substring(A,A+f.length)===f)A+=f.length,v[c]=!0,c++;else if(o.substring(A,A+d.length)===d)A+=d.length,v[c]=!1,c++;else throw new S("illegal character encountered: "+o.substring(A));if(c>h){if(b===-1)b=c-h;else if(c-h!==b)throw new S("row lengths do not match");x++}const I=new Ee(b,x);for(let P=0;P<c;P++)v[P]&&I.set(Math.floor(P%b),Math.floor(P/b));return I}get(o,f){const d=f*this.rowSize+Math.floor(o/32);return(this.bits[d]>>>(o&31)&1)!==0}set(o,f){const d=f*this.rowSize+Math.floor(o/32);this.bits[d]|=1<<(o&31)&4294967295}unset(o,f){const d=f*this.rowSize+Math.floor(o/32);this.bits[d]&=~(1<<(o&31)&4294967295)}flip(o,f){const d=f*this.rowSize+Math.floor(o/32);this.bits[d]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new S("input matrix dimensions do not match");const f=new $(Math.floor(this.width/32)+1),d=this.rowSize,v=this.bits;for(let c=0,h=this.height;c<h;c++){const b=c*d,x=o.getRow(c,f).getBitArray();for(let A=0;A<d;A++)v[b+A]^=x[A]}}clear(){const o=this.bits,f=o.length;for(let d=0;d<f;d++)o[d]=0}setRegion(o,f,d,v){if(f<0||o<0)throw new S("Left and top must be nonnegative");if(v<1||d<1)throw new S("Height and width must be at least 1");const c=o+d,h=f+v;if(h>this.height||c>this.width)throw new S("The region must fit inside the matrix");const b=this.rowSize,x=this.bits;for(let A=f;A<h;A++){const I=A*b;for(let P=o;P<c;P++)x[I+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(o,f){f==null||f.getSize()<this.width?f=new $(this.width):f.clear();const d=this.rowSize,v=this.bits,c=o*d;for(let h=0;h<d;h++)f.setBulk(h*32,v[c+h]);return f}setRow(o,f){R.arraycopy(f.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),f=this.getHeight();let d=new $(o),v=new $(o);for(let c=0,h=Math.floor((f+1)/2);c<h;c++)d=this.getRow(c,d),v=this.getRow(f-1-c,v),d.reverse(),v.reverse(),this.setRow(c,v),this.setRow(f-1-c,d)}getEnclosingRectangle(){const o=this.width,f=this.height,d=this.rowSize,v=this.bits;let c=o,h=f,b=-1,x=-1;for(let A=0;A<f;A++)for(let I=0;I<d;I++){const P=v[A*d+I];if(P!==0){if(A<h&&(h=A),A>x&&(x=A),I*32<c){let z=0;for(;(P<<31-z&4294967295)===0;)z++;I*32+z<c&&(c=I*32+z)}if(I*32+31>b){let z=31;for(;!(P>>>z);)z--;I*32+z>b&&(b=I*32+z)}}}return b<c||x<h?null:Int32Array.from([c,h,b-c+1,x-h+1])}getTopLeftOnBit(){const o=this.rowSize,f=this.bits;let d=0;for(;d<f.length&&f[d]===0;)d++;if(d===f.length)return null;const v=d/o;let c=d%o*32;const h=f[d];let b=0;for(;(h<<31-b&4294967295)===0;)b++;return c+=b,Int32Array.from([c,v])}getBottomRightOnBit(){const o=this.rowSize,f=this.bits;let d=f.length-1;for(;d>=0&&f[d]===0;)d--;if(d<0)return null;const v=Math.floor(d/o);let c=Math.floor(d%o)*32;const h=f[d];let b=31;for(;!(h>>>b);)b--;return c+=b,Int32Array.from([c,v])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof Ee))return!1;const f=o;return this.width===f.width&&this.height===f.height&&this.rowSize===f.rowSize&&k.equals(this.bits,f.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+k.hashCode(this.bits),o}toString(o="X ",f="  ",d=`
`){return this.buildToString(o,f,d)}buildToString(o,f,d){let v=new se;for(let c=0,h=this.height;c<h;c++){for(let b=0,x=this.width;b<x;b++)v.append(this.get(b,c)?o:f);v.append(d)}return v.toString()}clone(){return new Ee(this.width,this.height,this.rowSize,this.bits.slice())}}class ue extends y{static getNotFoundInstance(){return new ue}}ue.kind="NotFoundException";class ee extends N{constructor(o){super(o),this.luminances=ee.EMPTY,this.buckets=new Int32Array(ee.LUMINANCE_BUCKETS)}getBlackRow(o,f){const d=this.getLuminanceSource(),v=d.getWidth();f==null||f.getSize()<v?f=new $(v):f.clear(),this.initArrays(v);const c=d.getRow(o,this.luminances),h=this.buckets;for(let x=0;x<v;x++)h[(c[x]&255)>>ee.LUMINANCE_SHIFT]++;const b=ee.estimateBlackPoint(h);if(v<3)for(let x=0;x<v;x++)(c[x]&255)<b&&f.set(x);else{let x=c[0]&255,A=c[1]&255;for(let I=1;I<v-1;I++){const P=c[I+1]&255;(A*4-x-P)/2<b&&f.set(I),x=A,A=P}}return f}getBlackMatrix(){const o=this.getLuminanceSource(),f=o.getWidth(),d=o.getHeight(),v=new Ee(f,d);this.initArrays(f);const c=this.buckets;for(let x=1;x<5;x++){const A=Math.floor(d*x/5),I=o.getRow(A,this.luminances),P=Math.floor(f*4/5);for(let z=Math.floor(f/5);z<P;z++){const H=I[z]&255;c[H>>ee.LUMINANCE_SHIFT]++}}const h=ee.estimateBlackPoint(c),b=o.getMatrix();for(let x=0;x<d;x++){const A=x*f;for(let I=0;I<f;I++)(b[A+I]&255)<h&&v.set(I,x)}return v}createBinarizer(o){return new ee(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const f=this.buckets;for(let d=0;d<ee.LUMINANCE_BUCKETS;d++)f[d]=0}static estimateBlackPoint(o){const f=o.length;let d=0,v=0,c=0;for(let I=0;I<f;I++)o[I]>c&&(v=I,c=o[I]),o[I]>d&&(d=o[I]);let h=0,b=0;for(let I=0;I<f;I++){const P=I-v,z=o[I]*P*P;z>b&&(h=I,b=z)}if(v>h){const I=v;v=h,h=I}if(h-v<=f/16)throw new ue;let x=h-1,A=-1;for(let I=h-1;I>v;I--){const P=I-v,z=P*P*(h-I)*(d-o[I]);z>A&&(x=I,A=z)}return x<<ee.LUMINANCE_SHIFT}}ee.LUMINANCE_BITS=5,ee.LUMINANCE_SHIFT=8-ee.LUMINANCE_BITS,ee.LUMINANCE_BUCKETS=1<<ee.LUMINANCE_BITS,ee.EMPTY=Uint8ClampedArray.from([0]);class de extends ee{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),f=o.getWidth(),d=o.getHeight();if(f>=de.MINIMUM_DIMENSION&&d>=de.MINIMUM_DIMENSION){const v=o.getMatrix();let c=f>>de.BLOCK_SIZE_POWER;(f&de.BLOCK_SIZE_MASK)!==0&&c++;let h=d>>de.BLOCK_SIZE_POWER;(d&de.BLOCK_SIZE_MASK)!==0&&h++;const b=de.calculateBlackPoints(v,c,h,f,d),x=new Ee(f,d);de.calculateThresholdForBlock(v,c,h,f,d,b,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new de(o)}static calculateThresholdForBlock(o,f,d,v,c,h,b){const x=c-de.BLOCK_SIZE,A=v-de.BLOCK_SIZE;for(let I=0;I<d;I++){let P=I<<de.BLOCK_SIZE_POWER;P>x&&(P=x);const z=de.cap(I,2,d-3);for(let H=0;H<f;H++){let X=H<<de.BLOCK_SIZE_POWER;X>A&&(X=A);const J=de.cap(H,2,f-3);let Q=0;for(let me=-2;me<=2;me++){const ge=h[z+me];Q+=ge[J-2]+ge[J-1]+ge[J]+ge[J+1]+ge[J+2]}const fe=Q/25;de.thresholdBlock(o,X,P,fe,v,b)}}}static cap(o,f,d){return o<f?f:o>d?d:o}static thresholdBlock(o,f,d,v,c,h){for(let b=0,x=d*c+f;b<de.BLOCK_SIZE;b++,x+=c)for(let A=0;A<de.BLOCK_SIZE;A++)(o[x+A]&255)<=v&&h.set(f+A,d+b)}static calculateBlackPoints(o,f,d,v,c){const h=c-de.BLOCK_SIZE,b=v-de.BLOCK_SIZE,x=new Array(d);for(let A=0;A<d;A++){x[A]=new Int32Array(f);let I=A<<de.BLOCK_SIZE_POWER;I>h&&(I=h);for(let P=0;P<f;P++){let z=P<<de.BLOCK_SIZE_POWER;z>b&&(z=b);let H=0,X=255,J=0;for(let fe=0,me=I*v+z;fe<de.BLOCK_SIZE;fe++,me+=v){for(let ge=0;ge<de.BLOCK_SIZE;ge++){const ye=o[me+ge]&255;H+=ye,ye<X&&(X=ye),ye>J&&(J=ye)}if(J-X>de.MIN_DYNAMIC_RANGE)for(fe++,me+=v;fe<de.BLOCK_SIZE;fe++,me+=v)for(let ge=0;ge<de.BLOCK_SIZE;ge++)H+=o[me+ge]&255}let Q=H>>de.BLOCK_SIZE_POWER*2;if(J-X<=de.MIN_DYNAMIC_RANGE&&(Q=X/2,A>0&&P>0)){const fe=(x[A-1][P]+2*x[A][P-1]+x[A-1][P-1])/4;X<fe&&(Q=fe)}x[A][P]=Q}}return x}}de.BLOCK_SIZE_POWER=3,de.BLOCK_SIZE=1<<de.BLOCK_SIZE_POWER,de.BLOCK_SIZE_MASK=de.BLOCK_SIZE-1,de.MINIMUM_DIMENSION=de.BLOCK_SIZE*5,de.MIN_DYNAMIC_RANGE=24;class we{constructor(o,f){this.width=o,this.height=f}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,f,d,v){throw new Ne("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ne("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ne("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let f=new se;for(let d=0;d<this.height;d++){const v=this.getRow(d,o);for(let c=0;c<this.width;c++){const h=v[c]&255;let b;h<64?b="#":h<128?b="+":h<192?b=".":b=" ",f.append(b)}f.append(`
`)}return f.toString()}}class Oe extends we{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,f){const d=this.delegate.getRow(o,f),v=this.getWidth();for(let c=0;c<v;c++)d[c]=255-(d[c]&255);return d}getMatrix(){const o=this.delegate.getMatrix(),f=this.getWidth()*this.getHeight(),d=new Uint8ClampedArray(f);for(let v=0;v<f;v++)d[v]=255-(o[v]&255);return d}isCropSupported(){return this.delegate.isCropSupported()}crop(o,f,d,v){return new Oe(this.delegate.crop(o,f,d,v))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Oe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Oe(this.delegate.rotateCounterClockwise45())}}class pe extends we{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=pe.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const f=o.getContext("2d").getImageData(0,0,o.width,o.height);return pe.toGrayscaleBuffer(f.data,o.width,o.height)}static toGrayscaleBuffer(o,f,d){const v=new Uint8ClampedArray(f*d);for(let c=0,h=0,b=o.length;c<b;c+=4,h++){let x;if(o[c+3]===0)x=255;else{const I=o[c],P=o[c+1],z=o[c+2];x=306*I+601*P+117*z+512>>10}v[h]=x}return v}getRow(o,f){if(o<0||o>=this.getHeight())throw new S("Requested row is outside the image: "+o);const d=this.getWidth(),v=o*d;return f===null?f=this.buffer.slice(v,v+d):(f.length<d&&(f=new Uint8ClampedArray(d)),f.set(this.buffer.slice(v,v+d))),f}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,f,d,v){return super.crop(o,f,d,v),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const f=this.getTempCanvasElement(),d=f.getContext("2d"),v=o*pe.DEGREE_TO_RADIANS,c=this.canvas.width,h=this.canvas.height,b=Math.ceil(Math.abs(Math.cos(v))*c+Math.abs(Math.sin(v))*h),x=Math.ceil(Math.abs(Math.sin(v))*c+Math.abs(Math.cos(v))*h);return f.width=b,f.height=x,d.translate(b/2,x/2),d.rotate(v),d.drawImage(this.canvas,c/-2,h/-2),this.buffer=pe.makeBufferFromCanvasImageData(f),this}invert(){return new Oe(this)}}pe.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(o,f,d){this.deviceId=o,this.label=f,this.kind="videoinput",this.groupId=d||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||window||self||window||void 0)&&(globalThis||window||self||window||void 0).__awaiter||function(W,o,f,d){function v(c){return c instanceof f?c:new f(function(h){h(c)})}return new(f||(f=Promise))(function(c,h){function b(I){try{A(d.next(I))}catch(P){h(P)}}function x(I){try{A(d.throw(I))}catch(P){h(P)}}function A(I){I.done?c(I.value):v(I.value).then(b,x)}A((d=d.apply(W,o||[])).next())})};class ae{constructor(o,f=500,d){this.reader=o,this.timeBetweenScansMillis=f,this._hints=d,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),f=[];for(const d of o){const v=d.kind==="video"?"videoinput":d.kind;if(v!=="videoinput")continue;const c=d.deviceId||d.id,h=d.label||`Video device ${f.length+1}`,b=d.groupId,x={deviceId:c,label:h,kind:v,groupId:b};f.push(x)}return f})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(f=>new K(f.deviceId,f.label))})}findDeviceById(o){return oe(this,void 0,void 0,function*(){const f=yield this.listVideoInputDevices();return f?f.find(d=>d.deviceId===o):null})}decodeFromInputVideoDevice(o,f){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,f)})}decodeOnceFromVideoDevice(o,f){return oe(this,void 0,void 0,function*(){this.reset();let d;o?d={deviceId:{exact:o}}:d={facingMode:"environment"};const v={video:d};return yield this.decodeOnceFromConstraints(v,f)})}decodeOnceFromConstraints(o,f){return oe(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(d,f)})}decodeOnceFromStream(o,f){return oe(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(o,f);return yield this.decodeOnce(d)})}decodeFromInputVideoDeviceContinuously(o,f,d){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,f,d)})}decodeFromVideoDevice(o,f,d){return oe(this,void 0,void 0,function*(){let v;o?v={deviceId:{exact:o}}:v={facingMode:"environment"};const c={video:v};return yield this.decodeFromConstraints(c,f,d)})}decodeFromConstraints(o,f,d){return oe(this,void 0,void 0,function*(){const v=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(v,f,d)})}decodeFromStream(o,f,d){return oe(this,void 0,void 0,function*(){this.reset();const v=yield this.attachStreamToVideo(o,f);return yield this.decodeContinuously(v,d)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,f){return oe(this,void 0,void 0,function*(){const d=this.prepareVideoElement(f);return this.addVideoSource(d,o),this.videoElement=d,this.stream=o,yield this.playVideoOnLoadAsync(d),d})}playVideoOnLoadAsync(o){return new Promise((f,d)=>this.playVideoOnLoad(o,()=>f()))}playVideoOnLoad(o,f){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",f),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,f){const d=document.getElementById(o);if(!d)throw new w(`element with id '${o}' not found`);if(d.nodeName.toLowerCase()!==f.toLowerCase())throw new w(`element with id '${o}' must be an ${f} element`);return d}decodeFromImage(o,f){if(!o&&!f)throw new w("either imageElement with a src set or an url must be provided");return f&&!o?this.decodeFromImageUrl(f):this.decodeFromImageElement(o)}decodeFromVideo(o,f){if(!o&&!f)throw new w("Either an element with a src set or an URL must be provided");return f&&!o?this.decodeFromVideoUrl(f):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,f,d){if(o===void 0&&f===void 0)throw new w("Either an element with a src set or an URL must be provided");return f&&!o?this.decodeFromVideoUrlContinuously(f,d):this.decodeFromVideoElementContinuously(o,d)}decodeFromImageElement(o){if(!o)throw new w("An image element must be provided.");this.reset();const f=this.prepareImageElement(o);this.imageElement=f;let d;return this.isImageLoaded(f)?d=this.decodeOnce(f,!1,!0):d=this._decodeOnLoadImage(f),d}decodeFromVideoElement(o){const f=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(f)}decodeFromVideoElementContinuously(o,f){const d=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(d,f)}_decodeFromVideoElementSetup(o){if(!o)throw new w("A video element must be provided.");this.reset();const f=this.prepareVideoElement(o);return this.videoElement=f,f}decodeFromImageUrl(o){if(!o)throw new w("An URL must be provided.");this.reset();const f=this.prepareImageElement();this.imageElement=f;const d=this._decodeOnLoadImage(f);return f.src=o,d}decodeFromVideoUrl(o){if(!o)throw new w("An URL must be provided.");this.reset();const f=this.prepareVideoElement(),d=this.decodeFromVideoElement(f);return f.src=o,d}decodeFromVideoUrlContinuously(o,f){if(!o)throw new w("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),v=this.decodeFromVideoElementContinuously(d,f);return d.src=o,v}_decodeOnLoadImage(o){return new Promise((f,d)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(f,d),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,f){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,f)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let f;return typeof o>"u"&&(f=document.createElement("img"),f.width=200,f.height=200),typeof o=="string"&&(f=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(f=o),f}prepareVideoElement(o){let f;return!o&&typeof document<"u"&&(f=document.createElement("video"),f.width=200,f.height=200),typeof o=="string"&&(f=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(f=o),f.setAttribute("autoplay","true"),f.setAttribute("muted","true"),f.setAttribute("playsinline","true"),f}decodeOnce(o,f=!0,d=!0){this._stopAsyncDecode=!1;const v=(c,h)=>{if(this._stopAsyncDecode){h(new ue("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const b=this.decode(o);c(b)}catch(b){const x=f&&b instanceof ue,I=(b instanceof C||b instanceof B)&&d;if(x||I)return setTimeout(v,this._timeBetweenDecodingAttempts,c,h);h(b)}};return new Promise((c,h)=>v(c,h))}decodeContinuously(o,f){this._stopContinuousDecode=!1;const d=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const v=this.decode(o);f(v,null),setTimeout(d,this.timeBetweenScansMillis)}catch(v){f(null,v);const c=v instanceof C||v instanceof B,h=v instanceof ue;(c||h)&&setTimeout(d,this._timeBetweenDecodingAttempts)}};d()}decode(o){const f=this.createBinaryBitmap(o);return this.decodeBitmap(f)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,f,d){f||(f={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),d||(d=this.captureCanvasContext),d.drawImage(o,f.sx,f.sy,f.sWidth,f.sHeight,f.dx,f.dy,f.dWidth,f.dHeight)}drawImageOnCanvas(o,f,d=this.captureCanvasContext){f||(f={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),d||(d=this.captureCanvasContext),d.drawImage(o,f.sx,f.sy,f.sWidth,f.sHeight,f.dx,f.dy,f.dWidth,f.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const f=this.getCaptureCanvas(o),d=new pe(f),v=new de(d);return new _(v)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const d=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=d}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const f=this.createCaptureCanvas(o);this.captureCanvas=f}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const f=document.createElement("canvas");let d,v;return typeof o<"u"&&(o instanceof HTMLVideoElement?(d=o.videoWidth,v=o.videoHeight):o instanceof HTMLImageElement&&(d=o.naturalWidth||o.width,v=o.naturalHeight||o.height)),f.style.width=d+"px",f.style.height=v+"px",f.width=d,f.height=v,f}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,f){try{o.srcObject=f}catch{o.src=URL.createObjectURL(f)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class Y{constructor(o,f,d=f==null?0:8*f.length,v,c,h=R.currentTimeMillis()){this.text=o,this.rawBytes=f,this.numBits=d,this.resultPoints=v,this.format=c,this.timestamp=h,this.text=o,this.rawBytes=f,d==null?this.numBits=f==null?0:8*f.length:this.numBits=d,this.resultPoints=v,this.format=c,this.resultMetadata=null,h==null?this.timestamp=R.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,f){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,f)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const f=this.resultPoints;if(f===null)this.resultPoints=o;else if(o!==null&&o.length>0){const d=new Array(f.length+o.length);R.arraycopy(f,0,d,0,f.length),R.arraycopy(o,0,d,f.length,o.length),this.resultPoints=d}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ie;(function(W){W[W.AZTEC=0]="AZTEC",W[W.CODABAR=1]="CODABAR",W[W.CODE_39=2]="CODE_39",W[W.CODE_93=3]="CODE_93",W[W.CODE_128=4]="CODE_128",W[W.DATA_MATRIX=5]="DATA_MATRIX",W[W.EAN_8=6]="EAN_8",W[W.EAN_13=7]="EAN_13",W[W.ITF=8]="ITF",W[W.MAXICODE=9]="MAXICODE",W[W.PDF_417=10]="PDF_417",W[W.QR_CODE=11]="QR_CODE",W[W.RSS_14=12]="RSS_14",W[W.RSS_EXPANDED=13]="RSS_EXPANDED",W[W.UPC_A=14]="UPC_A",W[W.UPC_E=15]="UPC_E",W[W.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ie||(ie={}));var be=ie,Ye;(function(W){W[W.OTHER=0]="OTHER",W[W.ORIENTATION=1]="ORIENTATION",W[W.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",W[W.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",W[W.ISSUE_NUMBER=4]="ISSUE_NUMBER",W[W.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",W[W.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",W[W.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",W[W.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",W[W.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",W[W.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ye||(Ye={}));var Ve=Ye;class $e{constructor(o,f,d,v,c=-1,h=-1){this.rawBytes=o,this.text=f,this.byteSegments=d,this.ecLevel=v,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=h,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class bt{exp(o){return this.expTable[o]}log(o){if(o===0)throw new S;return this.logTable[o]}static addOrSubtract(o,f){return o^f}}class xe{constructor(o,f){if(f.length===0)throw new S;this.field=o;const d=f.length;if(d>1&&f[0]===0){let v=1;for(;v<d&&f[v]===0;)v++;v===d?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(d-v),R.arraycopy(f,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=f}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const f=this.coefficients;let d;if(o===1){d=0;for(let h=0,b=f.length;h!==b;h++){const x=f[h];d=bt.addOrSubtract(d,x)}return d}d=f[0];const v=f.length,c=this.field;for(let h=1;h<v;h++)d=bt.addOrSubtract(c.multiply(o,d),f[h]);return d}addOrSubtract(o){if(!this.field.equals(o.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let f=this.coefficients,d=o.coefficients;if(f.length>d.length){const h=f;f=d,d=h}let v=new Int32Array(d.length);const c=d.length-f.length;R.arraycopy(d,0,v,0,c);for(let h=c;h<d.length;h++)v[h]=bt.addOrSubtract(f[h-c],d[h]);return new xe(this.field,v)}multiply(o){if(!this.field.equals(o.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const f=this.coefficients,d=f.length,v=o.coefficients,c=v.length,h=new Int32Array(d+c-1),b=this.field;for(let x=0;x<d;x++){const A=f[x];for(let I=0;I<c;I++)h[x+I]=bt.addOrSubtract(h[x+I],b.multiply(A,v[I]))}return new xe(b,h)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const f=this.coefficients.length,d=this.field,v=new Int32Array(f),c=this.coefficients;for(let h=0;h<f;h++)v[h]=d.multiply(c[h],o);return new xe(d,v)}multiplyByMonomial(o,f){if(o<0)throw new S;if(f===0)return this.field.getZero();const d=this.coefficients,v=d.length,c=new Int32Array(v+o),h=this.field;for(let b=0;b<v;b++)c[b]=h.multiply(d[b],f);return new xe(h,c)}divide(o){if(!this.field.equals(o.field))throw new S("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new S("Divide by 0");const f=this.field;let d=f.getZero(),v=this;const c=o.getCoefficient(o.getDegree()),h=f.inverse(c);for(;v.getDegree()>=o.getDegree()&&!v.isZero();){const b=v.getDegree()-o.getDegree(),x=f.multiply(v.getCoefficient(v.getDegree()),h),A=o.multiplyByMonomial(b,x),I=f.buildMonomial(b,x);d=d.addOrSubtract(I),v=v.addOrSubtract(A)}return[d,v]}toString(){let o="";for(let f=this.getDegree();f>=0;f--){let d=this.getCoefficient(f);if(d!==0){if(d<0?(o+=" - ",d=-d):o.length>0&&(o+=" + "),f===0||d!==1){const v=this.field.log(d);v===0?o+="1":v===1?o+="a":(o+="a^",o+=v)}f!==0&&(f===1?o+="x":(o+="x^",o+=f))}}return o}}class Se extends y{}Se.kind="ArithmeticException";class Me extends bt{constructor(o,f,d){super(),this.primitive=o,this.size=f,this.generatorBase=d;const v=new Int32Array(f);let c=1;for(let b=0;b<f;b++)v[b]=c,c*=2,c>=f&&(c^=o,c&=f-1);this.expTable=v;const h=new Int32Array(f);for(let b=0;b<f-1;b++)h[v[b]]=b;this.logTable=h,this.zero=new xe(this,Int32Array.from([0])),this.one=new xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,f){if(o<0)throw new S;if(f===0)return this.zero;const d=new Int32Array(o+1);return d[0]=f,new xe(this,d)}inverse(o){if(o===0)throw new Se;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,f){return o===0||f===0?0:this.expTable[(this.logTable[o]+this.logTable[f])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+j.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Me.AZTEC_DATA_12=new Me(4201,4096,1),Me.AZTEC_DATA_10=new Me(1033,1024,1),Me.AZTEC_DATA_6=new Me(67,64,1),Me.AZTEC_PARAM=new Me(19,16,1),Me.QR_CODE_FIELD_256=new Me(285,256,0),Me.DATA_MATRIX_FIELD_256=new Me(301,256,1),Me.AZTEC_DATA_8=Me.DATA_MATRIX_FIELD_256,Me.MAXICODE_FIELD_64=Me.AZTEC_DATA_6;class Qe extends y{}Qe.kind="ReedSolomonException";class ct extends y{}ct.kind="IllegalStateException";class Mt{constructor(o){this.field=o}decode(o,f){const d=this.field,v=new xe(d,o),c=new Int32Array(f);let h=!0;for(let H=0;H<f;H++){const X=v.evaluateAt(d.exp(H+d.getGeneratorBase()));c[c.length-1-H]=X,X!==0&&(h=!1)}if(h)return;const b=new xe(d,c),x=this.runEuclideanAlgorithm(d.buildMonomial(f,1),b,f),A=x[0],I=x[1],P=this.findErrorLocations(A),z=this.findErrorMagnitudes(I,P);for(let H=0;H<P.length;H++){const X=o.length-1-d.log(P[H]);if(X<0)throw new Qe("Bad error location");o[X]=Me.addOrSubtract(o[X],z[H])}}runEuclideanAlgorithm(o,f,d){if(o.getDegree()<f.getDegree()){const H=o;o=f,f=H}const v=this.field;let c=o,h=f,b=v.getZero(),x=v.getOne();for(;h.getDegree()>=(d/2|0);){let H=c,X=b;if(c=h,b=x,c.isZero())throw new Qe("r_{i-1} was zero");h=H;let J=v.getZero();const Q=c.getCoefficient(c.getDegree()),fe=v.inverse(Q);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){const me=h.getDegree()-c.getDegree(),ge=v.multiply(h.getCoefficient(h.getDegree()),fe);J=J.addOrSubtract(v.buildMonomial(me,ge)),h=h.addOrSubtract(c.multiplyByMonomial(me,ge))}if(x=J.multiply(b).addOrSubtract(X),h.getDegree()>=c.getDegree())throw new ct("Division algorithm failed to reduce polynomial?")}const A=x.getCoefficient(0);if(A===0)throw new Qe("sigmaTilde(0) was zero");const I=v.inverse(A),P=x.multiplyScalar(I),z=h.multiplyScalar(I);return[P,z]}findErrorLocations(o){const f=o.getDegree();if(f===1)return Int32Array.from([o.getCoefficient(1)]);const d=new Int32Array(f);let v=0;const c=this.field;for(let h=1;h<c.getSize()&&v<f;h++)o.evaluateAt(h)===0&&(d[v]=c.inverse(h),v++);if(v!==f)throw new Qe("Error locator degree does not match number of roots");return d}findErrorMagnitudes(o,f){const d=f.length,v=new Int32Array(d),c=this.field;for(let h=0;h<d;h++){const b=c.inverse(f[h]);let x=1;for(let A=0;A<d;A++)if(h!==A){const I=c.multiply(f[A],b),P=(I&1)===0?I|1:I&-2;x=c.multiply(x,P)}v[h]=c.multiply(o.evaluateAt(b),c.inverse(x)),c.getGeneratorBase()!==0&&(v[h]=c.multiply(v[h],b))}return v}}var ln;(function(W){W[W.UPPER=0]="UPPER",W[W.LOWER=1]="LOWER",W[W.MIXED=2]="MIXED",W[W.DIGIT=3]="DIGIT",W[W.PUNCT=4]="PUNCT",W[W.BINARY=5]="BINARY"})(ln||(ln={}));class Zt{decode(o){this.ddata=o;let f=o.getBits(),d=this.extractBits(f),v=this.correctBits(d),c=Zt.convertBoolArrayToByteArray(v),h=Zt.getEncodedData(v),b=new $e(c,h,null,null);return b.setNumBits(v.length),b}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let f=o.length,d=ln.UPPER,v=ln.UPPER,c="",h=0;for(;h<f;)if(v===ln.BINARY){if(f-h<5)break;let b=Zt.readCode(o,h,5);if(h+=5,b===0){if(f-h<11)break;b=Zt.readCode(o,h,11)+31,h+=11}for(let x=0;x<b;x++){if(f-h<8){h=f;break}const A=Zt.readCode(o,h,8);c+=ce.castAsNonUtf8Char(A),h+=8}v=d}else{let b=v===ln.DIGIT?4:5;if(f-h<b)break;let x=Zt.readCode(o,h,b);h+=b;let A=Zt.getCharacter(v,x);A.startsWith("CTRL_")?(d=v,v=Zt.getTable(A.charAt(5)),A.charAt(6)==="L"&&(d=v)):(c+=A,v=d)}return c}static getTable(o){switch(o){case"L":return ln.LOWER;case"P":return ln.PUNCT;case"M":return ln.MIXED;case"D":return ln.DIGIT;case"B":return ln.BINARY;default:return ln.UPPER}}static getCharacter(o,f){switch(o){case ln.UPPER:return Zt.UPPER_TABLE[f];case ln.LOWER:return Zt.LOWER_TABLE[f];case ln.MIXED:return Zt.MIXED_TABLE[f];case ln.PUNCT:return Zt.PUNCT_TABLE[f];case ln.DIGIT:return Zt.DIGIT_TABLE[f];default:throw new ct("Bad table")}}correctBits(o){let f,d;this.ddata.getNbLayers()<=2?(d=6,f=Me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(d=8,f=Me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(d=10,f=Me.AZTEC_DATA_10):(d=12,f=Me.AZTEC_DATA_12);let v=this.ddata.getNbDatablocks(),c=o.length/d;if(c<v)throw new B;let h=o.length%d,b=new Int32Array(c);for(let z=0;z<c;z++,h+=d)b[z]=Zt.readCode(o,h,d);try{new Mt(f).decode(b,c-v)}catch(z){throw new B(z)}let x=(1<<d)-1,A=0;for(let z=0;z<v;z++){let H=b[z];if(H===0||H===x)throw new B;(H===1||H===x-1)&&A++}let I=new Array(v*d-A),P=0;for(let z=0;z<v;z++){let H=b[z];if(H===1||H===x-1)I.fill(H>1,P,P+d-1),P+=d-1;else for(let X=d-1;X>=0;--X)I[P++]=(H&1<<X)!==0}return I}extractBits(o){let f=this.ddata.isCompact(),d=this.ddata.getNbLayers(),v=(f?11:14)+d*4,c=new Int32Array(v),h=new Array(this.totalBitsInLayer(d,f));if(f)for(let b=0;b<c.length;b++)c[b]=b;else{let b=v+1+2*j.truncDivision(j.truncDivision(v,2)-1,15),x=v/2,A=j.truncDivision(b,2);for(let I=0;I<x;I++){let P=I+j.truncDivision(I,15);c[x-I-1]=A-P-1,c[x+I]=A+P+1}}for(let b=0,x=0;b<d;b++){let A=(d-b)*4+(f?9:12),I=b*2,P=v-1-I;for(let z=0;z<A;z++){let H=z*2;for(let X=0;X<2;X++)h[x+H+X]=o.get(c[I+X],c[I+z]),h[x+2*A+H+X]=o.get(c[I+z],c[P-X]),h[x+4*A+H+X]=o.get(c[P-X],c[P-z]),h[x+6*A+H+X]=o.get(c[P-z],c[I+X])}x+=A*8}return h}static readCode(o,f,d){let v=0;for(let c=f;c<f+d;c++)v<<=1,o[c]&&(v|=1);return v}static readByte(o,f){let d=o.length-f;return d>=8?Zt.readCode(o,f,8):Zt.readCode(o,f,d)<<8-d}static convertBoolArrayToByteArray(o){let f=new Uint8Array((o.length+7)/8);for(let d=0;d<f.length;d++)f[d]=Zt.readByte(o,8*d);return f}totalBitsInLayer(o,f){return((f?88:112)+16*o)*o}}Zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class jt{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,f,d,v){const c=o-d,h=f-v;return Math.sqrt(c*c+h*h)}static sum(o){let f=0;for(let d=0,v=o.length;d!==v;d++){const c=o[d];f+=c}return f}}class jn{static floatToIntBits(o){return o}}jn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ot{constructor(o,f){this.x=o,this.y=f}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof ot){const f=o;return this.x===f.x&&this.y===f.y}return!1}hashCode(){return 31*jn.floatToIntBits(this.x)+jn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const f=this.distance(o[0],o[1]),d=this.distance(o[1],o[2]),v=this.distance(o[0],o[2]);let c,h,b;if(d>=f&&d>=v?(h=o[0],c=o[1],b=o[2]):v>=d&&v>=f?(h=o[1],c=o[0],b=o[2]):(h=o[2],c=o[0],b=o[1]),this.crossProductZ(c,h,b)<0){const x=c;c=b,b=x}o[0]=c,o[1]=h,o[2]=b}static distance(o,f){return jt.distance(o.x,o.y,f.x,f.y)}static crossProductZ(o,f,d){const v=f.x,c=f.y;return(d.x-v)*(o.y-c)-(d.y-c)*(o.x-v)}}class Wr{constructor(o,f){this.bits=o,this.points=f}getBits(){return this.bits}getPoints(){return this.points}}class nr extends Wr{constructor(o,f,d,v,c){super(o,f),this.compact=d,this.nbDatablocks=v,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Jt{constructor(o,f,d,v){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),f==null&&(f=Jt.INIT_SIZE),d==null&&(d=o.getWidth()/2|0),v==null&&(v=o.getHeight()/2|0);const c=f/2|0;if(this.leftInit=d-c,this.rightInit=d+c,this.upInit=v-c,this.downInit=v+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ue}detect(){let o=this.leftInit,f=this.rightInit,d=this.upInit,v=this.downInit,c=!1,h=!0,b=!1,x=!1,A=!1,I=!1,P=!1;const z=this.width,H=this.height;for(;h;){h=!1;let X=!0;for(;(X||!x)&&f<z;)X=this.containsBlackPoint(d,v,f,!1),X?(f++,h=!0,x=!0):x||f++;if(f>=z){c=!0;break}let J=!0;for(;(J||!A)&&v<H;)J=this.containsBlackPoint(o,f,v,!0),J?(v++,h=!0,A=!0):A||v++;if(v>=H){c=!0;break}let Q=!0;for(;(Q||!I)&&o>=0;)Q=this.containsBlackPoint(d,v,o,!1),Q?(o--,h=!0,I=!0):I||o--;if(o<0){c=!0;break}let fe=!0;for(;(fe||!P)&&d>=0;)fe=this.containsBlackPoint(o,f,d,!0),fe?(d--,h=!0,P=!0):P||d--;if(d<0){c=!0;break}h&&(b=!0)}if(!c&&b){const X=f-o;let J=null;for(let ge=1;J===null&&ge<X;ge++)J=this.getBlackPointOnSegment(o,v-ge,o+ge,v);if(J==null)throw new ue;let Q=null;for(let ge=1;Q===null&&ge<X;ge++)Q=this.getBlackPointOnSegment(o,d+ge,o+ge,d);if(Q==null)throw new ue;let fe=null;for(let ge=1;fe===null&&ge<X;ge++)fe=this.getBlackPointOnSegment(f,d+ge,f-ge,d);if(fe==null)throw new ue;let me=null;for(let ge=1;me===null&&ge<X;ge++)me=this.getBlackPointOnSegment(f,v-ge,f-ge,v);if(me==null)throw new ue;return this.centerEdges(me,J,fe,Q)}else throw new ue}getBlackPointOnSegment(o,f,d,v){const c=jt.round(jt.distance(o,f,d,v)),h=(d-o)/c,b=(v-f)/c,x=this.image;for(let A=0;A<c;A++){const I=jt.round(o+A*h),P=jt.round(f+A*b);if(x.get(I,P))return new ot(I,P)}return null}centerEdges(o,f,d,v){const c=o.getX(),h=o.getY(),b=f.getX(),x=f.getY(),A=d.getX(),I=d.getY(),P=v.getX(),z=v.getY(),H=Jt.CORR;return c<this.width/2?[new ot(P-H,z+H),new ot(b+H,x+H),new ot(A-H,I-H),new ot(c+H,h-H)]:[new ot(P+H,z+H),new ot(b+H,x-H),new ot(A-H,I+H),new ot(c-H,h-H)]}containsBlackPoint(o,f,d,v){const c=this.image;if(v){for(let h=o;h<=f;h++)if(c.get(h,d))return!0}else for(let h=o;h<=f;h++)if(c.get(d,h))return!0;return!1}}Jt.INIT_SIZE=10,Jt.CORR=1;class gr{static checkAndNudgePoints(o,f){const d=o.getWidth(),v=o.getHeight();let c=!0;for(let h=0;h<f.length&&c;h+=2){const b=Math.floor(f[h]),x=Math.floor(f[h+1]);if(b<-1||b>d||x<-1||x>v)throw new ue;c=!1,b===-1?(f[h]=0,c=!0):b===d&&(f[h]=d-1,c=!0),x===-1?(f[h+1]=0,c=!0):x===v&&(f[h+1]=v-1,c=!0)}c=!0;for(let h=f.length-2;h>=0&&c;h-=2){const b=Math.floor(f[h]),x=Math.floor(f[h+1]);if(b<-1||b>d||x<-1||x>v)throw new ue;c=!1,b===-1?(f[h]=0,c=!0):b===d&&(f[h]=d-1,c=!0),x===-1?(f[h+1]=0,c=!0):x===v&&(f[h+1]=v-1,c=!0)}}}class zn{constructor(o,f,d,v,c,h,b,x,A){this.a11=o,this.a21=f,this.a31=d,this.a12=v,this.a22=c,this.a32=h,this.a13=b,this.a23=x,this.a33=A}static quadrilateralToQuadrilateral(o,f,d,v,c,h,b,x,A,I,P,z,H,X,J,Q){const fe=zn.quadrilateralToSquare(o,f,d,v,c,h,b,x);return zn.squareToQuadrilateral(A,I,P,z,H,X,J,Q).times(fe)}transformPoints(o){const f=o.length,d=this.a11,v=this.a12,c=this.a13,h=this.a21,b=this.a22,x=this.a23,A=this.a31,I=this.a32,P=this.a33;for(let z=0;z<f;z+=2){const H=o[z],X=o[z+1],J=c*H+x*X+P;o[z]=(d*H+h*X+A)/J,o[z+1]=(v*H+b*X+I)/J}}transformPointsWithValues(o,f){const d=this.a11,v=this.a12,c=this.a13,h=this.a21,b=this.a22,x=this.a23,A=this.a31,I=this.a32,P=this.a33,z=o.length;for(let H=0;H<z;H++){const X=o[H],J=f[H],Q=c*X+x*J+P;o[H]=(d*X+h*J+A)/Q,f[H]=(v*X+b*J+I)/Q}}static squareToQuadrilateral(o,f,d,v,c,h,b,x){const A=o-d+c-b,I=f-v+h-x;if(A===0&&I===0)return new zn(d-o,c-d,o,v-f,h-v,f,0,0,1);{const P=d-c,z=b-c,H=v-h,X=x-h,J=P*X-z*H,Q=(A*X-z*I)/J,fe=(P*I-A*H)/J;return new zn(d-o+Q*d,b-o+fe*b,o,v-f+Q*v,x-f+fe*x,f,Q,fe,1)}}static quadrilateralToSquare(o,f,d,v,c,h,b,x){return zn.squareToQuadrilateral(o,f,d,v,c,h,b,x).buildAdjoint()}buildAdjoint(){return new zn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new zn(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class jr extends gr{sampleGrid(o,f,d,v,c,h,b,x,A,I,P,z,H,X,J,Q,fe,me,ge){const ye=zn.quadrilateralToQuadrilateral(v,c,h,b,x,A,I,P,z,H,X,J,Q,fe,me,ge);return this.sampleGridWithTransform(o,f,d,ye)}sampleGridWithTransform(o,f,d,v){if(f<=0||d<=0)throw new ue;const c=new Ee(f,d),h=new Float32Array(2*f);for(let b=0;b<d;b++){const x=h.length,A=b+.5;for(let I=0;I<x;I+=2)h[I]=I/2+.5,h[I+1]=A;v.transformPoints(h),gr.checkAndNudgePoints(o,h);try{for(let I=0;I<x;I+=2)o.get(Math.floor(h[I]),Math.floor(h[I+1]))&&c.set(I/2,b)}catch{throw new ue}}return c}}class Cn{static setGridSampler(o){Cn.gridSampler=o}static getInstance(){return Cn.gridSampler}}Cn.gridSampler=new jr;class xn{constructor(o,f){this.x=o,this.y=f}toResultPoint(){return new ot(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class yr{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let f=this.getMatrixCenter(),d=this.getBullsEyeCorners(f);if(o){let h=d[0];d[0]=d[2],d[2]=h}this.extractParameters(d);let v=this.sampleGrid(this.image,d[this.shift%4],d[(this.shift+1)%4],d[(this.shift+2)%4],d[(this.shift+3)%4]),c=this.getMatrixCornerPoints(d);return new nr(v,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new ue;let f=2*this.nbCenterLayers,d=new Int32Array([this.sampleLine(o[0],o[1],f),this.sampleLine(o[1],o[2],f),this.sampleLine(o[2],o[3],f),this.sampleLine(o[3],o[0],f)]);this.shift=this.getRotation(d,f);let v=0;for(let h=0;h<4;h++){let b=d[(this.shift+h)%4];this.compact?(v<<=7,v+=b>>1&127):(v<<=10,v+=(b>>2&992)+(b>>1&31))}let c=this.getCorrectedParameterData(v,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(o,f){let d=0;o.forEach((v,c,h)=>{let b=(v>>f-2<<1)+(v&1);d=(d<<3)+b}),d=((d&1)<<11)+(d>>1);for(let v=0;v<4;v++)if(j.bitCount(d^this.EXPECTED_CORNER_BITS[v])<=2)return v;throw new ue}getCorrectedParameterData(o,f){let d,v;f?(d=7,v=2):(d=10,v=4);let c=d-v,h=new Int32Array(d);for(let x=d-1;x>=0;--x)h[x]=o&15,o>>=4;try{new Mt(Me.AZTEC_PARAM).decode(h,c)}catch{throw new ue}let b=0;for(let x=0;x<v;x++)b=(b<<4)+h[x];return b}getBullsEyeCorners(o){let f=o,d=o,v=o,c=o,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(f,h,1,-1),z=this.getFirstDifferent(d,h,1,1),H=this.getFirstDifferent(v,h,-1,1),X=this.getFirstDifferent(c,h,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(X,P)*this.nbCenterLayers/(this.distancePoint(c,f)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(P,z,H,X))break}f=P,d=z,v=H,c=X,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ue;this.compact=this.nbCenterLayers===5;let b=new ot(f.getX()+.5,f.getY()-.5),x=new ot(d.getX()+.5,d.getY()+.5),A=new ot(v.getX()-.5,v.getY()+.5),I=new ot(c.getX()-.5,c.getY()-.5);return this.expandSquare([b,x,A,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,f,d,v;try{let b=new Jt(this.image).detect();o=b[0],f=b[1],d=b[2],v=b[3]}catch{let x=this.image.getWidth()/2,A=this.image.getHeight()/2;o=this.getFirstDifferent(new xn(x+7,A-7),!1,1,-1).toResultPoint(),f=this.getFirstDifferent(new xn(x+7,A+7),!1,1,1).toResultPoint(),d=this.getFirstDifferent(new xn(x-7,A+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new xn(x-7,A-7),!1,-1,-1).toResultPoint()}let c=jt.round((o.getX()+v.getX()+f.getX()+d.getX())/4),h=jt.round((o.getY()+v.getY()+f.getY()+d.getY())/4);try{let b=new Jt(this.image,15,c,h).detect();o=b[0],f=b[1],d=b[2],v=b[3]}catch{o=this.getFirstDifferent(new xn(c+7,h-7),!1,1,-1).toResultPoint(),f=this.getFirstDifferent(new xn(c+7,h+7),!1,1,1).toResultPoint(),d=this.getFirstDifferent(new xn(c-7,h+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new xn(c-7,h-7),!1,-1,-1).toResultPoint()}return c=jt.round((o.getX()+v.getX()+f.getX()+d.getX())/4),h=jt.round((o.getY()+v.getY()+f.getY()+d.getY())/4),new xn(c,h)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,f,d,v,c){let h=Cn.getInstance(),b=this.getDimension(),x=b/2-this.nbCenterLayers,A=b/2+this.nbCenterLayers;return h.sampleGrid(o,b,b,x,x,A,x,A,A,x,A,f.getX(),f.getY(),d.getX(),d.getY(),v.getX(),v.getY(),c.getX(),c.getY())}sampleLine(o,f,d){let v=0,c=this.distanceResultPoint(o,f),h=c/d,b=o.getX(),x=o.getY(),A=h*(f.getX()-o.getX())/c,I=h*(f.getY()-o.getY())/c;for(let P=0;P<d;P++)this.image.get(jt.round(b+P*A),jt.round(x+P*I))&&(v|=1<<d-P-1);return v}isWhiteOrBlackRectangle(o,f,d,v){let c=3;o=new xn(o.getX()-c,o.getY()+c),f=new xn(f.getX()-c,f.getY()-c),d=new xn(d.getX()+c,d.getY()-c),v=new xn(v.getX()+c,v.getY()+c);let h=this.getColor(v,o);if(h===0)return!1;let b=this.getColor(o,f);return b!==h||(b=this.getColor(f,d),b!==h)?!1:(b=this.getColor(d,v),b===h)}getColor(o,f){let d=this.distancePoint(o,f),v=(f.getX()-o.getX())/d,c=(f.getY()-o.getY())/d,h=0,b=o.getX(),x=o.getY(),A=this.image.get(o.getX(),o.getY()),I=Math.ceil(d);for(let z=0;z<I;z++)b+=v,x+=c,this.image.get(jt.round(b),jt.round(x))!==A&&h++;let P=h/d;return P>.1&&P<.9?0:P<=.1===A?1:-1}getFirstDifferent(o,f,d,v){let c=o.getX()+d,h=o.getY()+v;for(;this.isValid(c,h)&&this.image.get(c,h)===f;)c+=d,h+=v;for(c-=d,h-=v;this.isValid(c,h)&&this.image.get(c,h)===f;)c+=d;for(c-=d;this.isValid(c,h)&&this.image.get(c,h)===f;)h+=v;return h-=v,new xn(c,h)}expandSquare(o,f,d){let v=d/(2*f),c=o[0].getX()-o[2].getX(),h=o[0].getY()-o[2].getY(),b=(o[0].getX()+o[2].getX())/2,x=(o[0].getY()+o[2].getY())/2,A=new ot(b+v*c,x+v*h),I=new ot(b-v*c,x-v*h);c=o[1].getX()-o[3].getX(),h=o[1].getY()-o[3].getY(),b=(o[1].getX()+o[3].getX())/2,x=(o[1].getY()+o[3].getY())/2;let P=new ot(b+v*c,x+v*h),z=new ot(b-v*c,x-v*h);return[A,P,I,z]}isValid(o,f){return o>=0&&o<this.image.getWidth()&&f>0&&f<this.image.getHeight()}isValidPoint(o){let f=jt.round(o.getX()),d=jt.round(o.getY());return this.isValid(f,d)}distancePoint(o,f){return jt.distance(o.getX(),o.getY(),f.getX(),f.getY())}distanceResultPoint(o,f){return jt.distance(o.getX(),o.getY(),f.getX(),f.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(j.truncDivision(this.nbLayers-4,8)+1)+15}}class fi{decode(o,f=null){let d=null,v=new yr(o.getBlackMatrix()),c=null,h=null;try{let I=v.detectMirror(!1);c=I.getPoints(),this.reportFoundResultPoints(f,c),h=new Zt().decode(I)}catch(I){d=I}if(h==null)try{let I=v.detectMirror(!0);c=I.getPoints(),this.reportFoundResultPoints(f,c),h=new Zt().decode(I)}catch(I){throw d??I}let b=new Y(h.getText(),h.getRawBytes(),h.getNumBits(),c,be.AZTEC,R.currentTimeMillis()),x=h.getByteSegments();x!=null&&b.putMetadata(Ve.BYTE_SEGMENTS,x);let A=h.getECLevel();return A!=null&&b.putMetadata(Ve.ERROR_CORRECTION_LEVEL,A),b}reportFoundResultPoints(o,f){if(o!=null){let d=o.get(F.NEED_RESULT_POINT_CALLBACK);d!=null&&f.forEach((v,c,h)=>{d.foundPossibleResultPoint(v)})}}reset(){}}class zi extends ae{constructor(o=500){super(new fi,o)}}class Pn{decode(o,f){try{return this.doDecode(o,f)}catch{if(f&&f.get(F.TRY_HARDER)===!0&&o.isRotateSupported()){const c=o.rotateCounterClockwise(),h=this.doDecode(c,f),b=h.getResultMetadata();let x=270;b!==null&&b.get(Ve.ORIENTATION)===!0&&(x=x+b.get(Ve.ORIENTATION)%360),h.putMetadata(Ve.ORIENTATION,x);const A=h.getResultPoints();if(A!==null){const I=c.getHeight();for(let P=0;P<A.length;P++)A[P]=new ot(I-A[P].getY()-1,A[P].getX())}return h}else throw new ue}}reset(){}doDecode(o,f){const d=o.getWidth(),v=o.getHeight();let c=new $(d);const h=f&&f.get(F.TRY_HARDER)===!0,b=Math.max(1,v>>(h?8:5));let x;h?x=v:x=15;const A=Math.trunc(v/2);for(let I=0;I<x;I++){const P=Math.trunc((I+1)/2),z=(I&1)===0,H=A+b*(z?P:-P);if(H<0||H>=v)break;try{c=o.getBlackRow(H,c)}catch{continue}for(let X=0;X<2;X++){if(X===1&&(c.reverse(),f&&f.get(F.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;f.forEach((Q,fe)=>J.set(fe,Q)),J.delete(F.NEED_RESULT_POINT_CALLBACK),f=J}try{const J=this.decodeRow(H,c,f);if(X===1){J.putMetadata(Ve.ORIENTATION,180);const Q=J.getResultPoints();Q!==null&&(Q[0]=new ot(d-Q[0].getX()-1,Q[0].getY()),Q[1]=new ot(d-Q[1].getX()-1,Q[1].getY()))}return J}catch{}}}throw new ue}static recordPattern(o,f,d){const v=d.length;for(let A=0;A<v;A++)d[A]=0;const c=o.getSize();if(f>=c)throw new ue;let h=!o.get(f),b=0,x=f;for(;x<c;){if(o.get(x)!==h)d[b]++;else{if(++b===v)break;d[b]=1,h=!h}x++}if(!(b===v||b===v-1&&x===c))throw new ue}static recordPatternInReverse(o,f,d){let v=d.length,c=o.get(f);for(;f>0&&v>=0;)o.get(--f)!==c&&(v--,c=!c);if(v>=0)throw new ue;Pn.recordPattern(o,f+1,d)}static patternMatchVariance(o,f,d){const v=o.length;let c=0,h=0;for(let A=0;A<v;A++)c+=o[A],h+=f[A];if(c<h)return Number.POSITIVE_INFINITY;const b=c/h;d*=b;let x=0;for(let A=0;A<v;A++){const I=o[A],P=f[A]*b,z=I>P?I-P:P-I;if(z>d)return Number.POSITIVE_INFINITY;x+=z}return x/c}}class et extends Pn{static findStartPattern(o){const f=o.getSize(),d=o.getNextSet(0);let v=0,c=Int32Array.from([0,0,0,0,0,0]),h=d,b=!1;const x=6;for(let A=d;A<f;A++)if(o.get(A)!==b)c[v]++;else{if(v===x-1){let I=et.MAX_AVG_VARIANCE,P=-1;for(let z=et.CODE_START_A;z<=et.CODE_START_C;z++){const H=Pn.patternMatchVariance(c,et.CODE_PATTERNS[z],et.MAX_INDIVIDUAL_VARIANCE);H<I&&(I=H,P=z)}if(P>=0&&o.isRange(Math.max(0,h-(A-h)/2),h,!1))return Int32Array.from([h,A,P]);h+=c[0]+c[1],c=c.slice(2,c.length-1),c[v-1]=0,c[v]=0,v--}else v++;c[v]=1,b=!b}throw new ue}static decodeCode(o,f,d){Pn.recordPattern(o,d,f);let v=et.MAX_AVG_VARIANCE,c=-1;for(let h=0;h<et.CODE_PATTERNS.length;h++){const b=et.CODE_PATTERNS[h],x=this.patternMatchVariance(f,b,et.MAX_INDIVIDUAL_VARIANCE);x<v&&(v=x,c=h)}if(c>=0)return c;throw new ue}decodeRow(o,f,d){const v=d&&d.get(F.ASSUME_GS1)===!0,c=et.findStartPattern(f),h=c[2];let b=0;const x=new Uint8Array(20);x[b++]=h;let A;switch(h){case et.CODE_START_A:A=et.CODE_CODE_A;break;case et.CODE_START_B:A=et.CODE_CODE_B;break;case et.CODE_START_C:A=et.CODE_CODE_C;break;default:throw new B}let I=!1,P=!1,z="",H=c[0],X=c[1];const J=Int32Array.from([0,0,0,0,0,0]);let Q=0,fe=0,me=h,ge=0,ye=!0,_e=!1,Re=!1;for(;!I;){const yt=P;switch(P=!1,Q=fe,fe=et.decodeCode(f,J,X),x[b++]=fe,fe!==et.CODE_STOP&&(ye=!0),fe!==et.CODE_STOP&&(ge++,me+=ge*fe),H=X,X+=J.reduce((vt,Ct)=>vt+Ct,0),fe){case et.CODE_START_A:case et.CODE_START_B:case et.CODE_START_C:throw new B}switch(A){case et.CODE_CODE_A:if(fe<64)Re===_e?z+=String.fromCharCode(32+fe):z+=String.fromCharCode(32+fe+128),Re=!1;else if(fe<96)Re===_e?z+=String.fromCharCode(fe-64):z+=String.fromCharCode(fe+64),Re=!1;else switch(fe!==et.CODE_STOP&&(ye=!1),fe){case et.CODE_FNC_1:v&&(z.length===0?z+="]C1":z+="");break;case et.CODE_FNC_2:case et.CODE_FNC_3:break;case et.CODE_FNC_4_A:!_e&&Re?(_e=!0,Re=!1):_e&&Re?(_e=!1,Re=!1):Re=!0;break;case et.CODE_SHIFT:P=!0,A=et.CODE_CODE_B;break;case et.CODE_CODE_B:A=et.CODE_CODE_B;break;case et.CODE_CODE_C:A=et.CODE_CODE_C;break;case et.CODE_STOP:I=!0;break}break;case et.CODE_CODE_B:if(fe<96)Re===_e?z+=String.fromCharCode(32+fe):z+=String.fromCharCode(32+fe+128),Re=!1;else switch(fe!==et.CODE_STOP&&(ye=!1),fe){case et.CODE_FNC_1:v&&(z.length===0?z+="]C1":z+="");break;case et.CODE_FNC_2:case et.CODE_FNC_3:break;case et.CODE_FNC_4_B:!_e&&Re?(_e=!0,Re=!1):_e&&Re?(_e=!1,Re=!1):Re=!0;break;case et.CODE_SHIFT:P=!0,A=et.CODE_CODE_A;break;case et.CODE_CODE_A:A=et.CODE_CODE_A;break;case et.CODE_CODE_C:A=et.CODE_CODE_C;break;case et.CODE_STOP:I=!0;break}break;case et.CODE_CODE_C:if(fe<100)fe<10&&(z+="0"),z+=fe;else switch(fe!==et.CODE_STOP&&(ye=!1),fe){case et.CODE_FNC_1:v&&(z.length===0?z+="]C1":z+="");break;case et.CODE_CODE_A:A=et.CODE_CODE_A;break;case et.CODE_CODE_B:A=et.CODE_CODE_B;break;case et.CODE_STOP:I=!0;break}break}yt&&(A=A===et.CODE_CODE_A?et.CODE_CODE_B:et.CODE_CODE_A)}const je=X-H;if(X=f.getNextUnset(X),!f.isRange(X,Math.min(f.getSize(),X+(X-H)/2),!1))throw new ue;if(me-=ge*Q,me%103!==Q)throw new C;const Ue=z.length;if(Ue===0)throw new ue;Ue>0&&ye&&(A===et.CODE_CODE_C?z=z.substring(0,Ue-2):z=z.substring(0,Ue-1));const Ke=(c[1]+c[0])/2,Ze=H+je/2,lt=x.length,at=new Uint8Array(lt);for(let yt=0;yt<lt;yt++)at[yt]=x[yt];const ht=[new ot(Ke,o),new ot(Ze,o)];return new Y(z,at,0,ht,be.CODE_128,new Date().getTime())}}et.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],et.MAX_AVG_VARIANCE=.25,et.MAX_INDIVIDUAL_VARIANCE=.7,et.CODE_SHIFT=98,et.CODE_CODE_C=99,et.CODE_CODE_B=100,et.CODE_CODE_A=101,et.CODE_FNC_1=102,et.CODE_FNC_2=97,et.CODE_FNC_3=96,et.CODE_FNC_4_A=101,et.CODE_FNC_4_B=100,et.CODE_START_A=103,et.CODE_START_B=104,et.CODE_START_C=105,et.CODE_STOP=106;class ft extends Pn{constructor(o=!1,f=!1){super(),this.usingCheckDigit=o,this.extendedMode=f,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,f,d){let v=this.counters;v.fill(0),this.decodeRowResult="";let c=ft.findAsteriskPattern(f,v),h=f.getNextSet(c[1]),b=f.getSize(),x,A;do{ft.recordPattern(f,h,v);let J=ft.toNarrowWidePattern(v);if(J<0)throw new ue;x=ft.patternToChar(J),this.decodeRowResult+=x,A=h;for(let Q of v)h+=Q;h=f.getNextSet(h)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let J of v)I+=J;let P=h-A-I;if(h!==b&&P*2<I)throw new ue;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,Q=0;for(let fe=0;fe<J;fe++)Q+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt(J)!==ft.ALPHABET_STRING.charAt(Q%43))throw new C;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new ue;let z;this.extendedMode?z=ft.decodeExtended(this.decodeRowResult):z=this.decodeRowResult;let H=(c[1]+c[0])/2,X=A+I/2;return new Y(z,null,0,[new ot(H,o),new ot(X,o)],be.CODE_39,new Date().getTime())}static findAsteriskPattern(o,f){let d=o.getSize(),v=o.getNextSet(0),c=0,h=v,b=!1,x=f.length;for(let A=v;A<d;A++)if(o.get(A)!==b)f[c]++;else{if(c===x-1){if(this.toNarrowWidePattern(f)===ft.ASTERISK_ENCODING&&o.isRange(Math.max(0,h-Math.floor((A-h)/2)),h,!1))return[h,A];h+=f[0]+f[1],f.copyWithin(0,2,2+c-1),f[c-1]=0,f[c]=0,c--}else c++;f[c]=1,b=!b}throw new ue}static toNarrowWidePattern(o){let f=o.length,d=0,v;do{let c=2147483647;for(let x of o)x<c&&x>d&&(c=x);d=c,v=0;let h=0,b=0;for(let x=0;x<f;x++){let A=o[x];A>d&&(b|=1<<f-1-x,v++,h+=A)}if(v===3){for(let x=0;x<f&&v>0;x++){let A=o[x];if(A>d&&(v--,A*2>=h))return-1}return b}}while(v>3);return-1}static patternToChar(o){for(let f=0;f<ft.CHARACTER_ENCODINGS.length;f++)if(ft.CHARACTER_ENCODINGS[f]===o)return ft.ALPHABET_STRING.charAt(f);if(o===ft.ASTERISK_ENCODING)return"*";throw new ue}static decodeExtended(o){let f=o.length,d="";for(let v=0;v<f;v++){let c=o.charAt(v);if(c==="+"||c==="$"||c==="%"||c==="/"){let h=o.charAt(v+1),b="\0";switch(c){case"+":if(h>="A"&&h<="Z")b=String.fromCharCode(h.charCodeAt(0)+32);else throw new B;break;case"$":if(h>="A"&&h<="Z")b=String.fromCharCode(h.charCodeAt(0)-64);else throw new B;break;case"%":if(h>="A"&&h<="E")b=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")b=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")b=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")b=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")b="\0";else if(h==="V")b="@";else if(h==="W")b="`";else if(h==="X"||h==="Y"||h==="Z")b="";else throw new B;break;case"/":if(h>="A"&&h<="O")b=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")b=":";else throw new B;break}d+=b,v++}else d+=c}return d}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class Ft extends Pn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,f,d){let v=this.decodeStart(f),c=this.decodeEnd(f),h=new se;Ft.decodeMiddle(f,v[1],c[0],h);let b=h.toString(),x=null;d!=null&&(x=d.get(F.ALLOWED_LENGTHS)),x==null&&(x=Ft.DEFAULT_ALLOWED_LENGTHS);let A=b.length,I=!1,P=0;for(let X of x){if(A===X){I=!0;break}X>P&&(P=X)}if(!I&&A>P&&(I=!0),!I)throw new B;const z=[new ot(v[1],o),new ot(c[0],o)];return new Y(b,null,0,z,be.ITF,new Date().getTime())}static decodeMiddle(o,f,d,v){let c=new Int32Array(10),h=new Int32Array(5),b=new Int32Array(5);for(c.fill(0),h.fill(0),b.fill(0);f<d;){Pn.recordPattern(o,f,c);for(let A=0;A<5;A++){let I=2*A;h[A]=c[I],b[A]=c[I+1]}let x=Ft.decodeDigit(h);v.append(x.toString()),x=this.decodeDigit(b),v.append(x.toString()),c.forEach(function(A){f+=A})}}decodeStart(o){let f=Ft.skipWhiteSpace(o),d=Ft.findGuardPattern(o,f,Ft.START_PATTERN);return this.narrowLineWidth=(d[1]-d[0])/4,this.validateQuietZone(o,d[0]),d}validateQuietZone(o,f){let d=this.narrowLineWidth*10;d=d<f?d:f;for(let v=f-1;d>0&&v>=0&&!o.get(v);v--)d--;if(d!==0)throw new ue}static skipWhiteSpace(o){const f=o.getSize(),d=o.getNextSet(0);if(d===f)throw new ue;return d}decodeEnd(o){o.reverse();try{let f=Ft.skipWhiteSpace(o),d;try{d=Ft.findGuardPattern(o,f,Ft.END_PATTERN_REVERSED[0])}catch(c){c instanceof ue&&(d=Ft.findGuardPattern(o,f,Ft.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,d[0]);let v=d[0];return d[0]=o.getSize()-d[1],d[1]=o.getSize()-v,d}finally{o.reverse()}}static findGuardPattern(o,f,d){let v=d.length,c=new Int32Array(v),h=o.getSize(),b=!1,x=0,A=f;c.fill(0);for(let I=f;I<h;I++)if(o.get(I)!==b)c[x]++;else{if(x===v-1){if(Pn.patternMatchVariance(c,d,Ft.MAX_INDIVIDUAL_VARIANCE)<Ft.MAX_AVG_VARIANCE)return[A,I];A+=c[0]+c[1],R.arraycopy(c,2,c,0,x-1),c[x-1]=0,c[x]=0,x--}else x++;c[x]=1,b=!b}throw new ue}static decodeDigit(o){let f=Ft.MAX_AVG_VARIANCE,d=-1,v=Ft.PATTERNS.length;for(let c=0;c<v;c++){let h=Ft.PATTERNS[c],b=Pn.patternMatchVariance(o,h,Ft.MAX_INDIVIDUAL_VARIANCE);b<f?(f=b,d=c):b===f&&(d=-1)}if(d>=0)return d%10;throw new ue}}Ft.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ft.MAX_AVG_VARIANCE=.38,Ft.MAX_INDIVIDUAL_VARIANCE=.5,Ft.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ft.START_PATTERN=Int32Array.from([1,1,1,1]),Ft.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class vn extends Pn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let f=!1,d,v=0,c=Int32Array.from([0,0,0]);for(;!f;){c=Int32Array.from([0,0,0]),d=vn.findGuardPattern(o,v,!1,this.START_END_PATTERN,c);let h=d[0];v=d[1];let b=h-(v-h);b>=0&&(f=o.isRange(b,h,!1))}return d}static checkChecksum(o){return vn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let f=o.length;if(f===0)return!1;let d=parseInt(o.charAt(f-1),10);return vn.getStandardUPCEANChecksum(o.substring(0,f-1))===d}static getStandardUPCEANChecksum(o){let f=o.length,d=0;for(let v=f-1;v>=0;v-=2){let c=o.charAt(v).charCodeAt(0)-48;if(c<0||c>9)throw new B;d+=c}d*=3;for(let v=f-2;v>=0;v-=2){let c=o.charAt(v).charCodeAt(0)-48;if(c<0||c>9)throw new B;d+=c}return(1e3-d)%10}static decodeEnd(o,f){return vn.findGuardPattern(o,f,!1,vn.START_END_PATTERN,new Int32Array(vn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,f,d,v){return this.findGuardPattern(o,f,d,v,new Int32Array(v.length))}static findGuardPattern(o,f,d,v,c){let h=o.getSize();f=d?o.getNextUnset(f):o.getNextSet(f);let b=0,x=f,A=v.length,I=d;for(let P=f;P<h;P++)if(o.get(P)!==I)c[b]++;else{if(b===A-1){if(Pn.patternMatchVariance(c,v,vn.MAX_INDIVIDUAL_VARIANCE)<vn.MAX_AVG_VARIANCE)return Int32Array.from([x,P]);x+=c[0]+c[1];let z=c.slice(2,c.length-1);for(let H=0;H<b-1;H++)c[H]=z[H];c[b-1]=0,c[b]=0,b--}else b++;c[b]=1,I=!I}throw new ue}static decodeDigit(o,f,d,v){this.recordPattern(o,d,f);let c=this.MAX_AVG_VARIANCE,h=-1,b=v.length;for(let x=0;x<b;x++){let A=v[x],I=Pn.patternMatchVariance(f,A,vn.MAX_INDIVIDUAL_VARIANCE);I<c&&(c=I,h=x)}if(h>=0)return h;throw new ue}}vn.MAX_AVG_VARIANCE=.48,vn.MAX_INDIVIDUAL_VARIANCE=.7,vn.START_END_PATTERN=Int32Array.from([1,1,1]),vn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),vn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ni{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,f,d){let v=this.decodeRowStringBuffer,c=this.decodeMiddle(f,d,v),h=v.toString(),b=ni.parseExtensionString(h),x=[new ot((d[0]+d[1])/2,o),new ot(c,o)],A=new Y(h,null,0,x,be.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&A.putAllMetadata(b),A}decodeMiddle(o,f,d){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=o.getSize(),h=f[1],b=0;for(let A=0;A<5&&h<c;A++){let I=vn.decodeDigit(o,v,h,vn.L_AND_G_PATTERNS);d+=String.fromCharCode(48+I%10);for(let P of v)h+=P;I>=10&&(b|=1<<4-A),A!==4&&(h=o.getNextSet(h),h=o.getNextUnset(h))}if(d.length!==5)throw new ue;let x=this.determineCheckDigit(b);if(ni.extensionChecksum(d.toString())!==x)throw new ue;return h}static extensionChecksum(o){let f=o.length,d=0;for(let v=f-2;v>=0;v-=2)d+=o.charAt(v).charCodeAt(0)-48;d*=3;for(let v=f-1;v>=0;v-=2)d+=o.charAt(v).charCodeAt(0)-48;return d*=3,d%10}determineCheckDigit(o){for(let f=0;f<10;f++)if(o===this.CHECK_DIGIT_ENCODINGS[f])return f;throw new ue}static parseExtensionString(o){if(o.length!==5)return null;let f=ni.parseExtension5String(o);return f==null?null:new Map([[Ve.SUGGESTED_PRICE,f]])}static parseExtension5String(o){let f;switch(o.charAt(0)){case"0":f="";break;case"5":f="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}f="";break;default:f="";break}let d=parseInt(o.substring(1)),v=(d/100).toString(),c=d%100,h=c<10?"0"+c:c.toString();return f+v+"."+h}}class dt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,f,d){let v=this.decodeRowStringBuffer,c=this.decodeMiddle(f,d,v),h=v.toString(),b=dt.parseExtensionString(h),x=[new ot((d[0]+d[1])/2,o),new ot(c,o)],A=new Y(h,null,0,x,be.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&A.putAllMetadata(b),A}decodeMiddle(o,f,d){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=o.getSize(),h=f[1],b=0;for(let x=0;x<2&&h<c;x++){let A=vn.decodeDigit(o,v,h,vn.L_AND_G_PATTERNS);d+=String.fromCharCode(48+A%10);for(let I of v)h+=I;A>=10&&(b|=1<<1-x),x!==1&&(h=o.getNextSet(h),h=o.getNextUnset(h))}if(d.length!==2)throw new ue;if(parseInt(d.toString())%4!==b)throw new ue;return h}static parseExtensionString(o){return o.length!==2?null:new Map([[Ve.ISSUE_NUMBER,parseInt(o)]])}}class Xr{static decodeRow(o,f,d){let v=vn.findGuardPattern(f,d,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ni().decodeRow(o,f,v)}catch{return new dt().decodeRow(o,f,v)}}}Xr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class rn extends vn{constructor(){super(),this.decodeRowStringBuffer="",rn.L_AND_G_PATTERNS=rn.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let f=rn.L_PATTERNS[o-10],d=new Int32Array(f.length);for(let v=0;v<f.length;v++)d[v]=f[f.length-v-1];rn.L_AND_G_PATTERNS[o]=d}}decodeRow(o,f,d){let v=rn.findStartGuardPattern(f),c=d==null?null:d.get(F.NEED_RESULT_POINT_CALLBACK);if(c!=null){const ye=new ot((v[0]+v[1])/2,o);c.foundPossibleResultPoint(ye)}let h=this.decodeMiddle(f,v,this.decodeRowStringBuffer),b=h.rowOffset,x=h.resultString;if(c!=null){const ye=new ot(b,o);c.foundPossibleResultPoint(ye)}let A=this.decodeEnd(f,b);if(c!=null){const ye=new ot((A[0]+A[1])/2,o);c.foundPossibleResultPoint(ye)}let I=A[1],P=I+(I-A[0]);if(P>=f.getSize()||!f.isRange(I,P,!1))throw new ue;let z=x.toString();if(z.length<8)throw new B;if(!rn.checkChecksum(z))throw new C;let H=(v[1]+v[0])/2,X=(A[1]+A[0])/2,J=this.getBarcodeFormat(),Q=[new ot(H,o),new ot(X,o)],fe=new Y(z,null,0,Q,J,new Date().getTime()),me=0;try{let ye=Xr.decodeRow(o,f,A[1]);fe.putMetadata(Ve.UPC_EAN_EXTENSION,ye.getText()),fe.putAllMetadata(ye.getResultMetadata()),fe.addResultPoints(ye.getResultPoints()),me=ye.getText().length}catch{}let ge=d==null?null:d.get(F.ALLOWED_EAN_EXTENSIONS);if(ge!=null){let ye=!1;for(let _e in ge)if(me.toString()===_e){ye=!0;break}if(!ye)throw new ue}return fe}decodeEnd(o,f){return rn.findGuardPattern(o,f,!1,rn.START_END_PATTERN,new Int32Array(rn.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return rn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let f=o.length;if(f===0)return!1;let d=parseInt(o.charAt(f-1),10);return rn.getStandardUPCEANChecksum(o.substring(0,f-1))===d}static getStandardUPCEANChecksum(o){let f=o.length,d=0;for(let v=f-1;v>=0;v-=2){let c=o.charAt(v).charCodeAt(0)-48;if(c<0||c>9)throw new B;d+=c}d*=3;for(let v=f-2;v>=0;v-=2){let c=o.charAt(v).charCodeAt(0)-48;if(c<0||c>9)throw new B;d+=c}return(1e3-d)%10}}class vr extends rn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,f,d){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=o.getSize(),h=f[1],b=0;for(let A=0;A<6&&h<c;A++){let I=rn.decodeDigit(o,v,h,rn.L_AND_G_PATTERNS);d+=String.fromCharCode(48+I%10);for(let P of v)h+=P;I>=10&&(b|=1<<5-A)}d=vr.determineFirstDigit(d,b),h=rn.findGuardPattern(o,h,!0,rn.MIDDLE_PATTERN,new Int32Array(rn.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&h<c;A++){let I=rn.decodeDigit(o,v,h,rn.L_PATTERNS);d+=String.fromCharCode(48+I);for(let P of v)h+=P}return{rowOffset:h,resultString:d}}getBarcodeFormat(){return be.EAN_13}static determineFirstDigit(o,f){for(let d=0;d<10;d++)if(f===this.FIRST_DIGIT_ENCODINGS[d])return o=String.fromCharCode(48+d)+o,o;throw new ue}}vr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class hi extends rn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,f,d){const v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=o.getSize(),h=f[1];for(let x=0;x<4&&h<c;x++){let A=rn.decodeDigit(o,v,h,rn.L_PATTERNS);d+=String.fromCharCode(48+A);for(let I of v)h+=I}h=rn.findGuardPattern(o,h,!0,rn.MIDDLE_PATTERN,new Int32Array(rn.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&h<c;x++){let A=rn.decodeDigit(o,v,h,rn.L_PATTERNS);d+=String.fromCharCode(48+A);for(let I of v)h+=I}return{rowOffset:h,resultString:d}}getBarcodeFormat(){return be.EAN_8}}class ri extends rn{constructor(){super(...arguments),this.ean13Reader=new vr}getBarcodeFormat(){return be.UPC_A}decode(o,f){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,f,d){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,f,d))}decodeMiddle(o,f,d){return this.ean13Reader.decodeMiddle(o,f,d)}maybeReturnResult(o){let f=o.getText();if(f.charAt(0)==="0"){let d=new Y(f.substring(1),null,null,o.getResultPoints(),be.UPC_A);return o.getResultMetadata()!=null&&d.putAllMetadata(o.getResultMetadata()),d}else throw new ue}reset(){this.ean13Reader.reset()}}class Or extends rn{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,f,d){const v=this.decodeMiddleCounters.map(A=>A);v[0]=0,v[1]=0,v[2]=0,v[3]=0;const c=o.getSize();let h=f[1],b=0;for(let A=0;A<6&&h<c;A++){const I=Or.decodeDigit(o,v,h,Or.L_AND_G_PATTERNS);d+=String.fromCharCode(48+I%10);for(let P of v)h+=P;I>=10&&(b|=1<<5-A)}let x=Or.determineNumSysAndCheckDigit(d,b);return{rowOffset:h,resultString:x}}decodeEnd(o,f){return Or.findGuardPatternWithoutCounters(o,f,!0,Or.MIDDLE_END_PATTERN)}checkChecksum(o){return rn.checkChecksum(Or.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,f){for(let d=0;d<=1;d++)for(let v=0;v<10;v++)if(f===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[d][v]){let c=String.fromCharCode(48+d),h=String.fromCharCode(48+v);return c+o+h}throw ue.getNotFoundInstance()}getBarcodeFormat(){return be.UPC_E}static convertUPCEtoUPCA(o){const f=o.slice(1,7).split("").map(c=>c.charCodeAt(0)),d=new se;d.append(o.charAt(0));let v=f[5];switch(v){case 0:case 1:case 2:d.appendChars(f,0,2),d.append(v),d.append("0000"),d.appendChars(f,2,3);break;case 3:d.appendChars(f,0,3),d.append("00000"),d.appendChars(f,3,2);break;case 4:d.appendChars(f,0,4),d.append("00000"),d.append(f[4]);break;default:d.appendChars(f,0,5),d.append("0000"),d.append(v);break}return o.length>=8&&d.append(o.charAt(7)),d.toString()}}Or.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Or.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ji extends Pn{constructor(o){super();let f=o==null?null:o.get(F.POSSIBLE_FORMATS),d=[];r(f)?(d.push(new vr),d.push(new ri),d.push(new hi),d.push(new Or)):(f.indexOf(be.EAN_13)>-1&&d.push(new vr),f.indexOf(be.UPC_A)>-1&&d.push(new ri),f.indexOf(be.EAN_8)>-1&&d.push(new hi),f.indexOf(be.UPC_E)>-1&&d.push(new Or)),this.readers=d}decodeRow(o,f,d){for(let v of this.readers)try{const c=v.decodeRow(o,f,d),h=c.getBarcodeFormat()===be.EAN_13&&c.getText().charAt(0)==="0",b=d==null?null:d.get(F.POSSIBLE_FORMATS),x=b==null||b.includes(be.UPC_A);if(h&&x){const A=c.getRawBytes(),I=new Y(c.getText().substring(1),A,A?A.length:null,c.getResultPoints(),be.UPC_A);return I.putAllMetadata(c.getResultMetadata()),I}return c}catch{}throw new ue}reset(){for(let o of this.readers)o.reset()}}class Dn extends Pn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,f){for(let d=0;d<f.length;d++)if(Pn.patternMatchVariance(o,f[d],Dn.MAX_INDIVIDUAL_VARIANCE)<Dn.MAX_AVG_VARIANCE)return d;throw new ue}static count(o){return jt.sum(new Int32Array(o))}static increment(o,f){let d=0,v=f[0];for(let c=1;c<o.length;c++)f[c]>v&&(v=f[c],d=c);o[d]++}static decrement(o,f){let d=0,v=f[0];for(let c=1;c<o.length;c++)f[c]<v&&(v=f[c],d=c);o[d]--}static isFinderPattern(o){let f=o[0]+o[1],d=f+o[2]+o[3],v=f/d;if(v>=Dn.MIN_FINDER_PATTERN_RATIO&&v<=Dn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let b of o)b>h&&(h=b),b<c&&(c=b);return h<10*c}return!1}}Dn.MAX_AVG_VARIANCE=.2,Dn.MAX_INDIVIDUAL_VARIANCE=.45,Dn.MIN_FINDER_PATTERN_RATIO=9.5/12,Dn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Jn{constructor(o,f){this.value=o,this.checksumPortion=f}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Jn))return!1;const f=o;return this.value===f.value&&this.checksumPortion===f.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ii{constructor(o,f,d,v,c){this.value=o,this.startEnd=f,this.value=o,this.startEnd=f,this.resultPoints=new Array,this.resultPoints.push(new ot(d,c)),this.resultPoints.push(new ot(v,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof ii))return!1;const f=o;return this.value===f.value}hashCode(){return this.value}}class ir{constructor(){}static getRSSvalue(o,f,d){let v=0;for(let x of o)v+=x;let c=0,h=0,b=o.length;for(let x=0;x<b-1;x++){let A;for(A=1,h|=1<<x;A<o[x];A++,h&=~(1<<x)){let I=ir.combins(v-A-1,b-x-2);if(d&&h===0&&v-A-(b-x-1)>=b-x-1&&(I-=ir.combins(v-A-(b-x),b-x-2)),b-x-1>1){let P=0;for(let z=v-A-(b-x-2);z>f;z--)P+=ir.combins(v-A-z-1,b-x-3);I-=P*(b-1-x)}else v-A>f&&I--;c+=I}v-=A}return c}static combins(o,f){let d,v;o-f>f?(v=f,d=o-f):(v=o-f,d=f);let c=1,h=1;for(let b=o;b>d;b--)c*=b,h<=v&&(c/=h,h++);for(;h<=v;)c/=h,h++;return c}}class Fn{static buildBitArray(o){let f=o.length*2-1;o[o.length-1].getRightChar()==null&&(f-=1);let d=12*f,v=new $(d),c=0,b=o[0].getRightChar().getValue();for(let x=11;x>=0;--x)(b&1<<x)!=0&&v.set(c),c++;for(let x=1;x<o.length;++x){let A=o[x],I=A.getLeftChar().getValue();for(let P=11;P>=0;--P)(I&1<<P)!=0&&v.set(c),c++;if(A.getRightChar()!=null){let P=A.getRightChar().getValue();for(let z=11;z>=0;--z)(P&1<<z)!=0&&v.set(c),c++}}return v}}class ve{constructor(o,f){f?this.decodedInformation=null:(this.finished=o,this.decodedInformation=f)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ie{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class Le extends Ie{constructor(o,f){super(o),this.value=f}getValue(){return this.value}isFNC1(){return this.value===Le.FNC1}}Le.FNC1="$";class nt extends Ie{constructor(o,f,d){super(o),d?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=f}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Je extends Ie{constructor(o,f,d){if(super(o),f<0||f>10||d<0||d>10)throw new B;this.firstDigit=f,this.secondDigit=d}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Je.FNC1}isSecondDigitFNC1(){return this.secondDigit===Je.FNC1}isAnyFNC1(){return this.firstDigit===Je.FNC1||this.secondDigit===Je.FNC1}}Je.FNC1=10;class Ge{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new ue;let f=o.substring(0,2);for(let c of Ge.TWO_DIGIT_DATA_LENGTH)if(c[0]===f)return c[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(2,c[2],o):Ge.processFixedAI(2,c[1],o);if(o.length<3)throw new ue;let d=o.substring(0,3);for(let c of Ge.THREE_DIGIT_DATA_LENGTH)if(c[0]===d)return c[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(3,c[2],o):Ge.processFixedAI(3,c[1],o);for(let c of Ge.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===d)return c[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(4,c[2],o):Ge.processFixedAI(4,c[1],o);if(o.length<4)throw new ue;let v=o.substring(0,4);for(let c of Ge.FOUR_DIGIT_DATA_LENGTH)if(c[0]===v)return c[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(4,c[2],o):Ge.processFixedAI(4,c[1],o);throw new ue}static processFixedAI(o,f,d){if(d.length<o)throw new ue;let v=d.substring(0,o);if(d.length<o+f)throw new ue;let c=d.substring(o,o+f),h=d.substring(o+f),b="("+v+")"+c,x=Ge.parseFieldsInGeneralPurpose(h);return x==null?b:b+x}static processVariableAI(o,f,d){let v=d.substring(0,o),c;d.length<o+f?c=d.length:c=o+f;let h=d.substring(o,c),b=d.substring(c),x="("+v+")"+h,A=Ge.parseFieldsInGeneralPurpose(b);return A==null?x:x+A}}Ge.VARIABLE_LENGTH=[],Ge.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ge.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ge.VARIABLE_LENGTH,20],["22",Ge.VARIABLE_LENGTH,29],["30",Ge.VARIABLE_LENGTH,8],["37",Ge.VARIABLE_LENGTH,8],["90",Ge.VARIABLE_LENGTH,30],["91",Ge.VARIABLE_LENGTH,30],["92",Ge.VARIABLE_LENGTH,30],["93",Ge.VARIABLE_LENGTH,30],["94",Ge.VARIABLE_LENGTH,30],["95",Ge.VARIABLE_LENGTH,30],["96",Ge.VARIABLE_LENGTH,30],["97",Ge.VARIABLE_LENGTH,3],["98",Ge.VARIABLE_LENGTH,30],["99",Ge.VARIABLE_LENGTH,30]],Ge.THREE_DIGIT_DATA_LENGTH=[["240",Ge.VARIABLE_LENGTH,30],["241",Ge.VARIABLE_LENGTH,30],["242",Ge.VARIABLE_LENGTH,6],["250",Ge.VARIABLE_LENGTH,30],["251",Ge.VARIABLE_LENGTH,30],["253",Ge.VARIABLE_LENGTH,17],["254",Ge.VARIABLE_LENGTH,20],["400",Ge.VARIABLE_LENGTH,30],["401",Ge.VARIABLE_LENGTH,30],["402",17],["403",Ge.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ge.VARIABLE_LENGTH,20],["421",Ge.VARIABLE_LENGTH,15],["422",3],["423",Ge.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ge.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ge.VARIABLE_LENGTH,15],["391",Ge.VARIABLE_LENGTH,18],["392",Ge.VARIABLE_LENGTH,15],["393",Ge.VARIABLE_LENGTH,18],["703",Ge.VARIABLE_LENGTH,30]],Ge.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ge.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ge.VARIABLE_LENGTH,20],["8003",Ge.VARIABLE_LENGTH,30],["8004",Ge.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ge.VARIABLE_LENGTH,30],["8008",Ge.VARIABLE_LENGTH,12],["8018",18],["8020",Ge.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ge.VARIABLE_LENGTH,70],["8200",Ge.VARIABLE_LENGTH,70]];class pt{constructor(o){this.buffer=new se,this.information=o}decodeAllCodes(o,f){let d=f,v=null;do{let c=this.decodeGeneralPurposeField(d,v),h=Ge.parseFieldsInGeneralPurpose(c.getNewString());if(h!=null&&o.append(h),c.isRemaining()?v=""+c.getRemainingValue():v=null,d===c.getNewPosition())break;d=c.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let f=o;f<o+3;++f)if(this.information.get(f))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(o,4);return c===0?new Je(this.information.getSize(),Je.FNC1,Je.FNC1):new Je(this.information.getSize(),c-1,Je.FNC1)}let f=this.extractNumericValueFromBitArray(o,7),d=(f-8)/11,v=(f-8)%11;return new Je(o+7,d,v)}extractNumericValueFromBitArray(o,f){return pt.extractNumericValueFromBitArray(this.information,o,f)}static extractNumericValueFromBitArray(o,f,d){let v=0;for(let c=0;c<d;++c)o.get(f+c)&&(v|=1<<d-c-1);return v}decodeGeneralPurposeField(o,f){this.buffer.setLengthToZero(),f!=null&&this.buffer.append(f),this.current.setPosition(o);let d=this.parseBlocks();return d!=null&&d.isRemaining()?new nt(this.current.getPosition(),this.buffer.toString(),d.getRemainingValue()):new nt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,f;do{let d=this.current.getPosition();if(this.current.isAlpha()?(f=this.parseAlphaBlock(),o=f.isFinished()):this.current.isIsoIec646()?(f=this.parseIsoIec646Block(),o=f.isFinished()):(f=this.parseNumericBlock(),o=f.isFinished()),!(d!==this.current.getPosition())&&!o)break}while(!o);return f.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let f;return o.isSecondDigitFNC1()?f=new nt(this.current.getPosition(),this.buffer.toString()):f=new nt(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new ve(!0,f)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let f=new nt(this.current.getPosition(),this.buffer.toString());return new ve(!0,f)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ve(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let f=new nt(this.current.getPosition(),this.buffer.toString());return new ve(!0,f)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ve(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let f=new nt(this.current.getPosition(),this.buffer.toString());return new ve(!0,f)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ve(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(o,5);if(f>=5&&f<16)return!0;if(o+7>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,7);if(d>=64&&d<116)return!0;if(o+8>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(o,8);return v>=232&&v<253}decodeIsoIec646(o){let f=this.extractNumericValueFromBitArray(o,5);if(f===15)return new Le(o+5,Le.FNC1);if(f>=5&&f<15)return new Le(o+5,"0"+(f-5));let d=this.extractNumericValueFromBitArray(o,7);if(d>=64&&d<90)return new Le(o+7,""+(d+1));if(d>=90&&d<116)return new Le(o+7,""+(d+7));let v=this.extractNumericValueFromBitArray(o,8),c;switch(v){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new B}return new Le(o+8,c)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(o,5);if(f>=5&&f<16)return!0;if(o+6>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,6);return d>=16&&d<63}decodeAlphanumeric(o){let f=this.extractNumericValueFromBitArray(o,5);if(f===15)return new Le(o+5,Le.FNC1);if(f>=5&&f<15)return new Le(o+5,"0"+(f-5));let d=this.extractNumericValueFromBitArray(o,6);if(d>=32&&d<58)return new Le(o+6,""+(d+33));let v;switch(d){case 58:v="*";break;case 59:v=",";break;case 60:v="-";break;case 61:v=".";break;case 62:v="/";break;default:throw new ct("Decoding invalid alphanumeric value: "+d)}return new Le(o+6,v)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let f=0;f<5&&f+o<this.information.getSize();++f)if(f===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+f))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let f=o;f<o+3;++f)if(this.information.get(f))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let f=0;f<4&&f+o<this.information.getSize();++f)if(this.information.get(o+f))return!1;return!0}}class mt{constructor(o){this.information=o,this.generalDecoder=new pt(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ut extends mt{constructor(o){super(o)}encodeCompressedGtin(o,f){o.append("(01)");let d=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,f,d)}encodeCompressedGtinWithoutAI(o,f,d){for(let v=0;v<4;++v){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(f+10*v,10);c/100===0&&o.append("0"),c/10===0&&o.append("0"),o.append(c)}ut.appendCheckDigit(o,d)}static appendCheckDigit(o,f){let d=0;for(let v=0;v<13;v++){let c=o.charAt(v+f).charCodeAt(0)-48;d+=(v&1)===0?3*c:c}d=10-d%10,d===10&&(d=0),o.append(d)}}ut.GTIN_SIZE=40;class Et extends ut{constructor(o){super(o)}parseInformation(){let o=new se;o.append("(01)");let f=o.length(),d=this.getGeneralDecoder().extractNumericValueFromBitArray(Et.HEADER_SIZE,4);return o.append(d),this.encodeCompressedGtinWithoutAI(o,Et.HEADER_SIZE+4,f),this.getGeneralDecoder().decodeAllCodes(o,Et.HEADER_SIZE+44)}}Et.HEADER_SIZE=4;class St extends mt{constructor(o){super(o)}parseInformation(){let o=new se;return this.getGeneralDecoder().decodeAllCodes(o,St.HEADER_SIZE)}}St.HEADER_SIZE=5;class xt extends ut{constructor(o){super(o)}encodeCompressedWeight(o,f,d){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(f,d);this.addWeightCode(o,v);let c=this.checkWeight(v),h=1e5;for(let b=0;b<5;++b)c/h===0&&o.append("0"),h/=10;o.append(c)}}class Gt extends xt{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Gt.HEADER_SIZE+xt.GTIN_SIZE+Gt.WEIGHT_SIZE)throw new ue;let o=new se;return this.encodeCompressedGtin(o,Gt.HEADER_SIZE),this.encodeCompressedWeight(o,Gt.HEADER_SIZE+xt.GTIN_SIZE,Gt.WEIGHT_SIZE),o.toString()}}Gt.HEADER_SIZE=5,Gt.WEIGHT_SIZE=15;class en extends Gt{constructor(o){super(o)}addWeightCode(o,f){o.append("(3103)")}checkWeight(o){return o}}class Gn extends Gt{constructor(o){super(o)}addWeightCode(o,f){f<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class wn extends ut{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<wn.HEADER_SIZE+ut.GTIN_SIZE)throw new ue;let o=new se;this.encodeCompressedGtin(o,wn.HEADER_SIZE);let f=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+ut.GTIN_SIZE,wn.LAST_DIGIT_SIZE);o.append("(392"),o.append(f),o.append(")");let d=this.getGeneralDecoder().decodeGeneralPurposeField(wn.HEADER_SIZE+ut.GTIN_SIZE+wn.LAST_DIGIT_SIZE,null);return o.append(d.getNewString()),o.toString()}}wn.HEADER_SIZE=8,wn.LAST_DIGIT_SIZE=2;class _t extends ut{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<_t.HEADER_SIZE+ut.GTIN_SIZE)throw new ue;let o=new se;this.encodeCompressedGtin(o,_t.HEADER_SIZE);let f=this.getGeneralDecoder().extractNumericValueFromBitArray(_t.HEADER_SIZE+ut.GTIN_SIZE,_t.LAST_DIGIT_SIZE);o.append("(393"),o.append(f),o.append(")");let d=this.getGeneralDecoder().extractNumericValueFromBitArray(_t.HEADER_SIZE+ut.GTIN_SIZE+_t.LAST_DIGIT_SIZE,_t.FIRST_THREE_DIGITS_SIZE);d/100==0&&o.append("0"),d/10==0&&o.append("0"),o.append(d);let v=this.getGeneralDecoder().decodeGeneralPurposeField(_t.HEADER_SIZE+ut.GTIN_SIZE+_t.LAST_DIGIT_SIZE+_t.FIRST_THREE_DIGITS_SIZE,null);return o.append(v.getNewString()),o.toString()}}_t.HEADER_SIZE=8,_t.LAST_DIGIT_SIZE=2,_t.FIRST_THREE_DIGITS_SIZE=10;class Nt extends xt{constructor(o,f,d){super(o),this.dateCode=d,this.firstAIdigits=f}parseInformation(){if(this.getInformation().getSize()!=Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE+Nt.DATE_SIZE)throw new ue;let o=new se;return this.encodeCompressedGtin(o,Nt.HEADER_SIZE),this.encodeCompressedWeight(o,Nt.HEADER_SIZE+Nt.GTIN_SIZE,Nt.WEIGHT_SIZE),this.encodeCompressedDate(o,Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(f,Nt.DATE_SIZE);if(d==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let v=d%32;d/=32;let c=d%12+1;d/=12;let h=d;h/10==0&&o.append("0"),o.append(h),c/10==0&&o.append("0"),o.append(c),v/10==0&&o.append("0"),o.append(v)}addWeightCode(o,f){o.append("("),o.append(this.firstAIdigits),o.append(f/1e5),o.append(")")}checkWeight(o){return o%1e5}}Nt.HEADER_SIZE=8,Nt.WEIGHT_SIZE=20,Nt.DATE_SIZE=16;function qn(W){try{if(W.get(1))return new Et(W);if(!W.get(2))return new St(W);switch(pt.extractNumericValueFromBitArray(W,1,4)){case 4:return new en(W);case 5:return new Gn(W)}switch(pt.extractNumericValueFromBitArray(W,1,5)){case 12:return new wn(W);case 13:return new _t(W)}switch(pt.extractNumericValueFromBitArray(W,1,7)){case 56:return new Nt(W,"310","11");case 57:return new Nt(W,"320","11");case 58:return new Nt(W,"310","13");case 59:return new Nt(W,"320","13");case 60:return new Nt(W,"310","15");case 61:return new Nt(W,"320","15");case 62:return new Nt(W,"310","17");case 63:return new Nt(W,"320","17")}}catch(o){throw console.log(o),new ct("unknown decoder: "+W)}}class rr{constructor(o,f,d,v){this.leftchar=o,this.rightchar=f,this.finderpattern=d,this.maybeLast=v}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,f){return o instanceof rr?rr.equalsOrNull(o.leftchar,f.leftchar)&&rr.equalsOrNull(o.rightchar,f.rightchar)&&rr.equalsOrNull(o.finderpattern,f.finderpattern):!1}static equalsOrNull(o,f){return o===null?f===null:rr.equals(o,f)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Nn{constructor(o,f,d){this.pairs=o,this.rowNumber=f,this.wasReversed=d}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,f){return o instanceof Nn?this.checkEqualitity(o,f)&&o.wasReversed===f.wasReversed:!1}checkEqualitity(o,f){if(!o||!f)return;let d;return o.forEach((v,c)=>{f.forEach(h=>{v.getLeftChar().getValue()===h.getLeftChar().getValue()&&v.getRightChar().getValue()===h.getRightChar().getValue()&&v.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(d=!0)})}),d}}class We extends Dn{constructor(o){super(...arguments),this.pairs=new Array(We.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,f,d){this.pairs.length=0,this.startFromEven=!1;try{return We.constructResult(this.decodeRow2pairs(o,f))}catch(v){this.verbose&&console.log(v)}return this.pairs.length=0,this.startFromEven=!0,We.constructResult(this.decodeRow2pairs(o,f))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,f){let d=!1;for(;!d;)try{this.pairs.push(this.retrieveNextPair(f,this.pairs,o))}catch(c){if(c instanceof ue){if(!this.pairs.length)throw new ue;d=!0}}if(this.checkChecksum())return this.pairs;let v;if(this.rows.length?v=!0:v=!1,this.storeRow(o,!1),v){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new ue}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let f=null;try{f=this.checkRows(new Array,0)}catch(d){this.verbose&&console.log(d)}return o&&(this.rows=this.rows.reverse()),f}checkRows(o,f){for(let d=f;d<this.rows.length;d++){let v=this.rows[d];this.pairs.length=0;for(let h of o)this.pairs.push(h.getPairs());if(this.pairs.push(v.getPairs()),!We.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(o);c.push(v);try{return this.checkRows(c,d+1)}catch(h){this.verbose&&console.log(h)}}throw new ue}static isValidSequence(o){for(let f of We.FINDER_PATTERN_SEQUENCES){if(o.length>f.length)continue;let d=!0;for(let v=0;v<o.length;v++)if(o[v].getFinderPattern().getValue()!=f[v]){d=!1;break}if(d)return!0}return!1}storeRow(o,f){let d=0,v=!1,c=!1;for(;d<this.rows.length;){let h=this.rows[d];if(h.getRowNumber()>o){c=h.isEquivalent(this.pairs);break}v=h.isEquivalent(this.pairs),d++}c||v||We.isPartialRow(this.pairs,this.rows)||(this.rows.push(d,new Nn(this.pairs,o,f)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,f){for(let d of f)if(d.getPairs().length!==o.length){for(let v of d.getPairs())for(let c of o)if(rr.equals(v,c))break}}static isPartialRow(o,f){for(let d of f){let v=!0;for(let c of o){let h=!1;for(let b of d.getPairs())if(c.equals(b)){h=!0;break}if(!h){v=!1;break}}if(v)return!0}return!1}getRows(){return this.rows}static constructResult(o){let f=Fn.buildBitArray(o),v=qn(f).parseInformation(),c=o[0].getFinderPattern().getResultPoints(),h=o[o.length-1].getFinderPattern().getResultPoints(),b=[c[0],c[1],h[0],h[1]];return new Y(v,null,null,b,be.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),f=o.getLeftChar(),d=o.getRightChar();if(d==null)return!1;let v=d.getChecksumPortion(),c=2;for(let b=1;b<this.pairs.size();++b){let x=this.pairs.get(b);v+=x.getLeftChar().getChecksumPortion(),c++;let A=x.getRightChar();A!=null&&(v+=A.getChecksumPortion(),c++)}return v%=211,211*(c-4)+v==f.getValue()}static getNextSecondBar(o,f){let d;return o.get(f)?(d=o.getNextUnset(f),d=o.getNextSet(d)):(d=o.getNextSet(f),d=o.getNextUnset(d)),d}retrieveNextPair(o,f,d){let v=f.length%2==0;this.startFromEven&&(v=!v);let c,h=!0,b=-1;do this.findNextPair(o,f,b),c=this.parseFoundFinderPattern(o,d,v),c==null?b=We.getNextSecondBar(o,this.startEnd[0]):h=!1;while(h);let x=this.decodeDataCharacter(o,c,v,!0);if(!this.isEmptyPair(f)&&f[f.length-1].mustBeLast())throw new ue;let A;try{A=this.decodeDataCharacter(o,c,v,!1)}catch(I){A=null,this.verbose&&console.log(I)}return new rr(x,A,c,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,f,d){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=o.getSize(),h;d>=0?h=d:this.isEmptyPair(f)?h=0:h=f[f.length-1].getFinderPattern().getStartEnd()[1];let b=f.length%2!=0;this.startFromEven&&(b=!b);let x=!1;for(;h<c&&(x=!o.get(h),!!x);)h++;let A=0,I=h;for(let P=h;P<c;P++)if(o.get(P)!=x)v[A]++;else{if(A==3){if(b&&We.reverseCounters(v),We.isFinderPattern(v)){this.startEnd[0]=I,this.startEnd[1]=P;return}b&&We.reverseCounters(v),I+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,A--}else A++;v[A]=1,x=!x}throw new ue}static reverseCounters(o){let f=o.length;for(let d=0;d<f/2;++d){let v=o[d];o[d]=o[f-d-1],o[f-d-1]=v}}parseFoundFinderPattern(o,f,d){let v,c,h;if(d){let A=this.startEnd[0]-1;for(;A>=0&&!o.get(A);)A--;A++,v=this.startEnd[0]-A,c=A,h=this.startEnd[1]}else c=this.startEnd[0],h=o.getNextUnset(this.startEnd[1]+1),v=h-this.startEnd[1];let b=this.getDecodeFinderCounters();R.arraycopy(b,0,b,1,b.length-1),b[0]=v;let x;try{x=this.parseFinderValue(b,We.FINDER_PATTERNS)}catch{return null}return new ii(x,[c,h],c,h,f)}decodeDataCharacter(o,f,d,v){let c=this.getDataCharacterCounters();for(let Ze=0;Ze<c.length;Ze++)c[Ze]=0;if(v)We.recordPatternInReverse(o,f.getStartEnd()[0],c);else{We.recordPattern(o,f.getStartEnd()[1],c);for(let Ze=0,lt=c.length-1;Ze<lt;Ze++,lt--){let at=c[Ze];c[Ze]=c[lt],c[lt]=at}}let h=17,b=jt.sum(new Int32Array(c))/h,x=(f.getStartEnd()[1]-f.getStartEnd()[0])/15;if(Math.abs(b-x)/x>.3)throw new ue;let A=this.getOddCounts(),I=this.getEvenCounts(),P=this.getOddRoundingErrors(),z=this.getEvenRoundingErrors();for(let Ze=0;Ze<c.length;Ze++){let lt=1*c[Ze]/b,at=lt+.5;if(at<1){if(lt<.3)throw new ue;at=1}else if(at>8){if(lt>8.7)throw new ue;at=8}let ht=Ze/2;(Ze&1)==0?(A[ht]=at,P[ht]=lt-at):(I[ht]=at,z[ht]=lt-at)}this.adjustOddEvenCounts(h);let H=4*f.getValue()+(d?0:2)+(v?0:1)-1,X=0,J=0;for(let Ze=A.length-1;Ze>=0;Ze--){if(We.isNotA1left(f,d,v)){let lt=We.WEIGHTS[H][2*Ze];J+=A[Ze]*lt}X+=A[Ze]}let Q=0;for(let Ze=I.length-1;Ze>=0;Ze--)if(We.isNotA1left(f,d,v)){let lt=We.WEIGHTS[H][2*Ze+1];Q+=I[Ze]*lt}let fe=J+Q;if((X&1)!=0||X>13||X<4)throw new ue;let me=(13-X)/2,ge=We.SYMBOL_WIDEST[me],ye=9-ge,_e=ir.getRSSvalue(A,ge,!0),Re=ir.getRSSvalue(I,ye,!1),je=We.EVEN_TOTAL_SUBSET[me],Ue=We.GSUM[me],Ke=_e*je+Re+Ue;return new Jn(Ke,fe)}static isNotA1left(o,f,d){return!(o.getValue()==0&&f&&d)}adjustOddEvenCounts(o){let f=jt.sum(new Int32Array(this.getOddCounts())),d=jt.sum(new Int32Array(this.getEvenCounts())),v=!1,c=!1;f>13?c=!0:f<4&&(v=!0);let h=!1,b=!1;d>13?b=!0:d<4&&(h=!0);let x=f+d-o,A=(f&1)==1,I=(d&1)==0;if(x==1)if(A){if(I)throw new ue;c=!0}else{if(!I)throw new ue;b=!0}else if(x==-1)if(A){if(I)throw new ue;v=!0}else{if(!I)throw new ue;h=!0}else if(x==0){if(A){if(!I)throw new ue;f<d?(v=!0,b=!0):(c=!0,h=!0)}else if(I)throw new ue}else throw new ue;if(v){if(c)throw new ue;We.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&We.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(b)throw new ue;We.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&We.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}We.SYMBOL_WIDEST=[7,5,4,3,1],We.EVEN_TOTAL_SUBSET=[4,20,52,104,204],We.GSUM=[0,348,1388,2948,3988],We.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],We.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],We.FINDER_PAT_A=0,We.FINDER_PAT_B=1,We.FINDER_PAT_C=2,We.FINDER_PAT_D=3,We.FINDER_PAT_E=4,We.FINDER_PAT_F=5,We.FINDER_PATTERN_SEQUENCES=[[We.FINDER_PAT_A,We.FINDER_PAT_A],[We.FINDER_PAT_A,We.FINDER_PAT_B,We.FINDER_PAT_B],[We.FINDER_PAT_A,We.FINDER_PAT_C,We.FINDER_PAT_B,We.FINDER_PAT_D],[We.FINDER_PAT_A,We.FINDER_PAT_E,We.FINDER_PAT_B,We.FINDER_PAT_D,We.FINDER_PAT_C],[We.FINDER_PAT_A,We.FINDER_PAT_E,We.FINDER_PAT_B,We.FINDER_PAT_D,We.FINDER_PAT_D,We.FINDER_PAT_F],[We.FINDER_PAT_A,We.FINDER_PAT_E,We.FINDER_PAT_B,We.FINDER_PAT_D,We.FINDER_PAT_E,We.FINDER_PAT_F,We.FINDER_PAT_F],[We.FINDER_PAT_A,We.FINDER_PAT_A,We.FINDER_PAT_B,We.FINDER_PAT_B,We.FINDER_PAT_C,We.FINDER_PAT_C,We.FINDER_PAT_D,We.FINDER_PAT_D],[We.FINDER_PAT_A,We.FINDER_PAT_A,We.FINDER_PAT_B,We.FINDER_PAT_B,We.FINDER_PAT_C,We.FINDER_PAT_C,We.FINDER_PAT_D,We.FINDER_PAT_E,We.FINDER_PAT_E],[We.FINDER_PAT_A,We.FINDER_PAT_A,We.FINDER_PAT_B,We.FINDER_PAT_B,We.FINDER_PAT_C,We.FINDER_PAT_C,We.FINDER_PAT_D,We.FINDER_PAT_E,We.FINDER_PAT_F,We.FINDER_PAT_F],[We.FINDER_PAT_A,We.FINDER_PAT_A,We.FINDER_PAT_B,We.FINDER_PAT_B,We.FINDER_PAT_C,We.FINDER_PAT_D,We.FINDER_PAT_D,We.FINDER_PAT_E,We.FINDER_PAT_E,We.FINDER_PAT_F,We.FINDER_PAT_F]],We.MAX_PAIRS=11;class Mr extends Jn{constructor(o,f,d){super(o,f),this.count=0,this.finderPattern=d}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class gn extends Dn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,f,d){const v=this.decodePair(f,!1,o,d);gn.addOrTally(this.possibleLeftPairs,v),f.reverse();let c=this.decodePair(f,!0,o,d);gn.addOrTally(this.possibleRightPairs,c),f.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let b of this.possibleRightPairs)if(b.getCount()>1&&gn.checkChecksum(h,b))return gn.constructResult(h,b)}throw new ue}static addOrTally(o,f){if(f==null)return;let d=!1;for(let v of o)if(v.getValue()===f.getValue()){v.incrementCount(),d=!0;break}d||o.push(f)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,f){let d=4537077*o.getValue()+f.getValue(),v=new String(d).toString(),c=new se;for(let A=13-v.length;A>0;A--)c.append("0");c.append(v);let h=0;for(let A=0;A<13;A++){let I=c.charAt(A).charCodeAt(0)-48;h+=(A&1)===0?3*I:I}h=10-h%10,h===10&&(h=0),c.append(h.toString());let b=o.getFinderPattern().getResultPoints(),x=f.getFinderPattern().getResultPoints();return new Y(c.toString(),null,0,[b[0],b[1],x[0],x[1]],be.RSS_14,new Date().getTime())}static checkChecksum(o,f){let d=(o.getChecksumPortion()+16*f.getChecksumPortion())%79,v=9*o.getFinderPattern().getValue()+f.getFinderPattern().getValue();return v>72&&v--,v>8&&v--,d===v}decodePair(o,f,d,v){try{let c=this.findFinderPattern(o,f),h=this.parseFoundFinderPattern(o,d,f,c),b=v==null?null:v.get(F.NEED_RESULT_POINT_CALLBACK);if(b!=null){let I=(c[0]+c[1])/2;f&&(I=o.getSize()-1-I),b.foundPossibleResultPoint(new ot(I,d))}let x=this.decodeDataCharacter(o,h,!0),A=this.decodeDataCharacter(o,h,!1);return new Mr(1597*x.getValue()+A.getValue(),x.getChecksumPortion()+4*A.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(o,f,d){let v=this.getDataCharacterCounters();for(let Q=0;Q<v.length;Q++)v[Q]=0;if(d)Pn.recordPatternInReverse(o,f.getStartEnd()[0],v);else{Pn.recordPattern(o,f.getStartEnd()[1]+1,v);for(let Q=0,fe=v.length-1;Q<fe;Q++,fe--){let me=v[Q];v[Q]=v[fe],v[fe]=me}}let c=d?16:15,h=jt.sum(new Int32Array(v))/c,b=this.getOddCounts(),x=this.getEvenCounts(),A=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Q=0;Q<v.length;Q++){let fe=v[Q]/h,me=Math.floor(fe+.5);me<1?me=1:me>8&&(me=8);let ge=Math.floor(Q/2);(Q&1)===0?(b[ge]=me,A[ge]=fe-me):(x[ge]=me,I[ge]=fe-me)}this.adjustOddEvenCounts(d,c);let P=0,z=0;for(let Q=b.length-1;Q>=0;Q--)z*=9,z+=b[Q],P+=b[Q];let H=0,X=0;for(let Q=x.length-1;Q>=0;Q--)H*=9,H+=x[Q],X+=x[Q];let J=z+3*H;if(d){if((P&1)!==0||P>12||P<4)throw new ue;let Q=(12-P)/2,fe=gn.OUTSIDE_ODD_WIDEST[Q],me=9-fe,ge=ir.getRSSvalue(b,fe,!1),ye=ir.getRSSvalue(x,me,!0),_e=gn.OUTSIDE_EVEN_TOTAL_SUBSET[Q],Re=gn.OUTSIDE_GSUM[Q];return new Jn(ge*_e+ye+Re,J)}else{if((X&1)!==0||X>10||X<4)throw new ue;let Q=(10-X)/2,fe=gn.INSIDE_ODD_WIDEST[Q],me=9-fe,ge=ir.getRSSvalue(b,fe,!0),ye=ir.getRSSvalue(x,me,!1),_e=gn.INSIDE_ODD_TOTAL_SUBSET[Q],Re=gn.INSIDE_GSUM[Q];return new Jn(ye*_e+ge+Re,J)}}findFinderPattern(o,f){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let v=o.getSize(),c=!1,h=0;for(;h<v&&(c=!o.get(h),f!==c);)h++;let b=0,x=h;for(let A=h;A<v;A++)if(o.get(A)!==c)d[b]++;else{if(b===3){if(Dn.isFinderPattern(d))return[x,A];x+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,b--}else b++;d[b]=1,c=!c}throw new ue}parseFoundFinderPattern(o,f,d,v){let c=o.get(v[0]),h=v[0]-1;for(;h>=0&&c!==o.get(h);)h--;h++;const b=v[0]-h,x=this.getDecodeFinderCounters(),A=new Int32Array(x.length);R.arraycopy(x,0,A,1,x.length-1),A[0]=b;const I=this.parseFinderValue(A,gn.FINDER_PATTERNS);let P=h,z=v[1];return d&&(P=o.getSize()-1-P,z=o.getSize()-1-z),new ii(I,[h,v[1]],P,z,f)}adjustOddEvenCounts(o,f){let d=jt.sum(new Int32Array(this.getOddCounts())),v=jt.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1,b=!1,x=!1;o?(d>12?h=!0:d<4&&(c=!0),v>12?x=!0:v<4&&(b=!0)):(d>11?h=!0:d<5&&(c=!0),v>10?x=!0:v<4&&(b=!0));let A=d+v-f,I=(d&1)===(o?1:0),P=(v&1)===1;if(A===1)if(I){if(P)throw new ue;h=!0}else{if(!P)throw new ue;x=!0}else if(A===-1)if(I){if(P)throw new ue;c=!0}else{if(!P)throw new ue;b=!0}else if(A===0){if(I){if(!P)throw new ue;d<v?(c=!0,x=!0):(h=!0,b=!0)}else if(P)throw new ue}else throw new ue;if(c){if(h)throw new ue;Dn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Dn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(x)throw new ue;Dn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Dn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}gn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],gn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],gn.OUTSIDE_GSUM=[0,161,961,2015,2715],gn.INSIDE_GSUM=[0,336,1036,1516],gn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],gn.INSIDE_ODD_WIDEST=[2,4,6,8],gn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Hn extends Pn{constructor(o,f){super(),this.readers=[],this.verbose=f===!0;const d=o?o.get(F.POSSIBLE_FORMATS):null,v=o&&o.get(F.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;d?((d.includes(be.EAN_13)||d.includes(be.UPC_A)||d.includes(be.EAN_8)||d.includes(be.UPC_E))&&this.readers.push(new Ji(o)),d.includes(be.CODE_39)&&this.readers.push(new ft(v)),d.includes(be.CODE_128)&&this.readers.push(new et),d.includes(be.ITF)&&this.readers.push(new Ft),d.includes(be.RSS_14)&&this.readers.push(new gn),d.includes(be.RSS_EXPANDED)&&this.readers.push(new We(this.verbose))):(this.readers.push(new Ji(o)),this.readers.push(new ft),this.readers.push(new Ji(o)),this.readers.push(new et),this.readers.push(new Ft),this.readers.push(new gn),this.readers.push(new We(this.verbose)))}decodeRow(o,f,d){for(let v=0;v<this.readers.length;v++)try{return this.readers[v].decodeRow(o,f,d)}catch{}throw new ue}reset(){this.readers.forEach(o=>o.reset())}}class Pr extends ae{constructor(o=500,f){super(new Hn(f),o,f)}}class tn{constructor(o,f,d){this.ecCodewords=o,this.ecBlocks=[f],d&&this.ecBlocks.push(d)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class cn{constructor(o,f){this.count=o,this.dataCodewords=f}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class st{constructor(o,f,d,v,c,h){this.versionNumber=o,this.symbolSizeRows=f,this.symbolSizeColumns=d,this.dataRegionSizeRows=v,this.dataRegionSizeColumns=c,this.ecBlocks=h;let b=0;const x=h.getECCodewords(),A=h.getECBlocks();for(let I of A)b+=I.getCount()*(I.getDataCodewords()+x);this.totalCodewords=b}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,f){if((o&1)!==0||(f&1)!==0)throw new B;for(let d of st.VERSIONS)if(d.symbolSizeRows===o&&d.symbolSizeColumns===f)return d;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new st(1,10,10,8,8,new tn(5,new cn(1,3))),new st(2,12,12,10,10,new tn(7,new cn(1,5))),new st(3,14,14,12,12,new tn(10,new cn(1,8))),new st(4,16,16,14,14,new tn(12,new cn(1,12))),new st(5,18,18,16,16,new tn(14,new cn(1,18))),new st(6,20,20,18,18,new tn(18,new cn(1,22))),new st(7,22,22,20,20,new tn(20,new cn(1,30))),new st(8,24,24,22,22,new tn(24,new cn(1,36))),new st(9,26,26,24,24,new tn(28,new cn(1,44))),new st(10,32,32,14,14,new tn(36,new cn(1,62))),new st(11,36,36,16,16,new tn(42,new cn(1,86))),new st(12,40,40,18,18,new tn(48,new cn(1,114))),new st(13,44,44,20,20,new tn(56,new cn(1,144))),new st(14,48,48,22,22,new tn(68,new cn(1,174))),new st(15,52,52,24,24,new tn(42,new cn(2,102))),new st(16,64,64,14,14,new tn(56,new cn(2,140))),new st(17,72,72,16,16,new tn(36,new cn(4,92))),new st(18,80,80,18,18,new tn(48,new cn(4,114))),new st(19,88,88,20,20,new tn(56,new cn(4,144))),new st(20,96,96,22,22,new tn(68,new cn(4,174))),new st(21,104,104,24,24,new tn(56,new cn(6,136))),new st(22,120,120,18,18,new tn(68,new cn(6,175))),new st(23,132,132,20,20,new tn(62,new cn(8,163))),new st(24,144,144,22,22,new tn(62,new cn(8,156),new cn(2,155))),new st(25,8,18,6,16,new tn(7,new cn(1,5))),new st(26,8,32,6,14,new tn(11,new cn(1,10))),new st(27,12,26,10,24,new tn(14,new cn(1,16))),new st(28,12,36,10,16,new tn(18,new cn(1,22))),new st(29,16,36,14,16,new tn(24,new cn(1,32))),new st(30,16,48,14,22,new tn(28,new cn(1,49)))]}}st.VERSIONS=st.buildVersions();class Yn{constructor(o){const f=o.getHeight();if(f<8||f>144||(f&1)!==0)throw new B;this.version=Yn.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new Ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const f=o.getHeight(),d=o.getWidth();return st.getVersionForDimensions(f,d)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let f=0,d=4,v=0;const c=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let b=!1,x=!1,A=!1,I=!1;do if(d===c&&v===0&&!b)o[f++]=this.readCorner1(c,h)&255,d-=2,v+=2,b=!0;else if(d===c-2&&v===0&&(h&3)!==0&&!x)o[f++]=this.readCorner2(c,h)&255,d-=2,v+=2,x=!0;else if(d===c+4&&v===2&&(h&7)===0&&!A)o[f++]=this.readCorner3(c,h)&255,d-=2,v+=2,A=!0;else if(d===c-2&&v===0&&(h&7)===4&&!I)o[f++]=this.readCorner4(c,h)&255,d-=2,v+=2,I=!0;else{do d<c&&v>=0&&!this.readMappingMatrix.get(v,d)&&(o[f++]=this.readUtah(d,v,c,h)&255),d-=2,v+=2;while(d>=0&&v<h);d+=1,v+=3;do d>=0&&v<h&&!this.readMappingMatrix.get(v,d)&&(o[f++]=this.readUtah(d,v,c,h)&255),d+=2,v-=2;while(d<c&&v>=0);d+=3,v+=1}while(d<c||v<h);if(f!==this.version.getTotalCodewords())throw new B;return o}readModule(o,f,d,v){return o<0&&(o+=d,f+=4-(d+4&7)),f<0&&(f+=v,o+=4-(v+4&7)),this.readMappingMatrix.set(f,o),this.mappingBitMatrix.get(f,o)}readUtah(o,f,d,v){let c=0;return this.readModule(o-2,f-2,d,v)&&(c|=1),c<<=1,this.readModule(o-2,f-1,d,v)&&(c|=1),c<<=1,this.readModule(o-1,f-2,d,v)&&(c|=1),c<<=1,this.readModule(o-1,f-1,d,v)&&(c|=1),c<<=1,this.readModule(o-1,f,d,v)&&(c|=1),c<<=1,this.readModule(o,f-2,d,v)&&(c|=1),c<<=1,this.readModule(o,f-1,d,v)&&(c|=1),c<<=1,this.readModule(o,f,d,v)&&(c|=1),c}readCorner1(o,f){let d=0;return this.readModule(o-1,0,o,f)&&(d|=1),d<<=1,this.readModule(o-1,1,o,f)&&(d|=1),d<<=1,this.readModule(o-1,2,o,f)&&(d|=1),d<<=1,this.readModule(0,f-2,o,f)&&(d|=1),d<<=1,this.readModule(0,f-1,o,f)&&(d|=1),d<<=1,this.readModule(1,f-1,o,f)&&(d|=1),d<<=1,this.readModule(2,f-1,o,f)&&(d|=1),d<<=1,this.readModule(3,f-1,o,f)&&(d|=1),d}readCorner2(o,f){let d=0;return this.readModule(o-3,0,o,f)&&(d|=1),d<<=1,this.readModule(o-2,0,o,f)&&(d|=1),d<<=1,this.readModule(o-1,0,o,f)&&(d|=1),d<<=1,this.readModule(0,f-4,o,f)&&(d|=1),d<<=1,this.readModule(0,f-3,o,f)&&(d|=1),d<<=1,this.readModule(0,f-2,o,f)&&(d|=1),d<<=1,this.readModule(0,f-1,o,f)&&(d|=1),d<<=1,this.readModule(1,f-1,o,f)&&(d|=1),d}readCorner3(o,f){let d=0;return this.readModule(o-1,0,o,f)&&(d|=1),d<<=1,this.readModule(o-1,f-1,o,f)&&(d|=1),d<<=1,this.readModule(0,f-3,o,f)&&(d|=1),d<<=1,this.readModule(0,f-2,o,f)&&(d|=1),d<<=1,this.readModule(0,f-1,o,f)&&(d|=1),d<<=1,this.readModule(1,f-3,o,f)&&(d|=1),d<<=1,this.readModule(1,f-2,o,f)&&(d|=1),d<<=1,this.readModule(1,f-1,o,f)&&(d|=1),d}readCorner4(o,f){let d=0;return this.readModule(o-3,0,o,f)&&(d|=1),d<<=1,this.readModule(o-2,0,o,f)&&(d|=1),d<<=1,this.readModule(o-1,0,o,f)&&(d|=1),d<<=1,this.readModule(0,f-2,o,f)&&(d|=1),d<<=1,this.readModule(0,f-1,o,f)&&(d|=1),d<<=1,this.readModule(1,f-1,o,f)&&(d|=1),d<<=1,this.readModule(2,f-1,o,f)&&(d|=1),d<<=1,this.readModule(3,f-1,o,f)&&(d|=1),d}extractDataRegion(o){const f=this.version.getSymbolSizeRows(),d=this.version.getSymbolSizeColumns();if(o.getHeight()!==f)throw new S("Dimension of bitMatrix must match the version size");const v=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),h=f/v|0,b=d/c|0,x=h*v,A=b*c,I=new Ee(A,x);for(let P=0;P<h;++P){const z=P*v;for(let H=0;H<b;++H){const X=H*c;for(let J=0;J<v;++J){const Q=P*(v+2)+1+J,fe=z+J;for(let me=0;me<c;++me){const ge=H*(c+2)+1+me;if(o.get(ge,Q)){const ye=X+me;I.set(ye,fe)}}}}}return I}}class si{constructor(o,f){this.numDataCodewords=o,this.codewords=f}static getDataBlocks(o,f){const d=f.getECBlocks();let v=0;const c=d.getECBlocks();for(let J of c)v+=J.getCount();const h=new Array(v);let b=0;for(let J of c)for(let Q=0;Q<J.getCount();Q++){const fe=J.getDataCodewords(),me=d.getECCodewords()+fe;h[b++]=new si(fe,new Uint8Array(me))}const A=h[0].codewords.length-d.getECCodewords(),I=A-1;let P=0;for(let J=0;J<I;J++)for(let Q=0;Q<b;Q++)h[Q].codewords[J]=o[P++];const z=f.getVersionNumber()===24,H=z?8:b;for(let J=0;J<H;J++)h[J].codewords[A-1]=o[P++];const X=h[0].codewords.length;for(let J=A;J<X;J++)for(let Q=0;Q<b;Q++){const fe=z?(Q+8)%b:Q,me=z&&fe>7?J-1:J;h[fe].codewords[me]=o[P++]}if(P!==o.length)throw new S;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class br{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new S(""+o);let f=0,d=this.bitOffset,v=this.byteOffset;const c=this.bytes;if(d>0){const h=8-d,b=o<h?o:h,x=h-b,A=255>>8-b<<x;f=(c[v]&A)>>x,o-=b,d+=b,d===8&&(d=0,v++)}if(o>0){for(;o>=8;)f=f<<8|c[v]&255,v++,o-=8;if(o>0){const h=8-o,b=255>>h<<h;f=f<<o|(c[v]&b)>>h,d+=o}}return this.bitOffset=d,this.byteOffset=v,f}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var gt;(function(W){W[W.PAD_ENCODE=0]="PAD_ENCODE",W[W.ASCII_ENCODE=1]="ASCII_ENCODE",W[W.C40_ENCODE=2]="C40_ENCODE",W[W.TEXT_ENCODE=3]="TEXT_ENCODE",W[W.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",W[W.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",W[W.BASE256_ENCODE=6]="BASE256_ENCODE"})(gt||(gt={}));class wr{static decode(o){const f=new br(o),d=new se,v=new se,c=new Array;let h=gt.ASCII_ENCODE;do if(h===gt.ASCII_ENCODE)h=this.decodeAsciiSegment(f,d,v);else{switch(h){case gt.C40_ENCODE:this.decodeC40Segment(f,d);break;case gt.TEXT_ENCODE:this.decodeTextSegment(f,d);break;case gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(f,d);break;case gt.EDIFACT_ENCODE:this.decodeEdifactSegment(f,d);break;case gt.BASE256_ENCODE:this.decodeBase256Segment(f,d,c);break;default:throw new B}h=gt.ASCII_ENCODE}while(h!==gt.PAD_ENCODE&&f.available()>0);return v.length()>0&&d.append(v.toString()),new $e(o,d.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(o,f,d){let v=!1;do{let c=o.readBits(8);if(c===0)throw new B;if(c<=128)return v&&(c+=128),f.append(String.fromCharCode(c-1)),gt.ASCII_ENCODE;if(c===129)return gt.PAD_ENCODE;if(c<=229){const h=c-130;h<10&&f.append("0"),f.append(""+h)}else switch(c){case 230:return gt.C40_ENCODE;case 231:return gt.BASE256_ENCODE;case 232:f.append("");break;case 233:case 234:break;case 235:v=!0;break;case 236:f.append("[)>05"),d.insert(0,"");break;case 237:f.append("[)>06"),d.insert(0,"");break;case 238:return gt.ANSIX12_ENCODE;case 239:return gt.TEXT_ENCODE;case 240:return gt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||o.available()!==0)throw new B;break}}while(o.available()>0);return gt.ASCII_ENCODE}static decodeC40Segment(o,f){let d=!1;const v=[];let c=0;do{if(o.available()===8)return;const h=o.readBits(8);if(h===254)return;this.parseTwoBytes(h,o.readBits(8),v);for(let b=0;b<3;b++){const x=v[b];switch(c){case 0:if(x<3)c=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[x];d?(f.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):f.append(A)}else throw new B;break;case 1:d?(f.append(String.fromCharCode(x+128)),d=!1):f.append(String.fromCharCode(x)),c=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[x];d?(f.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):f.append(A)}else switch(x){case 27:f.append("");break;case 30:d=!0;break;default:throw new B}c=0;break;case 3:d?(f.append(String.fromCharCode(x+224)),d=!1):f.append(String.fromCharCode(x+96)),c=0;break;default:throw new B}}}while(o.available()>0)}static decodeTextSegment(o,f){let d=!1,v=[],c=0;do{if(o.available()===8)return;const h=o.readBits(8);if(h===254)return;this.parseTwoBytes(h,o.readBits(8),v);for(let b=0;b<3;b++){const x=v[b];switch(c){case 0:if(x<3)c=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[x];d?(f.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):f.append(A)}else throw new B;break;case 1:d?(f.append(String.fromCharCode(x+128)),d=!1):f.append(String.fromCharCode(x)),c=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[x];d?(f.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):f.append(A)}else switch(x){case 27:f.append("");break;case 30:d=!0;break;default:throw new B}c=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[x];d?(f.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):f.append(A),c=0}else throw new B;break;default:throw new B}}}while(o.available()>0)}static decodeAnsiX12Segment(o,f){const d=[];do{if(o.available()===8)return;const v=o.readBits(8);if(v===254)return;this.parseTwoBytes(v,o.readBits(8),d);for(let c=0;c<3;c++){const h=d[c];switch(h){case 0:f.append("\r");break;case 1:f.append("*");break;case 2:f.append(">");break;case 3:f.append(" ");break;default:if(h<14)f.append(String.fromCharCode(h+44));else if(h<40)f.append(String.fromCharCode(h+51));else throw new B;break}}}while(o.available()>0)}static parseTwoBytes(o,f,d){let v=(o<<8)+f-1,c=Math.floor(v/1600);d[0]=c,v-=c*1600,c=Math.floor(v/40),d[1]=c,d[2]=v-c*40}static decodeEdifactSegment(o,f){do{if(o.available()<=16)return;for(let d=0;d<4;d++){let v=o.readBits(6);if(v===31){const c=8-o.getBitOffset();c!==8&&o.readBits(c);return}(v&32)===0&&(v|=64),f.append(String.fromCharCode(v))}}while(o.available()>0)}static decodeBase256Segment(o,f,d){let v=1+o.getByteOffset();const c=this.unrandomize255State(o.readBits(8),v++);let h;if(c===0?h=o.available()/8|0:c<250?h=c:h=250*(c-249)+this.unrandomize255State(o.readBits(8),v++),h<0)throw new B;const b=new Uint8Array(h);for(let x=0;x<h;x++){if(o.available()<8)throw new B;b[x]=this.unrandomize255State(o.readBits(8),v++)}d.push(b);try{f.append(G.decode(b,ce.ISO88591))}catch(x){throw new ct("Platform does not support required encoding: "+x.message)}}static unrandomize255State(o,f){const d=149*f%255+1,v=o-d;return v>=0?v:v+256}}wr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],wr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],wr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],wr.TEXT_SHIFT2_SET_CHARS=wr.C40_SHIFT2_SET_CHARS,wr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class wi{constructor(){this.rsDecoder=new Mt(Me.DATA_MATRIX_FIELD_256)}decode(o){const f=new Yn(o),d=f.getVersion(),v=f.readCodewords(),c=si.getDataBlocks(v,d);let h=0;for(let A of c)h+=A.getNumDataCodewords();const b=new Uint8Array(h),x=c.length;for(let A=0;A<x;A++){const I=c[A],P=I.getCodewords(),z=I.getNumDataCodewords();this.correctErrors(P,z);for(let H=0;H<z;H++)b[H*x+A]=P[H]}return wr.decode(b)}correctErrors(o,f){const d=new Int32Array(o);try{this.rsDecoder.decode(d,o.length-f)}catch{throw new C}for(let v=0;v<f;v++)o[v]=d[v]}}class Tn{constructor(o){this.image=o,this.rectangleDetector=new Jt(this.image)}detect(){const o=this.rectangleDetector.detect();let f=this.detectSolid1(o);if(f=this.detectSolid2(f),f[3]=this.correctTopRight(f),!f[3])throw new ue;f=this.shiftToModuleCenter(f);const d=f[0],v=f[1],c=f[2],h=f[3];let b=this.transitionsBetween(d,h)+1,x=this.transitionsBetween(c,h)+1;(b&1)===1&&(b+=1),(x&1)===1&&(x+=1),4*b<7*x&&4*x<7*b&&(b=x=Math.max(b,x));let A=Tn.sampleGrid(this.image,d,v,c,h,b,x);return new Wr(A,[d,v,c,h])}static shiftPoint(o,f,d){let v=(f.getX()-o.getX())/(d+1),c=(f.getY()-o.getY())/(d+1);return new ot(o.getX()+v,o.getY()+c)}static moveAway(o,f,d){let v=o.getX(),c=o.getY();return v<f?v-=1:v+=1,c<d?c-=1:c+=1,new ot(v,c)}detectSolid1(o){let f=o[0],d=o[1],v=o[3],c=o[2],h=this.transitionsBetween(f,d),b=this.transitionsBetween(d,v),x=this.transitionsBetween(v,c),A=this.transitionsBetween(c,f),I=h,P=[c,f,d,v];return I>b&&(I=b,P[0]=f,P[1]=d,P[2]=v,P[3]=c),I>x&&(I=x,P[0]=d,P[1]=v,P[2]=c,P[3]=f),I>A&&(P[0]=v,P[1]=c,P[2]=f,P[3]=d),P}detectSolid2(o){let f=o[0],d=o[1],v=o[2],c=o[3],h=this.transitionsBetween(f,c),b=Tn.shiftPoint(d,v,(h+1)*4),x=Tn.shiftPoint(v,d,(h+1)*4),A=this.transitionsBetween(b,f),I=this.transitionsBetween(x,c);return A<I?(o[0]=f,o[1]=d,o[2]=v,o[3]=c):(o[0]=d,o[1]=v,o[2]=c,o[3]=f),o}correctTopRight(o){let f=o[0],d=o[1],v=o[2],c=o[3],h=this.transitionsBetween(f,c),b=this.transitionsBetween(d,c),x=Tn.shiftPoint(f,d,(b+1)*4),A=Tn.shiftPoint(v,d,(h+1)*4);h=this.transitionsBetween(x,c),b=this.transitionsBetween(A,c);let I=new ot(c.getX()+(v.getX()-d.getX())/(h+1),c.getY()+(v.getY()-d.getY())/(h+1)),P=new ot(c.getX()+(f.getX()-d.getX())/(b+1),c.getY()+(f.getY()-d.getY())/(b+1));if(!this.isValid(I))return this.isValid(P)?P:null;if(!this.isValid(P))return I;let z=this.transitionsBetween(x,I)+this.transitionsBetween(A,I),H=this.transitionsBetween(x,P)+this.transitionsBetween(A,P);return z>H?I:P}shiftToModuleCenter(o){let f=o[0],d=o[1],v=o[2],c=o[3],h=this.transitionsBetween(f,c)+1,b=this.transitionsBetween(v,c)+1,x=Tn.shiftPoint(f,d,b*4),A=Tn.shiftPoint(v,d,h*4);h=this.transitionsBetween(x,c)+1,b=this.transitionsBetween(A,c)+1,(h&1)===1&&(h+=1),(b&1)===1&&(b+=1);let I=(f.getX()+d.getX()+v.getX()+c.getX())/4,P=(f.getY()+d.getY()+v.getY()+c.getY())/4;f=Tn.moveAway(f,I,P),d=Tn.moveAway(d,I,P),v=Tn.moveAway(v,I,P),c=Tn.moveAway(c,I,P);let z,H;return x=Tn.shiftPoint(f,d,b*4),x=Tn.shiftPoint(x,c,h*4),z=Tn.shiftPoint(d,f,b*4),z=Tn.shiftPoint(z,v,h*4),A=Tn.shiftPoint(v,c,b*4),A=Tn.shiftPoint(A,d,h*4),H=Tn.shiftPoint(c,v,b*4),H=Tn.shiftPoint(H,f,h*4),[x,z,A,H]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,f,d,v,c,h,b){return Cn.getInstance().sampleGrid(o,h,b,.5,.5,h-.5,.5,h-.5,b-.5,.5,b-.5,f.getX(),f.getY(),c.getX(),c.getY(),v.getX(),v.getY(),d.getX(),d.getY())}transitionsBetween(o,f){let d=Math.trunc(o.getX()),v=Math.trunc(o.getY()),c=Math.trunc(f.getX()),h=Math.trunc(f.getY()),b=Math.abs(h-v)>Math.abs(c-d);if(b){let J=d;d=v,v=J,J=c,c=h,h=J}let x=Math.abs(c-d),A=Math.abs(h-v),I=-x/2,P=v<h?1:-1,z=d<c?1:-1,H=0,X=this.image.get(b?v:d,b?d:v);for(let J=d,Q=v;J!==c;J+=z){let fe=this.image.get(b?Q:J,b?J:Q);if(fe!==X&&(H++,X=fe),I+=A,I>0){if(Q===h)break;Q+=P,I-=x}}return H}}class Ei{constructor(){this.decoder=new wi}decode(o,f=null){let d,v;if(f!=null&&f.has(F.PURE_BARCODE)){const A=Ei.extractPureBits(o.getBlackMatrix());d=this.decoder.decode(A),v=Ei.NO_POINTS}else{const A=new Tn(o.getBlackMatrix()).detect();d=this.decoder.decode(A.getBits()),v=A.getPoints()}const c=d.getRawBytes(),h=new Y(d.getText(),c,8*c.length,v,be.DATA_MATRIX,R.currentTimeMillis()),b=d.getByteSegments();b!=null&&h.putMetadata(Ve.BYTE_SEGMENTS,b);const x=d.getECLevel();return x!=null&&h.putMetadata(Ve.ERROR_CORRECTION_LEVEL,x),h}reset(){}static extractPureBits(o){const f=o.getTopLeftOnBit(),d=o.getBottomRightOnBit();if(f==null||d==null)throw new ue;const v=this.moduleSize(f,o);let c=f[1];const h=d[1];let b=f[0];const A=(d[0]-b+1)/v,I=(h-c+1)/v;if(A<=0||I<=0)throw new ue;const P=v/2;c+=P,b+=P;const z=new Ee(A,I);for(let H=0;H<I;H++){const X=c+H*v;for(let J=0;J<A;J++)o.get(b+J*v,X)&&z.set(J,H)}return z}static moduleSize(o,f){const d=f.getWidth();let v=o[0];const c=o[1];for(;v<d&&f.get(v,c);)v++;if(v===d)throw new ue;const h=v-o[0];if(h===0)throw new ue;return h}}Ei.NO_POINTS=[];class Ss extends ae{constructor(o=500){super(new Ei,o)}}var Fi;(function(W){W[W.L=0]="L",W[W.M=1]="M",W[W.Q=2]="Q",W[W.H=3]="H"})(Fi||(Fi={}));class un{constructor(o,f,d){this.value=o,this.stringValue=f,this.bits=d,un.FOR_BITS.set(d,this),un.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return un.L;case"M":return un.M;case"Q":return un.Q;case"H":return un.H;default:throw new w(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof un))return!1;const f=o;return this.value===f.value}static forBits(o){if(o<0||o>=un.FOR_BITS.size)throw new S;return un.FOR_BITS.get(o)}}un.FOR_BITS=new Map,un.FOR_VALUE=new Map,un.L=new un(Fi.L,"L",1),un.M=new un(Fi.M,"M",0),un.Q=new un(Fi.Q,"Q",3),un.H=new un(Fi.H,"H",2);class sr{constructor(o){this.errorCorrectionLevel=un.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,f){return j.bitCount(o^f)}static decodeFormatInformation(o,f){const d=sr.doDecodeFormatInformation(o,f);return d!==null?d:sr.doDecodeFormatInformation(o^sr.FORMAT_INFO_MASK_QR,f^sr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,f){let d=Number.MAX_SAFE_INTEGER,v=0;for(const c of sr.FORMAT_INFO_DECODE_LOOKUP){const h=c[0];if(h===o||h===f)return new sr(c[1]);let b=sr.numBitsDiffering(o,h);b<d&&(v=c[1],d=b),o!==f&&(b=sr.numBitsDiffering(f,h),b<d&&(v=c[1],d=b))}return d<=3?new sr(v):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof sr))return!1;const f=o;return this.errorCorrectionLevel===f.errorCorrectionLevel&&this.dataMask===f.dataMask}}sr.FORMAT_INFO_MASK_QR=21522,sr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ke{constructor(o,...f){this.ecCodewordsPerBlock=o,this.ecBlocks=f}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const f=this.ecBlocks;for(const d of f)o+=d.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class he{constructor(o,f){this.count=o,this.dataCodewords=f}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(o,f,...d){this.versionNumber=o,this.alignmentPatternCenters=f,this.ecBlocks=d;let v=0;const c=d[0].getECCodewordsPerBlock(),h=d[0].getECBlocks();for(const b of h)v+=b.getCount()*(b.getDataCodewords()+c);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new B;try{return this.getVersionForNumber((o-17)/4)}catch{throw new B}}static getVersionForNumber(o){if(o<1||o>40)throw new S;return At.VERSIONS[o-1]}static decodeVersionInformation(o){let f=Number.MAX_SAFE_INTEGER,d=0;for(let v=0;v<At.VERSION_DECODE_INFO.length;v++){const c=At.VERSION_DECODE_INFO[v];if(c===o)return At.getVersionForNumber(v+7);const h=sr.numBitsDiffering(o,c);h<f&&(d=v+7,f=h)}return f<=3?At.getVersionForNumber(d):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),f=new Ee(o);f.setRegion(0,0,9,9),f.setRegion(o-8,0,8,9),f.setRegion(0,o-8,9,8);const d=this.alignmentPatternCenters.length;for(let v=0;v<d;v++){const c=this.alignmentPatternCenters[v]-2;for(let h=0;h<d;h++)v===0&&(h===0||h===d-1)||v===d-1&&h===0||f.setRegion(this.alignmentPatternCenters[h]-2,c,5,5)}return f.setRegion(6,9,1,o-17),f.setRegion(9,6,o-17,1),this.versionNumber>6&&(f.setRegion(o-11,0,3,6),f.setRegion(0,o-11,6,3)),f}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new ke(7,new he(1,19)),new ke(10,new he(1,16)),new ke(13,new he(1,13)),new ke(17,new he(1,9))),new At(2,Int32Array.from([6,18]),new ke(10,new he(1,34)),new ke(16,new he(1,28)),new ke(22,new he(1,22)),new ke(28,new he(1,16))),new At(3,Int32Array.from([6,22]),new ke(15,new he(1,55)),new ke(26,new he(1,44)),new ke(18,new he(2,17)),new ke(22,new he(2,13))),new At(4,Int32Array.from([6,26]),new ke(20,new he(1,80)),new ke(18,new he(2,32)),new ke(26,new he(2,24)),new ke(16,new he(4,9))),new At(5,Int32Array.from([6,30]),new ke(26,new he(1,108)),new ke(24,new he(2,43)),new ke(18,new he(2,15),new he(2,16)),new ke(22,new he(2,11),new he(2,12))),new At(6,Int32Array.from([6,34]),new ke(18,new he(2,68)),new ke(16,new he(4,27)),new ke(24,new he(4,19)),new ke(28,new he(4,15))),new At(7,Int32Array.from([6,22,38]),new ke(20,new he(2,78)),new ke(18,new he(4,31)),new ke(18,new he(2,14),new he(4,15)),new ke(26,new he(4,13),new he(1,14))),new At(8,Int32Array.from([6,24,42]),new ke(24,new he(2,97)),new ke(22,new he(2,38),new he(2,39)),new ke(22,new he(4,18),new he(2,19)),new ke(26,new he(4,14),new he(2,15))),new At(9,Int32Array.from([6,26,46]),new ke(30,new he(2,116)),new ke(22,new he(3,36),new he(2,37)),new ke(20,new he(4,16),new he(4,17)),new ke(24,new he(4,12),new he(4,13))),new At(10,Int32Array.from([6,28,50]),new ke(18,new he(2,68),new he(2,69)),new ke(26,new he(4,43),new he(1,44)),new ke(24,new he(6,19),new he(2,20)),new ke(28,new he(6,15),new he(2,16))),new At(11,Int32Array.from([6,30,54]),new ke(20,new he(4,81)),new ke(30,new he(1,50),new he(4,51)),new ke(28,new he(4,22),new he(4,23)),new ke(24,new he(3,12),new he(8,13))),new At(12,Int32Array.from([6,32,58]),new ke(24,new he(2,92),new he(2,93)),new ke(22,new he(6,36),new he(2,37)),new ke(26,new he(4,20),new he(6,21)),new ke(28,new he(7,14),new he(4,15))),new At(13,Int32Array.from([6,34,62]),new ke(26,new he(4,107)),new ke(22,new he(8,37),new he(1,38)),new ke(24,new he(8,20),new he(4,21)),new ke(22,new he(12,11),new he(4,12))),new At(14,Int32Array.from([6,26,46,66]),new ke(30,new he(3,115),new he(1,116)),new ke(24,new he(4,40),new he(5,41)),new ke(20,new he(11,16),new he(5,17)),new ke(24,new he(11,12),new he(5,13))),new At(15,Int32Array.from([6,26,48,70]),new ke(22,new he(5,87),new he(1,88)),new ke(24,new he(5,41),new he(5,42)),new ke(30,new he(5,24),new he(7,25)),new ke(24,new he(11,12),new he(7,13))),new At(16,Int32Array.from([6,26,50,74]),new ke(24,new he(5,98),new he(1,99)),new ke(28,new he(7,45),new he(3,46)),new ke(24,new he(15,19),new he(2,20)),new ke(30,new he(3,15),new he(13,16))),new At(17,Int32Array.from([6,30,54,78]),new ke(28,new he(1,107),new he(5,108)),new ke(28,new he(10,46),new he(1,47)),new ke(28,new he(1,22),new he(15,23)),new ke(28,new he(2,14),new he(17,15))),new At(18,Int32Array.from([6,30,56,82]),new ke(30,new he(5,120),new he(1,121)),new ke(26,new he(9,43),new he(4,44)),new ke(28,new he(17,22),new he(1,23)),new ke(28,new he(2,14),new he(19,15))),new At(19,Int32Array.from([6,30,58,86]),new ke(28,new he(3,113),new he(4,114)),new ke(26,new he(3,44),new he(11,45)),new ke(26,new he(17,21),new he(4,22)),new ke(26,new he(9,13),new he(16,14))),new At(20,Int32Array.from([6,34,62,90]),new ke(28,new he(3,107),new he(5,108)),new ke(26,new he(3,41),new he(13,42)),new ke(30,new he(15,24),new he(5,25)),new ke(28,new he(15,15),new he(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new ke(28,new he(4,116),new he(4,117)),new ke(26,new he(17,42)),new ke(28,new he(17,22),new he(6,23)),new ke(30,new he(19,16),new he(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new ke(28,new he(2,111),new he(7,112)),new ke(28,new he(17,46)),new ke(30,new he(7,24),new he(16,25)),new ke(24,new he(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new ke(30,new he(4,121),new he(5,122)),new ke(28,new he(4,47),new he(14,48)),new ke(30,new he(11,24),new he(14,25)),new ke(30,new he(16,15),new he(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new ke(30,new he(6,117),new he(4,118)),new ke(28,new he(6,45),new he(14,46)),new ke(30,new he(11,24),new he(16,25)),new ke(30,new he(30,16),new he(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new ke(26,new he(8,106),new he(4,107)),new ke(28,new he(8,47),new he(13,48)),new ke(30,new he(7,24),new he(22,25)),new ke(30,new he(22,15),new he(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new ke(28,new he(10,114),new he(2,115)),new ke(28,new he(19,46),new he(4,47)),new ke(28,new he(28,22),new he(6,23)),new ke(30,new he(33,16),new he(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new ke(30,new he(8,122),new he(4,123)),new ke(28,new he(22,45),new he(3,46)),new ke(30,new he(8,23),new he(26,24)),new ke(30,new he(12,15),new he(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new ke(30,new he(3,117),new he(10,118)),new ke(28,new he(3,45),new he(23,46)),new ke(30,new he(4,24),new he(31,25)),new ke(30,new he(11,15),new he(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new ke(30,new he(7,116),new he(7,117)),new ke(28,new he(21,45),new he(7,46)),new ke(30,new he(1,23),new he(37,24)),new ke(30,new he(19,15),new he(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new ke(30,new he(5,115),new he(10,116)),new ke(28,new he(19,47),new he(10,48)),new ke(30,new he(15,24),new he(25,25)),new ke(30,new he(23,15),new he(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new ke(30,new he(13,115),new he(3,116)),new ke(28,new he(2,46),new he(29,47)),new ke(30,new he(42,24),new he(1,25)),new ke(30,new he(23,15),new he(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new ke(30,new he(17,115)),new ke(28,new he(10,46),new he(23,47)),new ke(30,new he(10,24),new he(35,25)),new ke(30,new he(19,15),new he(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new ke(30,new he(17,115),new he(1,116)),new ke(28,new he(14,46),new he(21,47)),new ke(30,new he(29,24),new he(19,25)),new ke(30,new he(11,15),new he(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new ke(30,new he(13,115),new he(6,116)),new ke(28,new he(14,46),new he(23,47)),new ke(30,new he(44,24),new he(7,25)),new ke(30,new he(59,16),new he(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new ke(30,new he(12,121),new he(7,122)),new ke(28,new he(12,47),new he(26,48)),new ke(30,new he(39,24),new he(14,25)),new ke(30,new he(22,15),new he(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new ke(30,new he(6,121),new he(14,122)),new ke(28,new he(6,47),new he(34,48)),new ke(30,new he(46,24),new he(10,25)),new ke(30,new he(2,15),new he(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new ke(30,new he(17,122),new he(4,123)),new ke(28,new he(29,46),new he(14,47)),new ke(30,new he(49,24),new he(10,25)),new ke(30,new he(24,15),new he(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new ke(30,new he(4,122),new he(18,123)),new ke(28,new he(13,46),new he(32,47)),new ke(30,new he(48,24),new he(14,25)),new ke(30,new he(42,15),new he(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new ke(30,new he(20,117),new he(4,118)),new ke(28,new he(40,47),new he(7,48)),new ke(30,new he(43,24),new he(22,25)),new ke(30,new he(10,15),new he(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new ke(30,new he(19,118),new he(6,119)),new ke(28,new he(18,47),new he(31,48)),new ke(30,new he(34,24),new he(34,25)),new ke(30,new he(20,15),new he(61,16)))];var Wn;(function(W){W[W.DATA_MASK_000=0]="DATA_MASK_000",W[W.DATA_MASK_001=1]="DATA_MASK_001",W[W.DATA_MASK_010=2]="DATA_MASK_010",W[W.DATA_MASK_011=3]="DATA_MASK_011",W[W.DATA_MASK_100=4]="DATA_MASK_100",W[W.DATA_MASK_101=5]="DATA_MASK_101",W[W.DATA_MASK_110=6]="DATA_MASK_110",W[W.DATA_MASK_111=7]="DATA_MASK_111"})(Wn||(Wn={}));class ar{constructor(o,f){this.value=o,this.isMasked=f}unmaskBitMatrix(o,f){for(let d=0;d<f;d++)for(let v=0;v<f;v++)this.isMasked(d,v)&&o.flip(v,d)}}ar.values=new Map([[Wn.DATA_MASK_000,new ar(Wn.DATA_MASK_000,(W,o)=>(W+o&1)===0)],[Wn.DATA_MASK_001,new ar(Wn.DATA_MASK_001,(W,o)=>(W&1)===0)],[Wn.DATA_MASK_010,new ar(Wn.DATA_MASK_010,(W,o)=>o%3===0)],[Wn.DATA_MASK_011,new ar(Wn.DATA_MASK_011,(W,o)=>(W+o)%3===0)],[Wn.DATA_MASK_100,new ar(Wn.DATA_MASK_100,(W,o)=>(Math.floor(W/2)+Math.floor(o/3)&1)===0)],[Wn.DATA_MASK_101,new ar(Wn.DATA_MASK_101,(W,o)=>W*o%6===0)],[Wn.DATA_MASK_110,new ar(Wn.DATA_MASK_110,(W,o)=>W*o%6<3)],[Wn.DATA_MASK_111,new ar(Wn.DATA_MASK_111,(W,o)=>(W+o+W*o%3&1)===0)]]);class Yt{constructor(o){const f=o.getHeight();if(f<21||(f&3)!==1)throw new B;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let c=0;c<6;c++)o=this.copyBit(c,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let c=5;c>=0;c--)o=this.copyBit(8,c,o);const f=this.bitMatrix.getHeight();let d=0;const v=f-7;for(let c=f-1;c>=v;c--)d=this.copyBit(8,c,d);for(let c=f-8;c<f;c++)d=this.copyBit(c,8,d);if(this.parsedFormatInfo=sr.decodeFormatInformation(o,d),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),f=Math.floor((o-17)/4);if(f<=6)return At.getVersionForNumber(f);let d=0;const v=o-11;for(let h=5;h>=0;h--)for(let b=o-9;b>=v;b--)d=this.copyBit(b,h,d);let c=At.decodeVersionInformation(d);if(c!==null&&c.getDimensionForVersion()===o)return this.parsedVersion=c,c;d=0;for(let h=5;h>=0;h--)for(let b=o-9;b>=v;b--)d=this.copyBit(h,b,d);if(c=At.decodeVersionInformation(d),c!==null&&c.getDimensionForVersion()===o)return this.parsedVersion=c,c;throw new B}copyBit(o,f,d){return(this.isMirror?this.bitMatrix.get(f,o):this.bitMatrix.get(o,f))?d<<1|1:d<<1}readCodewords(){const o=this.readFormatInformation(),f=this.readVersion(),d=ar.values.get(o.getDataMask()),v=this.bitMatrix.getHeight();d.unmaskBitMatrix(this.bitMatrix,v);const c=f.buildFunctionPattern();let h=!0;const b=new Uint8Array(f.getTotalCodewords());let x=0,A=0,I=0;for(let P=v-1;P>0;P-=2){P===6&&P--;for(let z=0;z<v;z++){const H=h?v-1-z:z;for(let X=0;X<2;X++)c.get(P-X,H)||(I++,A<<=1,this.bitMatrix.get(P-X,H)&&(A|=1),I===8&&(b[x++]=A,I=0,A=0))}h=!h}if(x!==f.getTotalCodewords())throw new B;return b}remask(){if(this.parsedFormatInfo===null)return;const o=ar.values[this.parsedFormatInfo.getDataMask()],f=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,f)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let f=0,d=o.getWidth();f<d;f++)for(let v=f+1,c=o.getHeight();v<c;v++)o.get(f,v)!==o.get(v,f)&&(o.flip(v,f),o.flip(f,v))}}class Di{constructor(o,f){this.numDataCodewords=o,this.codewords=f}static getDataBlocks(o,f,d){if(o.length!==f.getTotalCodewords())throw new S;const v=f.getECBlocksForLevel(d);let c=0;const h=v.getECBlocks();for(const X of h)c+=X.getCount();const b=new Array(c);let x=0;for(const X of h)for(let J=0;J<X.getCount();J++){const Q=X.getDataCodewords(),fe=v.getECCodewordsPerBlock()+Q;b[x++]=new Di(Q,new Uint8Array(fe))}const A=b[0].codewords.length;let I=b.length-1;for(;I>=0&&b[I].codewords.length!==A;)I--;I++;const P=A-v.getECCodewordsPerBlock();let z=0;for(let X=0;X<P;X++)for(let J=0;J<x;J++)b[J].codewords[X]=o[z++];for(let X=I;X<x;X++)b[X].codewords[P]=o[z++];const H=b[0].codewords.length;for(let X=P;X<H;X++)for(let J=0;J<x;J++){const Q=J<I?X:X+1;b[J].codewords[Q]=o[z++]}return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var di;(function(W){W[W.TERMINATOR=0]="TERMINATOR",W[W.NUMERIC=1]="NUMERIC",W[W.ALPHANUMERIC=2]="ALPHANUMERIC",W[W.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",W[W.BYTE=4]="BYTE",W[W.ECI=5]="ECI",W[W.KANJI=6]="KANJI",W[W.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",W[W.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",W[W.HANZI=9]="HANZI"})(di||(di={}));class Ot{constructor(o,f,d,v){this.value=o,this.stringValue=f,this.characterCountBitsForVersions=d,this.bits=v,Ot.FOR_BITS.set(v,this),Ot.FOR_VALUE.set(o,this)}static forBits(o){const f=Ot.FOR_BITS.get(o);if(f===void 0)throw new S;return f}getCharacterCountBits(o){const f=o.getVersionNumber();let d;return f<=9?d=0:f<=26?d=1:d=2,this.characterCountBitsForVersions[d]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Ot))return!1;const f=o;return this.value===f.value}toString(){return this.stringValue}}Ot.FOR_BITS=new Map,Ot.FOR_VALUE=new Map,Ot.TERMINATOR=new Ot(di.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ot.NUMERIC=new Ot(di.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ot.ALPHANUMERIC=new Ot(di.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ot.STRUCTURED_APPEND=new Ot(di.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ot.BYTE=new Ot(di.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ot.ECI=new Ot(di.ECI,"ECI",Int32Array.from([0,0,0]),7),Ot.KANJI=new Ot(di.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ot.FNC1_FIRST_POSITION=new Ot(di.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ot.FNC1_SECOND_POSITION=new Ot(di.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ot.HANZI=new Ot(di.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class hn{static decode(o,f,d,v){const c=new br(o);let h=new se;const b=new Array;let x=-1,A=-1;try{let I=null,P=!1,z;do{if(c.available()<4)z=Ot.TERMINATOR;else{const H=c.readBits(4);z=Ot.forBits(H)}switch(z){case Ot.TERMINATOR:break;case Ot.FNC1_FIRST_POSITION:case Ot.FNC1_SECOND_POSITION:P=!0;break;case Ot.STRUCTURED_APPEND:if(c.available()<16)throw new B;x=c.readBits(8),A=c.readBits(8);break;case Ot.ECI:const H=hn.parseECIValue(c);if(I=le.getCharacterSetECIByValue(H),I===null)throw new B;break;case Ot.HANZI:const X=c.readBits(4),J=c.readBits(z.getCharacterCountBits(f));X===hn.GB2312_SUBSET&&hn.decodeHanziSegment(c,h,J);break;default:const Q=c.readBits(z.getCharacterCountBits(f));switch(z){case Ot.NUMERIC:hn.decodeNumericSegment(c,h,Q);break;case Ot.ALPHANUMERIC:hn.decodeAlphanumericSegment(c,h,Q,P);break;case Ot.BYTE:hn.decodeByteSegment(c,h,Q,I,b,v);break;case Ot.KANJI:hn.decodeKanjiSegment(c,h,Q);break;default:throw new B}break}}while(z!==Ot.TERMINATOR)}catch{throw new B}return new $e(o,h.toString(),b.length===0?null:b,d===null?null:d.toString(),x,A)}static decodeHanziSegment(o,f,d){if(d*13>o.available())throw new B;const v=new Uint8Array(2*d);let c=0;for(;d>0;){const h=o.readBits(13);let b=h/96<<8&4294967295|h%96;b<959?b+=41377:b+=42657,v[c]=b>>8&255,v[c+1]=b&255,c+=2,d--}try{f.append(G.decode(v,ce.GB2312))}catch(h){throw new B(h)}}static decodeKanjiSegment(o,f,d){if(d*13>o.available())throw new B;const v=new Uint8Array(2*d);let c=0;for(;d>0;){const h=o.readBits(13);let b=h/192<<8&4294967295|h%192;b<7936?b+=33088:b+=49472,v[c]=b>>8,v[c+1]=b,c+=2,d--}try{f.append(G.decode(v,ce.SHIFT_JIS))}catch(h){throw new B(h)}}static decodeByteSegment(o,f,d,v,c,h){if(8*d>o.available())throw new B;const b=new Uint8Array(d);for(let A=0;A<d;A++)b[A]=o.readBits(8);let x;v===null?x=ce.guessEncoding(b,h):x=v.getName();try{f.append(G.decode(b,x))}catch(A){throw new B(A)}c.push(b)}static toAlphaNumericChar(o){if(o>=hn.ALPHANUMERIC_CHARS.length)throw new B;return hn.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,f,d,v){const c=f.length();for(;d>1;){if(o.available()<11)throw new B;const h=o.readBits(11);f.append(hn.toAlphaNumericChar(Math.floor(h/45))),f.append(hn.toAlphaNumericChar(h%45)),d-=2}if(d===1){if(o.available()<6)throw new B;f.append(hn.toAlphaNumericChar(o.readBits(6)))}if(v)for(let h=c;h<f.length();h++)f.charAt(h)==="%"&&(h<f.length()-1&&f.charAt(h+1)==="%"?f.deleteCharAt(h+1):f.setCharAt(h,""))}static decodeNumericSegment(o,f,d){for(;d>=3;){if(o.available()<10)throw new B;const v=o.readBits(10);if(v>=1e3)throw new B;f.append(hn.toAlphaNumericChar(Math.floor(v/100))),f.append(hn.toAlphaNumericChar(Math.floor(v/10)%10)),f.append(hn.toAlphaNumericChar(v%10)),d-=3}if(d===2){if(o.available()<7)throw new B;const v=o.readBits(7);if(v>=100)throw new B;f.append(hn.toAlphaNumericChar(Math.floor(v/10))),f.append(hn.toAlphaNumericChar(v%10))}else if(d===1){if(o.available()<4)throw new B;const v=o.readBits(4);if(v>=10)throw new B;f.append(hn.toAlphaNumericChar(v))}}static parseECIValue(o){const f=o.readBits(8);if((f&128)===0)return f&127;if((f&192)===128){const d=o.readBits(8);return(f&63)<<8&4294967295|d}if((f&224)===192){const d=o.readBits(16);return(f&31)<<16&4294967295|d}throw new B}}hn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",hn.GB2312_SUBSET=1;class as{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const f=o[0];o[0]=o[2],o[2]=f}}class ia{constructor(){this.rsDecoder=new Mt(Me.QR_CODE_FIELD_256)}decodeBooleanArray(o,f){return this.decodeBitMatrix(Ee.parseFromBooleanArray(o),f)}decodeBitMatrix(o,f){const d=new Yt(o);let v=null;try{return this.decodeBitMatrixParser(d,f)}catch(c){v=c}try{d.remask(),d.setMirror(!0),d.readVersion(),d.readFormatInformation(),d.mirror();const c=this.decodeBitMatrixParser(d,f);return c.setOther(new as(!0)),c}catch(c){throw v!==null?v:c}}decodeBitMatrixParser(o,f){const d=o.readVersion(),v=o.readFormatInformation().getErrorCorrectionLevel(),c=o.readCodewords(),h=Di.getDataBlocks(c,d,v);let b=0;for(const I of h)b+=I.getNumDataCodewords();const x=new Uint8Array(b);let A=0;for(const I of h){const P=I.getCodewords(),z=I.getNumDataCodewords();this.correctErrors(P,z);for(let H=0;H<z;H++)x[A++]=P[H]}return hn.decode(x,d,v,f)}correctErrors(o,f){const d=new Int32Array(o);try{this.rsDecoder.decode(d,o.length-f)}catch{throw new C}for(let v=0;v<f;v++)o[v]=d[v]}}class pi extends ot{constructor(o,f,d){super(o,f),this.estimatedModuleSize=d}aboutEquals(o,f,d){if(Math.abs(f-this.getY())<=o&&Math.abs(d-this.getX())<=o){const v=Math.abs(o-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(o,f,d){const v=(this.getX()+f)/2,c=(this.getY()+o)/2,h=(this.estimatedModuleSize+d)/2;return new pi(v,c,h)}}class ai{constructor(o,f,d,v,c,h,b){this.image=o,this.startX=f,this.startY=d,this.width=v,this.height=c,this.moduleSize=h,this.resultPointCallback=b,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,f=this.height,d=this.width,v=o+d,c=this.startY+f/2,h=new Int32Array(3),b=this.image;for(let x=0;x<f;x++){const A=c+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));h[0]=0,h[1]=0,h[2]=0;let I=o;for(;I<v&&!b.get(I,A);)I++;let P=0;for(;I<v;){if(b.get(I,A))if(P===1)h[1]++;else if(P===2){if(this.foundPatternCross(h)){const z=this.handlePossibleCenter(h,A,I);if(z!==null)return z}h[0]=h[2],h[1]=1,h[2]=0,P=1}else h[++P]++;else P===1&&P++,h[P]++;I++}if(this.foundPatternCross(h)){const z=this.handlePossibleCenter(h,A,v);if(z!==null)return z}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ue}static centerFromEnd(o,f){return f-o[2]-o[1]/2}foundPatternCross(o){const f=this.moduleSize,d=f/2;for(let v=0;v<3;v++)if(Math.abs(f-o[v])>=d)return!1;return!0}crossCheckVertical(o,f,d,v){const c=this.image,h=c.getHeight(),b=this.crossCheckStateCount;b[0]=0,b[1]=0,b[2]=0;let x=o;for(;x>=0&&c.get(f,x)&&b[1]<=d;)b[1]++,x--;if(x<0||b[1]>d)return NaN;for(;x>=0&&!c.get(f,x)&&b[0]<=d;)b[0]++,x--;if(b[0]>d)return NaN;for(x=o+1;x<h&&c.get(f,x)&&b[1]<=d;)b[1]++,x++;if(x===h||b[1]>d)return NaN;for(;x<h&&!c.get(f,x)&&b[2]<=d;)b[2]++,x++;if(b[2]>d)return NaN;const A=b[0]+b[1]+b[2];return 5*Math.abs(A-v)>=2*v?NaN:this.foundPatternCross(b)?ai.centerFromEnd(b,x):NaN}handlePossibleCenter(o,f,d){const v=o[0]+o[1]+o[2],c=ai.centerFromEnd(o,d),h=this.crossCheckVertical(f,c,2*o[1],v);if(!isNaN(h)){const b=(o[0]+o[1]+o[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(b,h,c))return A.combineEstimate(h,c,b);const x=new pi(c,h,b);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Dr extends ot{constructor(o,f,d,v){super(o,f),this.estimatedModuleSize=d,this.count=v,v===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,f,d){if(Math.abs(f-this.getY())<=o&&Math.abs(d-this.getX())<=o){const v=Math.abs(o-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(o,f,d){const v=this.count+1,c=(this.count*this.getX()+f)/v,h=(this.count*this.getY()+o)/v,b=(this.count*this.estimatedModuleSize+d)/v;return new Dr(c,h,b,v)}}class or{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class En{constructor(o,f){this.image=o,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=f}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const f=o!=null&&o.get(F.TRY_HARDER)!==void 0,d=o!=null&&o.get(F.PURE_BARCODE)!==void 0,v=this.image,c=v.getHeight(),h=v.getWidth();let b=Math.floor(3*c/(4*En.MAX_MODULES));(b<En.MIN_SKIP||f)&&(b=En.MIN_SKIP);let x=!1;const A=new Int32Array(5);for(let P=b-1;P<c&&!x;P+=b){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let z=0;for(let H=0;H<h;H++)if(v.get(H,P))(z&1)===1&&z++,A[z]++;else if((z&1)===0)if(z===4)if(En.foundPatternCross(A)){if(this.handlePossibleCenter(A,P,H,d)===!0)if(b=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>A[2]&&(P+=J-A[2]-b,H=h-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,z=3;continue}z=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,z=3;else A[++z]++;else A[z]++;En.foundPatternCross(A)&&this.handlePossibleCenter(A,P,h,d)===!0&&(b=A[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return ot.orderBestPatterns(I),new or(I)}static centerFromEnd(o,f){return f-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let f=0;for(let c=0;c<5;c++){const h=o[c];if(h===0)return!1;f+=h}if(f<7)return!1;const d=f/7,v=d/2;return Math.abs(d-o[0])<v&&Math.abs(d-o[1])<v&&Math.abs(3*d-o[2])<3*v&&Math.abs(d-o[3])<v&&Math.abs(d-o[4])<v}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,f,d,v){const c=this.getCrossCheckStateCount();let h=0;const b=this.image;for(;o>=h&&f>=h&&b.get(f-h,o-h);)c[2]++,h++;if(o<h||f<h)return!1;for(;o>=h&&f>=h&&!b.get(f-h,o-h)&&c[1]<=d;)c[1]++,h++;if(o<h||f<h||c[1]>d)return!1;for(;o>=h&&f>=h&&b.get(f-h,o-h)&&c[0]<=d;)c[0]++,h++;if(c[0]>d)return!1;const x=b.getHeight(),A=b.getWidth();for(h=1;o+h<x&&f+h<A&&b.get(f+h,o+h);)c[2]++,h++;if(o+h>=x||f+h>=A)return!1;for(;o+h<x&&f+h<A&&!b.get(f+h,o+h)&&c[3]<d;)c[3]++,h++;if(o+h>=x||f+h>=A||c[3]>=d)return!1;for(;o+h<x&&f+h<A&&b.get(f+h,o+h)&&c[4]<d;)c[4]++,h++;if(c[4]>=d)return!1;const I=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(I-v)<2*v&&En.foundPatternCross(c)}crossCheckVertical(o,f,d,v){const c=this.image,h=c.getHeight(),b=this.getCrossCheckStateCount();let x=o;for(;x>=0&&c.get(f,x);)b[2]++,x--;if(x<0)return NaN;for(;x>=0&&!c.get(f,x)&&b[1]<=d;)b[1]++,x--;if(x<0||b[1]>d)return NaN;for(;x>=0&&c.get(f,x)&&b[0]<=d;)b[0]++,x--;if(b[0]>d)return NaN;for(x=o+1;x<h&&c.get(f,x);)b[2]++,x++;if(x===h)return NaN;for(;x<h&&!c.get(f,x)&&b[3]<d;)b[3]++,x++;if(x===h||b[3]>=d)return NaN;for(;x<h&&c.get(f,x)&&b[4]<d;)b[4]++,x++;if(b[4]>=d)return NaN;const A=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(A-v)>=2*v?NaN:En.foundPatternCross(b)?En.centerFromEnd(b,x):NaN}crossCheckHorizontal(o,f,d,v){const c=this.image,h=c.getWidth(),b=this.getCrossCheckStateCount();let x=o;for(;x>=0&&c.get(x,f);)b[2]++,x--;if(x<0)return NaN;for(;x>=0&&!c.get(x,f)&&b[1]<=d;)b[1]++,x--;if(x<0||b[1]>d)return NaN;for(;x>=0&&c.get(x,f)&&b[0]<=d;)b[0]++,x--;if(b[0]>d)return NaN;for(x=o+1;x<h&&c.get(x,f);)b[2]++,x++;if(x===h)return NaN;for(;x<h&&!c.get(x,f)&&b[3]<d;)b[3]++,x++;if(x===h||b[3]>=d)return NaN;for(;x<h&&c.get(x,f)&&b[4]<d;)b[4]++,x++;if(b[4]>=d)return NaN;const A=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(A-v)>=v?NaN:En.foundPatternCross(b)?En.centerFromEnd(b,x):NaN}handlePossibleCenter(o,f,d,v){const c=o[0]+o[1]+o[2]+o[3]+o[4];let h=En.centerFromEnd(o,d),b=this.crossCheckVertical(f,Math.floor(h),o[2],c);if(!isNaN(b)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(b),o[2],c),!isNaN(h)&&(!v||this.crossCheckDiagonal(Math.floor(b),Math.floor(h),o[2],c)))){const x=c/7;let A=!1;const I=this.possibleCenters;for(let P=0,z=I.length;P<z;P++){const H=I[P];if(H.aboutEquals(x,b,h)){I[P]=H.combineEstimate(b,h,x),A=!0;break}}if(!A){const P=new Dr(h,b,x);I.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let f=null;for(const d of this.possibleCenters)if(d.getCount()>=En.CENTER_QUORUM)if(f==null)f=d;else return this.hasSkipped=!0,Math.floor((Math.abs(f.getX()-d.getX())-Math.abs(f.getY()-d.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,f=0;const d=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=En.CENTER_QUORUM&&(o++,f+=h.getEstimatedModuleSize());if(o<3)return!1;const v=f/d;let c=0;for(const h of this.possibleCenters)c+=Math.abs(h.getEstimatedModuleSize()-v);return c<=.05*f}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new ue;const f=this.possibleCenters;let d;if(o>3){let v=0,c=0;for(const x of this.possibleCenters){const A=x.getEstimatedModuleSize();v+=A,c+=A*A}d=v/o;let h=Math.sqrt(c/o-d*d);f.sort((x,A)=>{const I=Math.abs(A.getEstimatedModuleSize()-d),P=Math.abs(x.getEstimatedModuleSize()-d);return I<P?-1:I>P?1:0});const b=Math.max(.2*d,h);for(let x=0;x<f.length&&f.length>3;x++){const A=f[x];Math.abs(A.getEstimatedModuleSize()-d)>b&&(f.splice(x,1),x--)}}if(f.length>3){let v=0;for(const c of f)v+=c.getEstimatedModuleSize();d=v/f.length,f.sort((c,h)=>{if(h.getCount()===c.getCount()){const b=Math.abs(h.getEstimatedModuleSize()-d),x=Math.abs(c.getEstimatedModuleSize()-d);return b<x?1:b>x?-1:0}else return h.getCount()-c.getCount()}),f.splice(3)}return[f[0],f[1],f[2]]}}En.CENTER_QUORUM=2,En.MIN_SKIP=3,En.MAX_MODULES=57;class Br{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(F.NEED_RESULT_POINT_CALLBACK);const d=new En(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(d)}processFinderPatternInfo(o){const f=o.getTopLeft(),d=o.getTopRight(),v=o.getBottomLeft(),c=this.calculateModuleSize(f,d,v);if(c<1)throw new ue("No pattern found in proccess finder.");const h=Br.computeDimension(f,d,v,c),b=At.getProvisionalVersionForDimension(h),x=b.getDimensionForVersion()-7;let A=null;if(b.getAlignmentPatternCenters().length>0){const H=d.getX()-f.getX()+v.getX(),X=d.getY()-f.getY()+v.getY(),J=1-3/x,Q=Math.floor(f.getX()+J*(H-f.getX())),fe=Math.floor(f.getY()+J*(X-f.getY()));for(let me=4;me<=16;me<<=1)try{A=this.findAlignmentInRegion(c,Q,fe,me);break}catch(ge){if(!(ge instanceof ue))throw ge}}const I=Br.createTransform(f,d,v,A,h),P=Br.sampleGrid(this.image,I,h);let z;return A===null?z=[v,f,d]:z=[v,f,d,A],new Wr(P,z)}static createTransform(o,f,d,v,c){const h=c-3.5;let b,x,A,I;return v!==null?(b=v.getX(),x=v.getY(),A=h-3,I=A):(b=f.getX()-o.getX()+d.getX(),x=f.getY()-o.getY()+d.getY(),A=h,I=h),zn.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,A,I,3.5,h,o.getX(),o.getY(),f.getX(),f.getY(),b,x,d.getX(),d.getY())}static sampleGrid(o,f,d){return Cn.getInstance().sampleGridWithTransform(o,d,d,f)}static computeDimension(o,f,d,v){const c=jt.round(ot.distance(o,f)/v),h=jt.round(ot.distance(o,d)/v);let b=Math.floor((c+h)/2)+7;switch(b&3){case 0:b++;break;case 2:b--;break;case 3:throw new ue("Dimensions could be not found.")}return b}calculateModuleSize(o,f,d){return(this.calculateModuleSizeOneWay(o,f)+this.calculateModuleSizeOneWay(o,d))/2}calculateModuleSizeOneWay(o,f){const d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(f.getX()),Math.floor(f.getY())),v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(f.getX()),Math.floor(f.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(d)?v/7:isNaN(v)?d/7:(d+v)/14}sizeOfBlackWhiteBlackRunBothWays(o,f,d,v){let c=this.sizeOfBlackWhiteBlackRun(o,f,d,v),h=1,b=o-(d-o);b<0?(h=o/(o-b),b=0):b>=this.image.getWidth()&&(h=(this.image.getWidth()-1-o)/(b-o),b=this.image.getWidth()-1);let x=Math.floor(f-(v-f)*h);return h=1,x<0?(h=f/(f-x),x=0):x>=this.image.getHeight()&&(h=(this.image.getHeight()-1-f)/(x-f),x=this.image.getHeight()-1),b=Math.floor(o+(b-o)*h),c+=this.sizeOfBlackWhiteBlackRun(o,f,b,x),c-1}sizeOfBlackWhiteBlackRun(o,f,d,v){const c=Math.abs(v-f)>Math.abs(d-o);if(c){let H=o;o=f,f=H,H=d,d=v,v=H}const h=Math.abs(d-o),b=Math.abs(v-f);let x=-h/2;const A=o<d?1:-1,I=f<v?1:-1;let P=0;const z=d+A;for(let H=o,X=f;H!==z;H+=A){const J=c?X:H,Q=c?H:X;if(P===1===this.image.get(J,Q)){if(P===2)return jt.distance(H,X,o,f);P++}if(x+=b,x>0){if(X===v)break;X+=I,x-=h}}return P===2?jt.distance(d+A,v,o,f):NaN}findAlignmentInRegion(o,f,d,v){const c=Math.floor(v*o),h=Math.max(0,f-c),b=Math.min(this.image.getWidth()-1,f+c);if(b-h<o*3)throw new ue("Alignment top exceeds estimated module size.");const x=Math.max(0,d-c),A=Math.min(this.image.getHeight()-1,d+c);if(A-x<o*3)throw new ue("Alignment bottom exceeds estimated module size.");return new ai(this.image,h,x,b-h,A-x,o,this.resultPointCallback).find()}}class Qr{constructor(){this.decoder=new ia}getDecoder(){return this.decoder}decode(o,f){let d,v;if(f!=null&&f.get(F.PURE_BARCODE)!==void 0){const x=Qr.extractPureBits(o.getBlackMatrix());d=this.decoder.decodeBitMatrix(x,f),v=Qr.NO_POINTS}else{const x=new Br(o.getBlackMatrix()).detect(f);d=this.decoder.decodeBitMatrix(x.getBits(),f),v=x.getPoints()}d.getOther()instanceof as&&d.getOther().applyMirroredCorrection(v);const c=new Y(d.getText(),d.getRawBytes(),void 0,v,be.QR_CODE,void 0),h=d.getByteSegments();h!==null&&c.putMetadata(Ve.BYTE_SEGMENTS,h);const b=d.getECLevel();return b!==null&&c.putMetadata(Ve.ERROR_CORRECTION_LEVEL,b),d.hasStructuredAppend()&&(c.putMetadata(Ve.STRUCTURED_APPEND_SEQUENCE,d.getStructuredAppendSequenceNumber()),c.putMetadata(Ve.STRUCTURED_APPEND_PARITY,d.getStructuredAppendParity())),c}reset(){}static extractPureBits(o){const f=o.getTopLeftOnBit(),d=o.getBottomRightOnBit();if(f===null||d===null)throw new ue;const v=this.moduleSize(f,o);let c=f[1],h=d[1],b=f[0],x=d[0];if(b>=x||c>=h)throw new ue;if(h-c!==x-b&&(x=b+(h-c),x>=o.getWidth()))throw new ue;const A=Math.round((x-b+1)/v),I=Math.round((h-c+1)/v);if(A<=0||I<=0)throw new ue;if(I!==A)throw new ue;const P=Math.floor(v/2);c+=P,b+=P;const z=b+Math.floor((A-1)*v)-x;if(z>0){if(z>P)throw new ue;b-=z}const H=c+Math.floor((I-1)*v)-h;if(H>0){if(H>P)throw new ue;c-=H}const X=new Ee(A,I);for(let J=0;J<I;J++){const Q=c+Math.floor(J*v);for(let fe=0;fe<A;fe++)o.get(b+Math.floor(fe*v),Q)&&X.set(fe,J)}return X}static moduleSize(o,f){const d=f.getHeight(),v=f.getWidth();let c=o[0],h=o[1],b=!0,x=0;for(;c<v&&h<d;){if(b!==f.get(c,h)){if(++x===5)break;b=!b}c++,h++}if(c===v||h===d)throw new ue;return(c-o[0])/7}}Qr.NO_POINTS=new Array;class Dt{PDF417Common(){}static getBitCountSum(o){return jt.sum(o)}static toIntArray(o){if(o==null||!o.length)return Dt.EMPTY_INT_ARRAY;const f=new Int32Array(o.length);let d=0;for(const v of o)f[d++]=v;return f}static getCodeword(o){const f=k.binarySearch(Dt.SYMBOL_TABLE,o&262143);return f<0?-1:(Dt.CODEWORD_TABLE[f]-1)%Dt.NUMBER_OF_CODEWORDS}}Dt.NUMBER_OF_CODEWORDS=929,Dt.MAX_CODEWORDS_IN_BARCODE=Dt.NUMBER_OF_CODEWORDS-1,Dt.MIN_ROWS_IN_BARCODE=3,Dt.MAX_ROWS_IN_BARCODE=90,Dt.MODULES_IN_CODEWORD=17,Dt.MODULES_IN_STOP_PATTERN=18,Dt.BARS_IN_MODULE=8,Dt.EMPTY_INT_ARRAY=new Int32Array([]),Dt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Dt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class qi{constructor(o,f){this.bits=o,this.points=f}getBits(){return this.bits}getPoints(){return this.points}}class Kt{static detectMultiple(o,f,d){let v=o.getBlackMatrix(),c=Kt.detect(d,v);return c.length||(v=v.clone(),v.rotate180(),c=Kt.detect(d,v)),new qi(v,c)}static detect(o,f){const d=new Array;let v=0,c=0,h=!1;for(;v<f.getHeight();){const b=Kt.findVertices(f,v,c);if(b[0]==null&&b[3]==null){if(!h)break;h=!1,c=0;for(const x of d)x[1]!=null&&(v=Math.trunc(Math.max(v,x[1].getY()))),x[3]!=null&&(v=Math.max(v,Math.trunc(x[3].getY())));v+=Kt.ROW_STEP;continue}if(h=!0,d.push(b),!o)break;b[2]!=null?(c=Math.trunc(b[2].getX()),v=Math.trunc(b[2].getY())):(c=Math.trunc(b[4].getX()),v=Math.trunc(b[4].getY()))}return d}static findVertices(o,f,d){const v=o.getHeight(),c=o.getWidth(),h=new Array(8);return Kt.copyToResult(h,Kt.findRowsWithPattern(o,v,c,f,d,Kt.START_PATTERN),Kt.INDEXES_START_PATTERN),h[4]!=null&&(d=Math.trunc(h[4].getX()),f=Math.trunc(h[4].getY())),Kt.copyToResult(h,Kt.findRowsWithPattern(o,v,c,f,d,Kt.STOP_PATTERN),Kt.INDEXES_STOP_PATTERN),h}static copyToResult(o,f,d){for(let v=0;v<d.length;v++)o[d[v]]=f[v]}static findRowsWithPattern(o,f,d,v,c,h){const b=new Array(4);let x=!1;const A=new Int32Array(h.length);for(;v<f;v+=Kt.ROW_STEP){let P=Kt.findGuardPattern(o,c,v,d,!1,h,A);if(P!=null){for(;v>0;){const z=Kt.findGuardPattern(o,c,--v,d,!1,h,A);if(z!=null)P=z;else{v++;break}}b[0]=new ot(P[0],v),b[1]=new ot(P[1],v),x=!0;break}}let I=v+1;if(x){let P=0,z=Int32Array.from([Math.trunc(b[0].getX()),Math.trunc(b[1].getX())]);for(;I<f;I++){const H=Kt.findGuardPattern(o,z[0],I,d,!1,h,A);if(H!=null&&Math.abs(z[0]-H[0])<Kt.MAX_PATTERN_DRIFT&&Math.abs(z[1]-H[1])<Kt.MAX_PATTERN_DRIFT)z=H,P=0;else{if(P>Kt.SKIPPED_ROW_COUNT_MAX)break;P++}}I-=P+1,b[2]=new ot(z[0],I),b[3]=new ot(z[1],I)}return I-v<Kt.BARCODE_MIN_HEIGHT&&k.fill(b,null),b}static findGuardPattern(o,f,d,v,c,h,b){k.fillWithin(b,0,b.length,0);let x=f,A=0;for(;o.get(x,d)&&x>0&&A++<Kt.MAX_PIXEL_DRIFT;)x--;let I=x,P=0,z=h.length;for(let H=c;I<v;I++)if(o.get(I,d)!==H)b[P]++;else{if(P===z-1){if(Kt.patternMatchVariance(b,h,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return new Int32Array([x,I]);x+=b[0]+b[1],R.arraycopy(b,2,b,0,P-1),b[P-1]=0,b[P]=0,P--}else P++;b[P]=1,H=!H}return P===z-1&&Kt.patternMatchVariance(b,h,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE?new Int32Array([x,I-1]):null}static patternMatchVariance(o,f,d){let v=o.length,c=0,h=0;for(let A=0;A<v;A++)c+=o[A],h+=f[A];if(c<h)return 1/0;let b=c/h;d*=b;let x=0;for(let A=0;A<v;A++){let I=o[A],P=f[A]*b,z=I>P?I-P:P-I;if(z>d)return 1/0;x+=z}return x/c}}Kt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Kt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Kt.MAX_AVG_VARIANCE=.42,Kt.MAX_INDIVIDUAL_VARIANCE=.8,Kt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Kt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Kt.MAX_PIXEL_DRIFT=3,Kt.MAX_PATTERN_DRIFT=5,Kt.SKIPPED_ROW_COUNT_MAX=25,Kt.ROW_STEP=5,Kt.BARCODE_MIN_HEIGHT=10;class pn{constructor(o,f){if(f.length===0)throw new S;this.field=o;let d=f.length;if(d>1&&f[0]===0){let v=1;for(;v<d&&f[v]===0;)v++;v===d?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(d-v),R.arraycopy(f,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=f}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let v=0;for(let c of this.coefficients)v=this.field.add(v,c);return v}let f=this.coefficients[0],d=this.coefficients.length;for(let v=1;v<d;v++)f=this.field.add(this.field.multiply(o,f),this.coefficients[v]);return f}add(o){if(!this.field.equals(o.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let f=this.coefficients,d=o.coefficients;if(f.length>d.length){let h=f;f=d,d=h}let v=new Int32Array(d.length),c=d.length-f.length;R.arraycopy(d,0,v,0,c);for(let h=c;h<d.length;h++)v[h]=this.field.add(f[h-c],d[h]);return new pn(this.field,v)}subtract(o){if(!this.field.equals(o.field))throw new S("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof pn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new pn(this.field,new Int32Array([0]));let f=this.coefficients,d=f.length,v=o.coefficients,c=v.length,h=new Int32Array(d+c-1);for(let b=0;b<d;b++){let x=f[b];for(let A=0;A<c;A++)h[b+A]=this.field.add(h[b+A],this.field.multiply(x,v[A]))}return new pn(this.field,h)}negative(){let o=this.coefficients.length,f=new Int32Array(o);for(let d=0;d<o;d++)f[d]=this.field.subtract(0,this.coefficients[d]);return new pn(this.field,f)}multiplyScalar(o){if(o===0)return new pn(this.field,new Int32Array([0]));if(o===1)return this;let f=this.coefficients.length,d=new Int32Array(f);for(let v=0;v<f;v++)d[v]=this.field.multiply(this.coefficients[v],o);return new pn(this.field,d)}multiplyByMonomial(o,f){if(o<0)throw new S;if(f===0)return new pn(this.field,new Int32Array([0]));let d=this.coefficients.length,v=new Int32Array(d+o);for(let c=0;c<d;c++)v[c]=this.field.multiply(this.coefficients[c],f);return new pn(this.field,v)}toString(){let o=new se;for(let f=this.getDegree();f>=0;f--){let d=this.getCoefficient(f);d!==0&&(d<0?(o.append(" - "),d=-d):o.length()>0&&o.append(" + "),(f===0||d!==1)&&o.append(d),f!==0&&(f===1?o.append("x"):(o.append("x^"),o.append(f))))}return o.toString()}}class xs{add(o,f){return(o+f)%this.modulus}subtract(o,f){return(this.modulus+o-f)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new S;return this.logTable[o]}inverse(o){if(o===0)throw new Se;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,f){return o===0||f===0?0:this.expTable[(this.logTable[o]+this.logTable[f])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class Zr extends xs{constructor(o,f){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let d=1;for(let v=0;v<o;v++)this.expTable[v]=d,d=d*f%o;for(let v=0;v<o-1;v++)this.logTable[this.expTable[v]]=v;this.zero=new pn(this,new Int32Array([0])),this.one=new pn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,f){if(o<0)throw new S;if(f===0)return this.zero;let d=new Int32Array(o+1);return d[0]=f,new pn(this,d)}}Zr.PDF417_GF=new Zr(Dt.NUMBER_OF_CODEWORDS,3);class Si{constructor(){this.field=Zr.PDF417_GF}decode(o,f,d){let v=new pn(this.field,o),c=new Int32Array(f),h=!1;for(let X=f;X>0;X--){let J=v.evaluateAt(this.field.exp(X));c[f-X]=J,J!==0&&(h=!0)}if(!h)return 0;let b=this.field.getOne();if(d!=null)for(const X of d){let J=this.field.exp(o.length-1-X),Q=new pn(this.field,new Int32Array([this.field.subtract(0,J),1]));b=b.multiply(Q)}let x=new pn(this.field,c),A=this.runEuclideanAlgorithm(this.field.buildMonomial(f,1),x,f),I=A[0],P=A[1],z=this.findErrorLocations(I),H=this.findErrorMagnitudes(P,I,z);for(let X=0;X<z.length;X++){let J=o.length-1-this.field.log(z[X]);if(J<0)throw C.getChecksumInstance();o[J]=this.field.subtract(o[J],H[X])}return z.length}runEuclideanAlgorithm(o,f,d){if(o.getDegree()<f.getDegree()){let z=o;o=f,f=z}let v=o,c=f,h=this.field.getZero(),b=this.field.getOne();for(;c.getDegree()>=Math.round(d/2);){let z=v,H=h;if(v=c,h=b,v.isZero())throw C.getChecksumInstance();c=z;let X=this.field.getZero(),J=v.getCoefficient(v.getDegree()),Q=this.field.inverse(J);for(;c.getDegree()>=v.getDegree()&&!c.isZero();){let fe=c.getDegree()-v.getDegree(),me=this.field.multiply(c.getCoefficient(c.getDegree()),Q);X=X.add(this.field.buildMonomial(fe,me)),c=c.subtract(v.multiplyByMonomial(fe,me))}b=X.multiply(h).subtract(H).negative()}let x=b.getCoefficient(0);if(x===0)throw C.getChecksumInstance();let A=this.field.inverse(x),I=b.multiply(A),P=c.multiply(A);return[I,P]}findErrorLocations(o){let f=o.getDegree(),d=new Int32Array(f),v=0;for(let c=1;c<this.field.getSize()&&v<f;c++)o.evaluateAt(c)===0&&(d[v]=this.field.inverse(c),v++);if(v!==f)throw C.getChecksumInstance();return d}findErrorMagnitudes(o,f,d){let v=f.getDegree(),c=new Int32Array(v);for(let A=1;A<=v;A++)c[v-A]=this.field.multiply(A,f.getCoefficient(A));let h=new pn(this.field,c),b=d.length,x=new Int32Array(b);for(let A=0;A<b;A++){let I=this.field.inverse(d[A]),P=this.field.subtract(0,o.evaluateAt(I)),z=this.field.inverse(h.evaluateAt(I));x[A]=this.field.multiply(P,z)}return x}}class Jr{constructor(o,f,d,v,c){o instanceof Jr?this.constructor_2(o):this.constructor_1(o,f,d,v,c)}constructor_1(o,f,d,v,c){const h=f==null||d==null,b=v==null||c==null;if(h&&b)throw new ue;h?(f=new ot(0,v.getY()),d=new ot(0,c.getY())):b&&(v=new ot(o.getWidth()-1,f.getY()),c=new ot(o.getWidth()-1,d.getY())),this.image=o,this.topLeft=f,this.bottomLeft=d,this.topRight=v,this.bottomRight=c,this.minX=Math.trunc(Math.min(f.getX(),d.getX())),this.maxX=Math.trunc(Math.max(v.getX(),c.getX())),this.minY=Math.trunc(Math.min(f.getY(),v.getY())),this.maxY=Math.trunc(Math.max(d.getY(),c.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,f){return o==null?f:f==null?o:new Jr(o.image,o.topLeft,o.bottomLeft,f.topRight,f.bottomRight)}addMissingRows(o,f,d){let v=this.topLeft,c=this.bottomLeft,h=this.topRight,b=this.bottomRight;if(o>0){let x=d?this.topLeft:this.topRight,A=Math.trunc(x.getY()-o);A<0&&(A=0);let I=new ot(x.getX(),A);d?v=I:h=I}if(f>0){let x=d?this.bottomLeft:this.bottomRight,A=Math.trunc(x.getY()+f);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let I=new ot(x.getX(),A);d?c=I:b=I}return new Jr(this.image,v,c,h,b)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class _s{constructor(o,f,d,v){this.columnCount=o,this.errorCorrectionLevel=v,this.rowCountUpperPart=f,this.rowCountLowerPart=d,this.rowCount=f+d}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class os{constructor(){this.buffer=""}static form(o,f){let d=-1;function v(h,b,x,A,I,P){if(h==="%%")return"%";if(f[++d]===void 0)return;h=A?parseInt(A.substr(1)):void 0;let z=I?parseInt(I.substr(1)):void 0,H;switch(P){case"s":H=f[d];break;case"c":H=f[d][0];break;case"f":H=parseFloat(f[d]).toFixed(h);break;case"p":H=parseFloat(f[d]).toPrecision(h);break;case"e":H=parseFloat(f[d]).toExponential(h);break;case"x":H=parseInt(f[d]).toString(z||16);break;case"d":H=parseFloat(parseInt(f[d],z||10).toPrecision(h)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(z);let X=parseInt(x),J=x&&x[0]+""=="0"?"0":" ";for(;H.length<X;)H=b!==void 0?H+J:J+H;return H}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(c,v)}format(o,...f){this.buffer+=os.form(o,f)}toString(){return this.buffer}}class q{constructor(o){this.boundingBox=new Jr(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let f=this.getCodeword(o);if(f!=null)return f;for(let d=1;d<q.MAX_NEARBY_DISTANCE;d++){let v=this.imageRowToCodewordIndex(o)-d;if(v>=0&&(f=this.codewords[v],f!=null)||(v=this.imageRowToCodewordIndex(o)+d,v<this.codewords.length&&(f=this.codewords[v],f!=null)))return f}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,f){this.codewords[this.imageRowToCodewordIndex(o)]=f}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new os;let f=0;for(const d of this.codewords){if(d==null){o.format("%3d:    |   %n",f++);continue}o.format("%3d: %3d|%3d%n",f++,d.getRowNumber(),d.getValue())}return o.toString()}}q.MAX_NEARBY_DISTANCE=5;class ne{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let f=this.values.get(o);f==null&&(f=0),f++,this.values.set(o,f)}getValue(){let o=-1,f=new Array;for(const[d,v]of this.values.entries()){const c={getKey:()=>d,getValue:()=>v};c.getValue()>o?(o=c.getValue(),f=[],f.push(c.getKey())):c.getValue()===o&&f.push(c.getKey())}return Dt.toIntArray(f)}getConfidence(o){return this.values.get(o)}}class Ce extends q{constructor(o,f){super(o),this._isLeft=f}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let f=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(f,o);let d=this.getBoundingBox(),v=this._isLeft?d.getTopLeft():d.getTopRight(),c=this._isLeft?d.getBottomLeft():d.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(v.getY())),b=this.imageRowToCodewordIndex(Math.trunc(c.getY())),x=-1,A=1,I=0;for(let P=h;P<b;P++){if(f[P]==null)continue;let z=f[P],H=z.getRowNumber()-x;if(H===0)I++;else if(H===1)A=Math.max(A,I),I=1,x=z.getRowNumber();else if(H<0||z.getRowNumber()>=o.getRowCount()||H>P)f[P]=null;else{let X;A>2?X=(A-2)*H:X=H;let J=X>=P;for(let Q=1;Q<=X&&!J;Q++)J=f[P-Q]!=null;J?f[P]=null:(x=z.getRowNumber(),I=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let f=new Int32Array(o.getRowCount());for(let d of this.getCodewords())if(d!=null){let v=d.getRowNumber();if(v>=f.length)continue;f[v]++}return f}adjustIncompleteIndicatorColumnRowNumbers(o){let f=this.getBoundingBox(),d=this._isLeft?f.getTopLeft():f.getTopRight(),v=this._isLeft?f.getBottomLeft():f.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(d.getY())),h=this.imageRowToCodewordIndex(Math.trunc(v.getY())),b=this.getCodewords(),x=-1;for(let A=c;A<h;A++){if(b[A]==null)continue;let I=b[A];I.setRowNumberAsRowIndicatorColumn();let P=I.getRowNumber()-x;P===0||(P===1?x=I.getRowNumber():I.getRowNumber()>=o.getRowCount()?b[A]=null:x=I.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),f=new ne,d=new ne,v=new ne,c=new ne;for(let b of o){if(b==null)continue;b.setRowNumberAsRowIndicatorColumn();let x=b.getValue()%30,A=b.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:d.setValue(x*3+1);break;case 1:c.setValue(x/3),v.setValue(x%3);break;case 2:f.setValue(x+1);break}}if(f.getValue().length===0||d.getValue().length===0||v.getValue().length===0||c.getValue().length===0||f.getValue()[0]<1||d.getValue()[0]+v.getValue()[0]<Dt.MIN_ROWS_IN_BARCODE||d.getValue()[0]+v.getValue()[0]>Dt.MAX_ROWS_IN_BARCODE)return null;let h=new _s(f.getValue()[0],d.getValue()[0],v.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(o,h),h}removeIncorrectCodewords(o,f){for(let d=0;d<o.length;d++){let v=o[d];if(o[d]==null)continue;let c=v.getValue()%30,h=v.getRowNumber();if(h>f.getRowCount()){o[d]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:c*3+1!==f.getRowCountUpperPart()&&(o[d]=null);break;case 1:(Math.trunc(c/3)!==f.getErrorCorrectionLevel()||c%3!==f.getRowCountLowerPart())&&(o[d]=null);break;case 2:c+1!==f.getColumnCount()&&(o[d]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class qe{constructor(o,f){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=f,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Dt.MAX_CODEWORDS_IN_BARCODE,f;do f=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<f);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let f=1;f<this.barcodeColumnCount+1;f++){let d=this.detectionResultColumns[f].getCodewords();for(let v=0;v<d.length;v++)d[v]!=null&&(d[v].hasValidRowNumber()||this.adjustRowNumbers(f,v,d))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),f=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let d=0;d<o.length;d++)if(o[d]!=null&&f[d]!=null&&o[d].getRowNumber()===f[d].getRowNumber())for(let v=1;v<=this.barcodeColumnCount;v++){let c=this.detectionResultColumns[v].getCodewords()[d];c!=null&&(c.setRowNumber(o[d].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[v].getCodewords()[d]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,f=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let d=0;d<f.length;d++){if(f[d]==null)continue;let v=f[d].getRowNumber(),c=0;for(let h=this.barcodeColumnCount+1;h>0&&c<this.ADJUST_ROW_NUMBER_SKIP;h--){let b=this.detectionResultColumns[h].getCodewords()[d];b!=null&&(c=qe.adjustRowNumberIfValid(v,c,b),b.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,f=this.detectionResultColumns[0].getCodewords();for(let d=0;d<f.length;d++){if(f[d]==null)continue;let v=f[d].getRowNumber(),c=0;for(let h=1;h<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;h++){let b=this.detectionResultColumns[h].getCodewords()[d];b!=null&&(c=qe.adjustRowNumberIfValid(v,c,b),b.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,f,d){return d==null||d.hasValidRowNumber()||(d.isValidRowNumber(o)?(d.setRowNumber(o),f=0):++f),f}adjustRowNumbers(o,f,d){if(!this.detectionResultColumns[o-1])return;let v=d[f],c=this.detectionResultColumns[o-1].getCodewords(),h=c;this.detectionResultColumns[o+1]!=null&&(h=this.detectionResultColumns[o+1].getCodewords());let b=new Array(14);b[2]=c[f],b[3]=h[f],f>0&&(b[0]=d[f-1],b[4]=c[f-1],b[5]=h[f-1]),f>1&&(b[8]=d[f-2],b[10]=c[f-2],b[11]=h[f-2]),f<d.length-1&&(b[1]=d[f+1],b[6]=c[f+1],b[7]=h[f+1]),f<d.length-2&&(b[9]=d[f+2],b[12]=c[f+2],b[13]=h[f+2]);for(let x of b)if(qe.adjustRowNumber(v,x))return}static adjustRowNumber(o,f){return f==null?!1:f.hasValidRowNumber()&&f.getBucket()===o.getBucket()?(o.setRowNumber(f.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,f){this.detectionResultColumns[o]=f}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let f=new os;for(let d=0;d<o.getCodewords().length;d++){f.format("CW %3d:",d);for(let v=0;v<this.barcodeColumnCount+2;v++){if(this.detectionResultColumns[v]==null){f.format("    |   ");continue}let c=this.detectionResultColumns[v].getCodewords()[d];if(c==null){f.format("    |   ");continue}f.format(" %3d|%3d",c.getRowNumber(),c.getValue())}f.format("%n")}return f.toString()}}class kt{constructor(o,f,d,v){this.rowNumber=kt.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(f),this.bucket=Math.trunc(d),this.value=Math.trunc(v)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==kt.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}kt.BARCODE_ROW_UNKNOWN=-1;class wt{static initialize(){for(let o=0;o<Dt.SYMBOL_TABLE.length;o++){let f=Dt.SYMBOL_TABLE[o],d=f&1;for(let v=0;v<Dt.BARS_IN_MODULE;v++){let c=0;for(;(f&1)===d;)c+=1,f>>=1;d=f&1,wt.RATIOS_TABLE[o]||(wt.RATIOS_TABLE[o]=new Array(Dt.BARS_IN_MODULE)),wt.RATIOS_TABLE[o][Dt.BARS_IN_MODULE-v-1]=Math.fround(c/Dt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let f=wt.getDecodedCodewordValue(wt.sampleBitCounts(o));return f!==-1?f:wt.getClosestDecodedValue(o)}static sampleBitCounts(o){let f=jt.sum(o),d=new Int32Array(Dt.BARS_IN_MODULE),v=0,c=0;for(let h=0;h<Dt.MODULES_IN_CODEWORD;h++){let b=f/(2*Dt.MODULES_IN_CODEWORD)+h*f/Dt.MODULES_IN_CODEWORD;c+o[v]<=b&&(c+=o[v],v++),d[v]++}return d}static getDecodedCodewordValue(o){let f=wt.getBitValue(o);return Dt.getCodeword(f)===-1?-1:f}static getBitValue(o){let f=0;for(let d=0;d<o.length;d++)for(let v=0;v<o[d];v++)f=f<<1|(d%2===0?1:0);return Math.trunc(f)}static getClosestDecodedValue(o){let f=jt.sum(o),d=new Array(Dt.BARS_IN_MODULE);if(f>1)for(let h=0;h<d.length;h++)d[h]=Math.fround(o[h]/f);let v=jn.MAX_VALUE,c=-1;this.bSymbolTableReady||wt.initialize();for(let h=0;h<wt.RATIOS_TABLE.length;h++){let b=0,x=wt.RATIOS_TABLE[h];for(let A=0;A<Dt.BARS_IN_MODULE;A++){let I=Math.fround(x[A]-d[A]);if(b+=Math.fround(I*I),b>=v)break}b<v&&(v=b,c=Dt.SYMBOL_TABLE[h])}return c}}wt.bSymbolTableReady=!1,wt.RATIOS_TABLE=new Array(Dt.SYMBOL_TABLE.length).map(W=>new Array(Dt.BARS_IN_MODULE));class dn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class _n{static parseLong(o,f=void 0){return parseInt(o,f)}}class lr extends y{}lr.kind="NullPointerException";class Mn{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,f,d){if(o==null)throw new lr;if(f<0||f>o.length||d<0||f+d>o.length||f+d<0)throw new M;if(d===0)return;for(let v=0;v<d;v++)this.write(o[f+v])}flush(){}close(){}}class Er extends y{}class Ur extends Mn{constructor(o=32){if(super(),this.count=0,o<0)throw new S("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let d=this.buf.length<<1;if(d-o<0&&(d=o),d<0){if(o<0)throw new Er;d=j.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,d)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,f,d){if(f<0||f>o.length||d<0||f+d-o.length>0)throw new M;this.ensureCapacity(this.count+d),R.arraycopy(o,f,this.buf,this.count,d),this.count+=d}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var $t;(function(W){W[W.ALPHA=0]="ALPHA",W[W.LOWER=1]="LOWER",W[W.MIXED=2]="MIXED",W[W.PUNCT=3]="PUNCT",W[W.ALPHA_SHIFT=4]="ALPHA_SHIFT",W[W.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function Lr(){if(typeof window<"u"||typeof window<"u")return window.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let cr;function Vr(W){if(typeof cr>"u"&&(cr=Lr()),cr===null)throw new Error("BigInt is not supported!");return cr(W)}function ji(){let W=[];W[0]=Vr(1);let o=Vr(900);W[1]=o;for(let f=2;f<16;f++)W[f]=W[f-1]*o;return W}class ze{static decode(o,f){let d=new se(""),v=le.ISO8859_1;d.enableDecoding(v);let c=1,h=o[c++],b=new dn;for(;c<o[0];){switch(h){case ze.TEXT_COMPACTION_MODE_LATCH:c=ze.textCompaction(o,c,d);break;case ze.BYTE_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:c=ze.byteCompaction(h,o,v,c,d);break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(o[c++]);break;case ze.NUMERIC_COMPACTION_MODE_LATCH:c=ze.numericCompaction(o,c,d);break;case ze.ECI_CHARSET:le.getCharacterSetECIByValue(o[c++]);break;case ze.ECI_GENERAL_PURPOSE:c+=2;break;case ze.ECI_USER_DEFINED:c++;break;case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=ze.decodeMacroBlock(o,c,b);break;case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:throw new B;default:c--,c=ze.textCompaction(o,c,d);break}if(c<o.length)h=o[c++];else throw B.getFormatInstance()}if(d.length()===0)throw B.getFormatInstance();let x=new $e(null,d.toString(),null,f);return x.setOther(b),x}static decodeMacroBlock(o,f,d){if(f+ze.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw B.getFormatInstance();let v=new Int32Array(ze.NUMBER_OF_SEQUENCE_CODEWORDS);for(let b=0;b<ze.NUMBER_OF_SEQUENCE_CODEWORDS;b++,f++)v[b]=o[f];d.setSegmentIndex(j.parseInt(ze.decodeBase900toBase10(v,ze.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new se;f=ze.textCompaction(o,f,c),d.setFileId(c.toString());let h=-1;for(o[f]===ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=f+1);f<o[0];)switch(o[f]){case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(f++,o[f]){case ze.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let b=new se;f=ze.textCompaction(o,f+1,b),d.setFileName(b.toString());break;case ze.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new se;f=ze.textCompaction(o,f+1,x),d.setSender(x.toString());break;case ze.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new se;f=ze.textCompaction(o,f+1,A),d.setAddressee(A.toString());break;case ze.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new se;f=ze.numericCompaction(o,f+1,I),d.setSegmentCount(j.parseInt(I.toString()));break;case ze.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new se;f=ze.numericCompaction(o,f+1,P),d.setTimestamp(_n.parseLong(P.toString()));break;case ze.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let z=new se;f=ze.numericCompaction(o,f+1,z),d.setChecksum(j.parseInt(z.toString()));break;case ze.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new se;f=ze.numericCompaction(o,f+1,H),d.setFileSize(_n.parseLong(H.toString()));break;default:throw B.getFormatInstance()}break;case ze.MACRO_PDF417_TERMINATOR:f++,d.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(h!==-1){let b=f-h;d.isLastSegment()&&b--,d.setOptionalData(k.copyOfRange(o,h,h+b))}return f}static textCompaction(o,f,d){let v=new Int32Array((o[0]-f)*2),c=new Int32Array((o[0]-f)*2),h=0,b=!1;for(;f<o[0]&&!b;){let x=o[f++];if(x<ze.TEXT_COMPACTION_MODE_LATCH)v[h]=x/30,v[h+1]=x%30,h+=2;else switch(x){case ze.TEXT_COMPACTION_MODE_LATCH:v[h++]=ze.TEXT_COMPACTION_MODE_LATCH;break;case ze.BYTE_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:case ze.NUMERIC_COMPACTION_MODE_LATCH:case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:f--,b=!0;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v[h]=ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=o[f++],c[h]=x,h++;break}}return ze.decodeTextCompaction(v,c,h,d),f}static decodeTextCompaction(o,f,d,v){let c=$t.ALPHA,h=$t.ALPHA,b=0;for(;b<d;){let x=o[b],A="";switch(c){case $t.ALPHA:if(x<26)A=String.fromCharCode(65+x);else switch(x){case 26:A=" ";break;case ze.LL:c=$t.LOWER;break;case ze.ML:c=$t.MIXED;break;case ze.PS:h=c,c=$t.PUNCT_SHIFT;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(f[b]);break;case ze.TEXT_COMPACTION_MODE_LATCH:c=$t.ALPHA;break}break;case $t.LOWER:if(x<26)A=String.fromCharCode(97+x);else switch(x){case 26:A=" ";break;case ze.AS:h=c,c=$t.ALPHA_SHIFT;break;case ze.ML:c=$t.MIXED;break;case ze.PS:h=c,c=$t.PUNCT_SHIFT;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(f[b]);break;case ze.TEXT_COMPACTION_MODE_LATCH:c=$t.ALPHA;break}break;case $t.MIXED:if(x<ze.PL)A=ze.MIXED_CHARS[x];else switch(x){case ze.PL:c=$t.PUNCT;break;case 26:A=" ";break;case ze.LL:c=$t.LOWER;break;case ze.AL:c=$t.ALPHA;break;case ze.PS:h=c,c=$t.PUNCT_SHIFT;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(f[b]);break;case ze.TEXT_COMPACTION_MODE_LATCH:c=$t.ALPHA;break}break;case $t.PUNCT:if(x<ze.PAL)A=ze.PUNCT_CHARS[x];else switch(x){case ze.PAL:c=$t.ALPHA;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(f[b]);break;case ze.TEXT_COMPACTION_MODE_LATCH:c=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(c=h,x<26)A=String.fromCharCode(65+x);else switch(x){case 26:A=" ";break;case ze.TEXT_COMPACTION_MODE_LATCH:c=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(c=h,x<ze.PAL)A=ze.PUNCT_CHARS[x];else switch(x){case ze.PAL:c=$t.ALPHA;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(f[b]);break;case ze.TEXT_COMPACTION_MODE_LATCH:c=$t.ALPHA;break}break}A!==""&&v.append(A),b++}}static byteCompaction(o,f,d,v,c){let h=new Ur,b=0,x=0,A=!1;switch(o){case ze.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),P=f[v++];for(;v<f[0]&&!A;)switch(I[b++]=P,x=900*x+P,P=f[v++],P){case ze.TEXT_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH:case ze.NUMERIC_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:v--,A=!0;break;default:if(b%5===0&&b>0){for(let z=0;z<6;++z)h.write(Number(Vr(x)>>Vr(8*(5-z))));x=0,b=0}break}v===f[0]&&P<ze.TEXT_COMPACTION_MODE_LATCH&&(I[b++]=P);for(let z=0;z<b;z++)h.write(I[z]);break;case ze.BYTE_COMPACTION_MODE_LATCH_6:for(;v<f[0]&&!A;){let z=f[v++];if(z<ze.TEXT_COMPACTION_MODE_LATCH)b++,x=900*x+z;else switch(z){case ze.TEXT_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH:case ze.NUMERIC_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:v--,A=!0;break}if(b%5===0&&b>0){for(let H=0;H<6;++H)h.write(Number(Vr(x)>>Vr(8*(5-H))));x=0,b=0}}break}return c.append(G.decode(h.toByteArray(),d)),v}static numericCompaction(o,f,d){let v=0,c=!1,h=new Int32Array(ze.MAX_NUMERIC_CODEWORDS);for(;f<o[0]&&!c;){let b=o[f++];if(f===o[0]&&(c=!0),b<ze.TEXT_COMPACTION_MODE_LATCH)h[v]=b,v++;else switch(b){case ze.TEXT_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:f--,c=!0;break}(v%ze.MAX_NUMERIC_CODEWORDS===0||b===ze.NUMERIC_COMPACTION_MODE_LATCH||c)&&v>0&&(d.append(ze.decodeBase900toBase10(h,v)),v=0)}return f}static decodeBase900toBase10(o,f){let d=Vr(0);for(let c=0;c<f;c++)d+=ze.EXP900[f-c-1]*Vr(o[c]);let v=d.toString();if(v.charAt(0)!=="1")throw new B;return v.substring(1)}}ze.TEXT_COMPACTION_MODE_LATCH=900,ze.BYTE_COMPACTION_MODE_LATCH=901,ze.NUMERIC_COMPACTION_MODE_LATCH=902,ze.BYTE_COMPACTION_MODE_LATCH_6=924,ze.ECI_USER_DEFINED=925,ze.ECI_GENERAL_PURPOSE=926,ze.ECI_CHARSET=927,ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ze.MACRO_PDF417_TERMINATOR=922,ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ze.MAX_NUMERIC_CODEWORDS=15,ze.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ze.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ze.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ze.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ze.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ze.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ze.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ze.PL=25,ze.LL=27,ze.AS=27,ze.ML=28,ze.AL=28,ze.PS=29,ze.PAL=29,ze.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ze.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ze.EXP900=Lr()?ji():[],ze.NUMBER_OF_SEQUENCE_CODEWORDS=2;class nn{constructor(){}static decode(o,f,d,v,c,h,b){let x=new Jr(o,f,d,v,c),A=null,I=null,P;for(let X=!0;;X=!1){if(f!=null&&(A=nn.getRowIndicatorColumn(o,x,f,!0,h,b)),v!=null&&(I=nn.getRowIndicatorColumn(o,x,v,!1,h,b)),P=nn.merge(A,I),P==null)throw ue.getNotFoundInstance();let J=P.getBoundingBox();if(X&&J!=null&&(J.getMinY()<x.getMinY()||J.getMaxY()>x.getMaxY()))x=J;else break}P.setBoundingBox(x);let z=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,A),P.setDetectionResultColumn(z,I);let H=A!=null;for(let X=1;X<=z;X++){let J=H?X:z-X;if(P.getDetectionResultColumn(J)!==void 0)continue;let Q;J===0||J===z?Q=new Ce(x,J===0):Q=new q(x),P.setDetectionResultColumn(J,Q);let fe=-1,me=fe;for(let ge=x.getMinY();ge<=x.getMaxY();ge++){if(fe=nn.getStartColumn(P,J,ge,H),fe<0||fe>x.getMaxX()){if(me===-1)continue;fe=me}let ye=nn.detectCodeword(o,x.getMinX(),x.getMaxX(),H,fe,ge,h,b);ye!=null&&(Q.setCodeword(ge,ye),me=fe,h=Math.min(h,ye.getWidth()),b=Math.max(b,ye.getWidth()))}}return nn.createDecoderResult(P)}static merge(o,f){if(o==null&&f==null)return null;let d=nn.getBarcodeMetadata(o,f);if(d==null)return null;let v=Jr.merge(nn.adjustBoundingBox(o),nn.adjustBoundingBox(f));return new qe(d,v)}static adjustBoundingBox(o){if(o==null)return null;let f=o.getRowHeights();if(f==null)return null;let d=nn.getMax(f),v=0;for(let b of f)if(v+=d-b,b>0)break;let c=o.getCodewords();for(let b=0;v>0&&c[b]==null;b++)v--;let h=0;for(let b=f.length-1;b>=0&&(h+=d-f[b],!(f[b]>0));b--);for(let b=c.length-1;h>0&&c[b]==null;b--)h--;return o.getBoundingBox().addMissingRows(v,h,o.isLeft())}static getMax(o){let f=-1;for(let d of o)f=Math.max(f,d);return f}static getBarcodeMetadata(o,f){let d;if(o==null||(d=o.getBarcodeMetadata())==null)return f==null?null:f.getBarcodeMetadata();let v;return f==null||(v=f.getBarcodeMetadata())==null?d:d.getColumnCount()!==v.getColumnCount()&&d.getErrorCorrectionLevel()!==v.getErrorCorrectionLevel()&&d.getRowCount()!==v.getRowCount()?null:d}static getRowIndicatorColumn(o,f,d,v,c,h){let b=new Ce(f,v);for(let x=0;x<2;x++){let A=x===0?1:-1,I=Math.trunc(Math.trunc(d.getX()));for(let P=Math.trunc(Math.trunc(d.getY()));P<=f.getMaxY()&&P>=f.getMinY();P+=A){let z=nn.detectCodeword(o,0,o.getWidth(),v,I,P,c,h);z!=null&&(b.setCodeword(P,z),v?I=z.getStartX():I=z.getEndX())}}return b}static adjustCodewordCount(o,f){let d=f[0][1],v=d.getValue(),c=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-nn.getNumberOfECCodeWords(o.getBarcodeECLevel());if(v.length===0){if(c<1||c>Dt.MAX_CODEWORDS_IN_BARCODE)throw ue.getNotFoundInstance();d.setValue(c)}else v[0]!==c&&d.setValue(c)}static createDecoderResult(o){let f=nn.createBarcodeMatrix(o);nn.adjustCodewordCount(o,f);let d=new Array,v=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),c=[],h=new Array;for(let x=0;x<o.getBarcodeRowCount();x++)for(let A=0;A<o.getBarcodeColumnCount();A++){let I=f[x][A+1].getValue(),P=x*o.getBarcodeColumnCount()+A;I.length===0?d.push(P):I.length===1?v[P]=I[0]:(h.push(P),c.push(I))}let b=new Array(c.length);for(let x=0;x<b.length;x++)b[x]=c[x];return nn.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),v,Dt.toIntArray(d),Dt.toIntArray(h),b)}static createDecoderResultFromAmbiguousValues(o,f,d,v,c){let h=new Int32Array(v.length),b=100;for(;b-- >0;){for(let x=0;x<h.length;x++)f[v[x]]=c[x][h[x]];try{return nn.decodeCodewords(f,o,d)}catch(x){if(!(x instanceof C))throw x}if(h.length===0)throw C.getChecksumInstance();for(let x=0;x<h.length;x++)if(h[x]<c[x].length-1){h[x]++;break}else if(h[x]=0,x===h.length-1)throw C.getChecksumInstance()}throw C.getChecksumInstance()}static createBarcodeMatrix(o){let f=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let v=0;v<f.length;v++)for(let c=0;c<f[v].length;c++)f[v][c]=new ne;let d=0;for(let v of o.getDetectionResultColumns()){if(v!=null){for(let c of v.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=0){if(h>=f.length)continue;f[h][d].setValue(c.getValue())}}}d++}return f}static isValidBarcodeColumn(o,f){return f>=0&&f<=o.getBarcodeColumnCount()+1}static getStartColumn(o,f,d,v){let c=v?1:-1,h=null;if(nn.isValidBarcodeColumn(o,f-c)&&(h=o.getDetectionResultColumn(f-c).getCodeword(d)),h!=null)return v?h.getEndX():h.getStartX();if(h=o.getDetectionResultColumn(f).getCodewordNearby(d),h!=null)return v?h.getStartX():h.getEndX();if(nn.isValidBarcodeColumn(o,f-c)&&(h=o.getDetectionResultColumn(f-c).getCodewordNearby(d)),h!=null)return v?h.getEndX():h.getStartX();let b=0;for(;nn.isValidBarcodeColumn(o,f-c);){f-=c;for(let x of o.getDetectionResultColumn(f).getCodewords())if(x!=null)return(v?x.getEndX():x.getStartX())+c*b*(x.getEndX()-x.getStartX());b++}return v?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,f,d,v,c,h,b,x){c=nn.adjustCodewordStartColumn(o,f,d,v,c,h);let A=nn.getModuleBitCount(o,f,d,v,c,h);if(A==null)return null;let I,P=jt.sum(A);if(v)I=c+P;else{for(let X=0;X<A.length/2;X++){let J=A[X];A[X]=A[A.length-1-X],A[A.length-1-X]=J}I=c,c=I-P}if(!nn.checkCodewordSkew(P,b,x))return null;let z=wt.getDecodedValue(A),H=Dt.getCodeword(z);return H===-1?null:new kt(c,I,nn.getCodewordBucketNumber(z),H)}static getModuleBitCount(o,f,d,v,c,h){let b=c,x=new Int32Array(8),A=0,I=v?1:-1,P=v;for(;(v?b<d:b>=f)&&A<x.length;)o.get(b,h)===P?(x[A]++,b+=I):(A++,P=!P);return A===x.length||b===(v?d:f)&&A===x.length-1?x:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,f,d,v,c,h){let b=c,x=v?-1:1;for(let A=0;A<2;A++){for(;(v?b>=f:b<d)&&v===o.get(b,h);){if(Math.abs(c-b)>nn.CODEWORD_SKEW_SIZE)return c;b+=x}x=-x,v=!v}return b}static checkCodewordSkew(o,f,d){return f-nn.CODEWORD_SKEW_SIZE<=o&&o<=d+nn.CODEWORD_SKEW_SIZE}static decodeCodewords(o,f,d){if(o.length===0)throw B.getFormatInstance();let v=1<<f+1,c=nn.correctErrors(o,d,v);nn.verifyCodewordCount(o,v);let h=ze.decode(o,""+f);return h.setErrorsCorrected(c),h.setErasures(d.length),h}static correctErrors(o,f,d){if(f!=null&&f.length>d/2+nn.MAX_ERRORS||d<0||d>nn.MAX_EC_CODEWORDS)throw C.getChecksumInstance();return nn.errorCorrection.decode(o,d,f)}static verifyCodewordCount(o,f){if(o.length<4)throw B.getFormatInstance();let d=o[0];if(d>o.length)throw B.getFormatInstance();if(d===0)if(f<o.length)o[0]=o.length-f;else throw B.getFormatInstance()}static getBitCountForCodeword(o){let f=new Int32Array(8),d=0,v=f.length-1;for(;!((o&1)!==d&&(d=o&1,v--,v<0));)f[v]++,o>>=1;return f}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return nn.getCodewordBucketNumber(nn.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let f=new os;for(let d=0;d<o.length;d++){f.format("Row %2d: ",d);for(let v=0;v<o[d].length;v++){let c=o[d][v];c.getValue().length===0?f.format("        ",null):f.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}f.format("%n")}return f.toString()}}nn.CODEWORD_SKEW_SIZE=2,nn.MAX_ERRORS=3,nn.MAX_EC_CODEWORDS=512,nn.errorCorrection=new Si;class Sr{decode(o,f=null){let d=Sr.decode(o,f,!1);if(d==null||d.length===0||d[0]==null)throw ue.getNotFoundInstance();return d[0]}decodeMultiple(o,f=null){try{return Sr.decode(o,f,!0)}catch(d){throw d instanceof B||d instanceof C?ue.getNotFoundInstance():d}}static decode(o,f,d){const v=new Array,c=Kt.detectMultiple(o,f,d);for(const h of c.getPoints()){const b=nn.decode(c.getBits(),h[4],h[5],h[6],h[7],Sr.getMinCodewordWidth(h),Sr.getMaxCodewordWidth(h)),x=new Y(b.getText(),b.getRawBytes(),void 0,h,be.PDF_417);x.putMetadata(Ve.ERROR_CORRECTION_LEVEL,b.getECLevel());const A=b.getOther();A!=null&&x.putMetadata(Ve.PDF417_EXTRA_METADATA,A),v.push(x)}return v.map(h=>h)}static getMaxWidth(o,f){return o==null||f==null?0:Math.trunc(Math.abs(o.getX()-f.getX()))}static getMinWidth(o,f){return o==null||f==null?j.MAX_VALUE:Math.trunc(Math.abs(o.getX()-f.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Sr.getMaxWidth(o[0],o[4]),Sr.getMaxWidth(o[6],o[2])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN),Math.max(Sr.getMaxWidth(o[1],o[5]),Sr.getMaxWidth(o[7],o[3])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Sr.getMinWidth(o[0],o[4]),Sr.getMinWidth(o[6],o[2])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN),Math.min(Sr.getMinWidth(o[1],o[5]),Sr.getMinWidth(o[7],o[3])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ls extends y{}ls.kind="ReaderException";class pl{constructor(o,f){this.verbose=o===!0,f&&this.setHints(f)}decode(o,f){return f&&this.setHints(f),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const f=!r(o)&&o.get(F.TRY_HARDER)===!0,d=r(o)?null:o.get(F.POSSIBLE_FORMATS),v=new Array;if(!r(d)){const c=d.some(h=>h===be.UPC_A||h===be.UPC_E||h===be.EAN_13||h===be.EAN_8||h===be.CODABAR||h===be.CODE_39||h===be.CODE_93||h===be.CODE_128||h===be.ITF||h===be.RSS_14||h===be.RSS_EXPANDED);c&&!f&&v.push(new Hn(o,this.verbose)),d.includes(be.QR_CODE)&&v.push(new Qr),d.includes(be.DATA_MATRIX)&&v.push(new Ei),d.includes(be.AZTEC)&&v.push(new fi),d.includes(be.PDF_417)&&v.push(new Sr),c&&f&&v.push(new Hn(o,this.verbose))}v.length===0&&(f||v.push(new Hn(o,this.verbose)),v.push(new Qr),v.push(new Ei),v.push(new fi),v.push(new Sr),f&&v.push(new Hn(o,this.verbose))),this.readers=v}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new ls("No readers where selected, nothing can be read.");for(const f of this.readers)try{return f.decode(o,this.hints)}catch(d){if(d instanceof ls)continue}throw new ue("No MultiFormat Readers were able to detect the code.")}}class ml extends ae{constructor(o=null,f=500){const d=new pl;d.setHints(o),super(d,f)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class xi extends ae{constructor(o=500){super(new Sr,o)}}class No extends ae{constructor(o=500){super(new Qr,o)}}var Ia;(function(W){W[W.ERROR_CORRECTION=0]="ERROR_CORRECTION",W[W.CHARACTER_SET=1]="CHARACTER_SET",W[W.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",W[W.MIN_SIZE=3]="MIN_SIZE",W[W.MAX_SIZE=4]="MAX_SIZE",W[W.MARGIN=5]="MARGIN",W[W.PDF417_COMPACT=6]="PDF417_COMPACT",W[W.PDF417_COMPACTION=7]="PDF417_COMPACTION",W[W.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",W[W.AZTEC_LAYERS=9]="AZTEC_LAYERS",W[W.QR_VERSION=10]="QR_VERSION"})(Ia||(Ia={}));var Hr=Ia;class sa{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new xe(o,Int32Array.from([1])))}buildGenerator(o){const f=this.cachedGenerators;if(o>=f.length){let d=f[f.length-1];const v=this.field;for(let c=f.length;c<=o;c++){const h=d.multiply(new xe(v,Int32Array.from([1,v.exp(c-1+v.getGeneratorBase())])));f.push(h),d=h}}return f[o]}encode(o,f){if(f===0)throw new S("No error correction bytes");const d=o.length-f;if(d<=0)throw new S("No data bytes provided");const v=this.buildGenerator(f),c=new Int32Array(d);R.arraycopy(o,0,c,0,d);let h=new xe(this.field,c);h=h.multiplyByMonomial(f,1);const x=h.divide(v)[1].getCoefficients(),A=f-x.length;for(let I=0;I<A;I++)o[d+I]=0;R.arraycopy(x,0,o,d+A,x.length)}}class Rr{constructor(){}static applyMaskPenaltyRule1(o){return Rr.applyMaskPenaltyRule1Internal(o,!0)+Rr.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let f=0;const d=o.getArray(),v=o.getWidth(),c=o.getHeight();for(let h=0;h<c-1;h++){const b=d[h];for(let x=0;x<v-1;x++){const A=b[x];A===b[x+1]&&A===d[h+1][x]&&A===d[h+1][x+1]&&f++}}return Rr.N2*f}static applyMaskPenaltyRule3(o){let f=0;const d=o.getArray(),v=o.getWidth(),c=o.getHeight();for(let h=0;h<c;h++)for(let b=0;b<v;b++){const x=d[h];b+6<v&&x[b]===1&&x[b+1]===0&&x[b+2]===1&&x[b+3]===1&&x[b+4]===1&&x[b+5]===0&&x[b+6]===1&&(Rr.isWhiteHorizontal(x,b-4,b)||Rr.isWhiteHorizontal(x,b+7,b+11))&&f++,h+6<c&&d[h][b]===1&&d[h+1][b]===0&&d[h+2][b]===1&&d[h+3][b]===1&&d[h+4][b]===1&&d[h+5][b]===0&&d[h+6][b]===1&&(Rr.isWhiteVertical(d,b,h-4,h)||Rr.isWhiteVertical(d,b,h+7,h+11))&&f++}return f*Rr.N3}static isWhiteHorizontal(o,f,d){f=Math.max(f,0),d=Math.min(d,o.length);for(let v=f;v<d;v++)if(o[v]===1)return!1;return!0}static isWhiteVertical(o,f,d,v){d=Math.max(d,0),v=Math.min(v,o.length);for(let c=d;c<v;c++)if(o[c][f]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let f=0;const d=o.getArray(),v=o.getWidth(),c=o.getHeight();for(let x=0;x<c;x++){const A=d[x];for(let I=0;I<v;I++)A[I]===1&&f++}const h=o.getHeight()*o.getWidth();return Math.floor(Math.abs(f*2-h)*10/h)*Rr.N4}static getDataMaskBit(o,f,d){let v,c;switch(o){case 0:v=d+f&1;break;case 1:v=d&1;break;case 2:v=f%3;break;case 3:v=(d+f)%3;break;case 4:v=Math.floor(d/2)+Math.floor(f/3)&1;break;case 5:c=d*f,v=(c&1)+c%3;break;case 6:c=d*f,v=(c&1)+c%3&1;break;case 7:c=d*f,v=c%3+(d+f&1)&1;break;default:throw new S("Invalid mask pattern: "+o)}return v===0}static applyMaskPenaltyRule1Internal(o,f){let d=0;const v=f?o.getHeight():o.getWidth(),c=f?o.getWidth():o.getHeight(),h=o.getArray();for(let b=0;b<v;b++){let x=0,A=-1;for(let I=0;I<c;I++){const P=f?h[b][I]:h[I][b];P===A?x++:(x>=5&&(d+=Rr.N1+(x-5)),x=1,A=P)}x>=5&&(d+=Rr.N1+(x-5))}return d}}Rr.N1=3,Rr.N2=3,Rr.N3=40,Rr.N4=10;class To{constructor(o,f){this.width=o,this.height=f;const d=new Array(f);for(let v=0;v!==f;v++)d[v]=new Uint8Array(o);this.bytes=d}getHeight(){return this.height}getWidth(){return this.width}get(o,f){return this.bytes[f][o]}getArray(){return this.bytes}setNumber(o,f,d){this.bytes[f][o]=d}setBoolean(o,f,d){this.bytes[f][o]=d?1:0}clear(o){for(const f of this.bytes)k.fill(f,o)}equals(o){if(!(o instanceof To))return!1;const f=o;if(this.width!==f.width||this.height!==f.height)return!1;for(let d=0,v=this.height;d<v;++d){const c=this.bytes[d],h=f.bytes[d];for(let b=0,x=this.width;b<x;++b)if(c[b]!==h[b])return!1}return!0}toString(){const o=new se;for(let f=0,d=this.height;f<d;++f){const v=this.bytes[f];for(let c=0,h=this.width;c<h;++c)switch(v[c]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class As{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new se;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<As.NUM_MASK_PATTERNS}}As.NUM_MASK_PATTERNS=8;class Kn extends y{}Kn.kind="WriterException";class Pt{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,f,d,v,c){Pt.clearMatrix(c),Pt.embedBasicPatterns(d,c),Pt.embedTypeInfo(f,v,c),Pt.maybeEmbedVersionInfo(d,c),Pt.embedDataBits(o,v,c)}static embedBasicPatterns(o,f){Pt.embedPositionDetectionPatternsAndSeparators(f),Pt.embedDarkDotAtLeftBottomCorner(f),Pt.maybeEmbedPositionAdjustmentPatterns(o,f),Pt.embedTimingPatterns(f)}static embedTypeInfo(o,f,d){const v=new $;Pt.makeTypeInfoBits(o,f,v);for(let c=0,h=v.getSize();c<h;++c){const b=v.get(v.getSize()-1-c),x=Pt.TYPE_INFO_COORDINATES[c],A=x[0],I=x[1];if(d.setBoolean(A,I,b),c<8){const P=d.getWidth()-c-1;d.setBoolean(P,8,b)}else{const z=d.getHeight()-7+(c-8);d.setBoolean(8,z,b)}}}static maybeEmbedVersionInfo(o,f){if(o.getVersionNumber()<7)return;const d=new $;Pt.makeVersionInfoBits(o,d);let v=17;for(let c=0;c<6;++c)for(let h=0;h<3;++h){const b=d.get(v);v--,f.setBoolean(c,f.getHeight()-11+h,b),f.setBoolean(f.getHeight()-11+h,c,b)}}static embedDataBits(o,f,d){let v=0,c=-1,h=d.getWidth()-1,b=d.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);b>=0&&b<d.getHeight();){for(let x=0;x<2;++x){const A=h-x;if(!Pt.isEmpty(d.get(A,b)))continue;let I;v<o.getSize()?(I=o.get(v),++v):I=!1,f!==255&&Rr.getDataMaskBit(f,A,b)&&(I=!I),d.setBoolean(A,b,I)}b+=c}c=-c,b+=c,h-=2}if(v!==o.getSize())throw new Kn("Not all bits consumed: "+v+"/"+o.getSize())}static findMSBSet(o){return 32-j.numberOfLeadingZeros(o)}static calculateBCHCode(o,f){if(f===0)throw new S("0 polynomial");const d=Pt.findMSBSet(f);for(o<<=d-1;Pt.findMSBSet(o)>=d;)o^=f<<Pt.findMSBSet(o)-d;return o}static makeTypeInfoBits(o,f,d){if(!As.isValidMaskPattern(f))throw new Kn("Invalid mask pattern");const v=o.getBits()<<3|f;d.appendBits(v,5);const c=Pt.calculateBCHCode(v,Pt.TYPE_INFO_POLY);d.appendBits(c,10);const h=new $;if(h.appendBits(Pt.TYPE_INFO_MASK_PATTERN,15),d.xor(h),d.getSize()!==15)throw new Kn("should not happen but we got: "+d.getSize())}static makeVersionInfoBits(o,f){f.appendBits(o.getVersionNumber(),6);const d=Pt.calculateBCHCode(o.getVersionNumber(),Pt.VERSION_INFO_POLY);if(f.appendBits(d,12),f.getSize()!==18)throw new Kn("should not happen but we got: "+f.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let f=8;f<o.getWidth()-8;++f){const d=(f+1)%2;Pt.isEmpty(o.get(f,6))&&o.setNumber(f,6,d),Pt.isEmpty(o.get(6,f))&&o.setNumber(6,f,d)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Kn;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,f,d){for(let v=0;v<8;++v){if(!Pt.isEmpty(d.get(o+v,f)))throw new Kn;d.setNumber(o+v,f,0)}}static embedVerticalSeparationPattern(o,f,d){for(let v=0;v<7;++v){if(!Pt.isEmpty(d.get(o,f+v)))throw new Kn;d.setNumber(o,f+v,0)}}static embedPositionAdjustmentPattern(o,f,d){for(let v=0;v<5;++v){const c=Pt.POSITION_ADJUSTMENT_PATTERN[v];for(let h=0;h<5;++h)d.setNumber(o+h,f+v,c[h])}}static embedPositionDetectionPattern(o,f,d){for(let v=0;v<7;++v){const c=Pt.POSITION_DETECTION_PATTERN[v];for(let h=0;h<7;++h)d.setNumber(o+h,f+v,c[h])}}static embedPositionDetectionPatternsAndSeparators(o){const f=Pt.POSITION_DETECTION_PATTERN[0].length;Pt.embedPositionDetectionPattern(0,0,o),Pt.embedPositionDetectionPattern(o.getWidth()-f,0,o),Pt.embedPositionDetectionPattern(0,o.getWidth()-f,o);const d=8;Pt.embedHorizontalSeparationPattern(0,d-1,o),Pt.embedHorizontalSeparationPattern(o.getWidth()-d,d-1,o),Pt.embedHorizontalSeparationPattern(0,o.getWidth()-d,o);const v=7;Pt.embedVerticalSeparationPattern(v,0,o),Pt.embedVerticalSeparationPattern(o.getHeight()-v-1,0,o),Pt.embedVerticalSeparationPattern(v,o.getHeight()-v,o)}static maybeEmbedPositionAdjustmentPatterns(o,f){if(o.getVersionNumber()<2)return;const d=o.getVersionNumber()-1,v=Pt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[d];for(let c=0,h=v.length;c!==h;c++){const b=v[c];if(b>=0)for(let x=0;x!==h;x++){const A=v[x];A>=0&&Pt.isEmpty(f.get(A,b))&&Pt.embedPositionAdjustmentPattern(A-2,b-2,f)}}}}Pt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Pt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Pt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Pt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Pt.VERSION_INFO_POLY=7973,Pt.TYPE_INFO_POLY=1335,Pt.TYPE_INFO_MASK_PATTERN=21522;class bc{constructor(o,f){this.dataBytes=o,this.errorCorrectionBytes=f}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class er{constructor(){}static calculateMaskPenalty(o){return Rr.applyMaskPenaltyRule1(o)+Rr.applyMaskPenaltyRule2(o)+Rr.applyMaskPenaltyRule3(o)+Rr.applyMaskPenaltyRule4(o)}static encode(o,f,d=null){let v=er.DEFAULT_BYTE_MODE_ENCODING;const c=d!==null&&d.get(Hr.CHARACTER_SET)!==void 0;c&&(v=d.get(Hr.CHARACTER_SET).toString());const h=this.chooseMode(o,v),b=new $;if(h===Ot.BYTE&&(c||er.DEFAULT_BYTE_MODE_ENCODING!==v)){const ge=le.getCharacterSetECIByName(v);ge!==void 0&&this.appendECI(ge,b)}this.appendModeInfo(h,b);const x=new $;this.appendBytes(o,h,x,v);let A;if(d!==null&&d.get(Hr.QR_VERSION)!==void 0){const ge=Number.parseInt(d.get(Hr.QR_VERSION).toString(),10);A=At.getVersionForNumber(ge);const ye=this.calculateBitsNeeded(h,b,x,A);if(!this.willFit(ye,A,f))throw new Kn("Data too big for requested version")}else A=this.recommendVersion(f,h,b,x);const I=new $;I.appendBitArray(b);const P=h===Ot.BYTE?x.getSizeInBytes():o.length;this.appendLengthInfo(P,A,h,I),I.appendBitArray(x);const z=A.getECBlocksForLevel(f),H=A.getTotalCodewords()-z.getTotalECCodewords();this.terminateBits(H,I);const X=this.interleaveWithECBytes(I,A.getTotalCodewords(),H,z.getNumBlocks()),J=new As;J.setECLevel(f),J.setMode(h),J.setVersion(A);const Q=A.getDimensionForVersion(),fe=new To(Q,Q),me=this.chooseMaskPattern(X,f,A,fe);return J.setMaskPattern(me),Pt.buildMatrix(X,f,A,me,fe),J.setMatrix(fe),J}static recommendVersion(o,f,d,v){const c=this.calculateBitsNeeded(f,d,v,At.getVersionForNumber(1)),h=this.chooseVersion(c,o),b=this.calculateBitsNeeded(f,d,v,h);return this.chooseVersion(b,o)}static calculateBitsNeeded(o,f,d,v){return f.getSize()+o.getCharacterCountBits(v)+d.getSize()}static getAlphanumericCode(o){return o<er.ALPHANUMERIC_TABLE.length?er.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,f=null){if(le.SJIS.getName()===f&&this.isOnlyDoubleByteKanji(o))return Ot.KANJI;let d=!1,v=!1;for(let c=0,h=o.length;c<h;++c){const b=o.charAt(c);if(er.isDigit(b))d=!0;else if(this.getAlphanumericCode(b.charCodeAt(0))!==-1)v=!0;else return Ot.BYTE}return v?Ot.ALPHANUMERIC:d?Ot.NUMERIC:Ot.BYTE}static isOnlyDoubleByteKanji(o){let f;try{f=G.encode(o,le.SJIS)}catch{return!1}const d=f.length;if(d%2!==0)return!1;for(let v=0;v<d;v+=2){const c=f[v]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(o,f,d,v){let c=Number.MAX_SAFE_INTEGER,h=-1;for(let b=0;b<As.NUM_MASK_PATTERNS;b++){Pt.buildMatrix(o,f,d,b,v);let x=this.calculateMaskPenalty(v);x<c&&(c=x,h=b)}return h}static chooseVersion(o,f){for(let d=1;d<=40;d++){const v=At.getVersionForNumber(d);if(er.willFit(o,v,f))return v}throw new Kn("Data too big")}static willFit(o,f,d){const v=f.getTotalCodewords(),h=f.getECBlocksForLevel(d).getTotalECCodewords(),b=v-h,x=(o+7)/8;return b>=x}static terminateBits(o,f){const d=o*8;if(f.getSize()>d)throw new Kn("data bits cannot fit in the QR Code"+f.getSize()+" > "+d);for(let h=0;h<4&&f.getSize()<d;++h)f.appendBit(!1);const v=f.getSize()&7;if(v>0)for(let h=v;h<8;h++)f.appendBit(!1);const c=o-f.getSizeInBytes();for(let h=0;h<c;++h)f.appendBits((h&1)===0?236:17,8);if(f.getSize()!==d)throw new Kn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,f,d,v,c,h){if(v>=d)throw new Kn("Block ID too large");const b=o%d,x=d-b,A=Math.floor(o/d),I=A+1,P=Math.floor(f/d),z=P+1,H=A-P,X=I-z;if(H!==X)throw new Kn("EC bytes mismatch");if(d!==x+b)throw new Kn("RS blocks mismatch");if(o!==(P+H)*x+(z+X)*b)throw new Kn("Total bytes mismatch");v<x?(c[0]=P,h[0]=H):(c[0]=z,h[0]=X)}static interleaveWithECBytes(o,f,d,v){if(o.getSizeInBytes()!==d)throw new Kn("Number of bits and data bytes does not match");let c=0,h=0,b=0;const x=new Array;for(let I=0;I<v;++I){const P=new Int32Array(1),z=new Int32Array(1);er.getNumDataBytesAndNumECBytesForBlockID(f,d,v,I,P,z);const H=P[0],X=new Uint8Array(H);o.toBytes(8*c,X,0,H);const J=er.generateECBytes(X,z[0]);x.push(new bc(X,J)),h=Math.max(h,H),b=Math.max(b,J.length),c+=P[0]}if(d!==c)throw new Kn("Data bytes does not match offset");const A=new $;for(let I=0;I<h;++I)for(const P of x){const z=P.getDataBytes();I<z.length&&A.appendBits(z[I],8)}for(let I=0;I<b;++I)for(const P of x){const z=P.getErrorCorrectionBytes();I<z.length&&A.appendBits(z[I],8)}if(f!==A.getSizeInBytes())throw new Kn("Interleaving error: "+f+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(o,f){const d=o.length,v=new Int32Array(d+f);for(let h=0;h<d;h++)v[h]=o[h]&255;new sa(Me.QR_CODE_FIELD_256).encode(v,f);const c=new Uint8Array(f);for(let h=0;h<f;h++)c[h]=v[d+h];return c}static appendModeInfo(o,f){f.appendBits(o.getBits(),4)}static appendLengthInfo(o,f,d,v){const c=d.getCharacterCountBits(f);if(o>=1<<c)throw new Kn(o+" is bigger than "+((1<<c)-1));v.appendBits(o,c)}static appendBytes(o,f,d,v){switch(f){case Ot.NUMERIC:er.appendNumericBytes(o,d);break;case Ot.ALPHANUMERIC:er.appendAlphanumericBytes(o,d);break;case Ot.BYTE:er.append8BitBytes(o,d,v);break;case Ot.KANJI:er.appendKanjiBytes(o,d);break;default:throw new Kn("Invalid mode: "+f)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const f=er.getDigit(o);return f>=0&&f<=9}static appendNumericBytes(o,f){const d=o.length;let v=0;for(;v<d;){const c=er.getDigit(o.charAt(v));if(v+2<d){const h=er.getDigit(o.charAt(v+1)),b=er.getDigit(o.charAt(v+2));f.appendBits(c*100+h*10+b,10),v+=3}else if(v+1<d){const h=er.getDigit(o.charAt(v+1));f.appendBits(c*10+h,7),v+=2}else f.appendBits(c,4),v++}}static appendAlphanumericBytes(o,f){const d=o.length;let v=0;for(;v<d;){const c=er.getAlphanumericCode(o.charCodeAt(v));if(c===-1)throw new Kn;if(v+1<d){const h=er.getAlphanumericCode(o.charCodeAt(v+1));if(h===-1)throw new Kn;f.appendBits(c*45+h,11),v+=2}else f.appendBits(c,6),v++}}static append8BitBytes(o,f,d){let v;try{v=G.encode(o,d)}catch(c){throw new Kn(c)}for(let c=0,h=v.length;c!==h;c++){const b=v[c];f.appendBits(b,8)}}static appendKanjiBytes(o,f){let d;try{d=G.encode(o,le.SJIS)}catch(c){throw new Kn(c)}const v=d.length;for(let c=0;c<v;c+=2){const h=d[c]&255,b=d[c+1]&255,x=h<<8&4294967295|b;let A=-1;if(x>=33088&&x<=40956?A=x-33088:x>=57408&&x<=60351&&(A=x-49472),A===-1)throw new Kn("Invalid byte sequence");const I=(A>>8)*192+(A&255);f.appendBits(I,13)}}static appendECI(o,f){f.appendBits(Ot.ECI.getBits(),4),f.appendBits(o.getValue(),8)}}er.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),er.DEFAULT_BYTE_MODE_ENCODING=le.UTF8.getName();class Cs{write(o,f,d,v=null){if(o.length===0)throw new S("Found empty contents");if(f<0||d<0)throw new S("Requested dimensions are too small: "+f+"x"+d);let c=un.L,h=Cs.QUIET_ZONE_SIZE;v!==null&&(v.get(Hr.ERROR_CORRECTION)!==void 0&&(c=un.fromString(v.get(Hr.ERROR_CORRECTION).toString())),v.get(Hr.MARGIN)!==void 0&&(h=Number.parseInt(v.get(Hr.MARGIN).toString(),10)));const b=er.encode(o,c,v);return this.renderResult(b,f,d,h)}writeToDom(o,f,d,v,c=null){typeof o=="string"&&(o=document.querySelector(o));const h=this.write(f,d,v,c);o&&o.appendChild(h)}renderResult(o,f,d,v){const c=o.getMatrix();if(c===null)throw new ct;const h=c.getWidth(),b=c.getHeight(),x=h+v*2,A=b+v*2,I=Math.max(f,x),P=Math.max(d,A),z=Math.min(Math.floor(I/x),Math.floor(P/A)),H=Math.floor((I-h*z)/2),X=Math.floor((P-b*z)/2),J=this.createSVGElement(I,P);for(let Q=0,fe=X;Q<b;Q++,fe+=z)for(let me=0,ge=H;me<h;me++,ge+=z)if(c.get(me,Q)===1){const ye=this.createSvgRectElement(ge,fe,z,z);J.appendChild(ye)}return J}createSVGElement(o,f){const d=document.createElementNS(Cs.SVG_NS,"svg");return d.setAttributeNS(null,"height",o.toString()),d.setAttributeNS(null,"width",f.toString()),d}createSvgRectElement(o,f,d,v){const c=document.createElementNS(Cs.SVG_NS,"rect");return c.setAttributeNS(null,"x",o.toString()),c.setAttributeNS(null,"y",f.toString()),c.setAttributeNS(null,"height",d.toString()),c.setAttributeNS(null,"width",v.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Cs.QUIET_ZONE_SIZE=4,Cs.SVG_NS="http://www.w3.org/2000/svg";class aa{encode(o,f,d,v,c){if(o.length===0)throw new S("Found empty contents");if(f!==be.QR_CODE)throw new S("Can only encode QR_CODE, but got "+f);if(d<0||v<0)throw new S(`Requested dimensions are too small: ${d}x${v}`);let h=un.L,b=aa.QUIET_ZONE_SIZE;c!==null&&(c.get(Hr.ERROR_CORRECTION)!==void 0&&(h=un.fromString(c.get(Hr.ERROR_CORRECTION).toString())),c.get(Hr.MARGIN)!==void 0&&(b=Number.parseInt(c.get(Hr.MARGIN).toString(),10)));const x=er.encode(o,h,c);return aa.renderResult(x,d,v,b)}static renderResult(o,f,d,v){const c=o.getMatrix();if(c===null)throw new ct;const h=c.getWidth(),b=c.getHeight(),x=h+v*2,A=b+v*2,I=Math.max(f,x),P=Math.max(d,A),z=Math.min(Math.floor(I/x),Math.floor(P/A)),H=Math.floor((I-h*z)/2),X=Math.floor((P-b*z)/2),J=new Ee(I,P);for(let Q=0,fe=X;Q<b;Q++,fe+=z)for(let me=0,ge=H;me<h;me++,ge+=z)c.get(me,Q)===1&&J.setRegion(ge,fe,z,z);return J}}aa.QUIET_ZONE_SIZE=4;class vu{encode(o,f,d,v,c){let h;if(f===be.QR_CODE)h=new aa;else throw new S("No encoder available for format "+f);return h.encode(o,f,d,v,c)}}class Ns extends we{constructor(o,f,d,v,c,h,b,x){if(super(h,b),this.yuvData=o,this.dataWidth=f,this.dataHeight=d,this.left=v,this.top=c,v+h>f||c+b>d)throw new S("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(h,b)}getRow(o,f){if(o<0||o>=this.getHeight())throw new S("Requested row is outside the image: "+o);const d=this.getWidth();(f==null||f.length<d)&&(f=new Uint8ClampedArray(d));const v=(o+this.top)*this.dataWidth+this.left;return R.arraycopy(this.yuvData,v,f,0,d),f}getMatrix(){const o=this.getWidth(),f=this.getHeight();if(o===this.dataWidth&&f===this.dataHeight)return this.yuvData;const d=o*f,v=new Uint8ClampedArray(d);let c=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return R.arraycopy(this.yuvData,c,v,0,d),v;for(let h=0;h<f;h++){const b=h*o;R.arraycopy(this.yuvData,c,v,b,o),c+=this.dataWidth}return v}isCropSupported(){return!0}crop(o,f,d,v){return new Ns(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+f,d,v,!1)}renderThumbnail(){const o=this.getWidth()/Ns.THUMBNAIL_SCALE_FACTOR,f=this.getHeight()/Ns.THUMBNAIL_SCALE_FACTOR,d=new Int32Array(o*f),v=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let h=0;h<f;h++){const b=h*o;for(let x=0;x<o;x++){const A=v[c+x*Ns.THUMBNAIL_SCALE_FACTOR]&255;d[b+x]=4278190080|A*65793}c+=this.dataWidth*Ns.THUMBNAIL_SCALE_FACTOR}return d}getThumbnailWidth(){return this.getWidth()/Ns.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ns.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,f){const d=this.yuvData;for(let v=0,c=this.top*this.dataWidth+this.left;v<f;v++,c+=this.dataWidth){const h=c+o/2;for(let b=c,x=c+o-1;b<h;b++,x--){const A=d[b];d[b]=d[x],d[x]=A}}}invert(){return new Oe(this)}}Ns.THUMBNAIL_SCALE_FACTOR=2;class Oo extends we{constructor(o,f,d,v,c,h,b){if(super(f,d),this.dataWidth=v,this.dataHeight=c,this.left=h,this.top=b,o.BYTES_PER_ELEMENT===4){const x=f*d,A=new Uint8ClampedArray(x);for(let I=0;I<x;I++){const P=o[I],z=P>>16&255,H=P>>7&510,X=P&255;A[I]=(z+H+X)/4&255}this.luminances=A}else this.luminances=o;if(v===void 0&&(this.dataWidth=f),c===void 0&&(this.dataHeight=d),h===void 0&&(this.left=0),b===void 0&&(this.top=0),this.left+f>this.dataWidth||this.top+d>this.dataHeight)throw new S("Crop rectangle does not fit within image data.")}getRow(o,f){if(o<0||o>=this.getHeight())throw new S("Requested row is outside the image: "+o);const d=this.getWidth();(f==null||f.length<d)&&(f=new Uint8ClampedArray(d));const v=(o+this.top)*this.dataWidth+this.left;return R.arraycopy(this.luminances,v,f,0,d),f}getMatrix(){const o=this.getWidth(),f=this.getHeight();if(o===this.dataWidth&&f===this.dataHeight)return this.luminances;const d=o*f,v=new Uint8ClampedArray(d);let c=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return R.arraycopy(this.luminances,c,v,0,d),v;for(let h=0;h<f;h++){const b=h*o;R.arraycopy(this.luminances,c,v,b,o),c+=this.dataWidth}return v}isCropSupported(){return!0}crop(o,f,d,v){return new Oo(this.luminances,d,v,this.dataWidth,this.dataHeight,this.left+o,this.top+f)}invert(){return new Oe(this)}}class Ro extends le{static forName(o){return this.getCharacterSetECIByName(o)}}class Io{}Io.ISO_8859_1=le.ISO8859_1;class oa{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class gl{static singletonList(o){return[o]}static min(o,f){return o.sort(f)[0]}}class bu{constructor(o){this.previous=o}getPrevious(){return this.previous}}class la extends bu{constructor(o,f,d){super(o),this.value=f,this.bitCount=d}appendTo(o,f){o.appendBits(this.value,this.bitCount)}add(o,f){return new la(this,o,f)}addBinaryShift(o,f){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new la(this,o,f)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+j.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class yl extends la{constructor(o,f,d){super(o,0,0),this.binaryShiftStart=f,this.binaryShiftByteCount=d}appendTo(o,f){for(let d=0;d<this.binaryShiftByteCount;d++)(d===0||d===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):d===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(f[this.binaryShiftStart+d],8)}addBinaryShift(o,f){return new yl(this,o,f)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function wc(W,o,f){return new yl(W,o,f)}function Ma(W,o,f){return new la(W,o,f)}const Ja=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],js=0,eo=1,$i=2,vl=3,cs=4,Mo=new la(null,0,0),Da=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function bl(W){for(let o of W)k.fill(o,-1);return W[js][cs]=0,W[eo][cs]=0,W[eo][js]=28,W[vl][cs]=0,W[$i][cs]=0,W[$i][js]=15,W}const Vi=bl(k.createInt32Array(6,6));class $n{constructor(o,f,d,v){this.token=o,this.mode=f,this.binaryShiftByteCount=d,this.bitCount=v}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,f){let d=this.bitCount,v=this.token;if(o!==this.mode){let h=Da[this.mode][o];v=Ma(v,h&65535,h>>16),d+=h>>16}let c=o===$i?4:5;return v=Ma(v,f,c),new $n(v,o,0,d+c)}shiftAndAppend(o,f){let d=this.token,v=this.mode===$i?4:5;return d=Ma(d,Vi[this.mode][o],v),d=Ma(d,f,5),new $n(d,this.mode,0,this.bitCount+v+5)}addBinaryShiftChar(o){let f=this.token,d=this.mode,v=this.bitCount;if(this.mode===cs||this.mode===$i){let b=Da[d][js];f=Ma(f,b&65535,b>>16),v+=b>>16,d=js}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new $n(f,d,this.binaryShiftByteCount+1,v+c);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(o+1)),h}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let f=this.token;return f=wc(f,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new $n(f,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let f=this.bitCount+(Da[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?f+=$n.calculateBinaryShiftCost(o)-$n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(f+=10),f<=o.bitCount}toBitArray(o){let f=[];for(let v=this.endBinaryShift(o.length).token;v!==null;v=v.getPrevious())f.unshift(v);let d=new $;for(const v of f)v.appendTo(d,o);return d}toString(){return ce.format("%s bits=%d bytes=%d",Ja[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}$n.INITIAL_STATE=new $n(Mo,js,0,0);function Do(W){const o=ce.getCharCode(" "),f=ce.getCharCode("."),d=ce.getCharCode(",");W[js][o]=1;const v=ce.getCharCode("Z"),c=ce.getCharCode("A");for(let z=c;z<=v;z++)W[js][z]=z-c+2;W[eo][o]=1;const h=ce.getCharCode("z"),b=ce.getCharCode("a");for(let z=b;z<=h;z++)W[eo][z]=z-b+2;W[$i][o]=1;const x=ce.getCharCode("9"),A=ce.getCharCode("0");for(let z=A;z<=x;z++)W[$i][z]=z-A+2;W[$i][d]=12,W[$i][f]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let z=0;z<I.length;z++)W[vl][ce.getCharCode(I[z])]=z;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let z=0;z<P.length;z++)ce.getCharCode(P[z])>0&&(W[cs][ce.getCharCode(P[z])]=z);return W}const _i=Do(k.createInt32Array(5,256));class La{constructor(o){this.text=o}encode(){const o=ce.getCharCode(" "),f=ce.getCharCode(`
`);let d=gl.singletonList($n.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let h,b=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case ce.getCharCode("\r"):h=b===f?2:0;break;case ce.getCharCode("."):h=b===o?3:0;break;case ce.getCharCode(","):h=b===o?4:0;break;case ce.getCharCode(":"):h=b===o?5:0;break;default:h=0}h>0?(d=La.updateStateListForPair(d,c,h),c++):d=this.updateStateListForChar(d,c)}return gl.min(d,(c,h)=>c.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,f){const d=[];for(let v of o)this.updateStateForChar(v,f,d);return La.simplifyStates(d)}updateStateForChar(o,f,d){let v=this.text[f]&255,c=_i[o.getMode()][v]>0,h=null;for(let b=0;b<=cs;b++){let x=_i[b][v];if(x>0){if(h==null&&(h=o.endBinaryShift(f)),!c||b===o.getMode()||b===$i){const A=h.latchAndAppend(b,x);d.push(A)}if(!c&&Vi[o.getMode()][b]>=0){const A=h.shiftAndAppend(b,x);d.push(A)}}}if(o.getBinaryShiftByteCount()>0||_i[o.getMode()][v]===0){let b=o.addBinaryShiftChar(f);d.push(b)}}static updateStateListForPair(o,f,d){const v=[];for(let c of o)this.updateStateForPair(c,f,d,v);return this.simplifyStates(v)}static updateStateForPair(o,f,d,v){let c=o.endBinaryShift(f);if(v.push(c.latchAndAppend(cs,d)),o.getMode()!==cs&&v.push(c.shiftAndAppend(cs,d)),d===3||d===4){let h=c.latchAndAppend($i,16-d).latchAndAppend($i,1);v.push(h)}if(o.getBinaryShiftByteCount()>0){let h=o.addBinaryShiftChar(f).addBinaryShiftChar(f+1);v.push(h)}}static simplifyStates(o){let f=[];for(const d of o){let v=!0;for(const c of f){if(c.isBetterThanOrEqualTo(d)){v=!1;break}d.isBetterThanOrEqualTo(c)&&(f=f.filter(h=>h!==c))}v&&f.push(d)}return f}}class An{constructor(){}static encodeBytes(o){return An.encode(o,An.DEFAULT_EC_PERCENT,An.DEFAULT_AZTEC_LAYERS)}static encode(o,f,d){let v=new La(o).encode(),c=j.truncDivision(v.getSize()*f,100)+11,h=v.getSize()+c,b,x,A,I,P;if(d!==An.DEFAULT_AZTEC_LAYERS){if(b=d<0,x=Math.abs(d),x>(b?An.MAX_NB_BITS_COMPACT:An.MAX_NB_BITS))throw new S(ce.format("Illegal value %s for layers",d));A=An.totalBitsInLayer(x,b),I=An.WORD_SIZE[x];let ye=A-A%I;if(P=An.stuffBits(v,I),P.getSize()+c>ye)throw new S("Data to large for user specified layer");if(b&&P.getSize()>I*64)throw new S("Data to large for user specified layer")}else{I=0,P=null;for(let ye=0;;ye++){if(ye>An.MAX_NB_BITS)throw new S("Data too large for an Aztec code");if(b=ye<=3,x=b?ye+1:ye,A=An.totalBitsInLayer(x,b),h>A)continue;(P==null||I!==An.WORD_SIZE[x])&&(I=An.WORD_SIZE[x],P=An.stuffBits(v,I));let _e=A-A%I;if(!(b&&P.getSize()>I*64)&&P.getSize()+c<=_e)break}}let z=An.generateCheckWords(P,A,I),H=P.getSize()/I,X=An.generateModeMessage(b,x,H),J=(b?11:14)+x*4,Q=new Int32Array(J),fe;if(b){fe=J;for(let ye=0;ye<Q.length;ye++)Q[ye]=ye}else{fe=J+1+2*j.truncDivision(j.truncDivision(J,2)-1,15);let ye=j.truncDivision(J,2),_e=j.truncDivision(fe,2);for(let Re=0;Re<ye;Re++){let je=Re+j.truncDivision(Re,15);Q[ye-Re-1]=_e-je-1,Q[ye+Re]=_e+je+1}}let me=new Ee(fe);for(let ye=0,_e=0;ye<x;ye++){let Re=(x-ye)*4+(b?9:12);for(let je=0;je<Re;je++){let Ue=je*2;for(let Ke=0;Ke<2;Ke++)z.get(_e+Ue+Ke)&&me.set(Q[ye*2+Ke],Q[ye*2+je]),z.get(_e+Re*2+Ue+Ke)&&me.set(Q[ye*2+je],Q[J-1-ye*2-Ke]),z.get(_e+Re*4+Ue+Ke)&&me.set(Q[J-1-ye*2-Ke],Q[J-1-ye*2-je]),z.get(_e+Re*6+Ue+Ke)&&me.set(Q[J-1-ye*2-je],Q[ye*2+Ke])}_e+=Re*8}if(An.drawModeMessage(me,b,fe,X),b)An.drawBullsEye(me,j.truncDivision(fe,2),5);else{An.drawBullsEye(me,j.truncDivision(fe,2),7);for(let ye=0,_e=0;ye<j.truncDivision(J,2)-1;ye+=15,_e+=16)for(let Re=j.truncDivision(fe,2)&1;Re<fe;Re+=2)me.set(j.truncDivision(fe,2)-_e,Re),me.set(j.truncDivision(fe,2)+_e,Re),me.set(Re,j.truncDivision(fe,2)-_e),me.set(Re,j.truncDivision(fe,2)+_e)}let ge=new oa;return ge.setCompact(b),ge.setSize(fe),ge.setLayers(x),ge.setCodeWords(H),ge.setMatrix(me),ge}static drawBullsEye(o,f,d){for(let v=0;v<d;v+=2)for(let c=f-v;c<=f+v;c++)o.set(c,f-v),o.set(c,f+v),o.set(f-v,c),o.set(f+v,c);o.set(f-d,f-d),o.set(f-d+1,f-d),o.set(f-d,f-d+1),o.set(f+d,f-d),o.set(f+d,f-d+1),o.set(f+d,f+d-1)}static generateModeMessage(o,f,d){let v=new $;return o?(v.appendBits(f-1,2),v.appendBits(d-1,6),v=An.generateCheckWords(v,28,4)):(v.appendBits(f-1,5),v.appendBits(d-1,11),v=An.generateCheckWords(v,40,4)),v}static drawModeMessage(o,f,d,v){let c=j.truncDivision(d,2);if(f)for(let h=0;h<7;h++){let b=c-3+h;v.get(h)&&o.set(b,c-5),v.get(h+7)&&o.set(c+5,b),v.get(20-h)&&o.set(b,c+5),v.get(27-h)&&o.set(c-5,b)}else for(let h=0;h<10;h++){let b=c-5+h+j.truncDivision(h,5);v.get(h)&&o.set(b,c-7),v.get(h+10)&&o.set(c+7,b),v.get(29-h)&&o.set(b,c+7),v.get(39-h)&&o.set(c-7,b)}}static generateCheckWords(o,f,d){let v=o.getSize()/d,c=new sa(An.getGF(d)),h=j.truncDivision(f,d),b=An.bitsToWords(o,d,h);c.encode(b,h-v);let x=f%d,A=new $;A.appendBits(0,x);for(const I of Array.from(b))A.appendBits(I,d);return A}static bitsToWords(o,f,d){let v=new Int32Array(d),c,h;for(c=0,h=o.getSize()/f;c<h;c++){let b=0;for(let x=0;x<f;x++)b|=o.get(c*f+x)?1<<f-x-1:0;v[c]=b}return v}static getGF(o){switch(o){case 4:return Me.AZTEC_PARAM;case 6:return Me.AZTEC_DATA_6;case 8:return Me.AZTEC_DATA_8;case 10:return Me.AZTEC_DATA_10;case 12:return Me.AZTEC_DATA_12;default:throw new S("Unsupported word size "+o)}}static stuffBits(o,f){let d=new $,v=o.getSize(),c=(1<<f)-2;for(let h=0;h<v;h+=f){let b=0;for(let x=0;x<f;x++)(h+x>=v||o.get(h+x))&&(b|=1<<f-1-x);(b&c)===c?(d.appendBits(b&c,f),h--):(b&c)===0?(d.appendBits(b|1,f),h--):d.appendBits(b,f)}return d}static totalBitsInLayer(o,f){return((f?88:112)+16*o)*o}}An.DEFAULT_EC_PERCENT=33,An.DEFAULT_AZTEC_LAYERS=0,An.MAX_NB_BITS=32,An.MAX_NB_BITS_COMPACT=4,An.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class to{encode(o,f,d,v){return this.encodeWithHints(o,f,d,v,null)}encodeWithHints(o,f,d,v,c){let h=Io.ISO_8859_1,b=An.DEFAULT_EC_PERCENT,x=An.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Hr.CHARACTER_SET)&&(h=Ro.forName(c.get(Hr.CHARACTER_SET).toString())),c.has(Hr.ERROR_CORRECTION)&&(b=j.parseInt(c.get(Hr.ERROR_CORRECTION).toString())),c.has(Hr.AZTEC_LAYERS)&&(x=j.parseInt(c.get(Hr.AZTEC_LAYERS).toString()))),to.encodeLayers(o,f,d,v,h,b,x)}static encodeLayers(o,f,d,v,c,h,b){if(f!==be.AZTEC)throw new S("Can only encode AZTEC, but got "+f);let x=An.encode(ce.getBytes(o,c),h,b);return to.renderResult(x,d,v)}static renderResult(o,f,d){let v=o.getMatrix();if(v==null)throw new ct;let c=v.getWidth(),h=v.getHeight(),b=Math.max(f,c),x=Math.max(d,h),A=Math.min(b/c,x/h),I=(b-c*A)/2,P=(x-h*A)/2,z=new Ee(b,x);for(let H=0,X=P;H<h;H++,X+=A)for(let J=0,Q=I;J<c;J++,Q+=A)v.get(J,H)&&z.setRegion(Q,X,A,A);return z}}n.AbstractExpandedDecoder=mt,n.ArgumentException=w,n.ArithmeticException=Se,n.AztecCode=oa,n.AztecCodeReader=fi,n.AztecCodeWriter=to,n.AztecDecoder=Zt,n.AztecDetector=yr,n.AztecDetectorResult=nr,n.AztecEncoder=An,n.AztecHighLevelEncoder=La,n.AztecPoint=xn,n.BarcodeFormat=be,n.Binarizer=N,n.BinaryBitmap=_,n.BitArray=$,n.BitMatrix=Ee,n.BitSource=br,n.BrowserAztecCodeReader=zi,n.BrowserBarcodeReader=Pr,n.BrowserCodeReader=ae,n.BrowserDatamatrixCodeReader=Ss,n.BrowserMultiFormatReader=ml,n.BrowserPDF417Reader=xi,n.BrowserQRCodeReader=No,n.BrowserQRCodeSvgWriter=Cs,n.CharacterSetECI=le,n.ChecksumException=C,n.Code128Reader=et,n.Code39Reader=ft,n.DataMatrixDecodedBitStreamParser=wr,n.DataMatrixReader=Ei,n.DecodeHintType=F,n.DecoderResult=$e,n.DefaultGridSampler=jr,n.DetectorResult=Wr,n.EAN13Reader=vr,n.EncodeHintType=Hr,n.Exception=y,n.FormatException=B,n.GenericGF=Me,n.GenericGFPoly=xe,n.GlobalHistogramBinarizer=ee,n.GridSampler=gr,n.GridSamplerInstance=Cn,n.HTMLCanvasElementLuminanceSource=pe,n.HybridBinarizer=de,n.ITFReader=Ft,n.IllegalArgumentException=S,n.IllegalStateException=ct,n.InvertedLuminanceSource=Oe,n.LuminanceSource=we,n.MathUtils=jt,n.MultiFormatOneDReader=Hn,n.MultiFormatReader=pl,n.MultiFormatWriter=vu,n.NotFoundException=ue,n.OneDReader=Pn,n.PDF417DecodedBitStreamParser=ze,n.PDF417DecoderErrorCorrection=Si,n.PDF417Reader=Sr,n.PDF417ResultMetadata=dn,n.PerspectiveTransform=zn,n.PlanarYUVLuminanceSource=Ns,n.QRCodeByteMatrix=To,n.QRCodeDataMask=ar,n.QRCodeDecodedBitStreamParser=hn,n.QRCodeDecoderErrorCorrectionLevel=un,n.QRCodeDecoderFormatInformation=sr,n.QRCodeEncoder=er,n.QRCodeEncoderQRCode=As,n.QRCodeMaskUtil=Rr,n.QRCodeMatrixUtil=Pt,n.QRCodeMode=Ot,n.QRCodeReader=Qr,n.QRCodeVersion=At,n.QRCodeWriter=aa,n.RGBLuminanceSource=Oo,n.RSS14Reader=gn,n.RSSExpandedReader=We,n.ReaderException=ls,n.ReedSolomonDecoder=Mt,n.ReedSolomonEncoder=sa,n.ReedSolomonException=Qe,n.Result=Y,n.ResultMetadataType=Ve,n.ResultPoint=ot,n.StringUtils=ce,n.UnsupportedOperationException=Ne,n.VideoInputDevice=K,n.WhiteRectangleDetector=Jt,n.WriterException=Kn,n.ZXingArrays=k,n.ZXingCharset=Ro,n.ZXingInteger=j,n.ZXingStandardCharsets=Io,n.ZXingStringBuilder=se,n.ZXingStringEncoding=G,n.ZXingSystem=R,n.createAbstractExpandedDecoder=qn,Object.defineProperty(n,"__esModule",{value:!0})}))})($h,$h.exports)),$h.exports}var qr=vX();const bX=So(qr),wX=p6({__proto__:null,default:bX},[qr]);var XN=(function(){function t(e,n,r){if(this.formatMap=new Map([[Rt.QR_CODE,qr.BarcodeFormat.QR_CODE],[Rt.AZTEC,qr.BarcodeFormat.AZTEC],[Rt.CODABAR,qr.BarcodeFormat.CODABAR],[Rt.CODE_39,qr.BarcodeFormat.CODE_39],[Rt.CODE_93,qr.BarcodeFormat.CODE_93],[Rt.CODE_128,qr.BarcodeFormat.CODE_128],[Rt.DATA_MATRIX,qr.BarcodeFormat.DATA_MATRIX],[Rt.MAXICODE,qr.BarcodeFormat.MAXICODE],[Rt.ITF,qr.BarcodeFormat.ITF],[Rt.EAN_13,qr.BarcodeFormat.EAN_13],[Rt.EAN_8,qr.BarcodeFormat.EAN_8],[Rt.PDF_417,qr.BarcodeFormat.PDF_417],[Rt.RSS_14,qr.BarcodeFormat.RSS_14],[Rt.RSS_EXPANDED,qr.BarcodeFormat.RSS_EXPANDED],[Rt.UPC_A,qr.BarcodeFormat.UPC_A],[Rt.UPC_E,qr.BarcodeFormat.UPC_E],[Rt.UPC_EAN_EXTENSION,qr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!wX)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),a=new Map;a.set(qr.DecodeHintType.POSSIBLE_FORMATS,i),a.set(qr.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(a){i(a)}})},t.prototype.decode=function(e){var n=new qr.MultiFormatReader(this.verbose,this.hints),r=new qr.HTMLCanvasElementLuminanceSource(e),i=new qr.BinaryBitmap(new qr.HybridBinarizer(r)),a=n.decode(i);return{text:a.text,format:lI.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),EX=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function p(w){try{y(r.next(w))}catch(S){u(S)}}function g(w){try{y(r.throw(w))}catch(S){u(S)}}function y(w){w.done?a(w.value):i(w.value).then(p,g)}y((r=r.apply(t,e||[])).next())})},SX=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(w){return g([y,w])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],i=0}finally{r=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},QN=(function(){function t(e,n,r){if(this.formatMap=new Map([[Rt.QR_CODE,"qr_code"],[Rt.AZTEC,"aztec"],[Rt.CODABAR,"codabar"],[Rt.CODE_39,"code_39"],[Rt.CODE_93,"code_93"],[Rt.CODE_128,"code_128"],[Rt.DATA_MATRIX,"data_matrix"],[Rt.ITF,"itf"],[Rt.EAN_13,"ean_13"],[Rt.EAN_8,"ean_8"],[Rt.PDF_417,"pdf417"],[Rt.UPC_A,"upc_a"],[Rt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return EX(this,void 0,void 0,function(){var n,r;return SX(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:lI.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,a=e;i<a.length;i++){var u=a[i],p=u.boundingBox.width*u.boundingBox.height;p>r&&(r=p,n=u)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),ZN=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function p(w){try{y(r.next(w))}catch(S){u(S)}}function g(w){try{y(r.throw(w))}catch(S){u(S)}}function y(w){w.done?a(w.value):i(w.value).then(p,g)}y((r=r.apply(t,e||[])).next())})},JN=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(w){return g([y,w])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],i=0}finally{r=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},xX=(function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&QN.isSupported()?(this.primaryDecoder=new QN(e,r,i),this.secondaryDecoder=new XN(e,r,i)):this.primaryDecoder=new XN(e,r,i)}return t.prototype.decodeAsync=function(e){return ZN(this,void 0,void 0,function(){var n;return JN(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return ZN(this,void 0,void 0,function(){var n,r;return JN(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),mE=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),f1=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function p(w){try{y(r.next(w))}catch(S){u(S)}}function g(w){try{y(r.throw(w))}catch(S){u(S)}}function y(w){w.done?a(w.value):i(w.value).then(p,g)}y((r=r.apply(t,e||[])).next())})},h1=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(w){return g([y,w])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],i=0}finally{r=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},hI=(function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t})(),_X=(function(t){mE(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(hI),AX=(function(t){mE(e,t);function e(n){return t.call(this,"zoom",n)||this}return e})(_X),CX=(function(t){mE(e,t);function e(n){return t.call(this,"torch",n)||this}return e})(hI),NX=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new AX(this.track)},t.prototype.torchFeature=function(){return new CX(this.track)},t})(),TX=(function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return f1(this,void 0,void 0,function(){var a,u;return h1(this,function(p){switch(p.label){case 0:return a=new t(e,n,i),r.aspectRatio?(u={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:p.sent(),p.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return f1(this,void 0,void 0,function(){return h1(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),a=i.length,u=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++u,u>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new NX(this.getFirstTrackOrFail())},t})(),OX=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return f1(this,void 0,void 0,function(){return h1(this,function(i){return[2,TX.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return f1(this,void 0,void 0,function(){var n,r;return h1(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t})(),eT=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function p(w){try{y(r.next(w))}catch(S){u(S)}}function g(w){try{y(r.throw(w))}catch(S){u(S)}}function y(w){w.done?a(w.value):i(w.value).then(p,g)}y((r=r.apply(t,e||[])).next())})},tT=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(w){return g([y,w])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],i=0}finally{r=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},RX=(function(){function t(){}return t.failIfNotSupported=function(){return eT(this,void 0,void 0,function(){return tT(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return eT(this,void 0,void 0,function(){return tT(this,function(n){return[2,OX.create(e)]})})},t})(),IX=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function p(w){try{y(r.next(w))}catch(S){u(S)}}function g(w){try{y(r.throw(w))}catch(S){u(S)}}function y(w){w.done?a(w.value):i(w.value).then(p,g)}y((r=r.apply(t,e||[])).next())})},MX=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(w){return g([y,w])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],i=0}finally{r=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},DX=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=ff.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=ff.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return IX(this,void 0,void 0,function(){var e,n,r,i,a,u,p;return MX(this,function(g){switch(g.label){case 0:return e=function(y){for(var w=y.getVideoTracks(),S=0,_=w;S<_.length;S++){var C=_[S];C.enabled=!1,C.stop(),y.removeTrack(C)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],a=0,u=r;a<u.length;a++)p=u[a],p.kind==="videoinput"&&i.push({id:p.deviceId,label:p.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(a){for(var u=[],p=0,g=a;p<g.length;p++){var y=g[p];y.kind==="video"&&u.push({id:y.id,label:y.label})}e(u)},i=MediaStreamTrack;i.getSources(r)})},t})(),ci;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(ci||(ci={}));var LX=(function(){function t(){this.state=ci.NOT_STARTED,this.onGoingTransactionNewState=ci.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===ci.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ci.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===ci.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ci.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ci.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case ci.UNKNOWN:throw"Transition from unknown is not allowed";case ci.NOT_STARTED:this.failIfNewStateIs(e,[ci.PAUSED]);break;case ci.SCANNING:break;case ci.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var a=i[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),kX=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===ci.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==ci.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ci.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===ci.PAUSED},t})(),jX=(function(){function t(){}return t.create=function(){return new kX(new LX)},t})(),PX=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Vs=(function(t){PX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(qa),BX=(function(){function t(e,n){this.logger=n,this.fps=Vs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Vs.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?fI.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!lo(this.qrbox)},t.create=function(e,n){return new t(e,n)},t})(),nT=(function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new uI(this.verbose),this.qrcode=new xX(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=jX.create()}return t.prototype.start=function(e,n,r,i){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;i?u=i:u=this.verbose?this.logger.log:function(){};var p=BX.create(n,this.logger);this.clearElement();var g=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=g,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Vs.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var S=this,_=this.stateManagerProxy.startTransition(ci.SCANNING);return new Promise(function(C,N){var R=y?p.videoConstraints:S.createVideoConstraints(e);if(!R){_.cancel(),N("videoConstraints should be defined");return}var M={};(!y||p.aspectRatio)&&(M.aspectRatio=p.aspectRatio);var L={onRenderSurfaceReady:function(k,j){S.setupUi(k,j,p),S.isScanning=!0,S.foreverScan(p,r,u)}};RX.failIfNotSupported().then(function(k){k.create(R).then(function(j){return j.render(a.element,M,L).then(function($){S.renderedCamera=$,_.execute(),C(null)}).catch(function($){_.cancel(),N($)})}).catch(function(j){_.cancel(),N(ff.errorGettingUserMedia(j))})}).catch(function(k){_.cancel(),N(ff.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ci.PAUSED),this.showPausedState(),(lo(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(ci.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(ci.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(Vs.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(lo(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var u=new Image;u.onload=function(){var p=u.width,g=u.height,y=document.getElementById(r.elementId),w=y.clientWidth?y.clientWidth:Vs.DEFAULT_WIDTH,S=Math.max(y.clientHeight?y.clientHeight:g,Vs.FILE_SCAN_MIN_HEIGHT),_=r.computeCanvasDrawConfig(p,g,w,S);if(n){var C=r.createCanvasElement(w,S,"qr-canvas-visible");C.style.display="inline-block",y.appendChild(C);var N=C.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=w,N.canvas.height=S,N.drawImage(u,0,0,p,g,_.x,_.y,_.width,_.height)}var R=Vs.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(u.width,_.width),L=Math.max(u.height,_.height),k=M+2*R,j=L+2*R,$=r.createCanvasElement(k,j);y.appendChild($);var U=$.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=k,U.canvas.height=j,U.drawImage(u,0,0,p,g,R,R,M,L);try{r.qrcode.decodeRobustlyAsync($).then(function(F){i(GN.createFromQrcodeResult(F))}).catch(a)}catch(F){a("QR code parse error, error = ".concat(F))}},u.onerror=a,u.onabort=a,u.onstalled=a,u.onsuspend=a,u.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return DX.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!fI.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Rt.QR_CODE,Rt.AZTEC,Rt.CODABAR,Rt.CODE_39,Rt.CODE_93,Rt.CODE_128,Rt.DATA_MATRIX,Rt.MAXICODE,Rt.ITF,Rt.EAN_13,Rt.EAN_8,Rt.PDF_417,Rt.RSS_14,Rt.RSS_EXPANDED,Rt.UPC_A,Rt.UPC_E,Rt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=e.formatsToSupport;i<a.length;i++){var u=a[i];mX(u)?r.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(lo(e))return!0;if(!lo(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(lo(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return lo(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,a=r.qrbox;this.validateQrboxConfig(a);var u=this.toQrdimensions(e,n,a),p=function(y){if(y<Vs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Vs.MIN_QR_BOX_SIZE,"px.")},g=function(y){return y>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=e),y};p(u.width),p(u.height),u.width=g(u.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=lo(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(e,n,i);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=r.isShadedBoxEnabled()&&a.height<=n,p={x:0,y:0,width:e,height:n},g=u?this.getShadedRegionBounds(e,n,a):p,y=this.createCanvasElement(g.width,g.height),w={willReadFrequently:!0},S=y.getContext("2d",w);S.canvas.width=g.width,S.canvas.height=g.height,this.element.append(y),u&&this.possiblyInsertShadingElement(this.element,e,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=S,this.canvasElement=y},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=ff.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,GN.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=ff.codeParseError(i);return n(a,cI.createFrom(a)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),u=a.videoWidth/a.clientWidth,p=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*u,y=this.qrRegion.height*p,w=this.qrRegion.x*u,S=this.qrRegion.y*p;this.context.drawImage(a,w,S,g,y,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(C){!C&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){_()})):_()}).catch(function(C){i.logger.logError("Error happend while scanning context",C),_()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",u=function(N){if(N in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var g=Object.keys(e)[0];if(g!==n&&g!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===n){var y=e.facingMode;if(typeof y=="string"){if(u(y))return{facingMode:y}}else if(typeof y=="object")if(a in y){if(u(y["".concat(a)]))return{facingMode:{exact:y["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var w=typeof y;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var S=e.deviceId;if(typeof S=="string")return{deviceId:S};if(typeof S=="object"){if(a in S)return{deviceId:{exact:S["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var _=typeof S;throw"Invalid type of 'deviceId' = ".concat(_)}}}var C=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(C)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var a=(r-e)/2,u=(i-n)/2;return{x:a,y:u,width:e,height:n}}else{var p=e,g=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(g)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Vs.BORDER_SHADER_MATCH_COLOR:Vs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,a=n,u=document.createElement("canvas");return u.style.width="".concat(i,"px"),u.style.height="".concat(a,"px"),u.style.display="none",u.id=lo(r)?"qr-canvas":r,u},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var u=(n-i.width)/2,p=(r-i.height)/2;if(a.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Vs.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,y=40;this.insertShaderBorders(a,y,g,-g,null,0,!0),this.insertShaderBorders(a,y,g,-g,null,0,!1),this.insertShaderBorders(a,y,g,null,-g,0,!0),this.insertShaderBorders(a,y,g,null,-g,0,!1),this.insertShaderBorders(a,g,y+g,-g,null,-g,!0),this.insertShaderBorders(a,g,y+g,null,-g,-g,!0),this.insertShaderBorders(a,g,y+g,-g,null,-g,!1),this.insertShaderBorders(a,g,y+g,null,-g,-g,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,n,r,i,a,u,p){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=Vs.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(n,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),a!==null&&(g.style.bottom="".concat(a,"px")),p?g.style.left="".concat(u,"px"):g.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),e.appendChild(g)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),gE="data:image/svg+xml;base64,",UX=gE+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",zX=gE+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",rT=gE+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",FX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",iT=(function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t})(),qX=(function(){function t(){this.data=iT.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=iT.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t})(),$X=(function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=YN.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var a=document.createElement("a");a.innerText=YN.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t})(),VX=(function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=rT,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=FX,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=rT,this.infoIcon.style.opacity="0.6")},t})(),HX=(function(){function t(){var e=this;this.infoDiv=new $X,this.infoIcon=new VX(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t})(),KX=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function p(w){try{y(r.next(w))}catch(S){u(S)}}function g(w){try{y(r.throw(w))}catch(S){u(S)}}function y(w){w.done?a(w.value):i(w.value).then(p,g)}y((r=r.apply(t,e||[])).next())})},GX=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(w){return g([y,w])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],i=0}finally{r=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},sT=(function(){function t(){}return t.hasPermissions=function(){return KX(this,void 0,void 0,function(){var e,n,r,i;return GX(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=a.sent(),n=0,r=e;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},t})(),Hl=(function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===fc.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===fc.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return qa.DEFAULT_SUPPORTED_SCAN_TYPE;var n=qa.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=e;r<i.length;r++){var a=i[r];if(!qa.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return e},t})(),Ys=(function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t})(),el=(function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(Ys.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t})(),dI=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function p(w){try{y(r.next(w))}catch(S){u(S)}}function g(w){try{y(r.throw(w))}catch(S){u(S)}}function y(w){w.done?a(w.value):i(w.value).then(p,g)}y((r=r.apply(t,e||[])).next())})},pI=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(w){return g([y,w])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,i&&(a=y[0]&2?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],i=0}finally{r=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},aT=(function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return dI(this,void 0,void 0,function(){var e,n;return pI(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?dr.torchOffButton():dr.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?dr.torchOnFailedMessage():dr.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t})(),YX=(function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=el.createElement("button",Ys.TORCH_BUTTON_ID),this.torchController=new aT(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=dr.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(a){return dI(r,void 0,void 0,function(){return pI(this,function(u){switch(u.label){case 0:return[4,i.torchController.flipState()];case 1:return u.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(Ys.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(Ys.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(Ys.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(Ys.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new aT(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=dr.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,i){var a=new t(n,i);return a.render(e,r),a},t})(),WX=(function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=el.createElement("button",Ys.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(p){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=el.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(p){if(!(p==null||p.target==null)){var g=p.target;if(!(g.files&&g.files.length===0)){var y=g.files,w=y[0],S=w.name;a.setImageNameToButton(S),r(w)}}});var u=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(u),this.fileBasedScanRegion.addEventListener("dragenter",function(p){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(p){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(p){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(p){p.stopPropagation(),p.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var g=p.dataTransfer;if(g){var y=g.files;if(!y||y.length===0)return;for(var w=!1,S=0;S<y.length;++S){var _=y.item(S);if(_){var C=/image.*/;if(_.type.match(C)){w=!0;var N=_.name;a.setImageNameToButton(N),r(_),u.innerText=dr.dragAndDropMessage();break}}}w||(u.innerText=dr.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=dr.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),i=e.length,a=e.substring(i-8,i);e="".concat(r,"....").concat(a)}var u=dr.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=u},t.prototype.setInitialValueToButton=function(){var e=dr.fileSelectionChooseImage()+" - "+dr.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var i=new t(e,n,r);return i},t})(),XX=(function(){function t(e){this.selectElement=el.createElement("select",Ys.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=dr.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var a=1,u=0,p=this.cameras;u<p.length;u++){var g=p[u],y=g.id,w=g.label==null?y:g.label;(!w||w==="")&&(w=[dr.anonymousCameraPrefix(),a++].join(" "));var S=document.createElement("option");S.value=y,S.innerText=w,this.options.push(S),this.selectElement.appendChild(S)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t})(),QX=(function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=el.createElement("input",Ys.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=dr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=dr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,i){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t})(),Hs;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Hs||(Hs={}));function ZX(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function JX(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var eQ=(function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Hl(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new uI(this.verbose),this.persistedDataManager=new qX,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(a,u){if(e)e(a,u);else{if(r.lastMatchFound===a)return;r.lastMatchFound=a,r.setHeaderMessage(dr.lastMatch(a),Hs.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,u){n&&n(a,u)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new nT(this.getScanRegionId(),JX(this.config,this.verbose))},t.prototype.pause=function(e){(lo(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(a){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(a){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",a),i(a)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=qa.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!qa.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=qa.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=qa.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:qa.SCAN_DEFAULT_FPS,rememberLastUsedCamera:qa.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:qa.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Hl.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),a=this.getDashboardId();i.id=a,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new HX;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(dr.cameraPermissionRequesting());var a=function(){r||i.createPermissionButton(e,n)};nT.getCameras().then(function(u){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),u&&u.length>0?(e.removeChild(n),i.renderCameraSelection(u)):(i.setHeaderMessage(dr.noCameraFound(),Hs.STATUS_WARNING),a())}).catch(function(u){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:a(),i.setHeaderMessage(u,Hs.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,i=el.createElement("button",this.getCameraPermissionButtonId());i.innerText=dr.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(e,n,i)}),n.appendChild(i)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Hl.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){sT.hasPermissions().then(function(i){i?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Hl.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Hl.isFileScanType(this.currentScanType),r=this,i=function(a){if(!r.html5Qrcode)throw"html5Qrcode not defined";Hl.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(dr.loadingImage()),r.html5Qrcode.scanFileV2(a,!0).then(function(u){r.resetHeaderMessage(),r.qrCodeSuccessCallback(u.decodedText,u)}).catch(function(u){r.setHeaderMessage(u,Hs.STATUS_WARNING),r.qrCodeErrorCallback(u,cI.createFrom(u))}))};this.fileSelectionUi=WX.create(e,n,i)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var a=QX.create(i,!1),u=function(R){var M=R.zoomFeature();if(M.isSupported()){a.setOnCameraZoomValueChangeCallback(function(k){M.apply(k)});var L=1;n.config.defaultZoomValueIfSupported&&(L=n.config.defaultZoomValueIfSupported),L=gX(L,M.min(),M.max()),a.setValues(M.min(),M.max(),L,M.step()),a.show()}},p=XX.create(i,e),g=document.createElement("span"),y=el.createElement("button",Ys.CAMERA_START_BUTTON_ID);y.innerText=dr.scanButtonStartScanningText(),g.appendChild(y);var w=el.createElement("button",Ys.CAMERA_STOP_BUTTON_ID);w.innerText=dr.scanButtonStopScanningText(),w.style.display="none",w.disabled=!0,g.appendChild(w);var S,_=function(R){if(!R.torchFeature().isSupported()){S&&S.hide();return}S?S.updateTorchCapability(R.torchFeature()):S=YX.create(g,R.torchFeature(),{display:"none",marginLeft:"5px"},function(M){r.setHeaderMessage(M,Hs.STATUS_WARNING)}),S.show()};i.appendChild(g);var C=function(R){R||(y.style.display="none"),y.innerText=dr.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,R&&(y.style.display="inline-block")};if(y.addEventListener("click",function(R){y.innerText=dr.scanButtonScanningStarting(),p.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var M=p.getValue();r.persistedDataManager.setLastUsedCameraId(M),r.html5Qrcode.start(M,ZX(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(L){w.disabled=!1,w.style.display="inline-block",C(!1);var k=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&_(k),n.config.showZoomSliderIfSupported===!0&&u(k)}).catch(function(L){r.showHideScanTypeSwapLink(!0),p.enable(),C(!0),r.setHeaderMessage(L,Hs.STATUS_WARNING)})}),p.hasSingleItem()&&y.click(),w.addEventListener("click",function(R){if(!r.html5Qrcode)throw"html5Qrcode not defined";w.disabled=!0,r.html5Qrcode.stop().then(function(M){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),p.enable(),y.disabled=!1,w.style.display="none",y.style.display="inline-block",S&&(S.reset(),S.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(M){w.disabled=!1,r.setHeaderMessage(M,Hs.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var N=r.persistedDataManager.getLastUsedCameraId();p.hasValue(N)?(p.setValue(N),y.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=dr.textIfCameraScanSelected(),r=dr.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var u=el.createElement("span",this.getDashboardSectionSwapLinkId());u.style.textDecoration="underline",u.style.cursor="pointer",u.innerText=Hl.isCameraScanType(this.currentScanType)?n:r,u.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Hl.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),u.innerText=r,e.currentScanType=fc.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),u.innerText=n,e.currentScanType=fc.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),a.appendChild(u),i.appendChild(a)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){sT.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=Hs.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case Hs.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Hs.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Hs.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=UX,this.cameraScanImage.alt=dr.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=zX,this.fileScanImage.alt=dr.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Ys.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Ys.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t})();function tQ(){const{currentUser:t}=ws(),{db:e}=Ui(),[n,r]=re.useState(null),[i,a]=re.useState(null),u=re.useRef(null);return re.useEffect(()=>{const p="reader";if(u.current||n)return;const g=async w=>{if(!(!e||!t))try{u.current?.clear();const S=await hX(e,t.id,w);r(S)}catch(S){console.error("Scan Error",S),a(S.message||"Invalid QR Code")}},y=()=>{};try{setTimeout(()=>{if(!document.getElementById(p))return;const w=new eQ(p,{fps:10,qrbox:{width:250,height:250}},!1);w.render(g,y),u.current=w},500)}catch{a("Camera Init Failed")}return()=>{u.current&&(u.current.clear().catch(w=>console.error("Failed to clear scanner",w)),u.current=null)}},[e,t,n]),n&&n.success?O.jsxs("div",{className:"flex flex-col items-center justify-center p-6 space-y-4 text-center",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center",children:O.jsx(xf,{className:"w-10 h-10 text-green-500"})}),O.jsx("h2",{className:"text-xl font-bold text-white",children:"Sync Successful!"}),O.jsx("p",{className:"text-slate-400 text-sm",children:n.message}),O.jsx("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl w-full max-w-xs space-y-2 text-sm",children:n.type==="profile"?O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-muted-foreground",children:"Levels Updated"}),O.jsx("span",{className:"text-white font-bold",children:n.details?.levelsUpdated||0})]}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-muted-foreground",children:"Stars Gained"}),O.jsx("span",{className:"text-white font-bold",children:n.details?.newStars||0})]})]}):O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-muted-foreground",children:"Resources Added"}),O.jsx("span",{className:"text-white font-bold",children:n.details?.itemsImported||0})]})}),O.jsx("button",{onClick:()=>window.location.reload(),className:"bg-emerald-500 hover:bg-emerald-400 text-black px-6 py-3 rounded-xl font-bold shadow-lg shadow-emerald-500/20 transition-all",children:"Done"})]}):i?O.jsxs("div",{className:"flex flex-col items-center justify-center p-6 space-y-4 text-center",children:[O.jsx(Dk,{className:"w-12 h-12 text-destructive"}),O.jsx("h3",{className:"text-white font-bold",children:"Scan Failed"}),O.jsx("p",{className:"text-muted-foreground text-sm",children:i}),O.jsx("button",{onClick:()=>window.location.reload(),className:"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg border border-white/5",children:"Try Again"})]}):O.jsxs("div",{className:"flex flex-col items-center w-full max-w-md mx-auto p-4 space-y-4",children:[O.jsx("h2",{className:"text-white font-bold",children:"Scan Peer Code"}),O.jsx("div",{id:"reader",className:"w-full overflow-hidden rounded-xl border-2 border-slate-700 bg-black"}),O.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Point camera at another student's QR code"})]})}function nQ(){const t=Mi(),[e,n]=re.useState(!1),[r,i]=re.useState([]);re.useEffect(()=>{const p=()=>{try{const g=JSON.parse(localStorage.getItem("sync_history")||"[]");i(g)}catch{console.error("Failed to load sync history")}};return p(),window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)},[e]);const[a,u]=re.useState("select");return e?O.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg",children:[O.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[O.jsx("button",{onClick:()=>{a==="select"?n(!1):u("select")},className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white transition-colors",children:O.jsx(gs,{className:"w-5 h-5"})}),O.jsx("h1",{className:"text-2xl font-bold text-white",children:a==="select"?"P2P Sync":a==="share"?"Share Content":"Receive Content"})]}),O.jsx("div",{className:"max-w-md mx-auto",children:O.jsxs(wo,{mode:"wait",children:[a==="select"&&O.jsxs(on.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid gap-6",children:[O.jsxs("button",{onClick:()=>u("share"),className:"p-8 rounded-3xl bg-gradient-to-br from-cyan-500/10 to-blue-500/10 border border-cyan-500/20 hover:border-cyan-500/50 hover:bg-cyan-500/20 transition-all group text-left",children:[O.jsx("div",{className:"w-16 h-16 rounded-2xl bg-cyan-500/20 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:O.jsx(J6,{className:"w-8 h-8 text-cyan-400"})}),O.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Share Content"}),O.jsx("p",{className:"text-slate-400 font-medium leading-relaxed",children:"Generate a QR code to share your progress and content with a peer."})]}),O.jsxs("button",{onClick:()=>u("receive"),className:"p-8 rounded-3xl bg-gradient-to-br from-emerald-500/10 to-green-500/10 border border-emerald-500/20 hover:border-emerald-500/50 hover:bg-emerald-500/20 transition-all group text-left",children:[O.jsx("div",{className:"w-16 h-16 rounded-2xl bg-emerald-500/20 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:O.jsx(__,{className:"w-8 h-8 text-emerald-400"})}),O.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Receive Content"}),O.jsx("p",{className:"text-slate-400 font-medium leading-relaxed",children:"Scan a peer's QR code to merge their progress and content into your device."})]})]},"select"),a==="share"&&O.jsx(on.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"glass-panel p-6 rounded-3xl border border-white/10",children:O.jsx(pX,{})},"share"),a==="receive"&&O.jsx(on.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"glass-panel p-6 rounded-3xl border border-white/10",children:O.jsx(tQ,{})},"receive")]})})]}):O.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg animate-fade-in font-sans",children:[O.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[O.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white transition-colors",children:O.jsx(gs,{className:"w-5 h-5"})}),O.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-green-500",children:"Recently Synced"})]}),O.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("h2",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:"Activity Log"}),r.length>0&&O.jsxs("button",{onClick:()=>{localStorage.removeItem("sync_history"),i([])},className:"text-xs text-red-400 hover:text-red-300 flex items-center gap-1",children:[O.jsx(qd,{className:"w-3 h-3"})," Clear"]})]}),O.jsxs("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-400 text-black font-bold rounded-xl flex items-center gap-2 shadow-lg shadow-emerald-500/20 transition-all hover:scale-105",children:[O.jsx(__,{className:"w-4 h-4"})," Sync New"]})]}),O.jsx("div",{className:"space-y-4",children:O.jsx(wo,{children:r.length===0?O.jsxs(on.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-12 text-slate-500 glass-panel rounded-2xl border border-white/5",children:[O.jsx(Ob,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),O.jsx("p",{children:"No recent sync activity."}),O.jsx("p",{className:"text-xs mt-2",children:"Scan a Teacher's QR code to receive content."})]}):r.map((p,g)=>O.jsxs(on.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,height:0},transition:{delay:g*.1},className:"glass-panel p-4 rounded-2xl border border-white/10 flex flex-col md:flex-row gap-4 md:items-center hover:bg-white/5 transition-colors group",children:[O.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/10 flex items-center justify-center border border-emerald-500/20 group-hover:bg-emerald-500/20 transition-colors",children:O.jsx(xf,{className:"w-6 h-6 text-emerald-400"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-300 transition-colors",children:p.title}),O.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-slate-400",children:[O.jsxs("span",{className:"flex items-center gap-1",children:[O.jsx(Ob,{className:"w-3 h-3"})," ",p.date]}),O.jsx("span",{className:"px-2 py-0.5 rounded bg-white/10 text-slate-300",children:p.type})]})]}),O.jsxs("div",{className:"md:text-right border-t md:border-t-0 border-white/10 pt-3 md:pt-0 mt-2 md:mt-0",children:[O.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase mb-1",children:"Synced From"}),O.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-300 font-medium md:justify-end",children:[O.jsx(Ak,{className:"w-4 h-4"}),O.jsx("span",{children:p.teacher})]}),O.jsx("p",{className:"text-xs text-slate-400",children:p.phone})]})]},p.id))})}),O.jsx("div",{className:"p-4 rounded-2xl bg-blue-500/10 border border-blue-500/20 text-center",children:O.jsx("p",{className:"text-blue-300 text-sm",children:"All content is up to date with the local village server."})})]})]})}function rQ(){const t=Mi(),{db:e}=Ui(),{logout:n}=ws(),{t:r,i18n:i}=Ff(),[a,u]=re.useState("");re.useEffect(()=>{const S=localStorage.getItem("teacherIP");S&&u(S)},[]);const p=()=>{localStorage.setItem("teacherIP",a),alert("Teacher IP Saved!")},g=async()=>{e&&confirm("Are you sure? This will delete ALL progress!")&&(await e.remove(),window.location.reload())},y=()=>{n(),t("/")},w=S=>{i.changeLanguage(S),localStorage.setItem("appLanguage",S)};return O.jsxs("div",{className:"min-h-screen p-6 pb-24 space-y-8 animate-fade-in",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:()=>t("/"),className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors",children:O.jsx(gs,{className:"w-5 h-5 text-white"})}),O.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-purple-400 bg-clip-text text-transparent",children:r("settings.title")})]}),O.jsxs("div",{className:"glass-panel p-4 rounded-xl space-y-4",children:[O.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[O.jsx(Ib,{className:"w-5 h-5 text-primary"})," ",r("settings.language")]}),O.jsx("div",{className:"grid grid-cols-3 gap-2",children:["en","hi","mr"].map(S=>O.jsx("button",{onClick:()=>w(S),className:`p-2 rounded-lg text-sm font-medium transition-colors border ${i.language===S?"bg-primary/20 border-primary text-primary":"bg-black/20 border-white/10 text-muted-foreground hover:bg-white/5"}`,children:S==="en"?"English":S==="hi"?"":""},S))})]}),O.jsxs("div",{className:"glass-panel p-4 rounded-xl space-y-4",children:[O.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[O.jsx(GL,{className:"w-5 h-5 text-primary"})," Data Management"]}),O.jsxs("div",{className:"space-y-2",children:[O.jsx("label",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider ml-1",children:r("settings.teacher_ip")}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("input",{type:"text",value:a,onChange:S=>u(S.target.value),placeholder:"http://192.168.1.50:5984/db",className:"bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm flex-1 focus:outline-none focus:border-primary/50 text-foreground"}),O.jsx("button",{onClick:p,className:"bg-primary hover:bg-primary/80 text-primary-foreground px-4 rounded-lg text-sm font-medium transition-colors",children:r("settings.save")})]})]}),O.jsx("hr",{className:"border-white/5"}),O.jsxs("button",{onClick:g,className:"w-full p-3 rounded-lg bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 transition-colors flex items-center justify-center gap-2 font-medium",children:[O.jsx(_1,{className:"w-4 h-4"})," ",r("settings.reset_data")]})]}),O.jsx("button",{onClick:y,className:"w-full p-3 rounded-xl bg-white/5 text-muted-foreground border border-white/5 hover:bg-white/10 transition-colors font-medium",children:r("dashboard.logout_btn")}),O.jsxs("div",{className:"text-center space-y-2",children:[O.jsx("p",{className:"text-xs text-muted-foreground",children:"AlgoSensei v1.2 (Offline)"}),O.jsxs("button",{onClick:()=>t("/teacher"),className:"text-xs text-primary/50 hover:text-primary transition-colors flex items-center justify-center gap-1 mx-auto",children:[O.jsx(sk,{className:"w-3 h-3"})," ",r("teacher.portal")]})]})]})}function iQ(){const t=Mi(),{db:e}=Ui(),{logout:n,currentUser:r}=ws(),[i,a]=re.useState(!1),[u,p]=re.useState({students:0,quizzes:0,lessons:0}),[g,y]=re.useState([]),[w,S]=re.useState(""),[_,C]=re.useState(!1),[N,R]=re.useState({name:"",standard:"10th",medium:"english"}),[M,L]=re.useState(!1);re.useEffect(()=>{if(!e||!r)return;(async()=>{const B=(await e.users.find().exec()).filter(G=>G.get("role")!=="teacher"),Z=await e.content.find().exec(),Ne=(await e.classes.find().exec()).filter(G=>G.teacherId===r.id);y(Ne),p({students:B.length,quizzes:Z.filter(G=>G.type==="quiz").length,lessons:Z.filter(G=>G.type==="lesson").length}),r.ipAddress&&S(r.ipAddress)})()},[e,r]);const k=async U=>{if(U.preventDefault(),!(!e||!r||!N.name)){L(!0);try{const F=Ca();await e.classes.insert({id:F,name:N.name,standard:N.standard,medium:N.medium,teacherId:r.id,code:Array.from({length:6},()=>"ABCDEFGHJKLMNPQRSTUVWXYZ23456789".charAt(Math.floor(Math.random()*32))).join(""),createdAt:Date.now()});const Z=(await e.classes.find().exec()).filter(le=>le.teacherId===r.id);y(Z),a(!1),R({name:"",standard:"10",medium:"english"})}catch(F){console.error("Failed to create class:",F),alert("Error creating class.")}finally{L(!1)}}},j=async()=>{await n(),t("/")},$=async()=>{if(!(!e||!r)){C(!0);try{const U=await e.users.findOne(r.id).exec();U&&(await U.patch({ipAddress:w}),alert("IP Address Updated!"))}catch(U){console.error("Failed to save IP:",U),alert("Failed to save IP")}finally{C(!1)}}};return O.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg font-sans",children:[O.jsx(wo,{children:i&&O.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:O.jsxs(on.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-[#1a1a1a] border border-white/10 rounded-2xl w-full max-w-md p-6 shadow-2xl",children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsx("h3",{className:"text-xl font-bold text-white",children:"Create New Class"}),O.jsx("button",{onClick:()=>a(!1),className:"text-slate-400 hover:text-white",children:O.jsx($d,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:k,className:"space-y-6",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx("label",{className:"text-xs uppercase font-bold text-slate-500",children:"Class Name"}),O.jsx("input",{type:"text",value:N.name,onChange:U=>R({...N,name:U.target.value}),placeholder:"Ex: Topper Batch 2026",className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-primary focus:outline-none transition-colors",required:!0})]}),O.jsxs("div",{className:"space-y-2",children:[O.jsx("label",{className:"text-xs uppercase font-bold text-slate-500",children:"Standard"}),O.jsx("div",{className:"grid grid-cols-5 gap-2",children:["1","2","3","4","5","6","7","8","9","10"].map(U=>{const F=U+(U==="1"?"st":U==="2"?"nd":U==="3"?"rd":"th");return O.jsx("button",{type:"button",onClick:()=>R({...N,standard:U}),className:`p-2 rounded text-xs font-bold transition-all border ${N.standard===U?"bg-blue-600/20 text-blue-400 border-blue-600":"bg-white/5 text-slate-400 border-transparent hover:bg-white/10"}`,children:F},U)})})]}),O.jsxs("div",{className:"space-y-2",children:[O.jsx("label",{className:"text-xs uppercase font-bold text-slate-500",children:"Medium"}),O.jsx("div",{className:"grid grid-cols-2 gap-3",children:["english","marathi"].map(U=>O.jsx("button",{type:"button",onClick:()=>R({...N,medium:U}),className:`p-3 rounded-xl text-sm font-bold capitalize transition-all border ${N.medium===U?"bg-purple-600/20 text-purple-400 border-purple-600":"bg-white/5 text-slate-400 border-transparent hover:bg-white/10"}`,children:U},U))})]}),O.jsx("button",{type:"submit",disabled:M,className:"w-full bg-primary hover:bg-primary/80 text-white font-bold py-4 rounded-xl transition-all shadow-lg shadow-primary/20 disabled:opacity-50",children:M?"Creating...":"Create Class & Seed Subjects"})]})]})})}),O.jsx("header",{className:"flex items-center justify-between mb-8",children:O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:j,className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",title:"Logout",children:O.jsx(gs,{className:"w-5 h-5"})}),O.jsx("h1",{className:"text-2xl font-bold text-white",children:"Teacher Dashboard"})]})}),O.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[O.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-col items-center justify-center gap-2",children:[O.jsx(t5,{className:"w-6 h-6 text-blue-400"}),O.jsx("span",{className:"text-2xl font-bold text-white",children:u.students}),O.jsx("span",{className:"text-xs text-slate-400",children:"Total Students"})]}),O.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-col items-center justify-center gap-2",children:[O.jsx(E0,{className:"w-6 h-6 text-yellow-400"}),O.jsx("span",{className:"text-2xl font-bold text-white",children:g.length}),O.jsx("span",{className:"text-xs text-slate-400",children:"Active Classes"})]}),O.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-col items-center justify-center gap-2",children:[O.jsx(Sf,{className:"w-6 h-6 text-purple-400"}),O.jsx("span",{className:"text-2xl font-bold text-white",children:u.lessons+u.quizzes}),O.jsx("span",{className:"text-xs text-slate-400",children:"Total Content"})]})]}),O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsxs("div",{children:[O.jsx("h2",{className:"text-xl font-bold text-white",children:"Your Classes"}),O.jsx("p",{className:"text-xs text-slate-400",children:"Manage students and content groups"})]}),O.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary/80 text-white px-6 py-3 rounded-xl font-bold transition-all shadow-lg shadow-primary/20",children:[O.jsx(_f,{className:"w-5 h-5"})," Create Class"]})]}),O.jsxs("div",{className:"mb-8 glass-panel p-6 rounded-2xl border border-white/5",children:[O.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[O.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Device Configuration"]}),O.jsxs("div",{className:"flex items-end gap-4 max-w-md",children:[O.jsxs("div",{className:"flex-1 space-y-2",children:[O.jsx("label",{className:"text-xs uppercase font-bold text-slate-500",children:"Device IP Address"}),O.jsx("input",{type:"text",value:w,onChange:U=>S(U.target.value),placeholder:"192.168.x.x",className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white font-mono focus:border-primary focus:outline-none"})]}),O.jsx("button",{onClick:$,disabled:_,className:"bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-xl font-bold transition-all disabled:opacity-50",children:_?"Saving...":"Update IP"})]}),O.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"This IP is used to identify this teacher device for local syncing."})]}),O.jsx("section",{className:"space-y-4",children:O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.map(U=>O.jsxs(on.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>t(`/teacher/class/${U.id}`),className:"glass-panel p-6 rounded-2xl flex items-center justify-between group hover:border-primary/50 transition-all text-left",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center text-purple-400 group-hover:scale-110 transition-transform",children:O.jsx(E0,{className:"w-6 h-6"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-bold text-white text-lg",children:U.name}),O.jsxs("p",{className:"text-xs text-slate-400",children:[U.standard,"  ",U.medium]}),O.jsxs("div",{className:"mt-1 inline-block px-2 py-1 bg-white/10 rounded text-[10px] text-primary font-mono tracking-wider",children:["Code: ",U.code||"---"]})]})]}),O.jsx(W6,{className:"w-5 h-5 text-slate-500 group-hover:text-white transition-colors"})]},U.id)),g.length===0&&O.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 glass-panel rounded-2xl border-dashed border-white/10",children:[O.jsx(E0,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),O.jsx("p",{className:"font-medium",children:"No classes yet."}),O.jsx("p",{className:"text-sm opacity-70",children:"Create a class to start adding subjects and students."})]})]})})]})}var mI=typeof window=="object"&&window&&window.Object===Object&&window,sQ=typeof self=="object"&&self&&self.Object===Object&&self,Ao=mI||sQ||Function("return this")(),hc=Ao.Symbol,gI=Object.prototype,aQ=gI.hasOwnProperty,oQ=gI.toString,jh=hc?hc.toStringTag:void 0;function lQ(t){var e=aQ.call(t,jh),n=t[jh];try{t[jh]=void 0;var r=!0}catch{}var i=oQ.call(t);return r&&(e?t[jh]=n:delete t[jh]),i}var cQ=Object.prototype,uQ=cQ.toString;function fQ(t){return uQ.call(t)}var hQ="[object Null]",dQ="[object Undefined]",oT=hc?hc.toStringTag:void 0;function Hf(t){return t==null?t===void 0?dQ:hQ:oT&&oT in Object(t)?lQ(t):fQ(t)}function ll(t){return t!=null&&typeof t=="object"}var su=Array.isArray;function yc(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function yI(t){return t}var pQ="[object AsyncFunction]",mQ="[object Function]",gQ="[object GeneratorFunction]",yQ="[object Proxy]";function yE(t){if(!yc(t))return!1;var e=Hf(t);return e==mQ||e==gQ||e==pQ||e==yQ}var ub=Ao["__core-js_shared__"],lT=(function(){var t=/[^.]+$/.exec(ub&&ub.keys&&ub.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function vQ(t){return!!lT&&lT in t}var bQ=Function.prototype,wQ=bQ.toString;function hu(t){if(t!=null){try{return wQ.call(t)}catch{}try{return t+""}catch{}}return""}var EQ=/[\\^$.*+?()[\]{}|]/g,SQ=/^\[object .+?Constructor\]$/,xQ=Function.prototype,_Q=Object.prototype,AQ=xQ.toString,CQ=_Q.hasOwnProperty,NQ=RegExp("^"+AQ.call(CQ).replace(EQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function TQ(t){if(!yc(t)||vQ(t))return!1;var e=yE(t)?NQ:SQ;return e.test(hu(t))}function OQ(t,e){return t?.[e]}function du(t,e){var n=OQ(t,e);return TQ(n)?n:void 0}var Lw=du(Ao,"WeakMap"),cT=Object.create,RQ=(function(){function t(){}return function(e){if(!yc(e))return{};if(cT)return cT(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function IQ(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function MQ(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var DQ=800,LQ=16,kQ=Date.now;function jQ(t){var e=0,n=0;return function(){var r=kQ(),i=LQ-(r-n);if(n=r,i>0){if(++e>=DQ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function PQ(t){return function(){return t}}var d1=(function(){try{var t=du(Object,"defineProperty");return t({},"",{}),t}catch{}})(),BQ=d1?function(t,e){return d1(t,"toString",{configurable:!0,enumerable:!1,value:PQ(e),writable:!0})}:yI,UQ=jQ(BQ);function zQ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var FQ=9007199254740991,qQ=/^(?:0|[1-9]\d*)$/;function vI(t,e){var n=typeof t;return e=e??FQ,!!e&&(n=="number"||n!="symbol"&&qQ.test(t))&&t>-1&&t%1==0&&t<e}function vE(t,e,n){e=="__proto__"&&d1?d1(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ap(t,e){return t===e||t!==t&&e!==e}var $Q=Object.prototype,VQ=$Q.hasOwnProperty;function bI(t,e,n){var r=t[e];(!(VQ.call(t,e)&&ap(r,n))||n===void 0&&!(e in t))&&vE(t,e,n)}function HQ(t,e,n,r){var i=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var p=e[a],g=void 0;g===void 0&&(g=t[p]),i?vE(n,p,g):bI(n,p,g)}return n}var uT=Math.max;function KQ(t,e,n){return e=uT(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=uT(r.length-e,0),u=Array(a);++i<a;)u[i]=r[e+i];i=-1;for(var p=Array(e+1);++i<e;)p[i]=r[i];return p[e]=n(u),IQ(t,this,p)}}function GQ(t,e){return UQ(KQ(t,e,yI),t+"")}var YQ=9007199254740991;function wI(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=YQ}function G1(t){return t!=null&&wI(t.length)&&!yE(t)}function WQ(t,e,n){if(!yc(n))return!1;var r=typeof e;return(r=="number"?G1(n)&&vI(e,n.length):r=="string"&&e in n)?ap(n[e],t):!1}function XQ(t){return GQ(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,u&&WQ(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var p=n[r];p&&t(e,p,r,a)}return e})}var QQ=Object.prototype;function bE(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||QQ;return t===n}function ZQ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var JQ="[object Arguments]";function fT(t){return ll(t)&&Hf(t)==JQ}var EI=Object.prototype,eZ=EI.hasOwnProperty,tZ=EI.propertyIsEnumerable,kw=fT((function(){return arguments})())?fT:function(t){return ll(t)&&eZ.call(t,"callee")&&!tZ.call(t,"callee")};function nZ(){return!1}var SI=typeof Ws=="object"&&Ws&&!Ws.nodeType&&Ws,hT=SI&&typeof Xs=="object"&&Xs&&!Xs.nodeType&&Xs,rZ=hT&&hT.exports===SI,dT=rZ?Ao.Buffer:void 0,iZ=dT?dT.isBuffer:void 0,Rd=iZ||nZ,sZ="[object Arguments]",aZ="[object Array]",oZ="[object Boolean]",lZ="[object Date]",cZ="[object Error]",uZ="[object Function]",fZ="[object Map]",hZ="[object Number]",dZ="[object Object]",pZ="[object RegExp]",mZ="[object Set]",gZ="[object String]",yZ="[object WeakMap]",vZ="[object ArrayBuffer]",bZ="[object DataView]",wZ="[object Float32Array]",EZ="[object Float64Array]",SZ="[object Int8Array]",xZ="[object Int16Array]",_Z="[object Int32Array]",AZ="[object Uint8Array]",CZ="[object Uint8ClampedArray]",NZ="[object Uint16Array]",TZ="[object Uint32Array]",$r={};$r[wZ]=$r[EZ]=$r[SZ]=$r[xZ]=$r[_Z]=$r[AZ]=$r[CZ]=$r[NZ]=$r[TZ]=!0;$r[sZ]=$r[aZ]=$r[vZ]=$r[oZ]=$r[bZ]=$r[lZ]=$r[cZ]=$r[uZ]=$r[fZ]=$r[hZ]=$r[dZ]=$r[pZ]=$r[mZ]=$r[gZ]=$r[yZ]=!1;function OZ(t){return ll(t)&&wI(t.length)&&!!$r[Hf(t)]}function wE(t){return function(e){return t(e)}}var xI=typeof Ws=="object"&&Ws&&!Ws.nodeType&&Ws,ad=xI&&typeof Xs=="object"&&Xs&&!Xs.nodeType&&Xs,RZ=ad&&ad.exports===xI,fb=RZ&&mI.process,Lf=(function(){try{var t=ad&&ad.require&&ad.require("util").types;return t||fb&&fb.binding&&fb.binding("util")}catch{}})(),pT=Lf&&Lf.isTypedArray,EE=pT?wE(pT):OZ,IZ=Object.prototype,MZ=IZ.hasOwnProperty;function _I(t,e){var n=su(t),r=!n&&kw(t),i=!n&&!r&&Rd(t),a=!n&&!r&&!i&&EE(t),u=n||r||i||a,p=u?ZQ(t.length,String):[],g=p.length;for(var y in t)(e||MZ.call(t,y))&&!(u&&(y=="length"||i&&(y=="offset"||y=="parent")||a&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||vI(y,g)))&&p.push(y);return p}function AI(t,e){return function(n){return t(e(n))}}var DZ=AI(Object.keys,Object),LZ=Object.prototype,kZ=LZ.hasOwnProperty;function jZ(t){if(!bE(t))return DZ(t);var e=[];for(var n in Object(t))kZ.call(t,n)&&n!="constructor"&&e.push(n);return e}function PZ(t){return G1(t)?_I(t):jZ(t)}function BZ(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var UZ=Object.prototype,zZ=UZ.hasOwnProperty;function FZ(t){if(!yc(t))return BZ(t);var e=bE(t),n=[];for(var r in t)r=="constructor"&&(e||!zZ.call(t,r))||n.push(r);return n}function CI(t){return G1(t)?_I(t,!0):FZ(t)}var Id=du(Object,"create");function qZ(){this.__data__=Id?Id(null):{},this.size=0}function $Z(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var VZ="__lodash_hash_undefined__",HZ=Object.prototype,KZ=HZ.hasOwnProperty;function GZ(t){var e=this.__data__;if(Id){var n=e[t];return n===VZ?void 0:n}return KZ.call(e,t)?e[t]:void 0}var YZ=Object.prototype,WZ=YZ.hasOwnProperty;function XZ(t){var e=this.__data__;return Id?e[t]!==void 0:WZ.call(e,t)}var QZ="__lodash_hash_undefined__";function ZZ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Id&&e===void 0?QZ:e,this}function au(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}au.prototype.clear=qZ;au.prototype.delete=$Z;au.prototype.get=GZ;au.prototype.has=XZ;au.prototype.set=ZZ;function JZ(){this.__data__=[],this.size=0}function Y1(t,e){for(var n=t.length;n--;)if(ap(t[n][0],e))return n;return-1}var eJ=Array.prototype,tJ=eJ.splice;function nJ(t){var e=this.__data__,n=Y1(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():tJ.call(e,n,1),--this.size,!0}function rJ(t){var e=this.__data__,n=Y1(e,t);return n<0?void 0:e[n][1]}function iJ(t){return Y1(this.__data__,t)>-1}function sJ(t,e){var n=this.__data__,r=Y1(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function hl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hl.prototype.clear=JZ;hl.prototype.delete=nJ;hl.prototype.get=rJ;hl.prototype.has=iJ;hl.prototype.set=sJ;var Md=du(Ao,"Map");function aJ(){this.size=0,this.__data__={hash:new au,map:new(Md||hl),string:new au}}function oJ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function W1(t,e){var n=t.__data__;return oJ(e)?n[typeof e=="string"?"string":"hash"]:n.map}function lJ(t){var e=W1(this,t).delete(t);return this.size-=e?1:0,e}function cJ(t){return W1(this,t).get(t)}function uJ(t){return W1(this,t).has(t)}function fJ(t,e){var n=W1(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function pu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pu.prototype.clear=aJ;pu.prototype.delete=lJ;pu.prototype.get=cJ;pu.prototype.has=uJ;pu.prototype.set=fJ;function hJ(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var NI=AI(Object.getPrototypeOf,Object),dJ="[object Object]",pJ=Function.prototype,mJ=Object.prototype,TI=pJ.toString,gJ=mJ.hasOwnProperty,yJ=TI.call(Object);function vJ(t){if(!ll(t)||Hf(t)!=dJ)return!1;var e=NI(t);if(e===null)return!0;var n=gJ.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&TI.call(n)==yJ}function bJ(){this.__data__=new hl,this.size=0}function wJ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function EJ(t){return this.__data__.get(t)}function SJ(t){return this.__data__.has(t)}var xJ=200;function _J(t,e){var n=this.__data__;if(n instanceof hl){var r=n.__data__;if(!Md||r.length<xJ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new pu(r)}return n.set(t,e),this.size=n.size,this}function go(t){var e=this.__data__=new hl(t);this.size=e.size}go.prototype.clear=bJ;go.prototype.delete=wJ;go.prototype.get=EJ;go.prototype.has=SJ;go.prototype.set=_J;var OI=typeof Ws=="object"&&Ws&&!Ws.nodeType&&Ws,mT=OI&&typeof Xs=="object"&&Xs&&!Xs.nodeType&&Xs,AJ=mT&&mT.exports===OI,gT=AJ?Ao.Buffer:void 0,yT=gT?gT.allocUnsafe:void 0;function RI(t,e){if(e)return t.slice();var n=t.length,r=yT?yT(n):new t.constructor(n);return t.copy(r),r}function CJ(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var u=t[n];e(u,n,t)&&(a[i++]=u)}return a}function NJ(){return[]}var TJ=Object.prototype,OJ=TJ.propertyIsEnumerable,vT=Object.getOwnPropertySymbols,RJ=vT?function(t){return t==null?[]:(t=Object(t),CJ(vT(t),function(e){return OJ.call(t,e)}))}:NJ;function IJ(t,e,n){var r=e(t);return su(t)?r:hJ(r,n(t))}function jw(t){return IJ(t,PZ,RJ)}var Pw=du(Ao,"DataView"),Bw=du(Ao,"Promise"),Uw=du(Ao,"Set"),bT="[object Map]",MJ="[object Object]",wT="[object Promise]",ET="[object Set]",ST="[object WeakMap]",xT="[object DataView]",DJ=hu(Pw),LJ=hu(Md),kJ=hu(Bw),jJ=hu(Uw),PJ=hu(Lw),$a=Hf;(Pw&&$a(new Pw(new ArrayBuffer(1)))!=xT||Md&&$a(new Md)!=bT||Bw&&$a(Bw.resolve())!=wT||Uw&&$a(new Uw)!=ET||Lw&&$a(new Lw)!=ST)&&($a=function(t){var e=Hf(t),n=e==MJ?t.constructor:void 0,r=n?hu(n):"";if(r)switch(r){case DJ:return xT;case LJ:return bT;case kJ:return wT;case jJ:return ET;case PJ:return ST}return e});var BJ=Object.prototype,UJ=BJ.hasOwnProperty;function zJ(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&UJ.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var p1=Ao.Uint8Array;function SE(t){var e=new t.constructor(t.byteLength);return new p1(e).set(new p1(t)),e}function FJ(t,e){var n=SE(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var qJ=/\w*$/;function $J(t){var e=new t.constructor(t.source,qJ.exec(t));return e.lastIndex=t.lastIndex,e}var _T=hc?hc.prototype:void 0,AT=_T?_T.valueOf:void 0;function VJ(t){return AT?Object(AT.call(t)):{}}function II(t,e){var n=e?SE(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var HJ="[object Boolean]",KJ="[object Date]",GJ="[object Map]",YJ="[object Number]",WJ="[object RegExp]",XJ="[object Set]",QJ="[object String]",ZJ="[object Symbol]",JJ="[object ArrayBuffer]",eee="[object DataView]",tee="[object Float32Array]",nee="[object Float64Array]",ree="[object Int8Array]",iee="[object Int16Array]",see="[object Int32Array]",aee="[object Uint8Array]",oee="[object Uint8ClampedArray]",lee="[object Uint16Array]",cee="[object Uint32Array]";function uee(t,e,n){var r=t.constructor;switch(e){case JJ:return SE(t);case HJ:case KJ:return new r(+t);case eee:return FJ(t);case tee:case nee:case ree:case iee:case see:case aee:case oee:case lee:case cee:return II(t,n);case GJ:return new r;case YJ:case QJ:return new r(t);case WJ:return $J(t);case XJ:return new r;case ZJ:return VJ(t)}}function MI(t){return typeof t.constructor=="function"&&!bE(t)?RQ(NI(t)):{}}var fee="[object Map]";function hee(t){return ll(t)&&$a(t)==fee}var CT=Lf&&Lf.isMap,dee=CT?wE(CT):hee,pee="[object Set]";function mee(t){return ll(t)&&$a(t)==pee}var NT=Lf&&Lf.isSet,gee=NT?wE(NT):mee,yee=1,DI="[object Arguments]",vee="[object Array]",bee="[object Boolean]",wee="[object Date]",Eee="[object Error]",LI="[object Function]",See="[object GeneratorFunction]",xee="[object Map]",_ee="[object Number]",kI="[object Object]",Aee="[object RegExp]",Cee="[object Set]",Nee="[object String]",Tee="[object Symbol]",Oee="[object WeakMap]",Ree="[object ArrayBuffer]",Iee="[object DataView]",Mee="[object Float32Array]",Dee="[object Float64Array]",Lee="[object Int8Array]",kee="[object Int16Array]",jee="[object Int32Array]",Pee="[object Uint8Array]",Bee="[object Uint8ClampedArray]",Uee="[object Uint16Array]",zee="[object Uint32Array]",kr={};kr[DI]=kr[vee]=kr[Ree]=kr[Iee]=kr[bee]=kr[wee]=kr[Mee]=kr[Dee]=kr[Lee]=kr[kee]=kr[jee]=kr[xee]=kr[_ee]=kr[kI]=kr[Aee]=kr[Cee]=kr[Nee]=kr[Tee]=kr[Pee]=kr[Bee]=kr[Uee]=kr[zee]=!0;kr[Eee]=kr[LI]=kr[Oee]=!1;function L0(t,e,n,r,i,a){var u,p=e&yee;if(u!==void 0)return u;if(!yc(t))return t;var g=su(t);if(g)u=zJ(t);else{var y=$a(t),w=y==LI||y==See;if(Rd(t))return RI(t,p);if(y==kI||y==DI||w&&!i)u=w?{}:MI(t);else{if(!kr[y])return i?t:{};u=uee(t,y,p)}}a||(a=new go);var S=a.get(t);if(S)return S;a.set(t,u),gee(t)?t.forEach(function(N){u.add(L0(N,e,n,N,t,a))}):dee(t)&&t.forEach(function(N,R){u.set(R,L0(N,e,n,R,t,a))});var _=jw,C=g?void 0:_(t);return zQ(C||t,function(N,R){C&&(R=N,N=t[R]),bI(u,R,L0(N,e,n,R,t,a))}),u}var Fee=1,qee=4;function bf(t){return L0(t,Fee|qee)}var $ee="__lodash_hash_undefined__";function Vee(t){return this.__data__.set(t,$ee),this}function Hee(t){return this.__data__.has(t)}function m1(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new pu;++e<n;)this.add(t[e])}m1.prototype.add=m1.prototype.push=Vee;m1.prototype.has=Hee;function Kee(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Gee(t,e){return t.has(e)}var Yee=1,Wee=2;function jI(t,e,n,r,i,a){var u=n&Yee,p=t.length,g=e.length;if(p!=g&&!(u&&g>p))return!1;var y=a.get(t),w=a.get(e);if(y&&w)return y==e&&w==t;var S=-1,_=!0,C=n&Wee?new m1:void 0;for(a.set(t,e),a.set(e,t);++S<p;){var N=t[S],R=e[S];if(r)var M=u?r(R,N,S,e,t,a):r(N,R,S,t,e,a);if(M!==void 0){if(M)continue;_=!1;break}if(C){if(!Kee(e,function(L,k){if(!Gee(C,k)&&(N===L||i(N,L,n,r,a)))return C.push(k)})){_=!1;break}}else if(!(N===R||i(N,R,n,r,a))){_=!1;break}}return a.delete(t),a.delete(e),_}function Xee(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Qee(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Zee=1,Jee=2,ete="[object Boolean]",tte="[object Date]",nte="[object Error]",rte="[object Map]",ite="[object Number]",ste="[object RegExp]",ate="[object Set]",ote="[object String]",lte="[object Symbol]",cte="[object ArrayBuffer]",ute="[object DataView]",TT=hc?hc.prototype:void 0,hb=TT?TT.valueOf:void 0;function fte(t,e,n,r,i,a,u){switch(n){case ute:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case cte:return!(t.byteLength!=e.byteLength||!a(new p1(t),new p1(e)));case ete:case tte:case ite:return ap(+t,+e);case nte:return t.name==e.name&&t.message==e.message;case ste:case ote:return t==e+"";case rte:var p=Xee;case ate:var g=r&Zee;if(p||(p=Qee),t.size!=e.size&&!g)return!1;var y=u.get(t);if(y)return y==e;r|=Jee,u.set(t,e);var w=jI(p(t),p(e),r,i,a,u);return u.delete(t),w;case lte:if(hb)return hb.call(t)==hb.call(e)}return!1}var hte=1,dte=Object.prototype,pte=dte.hasOwnProperty;function mte(t,e,n,r,i,a){var u=n&hte,p=jw(t),g=p.length,y=jw(e),w=y.length;if(g!=w&&!u)return!1;for(var S=g;S--;){var _=p[S];if(!(u?_ in e:pte.call(e,_)))return!1}var C=a.get(t),N=a.get(e);if(C&&N)return C==e&&N==t;var R=!0;a.set(t,e),a.set(e,t);for(var M=u;++S<g;){_=p[S];var L=t[_],k=e[_];if(r)var j=u?r(k,L,_,e,t,a):r(L,k,_,t,e,a);if(!(j===void 0?L===k||i(L,k,n,r,a):j)){R=!1;break}M||(M=_=="constructor")}if(R&&!M){var $=t.constructor,U=e.constructor;$!=U&&"constructor"in t&&"constructor"in e&&!(typeof $=="function"&&$ instanceof $&&typeof U=="function"&&U instanceof U)&&(R=!1)}return a.delete(t),a.delete(e),R}var gte=1,OT="[object Arguments]",RT="[object Array]",l0="[object Object]",yte=Object.prototype,IT=yte.hasOwnProperty;function vte(t,e,n,r,i,a){var u=su(t),p=su(e),g=u?RT:$a(t),y=p?RT:$a(e);g=g==OT?l0:g,y=y==OT?l0:y;var w=g==l0,S=y==l0,_=g==y;if(_&&Rd(t)){if(!Rd(e))return!1;u=!0,w=!1}if(_&&!w)return a||(a=new go),u||EE(t)?jI(t,e,n,r,i,a):fte(t,e,g,n,r,i,a);if(!(n&gte)){var C=w&&IT.call(t,"__wrapped__"),N=S&&IT.call(e,"__wrapped__");if(C||N){var R=C?t.value():t,M=N?e.value():e;return a||(a=new go),i(R,M,n,r,a)}}return _?(a||(a=new go),mte(t,e,n,r,i,a)):!1}function PI(t,e,n,r,i){return t===e?!0:t==null||e==null||!ll(t)&&!ll(e)?t!==t&&e!==e:vte(t,e,n,r,PI,i)}function bte(t){return function(e,n,r){for(var i=-1,a=Object(e),u=r(e),p=u.length;p--;){var g=u[++i];if(n(a[g],g,a)===!1)break}return e}}var wte=bte();function zw(t,e,n){(n!==void 0&&!ap(t[e],n)||n===void 0&&!(e in t))&&vE(t,e,n)}function Ete(t){return ll(t)&&G1(t)}function Fw(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Ste(t){return HQ(t,CI(t))}function xte(t,e,n,r,i,a,u){var p=Fw(t,n),g=Fw(e,n),y=u.get(g);if(y){zw(t,n,y);return}var w=a?a(p,g,n+"",t,e,u):void 0,S=w===void 0;if(S){var _=su(g),C=!_&&Rd(g),N=!_&&!C&&EE(g);w=g,_||C||N?su(p)?w=p:Ete(p)?w=MQ(p):C?(S=!1,w=RI(g,!0)):N?(S=!1,w=II(g,!0)):w=[]:vJ(g)||kw(g)?(w=p,kw(p)?w=Ste(p):(!yc(p)||yE(p))&&(w=MI(g))):S=!1}S&&(u.set(g,w),i(w,g,r,a,u),u.delete(g)),zw(t,n,w)}function BI(t,e,n,r,i){t!==e&&wte(e,function(a,u){if(i||(i=new go),yc(a))xte(t,e,u,n,BI,r,i);else{var p=r?r(Fw(t,u),a,u+"",t,e,i):void 0;p===void 0&&(p=a),zw(t,u,p)}},CI)}function Ql(t,e){return PI(t,e)}var ic=XQ(function(t,e,n){BI(t,e,n)}),zt=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(zt||{});class Eo{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const i=zt.TYPE&zt.ATTRIBUTE;this.scope=r.scope!=null?r.scope&zt.LEVEL|i:zt.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class wf extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const UI=class qw{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const i=this.query(n);if(i==null)throw new wf(`Unable to create ${n} blot`);const a=i,u=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:a.create(r),p=new a(e,u,r);return qw.blots.set(p.domNode,p),p}find(e,n=!1){return qw.find(e,n)}query(e,n=zt.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&zt.LEVEL&zt.BLOCK?r=this.types.block:e&zt.LEVEL&zt.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&zt.LEVEL&r.scope&&n&zt.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,i="attrName"in n;if(!r&&!i)throw new wf("Invalid definition");if(r&&n.blotName==="abstract")throw new wf("Cannot register abstract class");const a=r?n.blotName:i?n.attrName:void 0;return this.types[a]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(u=>u.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(u=>{(this.tags[u]==null||n.className==null)&&(this.tags[u]=n)}))),n})}};UI.blots=new WeakMap;let kf=UI;function MT(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class _te extends Eo{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){MT(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(MT(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const Qa=_te;function db(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class Ate extends Eo{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[db(this.keyName)]=n,!0):!1}remove(e){e.style[db(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[db(this.keyName)];return this.canAdd(e,n)?n:""}}const vc=Ate;class Cte{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=kf.find(this.domNode);if(e==null)return;const n=Eo.keys(this.domNode),r=Qa.keys(this.domNode),i=vc.keys(this.domNode);n.concat(r).concat(i).forEach(a=>{const u=e.scroll.query(a,zt.ATTRIBUTE);u instanceof Eo&&(this.attributes[u.attrName]=u)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const X1=Cte,zI=class{constructor(e,n){this.scroll=e,this.domNode=n,kf.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new wf("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),kf.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,i){const a=this.isolate(e,n);if(this.scroll.query(r,zt.BLOT)!=null&&i)a.wrap(r,i);else if(this.scroll.query(r,zt.ATTRIBUTE)!=null){const u=this.scroll.create(this.statics.scope);a.wrap(u),u.format(r,i)}}insertAt(e,n,r){const i=r==null?this.scroll.create("text",n):this.scroll.create(n,r),a=this.split(e);this.parent.insertBefore(i,a||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new wf(`Cannot wrap ${e}`);return r.appendChild(this),r}};zI.blotName="abstract";let FI=zI;const qI=class extends FI{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};qI.scope=zt.INLINE_BLOT;let Nte=qI;const rs=Nte;class Tte{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),i=0;for(;r;){if(r===e)return i;i+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let i=r();for(;i;){const a=i.length();if(e<a||n&&e===a&&(i.next==null||i.next.length()!==0))return[i,e];e-=a,i=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[i,a]=this.find(e);let u=e-a;const p=this.iterator(i);let g=p();for(;g&&u<e+n;){const y=g.length();e>u?r(g,e-u,Math.min(n,u+y-e)):r(g,0,Math.min(y,e+n-u)),u+=y,g=p()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let i=r();for(;i;)n=e(n,i),i=r();return n}}function DT(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(zt.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const $I=class Gl extends FI{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Gl.uiClass&&this.uiNode.classList.add(Gl.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Tte,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=DT(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof wf)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,i,a)=>{r.deleteAt(i,a)})}descendant(e,n=0){const[r,i]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof Gl?r.descendant(e,i):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let i=[],a=r;return this.children.forEachAt(n,r,(u,p,g)=>{(e.blotName==null&&e(u)||e.blotName!=null&&u instanceof e)&&i.push(u),u instanceof Gl&&(i=i.concat(u.descendants(e,p,a))),a-=g}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===zt.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof Gl?n.unwrap():n.remove())})}formatAt(e,n,r,i){this.children.forEachAt(e,n,(a,u,p)=>{a.formatAt(u,p,r,i)})}insertAt(e,n,r){const[i,a]=this.children.find(e);if(i)i.insertAt(a,n,r);else{const u=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(u)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,i]=this.children.find(e,n),a=[[this,e]];return r instanceof Gl?a.concat(r.path(i,n)):(r!=null&&a.push([r,i]),a)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof Gl&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,a,u)=>{const p=i.split(a,n);p!=null&&r.appendChild(p)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],i=[];e.forEach(a=>{a.target===this.domNode&&a.type==="childList"&&(r.push(...a.addedNodes),i.push(...a.removedNodes))}),i.forEach(a=>{if(a.parentNode!=null&&a.tagName!=="IFRAME"&&document.body.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const u=this.scroll.find(a);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===this.domNode)&&u.detach()}),r.filter(a=>a.parentNode===this.domNode&&a!==this.uiNode).sort((a,u)=>a===u?0:a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(a=>{let u=null;a.nextSibling!=null&&(u=this.scroll.find(a.nextSibling));const p=DT(a,this.scroll);(p.next!==u||p.next==null)&&(p.parent!=null&&p.parent.removeChild(this),this.insertBefore(p,u||void 0))}),this.enforceAllowedChildren()}};$I.uiClass="";let Ote=$I;const Ka=Ote;function Rte(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const Ju=class ef extends Ka{static create(e){return super.create(e)}static formats(e,n){const r=n.query(ef.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new X1(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof ef||(r=r.wrap(ef.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,zt.INLINE);if(r==null)return;r instanceof Eo?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.formats()[r]!=null||this.scroll.query(r,zt.ATTRIBUTE)?this.isolate(e,n).format(r,i):super.formatAt(e,n,r,i)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof ef&&r.prev===this&&Rte(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof ef&&this.attributes.move(r),r}};Ju.allowedChildren=[Ju,rs],Ju.blotName="inline",Ju.scope=zt.INLINE_BLOT,Ju.tagName="SPAN";let Ite=Ju;const xE=Ite,tf=class $w extends Ka{static create(e){return super.create(e)}static formats(e,n){const r=n.query($w.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new X1(this.domNode)}format(e,n){const r=this.scroll.query(e,zt.BLOCK);r!=null&&(r instanceof Eo?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith($w.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.scroll.query(r,zt.BLOCK)!=null?this.format(r,i):super.formatAt(e,n,r,i)}insertAt(e,n,r){if(r==null||this.scroll.query(n,zt.INLINE)!=null)super.insertAt(e,n,r);else{const i=this.split(e);if(i!=null){const a=this.scroll.create(n,r);i.parent.insertBefore(a,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};tf.blotName="block",tf.scope=zt.BLOCK_BLOT,tf.tagName="P",tf.allowedChildren=[xE,tf,rs];let Mte=tf;const Dd=Mte,Vw=class extends Ka{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Vw.blotName="container",Vw.scope=zt.BLOCK_BLOT;let Dte=Vw;const Q1=Dte;class Lte extends rs{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,i){e===0&&n===this.length()?this.format(r,i):super.formatAt(e,n,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const ra=Lte,kte={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},jte=100,nf=class extends Ka{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,kte),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=zt.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,i){this.update(),super.formatAt(e,n,r,i)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const a=(g,y=!0)=>{g==null||g===this||g.domNode.parentNode!=null&&(r.has(g.domNode)||r.set(g.domNode,[]),y&&a(g.parent))},u=g=>{r.has(g.domNode)&&(g instanceof Ka&&g.children.forEach(u),r.delete(g.domNode),g.optimize(n))};let p=e;for(let g=0;p.length>0;g+=1){if(g>=jte)throw new Error("[Parchment] Maximum optimize iterations reached");for(p.forEach(y=>{const w=this.find(y.target,!0);w!=null&&(w.domNode===y.target&&(y.type==="childList"?(a(this.find(y.previousSibling,!1)),Array.from(y.addedNodes).forEach(S=>{const _=this.find(S,!1);a(_,!1),_ instanceof Ka&&_.children.forEach(C=>{a(C,!1)})})):y.type==="attributes"&&a(w.prev)),a(w))}),this.children.forEach(u),p=Array.from(this.observer.takeRecords()),i=p.slice();i.length>0;)e.push(i.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const a=this.find(i.target,!0);return a==null?null:r.has(a.domNode)?(r.get(a.domNode).push(i),null):(r.set(a.domNode,[i]),a)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};nf.blotName="scroll",nf.defaultChild=Dd,nf.allowedChildren=[Dd,Q1],nf.scope=zt.BLOCK_BLOT,nf.tagName="DIV";let Pte=nf;const _E=Pte,Hw=class VI extends rs{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof VI&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Hw.blotName="text",Hw.scope=zt.INLINE_BLOT;let Bte=Hw;const g1=Bte,Ute=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Eo,AttributorStore:X1,BlockBlot:Dd,ClassAttributor:Qa,ContainerBlot:Q1,EmbedBlot:ra,InlineBlot:xE,LeafBlot:rs,ParentBlot:Ka,Registry:kf,Scope:zt,ScrollBlot:_E,StyleAttributor:vc,TextBlot:g1},Symbol.toStringTag,{value:"Module"}));var c0={exports:{}},pb,LT;function zte(){if(LT)return pb;LT=1;var t=-1,e=1,n=0;function r(G,ce,se,Ee,ue){if(G===ce)return G?[[n,G]]:[];if(se!=null){var ee=le(G,ce,se);if(ee)return ee}var de=p(G,ce),we=G.substring(0,de);G=G.substring(de),ce=ce.substring(de),de=y(G,ce);var Oe=G.substring(G.length-de);G=G.substring(0,G.length-de),ce=ce.substring(0,ce.length-de);var pe=i(G,ce);return we&&pe.unshift([n,we]),Oe&&pe.push([n,Oe]),k(pe,ue),Ee&&S(pe),pe}function i(G,ce){var se;if(!G)return[[e,ce]];if(!ce)return[[t,G]];var Ee=G.length>ce.length?G:ce,ue=G.length>ce.length?ce:G,ee=Ee.indexOf(ue);if(ee!==-1)return se=[[e,Ee.substring(0,ee)],[n,ue],[e,Ee.substring(ee+ue.length)]],G.length>ce.length&&(se[0][0]=se[2][0]=t),se;if(ue.length===1)return[[t,G],[e,ce]];var de=w(G,ce);if(de){var we=de[0],Oe=de[1],pe=de[2],K=de[3],oe=de[4],ae=r(we,pe),Y=r(Oe,K);return ae.concat([[n,oe]],Y)}return a(G,ce)}function a(G,ce){for(var se=G.length,Ee=ce.length,ue=Math.ceil((se+Ee)/2),ee=ue,de=2*ue,we=new Array(de),Oe=new Array(de),pe=0;pe<de;pe++)we[pe]=-1,Oe[pe]=-1;we[ee+1]=0,Oe[ee+1]=0;for(var K=se-Ee,oe=K%2!==0,ae=0,Y=0,ie=0,be=0,Ye=0;Ye<ue;Ye++){for(var Ve=-Ye+ae;Ve<=Ye-Y;Ve+=2){var $e=ee+Ve,bt;Ve===-Ye||Ve!==Ye&&we[$e-1]<we[$e+1]?bt=we[$e+1]:bt=we[$e-1]+1;for(var xe=bt-Ve;bt<se&&xe<Ee&&G.charAt(bt)===ce.charAt(xe);)bt++,xe++;if(we[$e]=bt,bt>se)Y+=2;else if(xe>Ee)ae+=2;else if(oe){var Se=ee+K-Ve;if(Se>=0&&Se<de&&Oe[Se]!==-1){var Me=se-Oe[Se];if(bt>=Me)return u(G,ce,bt,xe)}}}for(var Qe=-Ye+ie;Qe<=Ye-be;Qe+=2){var Se=ee+Qe,Me;Qe===-Ye||Qe!==Ye&&Oe[Se-1]<Oe[Se+1]?Me=Oe[Se+1]:Me=Oe[Se-1]+1;for(var ct=Me-Qe;Me<se&&ct<Ee&&G.charAt(se-Me-1)===ce.charAt(Ee-ct-1);)Me++,ct++;if(Oe[Se]=Me,Me>se)be+=2;else if(ct>Ee)ie+=2;else if(!oe){var $e=ee+K-Qe;if($e>=0&&$e<de&&we[$e]!==-1){var bt=we[$e],xe=ee+bt-$e;if(Me=se-Me,bt>=Me)return u(G,ce,bt,xe)}}}}return[[t,G],[e,ce]]}function u(G,ce,se,Ee){var ue=G.substring(0,se),ee=ce.substring(0,Ee),de=G.substring(se),we=ce.substring(Ee),Oe=r(ue,ee),pe=r(de,we);return Oe.concat(pe)}function p(G,ce){if(!G||!ce||G.charAt(0)!==ce.charAt(0))return 0;for(var se=0,Ee=Math.min(G.length,ce.length),ue=Ee,ee=0;se<ue;)G.substring(ee,ue)==ce.substring(ee,ue)?(se=ue,ee=se):Ee=ue,ue=Math.floor((Ee-se)/2+se);return j(G.charCodeAt(ue-1))&&ue--,ue}function g(G,ce){var se=G.length,Ee=ce.length;if(se==0||Ee==0)return 0;se>Ee?G=G.substring(se-Ee):se<Ee&&(ce=ce.substring(0,se));var ue=Math.min(se,Ee);if(G==ce)return ue;for(var ee=0,de=1;;){var we=G.substring(ue-de),Oe=ce.indexOf(we);if(Oe==-1)return ee;de+=Oe,(Oe==0||G.substring(ue-de)==ce.substring(0,de))&&(ee=de,de++)}}function y(G,ce){if(!G||!ce||G.slice(-1)!==ce.slice(-1))return 0;for(var se=0,Ee=Math.min(G.length,ce.length),ue=Ee,ee=0;se<ue;)G.substring(G.length-ue,G.length-ee)==ce.substring(ce.length-ue,ce.length-ee)?(se=ue,ee=se):Ee=ue,ue=Math.floor((Ee-se)/2+se);return $(G.charCodeAt(G.length-ue))&&ue--,ue}function w(G,ce){var se=G.length>ce.length?G:ce,Ee=G.length>ce.length?ce:G;if(se.length<4||Ee.length*2<se.length)return null;function ue(Y,ie,be){for(var Ye=Y.substring(be,be+Math.floor(Y.length/4)),Ve=-1,$e="",bt,xe,Se,Me;(Ve=ie.indexOf(Ye,Ve+1))!==-1;){var Qe=p(Y.substring(be),ie.substring(Ve)),ct=y(Y.substring(0,be),ie.substring(0,Ve));$e.length<ct+Qe&&($e=ie.substring(Ve-ct,Ve)+ie.substring(Ve,Ve+Qe),bt=Y.substring(0,be-ct),xe=Y.substring(be+Qe),Se=ie.substring(0,Ve-ct),Me=ie.substring(Ve+Qe))}return $e.length*2>=Y.length?[bt,xe,Se,Me,$e]:null}var ee=ue(se,Ee,Math.ceil(se.length/4)),de=ue(se,Ee,Math.ceil(se.length/2)),we;if(!ee&&!de)return null;de?ee?we=ee[4].length>de[4].length?ee:de:we=de:we=ee;var Oe,pe,K,oe;G.length>ce.length?(Oe=we[0],pe=we[1],K=we[2],oe=we[3]):(K=we[0],oe=we[1],Oe=we[2],pe=we[3]);var ae=we[4];return[Oe,pe,K,oe,ae]}function S(G){for(var ce=!1,se=[],Ee=0,ue=null,ee=0,de=0,we=0,Oe=0,pe=0;ee<G.length;)G[ee][0]==n?(se[Ee++]=ee,de=Oe,we=pe,Oe=0,pe=0,ue=G[ee][1]):(G[ee][0]==e?Oe+=G[ee][1].length:pe+=G[ee][1].length,ue&&ue.length<=Math.max(de,we)&&ue.length<=Math.max(Oe,pe)&&(G.splice(se[Ee-1],0,[t,ue]),G[se[Ee-1]+1][0]=e,Ee--,Ee--,ee=Ee>0?se[Ee-1]:-1,de=0,we=0,Oe=0,pe=0,ue=null,ce=!0)),ee++;for(ce&&k(G),L(G),ee=1;ee<G.length;){if(G[ee-1][0]==t&&G[ee][0]==e){var K=G[ee-1][1],oe=G[ee][1],ae=g(K,oe),Y=g(oe,K);ae>=Y?(ae>=K.length/2||ae>=oe.length/2)&&(G.splice(ee,0,[n,oe.substring(0,ae)]),G[ee-1][1]=K.substring(0,K.length-ae),G[ee+1][1]=oe.substring(ae),ee++):(Y>=K.length/2||Y>=oe.length/2)&&(G.splice(ee,0,[n,K.substring(0,Y)]),G[ee-1][0]=e,G[ee-1][1]=oe.substring(0,oe.length-Y),G[ee+1][0]=t,G[ee+1][1]=K.substring(Y),ee++),ee++}ee++}}var _=/[^a-zA-Z0-9]/,C=/\s/,N=/[\r\n]/,R=/\n\r?\n$/,M=/^\r?\n\r?\n/;function L(G){function ce(Y,ie){if(!Y||!ie)return 6;var be=Y.charAt(Y.length-1),Ye=ie.charAt(0),Ve=be.match(_),$e=Ye.match(_),bt=Ve&&be.match(C),xe=$e&&Ye.match(C),Se=bt&&be.match(N),Me=xe&&Ye.match(N),Qe=Se&&Y.match(R),ct=Me&&ie.match(M);return Qe||ct?5:Se||Me?4:Ve&&!bt&&xe?3:bt||xe?2:Ve||$e?1:0}for(var se=1;se<G.length-1;){if(G[se-1][0]==n&&G[se+1][0]==n){var Ee=G[se-1][1],ue=G[se][1],ee=G[se+1][1],de=y(Ee,ue);if(de){var we=ue.substring(ue.length-de);Ee=Ee.substring(0,Ee.length-de),ue=we+ue.substring(0,ue.length-de),ee=we+ee}for(var Oe=Ee,pe=ue,K=ee,oe=ce(Ee,ue)+ce(ue,ee);ue.charAt(0)===ee.charAt(0);){Ee+=ue.charAt(0),ue=ue.substring(1)+ee.charAt(0),ee=ee.substring(1);var ae=ce(Ee,ue)+ce(ue,ee);ae>=oe&&(oe=ae,Oe=Ee,pe=ue,K=ee)}G[se-1][1]!=Oe&&(Oe?G[se-1][1]=Oe:(G.splice(se-1,1),se--),G[se][1]=pe,K?G[se+1][1]=K:(G.splice(se+1,1),se--))}se++}}function k(G,ce){G.push([n,""]);for(var se=0,Ee=0,ue=0,ee="",de="",we;se<G.length;){if(se<G.length-1&&!G[se][1]){G.splice(se,1);continue}switch(G[se][0]){case e:ue++,de+=G[se][1],se++;break;case t:Ee++,ee+=G[se][1],se++;break;case n:var Oe=se-ue-Ee-1;if(ce){if(Oe>=0&&F(G[Oe][1])){var pe=G[Oe][1].slice(-1);if(G[Oe][1]=G[Oe][1].slice(0,-1),ee=pe+ee,de=pe+de,!G[Oe][1]){G.splice(Oe,1),se--;var K=Oe-1;G[K]&&G[K][0]===e&&(ue++,de=G[K][1]+de,K--),G[K]&&G[K][0]===t&&(Ee++,ee=G[K][1]+ee,K--),Oe=K}}if(U(G[se][1])){var pe=G[se][1].charAt(0);G[se][1]=G[se][1].slice(1),ee+=pe,de+=pe}}if(se<G.length-1&&!G[se][1]){G.splice(se,1);break}if(ee.length>0||de.length>0){ee.length>0&&de.length>0&&(we=p(de,ee),we!==0&&(Oe>=0?G[Oe][1]+=de.substring(0,we):(G.splice(0,0,[n,de.substring(0,we)]),se++),de=de.substring(we),ee=ee.substring(we)),we=y(de,ee),we!==0&&(G[se][1]=de.substring(de.length-we)+G[se][1],de=de.substring(0,de.length-we),ee=ee.substring(0,ee.length-we)));var oe=ue+Ee;ee.length===0&&de.length===0?(G.splice(se-oe,oe),se=se-oe):ee.length===0?(G.splice(se-oe,oe,[e,de]),se=se-oe+1):de.length===0?(G.splice(se-oe,oe,[t,ee]),se=se-oe+1):(G.splice(se-oe,oe,[t,ee],[e,de]),se=se-oe+2)}se!==0&&G[se-1][0]===n?(G[se-1][1]+=G[se][1],G.splice(se,1)):se++,ue=0,Ee=0,ee="",de="";break}}G[G.length-1][1]===""&&G.pop();var ae=!1;for(se=1;se<G.length-1;)G[se-1][0]===n&&G[se+1][0]===n&&(G[se][1].substring(G[se][1].length-G[se-1][1].length)===G[se-1][1]?(G[se][1]=G[se-1][1]+G[se][1].substring(0,G[se][1].length-G[se-1][1].length),G[se+1][1]=G[se-1][1]+G[se+1][1],G.splice(se-1,1),ae=!0):G[se][1].substring(0,G[se+1][1].length)==G[se+1][1]&&(G[se-1][1]+=G[se+1][1],G[se][1]=G[se][1].substring(G[se+1][1].length)+G[se+1][1],G.splice(se+1,1),ae=!0)),se++;ae&&k(G,ce)}function j(G){return G>=55296&&G<=56319}function $(G){return G>=56320&&G<=57343}function U(G){return $(G.charCodeAt(0))}function F(G){return j(G.charCodeAt(G.length-1))}function B(G){for(var ce=[],se=0;se<G.length;se++)G[se][1].length>0&&ce.push(G[se]);return ce}function Z(G,ce,se,Ee){return F(G)||U(Ee)?null:B([[n,G],[t,ce],[e,se],[n,Ee]])}function le(G,ce,se){var Ee=typeof se=="number"?{index:se,length:0}:se.oldRange,ue=typeof se=="number"?null:se.newRange,ee=G.length,de=ce.length;if(Ee.length===0&&(ue===null||ue.length===0)){var we=Ee.index,Oe=G.slice(0,we),pe=G.slice(we),K=ue?ue.index:null;e:{var oe=we+de-ee;if(K!==null&&K!==oe||oe<0||oe>de)break e;var ae=ce.slice(0,oe),Y=ce.slice(oe);if(Y!==pe)break e;var ie=Math.min(we,oe),be=Oe.slice(0,ie),Ye=ae.slice(0,ie);if(be!==Ye)break e;var Ve=Oe.slice(ie),$e=ae.slice(ie);return Z(be,Ve,$e,pe)}e:{if(K!==null&&K!==we)break e;var bt=we,ae=ce.slice(0,bt),Y=ce.slice(bt);if(ae!==Oe)break e;var xe=Math.min(ee-bt,de-bt),Se=pe.slice(pe.length-xe),Me=Y.slice(Y.length-xe);if(Se!==Me)break e;var Ve=pe.slice(0,pe.length-xe),$e=Y.slice(0,Y.length-xe);return Z(Oe,Ve,$e,Se)}}if(Ee.length>0&&ue&&ue.length===0)e:{var be=G.slice(0,Ee.index),Se=G.slice(Ee.index+Ee.length),ie=be.length,xe=Se.length;if(de<ie+xe)break e;var Ye=ce.slice(0,ie),Me=ce.slice(de-xe);if(be!==Ye||Se!==Me)break e;var Ve=G.slice(ie,ee-xe),$e=ce.slice(ie,de-xe);return Z(be,Ve,$e,Se)}return null}function Ne(G,ce,se,Ee){return r(G,ce,se,Ee,!0)}return Ne.INSERT=e,Ne.DELETE=t,Ne.EQUAL=n,pb=Ne,pb}var Vh={exports:{}};Vh.exports;var kT;function HI(){return kT||(kT=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",u="[object Array]",p="[object Boolean]",g="[object Date]",y="[object Error]",w="[object Function]",S="[object GeneratorFunction]",_="[object Map]",C="[object Number]",N="[object Object]",R="[object Promise]",M="[object RegExp]",L="[object Set]",k="[object String]",j="[object Symbol]",$="[object WeakMap]",U="[object ArrayBuffer]",F="[object DataView]",B="[object Float32Array]",Z="[object Float64Array]",le="[object Int8Array]",Ne="[object Int16Array]",G="[object Int32Array]",ce="[object Uint8Array]",se="[object Uint8ClampedArray]",Ee="[object Uint16Array]",ue="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,de=/\w*$/,we=/^\[object .+?Constructor\]$/,Oe=/^(?:0|[1-9]\d*)$/,pe={};pe[a]=pe[u]=pe[U]=pe[F]=pe[p]=pe[g]=pe[B]=pe[Z]=pe[le]=pe[Ne]=pe[G]=pe[_]=pe[C]=pe[N]=pe[M]=pe[L]=pe[k]=pe[j]=pe[ce]=pe[se]=pe[Ee]=pe[ue]=!0,pe[y]=pe[w]=pe[$]=!1;var K=typeof window=="object"&&window&&window.Object===Object&&window,oe=typeof self=="object"&&self&&self.Object===Object&&self,ae=K||oe||Function("return this")(),Y=e&&!e.nodeType&&e,ie=Y&&!0&&t&&!t.nodeType&&t,be=ie&&ie.exports===Y;function Ye(q,ne){return q.set(ne[0],ne[1]),q}function Ve(q,ne){return q.add(ne),q}function $e(q,ne){for(var Ce=-1,qe=q?q.length:0;++Ce<qe&&ne(q[Ce],Ce,q)!==!1;);return q}function bt(q,ne){for(var Ce=-1,qe=ne.length,kt=q.length;++Ce<qe;)q[kt+Ce]=ne[Ce];return q}function xe(q,ne,Ce,qe){for(var kt=-1,wt=q?q.length:0;++kt<wt;)Ce=ne(Ce,q[kt],kt,q);return Ce}function Se(q,ne){for(var Ce=-1,qe=Array(q);++Ce<q;)qe[Ce]=ne(Ce);return qe}function Me(q,ne){return q?.[ne]}function Qe(q){var ne=!1;if(q!=null&&typeof q.toString!="function")try{ne=!!(q+"")}catch{}return ne}function ct(q){var ne=-1,Ce=Array(q.size);return q.forEach(function(qe,kt){Ce[++ne]=[kt,qe]}),Ce}function Mt(q,ne){return function(Ce){return q(ne(Ce))}}function ln(q){var ne=-1,Ce=Array(q.size);return q.forEach(function(qe){Ce[++ne]=qe}),Ce}var Zt=Array.prototype,jt=Function.prototype,jn=Object.prototype,ot=ae["__core-js_shared__"],Wr=(function(){var q=/[^.]+$/.exec(ot&&ot.keys&&ot.keys.IE_PROTO||"");return q?"Symbol(src)_1."+q:""})(),nr=jt.toString,Jt=jn.hasOwnProperty,gr=jn.toString,zn=RegExp("^"+nr.call(Jt).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jr=be?ae.Buffer:void 0,Cn=ae.Symbol,xn=ae.Uint8Array,yr=Mt(Object.getPrototypeOf,Object),fi=Object.create,zi=jn.propertyIsEnumerable,Pn=Zt.splice,et=Object.getOwnPropertySymbols,ft=jr?jr.isBuffer:void 0,Ft=Mt(Object.keys,Object),vn=ar(ae,"DataView"),ni=ar(ae,"Map"),dt=ar(ae,"Promise"),Xr=ar(ae,"Set"),rn=ar(ae,"WeakMap"),vr=ar(Object,"create"),hi=Dr(vn),ri=Dr(ni),Or=Dr(dt),Ji=Dr(Xr),Dn=Dr(rn),Jn=Cn?Cn.prototype:void 0,ii=Jn?Jn.valueOf:void 0;function ir(q){var ne=-1,Ce=q?q.length:0;for(this.clear();++ne<Ce;){var qe=q[ne];this.set(qe[0],qe[1])}}function Fn(){this.__data__=vr?vr(null):{}}function ve(q){return this.has(q)&&delete this.__data__[q]}function Ie(q){var ne=this.__data__;if(vr){var Ce=ne[q];return Ce===r?void 0:Ce}return Jt.call(ne,q)?ne[q]:void 0}function Le(q){var ne=this.__data__;return vr?ne[q]!==void 0:Jt.call(ne,q)}function nt(q,ne){var Ce=this.__data__;return Ce[q]=vr&&ne===void 0?r:ne,this}ir.prototype.clear=Fn,ir.prototype.delete=ve,ir.prototype.get=Ie,ir.prototype.has=Le,ir.prototype.set=nt;function Je(q){var ne=-1,Ce=q?q.length:0;for(this.clear();++ne<Ce;){var qe=q[ne];this.set(qe[0],qe[1])}}function Ge(){this.__data__=[]}function pt(q){var ne=this.__data__,Ce=Hn(ne,q);if(Ce<0)return!1;var qe=ne.length-1;return Ce==qe?ne.pop():Pn.call(ne,Ce,1),!0}function mt(q){var ne=this.__data__,Ce=Hn(ne,q);return Ce<0?void 0:ne[Ce][1]}function ut(q){return Hn(this.__data__,q)>-1}function Et(q,ne){var Ce=this.__data__,qe=Hn(Ce,q);return qe<0?Ce.push([q,ne]):Ce[qe][1]=ne,this}Je.prototype.clear=Ge,Je.prototype.delete=pt,Je.prototype.get=mt,Je.prototype.has=ut,Je.prototype.set=Et;function St(q){var ne=-1,Ce=q?q.length:0;for(this.clear();++ne<Ce;){var qe=q[ne];this.set(qe[0],qe[1])}}function xt(){this.__data__={hash:new ir,map:new(ni||Je),string:new ir}}function Gt(q){return Wn(this,q).delete(q)}function en(q){return Wn(this,q).get(q)}function Gn(q){return Wn(this,q).has(q)}function wn(q,ne){return Wn(this,q).set(q,ne),this}St.prototype.clear=xt,St.prototype.delete=Gt,St.prototype.get=en,St.prototype.has=Gn,St.prototype.set=wn;function _t(q){this.__data__=new Je(q)}function Nt(){this.__data__=new Je}function qn(q){return this.__data__.delete(q)}function rr(q){return this.__data__.get(q)}function Nn(q){return this.__data__.has(q)}function We(q,ne){var Ce=this.__data__;if(Ce instanceof Je){var qe=Ce.__data__;if(!ni||qe.length<n-1)return qe.push([q,ne]),this;Ce=this.__data__=new St(qe)}return Ce.set(q,ne),this}_t.prototype.clear=Nt,_t.prototype.delete=qn,_t.prototype.get=rr,_t.prototype.has=Nn,_t.prototype.set=We;function Mr(q,ne){var Ce=Qr(q)||Br(q)?Se(q.length,String):[],qe=Ce.length,kt=!!qe;for(var wt in q)Jt.call(q,wt)&&!(kt&&(wt=="length"||as(wt,qe)))&&Ce.push(wt);return Ce}function gn(q,ne,Ce){var qe=q[ne];(!(Jt.call(q,ne)&&En(qe,Ce))||Ce===void 0&&!(ne in q))&&(q[ne]=Ce)}function Hn(q,ne){for(var Ce=q.length;Ce--;)if(En(q[Ce][0],ne))return Ce;return-1}function Pr(q,ne){return q&&ke(ne,Jr(ne),q)}function tn(q,ne,Ce,qe,kt,wt,dn){var _n;if(qe&&(_n=wt?qe(q,kt,wt,dn):qe(q)),_n!==void 0)return _n;if(!Zr(q))return q;var lr=Qr(q);if(lr){if(_n=di(q),!ne)return sr(q,_n)}else{var Mn=Di(q),Er=Mn==w||Mn==S;if(Kt(q))return gt(q,ne);if(Mn==N||Mn==a||Er&&!wt){if(Qe(q))return wt?q:{};if(_n=Ot(Er?{}:q),!ne)return he(q,Pr(_n,q))}else{if(!pe[Mn])return wt?q:{};_n=hn(q,Mn,tn,ne)}}dn||(dn=new _t);var Ur=dn.get(q);if(Ur)return Ur;if(dn.set(q,_n),!lr)var $t=Ce?At(q):Jr(q);return $e($t||q,function(Lr,cr){$t&&(cr=Lr,Lr=q[cr]),gn(_n,cr,tn(Lr,ne,Ce,qe,cr,q,dn))}),_n}function cn(q){return Zr(q)?fi(q):{}}function st(q,ne,Ce){var qe=ne(q);return Qr(q)?qe:bt(qe,Ce(q))}function Yn(q){return gr.call(q)}function si(q){if(!Zr(q)||pi(q))return!1;var ne=pn(q)||Qe(q)?zn:we;return ne.test(Dr(q))}function br(q){if(!ai(q))return Ft(q);var ne=[];for(var Ce in Object(q))Jt.call(q,Ce)&&Ce!="constructor"&&ne.push(Ce);return ne}function gt(q,ne){if(ne)return q.slice();var Ce=new q.constructor(q.length);return q.copy(Ce),Ce}function wr(q){var ne=new q.constructor(q.byteLength);return new xn(ne).set(new xn(q)),ne}function wi(q,ne){var Ce=ne?wr(q.buffer):q.buffer;return new q.constructor(Ce,q.byteOffset,q.byteLength)}function Tn(q,ne,Ce){var qe=ne?Ce(ct(q),!0):ct(q);return xe(qe,Ye,new q.constructor)}function Ei(q){var ne=new q.constructor(q.source,de.exec(q));return ne.lastIndex=q.lastIndex,ne}function Ss(q,ne,Ce){var qe=ne?Ce(ln(q),!0):ln(q);return xe(qe,Ve,new q.constructor)}function Fi(q){return ii?Object(ii.call(q)):{}}function un(q,ne){var Ce=ne?wr(q.buffer):q.buffer;return new q.constructor(Ce,q.byteOffset,q.length)}function sr(q,ne){var Ce=-1,qe=q.length;for(ne||(ne=Array(qe));++Ce<qe;)ne[Ce]=q[Ce];return ne}function ke(q,ne,Ce,qe){Ce||(Ce={});for(var kt=-1,wt=ne.length;++kt<wt;){var dn=ne[kt],_n=void 0;gn(Ce,dn,_n===void 0?q[dn]:_n)}return Ce}function he(q,ne){return ke(q,Yt(q),ne)}function At(q){return st(q,Jr,Yt)}function Wn(q,ne){var Ce=q.__data__;return ia(ne)?Ce[typeof ne=="string"?"string":"hash"]:Ce.map}function ar(q,ne){var Ce=Me(q,ne);return si(Ce)?Ce:void 0}var Yt=et?Mt(et,Object):_s,Di=Yn;(vn&&Di(new vn(new ArrayBuffer(1)))!=F||ni&&Di(new ni)!=_||dt&&Di(dt.resolve())!=R||Xr&&Di(new Xr)!=L||rn&&Di(new rn)!=$)&&(Di=function(q){var ne=gr.call(q),Ce=ne==N?q.constructor:void 0,qe=Ce?Dr(Ce):void 0;if(qe)switch(qe){case hi:return F;case ri:return _;case Or:return R;case Ji:return L;case Dn:return $}return ne});function di(q){var ne=q.length,Ce=q.constructor(ne);return ne&&typeof q[0]=="string"&&Jt.call(q,"index")&&(Ce.index=q.index,Ce.input=q.input),Ce}function Ot(q){return typeof q.constructor=="function"&&!ai(q)?cn(yr(q)):{}}function hn(q,ne,Ce,qe){var kt=q.constructor;switch(ne){case U:return wr(q);case p:case g:return new kt(+q);case F:return wi(q,qe);case B:case Z:case le:case Ne:case G:case ce:case se:case Ee:case ue:return un(q,qe);case _:return Tn(q,qe,Ce);case C:case k:return new kt(q);case M:return Ei(q);case L:return Ss(q,qe,Ce);case j:return Fi(q)}}function as(q,ne){return ne=ne??i,!!ne&&(typeof q=="number"||Oe.test(q))&&q>-1&&q%1==0&&q<ne}function ia(q){var ne=typeof q;return ne=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?q!=="__proto__":q===null}function pi(q){return!!Wr&&Wr in q}function ai(q){var ne=q&&q.constructor,Ce=typeof ne=="function"&&ne.prototype||jn;return q===Ce}function Dr(q){if(q!=null){try{return nr.call(q)}catch{}try{return q+""}catch{}}return""}function or(q){return tn(q,!0,!0)}function En(q,ne){return q===ne||q!==q&&ne!==ne}function Br(q){return qi(q)&&Jt.call(q,"callee")&&(!zi.call(q,"callee")||gr.call(q)==a)}var Qr=Array.isArray;function Dt(q){return q!=null&&xs(q.length)&&!pn(q)}function qi(q){return Si(q)&&Dt(q)}var Kt=ft||os;function pn(q){var ne=Zr(q)?gr.call(q):"";return ne==w||ne==S}function xs(q){return typeof q=="number"&&q>-1&&q%1==0&&q<=i}function Zr(q){var ne=typeof q;return!!q&&(ne=="object"||ne=="function")}function Si(q){return!!q&&typeof q=="object"}function Jr(q){return Dt(q)?Mr(q):br(q)}function _s(){return[]}function os(){return!1}t.exports=or})(Vh,Vh.exports)),Vh.exports}var Hh={exports:{}};Hh.exports;var jT;function KI(){return jT||(jT=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,a=2,u=9007199254740991,p="[object Arguments]",g="[object Array]",y="[object AsyncFunction]",w="[object Boolean]",S="[object Date]",_="[object Error]",C="[object Function]",N="[object GeneratorFunction]",R="[object Map]",M="[object Number]",L="[object Null]",k="[object Object]",j="[object Promise]",$="[object Proxy]",U="[object RegExp]",F="[object Set]",B="[object String]",Z="[object Symbol]",le="[object Undefined]",Ne="[object WeakMap]",G="[object ArrayBuffer]",ce="[object DataView]",se="[object Float32Array]",Ee="[object Float64Array]",ue="[object Int8Array]",ee="[object Int16Array]",de="[object Int32Array]",we="[object Uint8Array]",Oe="[object Uint8ClampedArray]",pe="[object Uint16Array]",K="[object Uint32Array]",oe=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,ie={};ie[se]=ie[Ee]=ie[ue]=ie[ee]=ie[de]=ie[we]=ie[Oe]=ie[pe]=ie[K]=!0,ie[p]=ie[g]=ie[G]=ie[w]=ie[ce]=ie[S]=ie[_]=ie[C]=ie[R]=ie[M]=ie[k]=ie[U]=ie[F]=ie[B]=ie[Ne]=!1;var be=typeof window=="object"&&window&&window.Object===Object&&window,Ye=typeof self=="object"&&self&&self.Object===Object&&self,Ve=be||Ye||Function("return this")(),$e=e&&!e.nodeType&&e,bt=$e&&!0&&t&&!t.nodeType&&t,xe=bt&&bt.exports===$e,Se=xe&&be.process,Me=(function(){try{return Se&&Se.binding&&Se.binding("util")}catch{}})(),Qe=Me&&Me.isTypedArray;function ct(q,ne){for(var Ce=-1,qe=q==null?0:q.length,kt=0,wt=[];++Ce<qe;){var dn=q[Ce];ne(dn,Ce,q)&&(wt[kt++]=dn)}return wt}function Mt(q,ne){for(var Ce=-1,qe=ne.length,kt=q.length;++Ce<qe;)q[kt+Ce]=ne[Ce];return q}function ln(q,ne){for(var Ce=-1,qe=q==null?0:q.length;++Ce<qe;)if(ne(q[Ce],Ce,q))return!0;return!1}function Zt(q,ne){for(var Ce=-1,qe=Array(q);++Ce<q;)qe[Ce]=ne(Ce);return qe}function jt(q){return function(ne){return q(ne)}}function jn(q,ne){return q.has(ne)}function ot(q,ne){return q?.[ne]}function Wr(q){var ne=-1,Ce=Array(q.size);return q.forEach(function(qe,kt){Ce[++ne]=[kt,qe]}),Ce}function nr(q,ne){return function(Ce){return q(ne(Ce))}}function Jt(q){var ne=-1,Ce=Array(q.size);return q.forEach(function(qe){Ce[++ne]=qe}),Ce}var gr=Array.prototype,zn=Function.prototype,jr=Object.prototype,Cn=Ve["__core-js_shared__"],xn=zn.toString,yr=jr.hasOwnProperty,fi=(function(){var q=/[^.]+$/.exec(Cn&&Cn.keys&&Cn.keys.IE_PROTO||"");return q?"Symbol(src)_1."+q:""})(),zi=jr.toString,Pn=RegExp("^"+xn.call(yr).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=xe?Ve.Buffer:void 0,ft=Ve.Symbol,Ft=Ve.Uint8Array,vn=jr.propertyIsEnumerable,ni=gr.splice,dt=ft?ft.toStringTag:void 0,Xr=Object.getOwnPropertySymbols,rn=et?et.isBuffer:void 0,vr=nr(Object.keys,Object),hi=Yt(Ve,"DataView"),ri=Yt(Ve,"Map"),Or=Yt(Ve,"Promise"),Ji=Yt(Ve,"Set"),Dn=Yt(Ve,"WeakMap"),Jn=Yt(Object,"create"),ii=Dr(hi),ir=Dr(ri),Fn=Dr(Or),ve=Dr(Ji),Ie=Dr(Dn),Le=ft?ft.prototype:void 0,nt=Le?Le.valueOf:void 0;function Je(q){var ne=-1,Ce=q==null?0:q.length;for(this.clear();++ne<Ce;){var qe=q[ne];this.set(qe[0],qe[1])}}function Ge(){this.__data__=Jn?Jn(null):{},this.size=0}function pt(q){var ne=this.has(q)&&delete this.__data__[q];return this.size-=ne?1:0,ne}function mt(q){var ne=this.__data__;if(Jn){var Ce=ne[q];return Ce===r?void 0:Ce}return yr.call(ne,q)?ne[q]:void 0}function ut(q){var ne=this.__data__;return Jn?ne[q]!==void 0:yr.call(ne,q)}function Et(q,ne){var Ce=this.__data__;return this.size+=this.has(q)?0:1,Ce[q]=Jn&&ne===void 0?r:ne,this}Je.prototype.clear=Ge,Je.prototype.delete=pt,Je.prototype.get=mt,Je.prototype.has=ut,Je.prototype.set=Et;function St(q){var ne=-1,Ce=q==null?0:q.length;for(this.clear();++ne<Ce;){var qe=q[ne];this.set(qe[0],qe[1])}}function xt(){this.__data__=[],this.size=0}function Gt(q){var ne=this.__data__,Ce=gt(ne,q);if(Ce<0)return!1;var qe=ne.length-1;return Ce==qe?ne.pop():ni.call(ne,Ce,1),--this.size,!0}function en(q){var ne=this.__data__,Ce=gt(ne,q);return Ce<0?void 0:ne[Ce][1]}function Gn(q){return gt(this.__data__,q)>-1}function wn(q,ne){var Ce=this.__data__,qe=gt(Ce,q);return qe<0?(++this.size,Ce.push([q,ne])):Ce[qe][1]=ne,this}St.prototype.clear=xt,St.prototype.delete=Gt,St.prototype.get=en,St.prototype.has=Gn,St.prototype.set=wn;function _t(q){var ne=-1,Ce=q==null?0:q.length;for(this.clear();++ne<Ce;){var qe=q[ne];this.set(qe[0],qe[1])}}function Nt(){this.size=0,this.__data__={hash:new Je,map:new(ri||St),string:new Je}}function qn(q){var ne=ar(this,q).delete(q);return this.size-=ne?1:0,ne}function rr(q){return ar(this,q).get(q)}function Nn(q){return ar(this,q).has(q)}function We(q,ne){var Ce=ar(this,q),qe=Ce.size;return Ce.set(q,ne),this.size+=Ce.size==qe?0:1,this}_t.prototype.clear=Nt,_t.prototype.delete=qn,_t.prototype.get=rr,_t.prototype.has=Nn,_t.prototype.set=We;function Mr(q){var ne=-1,Ce=q==null?0:q.length;for(this.__data__=new _t;++ne<Ce;)this.add(q[ne])}function gn(q){return this.__data__.set(q,r),this}function Hn(q){return this.__data__.has(q)}Mr.prototype.add=Mr.prototype.push=gn,Mr.prototype.has=Hn;function Pr(q){var ne=this.__data__=new St(q);this.size=ne.size}function tn(){this.__data__=new St,this.size=0}function cn(q){var ne=this.__data__,Ce=ne.delete(q);return this.size=ne.size,Ce}function st(q){return this.__data__.get(q)}function Yn(q){return this.__data__.has(q)}function si(q,ne){var Ce=this.__data__;if(Ce instanceof St){var qe=Ce.__data__;if(!ri||qe.length<n-1)return qe.push([q,ne]),this.size=++Ce.size,this;Ce=this.__data__=new _t(qe)}return Ce.set(q,ne),this.size=Ce.size,this}Pr.prototype.clear=tn,Pr.prototype.delete=cn,Pr.prototype.get=st,Pr.prototype.has=Yn,Pr.prototype.set=si;function br(q,ne){var Ce=Br(q),qe=!Ce&&En(q),kt=!Ce&&!qe&&Dt(q),wt=!Ce&&!qe&&!kt&&Si(q),dn=Ce||qe||kt||wt,_n=dn?Zt(q.length,String):[],lr=_n.length;for(var Mn in q)yr.call(q,Mn)&&!(dn&&(Mn=="length"||kt&&(Mn=="offset"||Mn=="parent")||wt&&(Mn=="buffer"||Mn=="byteLength"||Mn=="byteOffset")||hn(Mn,lr)))&&_n.push(Mn);return _n}function gt(q,ne){for(var Ce=q.length;Ce--;)if(or(q[Ce][0],ne))return Ce;return-1}function wr(q,ne,Ce){var qe=ne(q);return Br(q)?qe:Mt(qe,Ce(q))}function wi(q){return q==null?q===void 0?le:L:dt&&dt in Object(q)?Di(q):ai(q)}function Tn(q){return Zr(q)&&wi(q)==p}function Ei(q,ne,Ce,qe,kt){return q===ne?!0:q==null||ne==null||!Zr(q)&&!Zr(ne)?q!==q&&ne!==ne:Ss(q,ne,Ce,qe,Ei,kt)}function Ss(q,ne,Ce,qe,kt,wt){var dn=Br(q),_n=Br(ne),lr=dn?g:Ot(q),Mn=_n?g:Ot(ne);lr=lr==p?k:lr,Mn=Mn==p?k:Mn;var Er=lr==k,Ur=Mn==k,$t=lr==Mn;if($t&&Dt(q)){if(!Dt(ne))return!1;dn=!0,Er=!1}if($t&&!Er)return wt||(wt=new Pr),dn||Si(q)?ke(q,ne,Ce,qe,kt,wt):he(q,ne,lr,Ce,qe,kt,wt);if(!(Ce&i)){var Lr=Er&&yr.call(q,"__wrapped__"),cr=Ur&&yr.call(ne,"__wrapped__");if(Lr||cr){var Vr=Lr?q.value():q,ji=cr?ne.value():ne;return wt||(wt=new Pr),kt(Vr,ji,Ce,qe,wt)}}return $t?(wt||(wt=new Pr),At(q,ne,Ce,qe,kt,wt)):!1}function Fi(q){if(!xs(q)||ia(q))return!1;var ne=Kt(q)?Pn:ae;return ne.test(Dr(q))}function un(q){return Zr(q)&&pn(q.length)&&!!ie[wi(q)]}function sr(q){if(!pi(q))return vr(q);var ne=[];for(var Ce in Object(q))yr.call(q,Ce)&&Ce!="constructor"&&ne.push(Ce);return ne}function ke(q,ne,Ce,qe,kt,wt){var dn=Ce&i,_n=q.length,lr=ne.length;if(_n!=lr&&!(dn&&lr>_n))return!1;var Mn=wt.get(q);if(Mn&&wt.get(ne))return Mn==ne;var Er=-1,Ur=!0,$t=Ce&a?new Mr:void 0;for(wt.set(q,ne),wt.set(ne,q);++Er<_n;){var Lr=q[Er],cr=ne[Er];if(qe)var Vr=dn?qe(cr,Lr,Er,ne,q,wt):qe(Lr,cr,Er,q,ne,wt);if(Vr!==void 0){if(Vr)continue;Ur=!1;break}if($t){if(!ln(ne,function(ji,ze){if(!jn($t,ze)&&(Lr===ji||kt(Lr,ji,Ce,qe,wt)))return $t.push(ze)})){Ur=!1;break}}else if(!(Lr===cr||kt(Lr,cr,Ce,qe,wt))){Ur=!1;break}}return wt.delete(q),wt.delete(ne),Ur}function he(q,ne,Ce,qe,kt,wt,dn){switch(Ce){case ce:if(q.byteLength!=ne.byteLength||q.byteOffset!=ne.byteOffset)return!1;q=q.buffer,ne=ne.buffer;case G:return!(q.byteLength!=ne.byteLength||!wt(new Ft(q),new Ft(ne)));case w:case S:case M:return or(+q,+ne);case _:return q.name==ne.name&&q.message==ne.message;case U:case B:return q==ne+"";case R:var _n=Wr;case F:var lr=qe&i;if(_n||(_n=Jt),q.size!=ne.size&&!lr)return!1;var Mn=dn.get(q);if(Mn)return Mn==ne;qe|=a,dn.set(q,ne);var Er=ke(_n(q),_n(ne),qe,kt,wt,dn);return dn.delete(q),Er;case Z:if(nt)return nt.call(q)==nt.call(ne)}return!1}function At(q,ne,Ce,qe,kt,wt){var dn=Ce&i,_n=Wn(q),lr=_n.length,Mn=Wn(ne),Er=Mn.length;if(lr!=Er&&!dn)return!1;for(var Ur=lr;Ur--;){var $t=_n[Ur];if(!(dn?$t in ne:yr.call(ne,$t)))return!1}var Lr=wt.get(q);if(Lr&&wt.get(ne))return Lr==ne;var cr=!0;wt.set(q,ne),wt.set(ne,q);for(var Vr=dn;++Ur<lr;){$t=_n[Ur];var ji=q[$t],ze=ne[$t];if(qe)var nn=dn?qe(ze,ji,$t,ne,q,wt):qe(ji,ze,$t,q,ne,wt);if(!(nn===void 0?ji===ze||kt(ji,ze,Ce,qe,wt):nn)){cr=!1;break}Vr||(Vr=$t=="constructor")}if(cr&&!Vr){var Sr=q.constructor,ls=ne.constructor;Sr!=ls&&"constructor"in q&&"constructor"in ne&&!(typeof Sr=="function"&&Sr instanceof Sr&&typeof ls=="function"&&ls instanceof ls)&&(cr=!1)}return wt.delete(q),wt.delete(ne),cr}function Wn(q){return wr(q,Jr,di)}function ar(q,ne){var Ce=q.__data__;return as(ne)?Ce[typeof ne=="string"?"string":"hash"]:Ce.map}function Yt(q,ne){var Ce=ot(q,ne);return Fi(Ce)?Ce:void 0}function Di(q){var ne=yr.call(q,dt),Ce=q[dt];try{q[dt]=void 0;var qe=!0}catch{}var kt=zi.call(q);return qe&&(ne?q[dt]=Ce:delete q[dt]),kt}var di=Xr?function(q){return q==null?[]:(q=Object(q),ct(Xr(q),function(ne){return vn.call(q,ne)}))}:_s,Ot=wi;(hi&&Ot(new hi(new ArrayBuffer(1)))!=ce||ri&&Ot(new ri)!=R||Or&&Ot(Or.resolve())!=j||Ji&&Ot(new Ji)!=F||Dn&&Ot(new Dn)!=Ne)&&(Ot=function(q){var ne=wi(q),Ce=ne==k?q.constructor:void 0,qe=Ce?Dr(Ce):"";if(qe)switch(qe){case ii:return ce;case ir:return R;case Fn:return j;case ve:return F;case Ie:return Ne}return ne});function hn(q,ne){return ne=ne??u,!!ne&&(typeof q=="number"||Y.test(q))&&q>-1&&q%1==0&&q<ne}function as(q){var ne=typeof q;return ne=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?q!=="__proto__":q===null}function ia(q){return!!fi&&fi in q}function pi(q){var ne=q&&q.constructor,Ce=typeof ne=="function"&&ne.prototype||jr;return q===Ce}function ai(q){return zi.call(q)}function Dr(q){if(q!=null){try{return xn.call(q)}catch{}try{return q+""}catch{}}return""}function or(q,ne){return q===ne||q!==q&&ne!==ne}var En=Tn((function(){return arguments})())?Tn:function(q){return Zr(q)&&yr.call(q,"callee")&&!vn.call(q,"callee")},Br=Array.isArray;function Qr(q){return q!=null&&pn(q.length)&&!Kt(q)}var Dt=rn||os;function qi(q,ne){return Ei(q,ne)}function Kt(q){if(!xs(q))return!1;var ne=wi(q);return ne==C||ne==N||ne==y||ne==$}function pn(q){return typeof q=="number"&&q>-1&&q%1==0&&q<=u}function xs(q){var ne=typeof q;return q!=null&&(ne=="object"||ne=="function")}function Zr(q){return q!=null&&typeof q=="object"}var Si=Qe?jt(Qe):un;function Jr(q){return Qr(q)?br(q):sr(q)}function _s(){return[]}function os(){return!1}t.exports=qi})(Hh,Hh.exports)),Hh.exports}var u0={},PT;function Fte(){if(PT)return u0;PT=1,Object.defineProperty(u0,"__esModule",{value:!0});const t=HI(),e=KI();var n;return(function(r){function i(g={},y={},w=!1){typeof g!="object"&&(g={}),typeof y!="object"&&(y={});let S=t(y);w||(S=Object.keys(S).reduce((_,C)=>(S[C]!=null&&(_[C]=S[C]),_),{}));for(const _ in g)g[_]!==void 0&&y[_]===void 0&&(S[_]=g[_]);return Object.keys(S).length>0?S:void 0}r.compose=i;function a(g={},y={}){typeof g!="object"&&(g={}),typeof y!="object"&&(y={});const w=Object.keys(g).concat(Object.keys(y)).reduce((S,_)=>(e(g[_],y[_])||(S[_]=y[_]===void 0?null:y[_]),S),{});return Object.keys(w).length>0?w:void 0}r.diff=a;function u(g={},y={}){g=g||{};const w=Object.keys(y).reduce((S,_)=>(y[_]!==g[_]&&g[_]!==void 0&&(S[_]=y[_]),S),{});return Object.keys(g).reduce((S,_)=>(g[_]!==y[_]&&y[_]===void 0&&(S[_]=null),S),w)}r.invert=u;function p(g,y,w=!1){if(typeof g!="object")return y;if(typeof y!="object")return;if(!w)return y;const S=Object.keys(y).reduce((_,C)=>(g[C]===void 0&&(_[C]=y[C]),_),{});return Object.keys(S).length>0?S:void 0}r.transform=p})(n||(n={})),u0.default=n,u0}var f0={},BT;function GI(){if(BT)return f0;BT=1,Object.defineProperty(f0,"__esModule",{value:!0});var t;return(function(e){function n(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=n})(t||(t={})),f0.default=t,f0}var h0={},UT;function qte(){if(UT)return h0;UT=1,Object.defineProperty(h0,"__esModule",{value:!0});const t=GI();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const i=this.ops[this.index];if(i){const a=this.offset,u=t.default.length(i);if(r>=u-a?(r=u-a,this.index+=1,this.offset=0):this.offset+=r,typeof i.delete=="number")return{delete:r};{const p={};return i.attributes&&(p.attributes=i.attributes),typeof i.retain=="number"?p.retain=r:typeof i.retain=="object"&&i.retain!==null?p.retain=i.retain:typeof i.insert=="string"?p.insert=i.insert.substr(a,r):p.insert=i.insert,p}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,i=this.index,a=this.next(),u=this.ops.slice(this.index);return this.offset=r,this.index=i,[a].concat(u)}}else return[]}}return h0.default=e,h0}var zT;function $te(){return zT||(zT=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=zte(),r=HI(),i=KI(),a=Fte();e.AttributeMap=a.default;const u=GI();e.Op=u.default;const p=qte();e.OpIterator=p.default;const g="\0",y=(S,_)=>{if(typeof S!="object"||S===null)throw new Error(`cannot retain a ${typeof S}`);if(typeof _!="object"||_===null)throw new Error(`cannot retain a ${typeof _}`);const C=Object.keys(S)[0];if(!C||C!==Object.keys(_)[0])throw new Error(`embed types not matched: ${C} != ${Object.keys(_)[0]}`);return[C,S[C],_[C]]};class w{constructor(_){Array.isArray(_)?this.ops=_:_!=null&&Array.isArray(_.ops)?this.ops=_.ops:this.ops=[]}static registerEmbed(_,C){this.handlers[_]=C}static unregisterEmbed(_){delete this.handlers[_]}static getHandler(_){const C=this.handlers[_];if(!C)throw new Error(`no handlers for embed type "${_}"`);return C}insert(_,C){const N={};return typeof _=="string"&&_.length===0?this:(N.insert=_,C!=null&&typeof C=="object"&&Object.keys(C).length>0&&(N.attributes=C),this.push(N))}delete(_){return _<=0?this:this.push({delete:_})}retain(_,C){if(typeof _=="number"&&_<=0)return this;const N={retain:_};return C!=null&&typeof C=="object"&&Object.keys(C).length>0&&(N.attributes=C),this.push(N)}push(_){let C=this.ops.length,N=this.ops[C-1];if(_=r(_),typeof N=="object"){if(typeof _.delete=="number"&&typeof N.delete=="number")return this.ops[C-1]={delete:N.delete+_.delete},this;if(typeof N.delete=="number"&&_.insert!=null&&(C-=1,N=this.ops[C-1],typeof N!="object"))return this.ops.unshift(_),this;if(i(_.attributes,N.attributes)){if(typeof _.insert=="string"&&typeof N.insert=="string")return this.ops[C-1]={insert:N.insert+_.insert},typeof _.attributes=="object"&&(this.ops[C-1].attributes=_.attributes),this;if(typeof _.retain=="number"&&typeof N.retain=="number")return this.ops[C-1]={retain:N.retain+_.retain},typeof _.attributes=="object"&&(this.ops[C-1].attributes=_.attributes),this}}return C===this.ops.length?this.ops.push(_):this.ops.splice(C,0,_),this}chop(){const _=this.ops[this.ops.length-1];return _&&typeof _.retain=="number"&&!_.attributes&&this.ops.pop(),this}filter(_){return this.ops.filter(_)}forEach(_){this.ops.forEach(_)}map(_){return this.ops.map(_)}partition(_){const C=[],N=[];return this.forEach(R=>{(_(R)?C:N).push(R)}),[C,N]}reduce(_,C){return this.ops.reduce(_,C)}changeLength(){return this.reduce((_,C)=>C.insert?_+u.default.length(C):C.delete?_-C.delete:_,0)}length(){return this.reduce((_,C)=>_+u.default.length(C),0)}slice(_=0,C=1/0){const N=[],R=new p.default(this.ops);let M=0;for(;M<C&&R.hasNext();){let L;M<_?L=R.next(_-M):(L=R.next(C-M),N.push(L)),M+=u.default.length(L)}return new w(N)}compose(_){const C=new p.default(this.ops),N=new p.default(_.ops),R=[],M=N.peek();if(M!=null&&typeof M.retain=="number"&&M.attributes==null){let k=M.retain;for(;C.peekType()==="insert"&&C.peekLength()<=k;)k-=C.peekLength(),R.push(C.next());M.retain-k>0&&N.next(M.retain-k)}const L=new w(R);for(;C.hasNext()||N.hasNext();)if(N.peekType()==="insert")L.push(N.next());else if(C.peekType()==="delete")L.push(C.next());else{const k=Math.min(C.peekLength(),N.peekLength()),j=C.next(k),$=N.next(k);if($.retain){const U={};if(typeof j.retain=="number")U.retain=typeof $.retain=="number"?k:$.retain;else if(typeof $.retain=="number")j.retain==null?U.insert=j.insert:U.retain=j.retain;else{const B=j.retain==null?"insert":"retain",[Z,le,Ne]=y(j[B],$.retain),G=w.getHandler(Z);U[B]={[Z]:G.compose(le,Ne,B==="retain")}}const F=a.default.compose(j.attributes,$.attributes,typeof j.retain=="number");if(F&&(U.attributes=F),L.push(U),!N.hasNext()&&i(L.ops[L.ops.length-1],U)){const B=new w(C.rest());return L.concat(B).chop()}}else typeof $.delete=="number"&&(typeof j.retain=="number"||typeof j.retain=="object"&&j.retain!==null)&&L.push($)}return L.chop()}concat(_){const C=new w(this.ops.slice());return _.ops.length>0&&(C.push(_.ops[0]),C.ops=C.ops.concat(_.ops.slice(1))),C}diff(_,C){if(this.ops===_.ops)return new w;const N=[this,_].map(j=>j.map($=>{if($.insert!=null)return typeof $.insert=="string"?$.insert:g;const U=j===_?"on":"with";throw new Error("diff() called "+U+" non-document")}).join("")),R=new w,M=n(N[0],N[1],C,!0),L=new p.default(this.ops),k=new p.default(_.ops);return M.forEach(j=>{let $=j[1].length;for(;$>0;){let U=0;switch(j[0]){case n.INSERT:U=Math.min(k.peekLength(),$),R.push(k.next(U));break;case n.DELETE:U=Math.min($,L.peekLength()),L.next(U),R.delete(U);break;case n.EQUAL:U=Math.min(L.peekLength(),k.peekLength(),$);const F=L.next(U),B=k.next(U);i(F.insert,B.insert)?R.retain(U,a.default.diff(F.attributes,B.attributes)):R.push(B).delete(U);break}$-=U}}),R.chop()}eachLine(_,C=`
`){const N=new p.default(this.ops);let R=new w,M=0;for(;N.hasNext();){if(N.peekType()!=="insert")return;const L=N.peek(),k=u.default.length(L)-N.peekLength(),j=typeof L.insert=="string"?L.insert.indexOf(C,k)-k:-1;if(j<0)R.push(N.next());else if(j>0)R.push(N.next(j));else{if(_(R,N.next(1).attributes||{},M)===!1)return;M+=1,R=new w}}R.length()>0&&_(R,{},M)}invert(_){const C=new w;return this.reduce((N,R)=>{if(R.insert)C.delete(u.default.length(R));else{if(typeof R.retain=="number"&&R.attributes==null)return C.retain(R.retain),N+R.retain;if(R.delete||typeof R.retain=="number"){const M=R.delete||R.retain;return _.slice(N,N+M).forEach(k=>{R.delete?C.push(k):R.retain&&R.attributes&&C.retain(u.default.length(k),a.default.invert(R.attributes,k.attributes))}),N+M}else if(typeof R.retain=="object"&&R.retain!==null){const M=_.slice(N,N+1),L=new p.default(M.ops).next(),[k,j,$]=y(R.retain,L.insert),U=w.getHandler(k);return C.retain({[k]:U.invert(j,$)},a.default.invert(R.attributes,L.attributes)),N+1}}return N},0),C.chop()}transform(_,C=!1){if(C=!!C,typeof _=="number")return this.transformPosition(_,C);const N=_,R=new p.default(this.ops),M=new p.default(N.ops),L=new w;for(;R.hasNext()||M.hasNext();)if(R.peekType()==="insert"&&(C||M.peekType()!=="insert"))L.retain(u.default.length(R.next()));else if(M.peekType()==="insert")L.push(M.next());else{const k=Math.min(R.peekLength(),M.peekLength()),j=R.next(k),$=M.next(k);if(j.delete)continue;if($.delete)L.push($);else{const U=j.retain,F=$.retain;let B=typeof F=="object"&&F!==null?F:k;if(typeof U=="object"&&U!==null&&typeof F=="object"&&F!==null){const Z=Object.keys(U)[0];if(Z===Object.keys(F)[0]){const le=w.getHandler(Z);le&&(B={[Z]:le.transform(U[Z],F[Z],C)})}}L.retain(B,a.default.transform(j.attributes,$.attributes,C))}}return L.chop()}transformPosition(_,C=!1){C=!!C;const N=new p.default(this.ops);let R=0;for(;N.hasNext()&&R<=_;){const M=N.peekLength(),L=N.peekType();if(N.next(),L==="delete"){_-=Math.min(M,_-R);continue}else L==="insert"&&(R<_||!C)&&(_+=M);R+=M}return _}}w.Op=u.default,w.OpIterator=p.default,w.AttributeMap=a.default,w.handlers={},e.default=w,t.exports=w,t.exports.default=w})(c0,c0.exports)),c0.exports}var Aa=$te();const Ut=So(Aa);class Za extends ra{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Za.blotName="break";Za.tagName="BR";let Wa=class extends g1{};const Vte={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Z1(t){return t.replace(/[&<>"']/g,e=>Vte[e])}class ds extends xE{static allowedChildren=[ds,Za,ra,Wa];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,n){const r=ds.order.indexOf(e),i=ds.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}formatAt(e,n,r,i){if(ds.compare(this.statics.blotName,r)<0&&this.scroll.query(r,zt.BLOT)){const a=this.isolate(e,n);i&&a.wrap(r,i)}else super.formatAt(e,n,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof ds&&ds.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const FT=1;class Zi extends Dd{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=YI(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,r,i){n<=0||(this.scroll.query(r,zt.BLOCK)?e+n===this.length()&&this.format(r,i):super.formatAt(e,Math.min(n,this.length()-e-1),r,i),this.cache={})}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r),this.cache={};return}if(n.length===0)return;const i=n.split(`
`),a=i.shift();a.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let u=this;i.reduce((p,g)=>(u=u.split(p,!0),u.insertAt(0,g),g.length),e+a.length)}insertBefore(e,n){const{head:r}=this.children;super.insertBefore(e,n),r instanceof Za&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+FT),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-FT)){const i=this.clone();return e===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const r=super.split(e,n);return this.cache={},r}}Zi.blotName="block";Zi.tagName="P";Zi.defaultChild=Za;Zi.allowedChildren=[Za,ds,ra,Wa];class Sa extends ra{attach(){super.attach(),this.attributes=new X1(this.domNode)}delta(){return new Ut().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,zt.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,i){this.format(r,i)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const i=n.split(`
`),a=i.pop(),u=i.map(g=>{const y=this.scroll.create(Zi.blotName);return y.insertAt(0,g),y}),p=this.split(e);u.forEach(g=>{this.parent.insertBefore(g,p)}),a&&this.parent.insertBefore(this.scroll.create("text",a),p)}}Sa.scope=zt.BLOCK_BLOT;function YI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(rs).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),ba(r,{},e)),new Ut).insert(`
`,ba(t))}function ba(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:ba(t.parent,e,n)}class Va extends ra{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(Va.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==zt.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Va.CONTENTS.length,r.optimize(),r.formatAt(i,Va.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof Wa?this.prev:null,r=n?n.length():0,i=this.next instanceof Wa?this.next:null,a=i?i.text:"",{textNode:u}=this,p=u.data.split(Va.CONTENTS).join("");u.data=Va.CONTENTS;let g;if(n)g=n,(p||i)&&(n.insertAt(n.length(),p+a),i&&i.remove());else if(i)g=i,i.insertAt(0,p);else{const y=document.createTextNode(p);g=this.scroll.create(y),this.parent.insertBefore(g,this)}if(this.remove(),e){const y=(_,C)=>n&&_===n.domNode?C:_===u?r+C-1:i&&_===i.domNode?r+p.length+C:null,w=y(e.start.node,e.start.offset),S=y(e.end.node,e.end.offset);if(w!==null&&S!==null)return{startNode:g.domNode,startOffset:w,endNode:g.domNode,endOffset:S}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=Va.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var mb={exports:{}},qT;function Hte(){return qT||(qT=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(g,y,w){this.fn=g,this.context=y,this.once=w||!1}function a(g,y,w,S,_){if(typeof w!="function")throw new TypeError("The listener must be a function");var C=new i(w,S||g,_),N=n?n+y:y;return g._events[N]?g._events[N].fn?g._events[N]=[g._events[N],C]:g._events[N].push(C):(g._events[N]=C,g._eventsCount++),g}function u(g,y){--g._eventsCount===0?g._events=new r:delete g._events[y]}function p(){this._events=new r,this._eventsCount=0}p.prototype.eventNames=function(){var y=[],w,S;if(this._eventsCount===0)return y;for(S in w=this._events)e.call(w,S)&&y.push(n?S.slice(1):S);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(w)):y},p.prototype.listeners=function(y){var w=n?n+y:y,S=this._events[w];if(!S)return[];if(S.fn)return[S.fn];for(var _=0,C=S.length,N=new Array(C);_<C;_++)N[_]=S[_].fn;return N},p.prototype.listenerCount=function(y){var w=n?n+y:y,S=this._events[w];return S?S.fn?1:S.length:0},p.prototype.emit=function(y,w,S,_,C,N){var R=n?n+y:y;if(!this._events[R])return!1;var M=this._events[R],L=arguments.length,k,j;if(M.fn){switch(M.once&&this.removeListener(y,M.fn,void 0,!0),L){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,w),!0;case 3:return M.fn.call(M.context,w,S),!0;case 4:return M.fn.call(M.context,w,S,_),!0;case 5:return M.fn.call(M.context,w,S,_,C),!0;case 6:return M.fn.call(M.context,w,S,_,C,N),!0}for(j=1,k=new Array(L-1);j<L;j++)k[j-1]=arguments[j];M.fn.apply(M.context,k)}else{var $=M.length,U;for(j=0;j<$;j++)switch(M[j].once&&this.removeListener(y,M[j].fn,void 0,!0),L){case 1:M[j].fn.call(M[j].context);break;case 2:M[j].fn.call(M[j].context,w);break;case 3:M[j].fn.call(M[j].context,w,S);break;case 4:M[j].fn.call(M[j].context,w,S,_);break;default:if(!k)for(U=1,k=new Array(L-1);U<L;U++)k[U-1]=arguments[U];M[j].fn.apply(M[j].context,k)}}return!0},p.prototype.on=function(y,w,S){return a(this,y,w,S,!1)},p.prototype.once=function(y,w,S){return a(this,y,w,S,!0)},p.prototype.removeListener=function(y,w,S,_){var C=n?n+y:y;if(!this._events[C])return this;if(!w)return u(this,C),this;var N=this._events[C];if(N.fn)N.fn===w&&(!_||N.once)&&(!S||N.context===S)&&u(this,C);else{for(var R=0,M=[],L=N.length;R<L;R++)(N[R].fn!==w||_&&!N[R].once||S&&N[R].context!==S)&&M.push(N[R]);M.length?this._events[C]=M.length===1?M[0]:M:u(this,C)}return this},p.prototype.removeAllListeners=function(y){var w;return y?(w=n?n+y:y,this._events[w]&&u(this,w)):(this._events=new r,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=n,p.EventEmitter=p,t.exports=p})(mb)),mb.exports}var Kte=Hte();const Gte=So(Kte),Kw=new WeakMap,Gw=["error","warn","log","info"];let Yw="warn";function WI(t){if(Yw&&Gw.indexOf(t)<=Gw.indexOf(Yw)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function dl(t){return Gw.reduce((e,n)=>(e[n]=WI.bind(console,n,t),e),{})}dl.level=t=>{Yw=t};WI.level=dl.level;const gb=dl("quill:events"),Yte=["selectionchange","mousedown","mouseup","click"];Yte.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const a=Kw.get(i);a&&a.emitter&&a.emitter.handleDOM(...n)})})});class Lt extends Gte{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",gb.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return gb.log.call(gb,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(a=>{let{node:u,handler:p}=a;(e.target===u||u.contains(e.target))&&p(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}const yb=dl("quill:selection");class ou{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class Wte{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ou(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Lt.sources.USER),1)}),this.emitter.on(Lt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Lt.events.SCROLL_UPDATE,(i,a)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const u=a.some(p=>p.type==="characterData"||p.type==="childList"||p.type==="attributes"&&p.target===this.root);this.update(u?Lt.sources.SILENT:i)}catch{}})}),this.emitter.on(Lt.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:a,startOffset:u,endNode:p,endOffset:g}=i.range;this.setNativeRange(a,u,p,g),this.update(Lt.sources.SILENT)}}),this.update(Lt.sources.SILENT)}handleComposition(){this.emitter.on(Lt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Lt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Lt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,zt.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof rs){const a=i.split(r.start.offset);i.parent.insertBefore(this.cursor,a)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let i,[a,u]=this.scroll.leaf(e);if(a==null)return null;if(n>0&&u===a.length()){const[w]=this.scroll.leaf(e+1);if(w){const[S]=this.scroll.line(e),[_]=this.scroll.line(e+1);S===_&&(a=w,u=0)}}[i,u]=a.position(u,!0);const p=document.createRange();if(n>0)return p.setStart(i,u),[a,u]=this.scroll.leaf(e+n),a==null?null:([i,u]=a.position(u,!0),p.setEnd(i,u),p.getBoundingClientRect());let g="left",y;if(i instanceof Text){if(!i.data.length)return null;u<i.data.length?(p.setStart(i,u),p.setEnd(i,u+1)):(p.setStart(i,u-1),p.setEnd(i,u),g="right"),y=p.getBoundingClientRect()}else{if(!(a.domNode instanceof Element))return null;y=a.domNode.getBoundingClientRect(),u>0&&(g="right")}return{bottom:y.top+y.height,height:y.height,left:y[g],right:y[g],top:y.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return yb.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&vb(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(u=>{const[p,g]=u,y=this.scroll.find(p,!0),w=y.offset(this.scroll);return g===0?w:y instanceof rs?w+y.index(p,g):w+y.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),a=Math.min(i,...r);return new ou(a,i-a)}normalizeNative(e){if(!vb(this.root,e.startContainer)||!e.collapsed&&!vb(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:i,offset:a}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>a)i=i.childNodes[a],a=0;else if(i.childNodes.length===a)i=i.lastChild,i instanceof Text?a=i.data.length:i.childNodes.length>0?a=i.childNodes.length:a=i.childNodes.length+1;else break;r.node=i,r.offset=a}),n}rangeToNative(e){const n=this.scroll.length(),r=(i,a)=>{i=Math.min(n-1,i);const[u,p]=this.scroll.leaf(i);return u?u.position(p,a):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(yb.info("setNativeRange",e,n,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const u=document.getSelection();if(u!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:p}=this.getNativeRange()||{};if(p==null||a||e!==p.startContainer||n!==p.startOffset||r!==p.endContainer||i!==p.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const g=document.createRange();g.setStart(e,n),g.setEnd(r,i),u.removeAllRanges(),u.addRange(g)}}else u.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lt.sources.API;if(typeof n=="string"&&(r=n,n=!1),yb.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lt.sources.USER;const n=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!Ql(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const u=this.cursor.restore();u&&this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)}const a=[Lt.events.SELECTION_CHANGE,bf(this.lastRange),bf(n),e];this.emitter.emit(Lt.events.EDITOR_CHANGE,...a),e!==Lt.sources.SILENT&&this.emitter.emit(...a)}}}function vb(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const Xte=/^[ -~]*$/;class Qte{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=$T(e),i=new Ut;return Jte(r.ops.slice()).reduce((u,p)=>{const g=Aa.Op.length(p);let y=p.attributes||{},w=!1,S=!1;if(p.insert!=null){if(i.retain(g),typeof p.insert=="string"){const N=p.insert;S=!N.endsWith(`
`)&&(n<=u||!!this.scroll.descendant(Sa,u)[0]),this.scroll.insertAt(u,N);const[R,M]=this.scroll.line(u);let L=ic({},ba(R));if(R instanceof Zi){const[k]=R.descendant(rs,M);k&&(L=ic(L,ba(k)))}y=Aa.AttributeMap.diff(L,y)||{}}else if(typeof p.insert=="object"){const N=Object.keys(p.insert)[0];if(N==null)return u;const R=this.scroll.query(N,zt.INLINE)!=null;if(R)(n<=u||this.scroll.descendant(Sa,u)[0])&&(S=!0);else if(u>0){const[M,L]=this.scroll.descendant(rs,u-1);M instanceof Wa?M.value()[L]!==`
`&&(w=!0):M instanceof ra&&M.statics.scope===zt.INLINE_BLOT&&(w=!0)}if(this.scroll.insertAt(u,N,p.insert[N]),R){const[M]=this.scroll.descendant(rs,u);if(M){const L=ic({},ba(M));y=Aa.AttributeMap.diff(L,y)||{}}}}n+=g}else if(i.push(p),p.retain!==null&&typeof p.retain=="object"){const N=Object.keys(p.retain)[0];if(N==null)return u;this.scroll.updateEmbedAt(u,N,p.retain[N])}Object.keys(y).forEach(N=>{this.scroll.formatAt(u,g,N,y[N])});const _=w?1:0,C=S?1:0;return n+=_+C,i.retain(_),i.delete(C),u+g+_+C},0),i.reduce((u,p)=>typeof p.delete=="number"?(this.scroll.deleteAt(u,p.delete),u):u+Aa.Op.length(p),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new Ut().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(a=>{this.scroll.lines(e,Math.max(n,1)).forEach(u=>{u.format(a,r[a])})}),this.scroll.optimize();const i=new Ut().retain(e).retain(n,bf(r));return this.update(i)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(a=>{this.scroll.formatAt(e,n,a,r[a])});const i=new Ut().retain(e).retain(n,bf(r));return this.update(i)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new Ut)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];n===0?this.scroll.path(e).forEach(p=>{const[g]=p;g instanceof Zi?r.push(g):g instanceof rs&&i.push(g)}):(r=this.scroll.lines(e,n),i=this.scroll.descendants(rs,e,n));const[a,u]=[r,i].map(p=>{const g=p.shift();if(g==null)return{};let y=ba(g);for(;Object.keys(y).length>0;){const w=p.shift();if(w==null)return y;y=Zte(ba(w),y)}return y});return{...a,...u}}getHTML(e,n){const[r,i]=this.scroll.line(e);if(r){const a=r.length();return r.length()>=i+n&&!(i===0&&n===a)?Ld(r,i,n,!0):Ld(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=$T(n),i=new Ut().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new Ut().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n.length,i,r[i])}),this.update(new Ut().retain(e).insert(n,bf(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Zi.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof Za}removeFormat(e,n){const r=this.getText(e,n),[i,a]=this.scroll.line(e+n);let u=0,p=new Ut;i!=null&&(u=i.length()-a,p=i.delta().slice(a,a+u-1).insert(`
`));const y=this.getContents(e,n+u).diff(new Ut().insert(r).concat(p)),w=new Ut().retain(e).concat(y);return this.applyDelta(w)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(Xte)&&this.scroll.find(n[0].target)){const a=this.scroll.find(n[0].target),u=ba(a),p=a.offset(this.scroll),g=n[0].oldValue.replace(Va.CONTENTS,""),y=new Ut().insert(g),w=new Ut().insert(a.value()),S=r&&{oldRange:VT(r.oldRange,-p),newRange:VT(r.newRange,-p)};e=new Ut().retain(p).concat(y.diff(w,S)).reduce((C,N)=>N.insert?C.insert(N.insert,u):C.push(N),new Ut),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!Ql(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function rf(t,e,n){if(t.length===0){const[C]=bb(n.pop());return e<=0?`</li></${C}>`:`</li></${C}>${rf([],e-1,n)}`}const[{child:r,offset:i,length:a,indent:u,type:p},...g]=t,[y,w]=bb(p);if(u>e)return n.push(p),u===e+1?`<${y}><li${w}>${Ld(r,i,a)}${rf(g,u,n)}`:`<${y}><li>${rf(t,e+1,n)}`;const S=n[n.length-1];if(u===e&&p===S)return`</li><li${w}>${Ld(r,i,a)}${rf(g,u,n)}`;const[_]=bb(n.pop());return`</li></${_}>${rf(t,e-1,n)}`}function Ld(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof Wa)return Z1(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof Ka){if(t.statics.blotName==="list-container"){const y=[];return t.children.forEachAt(e,n,(w,S,_)=>{const C="formats"in w&&typeof w.formats=="function"?w.formats():{};y.push({child:w,offset:S,length:_,indent:C.indent||0,type:C.list})}),rf(y,-1,[])}const i=[];if(t.children.forEachAt(e,n,(y,w,S)=>{i.push(Ld(y,w,S))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:a,innerHTML:u}=t.domNode,[p,g]=a.split(`>${u}<`);return p==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${g}`:`${p}>${i.join("")}<${g}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Zte(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n},{})}function bb(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function $T(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new Ut)}function VT(t,e){let{index:n,length:r}=t;return new ou(n+e,r)}function Jte(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,a)=>{a&&e.push({insert:`
`,attributes:n.attributes}),i&&e.push({insert:i,attributes:n.attributes})}):e.push(n)}),e}class Co{static DEFAULTS={};constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}const d0="\uFEFF";class AE extends ra{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(d0),this.rightGuard=document.createTextNode(d0),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const i=e.data.split(d0).join("");if(e===this.leftGuard)if(this.prev instanceof Wa){const a=this.prev.length();this.prev.insertAt(a,i),n={startNode:this.prev.domNode,startOffset:a+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof Wa?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:i.length}));return e.data=d0,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(n.range=i)}})}}class ene{isComposing=!1;constructor(e,n){this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof AE)&&(this.emitter.emit(Lt.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Lt.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Lt.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Lt.events.COMPOSITION_END,e),this.isComposing=!1}}class Kf{static DEFAULTS={modules:{}};static themes={default:Kf};modules={};constructor(e,n){this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}}const tne=t=>t.parentElement||t.getRootNode().host||null,nne=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},p0=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},HT=(t,e,n,r,i,a)=>t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+a:0,rne=(t,e)=>{const n=t.ownerDocument;let r=e,i=t;for(;i;){const a=i===n.body,u=a?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:nne(i),p=getComputedStyle(i),g=HT(r.left,r.right,u.left,u.right,p0(p.scrollPaddingLeft),p0(p.scrollPaddingRight)),y=HT(r.top,r.bottom,u.top,u.bottom,p0(p.scrollPaddingTop),p0(p.scrollPaddingBottom));if(g||y)if(a)n.defaultView?.scrollBy(g,y);else{const{scrollLeft:w,scrollTop:S}=i;y&&(i.scrollTop+=y),g&&(i.scrollLeft+=g);const _=i.scrollLeft-w,C=i.scrollTop-S;r={left:r.left-_,top:r.top-C,right:r.right-_,bottom:r.bottom-C}}i=a||p.position==="fixed"?null:tne(i)}},ine=100,sne=["block","break","cursor","inline","scroll","text"],ane=(t,e,n)=>{const r=new kf;return sne.forEach(i=>{const a=e.query(i);a&&r.register(a)}),t.forEach(i=>{let a=e.query(i);a||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let u=0;for(;a;)if(r.register(a),a="blotName"in a?a.requiredContainer??null:null,u+=1,u>ine){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},Ef=dl("quill"),m0=new kf;Ka.uiClass="ql-ui";class rt{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:m0,theme:"default"};static events=Lt.events;static sources=Lt.sources;static version="2.0.3";static imports={delta:Ut,parchment:Ute,"core/module":Co,"core/theme":Kf};static debug(e){e===!0&&(e="log"),dl.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Kw.get(e)||m0.find(e,n)}static import(e){return this.imports[e]==null&&Ef.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(i=>{this.register(i,e[i],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&Ef.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&m0.register(n),typeof n.register=="function"&&n.register(m0)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=one(e,n),this.container=this.options.container,this.container==null){Ef.error("Invalid Quill container",e);return}this.options.debug&&rt.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Kw.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Lt;const i=_E.blotName,a=this.options.registry.query(i);if(!a||!("blotName"in a))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new a(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Qte(this.scroll),this.selection=new Wte(this.scroll,this.emitter),this.composition=new ene(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Lt.events.EDITOR_CHANGE,u=>{u===Lt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Lt.events.SCROLL_UPDATE,(u,p)=>{const g=this.selection.lastRange,[y]=this.selection.getRange(),w=g&&y?{oldRange:g,newRange:y}:void 0;Ua.call(this,()=>this.editor.update(null,p,w),u)}),this.emitter.on(Lt.events.SCROLL_EMBED_UPDATE,(u,p)=>{const g=this.selection.lastRange,[y]=this.selection.getRange(),w=g&&y?{oldRange:g,newRange:y}:void 0;Ua.call(this,()=>{const S=new Ut().retain(u.offset(this)).retain({[u.statics.blotName]:p});return this.editor.update(S,[],w)},rt.sources.USER)}),r){const u=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(u)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=Zo(e,n,r),Ua.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lt.sources.API;return Ua.call(this,()=>{const i=this.getSelection(!0);let a=new Ut;if(i==null)return a;if(this.scroll.query(e,zt.BLOCK))a=this.editor.formatLine(i.index,i.length,{[e]:n});else{if(i.length===0)return this.selection.format(e,n),a;a=this.editor.formatText(i.index,i.length,{[e]:n})}return this.setSelection(i,Lt.sources.SILENT),a},r)}formatLine(e,n,r,i,a){let u;return[e,n,u,a]=Zo(e,n,r,i,a),Ua.call(this,()=>this.editor.formatLine(e,n,u),a,e,0)}formatText(e,n,r,i,a){let u;return[e,n,u,a]=Zo(e,n,r,i,a),Ua.call(this,()=>this.editor.formatText(e,n,u),a,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Zo(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Zo(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Zo(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:rt.sources.API;return Ua.call(this,()=>this.editor.insertEmbed(e,n,r),i,e)}insertText(e,n,r,i,a){let u;return[e,,u,a]=Zo(e,0,r,i,a),Ua.call(this,()=>this.editor.insertText(e,n,u),a,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=Zo(e,n,r),Ua.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){rne(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lt.sources.API;return Ua.call(this,()=>{e=new Ut(e);const r=this.getLength(),i=this.editor.deleteText(0,r),a=this.editor.insertContents(0,e),u=this.editor.deleteText(this.getLength()-1,1);return i.compose(a).compose(u)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||rt.sources.API):([e,n,,r]=Zo(e,n,r),this.selection.setRange(new ou(Math.max(0,e),n),r),r!==Lt.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lt.sources.API;const r=new Ut().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lt.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lt.sources.API;return Ua.call(this,()=>(e=new Ut(e),this.editor.applyDelta(e)),n,!0)}}function KT(t){return typeof t=="string"?document.querySelector(t):t}function wb(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,i]=n;return{...e,[r]:i===!0?{}:i}},{})}function GT(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function one(t,e){const n=KT(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===rt.DEFAULTS.theme?Kf:rt.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:a,...u}=rt.DEFAULTS,{modules:p,...g}=i.DEFAULTS;let y=wb(e.modules);y!=null&&y.toolbar&&y.toolbar.constructor!==Object&&(y={...y,toolbar:{container:y.toolbar}});const w=ic({},wb(a),wb(p),y),S={...u,...GT(g),...GT(e)};let _=e.registry;return _?e.formats&&Ef.warn('Ignoring "formats" option because "registry" is specified'):_=e.formats?ane(e.formats,S.registry,Ef):S.registry,{...S,registry:_,container:n,theme:i,modules:Object.entries(w).reduce((C,N)=>{let[R,M]=N;if(!M)return C;const L=rt.import(`modules/${R}`);return L==null?(Ef.error(`Cannot load ${R} module. Are you sure you registered it?`),C):{...C,[R]:ic({},L.DEFAULTS||{},M)}},{}),bounds:KT(S.bounds)}}function Ua(t,e,n,r){if(!this.isEnabled()&&e===Lt.sources.USER&&!this.allowReadOnlyEdits)return new Ut;let i=n==null?null:this.getSelection();const a=this.editor.delta,u=t();if(i!=null&&(n===!0&&(n=i.index),r==null?i=YT(i,u,e):r!==0&&(i=YT(i,n,r,e)),this.setSelection(i,Lt.sources.SILENT)),u.length()>0){const p=[Lt.events.TEXT_CHANGE,u,a,e];this.emitter.emit(Lt.events.EDITOR_CHANGE,...p),e!==Lt.sources.SILENT&&this.emitter.emit(...p)}return u}function Zo(t,e,n,r,i){let a={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=n,n=e,e=0),typeof n=="object"?(a=n,i=r):typeof n=="string"&&(r!=null?a[n]=r:i=n),i=i||Lt.sources.API,[t,e,a,i]}function YT(t,e,n,r){const i=typeof n=="number"?n:0;if(t==null)return null;let a,u;return e&&typeof e.transformPosition=="function"?[a,u]=[t.index,t.index+t.length].map(p=>e.transformPosition(p,r!==Lt.sources.USER)):[a,u]=[t.index,t.index+t.length].map(p=>p<e||p===e&&r===Lt.sources.USER?p:i>=0?p+i:Math.max(e,p+i)),new ou(a,u-a)}class mu extends Q1{}function WT(t){return t instanceof Zi||t instanceof Sa}function XT(t){return typeof t.updateContent=="function"}class lne extends _E{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Zi;static allowedChildren=[Zi,Sa,mu];constructor(e,n,r){let{emitter:i}=r;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",a=>this.handleDragStart(a))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Lt.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Lt.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(Lt.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,i]=this.line(e),[a]=this.line(e+n);if(super.deleteAt(e,n),a!=null&&r!==a&&i>0){if(r instanceof Sa||a instanceof Sa){this.optimize();return}const u=a.children.head instanceof Za?null:a.children.head;r.moveChildren(a,u),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,zt.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===zt.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new Ut().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const a=r.shift();if(a){const g=a.type==="block"&&(a.delta.length()===0||!this.descendant(Sa,e)[0]&&e<this.length()),y=a.type==="block"?a.delta:new Ut().insert({[a.key]:a.value});Eb(this,e,y);const w=a.type==="block"?1:0,S=e+y.length()+w;g&&this.insertAt(S-1,`
`);const _=ba(this.line(e)[0]),C=Aa.AttributeMap.diff(_,a.attributes)||{};Object.keys(C).forEach(N=>{this.formatAt(S-1,1,N,C[N])}),e=S}let[u,p]=this.children.find(e);if(r.length&&(u&&(u=u.split(p),p=0),r.forEach(g=>{if(g.type==="block"){const y=this.createBlock(g.attributes,u||void 0);Eb(y,0,g.delta)}else{const y=this.create(g.key,g.value);this.insertBefore(y,u||void 0),Object.keys(g.attributes).forEach(w=>{y.format(w,g.attributes[w])})}})),i.type==="block"&&i.delta.length()){const g=u?u.offset(u.scroll)+p:this.length();Eb(this,g,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof rs?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(WT,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,a,u)=>{let p=[],g=u;return i.children.forEachAt(a,u,(y,w,S)=>{WT(y)?p.push(y):y instanceof Q1&&(p=p.concat(r(y,w,g))),g-=S}),p};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(Lt.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=Lt.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const a=this.find(i,!0);return a&&!XT(a)}),e.length>0&&this.emitter.emit(Lt.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Lt.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[i]=this.descendant(a=>a instanceof Sa,e);i&&i.statics.blotName===n&&XT(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new Ut;return e.forEach(i=>{const a=i?.insert;if(a)if(typeof a=="string"){const u=a.split(`
`);u.slice(0,-1).forEach(g=>{r.insert(g,i.attributes),n.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new Ut});const p=u[u.length-1];p&&r.insert(p,i.attributes)}else{const u=Object.keys(a)[0];if(!u)return;this.query(u,zt.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new Ut,n.push({type:"blockEmbed",key:u,value:a[u],attributes:i.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const i={};Object.entries(e).forEach(p=>{let[g,y]=p;this.query(g,zt.BLOCK&zt.BLOT)!=null?r=g:i[g]=y});const a=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(a,n||void 0);const u=a.length();return Object.entries(i).forEach(p=>{let[g,y]=p;a.formatAt(0,u,g,y)}),a}}function Eb(t,e,n){n.reduce((r,i)=>{const a=Aa.Op.length(i);let u=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const p=i.insert;t.insertAt(r,p);const[g]=t.descendant(rs,r),y=ba(g);u=Aa.AttributeMap.diff(y,u)||{}}else if(typeof i.insert=="object"){const p=Object.keys(i.insert)[0];if(p==null)return r;if(t.insertAt(r,p,i.insert[p]),t.scroll.query(p,zt.INLINE)!=null){const[y]=t.descendant(rs,r),w=ba(y);u=Aa.AttributeMap.diff(w,u)||{}}}}return Object.keys(u).forEach(p=>{t.formatAt(r,a,p,u[p])}),r+a},e)}const CE={scope:zt.BLOCK,whitelist:["right","center","justify"]},cne=new Eo("align","align",CE),XI=new Qa("align","ql-align",CE),QI=new vc("align","text-align",CE);class ZI extends vc{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const une=new Qa("color","ql-color",{scope:zt.INLINE}),NE=new ZI("color","color",{scope:zt.INLINE}),fne=new Qa("background","ql-bg",{scope:zt.INLINE}),TE=new ZI("background","background-color",{scope:zt.INLINE});class gu extends mu{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${Z1(this.code(e,n))}
</pre>`}}class ms extends Zi{static TAB="  ";static register(){rt.register(gu)}}class OE extends ds{}OE.blotName="code";OE.tagName="CODE";ms.blotName="code-block";ms.className="ql-code-block";ms.tagName="DIV";gu.blotName="code-block-container";gu.className="ql-code-block-container";gu.tagName="DIV";gu.allowedChildren=[ms];ms.allowedChildren=[Wa,Za,Va];ms.requiredContainer=gu;const RE={scope:zt.BLOCK,whitelist:["rtl"]},JI=new Eo("direction","dir",RE),eM=new Qa("direction","ql-direction",RE),tM=new vc("direction","direction",RE),nM={scope:zt.INLINE,whitelist:["serif","monospace"]},rM=new Qa("font","ql-font",nM);class hne extends vc{value(e){return super.value(e).replace(/["']/g,"")}}const iM=new hne("font","font-family",nM),sM=new Qa("size","ql-size",{scope:zt.INLINE,whitelist:["small","large","huge"]}),aM=new vc("size","font-size",{scope:zt.INLINE,whitelist:["10px","18px","32px"]}),dne=dl("quill:keyboard"),pne=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class J1 extends Co{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=gne(e);if(i==null){dne.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(u=>{const p={...i,key:u,...n,...r};this.bindings[p.key]=this.bindings[p.key]||[],this.bindings[p.key].push(p)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(L=>J1.match(e,L));if(i.length===0)return;const a=rt.find(e.target,!0);if(a&&a.scroll!==this.quill.scroll)return;const u=this.quill.getSelection();if(u==null||!this.quill.hasFocus())return;const[p,g]=this.quill.getLine(u.index),[y,w]=this.quill.getLeaf(u.index),[S,_]=u.length===0?[y,w]:this.quill.getLeaf(u.index+u.length),C=y instanceof g1?y.value().slice(0,w):"",N=S instanceof g1?S.value().slice(_):"",R={collapsed:u.length===0,empty:u.length===0&&p.length()<=1,format:this.quill.getFormat(u),line:p,offset:g,prefix:C,suffix:N,event:e};i.some(L=>{if(L.collapsed!=null&&L.collapsed!==R.collapsed||L.empty!=null&&L.empty!==R.empty||L.offset!=null&&L.offset!==R.offset)return!1;if(Array.isArray(L.format)){if(L.format.every(k=>R.format[k]==null))return!1}else if(typeof L.format=="object"&&!Object.keys(L.format).every(k=>L.format[k]===!0?R.format[k]!=null:L.format[k]===!1?R.format[k]==null:Ql(L.format[k],R.format[k])))return!1;return L.prefix!=null&&!L.prefix.test(R.prefix)||L.suffix!=null&&!L.suffix.test(R.suffix)?!1:L.handler.call(this,u,R,L)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[a]=this.quill.getLine(e.index);let u=new Ut().retain(e.index-r).delete(r);if(n.offset===0){const[p]=this.quill.getLine(e.index-1);if(p&&!(p.statics.blotName==="block"&&p.length()<=1)){const y=a.formats(),w=this.quill.getFormat(e.index-1,1);if(i=Aa.AttributeMap.diff(y,w)||{},Object.keys(i).length>0){const S=new Ut().retain(e.index+a.length()-2).retain(1,i);u=u.compose(S)}}}this.quill.updateContents(u,rt.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[a]=this.quill.getLine(e.index);let u=new Ut().retain(e.index).delete(r);if(n.offset>=a.length()-1){const[p]=this.quill.getLine(e.index+1);if(p){const g=a.formats(),y=this.quill.getFormat(e.index,1);i=Aa.AttributeMap.diff(g,y)||{},Object.keys(i).length>0&&(u=u.retain(p.length()-1).retain(1,i))}}this.quill.updateContents(u,rt.sources.USER),this.quill.focus()}handleDeleteRange(e){IE({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((a,u)=>(this.quill.scroll.query(u,zt.BLOCK)&&!Array.isArray(n.format[u])&&(a[u]=n.format[u]),a),{}),i=new Ut().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,rt.sources.USER),this.quill.setSelection(e.index+1,rt.sources.SILENT),this.quill.focus()}}const mne={bindings:{bold:Sb("bold"),italic:Sb("italic"),underline:Sb("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",rt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",rt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",rt.sources.USER):e.format.list!=null&&this.quill.format("list",!1,rt.sources.USER)}},"indent code-block":QT(!0),"outdent code-block":QT(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,rt.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new Ut().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,rt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,rt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,rt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,rt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new Ut().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,rt.sources.USER),this.quill.setSelection(t.index+1,rt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),i=new Ut().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,rt.sources.USER),this.quill.setSelection(t.index+1,rt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,i,a]=e.getTable(t),u=yne(n,r,i,a);if(u==null)return;let p=n.offset();if(u<0){const g=new Ut().retain(p).insert(`
`);this.quill.updateContents(g,rt.sources.USER),this.quill.setSelection(t.index+1,t.length,rt.sources.SILENT)}else if(u>0){p+=n.length();const g=new Ut().retain(p).insert(`
`);this.quill.updateContents(g,rt.sources.USER),this.quill.setSelection(p,rt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,rt.sources.USER):this.quill.setSelection(i+r.length(),rt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>n)return!0;let a;switch(e.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":case"*":a="bullet";break;default:a="ordered"}this.quill.insertText(t.index," ",rt.sources.USER),this.quill.history.cutoff();const u=new Ut().retain(t.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:a});return this.quill.updateContents(u,rt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,rt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const a=new Ut().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(a,rt.sources.USER),this.quill.setSelection(t.index-1,rt.sources.SILENT),!1}return!0}},"embed left":g0("ArrowLeft",!1),"embed left shift":g0("ArrowLeft",!0),"embed right":g0("ArrowRight",!1),"embed right shift":g0("ArrowRight",!0),"table down":ZT(!1),"table up":ZT(!0)}};J1.DEFAULTS=mne;function QT(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const i=this.quill.scroll.query("code-block"),{TAB:a}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,a,rt.sources.USER),this.quill.setSelection(e.index+a.length,rt.sources.SILENT);return}const u=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:p,length:g}=e;u.forEach((y,w)=>{t?(y.insertAt(0,a),w===0?p+=a.length:g+=a.length):y.domNode.textContent.startsWith(a)&&(y.deleteAt(0,a.length),w===0?p-=a.length:g-=a.length)}),this.quill.update(rt.sources.USER),this.quill.setSelection(p,g,rt.sources.SILENT)}}}function g0(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[a]=this.quill.getLeaf(i);return a instanceof ra?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,rt.sources.USER):this.quill.setSelection(r.index-1,rt.sources.USER):e?this.quill.setSelection(r.index,r.length+1,rt.sources.USER):this.quill.setSelection(r.index+r.length+1,rt.sources.USER),!1):!0}}}function Sb(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],rt.sources.USER)}}}function ZT(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",i=n.line,a=i.parent[r];if(a!=null){if(a.statics.blotName==="table-row"){let u=a.children.head,p=i;for(;p.prev!=null;)p=p.prev,u=u.next;const g=u.offset(this.quill.scroll)+Math.min(n.offset,u.length()-1);this.quill.setSelection(g,0,rt.sources.USER)}}else{const u=i.table()[r];u!=null&&(t?this.quill.setSelection(u.offset(this.quill.scroll)+u.length()-1,0,rt.sources.USER):this.quill.setSelection(u.offset(this.quill.scroll),0,rt.sources.USER))}return!1}}}function gne(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=bf(t);else return null;return t.shortKey&&(t[pne]=t.shortKey,delete t.shortKey),t}function IE(t){let{quill:e,range:n}=t;const r=e.getLines(n);let i={};if(r.length>1){const a=r[0].formats(),u=r[r.length-1].formats();i=Aa.AttributeMap.diff(u,a)||{}}e.deleteText(n,rt.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,rt.sources.USER),e.setSelection(n.index,rt.sources.SILENT)}function yne(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const vne=/font-weight:\s*normal/,bne=["P","OL","UL"],JT=t=>t&&bne.includes(t.tagName),wne=t=>{Array.from(t.querySelectorAll("br")).filter(e=>JT(e.previousElementSibling)&&JT(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},Ene=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(vne)).forEach(e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)})};function Sne(t){t.querySelector('[id^="docs-internal-guid-"]')&&(Ene(t),wne(t))}const xne=/\bmso-list:[^;]*ignore/i,_ne=/\bmso-list:[^;]*\bl(\d+)/i,Ane=/\bmso-list:[^;]*\blevel(\d+)/i,Cne=(t,e)=>{const n=t.getAttribute("style"),r=n?.match(_ne);if(!r)return null;const i=Number(r[1]),a=n?.match(Ane),u=a?Number(a[1]):1,p=new RegExp(`@list l${i}:level${u}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),g=e.match(p),y=g&&g[1]==="bullet"?"bullet":"ordered";return{id:i,indent:u,type:y,element:t}},Nne=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(u=>{(u.getAttribute("style")||"").match(xne)?n.push(u):r.push(u)}),n.forEach(u=>u.parentNode?.removeChild(u));const i=t.documentElement.innerHTML,a=r.map(u=>Cne(u,i)).filter(u=>u);for(;a.length;){const u=[];let p=a.shift();for(;p;)u.push(p),p=a.length&&a[0]?.element===p.element.nextElementSibling&&a[0].id===p.id?a.shift():null;const g=document.createElement("ul");u.forEach(S=>{const _=document.createElement("li");_.setAttribute("data-list",S.type),S.indent>1&&_.setAttribute("class",`ql-indent-${S.indent-1}`),_.innerHTML=S.element.innerHTML,g.appendChild(_)});const y=u[0]?.element,{parentNode:w}=y??{};y&&w?.replaceChild(g,y),u.slice(1).forEach(S=>{let{element:_}=S;w?.removeChild(_)})}};function Tne(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Nne(t)}const One=[Tne,Sne],Rne=t=>{t.documentElement&&One.forEach(e=>{e(t)})},Ine=dl("quill:clipboard"),Mne=[[Node.TEXT_NODE,Hne],[Node.TEXT_NODE,t6],["br",Bne],[Node.ELEMENT_NODE,t6],[Node.ELEMENT_NODE,Pne],[Node.ELEMENT_NODE,jne],[Node.ELEMENT_NODE,$ne],["li",Fne],["ol, ul",qne],["pre",Une],["tr",Vne],["b",xb("bold")],["i",xb("italic")],["strike",xb("strike")],["style",zne]],Dne=[cne,JI].reduce((t,e)=>(t[e.keyName]=e,t),{}),e6=[QI,TE,NE,tM,iM,aM].reduce((t,e)=>(t[e.keyName]=e,t),{});class Lne extends Co{static DEFAULTS={matchers:[]};constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Mne.concat(this.options.matchers??[]).forEach(r=>{let[i,a]=r;this.addMatcher(i,a)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[ms.blotName])return new Ut().insert(r||"",{[ms.blotName]:i[ms.blotName]});if(!n)return new Ut().insert(r||"",i);const a=this.convertHTML(n);return op(a,`
`)&&(a.ops[a.ops.length-1].attributes==null||i.table)?a.compose(new Ut().retain(a.length()-1).delete(1)):a}normalizeHTML(e){Rne(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[a,u]=this.prepareMatching(r,i);return ME(this.quill.scroll,r,a,u,i)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,rt.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new Ut().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),rt.sources.SILENT)}}onCaptureCopy(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:a}=this.onCopy(r,n);e.clipboardData?.setData("text/plain",a),e.clipboardData?.setData("text/html",i),n&&IE({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=e.clipboardData?.getData("text/html");let i=e.clipboardData?.getData("text/plain");if(!r&&!i){const u=e.clipboardData?.getData("text/uri-list");u&&(i=this.normalizeURIList(u))}const a=Array.from(e.clipboardData?.files||[]);if(!r&&a.length>0){this.quill.uploader.upload(n,a);return}if(r&&a.length>0){const u=new DOMParser().parseFromString(r,"text/html");if(u.body.childElementCount===1&&u.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,a);return}}this.onPaste(n,{html:r,text:i})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:i}=n;const a=this.quill.getFormat(e.index),u=this.convert({text:r,html:i},a);Ine.log("onPaste",u,{text:r,html:i});const p=new Ut().retain(e.index).delete(e.length).concat(u);this.quill.updateContents(p,rt.sources.USER),this.quill.setSelection(p.length()-e.length,rt.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],i=[];return this.matchers.forEach(a=>{const[u,p]=a;switch(u){case Node.TEXT_NODE:i.push(p);break;case Node.ELEMENT_NODE:r.push(p);break;default:Array.from(e.querySelectorAll(u)).forEach(g=>{n.has(g)?n.get(g)?.push(p):n.set(g,[p])});break}}),[r,i]}}function yu(t,e,n,r){return r.query(e)?t.reduce((i,a)=>{if(!a.insert)return i;if(a.attributes&&a.attributes[e])return i.push(a);const u=n?{[e]:n}:{};return i.insert(a.insert,{...u,...a.attributes})},new Ut):t}function op(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*e.length)===e}function ec(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof ra?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function kne(t,e){return t.previousElementSibling&&t.nextElementSibling&&!ec(t.previousElementSibling,e)&&!ec(t.nextElementSibling,e)}const y0=new WeakMap;function oM(t){return t==null?!1:(y0.has(t)||(t.tagName==="PRE"?y0.set(t,!0):y0.set(t,oM(t.parentNode))),y0.get(t))}function ME(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((a,u)=>u(e,a,t),new Ut):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((a,u)=>{let p=ME(t,u,n,r,i);return u.nodeType===e.ELEMENT_NODE&&(p=n.reduce((g,y)=>y(u,g,t),p),p=(i.get(u)||[]).reduce((g,y)=>y(u,g,t),p)),a.concat(p)},new Ut):new Ut}function xb(t){return(e,n,r)=>yu(n,t,!0,r)}function jne(t,e,n){const r=Eo.keys(t),i=Qa.keys(t),a=vc.keys(t),u={};return r.concat(i).concat(a).forEach(p=>{let g=n.query(p,zt.ATTRIBUTE);g!=null&&(u[g.attrName]=g.value(t),u[g.attrName])||(g=Dne[p],g!=null&&(g.attrName===p||g.keyName===p)&&(u[g.attrName]=g.value(t)||void 0),g=e6[p],g!=null&&(g.attrName===p||g.keyName===p)&&(g=e6[p],u[g.attrName]=g.value(t)||void 0))}),Object.entries(u).reduce((p,g)=>{let[y,w]=g;return yu(p,y,w,n)},e)}function Pne(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof ra){const i={},a=r.value(t);if(a!=null)return i[r.blotName]=a,new Ut().insert(i,r.formats(t,n))}else if(r.prototype instanceof Dd&&!op(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return yu(e,r.blotName,r.formats(t,n),n);return e}function Bne(t,e){return op(e,`
`)||e.insert(`
`),e}function Une(t,e,n){const r=n.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return yu(e,"code-block",i,n)}function zne(){return new Ut}function Fne(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!op(e,`
`))return e;let i=-1,a=t.parentNode;for(;a!=null;)["OL","UL"].includes(a.tagName)&&(i+=1),a=a.parentNode;return i<=0?e:e.reduce((u,p)=>p.insert?p.attributes&&typeof p.attributes.indent=="number"?u.push(p):u.insert(p.insert,{indent:i,...p.attributes||{}}):u,new Ut)}function qne(t,e,n){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const a=r.getAttribute("data-checked");return a&&(i=a==="true"?"checked":"unchecked"),yu(e,"list",i,n)}function t6(t,e,n){if(!op(e,`
`)){if(ec(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(ec(r,n))return e.insert(`
`);const i=n.query(r);if(i&&i.prototype instanceof Sa)return e.insert(`
`);r=r.firstChild}}}return e}function $ne(t,e,n){const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),(i.fontWeight?.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((a,u)=>{let[p,g]=u;return yu(a,p,g,n)},e),parseFloat(i.textIndent||0)>0?new Ut().insert("	").concat(e):e}function Vne(t,e,n){const r=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(r!=null){const a=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return yu(e,"table",a,n)}return e}function Hne(t,e,n){let r=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!oM(t)){if(r.trim().length===0&&r.includes(`
`)&&!kne(t,n))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&ec(t.parentElement,n)||t.previousSibling instanceof Element&&ec(t.previousSibling,n))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&ec(t.parentElement,n)||t.nextSibling instanceof Element&&ec(t.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class Kne extends Co{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,n){super(e,n),this.quill.on(rt.events.EDITOR_CHANGE,(r,i,a,u)=>{r===rt.events.SELECTION_CHANGE?i&&u!==rt.sources.SILENT&&(this.currentRange=i):r===rt.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||u===rt.sources.USER?this.record(i,a):this.transform(i)),this.currentRange=Ww(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const i=this.quill.getContents(),a=r.delta.invert(i);this.stack[n].push({delta:a,range:Ww(r.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,rt.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(n),i=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const u=this.stack.undo.pop();u&&(r=r.compose(u.delta),i=u.range)}else this.lastRecorded=a;r.length()!==0&&(this.stack.undo.push({delta:r,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){n6(this.stack.undo,e),n6(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,rt.sources.USER);else{const n=Yne(this.quill.scroll,e.delta);this.quill.setSelection(n,rt.sources.USER)}}}function n6(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&Ww(i.range,n)},n=i.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function Gne(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,zt.BLOCK)!=null):!1}function Yne(t,e){const n=e.reduce((i,a)=>i+(a.delete||0),0);let r=e.length()-n;return Gne(t,e)&&(r-=1),r}function Ww(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class lM extends Co{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(u.offsetNode,u.offset),i.setEnd(u.offsetNode,u.offset)}const a=i&&e.selection.normalizeNative(i);if(a){const u=e.selection.normalizedToRange(a);r.dataTransfer?.files&&this.upload(u,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(i=>{i&&this.options.mimetypes?.includes(i.type)&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}lM.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(i=>{const a=new FileReader;a.onload=()=>{i(a.result)},a.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((a,u)=>a.insert({image:u}),new Ut().retain(t.index).delete(t.length));this.quill.updateContents(i,Lt.sources.USER),this.quill.setSelection(t.index+r.length,Lt.sources.SILENT)})}};const Wne=["insertText","insertReplacementText"];class Xne extends Co{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(rt.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){IE({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Ut().retain(e.index).insert(n,r),rt.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,rt.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!Wne.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=Qne(e);if(r==null)return;const i=this.quill.selection.normalizeNative(n),a=i?this.quill.selection.normalizedToRange(i):null;a&&this.replaceText(a,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function Qne(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const Zne=/Mac/i.test(navigator.platform),Jne=100,ere=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||Zne&&t.key==="a"&&t.ctrlKey===!0);class tre extends Co{isListening=!1;selectionChangeDeadline=0;constructor(e,n){super(e,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:r,event:i}=n;if(!(r instanceof Ka)||!r.uiNode)return!0;const a=getComputedStyle(r.domNode).direction==="rtl";return a&&i.key!=="ArrowRight"||!a&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(i.shiftKey?1:0),rt.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&ere(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Jne,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const r=this.quill.scroll.find(n.startContainer);if(!(r instanceof Ka)||!r.uiNode)return;const i=document.createRange();i.setStartAfter(r.uiNode),i.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(i)}}rt.register({"blots/block":Zi,"blots/block/embed":Sa,"blots/break":Za,"blots/container":mu,"blots/cursor":Va,"blots/embed":AE,"blots/inline":ds,"blots/scroll":lne,"blots/text":Wa,"modules/clipboard":Lne,"modules/history":Kne,"modules/keyboard":J1,"modules/uploader":lM,"modules/input":Xne,"modules/uiNode":tre});class nre extends Qa{add(e,n){let r=0;if(n==="+1"||n==="-1"){const i=this.value(e)||0;r=n==="+1"?i+1:i-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const rre=new nre("indent","ql-indent",{scope:zt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class ire extends Zi{static blotName="blockquote";static tagName="blockquote"}class sre extends Zi{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class lp extends mu{}lp.blotName="list-container";lp.tagName="OL";class cp extends Zi{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){rt.register(lp)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),i=a=>{if(!e.isEnabled())return;const u=this.statics.formats(n,e);u==="checked"?(this.format("list","unchecked"),a.preventDefault()):u==="unchecked"&&(this.format("list","checked"),a.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}cp.blotName="list";cp.tagName="LI";lp.allowedChildren=[cp];cp.requiredContainer=lp;class DE extends ds{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class are extends DE{static blotName="italic";static tagName=["EM","I"]}class y1 extends ds{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return cM(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function cM(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class ore extends ds{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class lre extends DE{static blotName="strike";static tagName=["S","STRIKE"]}class cre extends ds{static blotName="underline";static tagName="U"}class ure extends AE{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const r6=["alt","height","width"];let fre=class extends ra{static blotName="image";static tagName="IMG";static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return r6.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return cM(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){r6.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}};const i6=["height","width"];class hre extends Sa{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return i6.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return y1.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){i6.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Kh=new Qa("code-token","hljs",{scope:zt.INLINE});class cl extends ds{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(ms.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),Kh.add(this.domNode,r)}format(e,n){e!==cl.blotName?super.format(e,n):n?Kh.add(this.domNode,n):(Kh.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Kh.value(this.domNode)||this.unwrap()}}cl.blotName="code-token";cl.className="ql-token";class wa extends ms{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),cl.blotName,!1),super.replaceWith(e,n)}}class od extends gu{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===wa.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,i){r===wa.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,i)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(u=>u!==this.uiNode).map(u=>u.textContent).join(`
`)}
`,a=wa.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const u=this.children.reduce((g,y)=>g.concat(YI(y,!1)),new Ut),p=e(i,a);u.diff(p).reduce((g,y)=>{let{retain:w,attributes:S}=y;return w?(S&&Object.keys(S).forEach(_=>{[wa.blotName,cl.blotName].includes(_)&&this.formatAt(g,w,_,S[_])}),g+w):g},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?wa.formats(r.domNode):"plain"}">
${Z1(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=wa.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}od.allowedChildren=[wa];wa.requiredContainer=od;wa.allowedChildren=[cl,Va,Wa,Za];const dre=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class uM extends Co{static register(){rt.register(cl,!0),rt.register(wa,!0),rt.register(od,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:a}=i;return r[a]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(rt.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof od))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:a}=r;const u=n.ownerDocument.createElement("option");u.textContent=a,u.setAttribute("value",i),n.appendChild(u)}),n.addEventListener("change",()=>{e.format(wa.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=wa.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(rt.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(rt.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(od):[e]).forEach(a=>{a.highlight(this.highlightBlot,n)}),this.quill.update(rt.sources.SILENT),r!=null&&this.quill.setSelection(r,rt.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return Z1(e).split(`
`).reduce((i,a,u)=>(u!==0&&i.insert(`
`,{[ms.blotName]:n}),i.insert(a)),new Ut);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(ms.className),r.innerHTML=dre(this.options.hljs,n,e),ME(this.quill.scroll,r,[(i,a)=>{const u=Kh.value(i);return u?a.compose(new Ut().retain(a.length(),{[cl.blotName]:u})):a}],[(i,a)=>i.data.split(`
`).reduce((u,p,g)=>(g!==0&&u.insert(`
`,{[ms.blotName]:n}),u.insert(p)),a)],new WeakMap)}}uM.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Ha extends Zi{static blotName="table";static tagName="TD";static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",LE()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===Ha.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class lu extends mu{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const a=this.splitAfter(n);a&&a.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class sc extends mu{static blotName="table-body";static tagName="TBODY"}class v1 extends mu{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(lu),n=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=Ha.formats(r.children.head.domNode));const a=this.scroll.create(Ha.blotName,i);r.appendChild(a),a.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(sc);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e);i?.remove()})}insertColumn(e){const[n]=this.descendant(sc);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e),a=Ha.formats(r.children.head.domNode),u=this.scroll.create(Ha.blotName,a);r.insertBefore(u,i)})}insertRow(e){const[n]=this.descendant(sc);if(n==null||n.children.head==null)return;const r=LE(),i=this.scroll.create(lu.blotName);n.children.head.children.forEach(()=>{const u=this.scroll.create(Ha.blotName,r);i.appendChild(u)});const a=n.children.at(e);n.insertBefore(i,a)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}v1.allowedChildren=[sc];sc.requiredContainer=v1;sc.allowedChildren=[lu];lu.requiredContainer=sc;lu.allowedChildren=[Ha];Ha.requiredContainer=lu;function LE(){return`row-${Math.random().toString(36).slice(2,6)}`}class pre extends Co{static register(){rt.register(Ha),rt.register(lu),rt.register(sc),rt.register(v1)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(v1).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(rt.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(rt.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(rt.sources.USER),this.quill.setSelection(n,rt.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==Ha.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,i,a]=this.getTable(n);if(a==null)return;const u=a.cellOffset();r.insertColumn(u+e),this.quill.update(rt.sources.USER);let p=i.rowOffset();e===0&&(p+=1),this.quill.setSelection(n.index+p,n.length,rt.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,i,a]=this.getTable(n);if(a==null)return;const u=i.rowOffset();r.insertRow(u+e),this.quill.update(rt.sources.USER),e>0?this.quill.setSelection(n,rt.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,rt.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(a=>{const u=new Array(n).fill(`
`).join("");return a.insert(u,{table:LE()})},new Ut().retain(r.index));this.quill.updateContents(i,rt.sources.USER),this.quill.setSelection(r.index,rt.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(rt.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(rt.events.TEXT_CHANGE,(r,i,a)=>{a===rt.sources.USER&&this.balanceTables()}),!0):!1)})}}const s6=dl("quill:toolbar");class kE extends Co{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),mre(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){s6.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const i=this.options.handlers?.[r];i&&this.addHandler(r,i)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(rt.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){s6.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let a;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const p=e.options[e.selectedIndex];p.hasAttribute("selected")?a=!1:a=p.value||!1}else e.classList.contains("ql-active")?a=!1:a=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[u]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,a);else if(this.quill.scroll.query(n).prototype instanceof ra){if(a=prompt(`Enter ${n}`),!a)return;this.quill.updateContents(new Ut().retain(u.index).delete(u.length).insert({[n]:a}),rt.sources.USER)}else this.quill.format(n,a,rt.sources.USER);this.update(u)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,a]=r;if(a.tagName==="SELECT"){let u=null;if(e==null)u=null;else if(n[i]==null)u=a.querySelector("option[selected]");else if(!Array.isArray(n[i])){let p=n[i];typeof p=="string"&&(p=p.replace(/"/g,'\\"')),u=a.querySelector(`option[value="${p}"]`)}u==null?(a.value="",a.selectedIndex=-1):u.selected=!0}else if(e==null)a.classList.remove("ql-active"),a.setAttribute("aria-pressed","false");else if(a.hasAttribute("value")){const u=n[i],p=u===a.getAttribute("value")||u!=null&&u.toString()===a.getAttribute("value")||u==null&&!a.getAttribute("value");a.classList.toggle("ql-active",p),a.setAttribute("aria-pressed",p.toString())}else{const u=n[i]!=null;a.classList.toggle("ql-active",u),a.setAttribute("aria-pressed",u.toString())}})}}kE.DEFAULTS={};function a6(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function mre(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")a6(r,i);else{const a=Object.keys(i)[0],u=i[a];Array.isArray(u)?gre(r,a,u):a6(r,a,u)}}),t.appendChild(r)})}function gre(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(i=>{const a=document.createElement("option");i!==!1?a.setAttribute("value",String(i)):a.setAttribute("selected","selected"),r.appendChild(a)}),t.appendChild(r)}kE.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,zt.INLINE)!=null&&this.quill.format(n,!1,rt.sources.USER)})}else this.quill.removeFormat(t.index,t.length,rt.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",rt.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,rt.sources.USER),this.quill.format("direction",t,rt.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,rt.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,rt.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,rt.sources.USER):this.quill.format("list","unchecked",rt.sources.USER):this.quill.format("list",t,rt.sources.USER)}}};const yre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',vre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',bre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',wre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',Ere='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Sre='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',xre='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',_re='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',o6='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Are='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',Cre='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',Nre='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',Tre='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',Ore='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',Rre='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Ire='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Mre='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Dre='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Lre='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',kre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',jre='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Pre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Bre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Ure='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',zre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Fre='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',qre='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',$re='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Vre='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Hre='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Kre='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Gre='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Yre='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',kd={align:{"":yre,center:vre,right:bre,justify:wre},background:Ere,blockquote:Sre,bold:xre,clean:_re,code:o6,"code-block":o6,color:Are,direction:{"":Cre,rtl:Nre},formula:Tre,header:{1:Ore,2:Rre,3:Ire,4:Mre,5:Dre,6:Lre},italic:kre,image:jre,indent:{"+1":Pre,"-1":Bre},link:Ure,list:{bullet:zre,check:Fre,ordered:qre},script:{sub:$re,super:Vre},strike:Hre,table:Kre,underline:Gre,video:Yre},Wre='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let l6=0;function c6(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class eg{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),c6(this.label,"aria-expanded"),c6(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=Wre,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${l6}`,l6+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class fM extends eg{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class hM extends eg{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const Xre=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class dM{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Xre(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect();let u=0;if(a.right>i.right&&(u=i.right-a.right,this.root.style.left=`${n+u}px`),a.left<i.left&&(u=i.left-a.left,this.root.style.left=`${n+u}px`),a.bottom>i.bottom){const p=a.bottom-a.top,g=e.bottom-e.top+p;this.root.style.top=`${r-g}px`,this.root.classList.add("ql-flip")}return u}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Qre=[!1,"center","right","justify"],Zre=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Jre=[!1,"serif","monospace"],eie=["1","2","3",!1],tie=["small",!1,"large","huge"];class up extends Kf{constructor(e,n){super(e,n);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(a=>{a.container.contains(i.target)||a.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(a=>{if(a.startsWith("ql-")&&(a=a.slice(3),n[a]!=null))if(a==="direction")r.innerHTML=n[a][""]+n[a].rtl;else if(typeof n[a]=="string")r.innerHTML=n[a];else{const u=r.value||"";u!=null&&n[a][u]&&(r.innerHTML=n[a][u])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&Ph(i,Qre),typeof n.align=="object"))return new hM(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const a=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&Ph(i,Zre,a==="background"?"#ffffff":"#000000"),new fM(i,n[a])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?Ph(i,Jre):i.classList.contains("ql-header")?Ph(i,eie):i.classList.contains("ql-size")&&Ph(i,tie)),new eg(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(Lt.events.EDITOR_CHANGE,r)}}up.DEFAULTS=ic({},Kf.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class pM extends dM{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Lt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Lt.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=nie(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Lt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Lt.sources.USER),this.quill.setSelection(r+2,Lt.sources.USER)}break}}this.textbox.value="",this.hide()}}function nie(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Ph(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const rie=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class iie extends pM{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,n){super(e,n),this.quill.on(Lt.events.EDITOR_CHANGE,(r,i,a,u)=>{if(r===Lt.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&u===Lt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const p=this.quill.getLines(i.index,i.length);if(p.length===1){const g=this.quill.getBounds(i);g!=null&&this.position(g)}else{const g=p[p.length-1],y=this.quill.getIndex(g),w=Math.min(g.length()-1,i.index+i.length-y),S=this.quill.getBounds(new ou(y,w));S!=null&&this.position(S)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Lt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}class mM extends up{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=rie),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new iie(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),kd),this.buildPickers(e.container.querySelectorAll("select"),kd))}}mM.DEFAULTS=ic({},up.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,rt.sources.USER)}}}}});const sie=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class aie extends pM{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,Lt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Lt.events.SELECTION_CHANGE,(e,n,r)=>{if(e!=null){if(e.length===0&&r===Lt.sources.USER){const[i,a]=this.quill.scroll.descendant(y1,e.index);if(i!=null){this.linkRange=new ou(e.index-a,i.length());const u=y1.formats(i.domNode);this.preview.textContent=u,this.preview.setAttribute("href",u),this.show();const p=this.quill.getBounds(this.linkRange);p!=null&&this.position(p);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class gM extends up{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=sie),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),kd),this.buildPickers(e.container.querySelectorAll("select"),kd),this.tooltip=new aie(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}gM.DEFAULTS=ic({},up.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,rt.sources.USER)}}}}});rt.register({"attributors/attribute/direction":JI,"attributors/class/align":XI,"attributors/class/background":fne,"attributors/class/color":une,"attributors/class/direction":eM,"attributors/class/font":rM,"attributors/class/size":sM,"attributors/style/align":QI,"attributors/style/background":TE,"attributors/style/color":NE,"attributors/style/direction":tM,"attributors/style/font":iM,"attributors/style/size":aM},!0);rt.register({"formats/align":XI,"formats/direction":eM,"formats/indent":rre,"formats/background":TE,"formats/color":NE,"formats/font":rM,"formats/size":sM,"formats/blockquote":ire,"formats/code-block":ms,"formats/header":sre,"formats/list":cp,"formats/bold":DE,"formats/code":OE,"formats/italic":are,"formats/link":y1,"formats/script":ore,"formats/strike":lre,"formats/underline":cre,"formats/formula":ure,"formats/image":fre,"formats/video":hre,"modules/syntax":uM,"modules/table":pre,"modules/toolbar":kE,"themes/bubble":mM,"themes/snow":gM,"ui/icons":kd,"ui/picker":eg,"ui/icon-picker":hM,"ui/color-picker":fM,"ui/tooltip":dM},!0);class tg extends za.Component{constructor(e){super(e),this.editingAreaRef=re.createRef(),this.containerRef=re.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,i,a,u)=>{r==="text-change"?this.onEditorChangeText?.(this.editor.getSemanticHTML(),i,u,this.unprivilegedEditor):r==="selection-change"&&this.onEditorChangeSelection?.(i,u,this.unprivilegedEditor)};const n=this.isControlled()?e.value:e.defaultValue;this.value=n??""}validateProps(e){if(za.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(za.Children.count(e.children)&&za.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,n){if(this.validateProps(e),!this.editor||this.state.generation!==n.generation)return!0;if("value"in e){const r=this.getEditorContents(),i=e.value??"";this.isEqualValue(i,r)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!Ql(e[r],this.props[r]))}shouldComponentRegenerate(e){return this.dirtyProps.some(n=>!Ql(e[n],this.props[n]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,n){if(this.editor&&this.shouldComponentRegenerate(e)){const r=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.editor&&e.placeholder!==this.props.placeholder&&(this.editor.root.dataset.placeholder=this.props.placeholder||""),this.state.generation!==n.generation){const{delta:r,selection:i}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const a=this.editor;a.setContents(r),u6(()=>this.setEditorSelection(a,i))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const r=this.containerRef.current?.querySelector(".ql-toolbar");r&&r.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,n){const r=new rt(e,n);return n.tabIndex!=null&&this.setEditorTabIndex(r,n.tabIndex),this.hookEditor(r),r}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,n){return this.isDelta(e)&&this.isDelta(n)?Ql(e.ops,n.ops):Ql(e,n)}setEditorContents(e,n){this.value=n;const r=this.getEditorSelection();typeof n=="string"?e.setContents(e.clipboard.convert({html:n})):e.setContents(n),u6(()=>this.setEditorSelection(e,r))}setEditorSelection(e,n){if(this.selection=n,n){const r=e.getLength();n.index=Math.max(0,Math.min(n.index,r-1)),n.length=Math.max(0,Math.min(n.length,r-1-n.index)),e.setSelection(n)}}setEditorTabIndex(e,n){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=n)}setEditorReadOnly(e,n){n?e.disable():e.enable()}makeUnprivilegedEditor(e){const n=e;return{getHTML:()=>n.root.innerHTML,getSemanticHTML:n.getSemanticHTML.bind(n),getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:n}=this.props,{generation:r}=this.state,i={key:r,ref:this.editingAreaRef};return za.Children.count(e)?za.cloneElement(za.Children.only(e),i):n?za.createElement("pre",{...i}):za.createElement("div",{...i})}render(){return za.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,n,r,i){if(!this.editor)return;const a=this.isDelta(this.value)?i.getContents():i.getSemanticHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=a,this.props.onChange?.(e,n,r,i))}onEditorChangeSelection(e,n,r){if(!this.editor)return;const i=this.getEditorSelection(),a=!i&&e,u=i&&!e;Ql(e,i)||(this.selection=e,this.props.onChangeSelection?.(e,n,r),a?this.props.onFocus?.(e,n,r):u&&this.props.onBlur?.(i,n,r))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}tg.displayName="React Quill";tg.Quill=rt;tg.defaultProps={theme:"snow",modules:{},readOnly:!1};function u6(t){Promise.resolve().then(t)}const f6=[{code:"en",label:"English"},{code:"hi",label:"Hindi"},{code:"mr",label:"Marathi"}];function oie(){const t=Mi(),[e]=G6(),{db:n}=Ui(),{currentUser:r}=ws(),i=e.get("type")||"text",a=i==="lesson"?"text":i,u=e.get("subjectId"),p=e.get("moduleId"),g=e.get("editId"),[y,w]=re.useState(""),[S,_]=re.useState(""),[C,N]=re.useState(!1),[R,M]=re.useState("en"),[L,k]=re.useState({en:"",hi:"",mr:""});re.useEffect(()=>{if(!n||!g)return;(async()=>{const de=await n.content.findOne(g).exec();if(de){w(de.get("title")),_(de.get("description")||""),N(de.get("isHomework")||!1);const we=de.get("data")||{};we.translations?k(we.translations):we.content&&k(Oe=>({...Oe,en:we.content})),we.questions&&$(we.questions),we.attachments&&F(we.attachments)}})()},[n,g]);const[j,$]=re.useState([]),[U,F]=re.useState([]),B=ee=>{k(de=>({...de,[R]:ee}))},Z=async ee=>{if(ee.target.files&&ee.target.files[0]){const de=ee.target.files[0];if(de.size>5*1024*1024){alert("File too large. Max 5MB.");return}const we=new FileReader;we.onload=()=>{const Oe=we.result;F(pe=>[...pe,{id:Ca(),name:de.name,type:de.type,data:Oe}])},we.readAsDataURL(de)}},le=ee=>{F(de=>de.filter(we=>we.id!==ee))},Ne=()=>{$([...j,{id:Ca(),text:"",options:["","","",""],correctAnswer:0}])},G=(ee,de,we)=>{const Oe=[...j];Oe[ee]={...Oe[ee],[de]:we},$(Oe)},ce=(ee,de,we)=>{const Oe=[...j];Oe[ee].options[de]=we,$(Oe)},se=ee=>{$(j.filter((de,we)=>we!==ee))},Ee=async()=>{if(!y)return alert("Title is required");if(!(!n||!r))try{const ee=g||Ca();let de=r.classId||"default";try{if(u&&u!=="undefined"){const pe=await n.content.findOne(u).exec();pe&&pe.get("classId")&&(de=pe.get("classId"))}else if(p&&p!=="undefined"){const pe=await n.content.findOne(p).exec();if(pe){const K=pe.get("subjectId");if(K){const oe=await n.content.findOne(K).exec();oe&&oe.get("classId")&&(de=oe.get("classId"))}}}}catch(pe){console.warn("ClassID Lookup failed, defaulting to user class:",pe)}const we={id:ee,type:a,title:y,description:S,classId:de,subjectId:u||void 0,moduleId:p||void 0,teacherId:r.id,isHomework:C,data:{content:L.en,translations:L,attachments:U,questions:a==="quiz"?j:void 0},updatedAt:Date.now()},Oe=JSON.parse(JSON.stringify(we));if(g){const pe=await n.content.findOne(g).exec();pe&&await pe.patch(Oe)}else await n.content.insert({...Oe,createdAt:Date.now()});t(p?`/teacher/module/${p}`:u?`/teacher/subject/${u}`:"/teacher")}catch(ee){console.error("Save failed",ee),alert("Failed to save: "+(ee?.message||"Unknown error"))}},ue=()=>{t(p?`/teacher/module/${p}`:u?`/teacher/subject/${u}`:"/teacher")};return O.jsxs("div",{className:"min-h-screen bg-slate-950 p-6 pb-24 text-slate-100",children:[O.jsxs("div",{className:"flex items-center justify-between mb-8",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:ue,className:"p-2 hover:bg-white/10 rounded-full",children:O.jsx(gs,{className:"w-6 h-6"})}),O.jsxs("h1",{className:"text-xl font-bold capitalize",children:[g?"Edit":"Create"," ",a==="module"?"Module":a==="quiz"?"Quiz":"Note"]})]}),O.jsxs("button",{onClick:Ee,className:"flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg font-bold",children:[O.jsx(mk,{className:"w-4 h-4"})," Save"]})]}),O.jsxs("div",{className:"max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[O.jsx("div",{className:"space-y-6 h-fit",children:O.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-white/10 space-y-4",children:[O.jsxs("div",{className:"p-4 bg-white/5 rounded-xl flex items-center gap-3 border border-white/10 mb-4",children:[a==="module"&&O.jsx(Db,{className:"w-6 h-6 text-purple-400"}),a==="text"&&O.jsx(Fd,{className:"w-6 h-6 text-slate-300"}),a==="quiz"&&O.jsx(s2,{className:"w-6 h-6 text-green-400"}),O.jsxs("div",{children:[O.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Type"}),O.jsx("p",{className:"font-bold capitalize",children:a})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Title"}),O.jsx("input",{type:"text",value:y,onChange:ee=>w(ee.target.value),className:"w-full bg-slate-800 border border-white/10 rounded-lg p-3 focus:ring-2 focus:ring-primary-500 outline-none",placeholder:"e.g. Introduction to Physics"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Description"}),O.jsx("textarea",{value:S,onChange:ee=>_(ee.target.value),className:"w-full bg-slate-800 border border-white/10 rounded-lg p-3 focus:ring-2 focus:ring-primary-500 outline-none h-20",placeholder:"Brief summary..."})]}),a!=="module"&&O.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[O.jsx("input",{type:"checkbox",id:"homework",checked:C,onChange:ee=>N(ee.target.checked),className:"w-5 h-5 accent-primary rounded"}),O.jsx("label",{htmlFor:"homework",className:"text-sm font-medium",children:"Assign as Homework"})]})]})}),O.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a==="module"&&O.jsxs("div",{className:"bg-slate-900/50 p-12 rounded-2xl border-dashed border-2 border-white/10 flex flex-col items-center justify-center text-center gap-4 text-slate-500",children:[O.jsx(Rb,{className:"w-16 h-16 opacity-20"}),O.jsx("p",{children:"This is a container structure. You can add items to it after creating it."})]}),a==="text"&&O.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-white/10 space-y-4",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[O.jsx(Ib,{className:"w-4 h-4 text-primary-400"})," Content Language"]}),O.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1",children:f6.map(ee=>O.jsx("button",{onClick:()=>M(ee.code),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${R===ee.code?"bg-primary text-primary-foreground shadow":"text-slate-400 hover:text-white"}`,children:ee.label},ee.code))})]}),O.jsx("div",{className:"prose-editor text-slate-900 bg-white rounded-lg overflow-hidden",children:O.jsx(tg,{theme:"snow",value:L[R],onChange:B,modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["clean"]]},className:"min-h-[300px]"})}),O.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[O.jsx(Ib,{className:"w-3 h-3"}),"Editing in ",O.jsx("span",{className:"text-primary-400 font-bold",children:f6.find(ee=>ee.code===R)?.label}),". Switch tabs to add translations."]}),O.jsxs("div",{className:"pt-6 mt-6 border-t border-white/5",children:[O.jsxs("div",{className:"flex items-center justify-between mb-4",children:[O.jsxs("h4",{className:"text-sm font-bold text-slate-300 flex items-center gap-2",children:[O.jsx(S_,{className:"w-4 h-4"})," Attachments (PDF)"]}),O.jsxs("label",{className:"cursor-pointer flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-3 py-1.5 rounded-lg text-xs font-bold border border-white/10 transition-colors",children:[O.jsx(jk,{className:"w-3 h-3"})," Upload PDF",O.jsx("input",{type:"file",accept:"application/pdf",className:"hidden",onChange:Z})]})]}),O.jsxs("div",{className:"space-y-2",children:[U.length===0&&O.jsx("div",{className:"p-4 border border-dashed border-white/10 rounded-lg text-center text-xs text-slate-600",children:"No attachments uploaded"}),U.map(ee=>O.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg border border-white/5 group hover:border-primary/30 transition-colors",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"w-8 h-8 rounded bg-red-500/20 flex items-center justify-center text-red-500",children:O.jsx(S_,{className:"w-4 h-4"})}),O.jsxs("div",{className:"text-left",children:[O.jsx("p",{className:"text-sm font-medium truncate max-w-[200px] text-white",children:ee.name}),O.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:ee.type.split("/")[1]})]})]}),O.jsx("button",{onClick:()=>le(ee.id),className:"p-2 text-slate-500 hover:text-red-400 hover:bg-red-500/10 rounded-full transition-all",children:O.jsx($d,{className:"w-4 h-4"})})]},ee.id))]})]})]}),a==="quiz"&&O.jsxs("div",{className:"space-y-4",children:[j.map((ee,de)=>O.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-white/10 relative group",children:[O.jsx("button",{onClick:()=>se(de),className:"absolute top-4 right-4 text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:O.jsx(qd,{className:"w-5 h-5"})}),O.jsxs("div",{className:"mb-4",children:[O.jsxs("label",{className:"text-sm font-bold text-primary-400 mb-2 block",children:["Question ",de+1]}),O.jsx("input",{type:"text",value:ee.text,onChange:we=>G(de,"text",we.target.value),className:"w-full bg-slate-800 border border-white/10 rounded-lg px-4 py-3 focus:ring-2 focus:ring-primary-500 outline-none placeholder-slate-600",placeholder:"Enter question text..."})]}),O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ee.options.map((we,Oe)=>O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("input",{type:"radio",name:`correct-${ee.id}`,checked:ee.correctAnswer===Oe,onChange:()=>G(de,"correctAnswer",Oe),className:"w-4 h-4 accent-primary"}),O.jsx("input",{type:"text",value:we,onChange:pe=>ce(de,Oe,pe.target.value),className:`flex-1 bg-slate-800 rounded-lg px-3 py-2 border border-white/5 text-sm outline-none focus:ring-1 ${ee.correctAnswer===Oe?"ring-primary-500 border-primary-500/50":"focus:ring-white/20"}`,placeholder:`Option ${Oe+1}`})]},Oe))})]},ee.id)),O.jsxs("button",{onClick:Ne,className:"w-full py-4 rounded-xl border-2 border-dashed border-white/10 text-slate-400 hover:text-white hover:border-white/20 hover:bg-white/5 transition-all flex items-center justify-center gap-2 font-bold",children:[O.jsx(_f,{className:"w-5 h-5"})," Add Question"]})]})]})]})]})}function yM({classId:t}){const{db:e}=Ui(),[n,r]=re.useState([]),[i,a]=re.useState(!0);if(re.useEffect(()=>{if(!e)return;(async()=>{const y=await tI(e,t);r(y.slice(0,10)),a(!1)})()},[e,t]),i)return O.jsx("div",{className:"p-4 text-center text-slate-400",children:"Loading Rankings..."});const u=n.slice(0,3),p=n.slice(3);return i?O.jsx("div",{className:"p-10 text-center text-slate-400 animate-pulse",children:"Scanning frequencies for top signals..."}):O.jsxs("div",{className:"space-y-8 font-sans",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx("div",{className:"p-2 rounded-lg bg-yellow-500/20 text-yellow-400",children:O.jsx(Yh,{className:"w-6 h-6"})}),O.jsxs("div",{children:[O.jsx("h2",{className:"text-xl font-bold text-white",children:"Class Leaderboard"}),O.jsx("p",{className:"text-xs text-slate-400",children:"Top performers this week"})]})]}),u.length>0&&O.jsxs("div",{className:"flex justify-center items-end gap-2 sm:gap-4 mb-8 pt-4",children:[u[1]&&O.jsxs(on.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center w-1/3 max-w-[100px]",children:[O.jsxs("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-4 border-slate-400 shadow-[0_0_20px_rgba(148,163,184,0.3)] bg-slate-800 overflow-hidden mb-2 relative z-10",children:[O.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${u[1].avatarId}`,alt:"2nd",className:"w-full h-full object-cover"}),O.jsx("div",{className:"absolute bottom-0 w-full bg-slate-500 text-black font-bold text-[10px] text-center",children:"#2"})]}),O.jsxs("div",{className:"text-center mb-1",children:[O.jsx("span",{className:"text-sm font-bold text-slate-300 block truncate w-full",children:u[1].name}),O.jsxs("span",{className:"text-xs text-slate-500 flex items-center justify-center gap-1",children:[O.jsx(Fc,{className:"w-3 h-3 text-yellow-500/70"}),u[1].totalStars]})]}),O.jsx("div",{className:"w-full h-24 bg-gradient-to-t from-slate-400/20 to-slate-400/5 rounded-t-xl border-t border-x border-slate-400/30"})]}),u[0]&&O.jsxs(on.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:200},className:"flex flex-col items-center w-1/3 max-w-[120px] -mx-2 z-20",children:[O.jsxs("div",{className:"relative",children:[O.jsx(Yh,{className:"w-8 h-8 text-yellow-400 absolute -top-8 left-1/2 -translate-x-1/2 animate-bounce"}),O.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full border-4 border-yellow-400 shadow-[0_0_30px_rgba(250,204,21,0.5)] bg-yellow-900/50 overflow-hidden mb-2 relative",children:[O.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${u[0].avatarId}`,alt:"1st",className:"w-full h-full object-cover"}),O.jsx("div",{className:"absolute bottom-0 w-full bg-yellow-400 text-black font-bold text-xs text-center py-0.5",children:"#1"})]})]}),O.jsxs("div",{className:"text-center mb-2",children:[O.jsx("span",{className:"text-base font-black text-yellow-100 block truncate w-full",children:u[0].name}),O.jsxs("span",{className:"text-xs text-yellow-400/80 flex items-center justify-center gap-1",children:[O.jsx(Fc,{className:"w-3 h-3 fill-current"}),u[0].totalStars]})]}),O.jsx("div",{className:"w-full h-32 bg-gradient-to-t from-yellow-500/30 to-yellow-500/10 rounded-t-xl border-t border-x border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.1)] relative overflow-hidden",children:O.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"})})]}),u[2]&&O.jsxs(on.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col items-center w-1/3 max-w-[100px]",children:[O.jsxs("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-4 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.3)] bg-orange-900/30 overflow-hidden mb-2 relative z-10",children:[O.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${u[2].avatarId}`,alt:"3rd",className:"w-full h-full object-cover"}),O.jsx("div",{className:"absolute bottom-0 w-full bg-orange-500 text-black font-bold text-[10px] text-center",children:"#3"})]}),O.jsxs("div",{className:"text-center mb-1",children:[O.jsx("span",{className:"text-sm font-bold text-orange-200 block truncate w-full",children:u[2].name}),O.jsxs("span",{className:"text-xs text-orange-400/80 flex items-center justify-center gap-1",children:[O.jsx(Fc,{className:"w-3 h-3 fill-current"}),u[2].totalStars]})]}),O.jsx("div",{className:"w-full h-20 bg-gradient-to-t from-orange-500/20 to-orange-500/5 rounded-t-xl border-t border-x border-orange-500/30"})]})]}),p.length>0&&O.jsx("div",{className:"bg-black/20 rounded-2xl p-2 border border-white/5 space-y-2 backdrop-blur-sm",children:p.map((g,y)=>O.jsxs(on.div,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:y*.05},className:"p-3 rounded-xl flex items-center gap-4 bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 transition-all",children:[O.jsxs("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-slate-500 text-sm font-mono",children:["#",y+4]}),O.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center overflow-hidden border border-white/10",children:O.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${g.avatarId}`,alt:"avatar"})}),O.jsx("div",{className:"flex-1",children:O.jsx("h3",{className:"font-bold text-slate-300 text-sm",children:g.name})}),O.jsxs("div",{className:"flex items-center gap-1 bg-black/40 px-3 py-1.5 rounded-full border border-white/5",children:[O.jsx(Fc,{className:"w-3 h-3 text-yellow-500"}),O.jsx("span",{className:"text-xs font-bold text-slate-300",children:g.totalStars})]})]},g.id))}),n.length===0&&O.jsxs("div",{className:"text-center py-12",children:[O.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:O.jsx(Yh,{className:"w-8 h-8 text-slate-600"})}),O.jsx("p",{className:"text-slate-500 italic",children:"No champions yet."}),O.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Be the first to score!"})]})]})}function vM({isOpen:t,onClose:e,onSubmit:n,title:r,placeholder:i,initialValue:a=""}){const[u,p]=re.useState(a);re.useEffect(()=>{t&&p(a)},[t,a]);const g=y=>{y.preventDefault(),u.trim()&&(n(u),p(""),e())};return O.jsx(wo,{children:t&&O.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:O.jsxs(on.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md glass-panel p-6 rounded-2xl shadow-2xl relative",children:[O.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:O.jsx($d,{className:"w-5 h-5"})}),O.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:r}),O.jsxs("form",{onSubmit:g,className:"space-y-6",children:[O.jsx("input",{autoFocus:!0,type:"text",value:u,onChange:y=>p(y.target.value),placeholder:i,className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white placeholder:text-slate-500 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all"}),O.jsxs("div",{className:"flex justify-end gap-3",children:[O.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 font-medium transition-colors",children:"Cancel"}),O.jsx("button",{type:"submit",disabled:!u.trim(),className:"px-4 py-2 rounded-xl bg-primary text-primary-foreground font-bold hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-primary/20",children:"Confirm"})]})]})]})})})}function lie(){const{classId:t}=Ud(),e=Mi(),{db:n}=Ui(),[r,i]=re.useState("Loading..."),[a,u]=re.useState(""),[p,g]=re.useState("subjects"),[y,w]=re.useState(!1),[S,_]=re.useState([]),[C,N]=re.useState([]),[R,M]=re.useState(""),[L,k]=re.useState(!1),j=async()=>{if(!(!n||!t)){console.log("--- START DATA LOAD ---"),console.log("Target Class ID:",t),M("");try{const B=(await n.classes.find().exec()).map(Oe=>Oe.get("id"));console.log("Available Class IDs in DB:",B);const Z=await n.classes.findOne(t).exec();if(!Z){console.error("CRITICAL: Class ID not found in DB!");const Oe=B.join(", ");M(`ID Mismatch. Requested: ${t} | Available: ${Oe}`),i("Class Not Found"),k(!0);return}console.log("Class Found:",Z.get("name")),i(Z.get("name")),u(Z.get("code")||"");const le=String(Z.get("standard")||"10").replace(/\D/g,""),Ne=String(Z.get("medium")||"english").toLowerCase();console.log(`Filter Criteria -> Standard: ${le}, Medium: ${Ne}`);const se=(await n.content.find().exec()).map(Oe=>Oe.toJSON()).filter(Oe=>Oe.type!=="subject"?!1:Oe.classId===t?!0:String(Oe.classId)===le?String(Oe.medium||"english").toLowerCase()===Ne:!1);console.log(`Raw Subjects Found: ${se.length}`);const Ee=se.map(Oe=>{let pe=0;return Oe.classId===le&&(pe+=100),Oe.medium&&(pe+=10),pe+=(Oe.createdAt||0)/1e13,{sub:Oe,score:pe}});Ee.sort((Oe,pe)=>pe.score-Oe.score);const ue=new Set,ee=[];Ee.forEach(Oe=>{const pe=Oe.sub.title.trim();ue.has(pe)||(ue.add(pe),ee.push(Oe.sub))}),console.log(`Final Deduplicated Subjects: ${ee.length}`),_(ee.sort((Oe,pe)=>(Oe.createdAt||0)-(pe.createdAt||0)));const we=(await n.users.find().exec()).filter(Oe=>Oe.teacherClassId===t&&Oe.role!=="teacher");N(we),k(!0)}catch(F){console.error("Data Load Error:",F),M(F.message||"Unknown DB Error"),k(!0)}}};re.useEffect(()=>{j()},[n,t]);const $=async F=>{if(!(!n||!t))try{console.log("Attempting to create subject:",{title:F,classId:t});const B=await n.classes.findOne(t).exec(),Z=B?.get("medium")||"english",le=B?.get("standard")||"10";await n.content.insert({id:crypto.randomUUID(),type:"subject",title:F,description:`Subject in ${r}`,classId:t,medium:Z,standard:le,data:{},createdAt:Date.now(),updatedAt:Date.now(),isHomework:!1}),console.log("Subject created successfully"),j(),w(!1)}catch(B){console.error("Failed to create subject:",B),alert(`Error creating subject: ${B.message||JSON.stringify(B)}`)}},U=async F=>{if(!n||!confirm("Delete this Subject? Lessons inside might become orphaned."))return;const B=await n.content.findOne(F).exec();B&&await B.remove(),j()};return O.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg",children:[O.jsx(vM,{isOpen:y,onClose:()=>w(!1),onSubmit:$,title:"Create New Subject",placeholder:"Ex: Physics, History..."}),O.jsxs("div",{className:"flex justify-between items-start mb-8",children:[O.jsxs("header",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:()=>e("/teacher"),className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",children:O.jsx(gs,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-2xl font-bold text-white",children:R?O.jsx("span",{className:"text-red-400",children:R}):r}),O.jsxs("p",{className:"text-xs text-slate-400 font-medium flex items-center gap-2",children:["Class Management",a&&O.jsx("span",{className:"px-2 py-0.5 bg-primary/20 text-primary rounded font-mono tracking-widest select-all border border-primary/20",children:a}),L?"":" (Loading...)"]})]})]}),O.jsx("button",{onClick:j,className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",title:"Reload Data",children:O.jsx(_1,{className:`w-5 h-5 ${L?"":"animate-spin"}`})})]}),O.jsxs("div",{className:"flex gap-4 mb-6 border-b border-white/10 pb-2",children:[O.jsxs("button",{onClick:()=>g("subjects"),className:`flex items-center gap-2 px-4 py-2 font-bold transition-all ${p==="subjects"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-white"}`,children:[O.jsx(Sf,{className:"w-4 h-4"})," Subjects"]}),O.jsxs("button",{onClick:()=>g("students"),className:`flex items-center gap-2 px-4 py-2 font-bold transition-all ${p==="students"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-white"}`,children:[O.jsx(t5,{className:"w-4 h-4"})," Students"]}),O.jsxs("button",{onClick:()=>g("leaderboard"),className:`flex items-center gap-2 px-4 py-2 font-bold transition-all ${p==="leaderboard"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-white"}`,children:[O.jsx(Sf,{className:"w-4 h-4"})," Leaderboard"]})]}),p==="subjects"&&O.jsxs("div",{className:"space-y-4",children:[O.jsx("div",{className:"flex justify-end",children:O.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary/80 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-transform",children:[O.jsx(_f,{className:"w-4 h-4"})," New Subject"]})}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.map(F=>O.jsxs(on.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-panel p-6 rounded-2xl flex items-center justify-between group hover:border-primary/50 transition-all cursor-pointer",onClick:()=>e(`/teacher/subject/${F.id}?classId=${t}`),children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center text-blue-400",children:O.jsx(Rb,{className:"w-6 h-6"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-bold text-white text-lg",children:F.title}),O.jsx("p",{className:"text-xs text-slate-400",children:new Date(F.createdAt||Date.now()).toLocaleDateString()})]})]}),O.jsx("button",{onClick:B=>{B.stopPropagation(),U(F.id)},className:"p-2 text-slate-500 hover:text-red-400 transition-colors",children:O.jsx(qd,{className:"w-5 h-5"})})]},F.id)),S.length===0&&L&&O.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 glass-panel rounded-2xl border-dashed border-white/10",children:[O.jsx(Rb,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),O.jsx("p",{className:"font-medium",children:"No subjects found."}),R&&O.jsx("p",{className:"text-red-400 text-sm mt-2",children:R})]})]})]}),p==="students"&&O.jsx("div",{className:"space-y-4",children:O.jsx("div",{className:"glass-panel rounded-2xl overflow-hidden",children:O.jsxs("table",{className:"w-full text-left text-sm text-slate-300",children:[O.jsx("thead",{className:"bg-white/5 text-xs uppercase font-bold text-slate-500",children:O.jsxs("tr",{children:[O.jsx("th",{className:"p-4",children:"Name"}),O.jsx("th",{className:"p-4",children:"Rank/Level"}),O.jsx("th",{className:"p-4 text-right",children:"XP"})]})}),O.jsxs("tbody",{children:[C.map(F=>O.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 transition-colors",children:[O.jsxs("td",{className:"p-4 flex items-center gap-3",children:[O.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 overflow-hidden",children:O.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${F.avatarId}`,alt:"avatar"})}),O.jsx("span",{className:"font-medium text-white",children:F.name})]}),O.jsxs("td",{className:"p-4",children:["Level ",Math.floor((F.xp||0)/100)+1]}),O.jsxs("td",{className:"p-4 text-right font-mono text-primary",children:[F.xp||0," XP"]})]},F.id)),C.length===0&&O.jsx("tr",{children:O.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-500",children:"No students have joined this class yet."})})]})]})})}),p==="leaderboard"&&O.jsx("div",{className:"glass-panel p-6 rounded-2xl",children:O.jsx(yM,{classId:t})})]})}function cie(){const{subjectId:t}=Ud(),e=Mi(),{db:n}=Ui(),[r,i]=re.useState("Loading..."),[a,u]=re.useState(""),[p,g]=re.useState([]),[y,w]=re.useState(!1);re.useEffect(()=>{if(!n||!t)return;(async()=>{const L=await n.content.findOne(t).exec();L&&(i(L.get("title")),u(L.get("classId")));const j=(await n.content.find().exec()).filter($=>$.subjectId===t&&($.type==="module"||$.type==="lesson"));g(j.sort(($,U)=>($.createdAt||0)-(U.createdAt||0)))})()},[n,t]);const[S]=G6(),_=S.get("classId"),C=()=>{e(_?`/teacher/class/${_}`:a?`/teacher/class/${a}`:"/teacher")},N=async M=>{!n||!t||(await n.content.insert({id:crypto.randomUUID(),type:"module",title:M,description:`Module in ${r}`,subjectId:t,classId:a,data:{},createdAt:Date.now(),updatedAt:Date.now(),isHomework:!1}),window.location.reload())},R=async M=>{if(!n||!confirm("Delete this Module? Content inside will be hidden."))return;const L=await n.content.findOne(M).exec();L&&await L.remove(),window.location.reload()};return O.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg",children:[O.jsx(vM,{isOpen:y,onClose:()=>w(!1),onSubmit:N,title:"Create New Lesson (Module)",placeholder:"Ex: Chapter 1 - Introduction"}),O.jsxs("header",{className:"flex items-center gap-4 mb-8",children:[O.jsx("button",{onClick:C,className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",children:O.jsx(gs,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-2xl font-bold text-white",children:r}),O.jsx("p",{className:"text-xs text-slate-400",children:"Subject Overview"})]})]}),O.jsxs("div",{className:"space-y-4",children:[O.jsx("div",{className:"flex justify-end gap-2",children:O.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg hover:scale-105 transition-transform",children:[O.jsx(_f,{className:"w-4 h-4"})," New Lesson Module"]})}),O.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[p.map(M=>O.jsxs(on.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-panel p-6 rounded-xl flex items-center justify-between cursor-pointer hover:border-primary/50 transition-all",onClick:()=>e(`/teacher/module/${M.id}`),children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center text-purple-400",children:O.jsx(Db,{className:"w-6 h-6"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-bold text-white text-lg",children:M.title}),O.jsx("p",{className:"text-xs text-slate-400 capitalize",children:"Lesson Module"})]})]}),O.jsx("button",{onClick:L=>{L.stopPropagation(),R(M.id)},className:"p-2 text-slate-500 hover:text-red-400 transition-colors",children:O.jsx(qd,{className:"w-5 h-5"})})]},M.id)),p.length===0&&O.jsxs("div",{className:"text-center text-slate-500 py-12 glass-panel rounded-2xl border-dashed border-white/10",children:[O.jsx(Db,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),O.jsx("p",{className:"font-medium",children:"No lessons yet."}),O.jsx("p",{className:"text-xs opacity-70",children:"Create a Lesson Module to add text and quizzes."})]})]})]})]})}function uie(){const{moduleId:t}=Ud(),e=Mi(),{db:n}=Ui(),{currentUser:r}=ws(),[i,a]=re.useState("Loading..."),[u,p]=re.useState(""),[g,y]=re.useState([]),[w,S]=re.useState(null),_=R=>{const M=r?.ipAddress,L=window.location.port?`:${window.location.port}`:"",k=window.location.protocol;return`${M?`${k}//${M}${L}`:window.location.origin}/play/${R}`};re.useEffect(()=>{if(!n||!t)return;(async()=>{const M=await n.content.findOne(t).exec();M&&(a(M.get("title")),p(M.get("subjectId")));const k=(await n.content.find().exec()).filter(j=>j.moduleId===t);y(k.sort((j,$)=>$.order-j.order))})()},[n,t]);const C=()=>{e(u?`/teacher/subject/${u}`:"/teacher")},N=async R=>{if(!n||!confirm("Delete this content?"))return;const M=await n.content.findOne(R).exec();M&&await M.remove(),window.location.reload()};return O.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg",children:[O.jsxs("header",{className:"flex items-center gap-4 mb-8",children:[O.jsx("button",{onClick:C,className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",children:O.jsx(gs,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-2xl font-bold text-white",children:i}),O.jsx("p",{className:"text-xs text-slate-400",children:"Lesson Module"})]})]}),O.jsx(wo,{children:w&&O.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:O.jsxs(on.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-8 max-w-sm w-full text-center relative",children:[O.jsx("button",{onClick:()=>S(null),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:O.jsx($d,{className:"w-6 h-6"})}),O.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Scan to Play"}),O.jsx("p",{className:"text-slate-500 mb-6 text-sm",children:w.title}),O.jsx("div",{className:"bg-white p-4 rounded-xl border-2 border-slate-100 inline-block mb-4",children:O.jsx(oI,{value:_(w.id),size:200,className:"h-auto w-full max-w-full"})}),O.jsxs("p",{className:"text-xs text-slate-400 font-mono",children:["ID: ",w.id.slice(0,8),"..."]})]})})}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{className:"flex justify-end gap-2",children:[O.jsxs("button",{onClick:()=>e("/teacher/create?type=text&moduleId="+t+"&subjectId="+u),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg hover:scale-105 transition-transform",children:[O.jsx(_f,{className:"w-4 h-4"})," New Text/Note"]}),O.jsxs("button",{onClick:()=>e("/teacher/create?type=quiz&moduleId="+t+"&subjectId="+u),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg hover:scale-105 transition-transform",children:[O.jsx(_f,{className:"w-4 h-4"})," New Quiz"]})]}),O.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[g.map(R=>O.jsxs(on.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-panel p-4 rounded-xl flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${R.type==="quiz"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:R.type==="quiz"?O.jsx(s2,{className:"w-5 h-5"}):O.jsx(Fd,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-bold text-white",children:R.title}),O.jsx("p",{className:"text-xs text-slate-400 capitalize",children:R.type==="text"?"Note/Page":"Quiz"})]})]}),O.jsxs("div",{className:"flex gap-2",children:[R.type==="quiz"&&O.jsx("button",{onClick:()=>S(R),className:"p-2 text-slate-500 hover:text-blue-400 transition-colors",title:"Generate QR",children:O.jsx(J6,{className:"w-4 h-4"})}),O.jsx("button",{onClick:()=>e(`/teacher/create?type=${R.type}&editId=${R.id}&moduleId=${t}&subjectId=${u}`),className:"p-2 text-slate-500 hover:text-white transition-colors",children:O.jsx(Nk,{className:"w-4 h-4"})}),O.jsx("button",{onClick:()=>N(R.id),className:"p-2 text-slate-500 hover:text-red-400 transition-colors",children:O.jsx(qd,{className:"w-4 h-4"})})]})]},R.id)),g.length===0&&O.jsxs("div",{className:"text-center text-slate-500 py-12 glass-panel rounded-2xl border-dashed border-white/10",children:[O.jsx("p",{className:"font-medium",children:"No content in this module yet."}),O.jsx("p",{className:"text-xs opacity-70",children:"Add a Text Page or Quiz."})]})]})]})]})}const fie="/GramShiksha/assets/math-B6MsHDbu.png",hie="/GramShiksha/assets/science-Dw2e4aeG.png",die="/GramShiksha/assets/english-DIlA6yIJ.png",pie="/GramShiksha/assets/marathi-D1BrB11J.png",mie="/GramShiksha/assets/hindi-OjzyUH1Q.png",h6="/GramShiksha/assets/history-DRH5x8lH.png",gie="/GramShiksha/assets/geography-nRdUz3S8.png",yie="/GramShiksha/assets/defense-B1qL6iQU.png",vie="/GramShiksha/assets/language-CL4LzxDH.png",bie=t=>{const e=t.toLowerCase();return e.includes("english")||e.includes("")?die:e.includes("marathi")||e.includes("")?pie:e.includes("hindi")||e.includes("")?mie:e.includes("math")||e.includes("")?fie:e.includes("sci")||e.includes("")||e.includes("evs")||e.includes("")?hie:e.includes("history")||e.includes("hist")||e.includes("")?h6:e.includes("geo")||e.includes("")?gie:e.includes("defense")||e.includes("defenc")||e.includes("")?yie:e.includes("civic")||e.includes("polit")||e.includes("state")||e.includes("social")?h6:vie};function d6(){const{db:t}=Ui(),{currentUser:e}=ws(),n=Mi(),{subjectId:r}=Ud(),[i,a]=re.useState(null),[u,p]=re.useState([]),[g,y]=re.useState([]),[w,S]=re.useState({}),[_,C]=re.useState(!0);return re.useEffect(()=>{if(!t||!e)return;(async()=>{if(r){const R=await t.content.findOne(r).exec();R&&a(R.toJSON());const M=await t.content.find({selector:{subjectId:r},sort:[{createdAt:"asc"}]}).exec();y(M.map(j=>j.toJSON()));const L=await t.progress.find({selector:{userId:e.id}}).exec(),k={};L.forEach(j=>{k[j.get("levelId")]=j.toJSON()}),S(k)}else{const M=(await t.content.find().exec()).filter(U=>U.type==="subject"&&(U.classId===e.classId||U.classId===e.teacherClassId)&&(U.medium||"english")===(e.medium||"english")),L=new Map;M.forEach(U=>{const F=L.get(U.title);F?U.medium&&!F.medium&&L.set(U.title,U):L.set(U.title,U)});const k=Array.from(L.values()),j=["English","Marathi","Hindi","Mathematics","Science","History","Geography","Defense"],$=U=>{const F=j.findIndex(B=>U.includes(B));return F===-1?99:F};k.sort((U,F)=>$(U.title)-$(F.title)),p(k.map(U=>U.toJSON()))}C(!1)})()},[t,r,e]),_?O.jsx("div",{className:"min-h-screen grid place-items-center text-cyan-400 animate-pulse",children:"Syncing Knowledge..."}):r?i?O.jsxs("div",{className:"min-h-screen p-6 pb-24 font-sans relative",children:[O.jsx("div",{className:"cosmic-bg"}),O.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[O.jsx("button",{onClick:()=>n("/learn"),className:"p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-colors text-slate-300 hover:text-white",children:O.jsx(gs,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-3xl font-bold text-white leading-tight",children:i.title}),O.jsxs("p",{className:"text-sm text-slate-400",children:[g.length," Modules  Class ",e?.classId||"N/A"]})]})]}),O.jsxs("div",{className:"space-y-4 max-w-3xl mx-auto",children:[g.length===0&&O.jsxs("div",{className:"text-center py-16 glass-panel rounded-3xl border-dashed border-white/10",children:[O.jsx("p",{className:"text-slate-500 font-medium",children:"No lessons added yet."}),O.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Wait for your teacher to publish content."})]}),g.map((N,R)=>{const L=!!w[N.id]?.completed;return O.jsxs(on.button,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:R*.05},disabled:!1,onClick:()=>n(`/play/${N.id}`),className:`w-full group relative overflow-hidden rounded-3xl border transition-all duration-300 text-left p-6 flex items-center gap-6
                                ${L?"bg-slate-900/40 border-green-500/30 hover:border-green-500/60":"glass-panel border-white/5 hover:border-cyan-500/50 hover:bg-white/5 hover:shadow-[0_0_30px_rgba(6,182,212,0.15)] hover:-translate-y-1"}
                            `,children:[O.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-xl font-bold shadow-inner transition-colors duration-300
                                ${L?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-white/5 text-cyan-400 border border-white/10 group-hover:bg-cyan-500/20 group-hover:border-cyan-500/30"}
                            `,children:L?O.jsx(xf,{className:"w-6 h-6"}):O.jsx("span",{className:"text-xl font-black opacity-50 group-hover:opacity-100",children:R+1})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("h3",{className:`text-xl font-bold mb-1 transition-colors ${L?"text-slate-300":"text-white group-hover:text-cyan-400"}`,children:N.title}),O.jsx("p",{className:"text-sm text-slate-400 font-medium line-clamp-1 group-hover:text-slate-300 transition-colors",children:N.description||"Tap to start this lesson"})]}),O.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center border transition-all duration-300
                                ${L?"bg-white/5 border-white/5 text-slate-600":"bg-cyan-500 text-black border-cyan-400 shadow-[0_0_15px_rgba(6,182,212,0.4)] group-hover:scale-110 group-hover:shadow-[0_0_25px_rgba(6,182,212,0.6)]"}
                            `,children:L?O.jsx(xf,{className:"w-5 h-5"}):O.jsx(x_,{className:"w-5 h-5 fill-current ml-1"})})]},N.id)})]})]}):O.jsxs("div",{className:"p-10 text-center text-slate-400",children:["Subject not found. ",O.jsx("button",{onClick:()=>n("/dashboard"),className:"text-cyan-400 underline",children:"Go Home"})]}):O.jsxs("div",{className:"min-h-screen p-6 pb-24 font-sans relative animate-fade-in",children:[O.jsx("div",{className:"cosmic-bg"}),O.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[O.jsx("button",{onClick:()=>n("/dashboard"),className:"p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-colors text-slate-300 hover:text-white",children:O.jsx(gs,{className:"w-5 h-5"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"My Class"}),O.jsxs("p",{className:"text-sm text-slate-400",children:["Class ",e?.classId||"N/A","  ",u.length," Subjects"]})]})]}),O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl mx-auto",children:u.map((N,R)=>O.jsxs(on.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:R*.05},onClick:()=>n(`/learn/${N.id}`),className:"group relative h-48 rounded-3xl overflow-hidden cursor-pointer border border-white/5 shadow-2xl hover:scale-[1.02] transition-transform",children:[O.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${bie(N.title)})`}}),O.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent/30"}),O.jsxs("div",{className:"absolute bottom-0 left-0 p-6 w-full",children:[O.jsx("h3",{className:"text-2xl font-black text-white mb-1 group-hover:text-cyan-400 transition-colors drop-shadow-md",children:N.title}),O.jsx("div",{className:"flex items-center gap-2",children:O.jsxs("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-white/20 text-white backdrop-blur-md uppercase tracking-wider",children:["Standard ",N.classId]})})]}),O.jsx("div",{className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-4 group-hover:translate-x-0",children:O.jsx(x_,{className:"w-5 h-5 text-white fill-white"})})]},N.id))})]})}function wie(){const{db:t}=Ui(),{currentUser:e}=ws(),n=Mi(),{t:r}=Ff(),[i,a]=re.useState([]),[u,p]=re.useState({}),[g,y]=re.useState(!0);return re.useEffect(()=>{if(!t||!e)return;(async()=>{const _=(await t.content.find({selector:{isHomework:{$eq:!0}}}).exec()).filter(R=>{const M=R.classId===e.classId,L=R.classId===e.teacherClassId;return M||L});a(_.map(R=>R.toJSON()));const C=await t.progress.find({selector:{userId:e.id}}).exec(),N={};C.forEach(R=>{N[R.get("levelId")]=R.toJSON()}),p(N),y(!1)})()},[t,e]),O.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg font-sans",children:[O.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[O.jsx("button",{onClick:()=>n("/dashboard"),className:"p-3 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/5 transition-colors text-slate-300 hover:text-white",children:O.jsx(gs,{className:"w-6 h-6"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-3xl font-black bg-gradient-to-r from-purple-400 via-pink-400 to-red-400 bg-clip-text text-transparent",children:r("nav.homework")}),O.jsxs("p",{className:"text-sm text-slate-400 font-medium",children:[i.length," ",r("homework.pending_count")]})]})]}),O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto",children:g?O.jsx("div",{className:"col-span-full py-20 text-center animate-pulse text-purple-400 font-bold",children:r("homework.checking")}):i.length===0?O.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-24 text-slate-500 gap-6 glass-panel rounded-3xl border-dashed border-white/10",children:[O.jsx("div",{className:"p-6 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-full shadow-[0_0_30px_rgba(168,85,247,0.2)]",children:O.jsx(Sf,{className:"w-12 h-12 text-purple-400"})}),O.jsxs("div",{className:"text-center space-y-2",children:[O.jsx("h3",{className:"text-white font-bold text-xl",children:r("homework.all_caught_up")}),O.jsx("p",{className:"text-sm opacity-60 max-w-xs mx-auto",children:r("homework.no_homework_desc")})]})]}):O.jsx(wo,{children:i.map((w,S)=>{const _=!!u[w.id]?.score,C=u[w.id]?.score;return O.jsxs(on.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:S*.05},onClick:()=>n(`/play/${w.id}`),className:`group relative text-left w-full h-full p-6 rounded-3xl border transition-all duration-300
                                        ${_?"bg-slate-900/40 border-green-500/30 hover:border-green-500/60":"glass-panel border-purple-500/30 hover:border-purple-500/80 hover:shadow-[0_0_30px_rgba(168,85,247,0.15)] hover:-translate-y-1"}
                                    `,children:[O.jsxs("div",{className:"flex justify-between items-start mb-4",children:[O.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl shadow-inner
                                            ${w.type==="quiz"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}
                                        `,children:w.type==="quiz"?O.jsx(s2,{className:"w-6 h-6"}):O.jsx(Fd,{className:"w-6 h-6"})}),_?O.jsxs("div",{className:"flex flex-col items-end",children:[O.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-500/20 text-green-400 text-xs font-bold border border-green-500/30 flex items-center gap-1",children:[O.jsx(xf,{className:"w-3 h-3"})," ",r("homework.done")]}),C!==void 0&&O.jsx("span",{className:"text-xs font-bold text-slate-400 mt-1",children:r("homework.score_percent",{score:C})})]}):O.jsxs("span",{className:"px-3 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs font-bold border border-purple-500/30 flex items-center gap-1 animate-pulse",children:[O.jsx(Ob,{className:"w-3 h-3"})," ",r("homework.pending")]})]}),O.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-purple-400 group-hover:to-pink-400 transition-colors",children:w.title}),O.jsx("p",{className:"text-sm text-slate-400 line-clamp-2 leading-relaxed mb-4",children:w.description||r("homework.default_desc")}),O.jsxs("div",{className:"border-t border-white/5 pt-4 flex items-center justify-between text-xs font-medium text-slate-500 group-hover:text-purple-300 transition-colors",children:[O.jsx("span",{children:new Date(w.createdAt||Date.now()).toLocaleDateString(void 0,{month:"short",day:"numeric"})}),O.jsxs("span",{className:"flex items-center gap-1",children:[r("homework.open")," "]})]})]},w.id)})})})]})}function Eie(){const{db:t}=Ui(),{currentUser:e}=ws(),n=Mi(),{t:r}=Ff(),[i,a]=re.useState({totalStars:0,totalScore:0,lessonsCompleted:0});return re.useEffect(()=>{if(!t||!e)return;(async()=>{const p=await t.progress.find({selector:{userId:e.id}}).exec();let g=0,y=0,w=0;p.forEach(S=>{g+=S.get("stars"),y+=S.get("score"),w++}),a({totalStars:g,totalScore:y,lessonsCompleted:w})})()},[t,e]),O.jsxs("div",{className:"min-h-screen p-6 pb-24 space-y-8 animate-fade-in",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:()=>n("/dashboard"),className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors",children:O.jsx(gs,{className:"w-5 h-5 text-white"})}),O.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:r("nav.achievements")})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{className:"glass-panel p-6 flex flex-col items-center justify-center gap-2 text-center",children:[O.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center text-yellow-500 mb-2",children:O.jsx(DL,{className:"w-6 h-6"})}),O.jsx("h3",{className:"text-2xl font-bold text-white",children:i.totalStars}),O.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:"Total Stars"})]}),O.jsxs("div",{className:"glass-panel p-6 flex flex-col items-center justify-center gap-2 text-center",children:[O.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-500 mb-2",children:O.jsx(n5,{className:"w-6 h-6"})}),O.jsx("h3",{className:"text-2xl font-bold text-white",children:i.totalScore}),O.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:"Total XP"})]}),O.jsx("div",{className:"glass-panel p-6 col-span-2 flex items-center justify-between",children:O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-500",children:O.jsx(Rk,{className:"w-6 h-6"})}),O.jsxs("div",{className:"text-left",children:[O.jsx("h3",{className:"text-lg font-bold text-white",children:"Learner"}),O.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.lessonsCompleted," Lessons Completed"]})]})]})})]}),O.jsx("div",{className:"text-center text-xs text-muted-foreground pt-8",children:"More achievements coming soon!"})]})}function Sie(){const t=Mi(),{t:e}=Ff();return O.jsxs("div",{className:"min-h-screen p-6 pb-24 space-y-6 animate-fade-in text-center",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors",children:O.jsx(gs,{className:"w-5 h-5 text-white"})}),O.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-orange-400 to-red-400 bg-clip-text text-transparent",children:e("nav.village")})]}),O.jsxs("div",{className:"py-12 space-y-6",children:[O.jsx("div",{className:"w-32 h-32 mx-auto rounded-full bg-orange-500/10 border border-orange-500/30 flex items-center justify-center animate-pulse",children:O.jsx(Z6,{className:"w-12 h-12 text-orange-500"})}),O.jsx("h2",{className:"text-xl font-bold text-white",children:"Village Stats Coming Soon"}),O.jsx("p",{className:"text-muted-foreground max-w-xs mx-auto text-sm",children:"Compete with other villages! This feature will aggregate scores from all students in your local area."}),O.jsxs("div",{className:"glass-panel p-4 rounded-xl max-w-sm mx-auto opacity-50",children:[O.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-2 mb-2",children:[O.jsx("span",{className:"text-sm font-bold",children:"1. Punawale"}),O.jsx("span",{className:"text-sm text-yellow-400 font-mono",children:"12,450 XP"})]}),O.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-2 mb-2",children:[O.jsx("span",{className:"text-sm font-bold",children:"2. Marunji"}),O.jsx("span",{className:"text-sm text-yellow-400 font-mono",children:"11,200 XP"})]}),O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsx("span",{className:"text-sm font-bold",children:"3. Hinjewadi"}),O.jsx("span",{className:"text-sm text-yellow-400 font-mono",children:"9,800 XP"})]})]})]})]})}function xie(){const t=Mi(),[e,n]=re.useState({present:0,percentage:0}),[r,i]=re.useState([]),[a]=re.useState(new Date().toLocaleString("default",{month:"long",year:"numeric"}));return re.useEffect(()=>{const u=JSON.parse(localStorage.getItem("attendance_log")||"[]"),p=new Date,g=p.getFullYear(),y=p.getMonth(),w=new Date(g,y+1,0).getDate(),S=[];let _=0,C=0;for(let R=1;R<=w;R++){const M=`${g}-${String(y+1).padStart(2,"0")}-${String(R).padStart(2,"0")}`,k=new Date(g,y,R).getDay()===0,j=R>p.getDate(),$=u.includes(M);$&&_++,!k&&!j&&C++,S.push({day:R,date:M,status:j?"future":k?"holiday":$?"present":"absent"})}const N=C>0?Math.round(_/C*100):0;i(S),n({present:_,percentage:Math.min(N,100)})},[]),O.jsx("div",{className:"min-h-screen p-4 pb-24 animate-fade-in aurora-bg",children:O.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[O.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[O.jsx("button",{onClick:()=>t("/dashboard"),className:"p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors backdrop-blur-md",children:O.jsx(gs,{className:"w-5 h-5 text-white"})}),O.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:"Attendance"})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{className:"glass-panel p-4 flex flex-col items-center justify-center min-h-[120px]",children:[O.jsxs("span",{className:"text-4xl font-black text-green-400 drop-shadow-lg",children:[e.percentage,"%"]}),O.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-widest mt-2 font-bold",children:"Rate"})]}),O.jsxs("div",{className:"glass-panel p-4 flex flex-col items-center justify-center min-h-[120px]",children:[O.jsx("span",{className:"text-4xl font-black text-white drop-shadow-lg",children:e.present}),O.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-widest mt-2 font-bold",children:"Days"})]})]}),O.jsxs("div",{className:"glass-panel p-4",children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[O.jsx(X6,{className:"w-5 h-5 text-cyan-400"}),a]}),O.jsx("div",{className:"flex gap-2 text-[10px] uppercase font-bold text-slate-500",children:O.jsxs("span",{className:"flex items-center gap-1",children:[O.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]"})," Present"]})})]}),O.jsxs("div",{className:"grid grid-cols-7 gap-3",children:[["S","M","T","W","T","F","S"].map(u=>O.jsx("div",{className:"text-center text-xs text-slate-500 font-bold mb-1",children:u},u)),r.map(u=>O.jsxs("div",{className:`aspect-square rounded-xl flex items-center justify-center text-sm font-bold transition-all relative overflow-hidden
                                    ${u.status==="present"?"bg-gradient-to-br from-green-500/20 to-emerald-500/20 text-emerald-300 border border-green-500/30 shadow-[0_0_12px_rgba(16,185,129,0.15)]":u.status==="absent"?"bg-red-500/5 text-red-500/30":u.status==="holiday"?"bg-white/5 text-slate-600 border border-dashed border-white/5":"opacity-20 text-slate-600"}
                                `,children:[u.status==="present"&&O.jsx("div",{className:"absolute inset-0 bg-green-400/10 blur-xl"}),u.day]},u.day))]})]}),O.jsx("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/20 text-center",children:O.jsx("p",{className:"text-purple-300 text-xs",children:"Sync your device daily to mark attendance automatically."})})]})})}const ts=({children:t})=>{const{currentUser:e}=ws();return e?O.jsx(O.Fragment,{children:t}):O.jsx(j7,{to:"/",replace:!0})},_ie=cL([{path:"/",element:O.jsx(uH,{}),children:[{index:!0,element:O.jsx(HW,{})},{path:"dashboard",element:O.jsx(ts,{children:O.jsx(GW,{})})},{path:"play/:levelId",element:O.jsx(ts,{children:O.jsx(QW,{})})},{path:"sync",element:O.jsx(ts,{children:O.jsx(nQ,{})})},{path:"settings",element:O.jsx(ts,{children:O.jsx(rQ,{})})},{path:"learn",element:O.jsx(ts,{children:O.jsx(d6,{})})},{path:"learn/:subjectId",element:O.jsx(ts,{children:O.jsx(d6,{})})},{path:"homework",element:O.jsx(ts,{children:O.jsx(wie,{})})},{path:"achievements",element:O.jsx(ts,{children:O.jsx(Eie,{})})},{path:"village",element:O.jsx(ts,{children:O.jsx(Sie,{})})},{path:"leaderboard",element:O.jsx(ts,{children:O.jsxs("div",{className:"p-6 pb-24 space-y-6",children:[O.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-400",children:"Class Leaderboard"}),O.jsx(yM,{})]})})}]},{path:"attendance",element:O.jsx(ts,{children:O.jsx(xie,{})})},{path:"/create-profile",element:O.jsx(KW,{})},{path:"/teacher",element:O.jsx(ts,{children:O.jsx(iQ,{})})},{path:"/teacher/create",element:O.jsx(ts,{children:O.jsx(oie,{})})},{path:"/teacher/class/:classId",element:O.jsx(ts,{children:O.jsx(lie,{})})},{path:"/teacher/subject/:subjectId",element:O.jsx(ts,{children:O.jsx(cie,{})})},{path:"/teacher/module/:moduleId",element:O.jsx(ts,{children:O.jsx(uie,{})})}]),Aie={title:"AlgoSensei",tagline:"Offline Learning AI"},Cie={home:"Home",my_class:"My Class",subjects_lessons:"Subjects & Lessons",learn:"Learn",sync:"Sync",settings:"Settings",homework:"Homework",pending_assignments:"Pending Assignments",leaderboard:"Leaderboard",class_rankings:"Class Rankings",village_rank:"Village Rank",community_standing:"Community Standing",recently_sync:"Recently Sync",sync_history:"Sync History",attendance:"Attendance",track_presence:"Track Presence",achievements:"Achievements",village:"Village"},Nie={welcome:"Welcome back, {{name}}!",hello:"Hello, {{name}}",ready:"Ready to explore?",stars:"Stars",score:"Score",xp:"XP",system_energy:"System Energy",elite_status:"Elite Status",star_currency:"Star Currency",sync_btn:"Sync Data",logout_btn:"Log Out"},Tie={title:"Settings",language:"Language",reset_data:"Reset All Data",teacher_ip:"Teacher Hotspot IP",save:"Save"},Oie={portal:"Teacher Portal",dashboard:"Dashboard",create_content:"Create Content"},Rie={pending_count:"Assignments Pending",checking:"Checking assignments...",all_caught_up:"All Caught Up!",no_homework_desc:"No homework assigned yet. Enjoy your free time!",done:"Done",pending:"Pending",score_percent:"{{score}}% Score",open:"Open Assignment",default_desc:"Assigned by your teacher. Complete to earn XP!"},Iie={app:Aie,nav:Cie,dashboard:Nie,settings:Tie,teacher:Oie,homework:Rie},Mie={title:"",tagline:"  "},Die={home:"",my_class:" ",subjects_lessons:"  ",learn:"",sync:"",settings:"",homework:"",pending_assignments:" ",leaderboard:"",class_rankings:" ",village_rank:" ",community_standing:" ",recently_sync:"   ",sync_history:" ",attendance:"",track_presence:"  ",achievements:"",village:""},Lie={welcome:"   , {{name}}!",hello:", {{name}}",ready:"   ?",stars:"",score:"",xp:"XP",system_energy:" ",elite_status:" ",star_currency:" ",sync_btn:"  ",logout_btn:" "},kie={title:"",language:"",reset_data:"   ",teacher_ip:"  ",save:""},jie={portal:" ",dashboard:"",create_content:" "},Pie={pending_count:" ",checking:"     ...",all_caught_up:"   !",no_homework_desc:"         !",done:"",pending:"",score_percent:"{{score}}% ",open:" ",default_desc:"     XP     !"},Bie={app:Mie,nav:Die,dashboard:Lie,settings:kie,teacher:jie,homework:Pie},Uie={title:"",tagline:"  "},zie={home:"",my_class:" ",subjects_lessons:"  ",learn:"",sync:"",settings:"",homework:"",pending_assignments:" ",leaderboard:"",class_rankings:" ",village_rank:" ",community_standing:" ",recently_sync:" ",sync_history:" ",attendance:"",track_presence:"  ",achievements:"",village:""},Fie={welcome:"  , {{name}}!",hello:", {{name}}",ready:"   ?",stars:"",score:"",xp:"XP",system_energy:" ",elite_status:" ",star_currency:" ",sync_btn:"  ",logout_btn:" "},qie={title:"",language:"",reset_data:"   ",teacher_ip:"  ",save:" "},$ie={portal:" ",dashboard:"",create_content:"  "},Vie={pending_count:" ",checking:"  ...",all_caught_up:"  !",no_homework_desc:"   .     !",done:"",pending:"",score_percent:"{{score}}% ",open:" ",default_desc:"  . XP   !"},Hie={app:Uie,nav:zie,dashboard:Fie,settings:qie,teacher:$ie,homework:Vie};Es.use(tH).init({resources:{en:{translation:Iie},hi:{translation:Bie},mr:{translation:Hie}},lng:localStorage.getItem("appLanguage")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});function Kie(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:u}=t;let p,g;const y=async(S=!0)=>{await g};async function w(){if("serviceWorker"in navigator){if(p=await A1(async()=>{const{Workbox:S}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:S}},[]).then(({Workbox:S})=>new S("/GramShiksha/sw.js",{scope:"/GramShiksha/",type:"classic"})).catch(S=>{u?.(S)}),!p)return;p.addEventListener("activated",S=>{(S.isUpdate||S.isExternal)&&window.location.reload()}),p.addEventListener("installed",S=>{S.isUpdate||r?.()}),p.register({immediate:e}).then(S=>{a?a("/GramShiksha/sw.js",S):i?.(S)}).catch(S=>{u?.(S)})}}return g=w(),y}Kie({immediate:!0});KD.createRoot(document.getElementById("root")).render(O.jsx(SV,{children:O.jsx(xV,{children:O.jsx(SL,{router:_ie})})}))});export default Gie();
