var BI=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ree=BI((Us,Fs)=>{function S6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Zl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tg={exports:{}},af={};var lS;function PI(){if(lS)return af;lS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var h=null;if(o!==void 0&&(h=""+o),i.key!==void 0&&(h=""+i.key),"key"in i){o={};for(var m in i)m!=="key"&&(o[m]=i[m])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:h,ref:i!==void 0?i:null,props:o}}return af.Fragment=e,af.jsx=n,af.jsxs=n,af}var cS;function UI(){return cS||(cS=1,Tg.exports=PI()),Tg.exports}var T=UI(),Ng={exports:{}},of={},_g={exports:{}},Og={};var uS;function FI(){return uS||(uS=1,(function(t){function e(Y,oe){var ve=Y.length;Y.push(oe);e:for(;0<ve;){var Ee=ve-1>>>1,be=Y[Ee];if(0<i(be,oe))Y[Ee]=oe,Y[ve]=be,ve=Ee;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var oe=Y[0],ve=Y.pop();if(ve!==oe){Y[0]=ve;e:for(var Ee=0,be=Y.length,ne=be>>>1;Ee<ne;){var ye=2*(Ee+1)-1,Ce=Y[ye],ke=ye+1,He=Y[ke];if(0>i(Ce,ve))ke<be&&0>i(He,Ce)?(Y[Ee]=He,Y[ke]=ve,Ee=ke):(Y[Ee]=Ce,Y[ye]=ve,Ee=ye);else if(ke<be&&0>i(He,ve))Y[Ee]=He,Y[ke]=ve,Ee=ke;else break e}}return oe}function i(Y,oe){var ve=Y.sortIndex-oe.sortIndex;return ve!==0?ve:Y.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var h=Date,m=h.now();t.unstable_now=function(){return h.now()-m}}var y=[],g=[],E=1,S=null,N=3,I=!1,R=!1,D=!1,j=!1,B=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function se(Y){for(var oe=n(g);oe!==null;){if(oe.callback===null)r(g);else if(oe.startTime<=Y)r(g),oe.sortIndex=oe.expirationTime,e(y,oe);else break;oe=n(g)}}function ee(Y){if(D=!1,se(Y),!R)if(n(y)!==null)R=!0,J||(J=!0,fe());else{var oe=n(g);oe!==null&&ie(ee,oe.startTime-Y)}}var J=!1,F=-1,ce=5,de=-1;function ze(){return j?!0:!(t.unstable_now()-de<ce)}function Q(){if(j=!1,J){var Y=t.unstable_now();de=Y;var oe=!0;try{e:{R=!1,D&&(D=!1,H(F),F=-1),I=!0;var ve=N;try{t:{for(se(Y),S=n(y);S!==null&&!(S.expirationTime>Y&&ze());){var Ee=S.callback;if(typeof Ee=="function"){S.callback=null,N=S.priorityLevel;var be=Ee(S.expirationTime<=Y);if(Y=t.unstable_now(),typeof be=="function"){S.callback=be,se(Y),oe=!0;break t}S===n(y)&&r(y),se(Y)}else r(y);S=n(y)}if(S!==null)oe=!0;else{var ne=n(g);ne!==null&&ie(ee,ne.startTime-Y),oe=!1}}break e}finally{S=null,N=ve,I=!1}oe=void 0}}finally{oe?fe():J=!1}}}var fe;if(typeof V=="function")fe=function(){V(Q)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ne=he.port2;he.port1.onmessage=Q,fe=function(){Ne.postMessage(null)}}else fe=function(){B(Q,0)};function ie(Y,oe){F=B(function(){Y(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_next=function(Y){switch(N){case 1:case 2:case 3:var oe=3;break;default:oe=N}var ve=N;N=oe;try{return Y()}finally{N=ve}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ve=N;N=Y;try{return oe()}finally{N=ve}},t.unstable_scheduleCallback=function(Y,oe,ve){var Ee=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ee+ve:Ee):ve=Ee,Y){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ve+be,Y={id:E++,callback:oe,priorityLevel:Y,startTime:ve,expirationTime:be,sortIndex:-1},ve>Ee?(Y.sortIndex=ve,e(g,Y),n(y)===null&&Y===n(g)&&(D?(H(F),F=-1):D=!0,ie(ee,ve-Ee))):(Y.sortIndex=be,e(y,Y),R||I||(R=!0,J||(J=!0,fe()))),Y},t.unstable_shouldYield=ze,t.unstable_wrapCallback=function(Y){var oe=N;return function(){var ve=N;N=oe;try{return Y.apply(this,arguments)}finally{N=ve}}}})(Og)),Og}var hS;function zI(){return hS||(hS=1,_g.exports=FI()),_g.exports}var Ig={exports:{}},un={};var fS;function HI(){if(fS)return un;fS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),N=Symbol.iterator;function I(ne){return ne===null||typeof ne!="object"?null:(ne=N&&ne[N]||ne["@@iterator"],typeof ne=="function"?ne:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,j={};function B(ne,ye,Ce){this.props=ne,this.context=ye,this.refs=j,this.updater=Ce||R}B.prototype.isReactComponent={},B.prototype.setState=function(ne,ye){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,ye,"setState")},B.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function H(){}H.prototype=B.prototype;function V(ne,ye,Ce){this.props=ne,this.context=ye,this.refs=j,this.updater=Ce||R}var se=V.prototype=new H;se.constructor=V,D(se,B.prototype),se.isPureReactComponent=!0;var ee=Array.isArray;function J(){}var F={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function de(ne,ye,Ce){var ke=Ce.ref;return{$$typeof:t,type:ne,key:ye,ref:ke!==void 0?ke:null,props:Ce}}function ze(ne,ye){return de(ne.type,ye,ne.props)}function Q(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===t}function fe(ne){var ye={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Ce){return ye[Ce]})}var he=/\/+/g;function Ne(ne,ye){return typeof ne=="object"&&ne!==null&&ne.key!=null?fe(""+ne.key):ye.toString(36)}function ie(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(J,J):(ne.status="pending",ne.then(function(ye){ne.status==="pending"&&(ne.status="fulfilled",ne.value=ye)},function(ye){ne.status==="pending"&&(ne.status="rejected",ne.reason=ye)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function Y(ne,ye,Ce,ke,He){var Fe=typeof ne;(Fe==="undefined"||Fe==="boolean")&&(ne=null);var Ct=!1;if(ne===null)Ct=!0;else switch(Fe){case"bigint":case"string":case"number":Ct=!0;break;case"object":switch(ne.$$typeof){case t:case e:Ct=!0;break;case E:return Ct=ne._init,Y(Ct(ne._payload),ye,Ce,ke,He)}}if(Ct)return He=He(ne),Ct=ke===""?"."+Ne(ne,0):ke,ee(He)?(Ce="",Ct!=null&&(Ce=Ct.replace(he,"$&/")+"/"),Y(He,ye,Ce,"",function(Wt){return Wt})):He!=null&&(Q(He)&&(He=ze(He,Ce+(He.key==null||ne&&ne.key===He.key?"":(""+He.key).replace(he,"$&/")+"/")+Ct)),ye.push(He)),1;Ct=0;var dt=ke===""?".":ke+":";if(ee(ne))for(var Ze=0;Ze<ne.length;Ze++)ke=ne[Ze],Fe=dt+Ne(ke,Ze),Ct+=Y(ke,ye,Ce,Fe,He);else if(Ze=I(ne),typeof Ze=="function")for(ne=Ze.call(ne),Ze=0;!(ke=ne.next()).done;)ke=ke.value,Fe=dt+Ne(ke,Ze++),Ct+=Y(ke,ye,Ce,Fe,He);else if(Fe==="object"){if(typeof ne.then=="function")return Y(ie(ne),ye,Ce,ke,He);throw ye=String(ne),Error("Objects are not valid as a React child (found: "+(ye==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":ye)+"). If you meant to render a collection of children, use an array instead.")}return Ct}function oe(ne,ye,Ce){if(ne==null)return ne;var ke=[],He=0;return Y(ne,ke,"","",function(Fe){return ye.call(Ce,Fe,He++)}),ke}function ve(ne){if(ne._status===-1){var ye=ne._result;ye=ye(),ye.then(function(Ce){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Ce)},function(Ce){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Ce)}),ne._status===-1&&(ne._status=0,ne._result=ye)}if(ne._status===1)return ne._result.default;throw ne._result}var Ee=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ye=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(ye))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},be={map:oe,forEach:function(ne,ye,Ce){oe(ne,function(){ye.apply(this,arguments)},Ce)},count:function(ne){var ye=0;return oe(ne,function(){ye++}),ye},toArray:function(ne){return oe(ne,function(ye){return ye})||[]},only:function(ne){if(!Q(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return un.Activity=S,un.Children=be,un.Component=B,un.Fragment=n,un.Profiler=i,un.PureComponent=V,un.StrictMode=r,un.Suspense=y,un.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,un.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return F.H.useMemoCache(ne)}},un.cache=function(ne){return function(){return ne.apply(null,arguments)}},un.cacheSignal=function(){return null},un.cloneElement=function(ne,ye,Ce){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var ke=D({},ne.props),He=ne.key;if(ye!=null)for(Fe in ye.key!==void 0&&(He=""+ye.key),ye)!ce.call(ye,Fe)||Fe==="key"||Fe==="__self"||Fe==="__source"||Fe==="ref"&&ye.ref===void 0||(ke[Fe]=ye[Fe]);var Fe=arguments.length-2;if(Fe===1)ke.children=Ce;else if(1<Fe){for(var Ct=Array(Fe),dt=0;dt<Fe;dt++)Ct[dt]=arguments[dt+2];ke.children=Ct}return de(ne.type,He,ke)},un.createContext=function(ne){return ne={$$typeof:h,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:o,_context:ne},ne},un.createElement=function(ne,ye,Ce){var ke,He={},Fe=null;if(ye!=null)for(ke in ye.key!==void 0&&(Fe=""+ye.key),ye)ce.call(ye,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(He[ke]=ye[ke]);var Ct=arguments.length-2;if(Ct===1)He.children=Ce;else if(1<Ct){for(var dt=Array(Ct),Ze=0;Ze<Ct;Ze++)dt[Ze]=arguments[Ze+2];He.children=dt}if(ne&&ne.defaultProps)for(ke in Ct=ne.defaultProps,Ct)He[ke]===void 0&&(He[ke]=Ct[ke]);return de(ne,Fe,He)},un.createRef=function(){return{current:null}},un.forwardRef=function(ne){return{$$typeof:m,render:ne}},un.isValidElement=Q,un.lazy=function(ne){return{$$typeof:E,_payload:{_status:-1,_result:ne},_init:ve}},un.memo=function(ne,ye){return{$$typeof:g,type:ne,compare:ye===void 0?null:ye}},un.startTransition=function(ne){var ye=F.T,Ce={};F.T=Ce;try{var ke=ne(),He=F.S;He!==null&&He(Ce,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(J,Ee)}catch(Fe){Ee(Fe)}finally{ye!==null&&Ce.types!==null&&(ye.types=Ce.types),F.T=ye}},un.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},un.use=function(ne){return F.H.use(ne)},un.useActionState=function(ne,ye,Ce){return F.H.useActionState(ne,ye,Ce)},un.useCallback=function(ne,ye){return F.H.useCallback(ne,ye)},un.useContext=function(ne){return F.H.useContext(ne)},un.useDebugValue=function(){},un.useDeferredValue=function(ne,ye){return F.H.useDeferredValue(ne,ye)},un.useEffect=function(ne,ye){return F.H.useEffect(ne,ye)},un.useEffectEvent=function(ne){return F.H.useEffectEvent(ne)},un.useId=function(){return F.H.useId()},un.useImperativeHandle=function(ne,ye,Ce){return F.H.useImperativeHandle(ne,ye,Ce)},un.useInsertionEffect=function(ne,ye){return F.H.useInsertionEffect(ne,ye)},un.useLayoutEffect=function(ne,ye){return F.H.useLayoutEffect(ne,ye)},un.useMemo=function(ne,ye){return F.H.useMemo(ne,ye)},un.useOptimistic=function(ne,ye){return F.H.useOptimistic(ne,ye)},un.useReducer=function(ne,ye,Ce){return F.H.useReducer(ne,ye,Ce)},un.useRef=function(ne){return F.H.useRef(ne)},un.useState=function(ne){return F.H.useState(ne)},un.useSyncExternalStore=function(ne,ye,Ce){return F.H.useSyncExternalStore(ne,ye,Ce)},un.useTransition=function(){return F.H.useTransition()},un.version="19.2.3",un}var dS;function gh(){return dS||(dS=1,Ig.exports=HI()),Ig.exports}var Rg={exports:{}},Xi={};var pS;function qI(){if(pS)return Xi;pS=1;var t=gh();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(y,g,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:S==null?null:""+S,children:y,containerInfo:g,implementation:E}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xi.createPortal=function(y,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return o(y,g,null,E)},Xi.flushSync=function(y){var g=h.T,E=r.p;try{if(h.T=null,r.p=2,y)return y()}finally{h.T=g,r.p=E,r.d.f()}},Xi.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},Xi.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Xi.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var E=g.as,S=m(E,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:N,fetchPriority:I}):E==="script"&&r.d.X(y,{crossOrigin:S,integrity:N,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Xi.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},Xi.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,S=m(E,g.crossOrigin);r.d.L(y,E,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Xi.preloadModule=function(y,g){if(typeof y=="string")if(g){var E=m(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},Xi.requestFormReset=function(y){r.d.r(y)},Xi.unstable_batchedUpdates=function(y,g){return y(g)},Xi.useFormState=function(y,g,E){return h.H.useFormState(y,g,E)},Xi.useFormStatus=function(){return h.H.useHostTransitionStatus()},Xi.version="19.2.3",Xi}var mS;function A6(){if(mS)return Rg.exports;mS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rg.exports=qI(),Rg.exports}var gS;function VI(){if(gS)return of;gS=1;var t=zI(),e=gh(),n=A6();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,p=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(p=l.return),s=l.return;while(s)}return l.tag===3?p:null}function h(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function m(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function y(s){if(o(s)!==s)throw Error(r(188))}function g(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(r(188));return l!==s?null:s}for(var p=s,w=l;;){var C=p.return;if(C===null)break;var O=C.alternate;if(O===null){if(w=C.return,w!==null){p=w;continue}break}if(C.child===O.child){for(O=C.child;O;){if(O===p)return y(C),s;if(O===w)return y(C),l;O=O.sibling}throw Error(r(188))}if(p.return!==w.return)p=C,w=O;else{for(var P=!1,$=C.child;$;){if($===p){P=!0,p=C,w=O;break}if($===w){P=!0,w=C,p=O;break}$=$.sibling}if(!P){for($=O.child;$;){if($===p){P=!0,p=O,w=C;break}if($===w){P=!0,w=O,p=C;break}$=$.sibling}if(!P)throw Error(r(189))}}if(p.alternate!==w)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?s:l}function E(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=E(s),l!==null)return l;s=s.sibling}return null}var S=Object.assign,N=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),V=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),ze=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function fe(s){return s===null||typeof s!="object"?null:(s=Q&&s[Q]||s["@@iterator"],typeof s=="function"?s:null)}var he=Symbol.for("react.client.reference");function Ne(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===he?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case B:return"Profiler";case j:return"StrictMode";case ee:return"Suspense";case J:return"SuspenseList";case de:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case V:return s.displayName||"Context";case H:return(s._context.displayName||"Context")+".Consumer";case se:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return l=s.displayName||null,l!==null?l:Ne(s.type)||"Memo";case ce:l=s._payload,s=s._init;try{return Ne(s(l))}catch{}}return null}var ie=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ee=[],be=-1;function ne(s){return{current:s}}function ye(s){0>be||(s.current=Ee[be],Ee[be]=null,be--)}function Ce(s,l){be++,Ee[be]=s.current,s.current=l}var ke=ne(null),He=ne(null),Fe=ne(null),Ct=ne(null);function dt(s,l){switch(Ce(Fe,l),Ce(He,s),Ce(ke,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?RE(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=RE(l),s=ME(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ye(ke),Ce(ke,s)}function Ze(){ye(ke),ye(He),ye(Fe)}function Wt(s){s.memoizedState!==null&&Ce(Ct,s);var l=ke.current,p=ME(l,s.type);l!==p&&(Ce(He,s),Ce(ke,p))}function kt(s){He.current===s&&(ye(ke),ye(He)),Ct.current===s&&(ye(Ct),tf._currentValue=ve)}var ht,mt;function bn(s){if(ht===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);ht=l&&l[1]||"",mt=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ht+s+mt}var mn=!1;function _r(s,l){if(!s||mn)return"";mn=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(l){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Be){var Le=Be}Reflect.construct(s,[],Qe)}else{try{Qe.call()}catch(Be){Le=Be}s.call(Qe.prototype)}}else{try{throw Error()}catch(Be){Le=Be}(Qe=s())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Be){if(Be&&Le&&typeof Be.stack=="string")return[Be.stack,Le.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=w.DetermineComponentFrameRoot(),P=O[0],$=O[1];if(P&&$){var me=P.split(`
`),Re=$.split(`
`);for(C=w=0;w<me.length&&!me[w].includes("DetermineComponentFrameRoot");)w++;for(;C<Re.length&&!Re[C].includes("DetermineComponentFrameRoot");)C++;if(w===me.length||C===Re.length)for(w=me.length-1,C=Re.length-1;1<=w&&0<=C&&me[w]!==Re[C];)C--;for(;1<=w&&0<=C;w--,C--)if(me[w]!==Re[C]){if(w!==1||C!==1)do if(w--,C--,0>C||me[w]!==Re[C]){var Ve=`
`+me[w].replace(" at new "," at ");return s.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",s.displayName)),Ve}while(1<=w&&0<=C);break}}}finally{mn=!1,Error.prepareStackTrace=p}return(p=s?s.displayName||s.name:"")?bn(p):""}function lr(s,l){switch(s.tag){case 26:case 27:case 5:return bn(s.type);case 16:return bn("Lazy");case 13:return s.child!==l&&l!==null?bn("Suspense Fallback"):bn("Suspense");case 19:return bn("SuspenseList");case 0:case 15:return _r(s.type,!1);case 11:return _r(s.type.render,!1);case 1:return _r(s.type,!0);case 31:return bn("Activity");default:return""}}function Tn(s){try{var l="",p=null;do l+=lr(s,p),p=s,s=s.return;while(s);return l}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var tn=Object.prototype.hasOwnProperty,ri=t.unstable_scheduleCallback,ft=t.unstable_cancelCallback,$i=t.unstable_shouldYield,Li=t.unstable_requestPaint,an=t.unstable_now,jr=t.unstable_getCurrentPriorityLevel,Wn=t.unstable_ImmediatePriority,ii=t.unstable_UserBlockingPriority,Rn=t.unstable_NormalPriority,Nn=t.unstable_LowPriority,Sr=t.unstable_IdlePriority,si=t.log,ki=t.unstable_setDisableYieldValue,Mn=null,$e=null;function rt(s){if(typeof si=="function"&&ki(s),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Mn,s)}catch{}}var jt=Math.clz32?Math.clz32:st,dn=Math.log,Yr=Math.LN2;function st(s){return s>>>=0,s===0?32:31-(dn(s)/Yr|0)|0}var Hr=256,Qt=262144,cr=4194304;function ai(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Xr(s,l,p){var w=s.pendingLanes;if(w===0)return 0;var C=0,O=s.suspendedLanes,P=s.pingedLanes;s=s.warmLanes;var $=w&134217727;return $!==0?(w=$&~O,w!==0?C=ai(w):(P&=$,P!==0?C=ai(P):p||(p=$&~s,p!==0&&(C=ai(p))))):($=w&~O,$!==0?C=ai($):P!==0?C=ai(P):p||(p=w&~s,p!==0&&(C=ai(p)))),C===0?0:l!==0&&l!==C&&(l&O)===0&&(O=C&-C,p=l&-l,O>=p||O===32&&(p&4194048)!==0)?l:C}function wr(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Yi(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _n(){var s=cr;return cr<<=1,(cr&62914560)===0&&(cr=4194304),s}function Kn(s){for(var l=[],p=0;31>p;p++)l.push(s);return l}function Wr(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Qn(s,l,p,w,C,O){var P=s.pendingLanes;s.pendingLanes=p,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=p,s.entangledLanes&=p,s.errorRecoveryDisabledLanes&=p,s.shellSuspendCounter=0;var $=s.entanglements,me=s.expirationTimes,Re=s.hiddenUpdates;for(p=P&~p;0<p;){var Ve=31-jt(p),Qe=1<<Ve;$[Ve]=0,me[Ve]=-1;var Le=Re[Ve];if(Le!==null)for(Re[Ve]=null,Ve=0;Ve<Le.length;Ve++){var Be=Le[Ve];Be!==null&&(Be.lane&=-536870913)}p&=~Qe}w!==0&&kn(s,w,0),O!==0&&C===0&&s.tag!==0&&(s.suspendedLanes|=O&~(P&~l))}function kn(s,l,p){s.pendingLanes|=l,s.suspendedLanes&=~l;var w=31-jt(l);s.entangledLanes|=l,s.entanglements[w]=s.entanglements[w]|1073741824|p&261930}function ue(s,l){var p=s.entangledLanes|=l;for(s=s.entanglements;p;){var w=31-jt(p),C=1<<w;C&l|s[w]&l&&(s[w]|=l),p&=~C}}function Se(s,l){var p=l&-l;return p=(p&42)!==0?1:Te(p),(p&(s.suspendedLanes|l))!==0?0:p}function Te(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xe(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ke(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:tS(s.type))}function Ue(s,l){var p=oe.p;try{return oe.p=s,l()}finally{oe.p=p}}var at=Math.random().toString(36).slice(2),ot="__reactFiber$"+at,nt="__reactProps$"+at,gt="__reactContainer$"+at,yt="__reactEvents$"+at,vt="__reactListeners$"+at,Ht="__reactHandles$"+at,$t="__reactResources$"+at,zn="__reactMarker$"+at;function gn(s){delete s[ot],delete s[nt],delete s[yt],delete s[vt],delete s[Ht]}function bt(s){var l=s[ot];if(l)return l;for(var p=s.parentNode;p;){if(l=p[gt]||p[ot]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(s=UE(s);s!==null;){if(p=s[ot])return p;s=UE(s)}return l}s=p,p=s.parentNode}return null}function Et(s){if(s=s[ot]||s[gt]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function jn(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function Xn(s){var l=s[$t];return l||(l=s[$t]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function En(s){s[zn]=!0}var qe=new Set,Ar={};function hn(s,l){Un(s,l),Un(s+"Capture",l)}function Un(s,l){for(Ar[s]=l,s=0;s<l.length;s++)qe.add(l[s])}var Or=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yt={},nn={};function Je(s){return tn.call(nn,s)?!0:tn.call(Yt,s)?!1:Or.test(s)?nn[s]=!0:(Yt[s]=!0,!1)}function Hn(s,l,p){if(Je(l))if(p===null)s.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var w=l.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+p)}}function Qr(s,l,p){if(p===null)s.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+p)}}function ur(s,l,p,w){if(w===null)s.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(p);return}s.setAttributeNS(l,p,""+w)}}function lt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function hr(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function pi(s,l,p){var w=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var C=w.get,O=w.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return C.call(this)},set:function(P){p=""+P,O.call(this,P)}}),Object.defineProperty(s,l,{enumerable:w.enumerable}),{getValue:function(){return p},setValue:function(P){p=""+P},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Sn(s){if(!s._valueTracker){var l=hr(s)?"checked":"value";s._valueTracker=pi(s,l,""+s[l])}}function mi(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var p=l.getValue(),w="";return s&&(w=hr(s)?s.checked?"true":"false":s.value),s=w,s!==p?(l.setValue(s),!0):!1}function ps(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ji=/[\n"\\]/g;function rn(s){return s.replace(ji,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Zn(s,l,p,w,C,O,P,$){s.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.type=P:s.removeAttribute("type"),l!=null?P==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+lt(l)):s.value!==""+lt(l)&&(s.value=""+lt(l)):P!=="submit"&&P!=="reset"||s.removeAttribute("value"),l!=null?te(s,P,lt(l)):p!=null?te(s,P,lt(p)):w!=null&&s.removeAttribute("value"),C==null&&O!=null&&(s.defaultChecked=!!O),C!=null&&(s.checked=C&&typeof C!="function"&&typeof C!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.name=""+lt($):s.removeAttribute("name")}function _e(s,l,p,w,C,O,P,$){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(s.type=O),l!=null||p!=null){if(!(O!=="submit"&&O!=="reset"||l!=null)){Sn(s);return}p=p!=null?""+lt(p):"",l=l!=null?""+lt(l):p,$||l===s.value||(s.value=l),s.defaultValue=l}w=w??C,w=typeof w!="function"&&typeof w!="symbol"&&!!w,s.checked=$?s.checked:!!w,s.defaultChecked=!!w,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(s.name=P),Sn(s)}function te(s,l,p){l==="number"&&ps(s.ownerDocument)===s||s.defaultValue===""+p||(s.defaultValue=""+p)}function wt(s,l,p,w){if(s=s.options,l){l={};for(var C=0;C<p.length;C++)l["$"+p[C]]=!0;for(p=0;p<s.length;p++)C=l.hasOwnProperty("$"+s[p].value),s[p].selected!==C&&(s[p].selected=C),C&&w&&(s[p].defaultSelected=!0)}else{for(p=""+lt(p),l=null,C=0;C<s.length;C++){if(s[C].value===p){s[C].selected=!0,w&&(s[C].defaultSelected=!0);return}l!==null||s[C].disabled||(l=s[C])}l!==null&&(l.selected=!0)}}function qn(s,l,p){if(l!=null&&(l=""+lt(l),l!==s.value&&(s.value=l),p==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=p!=null?""+lt(p):""}function Jn(s,l,p,w){if(l==null){if(w!=null){if(p!=null)throw Error(r(92));if(ie(w)){if(1<w.length)throw Error(r(93));w=w[0]}p=w}p==null&&(p=""),l=p}p=lt(l),s.defaultValue=p,w=s.textContent,w===p&&w!==""&&w!==null&&(s.value=w),Sn(s)}function qt(s,l){if(l){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=l;return}}s.textContent=l}var Ni=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oi(s,l,p){var w=l.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":w?s.setProperty(l,p):typeof p!="number"||p===0||Ni.has(l)?l==="float"?s.cssFloat=p:s[l]=(""+p).trim():s[l]=p+"px"}function At(s,l,p){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||l!=null&&l.hasOwnProperty(w)||(w.indexOf("--")===0?s.setProperty(w,""):w==="float"?s.cssFloat="":s[w]="");for(var C in l)w=l[C],l.hasOwnProperty(C)&&p[C]!==w&&oi(s,C,w)}else for(var O in l)l.hasOwnProperty(O)&&oi(s,O,l[O])}function on(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ts=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ws=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function li(s){return Ws.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Zr(){}var Cr=null;function er(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yn=null,Ir=null;function qr(s){var l=Et(s);if(l&&(s=l.stateNode)){var p=s[nt]||null;e:switch(s=l.stateNode,l.type){case"input":if(Zn(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),l=p.name,p.type==="radio"&&l!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+rn(""+l)+'"][type="radio"]'),l=0;l<p.length;l++){var w=p[l];if(w!==s&&w.form===s.form){var C=w[nt]||null;if(!C)throw Error(r(90));Zn(w,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(l=0;l<p.length;l++)w=p[l],w.form===s.form&&mi(w)}break e;case"textarea":qn(s,p.value,p.defaultValue);break e;case"select":l=p.value,l!=null&&wt(s,!!p.multiple,l,!1)}}}var _t=!1;function Bi(s,l,p){if(_t)return s(l,p);_t=!0;try{var w=s(l);return w}finally{if(_t=!1,(yn!==null||Ir!==null)&&(bp(),yn&&(l=yn,s=Ir,Ir=yn=null,qr(l),s)))for(l=0;l<s.length;l++)qr(s[l])}}function zt(s,l){var p=s.stateNode;if(p===null)return null;var w=p[nt]||null;if(w===null)return null;p=w[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(r(231,l,typeof p));return p}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ms=!1;if(cn)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){ms=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{ms=!1}var gi=null,Gr=null,gs=null;function ns(){if(gs)return gs;var s,l=Gr,p=l.length,w,C="value"in gi?gi.value:gi.textContent,O=C.length;for(s=0;s<p&&l[s]===C[s];s++);var P=p-s;for(w=1;w<=P&&l[p-w]===C[O-w];w++);return gs=C.slice(s,1<w?1-w:void 0)}function k(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function X(){return!0}function ge(){return!1}function je(s){function l(p,w,C,O,P){this._reactName=p,this._targetInst=C,this.type=w,this.nativeEvent=O,this.target=P,this.currentTarget=null;for(var $ in s)s.hasOwnProperty($)&&(p=s[$],this[$]=p?p(O):O[$]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?X:ge,this.isPropagationStopped=ge,this}return S(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=X)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=X)},persist:function(){},isPersistent:X}),l}var It={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pt=je(It),ln=S({},It,{view:0,detail:0}),wn=je(ln),tr,Cn,fr,Rr=S({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fr&&(fr&&s.type==="mousemove"?(tr=s.screenX-fr.screenX,Cn=s.screenY-fr.screenY):Cn=tr=0,fr=s),tr)},movementY:function(s){return"movementY"in s?s.movementY:Cn}}),Pt=je(Rr),Tr=S({},Rr,{dataTransfer:0}),nr=je(Tr),Br=S({},ln,{relatedTarget:0}),Ii=je(Br),De=S({},It,{animationName:0,elapsedTime:0,pseudoElement:0}),Xt=je(De),dr=S({},It,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),rs=je(dr),el=S({},It,{data:0}),tl=je(el),yi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},go={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pr(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Sa[s])?!!l[s]:!1}function Qs(){return Pr}var xr=S({},ln,{key:function(s){if(s.key){var l=yi[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=k(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?go[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(s){return s.type==="keypress"?k(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?k(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),yo=je(xr),ys=S({},Rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fn=je(ys),Rt=S({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),ic=je(Rt),$n=S({},It,{propertyName:0,elapsedTime:0,pseudoElement:0}),vs=je($n),Zs=S({},Rr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),eu=je(Zs),bs=S({},It,{newState:0,oldState:0}),vo=je(bs),bo=[9,13,27,32],wo=cn&&"CompositionEvent"in window,Js=null;cn&&"documentMode"in document&&(Js=document.documentMode);var nl=cn&&"TextEvent"in window&&!Js,tu=cn&&(!wo||Js&&8<Js&&11>=Js),ea=" ",rl=!1;function sc(s,l){switch(s){case"keyup":return bo.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aa(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qa=!1;function Ns(s,l){switch(s){case"compositionend":return Aa(l);case"keypress":return l.which!==32?null:(rl=!0,ea);case"textInput":return s=l.data,s===ea&&rl?null:s;default:return null}}function Va(s,l){if(qa)return s==="compositionend"||!wo&&sc(s,l)?(s=ns(),gs=Gr=gi=null,qa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tu&&l.locale!=="ko"?null:l.data;default:return null}}var Pi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function il(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Pi[s.type]:l==="textarea"}function is(s,l,p,w){yn?Ir?Ir.push(w):Ir=[w]:yn=w,l=Tp(l,"onChange"),0<l.length&&(p=new pt("onChange","change",null,p,w),s.push({event:p,listeners:l}))}var xo=null,Ca=null;function sl(s){CE(s,0)}function Ui(s){var l=jn(s);if(mi(l))return s}function Bn(s,l){if(s==="change")return l}var Eo=!1;if(cn){var vi;if(cn){var Ta="oninput"in document;if(!Ta){var xn=document.createElement("div");xn.setAttribute("oninput","return;"),Ta=typeof xn.oninput=="function"}vi=Ta}else vi=!1;Eo=vi&&(!document.documentMode||9<document.documentMode)}function Ga(){xo&&(xo.detachEvent("onpropertychange",z),Ca=xo=null)}function z(s){if(s.propertyName==="value"&&Ui(Ca)){var l=[];is(l,Ca,s,er(s)),Bi(sl,l)}}function a(s,l,p){s==="focusin"?(Ga(),xo=l,Ca=p,xo.attachEvent("onpropertychange",z)):s==="focusout"&&Ga()}function u(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ui(Ca)}function d(s,l){if(s==="click")return Ui(l)}function v(s,l){if(s==="input"||s==="change")return Ui(l)}function c(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var f=typeof Object.is=="function"?Object.is:c;function b(s,l){if(f(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var p=Object.keys(s),w=Object.keys(l);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var C=p[w];if(!tn.call(l,C)||!f(s[C],l[C]))return!1}return!0}function x(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function A(s,l){var p=x(s);s=0;for(var w;p;){if(p.nodeType===3){if(w=s+p.textContent.length,s<=l&&w>=l)return{node:p,offset:l-s};s=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=x(p)}}function _(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?_(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function M(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ps(s.document);l instanceof s.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)s=l.contentWindow;else break;l=ps(s.document)}return l}function L(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var U=cn&&"documentMode"in document&&11>=document.documentMode,q=null,K=null,G=null,Z=!1;function re(s,l,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Z||q==null||q!==ps(w)||(w=q,"selectionStart"in w&&L(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),G&&b(G,w)||(G=w,w=Tp(K,"onSelect"),0<w.length&&(l=new pt("onSelect","select",null,l,p),s.push({event:l,listeners:w}),l.target=q)))}function ae(s,l){var p={};return p[s.toLowerCase()]=l.toLowerCase(),p["Webkit"+s]="webkit"+l,p["Moz"+s]="moz"+l,p}var le={animationend:ae("Animation","AnimationEnd"),animationiteration:ae("Animation","AnimationIteration"),animationstart:ae("Animation","AnimationStart"),transitionrun:ae("Transition","TransitionRun"),transitionstart:ae("Transition","TransitionStart"),transitioncancel:ae("Transition","TransitionCancel"),transitionend:ae("Transition","TransitionEnd")},pe={},xe={};cn&&(xe=document.createElement("div").style,"AnimationEvent"in window||(delete le.animationend.animation,delete le.animationiteration.animation,delete le.animationstart.animation),"TransitionEvent"in window||delete le.transitionend.transition);function Oe(s){if(pe[s])return pe[s];if(!le[s])return s;var l=le[s],p;for(p in l)if(l.hasOwnProperty(p)&&p in xe)return pe[s]=l[p];return s}var Me=Oe("animationend"),Pe=Oe("animationiteration"),Ge=Oe("animationstart"),tt=Oe("transitionrun"),et=Oe("transitionstart"),it=Oe("transitioncancel"),ct=Oe("transitionend"),ut=new Map,xt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xt.push("scrollEnd");function Ut(s,l){ut.set(s,l),hn(l,[s])}var fn=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Vt=[],bi=0,Jt=0;function ci(){for(var s=bi,l=Jt=bi=0;l<s;){var p=Vt[l];Vt[l++]=null;var w=Vt[l];Vt[l++]=null;var C=Vt[l];Vt[l++]=null;var O=Vt[l];if(Vt[l++]=null,w!==null&&C!==null){var P=w.pending;P===null?C.next=C:(C.next=P.next,P.next=C),w.pending=C}O!==0&&Ka(p,C,O)}}function ui(s,l,p,w){Vt[bi++]=s,Vt[bi++]=l,Vt[bi++]=p,Vt[bi++]=w,Jt|=w,s.lanes|=w,s=s.alternate,s!==null&&(s.lanes|=w)}function al(s,l,p,w){return ui(s,l,p,w),ol(s)}function Kr(s,l){return ui(s,null,null,l),ol(s)}function Ka(s,l,p){s.lanes|=p;var w=s.alternate;w!==null&&(w.lanes|=p);for(var C=!1,O=s.return;O!==null;)O.childLanes|=p,w=O.alternate,w!==null&&(w.childLanes|=p),O.tag===22&&(s=O.stateNode,s===null||s._visibility&1||(C=!0)),s=O,O=O.return;return s.tag===3?(O=s.stateNode,C&&l!==null&&(C=31-jt(p),s=O.hiddenUpdates,w=s[C],w===null?s[C]=[l]:w.push(l),l.lane=p|536870912),O):null}function ol(s){if(50<Yh)throw Yh=0,W0=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var nu={};function wO(s,l,p,w){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(s,l,p,w){return new wO(s,l,p,w)}function H1(s){return s=s.prototype,!(!s||!s.isReactComponent)}function So(s,l){var p=s.alternate;return p===null?(p=_s(s.tag,l,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=l,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&65011712,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,l=s.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p.refCleanup=s.refCleanup,p}function o2(s,l){s.flags&=65011714;var p=s.alternate;return p===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=p.childLanes,s.lanes=p.lanes,s.child=p.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=p.memoizedProps,s.memoizedState=p.memoizedState,s.updateQueue=p.updateQueue,s.type=p.type,l=p.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function qd(s,l,p,w,C,O){var P=0;if(w=s,typeof s=="function")H1(s)&&(P=1);else if(typeof s=="string")P=CI(s,p,ke.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case de:return s=_s(31,p,l,C),s.elementType=de,s.lanes=O,s;case D:return ac(p.children,C,O,l);case j:P=8,C|=24;break;case B:return s=_s(12,p,l,C|2),s.elementType=B,s.lanes=O,s;case ee:return s=_s(13,p,l,C),s.elementType=ee,s.lanes=O,s;case J:return s=_s(19,p,l,C),s.elementType=J,s.lanes=O,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:P=10;break e;case H:P=9;break e;case se:P=11;break e;case F:P=14;break e;case ce:P=16,w=null;break e}P=29,p=Error(r(130,s===null?"null":typeof s,"")),w=null}return l=_s(P,p,l,C),l.elementType=s,l.type=w,l.lanes=O,l}function ac(s,l,p,w){return s=_s(7,s,w,l),s.lanes=p,s}function q1(s,l,p){return s=_s(6,s,null,l),s.lanes=p,s}function l2(s){var l=_s(18,null,null,0);return l.stateNode=s,l}function V1(s,l,p){return l=_s(4,s.children!==null?s.children:[],s.key,l),l.lanes=p,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var c2=new WeakMap;function ta(s,l){if(typeof s=="object"&&s!==null){var p=c2.get(s);return p!==void 0?p:(l={value:s,source:l,stack:Tn(l)},c2.set(s,l),l)}return{value:s,source:l,stack:Tn(l)}}var ru=[],iu=0,Vd=null,Nh=0,na=[],ra=0,ll=null,$a=1,Ya="";function Ao(s,l){ru[iu++]=Nh,ru[iu++]=Vd,Vd=s,Nh=l}function u2(s,l,p){na[ra++]=$a,na[ra++]=Ya,na[ra++]=ll,ll=s;var w=$a;s=Ya;var C=32-jt(w)-1;w&=~(1<<C),p+=1;var O=32-jt(l)+C;if(30<O){var P=C-C%5;O=(w&(1<<P)-1).toString(32),w>>=P,C-=P,$a=1<<32-jt(l)+C|p<<C|w,Ya=O+s}else $a=1<<O|p<<C|w,Ya=s}function G1(s){s.return!==null&&(Ao(s,1),u2(s,1,0))}function K1(s){for(;s===Vd;)Vd=ru[--iu],ru[iu]=null,Nh=ru[--iu],ru[iu]=null;for(;s===ll;)ll=na[--ra],na[ra]=null,Ya=na[--ra],na[ra]=null,$a=na[--ra],na[ra]=null}function h2(s,l){na[ra++]=$a,na[ra++]=Ya,na[ra++]=ll,$a=l.id,Ya=l.overflow,ll=s}var Fi=null,Mr=null,Pn=!1,cl=null,ia=!1,$1=Error(r(519));function ul(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _h(ta(l,s)),$1}function f2(s){var l=s.stateNode,p=s.type,w=s.memoizedProps;switch(l[ot]=s,l[nt]=w,p){case"dialog":In("cancel",l),In("close",l);break;case"iframe":case"object":case"embed":In("load",l);break;case"video":case"audio":for(p=0;p<Wh.length;p++)In(Wh[p],l);break;case"source":In("error",l);break;case"img":case"image":case"link":In("error",l),In("load",l);break;case"details":In("toggle",l);break;case"input":In("invalid",l),_e(l,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":In("invalid",l);break;case"textarea":In("invalid",l),Jn(l,w.value,w.defaultValue,w.children)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||l.textContent===""+p||w.suppressHydrationWarning===!0||OE(l.textContent,p)?(w.popover!=null&&(In("beforetoggle",l),In("toggle",l)),w.onScroll!=null&&In("scroll",l),w.onScrollEnd!=null&&In("scrollend",l),w.onClick!=null&&(l.onclick=Zr),l=!0):l=!1,l||ul(s,!0)}function d2(s){for(Fi=s.return;Fi;)switch(Fi.tag){case 5:case 31:case 13:ia=!1;return;case 27:case 3:ia=!0;return;default:Fi=Fi.return}}function su(s){if(s!==Fi)return!1;if(!Pn)return d2(s),Pn=!0,!1;var l=s.tag,p;if((p=l!==3&&l!==27)&&((p=l===5)&&(p=s.type,p=!(p!=="form"&&p!=="button")||hg(s.type,s.memoizedProps)),p=!p),p&&Mr&&ul(s),d2(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mr=PE(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mr=PE(s)}else l===27?(l=Mr,Al(s.type)?(s=gg,gg=null,Mr=s):Mr=l):Mr=Fi?aa(s.stateNode.nextSibling):null;return!0}function oc(){Mr=Fi=null,Pn=!1}function Y1(){var s=cl;return s!==null&&(Ss===null?Ss=s:Ss.push.apply(Ss,s),cl=null),s}function _h(s){cl===null?cl=[s]:cl.push(s)}var X1=ne(null),lc=null,Co=null;function hl(s,l,p){Ce(X1,l._currentValue),l._currentValue=p}function To(s){s._currentValue=X1.current,ye(X1)}function W1(s,l,p){for(;s!==null;){var w=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,w!==null&&(w.childLanes|=l)):w!==null&&(w.childLanes&l)!==l&&(w.childLanes|=l),s===p)break;s=s.return}}function Q1(s,l,p,w){var C=s.child;for(C!==null&&(C.return=s);C!==null;){var O=C.dependencies;if(O!==null){var P=C.child;O=O.firstContext;e:for(;O!==null;){var $=O;O=C;for(var me=0;me<l.length;me++)if($.context===l[me]){O.lanes|=p,$=O.alternate,$!==null&&($.lanes|=p),W1(O.return,p,s),w||(P=null);break e}O=$.next}}else if(C.tag===18){if(P=C.return,P===null)throw Error(r(341));P.lanes|=p,O=P.alternate,O!==null&&(O.lanes|=p),W1(P,p,s),P=null}else P=C.child;if(P!==null)P.return=C;else for(P=C;P!==null;){if(P===s){P=null;break}if(C=P.sibling,C!==null){C.return=P.return,P=C;break}P=P.return}C=P}}function au(s,l,p,w){s=null;for(var C=l,O=!1;C!==null;){if(!O){if((C.flags&524288)!==0)O=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var P=C.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var $=C.type;f(C.pendingProps.value,P.value)||(s!==null?s.push($):s=[$])}}else if(C===Ct.current){if(P=C.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(s!==null?s.push(tf):s=[tf])}C=C.return}s!==null&&Q1(l,s,p,w),l.flags|=262144}function Gd(s){for(s=s.firstContext;s!==null;){if(!f(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function cc(s){lc=s,Co=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function zi(s){return p2(lc,s)}function Kd(s,l){return lc===null&&cc(s),p2(s,l)}function p2(s,l){var p=l._currentValue;if(l={context:l,memoizedValue:p,next:null},Co===null){if(s===null)throw Error(r(308));Co=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Co=Co.next=l;return p}var xO=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(p,w){s.push(w)}};this.abort=function(){l.aborted=!0,s.forEach(function(p){return p()})}},EO=t.unstable_scheduleCallback,SO=t.unstable_NormalPriority,wi={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z1(){return{controller:new xO,data:new Map,refCount:0}}function Oh(s){s.refCount--,s.refCount===0&&EO(SO,function(){s.controller.abort()})}var Ih=null,J1=0,ou=0,lu=null;function AO(s,l){if(Ih===null){var p=Ih=[];J1=0,ou=ng(),lu={status:"pending",value:void 0,then:function(w){p.push(w)}}}return J1++,l.then(m2,m2),l}function m2(){if(--J1===0&&Ih!==null){lu!==null&&(lu.status="fulfilled");var s=Ih;Ih=null,ou=0,lu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function CO(s,l){var p=[],w={status:"pending",value:null,reason:null,then:function(C){p.push(C)}};return s.then(function(){w.status="fulfilled",w.value=l;for(var C=0;C<p.length;C++)(0,p[C])(l)},function(C){for(w.status="rejected",w.reason=C,C=0;C<p.length;C++)(0,p[C])(void 0)}),w}var g2=Y.S;Y.S=function(s,l){Jx=an(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&AO(s,l),g2!==null&&g2(s,l)};var uc=ne(null);function e0(){var s=uc.current;return s!==null?s:Er.pooledCache}function $d(s,l){l===null?Ce(uc,uc.current):Ce(uc,l.pool)}function y2(){var s=e0();return s===null?null:{parent:wi._currentValue,pool:s}}var cu=Error(r(460)),t0=Error(r(474)),Yd=Error(r(542)),Xd={then:function(){}};function v2(s){return s=s.status,s==="fulfilled"||s==="rejected"}function b2(s,l,p){switch(p=s[p],p===void 0?s.push(l):p!==l&&(l.then(Zr,Zr),l=p),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,x2(s),s;default:if(typeof l.status=="string")l.then(Zr,Zr);else{if(s=Er,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(w){if(l.status==="pending"){var C=l;C.status="fulfilled",C.value=w}},function(w){if(l.status==="pending"){var C=l;C.status="rejected",C.reason=w}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,x2(s),s}throw fc=l,cu}}function hc(s){try{var l=s._init;return l(s._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(fc=p,cu):p}}var fc=null;function w2(){if(fc===null)throw Error(r(459));var s=fc;return fc=null,s}function x2(s){if(s===cu||s===Yd)throw Error(r(483))}var uu=null,Rh=0;function Wd(s){var l=Rh;return Rh+=1,uu===null&&(uu=[]),b2(uu,s,l)}function Mh(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Qd(s,l){throw l.$$typeof===N?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function E2(s){function l(Ae,we){if(s){var Ie=Ae.deletions;Ie===null?(Ae.deletions=[we],Ae.flags|=16):Ie.push(we)}}function p(Ae,we){if(!s)return null;for(;we!==null;)l(Ae,we),we=we.sibling;return null}function w(Ae){for(var we=new Map;Ae!==null;)Ae.key!==null?we.set(Ae.key,Ae):we.set(Ae.index,Ae),Ae=Ae.sibling;return we}function C(Ae,we){return Ae=So(Ae,we),Ae.index=0,Ae.sibling=null,Ae}function O(Ae,we,Ie){return Ae.index=Ie,s?(Ie=Ae.alternate,Ie!==null?(Ie=Ie.index,Ie<we?(Ae.flags|=67108866,we):Ie):(Ae.flags|=67108866,we)):(Ae.flags|=1048576,we)}function P(Ae){return s&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function $(Ae,we,Ie,Ye){return we===null||we.tag!==6?(we=q1(Ie,Ae.mode,Ye),we.return=Ae,we):(we=C(we,Ie),we.return=Ae,we)}function me(Ae,we,Ie,Ye){var Bt=Ie.type;return Bt===D?Ve(Ae,we,Ie.props.children,Ye,Ie.key):we!==null&&(we.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===ce&&hc(Bt)===we.type)?(we=C(we,Ie.props),Mh(we,Ie),we.return=Ae,we):(we=qd(Ie.type,Ie.key,Ie.props,null,Ae.mode,Ye),Mh(we,Ie),we.return=Ae,we)}function Re(Ae,we,Ie,Ye){return we===null||we.tag!==4||we.stateNode.containerInfo!==Ie.containerInfo||we.stateNode.implementation!==Ie.implementation?(we=V1(Ie,Ae.mode,Ye),we.return=Ae,we):(we=C(we,Ie.children||[]),we.return=Ae,we)}function Ve(Ae,we,Ie,Ye,Bt){return we===null||we.tag!==7?(we=ac(Ie,Ae.mode,Ye,Bt),we.return=Ae,we):(we=C(we,Ie),we.return=Ae,we)}function Qe(Ae,we,Ie){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=q1(""+we,Ae.mode,Ie),we.return=Ae,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case I:return Ie=qd(we.type,we.key,we.props,null,Ae.mode,Ie),Mh(Ie,we),Ie.return=Ae,Ie;case R:return we=V1(we,Ae.mode,Ie),we.return=Ae,we;case ce:return we=hc(we),Qe(Ae,we,Ie)}if(ie(we)||fe(we))return we=ac(we,Ae.mode,Ie,null),we.return=Ae,we;if(typeof we.then=="function")return Qe(Ae,Wd(we),Ie);if(we.$$typeof===V)return Qe(Ae,Kd(Ae,we),Ie);Qd(Ae,we)}return null}function Le(Ae,we,Ie,Ye){var Bt=we!==null?we.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Bt!==null?null:$(Ae,we,""+Ie,Ye);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case I:return Ie.key===Bt?me(Ae,we,Ie,Ye):null;case R:return Ie.key===Bt?Re(Ae,we,Ie,Ye):null;case ce:return Ie=hc(Ie),Le(Ae,we,Ie,Ye)}if(ie(Ie)||fe(Ie))return Bt!==null?null:Ve(Ae,we,Ie,Ye,null);if(typeof Ie.then=="function")return Le(Ae,we,Wd(Ie),Ye);if(Ie.$$typeof===V)return Le(Ae,we,Kd(Ae,Ie),Ye);Qd(Ae,Ie)}return null}function Be(Ae,we,Ie,Ye,Bt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ae=Ae.get(Ie)||null,$(we,Ae,""+Ye,Bt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case I:return Ae=Ae.get(Ye.key===null?Ie:Ye.key)||null,me(we,Ae,Ye,Bt);case R:return Ae=Ae.get(Ye.key===null?Ie:Ye.key)||null,Re(we,Ae,Ye,Bt);case ce:return Ye=hc(Ye),Be(Ae,we,Ie,Ye,Bt)}if(ie(Ye)||fe(Ye))return Ae=Ae.get(Ie)||null,Ve(we,Ae,Ye,Bt,null);if(typeof Ye.then=="function")return Be(Ae,we,Ie,Wd(Ye),Bt);if(Ye.$$typeof===V)return Be(Ae,we,Ie,Kd(we,Ye),Bt);Qd(we,Ye)}return null}function Nt(Ae,we,Ie,Ye){for(var Bt=null,Vn=null,Mt=we,vn=we=0,Ln=null;Mt!==null&&vn<Ie.length;vn++){Mt.index>vn?(Ln=Mt,Mt=null):Ln=Mt.sibling;var Gn=Le(Ae,Mt,Ie[vn],Ye);if(Gn===null){Mt===null&&(Mt=Ln);break}s&&Mt&&Gn.alternate===null&&l(Ae,Mt),we=O(Gn,we,vn),Vn===null?Bt=Gn:Vn.sibling=Gn,Vn=Gn,Mt=Ln}if(vn===Ie.length)return p(Ae,Mt),Pn&&Ao(Ae,vn),Bt;if(Mt===null){for(;vn<Ie.length;vn++)Mt=Qe(Ae,Ie[vn],Ye),Mt!==null&&(we=O(Mt,we,vn),Vn===null?Bt=Mt:Vn.sibling=Mt,Vn=Mt);return Pn&&Ao(Ae,vn),Bt}for(Mt=w(Mt);vn<Ie.length;vn++)Ln=Be(Mt,Ae,vn,Ie[vn],Ye),Ln!==null&&(s&&Ln.alternate!==null&&Mt.delete(Ln.key===null?vn:Ln.key),we=O(Ln,we,vn),Vn===null?Bt=Ln:Vn.sibling=Ln,Vn=Ln);return s&&Mt.forEach(function(Ol){return l(Ae,Ol)}),Pn&&Ao(Ae,vn),Bt}function Gt(Ae,we,Ie,Ye){if(Ie==null)throw Error(r(151));for(var Bt=null,Vn=null,Mt=we,vn=we=0,Ln=null,Gn=Ie.next();Mt!==null&&!Gn.done;vn++,Gn=Ie.next()){Mt.index>vn?(Ln=Mt,Mt=null):Ln=Mt.sibling;var Ol=Le(Ae,Mt,Gn.value,Ye);if(Ol===null){Mt===null&&(Mt=Ln);break}s&&Mt&&Ol.alternate===null&&l(Ae,Mt),we=O(Ol,we,vn),Vn===null?Bt=Ol:Vn.sibling=Ol,Vn=Ol,Mt=Ln}if(Gn.done)return p(Ae,Mt),Pn&&Ao(Ae,vn),Bt;if(Mt===null){for(;!Gn.done;vn++,Gn=Ie.next())Gn=Qe(Ae,Gn.value,Ye),Gn!==null&&(we=O(Gn,we,vn),Vn===null?Bt=Gn:Vn.sibling=Gn,Vn=Gn);return Pn&&Ao(Ae,vn),Bt}for(Mt=w(Mt);!Gn.done;vn++,Gn=Ie.next())Gn=Be(Mt,Ae,vn,Gn.value,Ye),Gn!==null&&(s&&Gn.alternate!==null&&Mt.delete(Gn.key===null?vn:Gn.key),we=O(Gn,we,vn),Vn===null?Bt=Gn:Vn.sibling=Gn,Vn=Gn);return s&&Mt.forEach(function(jI){return l(Ae,jI)}),Pn&&Ao(Ae,vn),Bt}function gr(Ae,we,Ie,Ye){if(typeof Ie=="object"&&Ie!==null&&Ie.type===D&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case I:e:{for(var Bt=Ie.key;we!==null;){if(we.key===Bt){if(Bt=Ie.type,Bt===D){if(we.tag===7){p(Ae,we.sibling),Ye=C(we,Ie.props.children),Ye.return=Ae,Ae=Ye;break e}}else if(we.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===ce&&hc(Bt)===we.type){p(Ae,we.sibling),Ye=C(we,Ie.props),Mh(Ye,Ie),Ye.return=Ae,Ae=Ye;break e}p(Ae,we);break}else l(Ae,we);we=we.sibling}Ie.type===D?(Ye=ac(Ie.props.children,Ae.mode,Ye,Ie.key),Ye.return=Ae,Ae=Ye):(Ye=qd(Ie.type,Ie.key,Ie.props,null,Ae.mode,Ye),Mh(Ye,Ie),Ye.return=Ae,Ae=Ye)}return P(Ae);case R:e:{for(Bt=Ie.key;we!==null;){if(we.key===Bt)if(we.tag===4&&we.stateNode.containerInfo===Ie.containerInfo&&we.stateNode.implementation===Ie.implementation){p(Ae,we.sibling),Ye=C(we,Ie.children||[]),Ye.return=Ae,Ae=Ye;break e}else{p(Ae,we);break}else l(Ae,we);we=we.sibling}Ye=V1(Ie,Ae.mode,Ye),Ye.return=Ae,Ae=Ye}return P(Ae);case ce:return Ie=hc(Ie),gr(Ae,we,Ie,Ye)}if(ie(Ie))return Nt(Ae,we,Ie,Ye);if(fe(Ie)){if(Bt=fe(Ie),typeof Bt!="function")throw Error(r(150));return Ie=Bt.call(Ie),Gt(Ae,we,Ie,Ye)}if(typeof Ie.then=="function")return gr(Ae,we,Wd(Ie),Ye);if(Ie.$$typeof===V)return gr(Ae,we,Kd(Ae,Ie),Ye);Qd(Ae,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,we!==null&&we.tag===6?(p(Ae,we.sibling),Ye=C(we,Ie),Ye.return=Ae,Ae=Ye):(p(Ae,we),Ye=q1(Ie,Ae.mode,Ye),Ye.return=Ae,Ae=Ye),P(Ae)):p(Ae,we)}return function(Ae,we,Ie,Ye){try{Rh=0;var Bt=gr(Ae,we,Ie,Ye);return uu=null,Bt}catch(Mt){if(Mt===cu||Mt===Yd)throw Mt;var Vn=_s(29,Mt,null,Ae.mode);return Vn.lanes=Ye,Vn.return=Ae,Vn}}}var dc=E2(!0),S2=E2(!1),fl=!1;function n0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function r0(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function dl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function pl(s,l,p){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(Yn&2)!==0){var C=w.pending;return C===null?l.next=l:(l.next=C.next,C.next=l),w.pending=l,l=ol(s),Ka(s,null,p),l}return ui(s,w,l,p),ol(s)}function Dh(s,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194048)!==0)){var w=l.lanes;w&=s.pendingLanes,p|=w,l.lanes=p,ue(s,p)}}function i0(s,l){var p=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var C=null,O=null;if(p=p.firstBaseUpdate,p!==null){do{var P={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};O===null?C=O=P:O=O.next=P,p=p.next}while(p!==null);O===null?C=O=l:O=O.next=l}else C=O=l;p={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:O,shared:w.shared,callbacks:w.callbacks},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=l:s.next=l,p.lastBaseUpdate=l}var s0=!1;function Lh(){if(s0){var s=lu;if(s!==null)throw s}}function kh(s,l,p,w){s0=!1;var C=s.updateQueue;fl=!1;var O=C.firstBaseUpdate,P=C.lastBaseUpdate,$=C.shared.pending;if($!==null){C.shared.pending=null;var me=$,Re=me.next;me.next=null,P===null?O=Re:P.next=Re,P=me;var Ve=s.alternate;Ve!==null&&(Ve=Ve.updateQueue,$=Ve.lastBaseUpdate,$!==P&&($===null?Ve.firstBaseUpdate=Re:$.next=Re,Ve.lastBaseUpdate=me))}if(O!==null){var Qe=C.baseState;P=0,Ve=Re=me=null,$=O;do{var Le=$.lane&-536870913,Be=Le!==$.lane;if(Be?(Dn&Le)===Le:(w&Le)===Le){Le!==0&&Le===ou&&(s0=!0),Ve!==null&&(Ve=Ve.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Nt=s,Gt=$;Le=l;var gr=p;switch(Gt.tag){case 1:if(Nt=Gt.payload,typeof Nt=="function"){Qe=Nt.call(gr,Qe,Le);break e}Qe=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=Gt.payload,Le=typeof Nt=="function"?Nt.call(gr,Qe,Le):Nt,Le==null)break e;Qe=S({},Qe,Le);break e;case 2:fl=!0}}Le=$.callback,Le!==null&&(s.flags|=64,Be&&(s.flags|=8192),Be=C.callbacks,Be===null?C.callbacks=[Le]:Be.push(Le))}else Be={lane:Le,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ve===null?(Re=Ve=Be,me=Qe):Ve=Ve.next=Be,P|=Le;if($=$.next,$===null){if($=C.shared.pending,$===null)break;Be=$,$=Be.next,Be.next=null,C.lastBaseUpdate=Be,C.shared.pending=null}}while(!0);Ve===null&&(me=Qe),C.baseState=me,C.firstBaseUpdate=Re,C.lastBaseUpdate=Ve,O===null&&(C.shared.lanes=0),bl|=P,s.lanes=P,s.memoizedState=Qe}}function A2(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function C2(s,l){var p=s.callbacks;if(p!==null)for(s.callbacks=null,s=0;s<p.length;s++)A2(p[s],l)}var hu=ne(null),Zd=ne(0);function T2(s,l){s=ko,Ce(Zd,s),Ce(hu,l),ko=s|l.baseLanes}function a0(){Ce(Zd,ko),Ce(hu,hu.current)}function o0(){ko=Zd.current,ye(hu),ye(Zd)}var Os=ne(null),sa=null;function ml(s){var l=s.alternate;Ce(hi,hi.current&1),Ce(Os,s),sa===null&&(l===null||hu.current!==null||l.memoizedState!==null)&&(sa=s)}function l0(s){Ce(hi,hi.current),Ce(Os,s),sa===null&&(sa=s)}function N2(s){s.tag===22?(Ce(hi,hi.current),Ce(Os,s),sa===null&&(sa=s)):gl()}function gl(){Ce(hi,hi.current),Ce(Os,Os.current)}function Is(s){ye(Os),sa===s&&(sa=null),ye(hi)}var hi=ne(0);function Jd(s){for(var l=s;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||pg(p)||mg(p)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var No=0,pn=null,pr=null,xi=null,ep=!1,fu=!1,pc=!1,tp=0,jh=0,du=null,TO=0;function Jr(){throw Error(r(321))}function c0(s,l){if(l===null)return!1;for(var p=0;p<l.length&&p<s.length;p++)if(!f(s[p],l[p]))return!1;return!0}function u0(s,l,p,w,C,O){return No=O,pn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Y.H=s===null||s.memoizedState===null?ux:C0,pc=!1,O=p(w,C),pc=!1,fu&&(O=O2(l,p,w,C)),_2(s),O}function _2(s){Y.H=Uh;var l=pr!==null&&pr.next!==null;if(No=0,xi=pr=pn=null,ep=!1,jh=0,du=null,l)throw Error(r(300));s===null||Ei||(s=s.dependencies,s!==null&&Gd(s)&&(Ei=!0))}function O2(s,l,p,w){pn=s;var C=0;do{if(fu&&(du=null),jh=0,fu=!1,25<=C)throw Error(r(301));if(C+=1,xi=pr=null,s.updateQueue!=null){var O=s.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Y.H=hx,O=l(p,w)}while(fu);return O}function NO(){var s=Y.H,l=s.useState()[0];return l=typeof l.then=="function"?Bh(l):l,s=s.useState()[0],(pr!==null?pr.memoizedState:null)!==s&&(pn.flags|=1024),l}function h0(){var s=tp!==0;return tp=0,s}function f0(s,l,p){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~p}function d0(s){if(ep){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}ep=!1}No=0,xi=pr=pn=null,fu=!1,jh=tp=0,du=null}function ss(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?pn.memoizedState=xi=s:xi=xi.next=s,xi}function fi(){if(pr===null){var s=pn.alternate;s=s!==null?s.memoizedState:null}else s=pr.next;var l=xi===null?pn.memoizedState:xi.next;if(l!==null)xi=l,pr=s;else{if(s===null)throw pn.alternate===null?Error(r(467)):Error(r(310));pr=s,s={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},xi===null?pn.memoizedState=xi=s:xi=xi.next=s}return xi}function np(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bh(s){var l=jh;return jh+=1,du===null&&(du=[]),s=b2(du,s,l),l=pn,(xi===null?l.memoizedState:xi.next)===null&&(l=l.alternate,Y.H=l===null||l.memoizedState===null?ux:C0),s}function rp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Bh(s);if(s.$$typeof===V)return zi(s)}throw Error(r(438,String(s)))}function p0(s){var l=null,p=pn.updateQueue;if(p!==null&&(l=p.memoCache),l==null){var w=pn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(l={data:w.data.map(function(C){return C.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),p===null&&(p=np(),pn.updateQueue=p),p.memoCache=l,p=l.data[l.index],p===void 0)for(p=l.data[l.index]=Array(s),w=0;w<s;w++)p[w]=ze;return l.index++,p}function _o(s,l){return typeof l=="function"?l(s):l}function ip(s){var l=fi();return m0(l,pr,s)}function m0(s,l,p){var w=s.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=p;var C=s.baseQueue,O=w.pending;if(O!==null){if(C!==null){var P=C.next;C.next=O.next,O.next=P}l.baseQueue=C=O,w.pending=null}if(O=s.baseState,C===null)s.memoizedState=O;else{l=C.next;var $=P=null,me=null,Re=l,Ve=!1;do{var Qe=Re.lane&-536870913;if(Qe!==Re.lane?(Dn&Qe)===Qe:(No&Qe)===Qe){var Le=Re.revertLane;if(Le===0)me!==null&&(me=me.next={lane:0,revertLane:0,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),Qe===ou&&(Ve=!0);else if((No&Le)===Le){Re=Re.next,Le===ou&&(Ve=!0);continue}else Qe={lane:0,revertLane:Re.revertLane,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},me===null?($=me=Qe,P=O):me=me.next=Qe,pn.lanes|=Le,bl|=Le;Qe=Re.action,pc&&p(O,Qe),O=Re.hasEagerState?Re.eagerState:p(O,Qe)}else Le={lane:Qe,revertLane:Re.revertLane,gesture:Re.gesture,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},me===null?($=me=Le,P=O):me=me.next=Le,pn.lanes|=Qe,bl|=Qe;Re=Re.next}while(Re!==null&&Re!==l);if(me===null?P=O:me.next=$,!f(O,s.memoizedState)&&(Ei=!0,Ve&&(p=lu,p!==null)))throw p;s.memoizedState=O,s.baseState=P,s.baseQueue=me,w.lastRenderedState=O}return C===null&&(w.lanes=0),[s.memoizedState,w.dispatch]}function g0(s){var l=fi(),p=l.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=s;var w=p.dispatch,C=p.pending,O=l.memoizedState;if(C!==null){p.pending=null;var P=C=C.next;do O=s(O,P.action),P=P.next;while(P!==C);f(O,l.memoizedState)||(Ei=!0),l.memoizedState=O,l.baseQueue===null&&(l.baseState=O),p.lastRenderedState=O}return[O,w]}function I2(s,l,p){var w=pn,C=fi(),O=Pn;if(O){if(p===void 0)throw Error(r(407));p=p()}else p=l();var P=!f((pr||C).memoizedState,p);if(P&&(C.memoizedState=p,Ei=!0),C=C.queue,b0(D2.bind(null,w,C,s),[s]),C.getSnapshot!==l||P||xi!==null&&xi.memoizedState.tag&1){if(w.flags|=2048,pu(9,{destroy:void 0},M2.bind(null,w,C,p,l),null),Er===null)throw Error(r(349));O||(No&127)!==0||R2(w,l,p)}return p}function R2(s,l,p){s.flags|=16384,s={getSnapshot:l,value:p},l=pn.updateQueue,l===null?(l=np(),pn.updateQueue=l,l.stores=[s]):(p=l.stores,p===null?l.stores=[s]:p.push(s))}function M2(s,l,p,w){l.value=p,l.getSnapshot=w,L2(l)&&k2(s)}function D2(s,l,p){return p(function(){L2(l)&&k2(s)})}function L2(s){var l=s.getSnapshot;s=s.value;try{var p=l();return!f(s,p)}catch{return!0}}function k2(s){var l=Kr(s,2);l!==null&&As(l,s,2)}function y0(s){var l=ss();if(typeof s=="function"){var p=s;if(s=p(),pc){rt(!0);try{p()}finally{rt(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:s},l}function j2(s,l,p,w){return s.baseState=p,m0(s,pr,typeof w=="function"?w:_o)}function _O(s,l,p,w,C){if(op(s))throw Error(r(485));if(s=l.action,s!==null){var O={payload:C,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){O.listeners.push(P)}};Y.T!==null?p(!0):O.isTransition=!1,w(O),p=l.pending,p===null?(O.next=l.pending=O,B2(l,O)):(O.next=p.next,l.pending=p.next=O)}}function B2(s,l){var p=l.action,w=l.payload,C=s.state;if(l.isTransition){var O=Y.T,P={};Y.T=P;try{var $=p(C,w),me=Y.S;me!==null&&me(P,$),P2(s,l,$)}catch(Re){v0(s,l,Re)}finally{O!==null&&P.types!==null&&(O.types=P.types),Y.T=O}}else try{O=p(C,w),P2(s,l,O)}catch(Re){v0(s,l,Re)}}function P2(s,l,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){U2(s,l,w)},function(w){return v0(s,l,w)}):U2(s,l,p)}function U2(s,l,p){l.status="fulfilled",l.value=p,F2(l),s.state=p,l=s.pending,l!==null&&(p=l.next,p===l?s.pending=null:(p=p.next,l.next=p,B2(s,p)))}function v0(s,l,p){var w=s.pending;if(s.pending=null,w!==null){w=w.next;do l.status="rejected",l.reason=p,F2(l),l=l.next;while(l!==w)}s.action=null}function F2(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function z2(s,l){return l}function H2(s,l){if(Pn){var p=Er.formState;if(p!==null){e:{var w=pn;if(Pn){if(Mr){t:{for(var C=Mr,O=ia;C.nodeType!==8;){if(!O){C=null;break t}if(C=aa(C.nextSibling),C===null){C=null;break t}}O=C.data,C=O==="F!"||O==="F"?C:null}if(C){Mr=aa(C.nextSibling),w=C.data==="F!";break e}}ul(w)}w=!1}w&&(l=p[0])}}return p=ss(),p.memoizedState=p.baseState=l,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z2,lastRenderedState:l},p.queue=w,p=ox.bind(null,pn,w),w.dispatch=p,w=y0(!1),O=A0.bind(null,pn,!1,w.queue),w=ss(),C={state:l,dispatch:null,action:s,pending:null},w.queue=C,p=_O.bind(null,pn,C,O,p),C.dispatch=p,w.memoizedState=s,[l,p,!1]}function q2(s){var l=fi();return V2(l,pr,s)}function V2(s,l,p){if(l=m0(s,l,z2)[0],s=ip(_o)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var w=Bh(l)}catch(P){throw P===cu?Yd:P}else w=l;l=fi();var C=l.queue,O=C.dispatch;return p!==l.memoizedState&&(pn.flags|=2048,pu(9,{destroy:void 0},OO.bind(null,C,p),null)),[w,O,s]}function OO(s,l){s.action=l}function G2(s){var l=fi(),p=pr;if(p!==null)return V2(l,p,s);fi(),l=l.memoizedState,p=fi();var w=p.queue.dispatch;return p.memoizedState=s,[l,w,!1]}function pu(s,l,p,w){return s={tag:s,create:p,deps:w,inst:l,next:null},l=pn.updateQueue,l===null&&(l=np(),pn.updateQueue=l),p=l.lastEffect,p===null?l.lastEffect=s.next=s:(w=p.next,p.next=s,s.next=w,l.lastEffect=s),s}function K2(){return fi().memoizedState}function sp(s,l,p,w){var C=ss();pn.flags|=s,C.memoizedState=pu(1|l,{destroy:void 0},p,w===void 0?null:w)}function ap(s,l,p,w){var C=fi();w=w===void 0?null:w;var O=C.memoizedState.inst;pr!==null&&w!==null&&c0(w,pr.memoizedState.deps)?C.memoizedState=pu(l,O,p,w):(pn.flags|=s,C.memoizedState=pu(1|l,O,p,w))}function $2(s,l){sp(8390656,8,s,l)}function b0(s,l){ap(2048,8,s,l)}function IO(s){pn.flags|=4;var l=pn.updateQueue;if(l===null)l=np(),pn.updateQueue=l,l.events=[s];else{var p=l.events;p===null?l.events=[s]:p.push(s)}}function Y2(s){var l=fi().memoizedState;return IO({ref:l,nextImpl:s}),function(){if((Yn&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function X2(s,l){return ap(4,2,s,l)}function W2(s,l){return ap(4,4,s,l)}function Q2(s,l){if(typeof l=="function"){s=s();var p=l(s);return function(){typeof p=="function"?p():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Z2(s,l,p){p=p!=null?p.concat([s]):null,ap(4,4,Q2.bind(null,l,s),p)}function w0(){}function J2(s,l){var p=fi();l=l===void 0?null:l;var w=p.memoizedState;return l!==null&&c0(l,w[1])?w[0]:(p.memoizedState=[s,l],s)}function ex(s,l){var p=fi();l=l===void 0?null:l;var w=p.memoizedState;if(l!==null&&c0(l,w[1]))return w[0];if(w=s(),pc){rt(!0);try{s()}finally{rt(!1)}}return p.memoizedState=[w,l],w}function x0(s,l,p){return p===void 0||(No&1073741824)!==0&&(Dn&261930)===0?s.memoizedState=l:(s.memoizedState=p,s=tE(),pn.lanes|=s,bl|=s,p)}function tx(s,l,p,w){return f(p,l)?p:hu.current!==null?(s=x0(s,p,w),f(s,l)||(Ei=!0),s):(No&42)===0||(No&1073741824)!==0&&(Dn&261930)===0?(Ei=!0,s.memoizedState=p):(s=tE(),pn.lanes|=s,bl|=s,l)}function nx(s,l,p,w,C){var O=oe.p;oe.p=O!==0&&8>O?O:8;var P=Y.T,$={};Y.T=$,A0(s,!1,l,p);try{var me=C(),Re=Y.S;if(Re!==null&&Re($,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var Ve=CO(me,w);Ph(s,l,Ve,Ds(s))}else Ph(s,l,w,Ds(s))}catch(Qe){Ph(s,l,{then:function(){},status:"rejected",reason:Qe},Ds())}finally{oe.p=O,P!==null&&$.types!==null&&(P.types=$.types),Y.T=P}}function RO(){}function E0(s,l,p,w){if(s.tag!==5)throw Error(r(476));var C=rx(s).queue;nx(s,C,l,ve,p===null?RO:function(){return ix(s),p(w)})}function rx(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:ve},next:null};var p={};return l.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:p},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function ix(s){var l=rx(s);l.next===null&&(l=s.alternate.memoizedState),Ph(s,l.next.queue,{},Ds())}function S0(){return zi(tf)}function sx(){return fi().memoizedState}function ax(){return fi().memoizedState}function MO(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var p=Ds();s=dl(p);var w=pl(l,s,p);w!==null&&(As(w,l,p),Dh(w,l,p)),l={cache:Z1()},s.payload=l;return}l=l.return}}function DO(s,l,p){var w=Ds();p={lane:w,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},op(s)?lx(l,p):(p=al(s,l,p,w),p!==null&&(As(p,s,w),cx(p,l,w)))}function ox(s,l,p){var w=Ds();Ph(s,l,p,w)}function Ph(s,l,p,w){var C={lane:w,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(op(s))lx(l,C);else{var O=s.alternate;if(s.lanes===0&&(O===null||O.lanes===0)&&(O=l.lastRenderedReducer,O!==null))try{var P=l.lastRenderedState,$=O(P,p);if(C.hasEagerState=!0,C.eagerState=$,f($,P))return ui(s,l,C,0),Er===null&&ci(),!1}catch{}if(p=al(s,l,C,w),p!==null)return As(p,s,w),cx(p,l,w),!0}return!1}function A0(s,l,p,w){if(w={lane:2,revertLane:ng(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},op(s)){if(l)throw Error(r(479))}else l=al(s,p,w,2),l!==null&&As(l,s,2)}function op(s){var l=s.alternate;return s===pn||l!==null&&l===pn}function lx(s,l){fu=ep=!0;var p=s.pending;p===null?l.next=l:(l.next=p.next,p.next=l),s.pending=l}function cx(s,l,p){if((p&4194048)!==0){var w=l.lanes;w&=s.pendingLanes,p|=w,l.lanes=p,ue(s,p)}}var Uh={readContext:zi,use:rp,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useLayoutEffect:Jr,useInsertionEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useSyncExternalStore:Jr,useId:Jr,useHostTransitionStatus:Jr,useFormState:Jr,useActionState:Jr,useOptimistic:Jr,useMemoCache:Jr,useCacheRefresh:Jr};Uh.useEffectEvent=Jr;var ux={readContext:zi,use:rp,useCallback:function(s,l){return ss().memoizedState=[s,l===void 0?null:l],s},useContext:zi,useEffect:$2,useImperativeHandle:function(s,l,p){p=p!=null?p.concat([s]):null,sp(4194308,4,Q2.bind(null,l,s),p)},useLayoutEffect:function(s,l){return sp(4194308,4,s,l)},useInsertionEffect:function(s,l){sp(4,2,s,l)},useMemo:function(s,l){var p=ss();l=l===void 0?null:l;var w=s();if(pc){rt(!0);try{s()}finally{rt(!1)}}return p.memoizedState=[w,l],w},useReducer:function(s,l,p){var w=ss();if(p!==void 0){var C=p(l);if(pc){rt(!0);try{p(l)}finally{rt(!1)}}}else C=l;return w.memoizedState=w.baseState=C,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:C},w.queue=s,s=s.dispatch=DO.bind(null,pn,s),[w.memoizedState,s]},useRef:function(s){var l=ss();return s={current:s},l.memoizedState=s},useState:function(s){s=y0(s);var l=s.queue,p=ox.bind(null,pn,l);return l.dispatch=p,[s.memoizedState,p]},useDebugValue:w0,useDeferredValue:function(s,l){var p=ss();return x0(p,s,l)},useTransition:function(){var s=y0(!1);return s=nx.bind(null,pn,s.queue,!0,!1),ss().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,p){var w=pn,C=ss();if(Pn){if(p===void 0)throw Error(r(407));p=p()}else{if(p=l(),Er===null)throw Error(r(349));(Dn&127)!==0||R2(w,l,p)}C.memoizedState=p;var O={value:p,getSnapshot:l};return C.queue=O,$2(D2.bind(null,w,O,s),[s]),w.flags|=2048,pu(9,{destroy:void 0},M2.bind(null,w,O,p,l),null),p},useId:function(){var s=ss(),l=Er.identifierPrefix;if(Pn){var p=Ya,w=$a;p=(w&~(1<<32-jt(w)-1)).toString(32)+p,l="_"+l+"R_"+p,p=tp++,0<p&&(l+="H"+p.toString(32)),l+="_"}else p=TO++,l="_"+l+"r_"+p.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:S0,useFormState:H2,useActionState:H2,useOptimistic:function(s){var l=ss();l.memoizedState=l.baseState=s;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=p,l=A0.bind(null,pn,!0,p),p.dispatch=l,[s,l]},useMemoCache:p0,useCacheRefresh:function(){return ss().memoizedState=MO.bind(null,pn)},useEffectEvent:function(s){var l=ss(),p={impl:s};return l.memoizedState=p,function(){if((Yn&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},C0={readContext:zi,use:rp,useCallback:J2,useContext:zi,useEffect:b0,useImperativeHandle:Z2,useInsertionEffect:X2,useLayoutEffect:W2,useMemo:ex,useReducer:ip,useRef:K2,useState:function(){return ip(_o)},useDebugValue:w0,useDeferredValue:function(s,l){var p=fi();return tx(p,pr.memoizedState,s,l)},useTransition:function(){var s=ip(_o)[0],l=fi().memoizedState;return[typeof s=="boolean"?s:Bh(s),l]},useSyncExternalStore:I2,useId:sx,useHostTransitionStatus:S0,useFormState:q2,useActionState:q2,useOptimistic:function(s,l){var p=fi();return j2(p,pr,s,l)},useMemoCache:p0,useCacheRefresh:ax};C0.useEffectEvent=Y2;var hx={readContext:zi,use:rp,useCallback:J2,useContext:zi,useEffect:b0,useImperativeHandle:Z2,useInsertionEffect:X2,useLayoutEffect:W2,useMemo:ex,useReducer:g0,useRef:K2,useState:function(){return g0(_o)},useDebugValue:w0,useDeferredValue:function(s,l){var p=fi();return pr===null?x0(p,s,l):tx(p,pr.memoizedState,s,l)},useTransition:function(){var s=g0(_o)[0],l=fi().memoizedState;return[typeof s=="boolean"?s:Bh(s),l]},useSyncExternalStore:I2,useId:sx,useHostTransitionStatus:S0,useFormState:G2,useActionState:G2,useOptimistic:function(s,l){var p=fi();return pr!==null?j2(p,pr,s,l):(p.baseState=s,[s,p.queue.dispatch])},useMemoCache:p0,useCacheRefresh:ax};hx.useEffectEvent=Y2;function T0(s,l,p,w){l=s.memoizedState,p=p(w,l),p=p==null?l:S({},l,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var N0={enqueueSetState:function(s,l,p){s=s._reactInternals;var w=Ds(),C=dl(w);C.payload=l,p!=null&&(C.callback=p),l=pl(s,C,w),l!==null&&(As(l,s,w),Dh(l,s,w))},enqueueReplaceState:function(s,l,p){s=s._reactInternals;var w=Ds(),C=dl(w);C.tag=1,C.payload=l,p!=null&&(C.callback=p),l=pl(s,C,w),l!==null&&(As(l,s,w),Dh(l,s,w))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var p=Ds(),w=dl(p);w.tag=2,l!=null&&(w.callback=l),l=pl(s,w,p),l!==null&&(As(l,s,p),Dh(l,s,p))}};function fx(s,l,p,w,C,O,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,O,P):l.prototype&&l.prototype.isPureReactComponent?!b(p,w)||!b(C,O):!0}function dx(s,l,p,w){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,w),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,w),l.state!==s&&N0.enqueueReplaceState(l,l.state,null)}function mc(s,l){var p=l;if("ref"in l){p={};for(var w in l)w!=="ref"&&(p[w]=l[w])}if(s=s.defaultProps){p===l&&(p=S({},p));for(var C in s)p[C]===void 0&&(p[C]=s[C])}return p}function px(s){fn(s)}function mx(s){console.error(s)}function gx(s){fn(s)}function lp(s,l){try{var p=s.onUncaughtError;p(l.value,{componentStack:l.stack})}catch(w){setTimeout(function(){throw w})}}function yx(s,l,p){try{var w=s.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function _0(s,l,p){return p=dl(p),p.tag=3,p.payload={element:null},p.callback=function(){lp(s,l)},p}function vx(s){return s=dl(s),s.tag=3,s}function bx(s,l,p,w){var C=p.type.getDerivedStateFromError;if(typeof C=="function"){var O=w.value;s.payload=function(){return C(O)},s.callback=function(){yx(l,p,w)}}var P=p.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(s.callback=function(){yx(l,p,w),typeof C!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var $=w.stack;this.componentDidCatch(w.value,{componentStack:$!==null?$:""})})}function LO(s,l,p,w,C){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(l=p.alternate,l!==null&&au(l,p,C,!0),p=Os.current,p!==null){switch(p.tag){case 31:case 13:return sa===null?wp():p.alternate===null&&ei===0&&(ei=3),p.flags&=-257,p.flags|=65536,p.lanes=C,w===Xd?p.flags|=16384:(l=p.updateQueue,l===null?p.updateQueue=new Set([w]):l.add(w),J0(s,w,C)),!1;case 22:return p.flags|=65536,w===Xd?p.flags|=16384:(l=p.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=l):(p=l.retryQueue,p===null?l.retryQueue=new Set([w]):p.add(w)),J0(s,w,C)),!1}throw Error(r(435,p.tag))}return J0(s,w,C),wp(),!1}if(Pn)return l=Os.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=C,w!==$1&&(s=Error(r(422),{cause:w}),_h(ta(s,p)))):(w!==$1&&(l=Error(r(423),{cause:w}),_h(ta(l,p))),s=s.current.alternate,s.flags|=65536,C&=-C,s.lanes|=C,w=ta(w,p),C=_0(s.stateNode,w,C),i0(s,C),ei!==4&&(ei=2)),!1;var O=Error(r(520),{cause:w});if(O=ta(O,p),$h===null?$h=[O]:$h.push(O),ei!==4&&(ei=2),l===null)return!0;w=ta(w,p),p=l;do{switch(p.tag){case 3:return p.flags|=65536,s=C&-C,p.lanes|=s,s=_0(p.stateNode,w,s),i0(p,s),!1;case 1:if(l=p.type,O=p.stateNode,(p.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(wl===null||!wl.has(O))))return p.flags|=65536,C&=-C,p.lanes|=C,C=vx(C),bx(C,s,p,w),i0(p,C),!1}p=p.return}while(p!==null);return!1}var O0=Error(r(461)),Ei=!1;function Hi(s,l,p,w){l.child=s===null?S2(l,null,p,w):dc(l,s.child,p,w)}function wx(s,l,p,w,C){p=p.render;var O=l.ref;if("ref"in w){var P={};for(var $ in w)$!=="ref"&&(P[$]=w[$])}else P=w;return cc(l),w=u0(s,l,p,P,O,C),$=h0(),s!==null&&!Ei?(f0(s,l,C),Oo(s,l,C)):(Pn&&$&&G1(l),l.flags|=1,Hi(s,l,w,C),l.child)}function xx(s,l,p,w,C){if(s===null){var O=p.type;return typeof O=="function"&&!H1(O)&&O.defaultProps===void 0&&p.compare===null?(l.tag=15,l.type=O,Ex(s,l,O,w,C)):(s=qd(p.type,null,w,l,l.mode,C),s.ref=l.ref,s.return=l,l.child=s)}if(O=s.child,!B0(s,C)){var P=O.memoizedProps;if(p=p.compare,p=p!==null?p:b,p(P,w)&&s.ref===l.ref)return Oo(s,l,C)}return l.flags|=1,s=So(O,w),s.ref=l.ref,s.return=l,l.child=s}function Ex(s,l,p,w,C){if(s!==null){var O=s.memoizedProps;if(b(O,w)&&s.ref===l.ref)if(Ei=!1,l.pendingProps=w=O,B0(s,C))(s.flags&131072)!==0&&(Ei=!0);else return l.lanes=s.lanes,Oo(s,l,C)}return I0(s,l,p,w,C)}function Sx(s,l,p,w){var C=w.children,O=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((l.flags&128)!==0){if(O=O!==null?O.baseLanes|p:p,s!==null){for(w=l.child=s.child,C=0;w!==null;)C=C|w.lanes|w.childLanes,w=w.sibling;w=C&~O}else w=0,l.child=null;return Ax(s,l,O,p,w)}if((p&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&$d(l,O!==null?O.cachePool:null),O!==null?T2(l,O):a0(),N2(l);else return w=l.lanes=536870912,Ax(s,l,O!==null?O.baseLanes|p:p,p,w)}else O!==null?($d(l,O.cachePool),T2(l,O),gl(),l.memoizedState=null):(s!==null&&$d(l,null),a0(),gl());return Hi(s,l,C,p),l.child}function Fh(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function Ax(s,l,p,w,C){var O=e0();return O=O===null?null:{parent:wi._currentValue,pool:O},l.memoizedState={baseLanes:p,cachePool:O},s!==null&&$d(l,null),a0(),N2(l),s!==null&&au(s,l,w,!0),l.childLanes=C,null}function cp(s,l){return l=hp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function Cx(s,l,p){return dc(l,s.child,null,p),s=cp(l,l.pendingProps),s.flags|=2,Is(l),l.memoizedState=null,s}function kO(s,l,p){var w=l.pendingProps,C=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(Pn){if(w.mode==="hidden")return s=cp(l,w),l.lanes=536870912,Fh(null,s);if(l0(l),(s=Mr)?(s=BE(s,ia),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:ll!==null?{id:$a,overflow:Ya}:null,retryLane:536870912,hydrationErrors:null},p=l2(s),p.return=l,l.child=p,Fi=l,Mr=null)):s=null,s===null)throw ul(l);return l.lanes=536870912,null}return cp(l,w)}var O=s.memoizedState;if(O!==null){var P=O.dehydrated;if(l0(l),C)if(l.flags&256)l.flags&=-257,l=Cx(s,l,p);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Ei||au(s,l,p,!1),C=(p&s.childLanes)!==0,Ei||C){if(w=Er,w!==null&&(P=Se(w,p),P!==0&&P!==O.retryLane))throw O.retryLane=P,Kr(s,P),As(w,s,P),O0;wp(),l=Cx(s,l,p)}else s=O.treeContext,Mr=aa(P.nextSibling),Fi=l,Pn=!0,cl=null,ia=!1,s!==null&&h2(l,s),l=cp(l,w),l.flags|=4096;return l}return s=So(s.child,{mode:w.mode,children:w.children}),s.ref=l.ref,l.child=s,s.return=l,s}function up(s,l){var p=l.ref;if(p===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(s===null||s.ref!==p)&&(l.flags|=4194816)}}function I0(s,l,p,w,C){return cc(l),p=u0(s,l,p,w,void 0,C),w=h0(),s!==null&&!Ei?(f0(s,l,C),Oo(s,l,C)):(Pn&&w&&G1(l),l.flags|=1,Hi(s,l,p,C),l.child)}function Tx(s,l,p,w,C,O){return cc(l),l.updateQueue=null,p=O2(l,w,p,C),_2(s),w=h0(),s!==null&&!Ei?(f0(s,l,O),Oo(s,l,O)):(Pn&&w&&G1(l),l.flags|=1,Hi(s,l,p,O),l.child)}function Nx(s,l,p,w,C){if(cc(l),l.stateNode===null){var O=nu,P=p.contextType;typeof P=="object"&&P!==null&&(O=zi(P)),O=new p(w,O),l.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=N0,l.stateNode=O,O._reactInternals=l,O=l.stateNode,O.props=w,O.state=l.memoizedState,O.refs={},n0(l),P=p.contextType,O.context=typeof P=="object"&&P!==null?zi(P):nu,O.state=l.memoizedState,P=p.getDerivedStateFromProps,typeof P=="function"&&(T0(l,p,P,w),O.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(P=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),P!==O.state&&N0.enqueueReplaceState(O,O.state,null),kh(l,w,O,C),Lh(),O.state=l.memoizedState),typeof O.componentDidMount=="function"&&(l.flags|=4194308),w=!0}else if(s===null){O=l.stateNode;var $=l.memoizedProps,me=mc(p,$);O.props=me;var Re=O.context,Ve=p.contextType;P=nu,typeof Ve=="object"&&Ve!==null&&(P=zi(Ve));var Qe=p.getDerivedStateFromProps;Ve=typeof Qe=="function"||typeof O.getSnapshotBeforeUpdate=="function",$=l.pendingProps!==$,Ve||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||($||Re!==P)&&dx(l,O,w,P),fl=!1;var Le=l.memoizedState;O.state=Le,kh(l,w,O,C),Lh(),Re=l.memoizedState,$||Le!==Re||fl?(typeof Qe=="function"&&(T0(l,p,Qe,w),Re=l.memoizedState),(me=fl||fx(l,p,me,w,Le,Re,P))?(Ve||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=w,l.memoizedState=Re),O.props=w,O.state=Re,O.context=P,w=me):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),w=!1)}else{O=l.stateNode,r0(s,l),P=l.memoizedProps,Ve=mc(p,P),O.props=Ve,Qe=l.pendingProps,Le=O.context,Re=p.contextType,me=nu,typeof Re=="object"&&Re!==null&&(me=zi(Re)),$=p.getDerivedStateFromProps,(Re=typeof $=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(P!==Qe||Le!==me)&&dx(l,O,w,me),fl=!1,Le=l.memoizedState,O.state=Le,kh(l,w,O,C),Lh();var Be=l.memoizedState;P!==Qe||Le!==Be||fl||s!==null&&s.dependencies!==null&&Gd(s.dependencies)?(typeof $=="function"&&(T0(l,p,$,w),Be=l.memoizedState),(Ve=fl||fx(l,p,Ve,w,Le,Be,me)||s!==null&&s.dependencies!==null&&Gd(s.dependencies))?(Re||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(w,Be,me),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(w,Be,me)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||P===s.memoizedProps&&Le===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&Le===s.memoizedState||(l.flags|=1024),l.memoizedProps=w,l.memoizedState=Be),O.props=w,O.state=Be,O.context=me,w=Ve):(typeof O.componentDidUpdate!="function"||P===s.memoizedProps&&Le===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&Le===s.memoizedState||(l.flags|=1024),w=!1)}return O=w,up(s,l),w=(l.flags&128)!==0,O||w?(O=l.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:O.render(),l.flags|=1,s!==null&&w?(l.child=dc(l,s.child,null,C),l.child=dc(l,null,p,C)):Hi(s,l,p,C),l.memoizedState=O.state,s=l.child):s=Oo(s,l,C),s}function _x(s,l,p,w){return oc(),l.flags|=256,Hi(s,l,p,w),l.child}var R0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function M0(s){return{baseLanes:s,cachePool:y2()}}function D0(s,l,p){return s=s!==null?s.childLanes&~p:0,l&&(s|=Ms),s}function Ox(s,l,p){var w=l.pendingProps,C=!1,O=(l.flags&128)!==0,P;if((P=O)||(P=s!==null&&s.memoizedState===null?!1:(hi.current&2)!==0),P&&(C=!0,l.flags&=-129),P=(l.flags&32)!==0,l.flags&=-33,s===null){if(Pn){if(C?ml(l):gl(),(s=Mr)?(s=BE(s,ia),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:ll!==null?{id:$a,overflow:Ya}:null,retryLane:536870912,hydrationErrors:null},p=l2(s),p.return=l,l.child=p,Fi=l,Mr=null)):s=null,s===null)throw ul(l);return mg(s)?l.lanes=32:l.lanes=536870912,null}var $=w.children;return w=w.fallback,C?(gl(),C=l.mode,$=hp({mode:"hidden",children:$},C),w=ac(w,C,p,null),$.return=l,w.return=l,$.sibling=w,l.child=$,w=l.child,w.memoizedState=M0(p),w.childLanes=D0(s,P,p),l.memoizedState=R0,Fh(null,w)):(ml(l),L0(l,$))}var me=s.memoizedState;if(me!==null&&($=me.dehydrated,$!==null)){if(O)l.flags&256?(ml(l),l.flags&=-257,l=k0(s,l,p)):l.memoizedState!==null?(gl(),l.child=s.child,l.flags|=128,l=null):(gl(),$=w.fallback,C=l.mode,w=hp({mode:"visible",children:w.children},C),$=ac($,C,p,null),$.flags|=2,w.return=l,$.return=l,w.sibling=$,l.child=w,dc(l,s.child,null,p),w=l.child,w.memoizedState=M0(p),w.childLanes=D0(s,P,p),l.memoizedState=R0,l=Fh(null,w));else if(ml(l),mg($)){if(P=$.nextSibling&&$.nextSibling.dataset,P)var Re=P.dgst;P=Re,w=Error(r(419)),w.stack="",w.digest=P,_h({value:w,source:null,stack:null}),l=k0(s,l,p)}else if(Ei||au(s,l,p,!1),P=(p&s.childLanes)!==0,Ei||P){if(P=Er,P!==null&&(w=Se(P,p),w!==0&&w!==me.retryLane))throw me.retryLane=w,Kr(s,w),As(P,s,w),O0;pg($)||wp(),l=k0(s,l,p)}else pg($)?(l.flags|=192,l.child=s.child,l=null):(s=me.treeContext,Mr=aa($.nextSibling),Fi=l,Pn=!0,cl=null,ia=!1,s!==null&&h2(l,s),l=L0(l,w.children),l.flags|=4096);return l}return C?(gl(),$=w.fallback,C=l.mode,me=s.child,Re=me.sibling,w=So(me,{mode:"hidden",children:w.children}),w.subtreeFlags=me.subtreeFlags&65011712,Re!==null?$=So(Re,$):($=ac($,C,p,null),$.flags|=2),$.return=l,w.return=l,w.sibling=$,l.child=w,Fh(null,w),w=l.child,$=s.child.memoizedState,$===null?$=M0(p):(C=$.cachePool,C!==null?(me=wi._currentValue,C=C.parent!==me?{parent:me,pool:me}:C):C=y2(),$={baseLanes:$.baseLanes|p,cachePool:C}),w.memoizedState=$,w.childLanes=D0(s,P,p),l.memoizedState=R0,Fh(s.child,w)):(ml(l),p=s.child,s=p.sibling,p=So(p,{mode:"visible",children:w.children}),p.return=l,p.sibling=null,s!==null&&(P=l.deletions,P===null?(l.deletions=[s],l.flags|=16):P.push(s)),l.child=p,l.memoizedState=null,p)}function L0(s,l){return l=hp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function hp(s,l){return s=_s(22,s,null,l),s.lanes=0,s}function k0(s,l,p){return dc(l,s.child,null,p),s=L0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Ix(s,l,p){s.lanes|=l;var w=s.alternate;w!==null&&(w.lanes|=l),W1(s.return,l,p)}function j0(s,l,p,w,C,O){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:C,treeForkCount:O}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=p,P.tailMode=C,P.treeForkCount=O)}function Rx(s,l,p){var w=l.pendingProps,C=w.revealOrder,O=w.tail;w=w.children;var P=hi.current,$=(P&2)!==0;if($?(P=P&1|2,l.flags|=128):P&=1,Ce(hi,P),Hi(s,l,w,p),w=Pn?Nh:0,!$&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ix(s,p,l);else if(s.tag===19)Ix(s,p,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(C){case"forwards":for(p=l.child,C=null;p!==null;)s=p.alternate,s!==null&&Jd(s)===null&&(C=p),p=p.sibling;p=C,p===null?(C=l.child,l.child=null):(C=p.sibling,p.sibling=null),j0(l,!1,C,p,O,w);break;case"backwards":case"unstable_legacy-backwards":for(p=null,C=l.child,l.child=null;C!==null;){if(s=C.alternate,s!==null&&Jd(s)===null){l.child=C;break}s=C.sibling,C.sibling=p,p=C,C=s}j0(l,!0,p,null,O,w);break;case"together":j0(l,!1,null,null,void 0,w);break;default:l.memoizedState=null}return l.child}function Oo(s,l,p){if(s!==null&&(l.dependencies=s.dependencies),bl|=l.lanes,(p&l.childLanes)===0)if(s!==null){if(au(s,l,p,!1),(p&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,p=So(s,s.pendingProps),l.child=p,p.return=l;s.sibling!==null;)s=s.sibling,p=p.sibling=So(s,s.pendingProps),p.return=l;p.sibling=null}return l.child}function B0(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Gd(s)))}function jO(s,l,p){switch(l.tag){case 3:dt(l,l.stateNode.containerInfo),hl(l,wi,s.memoizedState.cache),oc();break;case 27:case 5:Wt(l);break;case 4:dt(l,l.stateNode.containerInfo);break;case 10:hl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,l0(l),null;break;case 13:var w=l.memoizedState;if(w!==null)return w.dehydrated!==null?(ml(l),l.flags|=128,null):(p&l.child.childLanes)!==0?Ox(s,l,p):(ml(l),s=Oo(s,l,p),s!==null?s.sibling:null);ml(l);break;case 19:var C=(s.flags&128)!==0;if(w=(p&l.childLanes)!==0,w||(au(s,l,p,!1),w=(p&l.childLanes)!==0),C){if(w)return Rx(s,l,p);l.flags|=128}if(C=l.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Ce(hi,hi.current),w)break;return null;case 22:return l.lanes=0,Sx(s,l,p,l.pendingProps);case 24:hl(l,wi,s.memoizedState.cache)}return Oo(s,l,p)}function Mx(s,l,p){if(s!==null)if(s.memoizedProps!==l.pendingProps)Ei=!0;else{if(!B0(s,p)&&(l.flags&128)===0)return Ei=!1,jO(s,l,p);Ei=(s.flags&131072)!==0}else Ei=!1,Pn&&(l.flags&1048576)!==0&&u2(l,Nh,l.index);switch(l.lanes=0,l.tag){case 16:e:{var w=l.pendingProps;if(s=hc(l.elementType),l.type=s,typeof s=="function")H1(s)?(w=mc(s,w),l.tag=1,l=Nx(null,l,s,w,p)):(l.tag=0,l=I0(null,l,s,w,p));else{if(s!=null){var C=s.$$typeof;if(C===se){l.tag=11,l=wx(null,l,s,w,p);break e}else if(C===F){l.tag=14,l=xx(null,l,s,w,p);break e}}throw l=Ne(s)||s,Error(r(306,l,""))}}return l;case 0:return I0(s,l,l.type,l.pendingProps,p);case 1:return w=l.type,C=mc(w,l.pendingProps),Nx(s,l,w,C,p);case 3:e:{if(dt(l,l.stateNode.containerInfo),s===null)throw Error(r(387));w=l.pendingProps;var O=l.memoizedState;C=O.element,r0(s,l),kh(l,w,null,p);var P=l.memoizedState;if(w=P.cache,hl(l,wi,w),w!==O.cache&&Q1(l,[wi],p,!0),Lh(),w=P.element,O.isDehydrated)if(O={element:w,isDehydrated:!1,cache:P.cache},l.updateQueue.baseState=O,l.memoizedState=O,l.flags&256){l=_x(s,l,w,p);break e}else if(w!==C){C=ta(Error(r(424)),l),_h(C),l=_x(s,l,w,p);break e}else for(s=l.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Mr=aa(s.firstChild),Fi=l,Pn=!0,cl=null,ia=!0,p=S2(l,null,w,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(oc(),w===C){l=Oo(s,l,p);break e}Hi(s,l,w,p)}l=l.child}return l;case 26:return up(s,l),s===null?(p=qE(l.type,null,l.pendingProps,null))?l.memoizedState=p:Pn||(p=l.type,s=l.pendingProps,w=Np(Fe.current).createElement(p),w[ot]=l,w[nt]=s,qi(w,p,s),En(w),l.stateNode=w):l.memoizedState=qE(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Wt(l),s===null&&Pn&&(w=l.stateNode=FE(l.type,l.pendingProps,Fe.current),Fi=l,ia=!0,C=Mr,Al(l.type)?(gg=C,Mr=aa(w.firstChild)):Mr=C),Hi(s,l,l.pendingProps.children,p),up(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Pn&&((C=w=Mr)&&(w=fI(w,l.type,l.pendingProps,ia),w!==null?(l.stateNode=w,Fi=l,Mr=aa(w.firstChild),ia=!1,C=!0):C=!1),C||ul(l)),Wt(l),C=l.type,O=l.pendingProps,P=s!==null?s.memoizedProps:null,w=O.children,hg(C,O)?w=null:P!==null&&hg(C,P)&&(l.flags|=32),l.memoizedState!==null&&(C=u0(s,l,NO,null,null,p),tf._currentValue=C),up(s,l),Hi(s,l,w,p),l.child;case 6:return s===null&&Pn&&((s=p=Mr)&&(p=dI(p,l.pendingProps,ia),p!==null?(l.stateNode=p,Fi=l,Mr=null,s=!0):s=!1),s||ul(l)),null;case 13:return Ox(s,l,p);case 4:return dt(l,l.stateNode.containerInfo),w=l.pendingProps,s===null?l.child=dc(l,null,w,p):Hi(s,l,w,p),l.child;case 11:return wx(s,l,l.type,l.pendingProps,p);case 7:return Hi(s,l,l.pendingProps,p),l.child;case 8:return Hi(s,l,l.pendingProps.children,p),l.child;case 12:return Hi(s,l,l.pendingProps.children,p),l.child;case 10:return w=l.pendingProps,hl(l,l.type,w.value),Hi(s,l,w.children,p),l.child;case 9:return C=l.type._context,w=l.pendingProps.children,cc(l),C=zi(C),w=w(C),l.flags|=1,Hi(s,l,w,p),l.child;case 14:return xx(s,l,l.type,l.pendingProps,p);case 15:return Ex(s,l,l.type,l.pendingProps,p);case 19:return Rx(s,l,p);case 31:return kO(s,l,p);case 22:return Sx(s,l,p,l.pendingProps);case 24:return cc(l),w=zi(wi),s===null?(C=e0(),C===null&&(C=Er,O=Z1(),C.pooledCache=O,O.refCount++,O!==null&&(C.pooledCacheLanes|=p),C=O),l.memoizedState={parent:w,cache:C},n0(l),hl(l,wi,C)):((s.lanes&p)!==0&&(r0(s,l),kh(l,null,null,p),Lh()),C=s.memoizedState,O=l.memoizedState,C.parent!==w?(C={parent:w,cache:w},l.memoizedState=C,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=C),hl(l,wi,w)):(w=O.cache,hl(l,wi,w),w!==C.cache&&Q1(l,[wi],p,!0))),Hi(s,l,l.pendingProps.children,p),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Io(s){s.flags|=4}function P0(s,l,p,w,C){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(C&335544128)===C)if(s.stateNode.complete)s.flags|=8192;else if(sE())s.flags|=8192;else throw fc=Xd,t0}else s.flags&=-16777217}function Dx(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!YE(l))if(sE())s.flags|=8192;else throw fc=Xd,t0}function fp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?_n():536870912,s.lanes|=l,vu|=l)}function zh(s,l){if(!Pn)switch(s.tailMode){case"hidden":l=s.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Dr(s){var l=s.alternate!==null&&s.alternate.child===s.child,p=0,w=0;if(l)for(var C=s.child;C!==null;)p|=C.lanes|C.childLanes,w|=C.subtreeFlags&65011712,w|=C.flags&65011712,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)p|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=w,s.childLanes=p,l}function BO(s,l,p){var w=l.pendingProps;switch(K1(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(l),null;case 1:return Dr(l),null;case 3:return p=l.stateNode,w=null,s!==null&&(w=s.memoizedState.cache),l.memoizedState.cache!==w&&(l.flags|=2048),To(wi),Ze(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(su(l)?Io(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Y1())),Dr(l),null;case 26:var C=l.type,O=l.memoizedState;return s===null?(Io(l),O!==null?(Dr(l),Dx(l,O)):(Dr(l),P0(l,C,null,w,p))):O?O!==s.memoizedState?(Io(l),Dr(l),Dx(l,O)):(Dr(l),l.flags&=-16777217):(s=s.memoizedProps,s!==w&&Io(l),Dr(l),P0(l,C,s,w,p)),null;case 27:if(kt(l),p=Fe.current,C=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==w&&Io(l);else{if(!w){if(l.stateNode===null)throw Error(r(166));return Dr(l),null}s=ke.current,su(l)?f2(l):(s=FE(C,w,p),l.stateNode=s,Io(l))}return Dr(l),null;case 5:if(kt(l),C=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==w&&Io(l);else{if(!w){if(l.stateNode===null)throw Error(r(166));return Dr(l),null}if(O=ke.current,su(l))f2(l);else{var P=Np(Fe.current);switch(O){case 1:O=P.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:O=P.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":O=P.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":O=P.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":O=P.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof w.is=="string"?P.createElement("select",{is:w.is}):P.createElement("select"),w.multiple?O.multiple=!0:w.size&&(O.size=w.size);break;default:O=typeof w.is=="string"?P.createElement(C,{is:w.is}):P.createElement(C)}}O[ot]=l,O[nt]=w;e:for(P=l.child;P!==null;){if(P.tag===5||P.tag===6)O.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===l)break e;for(;P.sibling===null;){if(P.return===null||P.return===l)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}l.stateNode=O;e:switch(qi(O,C,w),C){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Io(l)}}return Dr(l),P0(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,p),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==w&&Io(l);else{if(typeof w!="string"&&l.stateNode===null)throw Error(r(166));if(s=Fe.current,su(l)){if(s=l.stateNode,p=l.memoizedProps,w=null,C=Fi,C!==null)switch(C.tag){case 27:case 5:w=C.memoizedProps}s[ot]=l,s=!!(s.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||OE(s.nodeValue,p)),s||ul(l,!0)}else s=Np(s).createTextNode(w),s[ot]=l,l.stateNode=s}return Dr(l),null;case 31:if(p=l.memoizedState,s===null||s.memoizedState!==null){if(w=su(l),p!==null){if(s===null){if(!w)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[ot]=l}else oc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Dr(l),s=!1}else p=Y1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),s=!0;if(!s)return l.flags&256?(Is(l),l):(Is(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Dr(l),null;case 13:if(w=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(C=su(l),w!==null&&w.dehydrated!==null){if(s===null){if(!C)throw Error(r(318));if(C=l.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[ot]=l}else oc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Dr(l),C=!1}else C=Y1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=C),C=!0;if(!C)return l.flags&256?(Is(l),l):(Is(l),null)}return Is(l),(l.flags&128)!==0?(l.lanes=p,l):(p=w!==null,s=s!==null&&s.memoizedState!==null,p&&(w=l.child,C=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(C=w.alternate.memoizedState.cachePool.pool),O=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(O=w.memoizedState.cachePool.pool),O!==C&&(w.flags|=2048)),p!==s&&p&&(l.child.flags|=8192),fp(l,l.updateQueue),Dr(l),null);case 4:return Ze(),s===null&&ag(l.stateNode.containerInfo),Dr(l),null;case 10:return To(l.type),Dr(l),null;case 19:if(ye(hi),w=l.memoizedState,w===null)return Dr(l),null;if(C=(l.flags&128)!==0,O=w.rendering,O===null)if(C)zh(w,!1);else{if(ei!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(O=Jd(s),O!==null){for(l.flags|=128,zh(w,!1),s=O.updateQueue,l.updateQueue=s,fp(l,s),l.subtreeFlags=0,s=p,p=l.child;p!==null;)o2(p,s),p=p.sibling;return Ce(hi,hi.current&1|2),Pn&&Ao(l,w.treeForkCount),l.child}s=s.sibling}w.tail!==null&&an()>yp&&(l.flags|=128,C=!0,zh(w,!1),l.lanes=4194304)}else{if(!C)if(s=Jd(O),s!==null){if(l.flags|=128,C=!0,s=s.updateQueue,l.updateQueue=s,fp(l,s),zh(w,!0),w.tail===null&&w.tailMode==="hidden"&&!O.alternate&&!Pn)return Dr(l),null}else 2*an()-w.renderingStartTime>yp&&p!==536870912&&(l.flags|=128,C=!0,zh(w,!1),l.lanes=4194304);w.isBackwards?(O.sibling=l.child,l.child=O):(s=w.last,s!==null?s.sibling=O:l.child=O,w.last=O)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=an(),s.sibling=null,p=hi.current,Ce(hi,C?p&1|2:p&1),Pn&&Ao(l,w.treeForkCount),s):(Dr(l),null);case 22:case 23:return Is(l),o0(),w=l.memoizedState!==null,s!==null?s.memoizedState!==null!==w&&(l.flags|=8192):w&&(l.flags|=8192),w?(p&536870912)!==0&&(l.flags&128)===0&&(Dr(l),l.subtreeFlags&6&&(l.flags|=8192)):Dr(l),p=l.updateQueue,p!==null&&fp(l,p.retryQueue),p=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),w=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(w=l.memoizedState.cachePool.pool),w!==p&&(l.flags|=2048),s!==null&&ye(uc),null;case 24:return p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),To(wi),Dr(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function PO(s,l){switch(K1(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return To(wi),Ze(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return kt(l),null;case 31:if(l.memoizedState!==null){if(Is(l),l.alternate===null)throw Error(r(340));oc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Is(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));oc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return ye(hi),null;case 4:return Ze(),null;case 10:return To(l.type),null;case 22:case 23:return Is(l),o0(),s!==null&&ye(uc),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return To(wi),null;case 25:return null;default:return null}}function Lx(s,l){switch(K1(l),l.tag){case 3:To(wi),Ze();break;case 26:case 27:case 5:kt(l);break;case 4:Ze();break;case 31:l.memoizedState!==null&&Is(l);break;case 13:Is(l);break;case 19:ye(hi);break;case 10:To(l.type);break;case 22:case 23:Is(l),o0(),s!==null&&ye(uc);break;case 24:To(wi)}}function Hh(s,l){try{var p=l.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var C=w.next;p=C;do{if((p.tag&s)===s){w=void 0;var O=p.create,P=p.inst;w=O(),P.destroy=w}p=p.next}while(p!==C)}}catch($){ir(l,l.return,$)}}function yl(s,l,p){try{var w=l.updateQueue,C=w!==null?w.lastEffect:null;if(C!==null){var O=C.next;w=O;do{if((w.tag&s)===s){var P=w.inst,$=P.destroy;if($!==void 0){P.destroy=void 0,C=l;var me=p,Re=$;try{Re()}catch(Ve){ir(C,me,Ve)}}}w=w.next}while(w!==O)}}catch(Ve){ir(l,l.return,Ve)}}function kx(s){var l=s.updateQueue;if(l!==null){var p=s.stateNode;try{C2(l,p)}catch(w){ir(s,s.return,w)}}}function jx(s,l,p){p.props=mc(s.type,s.memoizedProps),p.state=s.memoizedState;try{p.componentWillUnmount()}catch(w){ir(s,l,w)}}function qh(s,l){try{var p=s.ref;if(p!==null){switch(s.tag){case 26:case 27:case 5:var w=s.stateNode;break;case 30:w=s.stateNode;break;default:w=s.stateNode}typeof p=="function"?s.refCleanup=p(w):p.current=w}}catch(C){ir(s,l,C)}}function Xa(s,l){var p=s.ref,w=s.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(C){ir(s,l,C)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(C){ir(s,l,C)}else p.current=null}function Bx(s){var l=s.type,p=s.memoizedProps,w=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(C){ir(s,s.return,C)}}function U0(s,l,p){try{var w=s.stateNode;aI(w,s.type,p,l),w[nt]=l}catch(C){ir(s,s.return,C)}}function Px(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Al(s.type)||s.tag===4}function F0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Px(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Al(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function z0(s,l,p){var w=s.tag;if(w===5||w===6)s=s.stateNode,l?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(s,l):(l=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,l.appendChild(s),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Zr));else if(w!==4&&(w===27&&Al(s.type)&&(p=s.stateNode,l=null),s=s.child,s!==null))for(z0(s,l,p),s=s.sibling;s!==null;)z0(s,l,p),s=s.sibling}function dp(s,l,p){var w=s.tag;if(w===5||w===6)s=s.stateNode,l?p.insertBefore(s,l):p.appendChild(s);else if(w!==4&&(w===27&&Al(s.type)&&(p=s.stateNode),s=s.child,s!==null))for(dp(s,l,p),s=s.sibling;s!==null;)dp(s,l,p),s=s.sibling}function Ux(s){var l=s.stateNode,p=s.memoizedProps;try{for(var w=s.type,C=l.attributes;C.length;)l.removeAttributeNode(C[0]);qi(l,w,p),l[ot]=s,l[nt]=p}catch(O){ir(s,s.return,O)}}var Ro=!1,Si=!1,H0=!1,Fx=typeof WeakSet=="function"?WeakSet:Set,Ri=null;function UO(s,l){if(s=s.containerInfo,cg=Lp,s=M(s),L(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var C=w.anchorOffset,O=w.focusNode;w=w.focusOffset;try{p.nodeType,O.nodeType}catch{p=null;break e}var P=0,$=-1,me=-1,Re=0,Ve=0,Qe=s,Le=null;t:for(;;){for(var Be;Qe!==p||C!==0&&Qe.nodeType!==3||($=P+C),Qe!==O||w!==0&&Qe.nodeType!==3||(me=P+w),Qe.nodeType===3&&(P+=Qe.nodeValue.length),(Be=Qe.firstChild)!==null;)Le=Qe,Qe=Be;for(;;){if(Qe===s)break t;if(Le===p&&++Re===C&&($=P),Le===O&&++Ve===w&&(me=P),(Be=Qe.nextSibling)!==null)break;Qe=Le,Le=Qe.parentNode}Qe=Be}p=$===-1||me===-1?null:{start:$,end:me}}else p=null}p=p||{start:0,end:0}}else p=null;for(ug={focusedElem:s,selectionRange:p},Lp=!1,Ri=l;Ri!==null;)if(l=Ri,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Ri=s;else for(;Ri!==null;){switch(l=Ri,O=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(p=0;p<s.length;p++)C=s[p],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&O!==null){s=void 0,p=l,C=O.memoizedProps,O=O.memoizedState,w=p.stateNode;try{var Nt=mc(p.type,C);s=w.getSnapshotBeforeUpdate(Nt,O),w.__reactInternalSnapshotBeforeUpdate=s}catch(Gt){ir(p,p.return,Gt)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,p=s.nodeType,p===9)dg(s);else if(p===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":dg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Ri=s;break}Ri=l.return}}function zx(s,l,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:Do(s,p),w&4&&Hh(5,p);break;case 1:if(Do(s,p),w&4)if(s=p.stateNode,l===null)try{s.componentDidMount()}catch(P){ir(p,p.return,P)}else{var C=mc(p.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(C,l,s.__reactInternalSnapshotBeforeUpdate)}catch(P){ir(p,p.return,P)}}w&64&&kx(p),w&512&&qh(p,p.return);break;case 3:if(Do(s,p),w&64&&(s=p.updateQueue,s!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=p.child.stateNode;break;case 1:l=p.child.stateNode}try{C2(s,l)}catch(P){ir(p,p.return,P)}}break;case 27:l===null&&w&4&&Ux(p);case 26:case 5:Do(s,p),l===null&&w&4&&Bx(p),w&512&&qh(p,p.return);break;case 12:Do(s,p);break;case 31:Do(s,p),w&4&&Vx(s,p);break;case 13:Do(s,p),w&4&&Gx(s,p),w&64&&(s=p.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(p=YO.bind(null,p),pI(s,p))));break;case 22:if(w=p.memoizedState!==null||Ro,!w){l=l!==null&&l.memoizedState!==null||Si,C=Ro;var O=Si;Ro=w,(Si=l)&&!O?Lo(s,p,(p.subtreeFlags&8772)!==0):Do(s,p),Ro=C,Si=O}break;case 30:break;default:Do(s,p)}}function Hx(s){var l=s.alternate;l!==null&&(s.alternate=null,Hx(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&gn(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ur=null,ws=!1;function Mo(s,l,p){for(p=p.child;p!==null;)qx(s,l,p),p=p.sibling}function qx(s,l,p){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Mn,p)}catch{}switch(p.tag){case 26:Si||Xa(p,l),Mo(s,l,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Si||Xa(p,l);var w=Ur,C=ws;Al(p.type)&&(Ur=p.stateNode,ws=!1),Mo(s,l,p),Zh(p.stateNode),Ur=w,ws=C;break;case 5:Si||Xa(p,l);case 6:if(w=Ur,C=ws,Ur=null,Mo(s,l,p),Ur=w,ws=C,Ur!==null)if(ws)try{(Ur.nodeType===9?Ur.body:Ur.nodeName==="HTML"?Ur.ownerDocument.body:Ur).removeChild(p.stateNode)}catch(O){ir(p,l,O)}else try{Ur.removeChild(p.stateNode)}catch(O){ir(p,l,O)}break;case 18:Ur!==null&&(ws?(s=Ur,kE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,p.stateNode),Tu(s)):kE(Ur,p.stateNode));break;case 4:w=Ur,C=ws,Ur=p.stateNode.containerInfo,ws=!0,Mo(s,l,p),Ur=w,ws=C;break;case 0:case 11:case 14:case 15:yl(2,p,l),Si||yl(4,p,l),Mo(s,l,p);break;case 1:Si||(Xa(p,l),w=p.stateNode,typeof w.componentWillUnmount=="function"&&jx(p,l,w)),Mo(s,l,p);break;case 21:Mo(s,l,p);break;case 22:Si=(w=Si)||p.memoizedState!==null,Mo(s,l,p),Si=w;break;default:Mo(s,l,p)}}function Vx(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Tu(s)}catch(p){ir(l,l.return,p)}}}function Gx(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Tu(s)}catch(p){ir(l,l.return,p)}}function FO(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new Fx),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new Fx),l;default:throw Error(r(435,s.tag))}}function pp(s,l){var p=FO(s);l.forEach(function(w){if(!p.has(w)){p.add(w);var C=XO.bind(null,s,w);w.then(C,C)}})}function xs(s,l){var p=l.deletions;if(p!==null)for(var w=0;w<p.length;w++){var C=p[w],O=s,P=l,$=P;e:for(;$!==null;){switch($.tag){case 27:if(Al($.type)){Ur=$.stateNode,ws=!1;break e}break;case 5:Ur=$.stateNode,ws=!1;break e;case 3:case 4:Ur=$.stateNode.containerInfo,ws=!0;break e}$=$.return}if(Ur===null)throw Error(r(160));qx(O,P,C),Ur=null,ws=!1,O=C.alternate,O!==null&&(O.return=null),C.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Kx(l,s),l=l.sibling}var Na=null;function Kx(s,l){var p=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:xs(l,s),Es(s),w&4&&(yl(3,s,s.return),Hh(3,s),yl(5,s,s.return));break;case 1:xs(l,s),Es(s),w&512&&(Si||p===null||Xa(p,p.return)),w&64&&Ro&&(s=s.updateQueue,s!==null&&(w=s.callbacks,w!==null&&(p=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var C=Na;if(xs(l,s),Es(s),w&512&&(Si||p===null||Xa(p,p.return)),w&4){var O=p!==null?p.memoizedState:null;if(w=s.memoizedState,p===null)if(w===null)if(s.stateNode===null){e:{w=s.type,p=s.memoizedProps,C=C.ownerDocument||C;t:switch(w){case"title":O=C.getElementsByTagName("title")[0],(!O||O[zn]||O[ot]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=C.createElement(w),C.head.insertBefore(O,C.querySelector("head > title"))),qi(O,w,p),O[ot]=s,En(O),w=O;break e;case"link":var P=KE("link","href",C).get(w+(p.href||""));if(P){for(var $=0;$<P.length;$++)if(O=P[$],O.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&O.getAttribute("rel")===(p.rel==null?null:p.rel)&&O.getAttribute("title")===(p.title==null?null:p.title)&&O.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){P.splice($,1);break t}}O=C.createElement(w),qi(O,w,p),C.head.appendChild(O);break;case"meta":if(P=KE("meta","content",C).get(w+(p.content||""))){for($=0;$<P.length;$++)if(O=P[$],O.getAttribute("content")===(p.content==null?null:""+p.content)&&O.getAttribute("name")===(p.name==null?null:p.name)&&O.getAttribute("property")===(p.property==null?null:p.property)&&O.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&O.getAttribute("charset")===(p.charSet==null?null:p.charSet)){P.splice($,1);break t}}O=C.createElement(w),qi(O,w,p),C.head.appendChild(O);break;default:throw Error(r(468,w))}O[ot]=s,En(O),w=O}s.stateNode=w}else $E(C,s.type,s.stateNode);else s.stateNode=GE(C,w,s.memoizedProps);else O!==w?(O===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):O.count--,w===null?$E(C,s.type,s.stateNode):GE(C,w,s.memoizedProps)):w===null&&s.stateNode!==null&&U0(s,s.memoizedProps,p.memoizedProps)}break;case 27:xs(l,s),Es(s),w&512&&(Si||p===null||Xa(p,p.return)),p!==null&&w&4&&U0(s,s.memoizedProps,p.memoizedProps);break;case 5:if(xs(l,s),Es(s),w&512&&(Si||p===null||Xa(p,p.return)),s.flags&32){C=s.stateNode;try{qt(C,"")}catch(Nt){ir(s,s.return,Nt)}}w&4&&s.stateNode!=null&&(C=s.memoizedProps,U0(s,C,p!==null?p.memoizedProps:C)),w&1024&&(H0=!0);break;case 6:if(xs(l,s),Es(s),w&4){if(s.stateNode===null)throw Error(r(162));w=s.memoizedProps,p=s.stateNode;try{p.nodeValue=w}catch(Nt){ir(s,s.return,Nt)}}break;case 3:if(Ip=null,C=Na,Na=_p(l.containerInfo),xs(l,s),Na=C,Es(s),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Tu(l.containerInfo)}catch(Nt){ir(s,s.return,Nt)}H0&&(H0=!1,$x(s));break;case 4:w=Na,Na=_p(s.stateNode.containerInfo),xs(l,s),Es(s),Na=w;break;case 12:xs(l,s),Es(s);break;case 31:xs(l,s),Es(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,pp(s,w)));break;case 13:xs(l,s),Es(s),s.child.flags&8192&&s.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(gp=an()),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,pp(s,w)));break;case 22:C=s.memoizedState!==null;var me=p!==null&&p.memoizedState!==null,Re=Ro,Ve=Si;if(Ro=Re||C,Si=Ve||me,xs(l,s),Si=Ve,Ro=Re,Es(s),w&8192)e:for(l=s.stateNode,l._visibility=C?l._visibility&-2:l._visibility|1,C&&(p===null||me||Ro||Si||gc(s)),p=null,l=s;;){if(l.tag===5||l.tag===26){if(p===null){me=p=l;try{if(O=me.stateNode,C)P=O.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{$=me.stateNode;var Qe=me.memoizedProps.style,Le=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;$.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(Nt){ir(me,me.return,Nt)}}}else if(l.tag===6){if(p===null){me=l;try{me.stateNode.nodeValue=C?"":me.memoizedProps}catch(Nt){ir(me,me.return,Nt)}}}else if(l.tag===18){if(p===null){me=l;try{var Be=me.stateNode;C?jE(Be,!0):jE(me.stateNode,!1)}catch(Nt){ir(me,me.return,Nt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}w&4&&(w=s.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,pp(s,p))));break;case 19:xs(l,s),Es(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,pp(s,w)));break;case 30:break;case 21:break;default:xs(l,s),Es(s)}}function Es(s){var l=s.flags;if(l&2){try{for(var p,w=s.return;w!==null;){if(Px(w)){p=w;break}w=w.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var C=p.stateNode,O=F0(s);dp(s,O,C);break;case 5:var P=p.stateNode;p.flags&32&&(qt(P,""),p.flags&=-33);var $=F0(s);dp(s,$,P);break;case 3:case 4:var me=p.stateNode.containerInfo,Re=F0(s);z0(s,Re,me);break;default:throw Error(r(161))}}catch(Ve){ir(s,s.return,Ve)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function $x(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;$x(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Do(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)zx(s,l.alternate,l),l=l.sibling}function gc(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:yl(4,l,l.return),gc(l);break;case 1:Xa(l,l.return);var p=l.stateNode;typeof p.componentWillUnmount=="function"&&jx(l,l.return,p),gc(l);break;case 27:Zh(l.stateNode);case 26:case 5:Xa(l,l.return),gc(l);break;case 22:l.memoizedState===null&&gc(l);break;case 30:gc(l);break;default:gc(l)}s=s.sibling}}function Lo(s,l,p){for(p=p&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var w=l.alternate,C=s,O=l,P=O.flags;switch(O.tag){case 0:case 11:case 15:Lo(C,O,p),Hh(4,O);break;case 1:if(Lo(C,O,p),w=O,C=w.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Re){ir(w,w.return,Re)}if(w=O,C=w.updateQueue,C!==null){var $=w.stateNode;try{var me=C.shared.hiddenCallbacks;if(me!==null)for(C.shared.hiddenCallbacks=null,C=0;C<me.length;C++)A2(me[C],$)}catch(Re){ir(w,w.return,Re)}}p&&P&64&&kx(O),qh(O,O.return);break;case 27:Ux(O);case 26:case 5:Lo(C,O,p),p&&w===null&&P&4&&Bx(O),qh(O,O.return);break;case 12:Lo(C,O,p);break;case 31:Lo(C,O,p),p&&P&4&&Vx(C,O);break;case 13:Lo(C,O,p),p&&P&4&&Gx(C,O);break;case 22:O.memoizedState===null&&Lo(C,O,p),qh(O,O.return);break;case 30:break;default:Lo(C,O,p)}l=l.sibling}}function q0(s,l){var p=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==p&&(s!=null&&s.refCount++,p!=null&&Oh(p))}function V0(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Oh(s))}function _a(s,l,p,w){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Yx(s,l,p,w),l=l.sibling}function Yx(s,l,p,w){var C=l.flags;switch(l.tag){case 0:case 11:case 15:_a(s,l,p,w),C&2048&&Hh(9,l);break;case 1:_a(s,l,p,w);break;case 3:_a(s,l,p,w),C&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Oh(s)));break;case 12:if(C&2048){_a(s,l,p,w),s=l.stateNode;try{var O=l.memoizedProps,P=O.id,$=O.onPostCommit;typeof $=="function"&&$(P,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(me){ir(l,l.return,me)}}else _a(s,l,p,w);break;case 31:_a(s,l,p,w);break;case 13:_a(s,l,p,w);break;case 23:break;case 22:O=l.stateNode,P=l.alternate,l.memoizedState!==null?O._visibility&2?_a(s,l,p,w):Vh(s,l):O._visibility&2?_a(s,l,p,w):(O._visibility|=2,mu(s,l,p,w,(l.subtreeFlags&10256)!==0||!1)),C&2048&&q0(P,l);break;case 24:_a(s,l,p,w),C&2048&&V0(l.alternate,l);break;default:_a(s,l,p,w)}}function mu(s,l,p,w,C){for(C=C&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var O=s,P=l,$=p,me=w,Re=P.flags;switch(P.tag){case 0:case 11:case 15:mu(O,P,$,me,C),Hh(8,P);break;case 23:break;case 22:var Ve=P.stateNode;P.memoizedState!==null?Ve._visibility&2?mu(O,P,$,me,C):Vh(O,P):(Ve._visibility|=2,mu(O,P,$,me,C)),C&&Re&2048&&q0(P.alternate,P);break;case 24:mu(O,P,$,me,C),C&&Re&2048&&V0(P.alternate,P);break;default:mu(O,P,$,me,C)}l=l.sibling}}function Vh(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var p=s,w=l,C=w.flags;switch(w.tag){case 22:Vh(p,w),C&2048&&q0(w.alternate,w);break;case 24:Vh(p,w),C&2048&&V0(w.alternate,w);break;default:Vh(p,w)}l=l.sibling}}var Gh=8192;function gu(s,l,p){if(s.subtreeFlags&Gh)for(s=s.child;s!==null;)Xx(s,l,p),s=s.sibling}function Xx(s,l,p){switch(s.tag){case 26:gu(s,l,p),s.flags&Gh&&s.memoizedState!==null&&TI(p,Na,s.memoizedState,s.memoizedProps);break;case 5:gu(s,l,p);break;case 3:case 4:var w=Na;Na=_p(s.stateNode.containerInfo),gu(s,l,p),Na=w;break;case 22:s.memoizedState===null&&(w=s.alternate,w!==null&&w.memoizedState!==null?(w=Gh,Gh=16777216,gu(s,l,p),Gh=w):gu(s,l,p));break;default:gu(s,l,p)}}function Wx(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Kh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var w=l[p];Ri=w,Zx(w,s)}Wx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Qx(s),s=s.sibling}function Qx(s){switch(s.tag){case 0:case 11:case 15:Kh(s),s.flags&2048&&yl(9,s,s.return);break;case 3:Kh(s);break;case 12:Kh(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,mp(s)):Kh(s);break;default:Kh(s)}}function mp(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var w=l[p];Ri=w,Zx(w,s)}Wx(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:yl(8,l,l.return),mp(l);break;case 22:p=l.stateNode,p._visibility&2&&(p._visibility&=-3,mp(l));break;default:mp(l)}s=s.sibling}}function Zx(s,l){for(;Ri!==null;){var p=Ri;switch(p.tag){case 0:case 11:case 15:yl(8,p,l);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Oh(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,Ri=w;else e:for(p=s;Ri!==null;){w=Ri;var C=w.sibling,O=w.return;if(Hx(w),w===p){Ri=null;break e}if(C!==null){C.return=O,Ri=C;break e}Ri=O}}}var zO={getCacheForType:function(s){var l=zi(wi),p=l.data.get(s);return p===void 0&&(p=s(),l.data.set(s,p)),p},cacheSignal:function(){return zi(wi).controller.signal}},HO=typeof WeakMap=="function"?WeakMap:Map,Yn=0,Er=null,On=null,Dn=0,rr=0,Rs=null,vl=!1,yu=!1,G0=!1,ko=0,ei=0,bl=0,yc=0,K0=0,Ms=0,vu=0,$h=null,Ss=null,$0=!1,gp=0,Jx=0,yp=1/0,vp=null,wl=null,_i=0,xl=null,bu=null,jo=0,Y0=0,X0=null,eE=null,Yh=0,W0=null;function Ds(){return(Yn&2)!==0&&Dn!==0?Dn&-Dn:Y.T!==null?ng():Ke()}function tE(){if(Ms===0)if((Dn&536870912)===0||Pn){var s=Qt;Qt<<=1,(Qt&3932160)===0&&(Qt=262144),Ms=s}else Ms=536870912;return s=Os.current,s!==null&&(s.flags|=32),Ms}function As(s,l,p){(s===Er&&(rr===2||rr===9)||s.cancelPendingCommit!==null)&&(wu(s,0),El(s,Dn,Ms,!1)),Wr(s,p),((Yn&2)===0||s!==Er)&&(s===Er&&((Yn&2)===0&&(yc|=p),ei===4&&El(s,Dn,Ms,!1)),Wa(s))}function nE(s,l,p){if((Yn&6)!==0)throw Error(r(327));var w=!p&&(l&127)===0&&(l&s.expiredLanes)===0||wr(s,l),C=w?GO(s,l):Z0(s,l,!0),O=w;do{if(C===0){yu&&!w&&El(s,l,0,!1);break}else{if(p=s.current.alternate,O&&!qO(p)){C=Z0(s,l,!1),O=!1;continue}if(C===2){if(O=l,s.errorRecoveryDisabledLanes&O)var P=0;else P=s.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){l=P;e:{var $=s;C=$h;var me=$.current.memoizedState.isDehydrated;if(me&&(wu($,P).flags|=256),P=Z0($,P,!1),P!==2){if(G0&&!me){$.errorRecoveryDisabledLanes|=O,yc|=O,C=4;break e}O=Ss,Ss=C,O!==null&&(Ss===null?Ss=O:Ss.push.apply(Ss,O))}C=P}if(O=!1,C!==2)continue}}if(C===1){wu(s,0),El(s,l,0,!0);break}e:{switch(w=s,O=C,O){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:El(w,l,Ms,!vl);break e;case 2:Ss=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(C=gp+300-an(),10<C)){if(El(w,l,Ms,!vl),Xr(w,0,!0)!==0)break e;jo=l,w.timeoutHandle=DE(rE.bind(null,w,p,Ss,vp,$0,l,Ms,yc,vu,vl,O,"Throttled",-0,0),C);break e}rE(w,p,Ss,vp,$0,l,Ms,yc,vu,vl,O,null,-0,0)}}break}while(!0);Wa(s)}function rE(s,l,p,w,C,O,P,$,me,Re,Ve,Qe,Le,Be){if(s.timeoutHandle=-1,Qe=l.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zr},Xx(l,O,Qe);var Nt=(O&62914560)===O?gp-an():(O&4194048)===O?Jx-an():0;if(Nt=NI(Qe,Nt),Nt!==null){jo=O,s.cancelPendingCommit=Nt(hE.bind(null,s,l,O,p,w,C,P,$,me,Ve,Qe,null,Le,Be)),El(s,O,P,!Re);return}}hE(s,l,O,p,w,C,P,$,me)}function qO(s){for(var l=s;;){var p=l.tag;if((p===0||p===11||p===15)&&l.flags&16384&&(p=l.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var C=p[w],O=C.getSnapshot;C=C.value;try{if(!f(O(),C))return!1}catch{return!1}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function El(s,l,p,w){l&=~K0,l&=~yc,s.suspendedLanes|=l,s.pingedLanes&=~l,w&&(s.warmLanes|=l),w=s.expirationTimes;for(var C=l;0<C;){var O=31-jt(C),P=1<<O;w[O]=-1,C&=~P}p!==0&&kn(s,p,l)}function bp(){return(Yn&6)===0?(Xh(0),!1):!0}function Q0(){if(On!==null){if(rr===0)var s=On.return;else s=On,Co=lc=null,d0(s),uu=null,Rh=0,s=On;for(;s!==null;)Lx(s.alternate,s),s=s.return;On=null}}function wu(s,l){var p=s.timeoutHandle;p!==-1&&(s.timeoutHandle=-1,cI(p)),p=s.cancelPendingCommit,p!==null&&(s.cancelPendingCommit=null,p()),jo=0,Q0(),Er=s,On=p=So(s.current,null),Dn=l,rr=0,Rs=null,vl=!1,yu=wr(s,l),G0=!1,vu=Ms=K0=yc=bl=ei=0,Ss=$h=null,$0=!1,(l&8)!==0&&(l|=l&32);var w=s.entangledLanes;if(w!==0)for(s=s.entanglements,w&=l;0<w;){var C=31-jt(w),O=1<<C;l|=s[C],w&=~O}return ko=l,ci(),p}function iE(s,l){pn=null,Y.H=Uh,l===cu||l===Yd?(l=w2(),rr=3):l===t0?(l=w2(),rr=4):rr=l===O0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Rs=l,On===null&&(ei=1,lp(s,ta(l,s.current)))}function sE(){var s=Os.current;return s===null?!0:(Dn&4194048)===Dn?sa===null:(Dn&62914560)===Dn||(Dn&536870912)!==0?s===sa:!1}function aE(){var s=Y.H;return Y.H=Uh,s===null?Uh:s}function oE(){var s=Y.A;return Y.A=zO,s}function wp(){ei=4,vl||(Dn&4194048)!==Dn&&Os.current!==null||(yu=!0),(bl&134217727)===0&&(yc&134217727)===0||Er===null||El(Er,Dn,Ms,!1)}function Z0(s,l,p){var w=Yn;Yn|=2;var C=aE(),O=oE();(Er!==s||Dn!==l)&&(vp=null,wu(s,l)),l=!1;var P=ei;e:do try{if(rr!==0&&On!==null){var $=On,me=Rs;switch(rr){case 8:Q0(),P=6;break e;case 3:case 2:case 9:case 6:Os.current===null&&(l=!0);var Re=rr;if(rr=0,Rs=null,xu(s,$,me,Re),p&&yu){P=0;break e}break;default:Re=rr,rr=0,Rs=null,xu(s,$,me,Re)}}VO(),P=ei;break}catch(Ve){iE(s,Ve)}while(!0);return l&&s.shellSuspendCounter++,Co=lc=null,Yn=w,Y.H=C,Y.A=O,On===null&&(Er=null,Dn=0,ci()),P}function VO(){for(;On!==null;)lE(On)}function GO(s,l){var p=Yn;Yn|=2;var w=aE(),C=oE();Er!==s||Dn!==l?(vp=null,yp=an()+500,wu(s,l)):yu=wr(s,l);e:do try{if(rr!==0&&On!==null){l=On;var O=Rs;t:switch(rr){case 1:rr=0,Rs=null,xu(s,l,O,1);break;case 2:case 9:if(v2(O)){rr=0,Rs=null,cE(l);break}l=function(){rr!==2&&rr!==9||Er!==s||(rr=7),Wa(s)},O.then(l,l);break e;case 3:rr=7;break e;case 4:rr=5;break e;case 7:v2(O)?(rr=0,Rs=null,cE(l)):(rr=0,Rs=null,xu(s,l,O,7));break;case 5:var P=null;switch(On.tag){case 26:P=On.memoizedState;case 5:case 27:var $=On;if(P?YE(P):$.stateNode.complete){rr=0,Rs=null;var me=$.sibling;if(me!==null)On=me;else{var Re=$.return;Re!==null?(On=Re,xp(Re)):On=null}break t}}rr=0,Rs=null,xu(s,l,O,5);break;case 6:rr=0,Rs=null,xu(s,l,O,6);break;case 8:Q0(),ei=6;break e;default:throw Error(r(462))}}KO();break}catch(Ve){iE(s,Ve)}while(!0);return Co=lc=null,Y.H=w,Y.A=C,Yn=p,On!==null?0:(Er=null,Dn=0,ci(),ei)}function KO(){for(;On!==null&&!$i();)lE(On)}function lE(s){var l=Mx(s.alternate,s,ko);s.memoizedProps=s.pendingProps,l===null?xp(s):On=l}function cE(s){var l=s,p=l.alternate;switch(l.tag){case 15:case 0:l=Tx(p,l,l.pendingProps,l.type,void 0,Dn);break;case 11:l=Tx(p,l,l.pendingProps,l.type.render,l.ref,Dn);break;case 5:d0(l);default:Lx(p,l),l=On=o2(l,ko),l=Mx(p,l,ko)}s.memoizedProps=s.pendingProps,l===null?xp(s):On=l}function xu(s,l,p,w){Co=lc=null,d0(l),uu=null,Rh=0;var C=l.return;try{if(LO(s,C,l,p,Dn)){ei=1,lp(s,ta(p,s.current)),On=null;return}}catch(O){if(C!==null)throw On=C,O;ei=1,lp(s,ta(p,s.current)),On=null;return}l.flags&32768?(Pn||w===1?s=!0:yu||(Dn&536870912)!==0?s=!1:(vl=s=!0,(w===2||w===9||w===3||w===6)&&(w=Os.current,w!==null&&w.tag===13&&(w.flags|=16384))),uE(l,s)):xp(l)}function xp(s){var l=s;do{if((l.flags&32768)!==0){uE(l,vl);return}s=l.return;var p=BO(l.alternate,l,ko);if(p!==null){On=p;return}if(l=l.sibling,l!==null){On=l;return}On=l=s}while(l!==null);ei===0&&(ei=5)}function uE(s,l){do{var p=PO(s.alternate,s);if(p!==null){p.flags&=32767,On=p;return}if(p=s.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!l&&(s=s.sibling,s!==null)){On=s;return}On=s=p}while(s!==null);ei=6,On=null}function hE(s,l,p,w,C,O,P,$,me){s.cancelPendingCommit=null;do Ep();while(_i!==0);if((Yn&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(O=l.lanes|l.childLanes,O|=Jt,Qn(s,p,O,P,$,me),s===Er&&(On=Er=null,Dn=0),bu=l,xl=s,jo=p,Y0=O,X0=C,eE=w,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,WO(Rn,function(){return gE(),null})):(s.callbackNode=null,s.callbackPriority=0),w=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||w){w=Y.T,Y.T=null,C=oe.p,oe.p=2,P=Yn,Yn|=4;try{UO(s,l,p)}finally{Yn=P,oe.p=C,Y.T=w}}_i=1,fE(),dE(),pE()}}function fE(){if(_i===1){_i=0;var s=xl,l=bu,p=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||p){p=Y.T,Y.T=null;var w=oe.p;oe.p=2;var C=Yn;Yn|=4;try{Kx(l,s);var O=ug,P=M(s.containerInfo),$=O.focusedElem,me=O.selectionRange;if(P!==$&&$&&$.ownerDocument&&_($.ownerDocument.documentElement,$)){if(me!==null&&L($)){var Re=me.start,Ve=me.end;if(Ve===void 0&&(Ve=Re),"selectionStart"in $)$.selectionStart=Re,$.selectionEnd=Math.min(Ve,$.value.length);else{var Qe=$.ownerDocument||document,Le=Qe&&Qe.defaultView||window;if(Le.getSelection){var Be=Le.getSelection(),Nt=$.textContent.length,Gt=Math.min(me.start,Nt),gr=me.end===void 0?Gt:Math.min(me.end,Nt);!Be.extend&&Gt>gr&&(P=gr,gr=Gt,Gt=P);var Ae=A($,Gt),we=A($,gr);if(Ae&&we&&(Be.rangeCount!==1||Be.anchorNode!==Ae.node||Be.anchorOffset!==Ae.offset||Be.focusNode!==we.node||Be.focusOffset!==we.offset)){var Ie=Qe.createRange();Ie.setStart(Ae.node,Ae.offset),Be.removeAllRanges(),Gt>gr?(Be.addRange(Ie),Be.extend(we.node,we.offset)):(Ie.setEnd(we.node,we.offset),Be.addRange(Ie))}}}}for(Qe=[],Be=$;Be=Be.parentNode;)Be.nodeType===1&&Qe.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<Qe.length;$++){var Ye=Qe[$];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}Lp=!!cg,ug=cg=null}finally{Yn=C,oe.p=w,Y.T=p}}s.current=l,_i=2}}function dE(){if(_i===2){_i=0;var s=xl,l=bu,p=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||p){p=Y.T,Y.T=null;var w=oe.p;oe.p=2;var C=Yn;Yn|=4;try{zx(s,l.alternate,l)}finally{Yn=C,oe.p=w,Y.T=p}}_i=3}}function pE(){if(_i===4||_i===3){_i=0,Li();var s=xl,l=bu,p=jo,w=eE;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?_i=5:(_i=0,bu=xl=null,mE(s,s.pendingLanes));var C=s.pendingLanes;if(C===0&&(wl=null),Xe(p),l=l.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Mn,l,void 0,(l.current.flags&128)===128)}catch{}if(w!==null){l=Y.T,C=oe.p,oe.p=2,Y.T=null;try{for(var O=s.onRecoverableError,P=0;P<w.length;P++){var $=w[P];O($.value,{componentStack:$.stack})}}finally{Y.T=l,oe.p=C}}(jo&3)!==0&&Ep(),Wa(s),C=s.pendingLanes,(p&261930)!==0&&(C&42)!==0?s===W0?Yh++:(Yh=0,W0=s):Yh=0,Xh(0)}}function mE(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Oh(l)))}function Ep(){return fE(),dE(),pE(),gE()}function gE(){if(_i!==5)return!1;var s=xl,l=Y0;Y0=0;var p=Xe(jo),w=Y.T,C=oe.p;try{oe.p=32>p?32:p,Y.T=null,p=X0,X0=null;var O=xl,P=jo;if(_i=0,bu=xl=null,jo=0,(Yn&6)!==0)throw Error(r(331));var $=Yn;if(Yn|=4,Qx(O.current),Yx(O,O.current,P,p),Yn=$,Xh(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Mn,O)}catch{}return!0}finally{oe.p=C,Y.T=w,mE(s,l)}}function yE(s,l,p){l=ta(p,l),l=_0(s.stateNode,l,2),s=pl(s,l,2),s!==null&&(Wr(s,2),Wa(s))}function ir(s,l,p){if(s.tag===3)yE(s,s,p);else for(;l!==null;){if(l.tag===3){yE(l,s,p);break}else if(l.tag===1){var w=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(wl===null||!wl.has(w))){s=ta(p,s),p=vx(2),w=pl(l,p,2),w!==null&&(bx(p,w,l,s),Wr(w,2),Wa(w));break}}l=l.return}}function J0(s,l,p){var w=s.pingCache;if(w===null){w=s.pingCache=new HO;var C=new Set;w.set(l,C)}else C=w.get(l),C===void 0&&(C=new Set,w.set(l,C));C.has(p)||(G0=!0,C.add(p),s=$O.bind(null,s,l,p),l.then(s,s))}function $O(s,l,p){var w=s.pingCache;w!==null&&w.delete(l),s.pingedLanes|=s.suspendedLanes&p,s.warmLanes&=~p,Er===s&&(Dn&p)===p&&(ei===4||ei===3&&(Dn&62914560)===Dn&&300>an()-gp?(Yn&2)===0&&wu(s,0):K0|=p,vu===Dn&&(vu=0)),Wa(s)}function vE(s,l){l===0&&(l=_n()),s=Kr(s,l),s!==null&&(Wr(s,l),Wa(s))}function YO(s){var l=s.memoizedState,p=0;l!==null&&(p=l.retryLane),vE(s,p)}function XO(s,l){var p=0;switch(s.tag){case 31:case 13:var w=s.stateNode,C=s.memoizedState;C!==null&&(p=C.retryLane);break;case 19:w=s.stateNode;break;case 22:w=s.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(l),vE(s,p)}function WO(s,l){return ri(s,l)}var Sp=null,Eu=null,eg=!1,Ap=!1,tg=!1,Sl=0;function Wa(s){s!==Eu&&s.next===null&&(Eu===null?Sp=Eu=s:Eu=Eu.next=s),Ap=!0,eg||(eg=!0,ZO())}function Xh(s,l){if(!tg&&Ap){tg=!0;do for(var p=!1,w=Sp;w!==null;){if(s!==0){var C=w.pendingLanes;if(C===0)var O=0;else{var P=w.suspendedLanes,$=w.pingedLanes;O=(1<<31-jt(42|s)+1)-1,O&=C&~(P&~$),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(p=!0,EE(w,O))}else O=Dn,O=Xr(w,w===Er?O:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(O&3)===0||wr(w,O)||(p=!0,EE(w,O));w=w.next}while(p);tg=!1}}function QO(){bE()}function bE(){Ap=eg=!1;var s=0;Sl!==0&&lI()&&(s=Sl);for(var l=an(),p=null,w=Sp;w!==null;){var C=w.next,O=wE(w,l);O===0?(w.next=null,p===null?Sp=C:p.next=C,C===null&&(Eu=p)):(p=w,(s!==0||(O&3)!==0)&&(Ap=!0)),w=C}_i!==0&&_i!==5||Xh(s),Sl!==0&&(Sl=0)}function wE(s,l){for(var p=s.suspendedLanes,w=s.pingedLanes,C=s.expirationTimes,O=s.pendingLanes&-62914561;0<O;){var P=31-jt(O),$=1<<P,me=C[P];me===-1?(($&p)===0||($&w)!==0)&&(C[P]=Yi($,l)):me<=l&&(s.expiredLanes|=$),O&=~$}if(l=Er,p=Dn,p=Xr(s,s===l?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w=s.callbackNode,p===0||s===l&&(rr===2||rr===9)||s.cancelPendingCommit!==null)return w!==null&&w!==null&&ft(w),s.callbackNode=null,s.callbackPriority=0;if((p&3)===0||wr(s,p)){if(l=p&-p,l===s.callbackPriority)return l;switch(w!==null&&ft(w),Xe(p)){case 2:case 8:p=ii;break;case 32:p=Rn;break;case 268435456:p=Sr;break;default:p=Rn}return w=xE.bind(null,s),p=ri(p,w),s.callbackPriority=l,s.callbackNode=p,l}return w!==null&&w!==null&&ft(w),s.callbackPriority=2,s.callbackNode=null,2}function xE(s,l){if(_i!==0&&_i!==5)return s.callbackNode=null,s.callbackPriority=0,null;var p=s.callbackNode;if(Ep()&&s.callbackNode!==p)return null;var w=Dn;return w=Xr(s,s===Er?w:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w===0?null:(nE(s,w,l),wE(s,an()),s.callbackNode!=null&&s.callbackNode===p?xE.bind(null,s):null)}function EE(s,l){if(Ep())return null;nE(s,l,!0)}function ZO(){uI(function(){(Yn&6)!==0?ri(Wn,QO):bE()})}function ng(){if(Sl===0){var s=ou;s===0&&(s=Hr,Hr<<=1,(Hr&261888)===0&&(Hr=256)),Sl=s}return Sl}function SE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:li(""+s)}function AE(s,l){var p=l.ownerDocument.createElement("input");return p.name=l.name,p.value=l.value,s.id&&p.setAttribute("form",s.id),l.parentNode.insertBefore(p,l),s=new FormData(s),p.parentNode.removeChild(p),s}function JO(s,l,p,w,C){if(l==="submit"&&p&&p.stateNode===C){var O=SE((C[nt]||null).action),P=w.submitter;P&&(l=(l=P[nt]||null)?SE(l.formAction):P.getAttribute("formAction"),l!==null&&(O=l,P=null));var $=new pt("action","action",null,w,C);s.push({event:$,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Sl!==0){var me=P?AE(C,P):new FormData(C);E0(p,{pending:!0,data:me,method:C.method,action:O},null,me)}}else typeof O=="function"&&($.preventDefault(),me=P?AE(C,P):new FormData(C),E0(p,{pending:!0,data:me,method:C.method,action:O},O,me))},currentTarget:C}]})}}for(var rg=0;rg<xt.length;rg++){var ig=xt[rg],eI=ig.toLowerCase(),tI=ig[0].toUpperCase()+ig.slice(1);Ut(eI,"on"+tI)}Ut(Me,"onAnimationEnd"),Ut(Pe,"onAnimationIteration"),Ut(Ge,"onAnimationStart"),Ut("dblclick","onDoubleClick"),Ut("focusin","onFocus"),Ut("focusout","onBlur"),Ut(tt,"onTransitionRun"),Ut(et,"onTransitionStart"),Ut(it,"onTransitionCancel"),Ut(ct,"onTransitionEnd"),Un("onMouseEnter",["mouseout","mouseover"]),Un("onMouseLeave",["mouseout","mouseover"]),Un("onPointerEnter",["pointerout","pointerover"]),Un("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wh));function CE(s,l){l=(l&4)!==0;for(var p=0;p<s.length;p++){var w=s[p],C=w.event;w=w.listeners;e:{var O=void 0;if(l)for(var P=w.length-1;0<=P;P--){var $=w[P],me=$.instance,Re=$.currentTarget;if($=$.listener,me!==O&&C.isPropagationStopped())break e;O=$,C.currentTarget=Re;try{O(C)}catch(Ve){fn(Ve)}C.currentTarget=null,O=me}else for(P=0;P<w.length;P++){if($=w[P],me=$.instance,Re=$.currentTarget,$=$.listener,me!==O&&C.isPropagationStopped())break e;O=$,C.currentTarget=Re;try{O(C)}catch(Ve){fn(Ve)}C.currentTarget=null,O=me}}}}function In(s,l){var p=l[yt];p===void 0&&(p=l[yt]=new Set);var w=s+"__bubble";p.has(w)||(TE(l,s,2,!1),p.add(w))}function sg(s,l,p){var w=0;l&&(w|=4),TE(p,s,w,l)}var Cp="_reactListening"+Math.random().toString(36).slice(2);function ag(s){if(!s[Cp]){s[Cp]=!0,qe.forEach(function(p){p!=="selectionchange"&&(nI.has(p)||sg(p,!1,s),sg(p,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Cp]||(l[Cp]=!0,sg("selectionchange",!1,l))}}function TE(s,l,p,w){switch(tS(l)){case 2:var C=II;break;case 8:C=RI;break;default:C=xg}p=C.bind(null,l,p,s),C=void 0,!ms||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(C=!0),w?C!==void 0?s.addEventListener(l,p,{capture:!0,passive:C}):s.addEventListener(l,p,!0):C!==void 0?s.addEventListener(l,p,{passive:C}):s.addEventListener(l,p,!1)}function og(s,l,p,w,C){var O=w;if((l&1)===0&&(l&2)===0&&w!==null)e:for(;;){if(w===null)return;var P=w.tag;if(P===3||P===4){var $=w.stateNode.containerInfo;if($===C)break;if(P===4)for(P=w.return;P!==null;){var me=P.tag;if((me===3||me===4)&&P.stateNode.containerInfo===C)return;P=P.return}for(;$!==null;){if(P=bt($),P===null)return;if(me=P.tag,me===5||me===6||me===26||me===27){w=O=P;continue e}$=$.parentNode}}w=w.return}Bi(function(){var Re=O,Ve=er(p),Qe=[];e:{var Le=ut.get(s);if(Le!==void 0){var Be=pt,Nt=s;switch(s){case"keypress":if(k(p)===0)break e;case"keydown":case"keyup":Be=yo;break;case"focusin":Nt="focus",Be=Ii;break;case"focusout":Nt="blur",Be=Ii;break;case"beforeblur":case"afterblur":Be=Ii;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=Pt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=nr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=ic;break;case Me:case Pe:case Ge:Be=Xt;break;case ct:Be=vs;break;case"scroll":case"scrollend":Be=wn;break;case"wheel":Be=eu;break;case"copy":case"cut":case"paste":Be=rs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=Fn;break;case"toggle":case"beforetoggle":Be=vo}var Gt=(l&4)!==0,gr=!Gt&&(s==="scroll"||s==="scrollend"),Ae=Gt?Le!==null?Le+"Capture":null:Le;Gt=[];for(var we=Re,Ie;we!==null;){var Ye=we;if(Ie=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||Ie===null||Ae===null||(Ye=zt(we,Ae),Ye!=null&&Gt.push(Qh(we,Ye,Ie))),gr)break;we=we.return}0<Gt.length&&(Le=new Be(Le,Nt,null,p,Ve),Qe.push({event:Le,listeners:Gt}))}}if((l&7)===0){e:{if(Le=s==="mouseover"||s==="pointerover",Be=s==="mouseout"||s==="pointerout",Le&&p!==Cr&&(Nt=p.relatedTarget||p.fromElement)&&(bt(Nt)||Nt[gt]))break e;if((Be||Le)&&(Le=Ve.window===Ve?Ve:(Le=Ve.ownerDocument)?Le.defaultView||Le.parentWindow:window,Be?(Nt=p.relatedTarget||p.toElement,Be=Re,Nt=Nt?bt(Nt):null,Nt!==null&&(gr=o(Nt),Gt=Nt.tag,Nt!==gr||Gt!==5&&Gt!==27&&Gt!==6)&&(Nt=null)):(Be=null,Nt=Re),Be!==Nt)){if(Gt=Pt,Ye="onMouseLeave",Ae="onMouseEnter",we="mouse",(s==="pointerout"||s==="pointerover")&&(Gt=Fn,Ye="onPointerLeave",Ae="onPointerEnter",we="pointer"),gr=Be==null?Le:jn(Be),Ie=Nt==null?Le:jn(Nt),Le=new Gt(Ye,we+"leave",Be,p,Ve),Le.target=gr,Le.relatedTarget=Ie,Ye=null,bt(Ve)===Re&&(Gt=new Gt(Ae,we+"enter",Nt,p,Ve),Gt.target=Ie,Gt.relatedTarget=gr,Ye=Gt),gr=Ye,Be&&Nt)t:{for(Gt=rI,Ae=Be,we=Nt,Ie=0,Ye=Ae;Ye;Ye=Gt(Ye))Ie++;Ye=0;for(var Bt=we;Bt;Bt=Gt(Bt))Ye++;for(;0<Ie-Ye;)Ae=Gt(Ae),Ie--;for(;0<Ye-Ie;)we=Gt(we),Ye--;for(;Ie--;){if(Ae===we||we!==null&&Ae===we.alternate){Gt=Ae;break t}Ae=Gt(Ae),we=Gt(we)}Gt=null}else Gt=null;Be!==null&&NE(Qe,Le,Be,Gt,!1),Nt!==null&&gr!==null&&NE(Qe,gr,Nt,Gt,!0)}}e:{if(Le=Re?jn(Re):window,Be=Le.nodeName&&Le.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Le.type==="file")var Vn=Bn;else if(il(Le))if(Eo)Vn=v;else{Vn=u;var Mt=a}else Be=Le.nodeName,!Be||Be.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?Re&&on(Re.elementType)&&(Vn=Bn):Vn=d;if(Vn&&(Vn=Vn(s,Re))){is(Qe,Vn,p,Ve);break e}Mt&&Mt(s,Le,Re),s==="focusout"&&Re&&Le.type==="number"&&Re.memoizedProps.value!=null&&te(Le,"number",Le.value)}switch(Mt=Re?jn(Re):window,s){case"focusin":(il(Mt)||Mt.contentEditable==="true")&&(q=Mt,K=Re,G=null);break;case"focusout":G=K=q=null;break;case"mousedown":Z=!0;break;case"contextmenu":case"mouseup":case"dragend":Z=!1,re(Qe,p,Ve);break;case"selectionchange":if(U)break;case"keydown":case"keyup":re(Qe,p,Ve)}var vn;if(wo)e:{switch(s){case"compositionstart":var Ln="onCompositionStart";break e;case"compositionend":Ln="onCompositionEnd";break e;case"compositionupdate":Ln="onCompositionUpdate";break e}Ln=void 0}else qa?sc(s,p)&&(Ln="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(Ln="onCompositionStart");Ln&&(tu&&p.locale!=="ko"&&(qa||Ln!=="onCompositionStart"?Ln==="onCompositionEnd"&&qa&&(vn=ns()):(gi=Ve,Gr="value"in gi?gi.value:gi.textContent,qa=!0)),Mt=Tp(Re,Ln),0<Mt.length&&(Ln=new tl(Ln,s,null,p,Ve),Qe.push({event:Ln,listeners:Mt}),vn?Ln.data=vn:(vn=Aa(p),vn!==null&&(Ln.data=vn)))),(vn=nl?Ns(s,p):Va(s,p))&&(Ln=Tp(Re,"onBeforeInput"),0<Ln.length&&(Mt=new tl("onBeforeInput","beforeinput",null,p,Ve),Qe.push({event:Mt,listeners:Ln}),Mt.data=vn)),JO(Qe,s,Re,p,Ve)}CE(Qe,l)})}function Qh(s,l,p){return{instance:s,listener:l,currentTarget:p}}function Tp(s,l){for(var p=l+"Capture",w=[];s!==null;){var C=s,O=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||O===null||(C=zt(s,p),C!=null&&w.unshift(Qh(s,C,O)),C=zt(s,l),C!=null&&w.push(Qh(s,C,O))),s.tag===3)return w;s=s.return}return[]}function rI(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function NE(s,l,p,w,C){for(var O=l._reactName,P=[];p!==null&&p!==w;){var $=p,me=$.alternate,Re=$.stateNode;if($=$.tag,me!==null&&me===w)break;$!==5&&$!==26&&$!==27||Re===null||(me=Re,C?(Re=zt(p,O),Re!=null&&P.unshift(Qh(p,Re,me))):C||(Re=zt(p,O),Re!=null&&P.push(Qh(p,Re,me)))),p=p.return}P.length!==0&&s.push({event:l,listeners:P})}var iI=/\r\n?/g,sI=/\u0000|\uFFFD/g;function _E(s){return(typeof s=="string"?s:""+s).replace(iI,`
`).replace(sI,"")}function OE(s,l){return l=_E(l),_E(s)===l}function mr(s,l,p,w,C,O){switch(p){case"children":typeof w=="string"?l==="body"||l==="textarea"&&w===""||qt(s,w):(typeof w=="number"||typeof w=="bigint")&&l!=="body"&&qt(s,""+w);break;case"className":Qr(s,"class",w);break;case"tabIndex":Qr(s,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Qr(s,p,w);break;case"style":At(s,w,O);break;case"data":if(l!=="object"){Qr(s,"data",w);break}case"src":case"href":if(w===""&&(l!=="a"||p!=="href")){s.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(p);break}w=li(""+w),s.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){s.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(p==="formAction"?(l!=="input"&&mr(s,l,"name",C.name,C,null),mr(s,l,"formEncType",C.formEncType,C,null),mr(s,l,"formMethod",C.formMethod,C,null),mr(s,l,"formTarget",C.formTarget,C,null)):(mr(s,l,"encType",C.encType,C,null),mr(s,l,"method",C.method,C,null),mr(s,l,"target",C.target,C,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(p);break}w=li(""+w),s.setAttribute(p,w);break;case"onClick":w!=null&&(s.onclick=Zr);break;case"onScroll":w!=null&&In("scroll",s);break;case"onScrollEnd":w!=null&&In("scrollend",s);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(p=w.__html,p!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=p}}break;case"multiple":s.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":s.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){s.removeAttribute("xlink:href");break}p=li(""+w),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(p,""+w):s.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(p,""):s.removeAttribute(p);break;case"capture":case"download":w===!0?s.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(p,w):s.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?s.setAttribute(p,w):s.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?s.removeAttribute(p):s.setAttribute(p,w);break;case"popover":In("beforetoggle",s),In("toggle",s),Hn(s,"popover",w);break;case"xlinkActuate":ur(s,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":ur(s,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":ur(s,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":ur(s,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":ur(s,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":ur(s,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":ur(s,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":ur(s,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":ur(s,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Hn(s,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ts.get(p)||p,Hn(s,p,w))}}function lg(s,l,p,w,C,O){switch(p){case"style":At(s,w,O);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(p=w.__html,p!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=p}}break;case"children":typeof w=="string"?qt(s,w):(typeof w=="number"||typeof w=="bigint")&&qt(s,""+w);break;case"onScroll":w!=null&&In("scroll",s);break;case"onScrollEnd":w!=null&&In("scrollend",s);break;case"onClick":w!=null&&(s.onclick=Zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(C=p.endsWith("Capture"),l=p.slice(2,C?p.length-7:void 0),O=s[nt]||null,O=O!=null?O[p]:null,typeof O=="function"&&s.removeEventListener(l,O,C),typeof w=="function")){typeof O!="function"&&O!==null&&(p in s?s[p]=null:s.hasAttribute(p)&&s.removeAttribute(p)),s.addEventListener(l,w,C);break e}p in s?s[p]=w:w===!0?s.setAttribute(p,""):Hn(s,p,w)}}}function qi(s,l,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":In("error",s),In("load",s);var w=!1,C=!1,O;for(O in p)if(p.hasOwnProperty(O)){var P=p[O];if(P!=null)switch(O){case"src":w=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:mr(s,l,O,P,p,null)}}C&&mr(s,l,"srcSet",p.srcSet,p,null),w&&mr(s,l,"src",p.src,p,null);return;case"input":In("invalid",s);var $=O=P=C=null,me=null,Re=null;for(w in p)if(p.hasOwnProperty(w)){var Ve=p[w];if(Ve!=null)switch(w){case"name":C=Ve;break;case"type":P=Ve;break;case"checked":me=Ve;break;case"defaultChecked":Re=Ve;break;case"value":O=Ve;break;case"defaultValue":$=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(r(137,l));break;default:mr(s,l,w,Ve,p,null)}}_e(s,O,$,me,Re,P,C,!1);return;case"select":In("invalid",s),w=P=O=null;for(C in p)if(p.hasOwnProperty(C)&&($=p[C],$!=null))switch(C){case"value":O=$;break;case"defaultValue":P=$;break;case"multiple":w=$;default:mr(s,l,C,$,p,null)}l=O,p=P,s.multiple=!!w,l!=null?wt(s,!!w,l,!1):p!=null&&wt(s,!!w,p,!0);return;case"textarea":In("invalid",s),O=C=w=null;for(P in p)if(p.hasOwnProperty(P)&&($=p[P],$!=null))switch(P){case"value":w=$;break;case"defaultValue":C=$;break;case"children":O=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(r(91));break;default:mr(s,l,P,$,p,null)}Jn(s,w,C,O);return;case"option":for(me in p)p.hasOwnProperty(me)&&(w=p[me],w!=null)&&(me==="selected"?s.selected=w&&typeof w!="function"&&typeof w!="symbol":mr(s,l,me,w,p,null));return;case"dialog":In("beforetoggle",s),In("toggle",s),In("cancel",s),In("close",s);break;case"iframe":case"object":In("load",s);break;case"video":case"audio":for(w=0;w<Wh.length;w++)In(Wh[w],s);break;case"image":In("error",s),In("load",s);break;case"details":In("toggle",s);break;case"embed":case"source":case"link":In("error",s),In("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in p)if(p.hasOwnProperty(Re)&&(w=p[Re],w!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:mr(s,l,Re,w,p,null)}return;default:if(on(l)){for(Ve in p)p.hasOwnProperty(Ve)&&(w=p[Ve],w!==void 0&&lg(s,l,Ve,w,p,void 0));return}}for($ in p)p.hasOwnProperty($)&&(w=p[$],w!=null&&mr(s,l,$,w,p,null))}function aI(s,l,p,w){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,O=null,P=null,$=null,me=null,Re=null,Ve=null;for(Be in p){var Qe=p[Be];if(p.hasOwnProperty(Be)&&Qe!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":me=Qe;default:w.hasOwnProperty(Be)||mr(s,l,Be,null,w,Qe)}}for(var Le in w){var Be=w[Le];if(Qe=p[Le],w.hasOwnProperty(Le)&&(Be!=null||Qe!=null))switch(Le){case"type":O=Be;break;case"name":C=Be;break;case"checked":Re=Be;break;case"defaultChecked":Ve=Be;break;case"value":P=Be;break;case"defaultValue":$=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(137,l));break;default:Be!==Qe&&mr(s,l,Le,Be,w,Qe)}}Zn(s,P,$,me,Re,Ve,O,C);return;case"select":Be=P=$=Le=null;for(O in p)if(me=p[O],p.hasOwnProperty(O)&&me!=null)switch(O){case"value":break;case"multiple":Be=me;default:w.hasOwnProperty(O)||mr(s,l,O,null,w,me)}for(C in w)if(O=w[C],me=p[C],w.hasOwnProperty(C)&&(O!=null||me!=null))switch(C){case"value":Le=O;break;case"defaultValue":$=O;break;case"multiple":P=O;default:O!==me&&mr(s,l,C,O,w,me)}l=$,p=P,w=Be,Le!=null?wt(s,!!p,Le,!1):!!w!=!!p&&(l!=null?wt(s,!!p,l,!0):wt(s,!!p,p?[]:"",!1));return;case"textarea":Be=Le=null;for($ in p)if(C=p[$],p.hasOwnProperty($)&&C!=null&&!w.hasOwnProperty($))switch($){case"value":break;case"children":break;default:mr(s,l,$,null,w,C)}for(P in w)if(C=w[P],O=p[P],w.hasOwnProperty(P)&&(C!=null||O!=null))switch(P){case"value":Le=C;break;case"defaultValue":Be=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==O&&mr(s,l,P,C,w,O)}qn(s,Le,Be);return;case"option":for(var Nt in p)Le=p[Nt],p.hasOwnProperty(Nt)&&Le!=null&&!w.hasOwnProperty(Nt)&&(Nt==="selected"?s.selected=!1:mr(s,l,Nt,null,w,Le));for(me in w)Le=w[me],Be=p[me],w.hasOwnProperty(me)&&Le!==Be&&(Le!=null||Be!=null)&&(me==="selected"?s.selected=Le&&typeof Le!="function"&&typeof Le!="symbol":mr(s,l,me,Le,w,Be));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in p)Le=p[Gt],p.hasOwnProperty(Gt)&&Le!=null&&!w.hasOwnProperty(Gt)&&mr(s,l,Gt,null,w,Le);for(Re in w)if(Le=w[Re],Be=p[Re],w.hasOwnProperty(Re)&&Le!==Be&&(Le!=null||Be!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(r(137,l));break;default:mr(s,l,Re,Le,w,Be)}return;default:if(on(l)){for(var gr in p)Le=p[gr],p.hasOwnProperty(gr)&&Le!==void 0&&!w.hasOwnProperty(gr)&&lg(s,l,gr,void 0,w,Le);for(Ve in w)Le=w[Ve],Be=p[Ve],!w.hasOwnProperty(Ve)||Le===Be||Le===void 0&&Be===void 0||lg(s,l,Ve,Le,w,Be);return}}for(var Ae in p)Le=p[Ae],p.hasOwnProperty(Ae)&&Le!=null&&!w.hasOwnProperty(Ae)&&mr(s,l,Ae,null,w,Le);for(Qe in w)Le=w[Qe],Be=p[Qe],!w.hasOwnProperty(Qe)||Le===Be||Le==null&&Be==null||mr(s,l,Qe,Le,w,Be)}function IE(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oI(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,p=performance.getEntriesByType("resource"),w=0;w<p.length;w++){var C=p[w],O=C.transferSize,P=C.initiatorType,$=C.duration;if(O&&$&&IE(P)){for(P=0,$=C.responseEnd,w+=1;w<p.length;w++){var me=p[w],Re=me.startTime;if(Re>$)break;var Ve=me.transferSize,Qe=me.initiatorType;Ve&&IE(Qe)&&(me=me.responseEnd,P+=Ve*(me<$?1:($-Re)/(me-Re)))}if(--w,l+=8*(O+P)/(C.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var cg=null,ug=null;function Np(s){return s.nodeType===9?s:s.ownerDocument}function RE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ME(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function hg(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var fg=null;function lI(){var s=window.event;return s&&s.type==="popstate"?s===fg?!1:(fg=s,!0):(fg=null,!1)}var DE=typeof setTimeout=="function"?setTimeout:void 0,cI=typeof clearTimeout=="function"?clearTimeout:void 0,LE=typeof Promise=="function"?Promise:void 0,uI=typeof queueMicrotask=="function"?queueMicrotask:typeof LE<"u"?function(s){return LE.resolve(null).then(s).catch(hI)}:DE;function hI(s){setTimeout(function(){throw s})}function Al(s){return s==="head"}function kE(s,l){var p=l,w=0;do{var C=p.nextSibling;if(s.removeChild(p),C&&C.nodeType===8)if(p=C.data,p==="/$"||p==="/&"){if(w===0){s.removeChild(C),Tu(l);return}w--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")w++;else if(p==="html")Zh(s.ownerDocument.documentElement);else if(p==="head"){p=s.ownerDocument.head,Zh(p);for(var O=p.firstChild;O;){var P=O.nextSibling,$=O.nodeName;O[zn]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&O.rel.toLowerCase()==="stylesheet"||p.removeChild(O),O=P}}else p==="body"&&Zh(s.ownerDocument.body);p=C}while(p);Tu(l)}function jE(s,l){var p=s;s=0;do{var w=p.nextSibling;if(p.nodeType===1?l?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(l?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(s===0)break;s--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||s++;p=w}while(p)}function dg(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var p=l;switch(l=l.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":dg(p),gn(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}s.removeChild(p)}}function fI(s,l,p,w){for(;s.nodeType===1;){var C=p;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!w&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(w){if(!s[zn])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(O=s.getAttribute("rel"),O==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(O!==C.rel||s.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||s.getAttribute("title")!==(C.title==null?null:C.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(O=s.getAttribute("src"),(O!==(C.src==null?null:C.src)||s.getAttribute("type")!==(C.type==null?null:C.type)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&O&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var O=C.name==null?null:""+C.name;if(C.type==="hidden"&&s.getAttribute("name")===O)return s}else return s;if(s=aa(s.nextSibling),s===null)break}return null}function dI(s,l,p){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!p||(s=aa(s.nextSibling),s===null))return null;return s}function BE(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=aa(s.nextSibling),s===null))return null;return s}function pg(s){return s.data==="$?"||s.data==="$~"}function mg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function pI(s,l){var p=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||p.readyState!=="loading")l();else{var w=function(){l(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),s._reactRetry=w}}function aa(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var gg=null;function PE(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"||p==="/&"){if(l===0)return aa(s.nextSibling);l--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||l++}s=s.nextSibling}return null}function UE(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(l===0)return s;l--}else p!=="/$"&&p!=="/&"||l++}s=s.previousSibling}return null}function FE(s,l,p){switch(l=Np(p),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Zh(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);gn(s)}var oa=new Map,zE=new Set;function _p(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Bo=oe.d;oe.d={f:mI,r:gI,D:yI,C:vI,L:bI,m:wI,X:EI,S:xI,M:SI};function mI(){var s=Bo.f(),l=bp();return s||l}function gI(s){var l=Et(s);l!==null&&l.tag===5&&l.type==="form"?ix(l):Bo.r(s)}var Su=typeof document>"u"?null:document;function HE(s,l,p){var w=Su;if(w&&typeof l=="string"&&l){var C=rn(l);C='link[rel="'+s+'"][href="'+C+'"]',typeof p=="string"&&(C+='[crossorigin="'+p+'"]'),zE.has(C)||(zE.add(C),s={rel:s,crossOrigin:p,href:l},w.querySelector(C)===null&&(l=w.createElement("link"),qi(l,"link",s),En(l),w.head.appendChild(l)))}}function yI(s){Bo.D(s),HE("dns-prefetch",s,null)}function vI(s,l){Bo.C(s,l),HE("preconnect",s,l)}function bI(s,l,p){Bo.L(s,l,p);var w=Su;if(w&&s&&l){var C='link[rel="preload"][as="'+rn(l)+'"]';l==="image"&&p&&p.imageSrcSet?(C+='[imagesrcset="'+rn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(C+='[imagesizes="'+rn(p.imageSizes)+'"]')):C+='[href="'+rn(s)+'"]';var O=C;switch(l){case"style":O=Au(s);break;case"script":O=Cu(s)}oa.has(O)||(s=S({rel:"preload",href:l==="image"&&p&&p.imageSrcSet?void 0:s,as:l},p),oa.set(O,s),w.querySelector(C)!==null||l==="style"&&w.querySelector(Jh(O))||l==="script"&&w.querySelector(ef(O))||(l=w.createElement("link"),qi(l,"link",s),En(l),w.head.appendChild(l)))}}function wI(s,l){Bo.m(s,l);var p=Su;if(p&&s){var w=l&&typeof l.as=="string"?l.as:"script",C='link[rel="modulepreload"][as="'+rn(w)+'"][href="'+rn(s)+'"]',O=C;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Cu(s)}if(!oa.has(O)&&(s=S({rel:"modulepreload",href:s},l),oa.set(O,s),p.querySelector(C)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(ef(O)))return}w=p.createElement("link"),qi(w,"link",s),En(w),p.head.appendChild(w)}}}function xI(s,l,p){Bo.S(s,l,p);var w=Su;if(w&&s){var C=Xn(w).hoistableStyles,O=Au(s);l=l||"default";var P=C.get(O);if(!P){var $={loading:0,preload:null};if(P=w.querySelector(Jh(O)))$.loading=5;else{s=S({rel:"stylesheet",href:s,"data-precedence":l},p),(p=oa.get(O))&&yg(s,p);var me=P=w.createElement("link");En(me),qi(me,"link",s),me._p=new Promise(function(Re,Ve){me.onload=Re,me.onerror=Ve}),me.addEventListener("load",function(){$.loading|=1}),me.addEventListener("error",function(){$.loading|=2}),$.loading|=4,Op(P,l,w)}P={type:"stylesheet",instance:P,count:1,state:$},C.set(O,P)}}}function EI(s,l){Bo.X(s,l);var p=Su;if(p&&s){var w=Xn(p).hoistableScripts,C=Cu(s),O=w.get(C);O||(O=p.querySelector(ef(C)),O||(s=S({src:s,async:!0},l),(l=oa.get(C))&&vg(s,l),O=p.createElement("script"),En(O),qi(O,"link",s),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},w.set(C,O))}}function SI(s,l){Bo.M(s,l);var p=Su;if(p&&s){var w=Xn(p).hoistableScripts,C=Cu(s),O=w.get(C);O||(O=p.querySelector(ef(C)),O||(s=S({src:s,async:!0,type:"module"},l),(l=oa.get(C))&&vg(s,l),O=p.createElement("script"),En(O),qi(O,"link",s),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},w.set(C,O))}}function qE(s,l,p,w){var C=(C=Fe.current)?_p(C):null;if(!C)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(l=Au(p.href),p=Xn(C).hoistableStyles,w=p.get(l),w||(w={type:"style",instance:null,count:0,state:null},p.set(l,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){s=Au(p.href);var O=Xn(C).hoistableStyles,P=O.get(s);if(P||(C=C.ownerDocument||C,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(s,P),(O=C.querySelector(Jh(s)))&&!O._p&&(P.instance=O,P.state.loading=5),oa.has(s)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},oa.set(s,p),O||AI(C,s,p,P.state))),l&&w===null)throw Error(r(528,""));return P}if(l&&w!==null)throw Error(r(529,""));return null;case"script":return l=p.async,p=p.src,typeof p=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Cu(p),p=Xn(C).hoistableScripts,w=p.get(l),w||(w={type:"script",instance:null,count:0,state:null},p.set(l,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Au(s){return'href="'+rn(s)+'"'}function Jh(s){return'link[rel="stylesheet"]['+s+"]"}function VE(s){return S({},s,{"data-precedence":s.precedence,precedence:null})}function AI(s,l,p,w){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?w.loading=1:(l=s.createElement("link"),w.preload=l,l.addEventListener("load",function(){return w.loading|=1}),l.addEventListener("error",function(){return w.loading|=2}),qi(l,"link",p),En(l),s.head.appendChild(l))}function Cu(s){return'[src="'+rn(s)+'"]'}function ef(s){return"script[async]"+s}function GE(s,l,p){if(l.count++,l.instance===null)switch(l.type){case"style":var w=s.querySelector('style[data-href~="'+rn(p.href)+'"]');if(w)return l.instance=w,En(w),w;var C=S({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(s.ownerDocument||s).createElement("style"),En(w),qi(w,"style",C),Op(w,p.precedence,s),l.instance=w;case"stylesheet":C=Au(p.href);var O=s.querySelector(Jh(C));if(O)return l.state.loading|=4,l.instance=O,En(O),O;w=VE(p),(C=oa.get(C))&&yg(w,C),O=(s.ownerDocument||s).createElement("link"),En(O);var P=O;return P._p=new Promise(function($,me){P.onload=$,P.onerror=me}),qi(O,"link",w),l.state.loading|=4,Op(O,p.precedence,s),l.instance=O;case"script":return O=Cu(p.src),(C=s.querySelector(ef(O)))?(l.instance=C,En(C),C):(w=p,(C=oa.get(O))&&(w=S({},p),vg(w,C)),s=s.ownerDocument||s,C=s.createElement("script"),En(C),qi(C,"link",w),s.head.appendChild(C),l.instance=C);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(w=l.instance,l.state.loading|=4,Op(w,p.precedence,s));return l.instance}function Op(s,l,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=w.length?w[w.length-1]:null,O=C,P=0;P<w.length;P++){var $=w[P];if($.dataset.precedence===l)O=$;else if(O!==C)break}O?O.parentNode.insertBefore(s,O.nextSibling):(l=p.nodeType===9?p.head:p,l.insertBefore(s,l.firstChild))}function yg(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function vg(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Ip=null;function KE(s,l,p){if(Ip===null){var w=new Map,C=Ip=new Map;C.set(p,w)}else C=Ip,w=C.get(p),w||(w=new Map,C.set(p,w));if(w.has(s))return w;for(w.set(s,null),p=p.getElementsByTagName(s),C=0;C<p.length;C++){var O=p[C];if(!(O[zn]||O[ot]||s==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var P=O.getAttribute(l)||"";P=s+P;var $=w.get(P);$?$.push(O):w.set(P,[O])}}return w}function $E(s,l,p){s=s.ownerDocument||s,s.head.insertBefore(p,l==="title"?s.querySelector("head > title"):null)}function CI(s,l,p){if(p===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(s=l.disabled,typeof l.precedence=="string"&&s==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function YE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function TI(s,l,p,w){if(p.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var C=Au(w.href),O=l.querySelector(Jh(C));if(O){l=O._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Rp.bind(s),l.then(s,s)),p.state.loading|=4,p.instance=O,En(O);return}O=l.ownerDocument||l,w=VE(w),(C=oa.get(C))&&yg(w,C),O=O.createElement("link"),En(O);var P=O;P._p=new Promise(function($,me){P.onload=$,P.onerror=me}),qi(O,"link",w),p.instance=O}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(p,l),(l=p.state.preload)&&(p.state.loading&3)===0&&(s.count++,p=Rp.bind(s),l.addEventListener("load",p),l.addEventListener("error",p))}}var bg=0;function NI(s,l){return s.stylesheets&&s.count===0&&Dp(s,s.stylesheets),0<s.count||0<s.imgCount?function(p){var w=setTimeout(function(){if(s.stylesheets&&Dp(s,s.stylesheets),s.unsuspend){var O=s.unsuspend;s.unsuspend=null,O()}},6e4+l);0<s.imgBytes&&bg===0&&(bg=62500*oI());var C=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Dp(s,s.stylesheets),s.unsuspend)){var O=s.unsuspend;s.unsuspend=null,O()}},(s.imgBytes>bg?50:800)+l);return s.unsuspend=p,function(){s.unsuspend=null,clearTimeout(w),clearTimeout(C)}}:null}function Rp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Mp=null;function Dp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Mp=new Map,l.forEach(_I,s),Mp=null,Rp.call(s))}function _I(s,l){if(!(l.state.loading&4)){var p=Mp.get(s);if(p)var w=p.get(null);else{p=new Map,Mp.set(s,p);for(var C=s.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<C.length;O++){var P=C[O];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(p.set(P.dataset.precedence,P),w=P)}w&&p.set(null,w)}C=l.instance,P=C.getAttribute("data-precedence"),O=p.get(P)||w,O===w&&p.set(null,C),p.set(P,C),this.count++,w=Rp.bind(this),C.addEventListener("load",w),C.addEventListener("error",w),O?O.parentNode.insertBefore(C,O.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(C,s.firstChild)),l.state.loading|=4}}var tf={$$typeof:V,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function OI(s,l,p,w,C,O,P,$,me){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kn(0),this.hiddenUpdates=Kn(null),this.identifierPrefix=w,this.onUncaughtError=C,this.onCaughtError=O,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function XE(s,l,p,w,C,O,P,$,me,Re,Ve,Qe){return s=new OI(s,l,p,P,me,Re,Ve,Qe,$),l=1,O===!0&&(l|=24),O=_s(3,null,null,l),s.current=O,O.stateNode=s,l=Z1(),l.refCount++,s.pooledCache=l,l.refCount++,O.memoizedState={element:w,isDehydrated:p,cache:l},n0(O),s}function WE(s){return s?(s=nu,s):nu}function QE(s,l,p,w,C,O){C=WE(C),w.context===null?w.context=C:w.pendingContext=C,w=dl(l),w.payload={element:p},O=O===void 0?null:O,O!==null&&(w.callback=O),p=pl(s,w,l),p!==null&&(As(p,s,l),Dh(p,s,l))}function ZE(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<l?p:l}}function wg(s,l){ZE(s,l),(s=s.alternate)&&ZE(s,l)}function JE(s){if(s.tag===13||s.tag===31){var l=Kr(s,67108864);l!==null&&As(l,s,67108864),wg(s,67108864)}}function eS(s){if(s.tag===13||s.tag===31){var l=Ds();l=Te(l);var p=Kr(s,l);p!==null&&As(p,s,l),wg(s,l)}}var Lp=!0;function II(s,l,p,w){var C=Y.T;Y.T=null;var O=oe.p;try{oe.p=2,xg(s,l,p,w)}finally{oe.p=O,Y.T=C}}function RI(s,l,p,w){var C=Y.T;Y.T=null;var O=oe.p;try{oe.p=8,xg(s,l,p,w)}finally{oe.p=O,Y.T=C}}function xg(s,l,p,w){if(Lp){var C=Eg(w);if(C===null)og(s,l,w,kp,p),nS(s,w);else if(DI(C,s,l,p,w))w.stopPropagation();else if(nS(s,w),l&4&&-1<MI.indexOf(s)){for(;C!==null;){var O=Et(C);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var P=ai(O.pendingLanes);if(P!==0){var $=O;for($.pendingLanes|=2,$.entangledLanes|=2;P;){var me=1<<31-jt(P);$.entanglements[1]|=me,P&=~me}Wa(O),(Yn&6)===0&&(yp=an()+500,Xh(0))}}break;case 31:case 13:$=Kr(O,2),$!==null&&As($,O,2),bp(),wg(O,2)}if(O=Eg(w),O===null&&og(s,l,w,kp,p),O===C)break;C=O}C!==null&&w.stopPropagation()}else og(s,l,w,null,p)}}function Eg(s){return s=er(s),Sg(s)}var kp=null;function Sg(s){if(kp=null,s=bt(s),s!==null){var l=o(s);if(l===null)s=null;else{var p=l.tag;if(p===13){if(s=h(l),s!==null)return s;s=null}else if(p===31){if(s=m(l),s!==null)return s;s=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return kp=s,null}function tS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jr()){case Wn:return 2;case ii:return 8;case Rn:case Nn:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var Ag=!1,Cl=null,Tl=null,Nl=null,nf=new Map,rf=new Map,_l=[],MI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nS(s,l){switch(s){case"focusin":case"focusout":Cl=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":nf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":rf.delete(l.pointerId)}}function sf(s,l,p,w,C,O){return s===null||s.nativeEvent!==O?(s={blockedOn:l,domEventName:p,eventSystemFlags:w,nativeEvent:O,targetContainers:[C]},l!==null&&(l=Et(l),l!==null&&JE(l)),s):(s.eventSystemFlags|=w,l=s.targetContainers,C!==null&&l.indexOf(C)===-1&&l.push(C),s)}function DI(s,l,p,w,C){switch(l){case"focusin":return Cl=sf(Cl,s,l,p,w,C),!0;case"dragenter":return Tl=sf(Tl,s,l,p,w,C),!0;case"mouseover":return Nl=sf(Nl,s,l,p,w,C),!0;case"pointerover":var O=C.pointerId;return nf.set(O,sf(nf.get(O)||null,s,l,p,w,C)),!0;case"gotpointercapture":return O=C.pointerId,rf.set(O,sf(rf.get(O)||null,s,l,p,w,C)),!0}return!1}function rS(s){var l=bt(s.target);if(l!==null){var p=o(l);if(p!==null){if(l=p.tag,l===13){if(l=h(p),l!==null){s.blockedOn=l,Ue(s.priority,function(){eS(p)});return}}else if(l===31){if(l=m(p),l!==null){s.blockedOn=l,Ue(s.priority,function(){eS(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function jp(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var p=Eg(s.nativeEvent);if(p===null){p=s.nativeEvent;var w=new p.constructor(p.type,p);Cr=w,p.target.dispatchEvent(w),Cr=null}else return l=Et(p),l!==null&&JE(l),s.blockedOn=p,!1;l.shift()}return!0}function iS(s,l,p){jp(s)&&p.delete(l)}function LI(){Ag=!1,Cl!==null&&jp(Cl)&&(Cl=null),Tl!==null&&jp(Tl)&&(Tl=null),Nl!==null&&jp(Nl)&&(Nl=null),nf.forEach(iS),rf.forEach(iS)}function Bp(s,l){s.blockedOn===l&&(s.blockedOn=null,Ag||(Ag=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,LI)))}var Pp=null;function sS(s){Pp!==s&&(Pp=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pp===s&&(Pp=null);for(var l=0;l<s.length;l+=3){var p=s[l],w=s[l+1],C=s[l+2];if(typeof w!="function"){if(Sg(w||p)===null)continue;break}var O=Et(p);O!==null&&(s.splice(l,3),l-=3,E0(O,{pending:!0,data:C,method:p.method,action:w},w,C))}}))}function Tu(s){function l(me){return Bp(me,s)}Cl!==null&&Bp(Cl,s),Tl!==null&&Bp(Tl,s),Nl!==null&&Bp(Nl,s),nf.forEach(l),rf.forEach(l);for(var p=0;p<_l.length;p++){var w=_l[p];w.blockedOn===s&&(w.blockedOn=null)}for(;0<_l.length&&(p=_l[0],p.blockedOn===null);)rS(p),p.blockedOn===null&&_l.shift();if(p=(s.ownerDocument||s).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var C=p[w],O=p[w+1],P=C[nt]||null;if(typeof O=="function")P||sS(p);else if(P){var $=null;if(O&&O.hasAttribute("formAction")){if(C=O,P=O[nt]||null)$=P.formAction;else if(Sg(C)!==null)continue}else $=P.action;typeof $=="function"?p[w+1]=$:(p.splice(w,3),w-=3),sS(p)}}}function aS(){function s(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(P){return C=P})},focusReset:"manual",scroll:"manual"})}function l(){C!==null&&(C(),C=null),w||setTimeout(p,20)}function p(){if(!w&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,C=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(p,100),function(){w=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),C!==null&&(C(),C=null)}}}function Cg(s){this._internalRoot=s}Up.prototype.render=Cg.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var p=l.current,w=Ds();QE(p,w,s,l,null,null)},Up.prototype.unmount=Cg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;QE(s.current,2,null,s,null,null),bp(),l[gt]=null}};function Up(s){this._internalRoot=s}Up.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ke();s={blockedOn:null,target:s,priority:l};for(var p=0;p<_l.length&&l!==0&&l<_l[p].priority;p++);_l.splice(p,0,s),p===0&&rS(s)}};var oS=e.version;if(oS!=="19.2.3")throw Error(r(527,oS,"19.2.3"));oe.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(l),s=s!==null?E(s):null,s=s===null?null:s.stateNode,s};var kI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fp.isDisabled&&Fp.supportsFiber)try{Mn=Fp.inject(kI),$e=Fp}catch{}}return of.createRoot=function(s,l){if(!i(s))throw Error(r(299));var p=!1,w="",C=px,O=mx,P=gx;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(O=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError)),l=XE(s,1,!1,null,null,p,w,null,C,O,P,aS),s[gt]=l.current,ag(s),new Cg(l)},of.hydrateRoot=function(s,l,p){if(!i(s))throw Error(r(299));var w=!1,C="",O=px,P=mx,$=gx,me=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(O=p.onUncaughtError),p.onCaughtError!==void 0&&(P=p.onCaughtError),p.onRecoverableError!==void 0&&($=p.onRecoverableError),p.formState!==void 0&&(me=p.formState)),l=XE(s,1,!0,l,p??null,w,C,me,O,P,$,aS),l.context=WE(null),p=l.current,w=Ds(),w=Te(w),C=dl(w),C.callback=null,pl(p,C,w),p=w,l.current.lanes=p,Wr(l,p),Wa(l),s[gt]=l.current,ag(s),new Up(l)},of.version="19.2.3",of}var yS;function GI(){if(yS)return Ng.exports;yS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ng.exports=VI(),Ng.exports}var KI=GI();const $I=Zl(KI);var W=gh();const Ra=Zl(W),YI=S6({__proto__:null,default:Ra},[W]);var C6=t=>{throw TypeError(t)},XI=(t,e,n)=>e.has(t)||C6("Cannot "+n),Mg=(t,e,n)=>(XI(t,e,"read from private field"),n?n.call(t):e.get(t)),WI=(t,e,n)=>e.has(t)?C6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),vS="popstate";function QI(t={}){function e(i,o){let{pathname:h="/",search:m="",hash:y=""}=Wo(i.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Ff("",{pathname:h,search:m,hash:y},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let h=i.document.querySelector("base"),m="";if(h&&h.getAttribute("href")){let y=i.location.href,g=y.indexOf("#");m=g===-1?y:y.slice(0,g)}return m+"#"+(typeof o=="string"?o:ao(o))}function r(i,o){zr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return JI(e,n,r,t)}function An(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZI(){return Math.random().toString(36).substring(2,10)}function bS(t,e){return{usr:t.state,key:t.key,idx:e}}function Ff(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Wo(e):e,state:n,key:e&&e.key||r||ZI()}}function ao({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Wo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function JI(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,h=i.history,m="POP",y=null,g=E();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function E(){return(h.state||{idx:null}).idx}function S(){m="POP";let j=E(),B=j==null?null:j-g;g=j,y&&y({action:m,location:D.location,delta:B})}function N(j,B){m="PUSH";let H=Ff(D.location,j,B);n&&n(H,j),g=E()+1;let V=bS(H,g),se=D.createHref(H);try{h.pushState(V,"",se)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;i.location.assign(se)}o&&y&&y({action:m,location:D.location,delta:1})}function I(j,B){m="REPLACE";let H=Ff(D.location,j,B);n&&n(H,j),g=E();let V=bS(H,g),se=D.createHref(H);h.replaceState(V,"",se),o&&y&&y({action:m,location:D.location,delta:0})}function R(j){return T6(j)}let D={get action(){return m},get location(){return t(i,h)},listen(j){if(y)throw new Error("A history only accepts one active listener");return i.addEventListener(vS,S),y=j,()=>{i.removeEventListener(vS,S),y=null}},createHref(j){return e(i,j)},createURL:R,encodeLocation(j){let B=R(j);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:N,replace:I,go(j){return h.go(j)}};return D}function T6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),An(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ao(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var gf,wS=class{constructor(t){if(WI(this,gf,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(Mg(this,gf).has(t))return Mg(this,gf).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){Mg(this,gf).set(t,e)}};gf=new WeakMap;var eR=new Set(["lazy","caseSensitive","path","id","index","children"]);function tR(t){return eR.has(t)}var nR=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function rR(t){return nR.has(t)}function iR(t){return t.index===!0}function zf(t,e,n=[],r={},i=!1){return t.map((o,h)=>{let m=[...n,String(h)],y=typeof o.id=="string"?o.id:m.join("-");if(An(o.index!==!0||!o.children,"Cannot specify children on an index route"),An(i||!r[y],`Found a route id collision on id "${y}".  Route id's must be globally unique within Data Router usages`),iR(o)){let g={...o,id:y};return r[y]=xS(g,e(g)),g}else{let g={...o,id:y,children:void 0};return r[y]=xS(g,e(g)),o.children&&(g.children=zf(o.children,e,m,r,i)),g}})}function xS(t,e){return Object.assign(t,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...t.lazy,...e.lazy}}:{}})}function Ll(t,e,n="/"){return yf(t,e,n,!1)}function yf(t,e,n,r){let i=typeof e=="string"?Wo(e):e,o=wa(i.pathname||"/",n);if(o==null)return null;let h=N6(t);aR(h);let m=null;for(let y=0;m==null&&y<h.length;++y){let g=yR(o);m=mR(h[y],g,r)}return m}function sR(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function N6(t,e=[],n=[],r="",i=!1){let o=(h,m,y=i,g)=>{let E={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(r)&&y)return;An(E.relativePath.startsWith(r),`Absolute route path "${E.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(r.length)}let S=no([r,E.relativePath]),N=n.concat(E);h.children&&h.children.length>0&&(An(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),N6(h.children,e,N,S,y)),!(h.path==null&&!h.index)&&e.push({path:S,score:dR(S,h.index),routesMeta:N})};return t.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))o(h,m);else for(let y of _6(h.path))o(h,m,!0,y)}),e}function _6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let h=_6(r.join("/")),m=[];return m.push(...h.map(y=>y===""?o:[o,y].join("/"))),i&&m.push(...h),m.map(y=>t.startsWith("/")&&y===""?"/":y)}function aR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:pR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var oR=/^:[\w-]+$/,lR=3,cR=2,uR=1,hR=10,fR=-2,ES=t=>t==="*";function dR(t,e){let n=t.split("/"),r=n.length;return n.some(ES)&&(r+=fR),e&&(r+=cR),n.filter(i=>!ES(i)).reduce((i,o)=>i+(oR.test(o)?lR:o===""?uR:hR),r)}function pR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function mR(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",h=[];for(let m=0;m<r.length;++m){let y=r[m],g=m===r.length-1,E=o==="/"?e:e.slice(o.length)||"/",S=Nm({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},E),N=y.route;if(!S&&g&&n&&!r[r.length-1].route.index&&(S=Nm({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},E)),!S)return null;Object.assign(i,S.params),h.push({params:i,pathname:no([o,S.pathname]),pathnameBase:wR(no([o,S.pathnameBase])),route:N}),S.pathnameBase!=="/"&&(o=no([o,S.pathnameBase]))}return h}function Nm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=gR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],h=o.replace(/(.)\/+$/,"$1"),m=i.slice(1);return{params:r.reduce((g,{paramName:E,isOptional:S},N)=>{if(E==="*"){let R=m[N]||"";h=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const I=m[N];return S&&!I?g[E]=void 0:g[E]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:h,pattern:t}}function gR(t,e=!1,n=!0){zr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,y)=>(r.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function yR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function wa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function vR({basename:t,pathname:e}){return e==="/"?t:no([t,e])}var O6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,c1=t=>O6.test(t);function bR(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wo(t):t,o;if(n)if(c1(n))o=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),zr(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?o=SS(n.substring(1),"/"):o=SS(n,e)}else o=e;return{pathname:o,search:xR(r),hash:ER(i)}}function SS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Dg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function I6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function u1(t){let e=I6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function h1(t,e,n,r=!1){let i;typeof t=="string"?i=Wo(t):(i={...t},An(!i.pathname||!i.pathname.includes("?"),Dg("?","pathname","search",i)),An(!i.pathname||!i.pathname.includes("#"),Dg("#","pathname","hash",i)),An(!i.search||!i.search.includes("#"),Dg("#","search","hash",i)));let o=t===""||i.pathname==="",h=o?"/":i.pathname,m;if(h==null)m=n;else{let S=e.length-1;if(!r&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),S-=1;i.pathname=N.join("/")}m=S>=0?e[S]:"/"}let y=bR(i,m),g=h&&h!=="/"&&h.endsWith("/"),E=(o||h===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(g||E)&&(y.pathname+="/"),y}var no=t=>t.join("/").replace(/\/\/+/g,"/"),wR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ER=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,pd=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Hf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function md(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var R6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function M6(t,e){let n=t;if(typeof n!="string"||!O6.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(R6)try{let o=new URL(window.location.href),h=n.startsWith("//")?new URL(o.protocol+n):new URL(n),m=wa(h.pathname,e);h.origin===o.origin&&m!=null?n=m+h.search+h.hash:i=!0}catch{zr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}var Bl=Symbol("Uninstrumented");function SR(t,e){let n={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};t.forEach(i=>i({id:e.id,index:e.index,path:e.path,instrument(o){let h=Object.keys(n);for(let m of h)o[m]&&n[m].push(o[m])}}));let r={};if(typeof e.lazy=="function"&&n.lazy.length>0){let i=Pu(n.lazy,e.lazy,()=>{});i&&(r.lazy=i)}if(typeof e.lazy=="object"){let i=e.lazy;["middleware","loader","action"].forEach(o=>{let h=i[o],m=n[`lazy.${o}`];if(typeof h=="function"&&m.length>0){let y=Pu(m,h,()=>{});y&&(r.lazy=Object.assign(r.lazy||{},{[o]:y}))}})}return["loader","action"].forEach(i=>{let o=e[i];if(typeof o=="function"&&n[i].length>0){let h=o[Bl]??o,m=Pu(n[i],h,(...y)=>AS(y[0]));m&&(m[Bl]=h,r[i]=m)}}),e.middleware&&e.middleware.length>0&&n.middleware.length>0&&(r.middleware=e.middleware.map(i=>{let o=i[Bl]??i,h=Pu(n.middleware,o,(...m)=>AS(m[0]));return h?(h[Bl]=o,h):i})),r}function AR(t,e){let n={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(i){let o=Object.keys(i);for(let h of o)i[h]&&n[h].push(i[h])}})),n.navigate.length>0){let r=t.navigate[Bl]??t.navigate,i=Pu(n.navigate,r,(...o)=>{let[h,m]=o;return{to:typeof h=="number"||typeof h=="string"?h:h?ao(h):".",...CS(t,m??{})}});i&&(i[Bl]=r,t.navigate=i)}if(n.fetch.length>0){let r=t.fetch[Bl]??t.fetch,i=Pu(n.fetch,r,(...o)=>{let[h,,m,y]=o;return{href:m??".",fetcherKey:h,...CS(t,y??{})}});i&&(i[Bl]=r,t.fetch=i)}return t}function Pu(t,e,n){return t.length===0?null:async(...r)=>{let i=await D6(t,n(...r),()=>e(...r),t.length-1);if(i.type==="error")throw i.value;return i.value}}async function D6(t,e,n,r){let i=t[r],o;if(i){let h,m=async()=>(h?console.error("You cannot call instrumented handlers more than once"):h=D6(t,e,n,r-1),o=await h,An(o,"Expected a result"),o.type==="error"&&o.value instanceof Error?{status:"error",error:o.value}:{status:"success",error:void 0});try{await i(m,e)}catch(y){console.error("An instrumentation function threw an error:",y)}h||await m(),await h}else try{o={type:"success",value:await n()}}catch(h){o={type:"error",value:h}}return o||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function AS(t){let{request:e,context:n,params:r,unstable_pattern:i}=t;return{request:CR(e),params:{...r},unstable_pattern:i,context:TR(n)}}function CS(t,e){return{currentUrl:ao(t.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function CR(t){return{method:t.method,url:t.url,headers:{get:(...e)=>t.headers.get(...e)}}}function TR(t){if(_R(t)){let e={...t};return Object.freeze(e),e}else return{get:e=>t.get(e)}}var NR=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _R(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===NR}var L6=["POST","PUT","PATCH","DELETE"],OR=new Set(L6),IR=["GET",...L6],RR=new Set(IR),k6=new Set([301,302,303,307,308]),MR=new Set([307,308]),Lg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},DR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},LR=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),j6="remix-router-transitions",B6=Symbol("ResetLoaderData");function kR(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";An(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||LR,o=i;if(t.unstable_instrumentations){let ue=t.unstable_instrumentations;o=Se=>({...i(Se),...SR(ue.map(Te=>Te.route).filter(Boolean),Se)})}let h={},m=zf(t.routes,o,void 0,h),y,g=t.basename||"/";g.startsWith("/")||(g=`/${g}`);let E=t.dataStrategy||FR,S={...t.future},N=null,I=new Set,R=null,D=null,j=null,B=t.hydrationData!=null,H=Ll(m,t.history.location,g),V=!1,se=null,ee;if(H==null&&!t.patchRoutesOnNavigation){let ue=ua(404,{pathname:t.history.location.pathname}),{matches:Se,route:Te}=zp(m);ee=!0,H=Se,se={[Te.id]:ue}}else if(H&&!t.hydrationData&&_n(H,m,t.history.location.pathname).active&&(H=null),H)if(H.some(ue=>ue.route.lazy))ee=!1;else if(!H.some(ue=>Ab(ue.route)))ee=!0;else{let ue=t.hydrationData?t.hydrationData.loaderData:null,Se=t.hydrationData?t.hydrationData.errors:null;if(Se){let Te=H.findIndex(Xe=>Se[Xe.route.id]!==void 0);ee=H.slice(0,Te+1).every(Xe=>!Jy(Xe.route,ue,Se))}else ee=H.every(Te=>!Jy(Te.route,ue,Se))}else{ee=!1,H=[];let ue=_n(null,m,t.history.location.pathname);ue.active&&ue.matches&&(V=!0,H=ue.matches)}let J,F={historyAction:t.history.action,location:t.history.location,matches:H,initialized:ee,navigation:Lg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||se,fetchers:new Map,blockers:new Map},ce="POP",de=null,ze=!1,Q,fe=!1,he=new Map,Ne=null,ie=!1,Y=!1,oe=new Set,ve=new Map,Ee=0,be=-1,ne=new Map,ye=new Set,Ce=new Map,ke=new Map,He=new Set,Fe=new Map,Ct,dt=null;function Ze(){if(N=t.history.listen(({action:ue,location:Se,delta:Te})=>{if(Ct){Ct(),Ct=void 0;return}zr(Fe.size===0||Te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Xe=Qt({currentLocation:F.location,nextLocation:Se,historyAction:ue});if(Xe&&Te!=null){let Ke=new Promise(Ue=>{Ct=Ue});t.history.go(Te*-1),Hr(Xe,{state:"blocked",location:Se,proceed(){Hr(Xe,{state:"proceeding",proceed:void 0,reset:void 0,location:Se}),Ke.then(()=>t.history.go(Te))},reset(){let Ue=new Map(F.blockers);Ue.set(Xe,lf),ht({blockers:Ue})}}),de?.resolve(),de=null;return}return _r(ue,Se)}),n){iM(e,he);let ue=()=>sM(e,he);e.addEventListener("pagehide",ue),Ne=()=>e.removeEventListener("pagehide",ue)}return F.initialized||_r("POP",F.location,{initialHydration:!0}),J}function Wt(){N&&N(),Ne&&Ne(),I.clear(),Q&&Q.abort(),F.fetchers.forEach((ue,Se)=>ki(Se)),F.blockers.forEach((ue,Se)=>st(Se))}function kt(ue){return I.add(ue),()=>I.delete(ue)}function ht(ue,Se={}){ue.matches&&(ue.matches=ue.matches.map(Ke=>{let Ue=h[Ke.route.id],at=Ke.route;return at.element!==Ue.element||at.errorElement!==Ue.errorElement||at.hydrateFallbackElement!==Ue.hydrateFallbackElement?{...Ke,route:Ue}:Ke})),F={...F,...ue};let Te=[],Xe=[];F.fetchers.forEach((Ke,Ue)=>{Ke.state==="idle"&&(He.has(Ue)?Te.push(Ue):Xe.push(Ue))}),He.forEach(Ke=>{!F.fetchers.has(Ke)&&!ve.has(Ke)&&Te.push(Ke)}),[...I].forEach(Ke=>Ke(F,{deletedFetchers:Te,newErrors:ue.errors??null,viewTransitionOpts:Se.viewTransitionOpts,flushSync:Se.flushSync===!0})),Te.forEach(Ke=>ki(Ke)),Xe.forEach(Ke=>F.fetchers.delete(Ke))}function mt(ue,Se,{flushSync:Te}={}){let Xe=F.actionData!=null&&F.navigation.formMethod!=null&&Qi(F.navigation.formMethod)&&F.navigation.state==="loading"&&ue.state?._isRedirect!==!0,Ke;Se.actionData?Object.keys(Se.actionData).length>0?Ke=Se.actionData:Ke=null:Xe?Ke=F.actionData:Ke=null;let Ue=Se.loaderData?kS(F.loaderData,Se.loaderData,Se.matches||[],Se.errors):F.loaderData,at=F.blockers;at.size>0&&(at=new Map(at),at.forEach((yt,vt)=>at.set(vt,lf)));let ot=ie?!1:Yi(ue,Se.matches||F.matches),nt=ze===!0||F.navigation.formMethod!=null&&Qi(F.navigation.formMethod)&&ue.state?._isRedirect!==!0;y&&(m=y,y=void 0),ie||ce==="POP"||(ce==="PUSH"?t.history.push(ue,ue.state):ce==="REPLACE"&&t.history.replace(ue,ue.state));let gt;if(ce==="POP"){let yt=he.get(F.location.pathname);yt&&yt.has(ue.pathname)?gt={currentLocation:F.location,nextLocation:ue}:he.has(ue.pathname)&&(gt={currentLocation:ue,nextLocation:F.location})}else if(fe){let yt=he.get(F.location.pathname);yt?yt.add(ue.pathname):(yt=new Set([ue.pathname]),he.set(F.location.pathname,yt)),gt={currentLocation:F.location,nextLocation:ue}}ht({...Se,actionData:Ke,loaderData:Ue,historyAction:ce,location:ue,initialized:!0,navigation:Lg,revalidation:"idle",restoreScrollPosition:ot,preventScrollReset:nt,blockers:at},{viewTransitionOpts:gt,flushSync:Te===!0}),ce="POP",ze=!1,fe=!1,ie=!1,Y=!1,de?.resolve(),de=null,dt?.resolve(),dt=null}async function bn(ue,Se){if(de?.resolve(),de=null,typeof ue=="number"){de||(de=US());let $t=de.promise;return t.history.go(ue),$t}let Te=Zy(F.location,F.matches,g,ue,Se?.fromRouteId,Se?.relative),{path:Xe,submission:Ke,error:Ue}=TS(!1,Te,Se),at=F.location,ot=Ff(F.location,Xe,Se&&Se.state);ot={...ot,...t.history.encodeLocation(ot)};let nt=Se&&Se.replace!=null?Se.replace:void 0,gt="PUSH";nt===!0?gt="REPLACE":nt===!1||Ke!=null&&Qi(Ke.formMethod)&&Ke.formAction===F.location.pathname+F.location.search&&(gt="REPLACE");let yt=Se&&"preventScrollReset"in Se?Se.preventScrollReset===!0:void 0,vt=(Se&&Se.flushSync)===!0,Ht=Qt({currentLocation:at,nextLocation:ot,historyAction:gt});if(Ht){Hr(Ht,{state:"blocked",location:ot,proceed(){Hr(Ht,{state:"proceeding",proceed:void 0,reset:void 0,location:ot}),bn(ue,Se)},reset(){let $t=new Map(F.blockers);$t.set(Ht,lf),ht({blockers:$t})}});return}await _r(gt,ot,{submission:Ke,pendingError:Ue,preventScrollReset:yt,replace:Se&&Se.replace,enableViewTransition:Se&&Se.viewTransition,flushSync:vt,callSiteDefaultShouldRevalidate:Se&&Se.unstable_defaultShouldRevalidate})}function mn(){dt||(dt=US()),ii(),ht({revalidation:"loading"});let ue=dt.promise;return F.navigation.state==="submitting"?ue:F.navigation.state==="idle"?(_r(F.historyAction,F.location,{startUninterruptedRevalidation:!0}),ue):(_r(ce||F.historyAction,F.navigation.location,{overrideNavigation:F.navigation,enableViewTransition:fe===!0}),ue)}async function _r(ue,Se,Te){Q&&Q.abort(),Q=null,ce=ue,ie=(Te&&Te.startUninterruptedRevalidation)===!0,wr(F.location,F.matches),ze=(Te&&Te.preventScrollReset)===!0,fe=(Te&&Te.enableViewTransition)===!0;let Xe=y||m,Ke=Te&&Te.overrideNavigation,Ue=Te?.initialHydration&&F.matches&&F.matches.length>0&&!V?F.matches:Ll(Xe,Se,g),at=(Te&&Te.flushSync)===!0;if(Ue&&F.initialized&&!Y&&YR(F.location,Se)&&!(Te&&Te.submission&&Qi(Te.submission.formMethod))){mt(Se,{matches:Ue},{flushSync:at});return}let ot=_n(Ue,Xe,Se.pathname);if(ot.active&&ot.matches&&(Ue=ot.matches),!Ue){let{error:gn,notFoundMatches:bt,route:Et}=cr(Se.pathname);mt(Se,{matches:bt,loaderData:{},errors:{[Et.id]:gn}},{flushSync:at});return}Q=new AbortController;let nt=Ou(t.history,Se,Q.signal,Te&&Te.submission),gt=t.getContext?await t.getContext():new wS,yt;if(Te&&Te.pendingError)yt=[kl(Ue).route.id,{type:"error",error:Te.pendingError}];else if(Te&&Te.submission&&Qi(Te.submission.formMethod)){let gn=await lr(nt,Se,Te.submission,Ue,gt,ot.active,Te&&Te.initialHydration===!0,{replace:Te.replace,flushSync:at});if(gn.shortCircuited)return;if(gn.pendingActionResult){let[bt,Et]=gn.pendingActionResult;if(Bs(Et)&&Hf(Et.error)&&Et.error.status===404){Q=null,mt(Se,{matches:gn.matches,loaderData:{},errors:{[bt]:Et.error}});return}}Ue=gn.matches||Ue,yt=gn.pendingActionResult,Ke=kg(Se,Te.submission),at=!1,ot.active=!1,nt=Ou(t.history,nt.url,nt.signal)}let{shortCircuited:vt,matches:Ht,loaderData:$t,errors:zn}=await Tn(nt,Se,Ue,gt,ot.active,Ke,Te&&Te.submission,Te&&Te.fetcherSubmission,Te&&Te.replace,Te&&Te.initialHydration===!0,at,yt,Te&&Te.callSiteDefaultShouldRevalidate);vt||(Q=null,mt(Se,{matches:Ht||Ue,...jS(yt),loaderData:$t,errors:zn}))}async function lr(ue,Se,Te,Xe,Ke,Ue,at,ot={}){ii();let nt=nM(Se,Te);if(ht({navigation:nt},{flushSync:ot.flushSync===!0}),Ue){let vt=await Kn(Xe,Se.pathname,ue.signal);if(vt.type==="aborted")return{shortCircuited:!0};if(vt.type==="error"){if(vt.partialMatches.length===0){let{matches:$t,route:zn}=zp(m);return{matches:$t,pendingActionResult:[zn.id,{type:"error",error:vt.error}]}}let Ht=kl(vt.partialMatches).route.id;return{matches:vt.partialMatches,pendingActionResult:[Ht,{type:"error",error:vt.error}]}}else if(vt.matches)Xe=vt.matches;else{let{notFoundMatches:Ht,error:$t,route:zn}=cr(Se.pathname);return{matches:Ht,pendingActionResult:[zn.id,{type:"error",error:$t}]}}}let gt,yt=um(Xe,Se);if(!yt.route.action&&!yt.route.lazy)gt={type:"error",error:ua(405,{method:ue.method,pathname:Se.pathname,routeId:yt.route.id})};else{let vt=Gu(o,h,ue,Xe,yt,at?[]:r,Ke),Ht=await jr(ue,vt,Ke,null);if(gt=Ht[yt.route.id],!gt){for(let $t of Xe)if(Ht[$t.route.id]){gt=Ht[$t.route.id];break}}if(ue.signal.aborted)return{shortCircuited:!0}}if(Ec(gt)){let vt;return ot&&ot.replace!=null?vt=ot.replace:vt=MS(gt.response.headers.get("Location"),new URL(ue.url),g)===F.location.pathname+F.location.search,await an(ue,gt,!0,{submission:Te,replace:vt}),{shortCircuited:!0}}if(Bs(gt)){let vt=kl(Xe,yt.route.id);return(ot&&ot.replace)!==!0&&(ce="PUSH"),{matches:Xe,pendingActionResult:[vt.route.id,gt,yt.route.id]}}return{matches:Xe,pendingActionResult:[yt.route.id,gt]}}async function Tn(ue,Se,Te,Xe,Ke,Ue,at,ot,nt,gt,yt,vt,Ht){let $t=Ue||kg(Se,at),zn=at||ot||PS($t),gn=!ie&&!gt;if(Ke){if(gn){let Hn=tn(vt);ht({navigation:$t,...Hn!==void 0?{actionData:Hn}:{}},{flushSync:yt})}let Je=await Kn(Te,Se.pathname,ue.signal);if(Je.type==="aborted")return{shortCircuited:!0};if(Je.type==="error"){if(Je.partialMatches.length===0){let{matches:Qr,route:ur}=zp(m);return{matches:Qr,loaderData:{},errors:{[ur.id]:Je.error}}}let Hn=kl(Je.partialMatches).route.id;return{matches:Je.partialMatches,loaderData:{},errors:{[Hn]:Je.error}}}else if(Je.matches)Te=Je.matches;else{let{error:Hn,notFoundMatches:Qr,route:ur}=cr(Se.pathname);return{matches:Qr,loaderData:{},errors:{[ur.id]:Hn}}}}let bt=y||m,{dsMatches:Et,revalidatingFetchers:jn}=NS(ue,Xe,o,h,t.history,F,Te,zn,Se,gt?[]:r,gt===!0,Y,oe,He,Ce,ye,bt,g,t.patchRoutesOnNavigation!=null,vt,Ht);if(be=++Ee,!t.dataStrategy&&!Et.some(Je=>Je.shouldLoad)&&!Et.some(Je=>Je.route.middleware&&Je.route.middleware.length>0)&&jn.length===0){let Je=jt();return mt(Se,{matches:Te,loaderData:{},errors:vt&&Bs(vt[1])?{[vt[0]]:vt[1].error}:null,...jS(vt),...Je?{fetchers:new Map(F.fetchers)}:{}},{flushSync:yt}),{shortCircuited:!0}}if(gn){let Je={};if(!Ke){Je.navigation=$t;let Hn=tn(vt);Hn!==void 0&&(Je.actionData=Hn)}jn.length>0&&(Je.fetchers=ri(jn)),ht(Je,{flushSync:yt})}jn.forEach(Je=>{$e(Je.key),Je.controller&&ve.set(Je.key,Je.controller)});let Xn=()=>jn.forEach(Je=>$e(Je.key));Q&&Q.signal.addEventListener("abort",Xn);let{loaderResults:En,fetcherResults:qe}=await Wn(Et,jn,ue,Xe);if(ue.signal.aborted)return{shortCircuited:!0};Q&&Q.signal.removeEventListener("abort",Xn),jn.forEach(Je=>ve.delete(Je.key));let Ar=Hp(En);if(Ar)return await an(ue,Ar.result,!0,{replace:nt}),{shortCircuited:!0};if(Ar=Hp(qe),Ar)return ye.add(Ar.key),await an(ue,Ar.result,!0,{replace:nt}),{shortCircuited:!0};let{loaderData:hn,errors:Un}=LS(F,Te,En,vt,jn,qe);gt&&F.errors&&(Un={...F.errors,...Un});let Or=jt(),Yt=dn(be),nn=Or||Yt||jn.length>0;return{matches:Te,loaderData:hn,errors:Un,...nn?{fetchers:new Map(F.fetchers)}:{}}}function tn(ue){if(ue&&!Bs(ue[1]))return{[ue[0]]:ue[1].data};if(F.actionData)return Object.keys(F.actionData).length===0?null:F.actionData}function ri(ue){return ue.forEach(Se=>{let Te=F.fetchers.get(Se.key),Xe=cf(void 0,Te?Te.data:void 0);F.fetchers.set(Se.key,Xe)}),new Map(F.fetchers)}async function ft(ue,Se,Te,Xe){$e(ue);let Ke=(Xe&&Xe.flushSync)===!0,Ue=y||m,at=Zy(F.location,F.matches,g,Te,Se,Xe?.relative),ot=Ll(Ue,at,g),nt=_n(ot,Ue,at);if(nt.active&&nt.matches&&(ot=nt.matches),!ot){Nn(ue,Se,ua(404,{pathname:at}),{flushSync:Ke});return}let{path:gt,submission:yt,error:vt}=TS(!0,at,Xe);if(vt){Nn(ue,Se,vt,{flushSync:Ke});return}let Ht=t.getContext?await t.getContext():new wS,$t=(Xe&&Xe.preventScrollReset)===!0;if(yt&&Qi(yt.formMethod)){await $i(ue,Se,gt,ot,Ht,nt.active,Ke,$t,yt,Xe&&Xe.unstable_defaultShouldRevalidate);return}Ce.set(ue,{routeId:Se,path:gt}),await Li(ue,Se,gt,ot,Ht,nt.active,Ke,$t,yt)}async function $i(ue,Se,Te,Xe,Ke,Ue,at,ot,nt,gt){ii(),Ce.delete(ue);let yt=F.fetchers.get(ue);Rn(ue,rM(nt,yt),{flushSync:at});let vt=new AbortController,Ht=Ou(t.history,Te,vt.signal,nt);if(Ue){let lt=await Kn(Xe,new URL(Ht.url).pathname,Ht.signal,ue);if(lt.type==="aborted")return;if(lt.type==="error"){Nn(ue,Se,lt.error,{flushSync:at});return}else if(lt.matches)Xe=lt.matches;else{Nn(ue,Se,ua(404,{pathname:Te}),{flushSync:at});return}}let $t=um(Xe,Te);if(!$t.route.action&&!$t.route.lazy){let lt=ua(405,{method:nt.formMethod,pathname:Te,routeId:Se});Nn(ue,Se,lt,{flushSync:at});return}ve.set(ue,vt);let zn=Ee,gn=Gu(o,h,Ht,Xe,$t,r,Ke),bt=await jr(Ht,gn,Ke,ue),Et=bt[$t.route.id];if(!Et){for(let lt of gn)if(bt[lt.route.id]){Et=bt[lt.route.id];break}}if(Ht.signal.aborted){ve.get(ue)===vt&&ve.delete(ue);return}if(He.has(ue)){if(Ec(Et)||Bs(Et)){Rn(ue,Uo(void 0));return}}else{if(Ec(Et))if(ve.delete(ue),be>zn){Rn(ue,Uo(void 0));return}else return ye.add(ue),Rn(ue,cf(nt)),an(Ht,Et,!1,{fetcherSubmission:nt,preventScrollReset:ot});if(Bs(Et)){Nn(ue,Se,Et.error);return}}let jn=F.navigation.location||F.location,Xn=Ou(t.history,jn,vt.signal),En=y||m,qe=F.navigation.state!=="idle"?Ll(En,F.navigation.location,g):F.matches;An(qe,"Didn't find any matches after fetcher action");let Ar=++Ee;ne.set(ue,Ar);let hn=cf(nt,Et.data);F.fetchers.set(ue,hn);let{dsMatches:Un,revalidatingFetchers:Or}=NS(Xn,Ke,o,h,t.history,F,qe,nt,jn,r,!1,Y,oe,He,Ce,ye,En,g,t.patchRoutesOnNavigation!=null,[$t.route.id,Et],gt);Or.filter(lt=>lt.key!==ue).forEach(lt=>{let hr=lt.key,pi=F.fetchers.get(hr),Sn=cf(void 0,pi?pi.data:void 0);F.fetchers.set(hr,Sn),$e(hr),lt.controller&&ve.set(hr,lt.controller)}),ht({fetchers:new Map(F.fetchers)});let Yt=()=>Or.forEach(lt=>$e(lt.key));vt.signal.addEventListener("abort",Yt);let{loaderResults:nn,fetcherResults:Je}=await Wn(Un,Or,Xn,Ke);if(vt.signal.aborted)return;if(vt.signal.removeEventListener("abort",Yt),ne.delete(ue),ve.delete(ue),Or.forEach(lt=>ve.delete(lt.key)),F.fetchers.has(ue)){let lt=Uo(Et.data);F.fetchers.set(ue,lt)}let Hn=Hp(nn);if(Hn)return an(Xn,Hn.result,!1,{preventScrollReset:ot});if(Hn=Hp(Je),Hn)return ye.add(Hn.key),an(Xn,Hn.result,!1,{preventScrollReset:ot});let{loaderData:Qr,errors:ur}=LS(F,qe,nn,void 0,Or,Je);dn(Ar),F.navigation.state==="loading"&&Ar>be?(An(ce,"Expected pending action"),Q&&Q.abort(),mt(F.navigation.location,{matches:qe,loaderData:Qr,errors:ur,fetchers:new Map(F.fetchers)})):(ht({errors:ur,loaderData:kS(F.loaderData,Qr,qe,ur),fetchers:new Map(F.fetchers)}),Y=!1)}async function Li(ue,Se,Te,Xe,Ke,Ue,at,ot,nt){let gt=F.fetchers.get(ue);Rn(ue,cf(nt,gt?gt.data:void 0),{flushSync:at});let yt=new AbortController,vt=Ou(t.history,Te,yt.signal);if(Ue){let Et=await Kn(Xe,new URL(vt.url).pathname,vt.signal,ue);if(Et.type==="aborted")return;if(Et.type==="error"){Nn(ue,Se,Et.error,{flushSync:at});return}else if(Et.matches)Xe=Et.matches;else{Nn(ue,Se,ua(404,{pathname:Te}),{flushSync:at});return}}let Ht=um(Xe,Te);ve.set(ue,yt);let $t=Ee,zn=Gu(o,h,vt,Xe,Ht,r,Ke),bt=(await jr(vt,zn,Ke,ue))[Ht.route.id];if(ve.get(ue)===yt&&ve.delete(ue),!vt.signal.aborted){if(He.has(ue)){Rn(ue,Uo(void 0));return}if(Ec(bt))if(be>$t){Rn(ue,Uo(void 0));return}else{ye.add(ue),await an(vt,bt,!1,{preventScrollReset:ot});return}if(Bs(bt)){Nn(ue,Se,bt.error);return}Rn(ue,Uo(bt.data))}}async function an(ue,Se,Te,{submission:Xe,fetcherSubmission:Ke,preventScrollReset:Ue,replace:at}={}){Te||(de?.resolve(),de=null),Se.response.headers.has("X-Remix-Revalidate")&&(Y=!0);let ot=Se.response.headers.get("Location");An(ot,"Expected a Location header on the redirect Response"),ot=MS(ot,new URL(ue.url),g);let nt=Ff(F.location,ot,{_isRedirect:!0});if(n){let zn=!1;if(Se.response.headers.has("X-Remix-Reload-Document"))zn=!0;else if(c1(ot)){const gn=T6(ot,!0);zn=gn.origin!==e.location.origin||wa(gn.pathname,g)==null}if(zn){at?e.location.replace(ot):e.location.assign(ot);return}}Q=null;let gt=at===!0||Se.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:yt,formAction:vt,formEncType:Ht}=F.navigation;!Xe&&!Ke&&yt&&vt&&Ht&&(Xe=PS(F.navigation));let $t=Xe||Ke;if(MR.has(Se.response.status)&&$t&&Qi($t.formMethod))await _r(gt,nt,{submission:{...$t,formAction:ot},preventScrollReset:Ue||ze,enableViewTransition:Te?fe:void 0});else{let zn=kg(nt,Xe);await _r(gt,nt,{overrideNavigation:zn,fetcherSubmission:Ke,preventScrollReset:Ue||ze,enableViewTransition:Te?fe:void 0})}}async function jr(ue,Se,Te,Xe){let Ke,Ue={};try{Ke=await HR(E,ue,Se,Xe,Te,!1)}catch(at){return Se.filter(ot=>ot.shouldLoad).forEach(ot=>{Ue[ot.route.id]={type:"error",error:at}}),Ue}if(ue.signal.aborted)return Ue;if(!Qi(ue.method))for(let at of Se){if(Ke[at.route.id]?.type==="error")break;!Ke.hasOwnProperty(at.route.id)&&!F.loaderData.hasOwnProperty(at.route.id)&&(!F.errors||!F.errors.hasOwnProperty(at.route.id))&&at.shouldCallHandler()&&(Ke[at.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${at.route.id}`)})}for(let[at,ot]of Object.entries(Ke))if(ZR(ot)){let nt=ot.result;Ue[at]={type:"redirect",response:KR(nt,ue,at,Se,g)}}else Ue[at]=await GR(ot);return Ue}async function Wn(ue,Se,Te,Xe){let Ke=jr(Te,ue,Xe,null),Ue=Promise.all(Se.map(async nt=>{if(nt.matches&&nt.match&&nt.request&&nt.controller){let yt=(await jr(nt.request,nt.matches,Xe,nt.key))[nt.match.route.id];return{[nt.key]:yt}}else return Promise.resolve({[nt.key]:{type:"error",error:ua(404,{pathname:nt.path})}})})),at=await Ke,ot=(await Ue).reduce((nt,gt)=>Object.assign(nt,gt),{});return{loaderResults:at,fetcherResults:ot}}function ii(){Y=!0,Ce.forEach((ue,Se)=>{ve.has(Se)&&oe.add(Se),$e(Se)})}function Rn(ue,Se,Te={}){F.fetchers.set(ue,Se),ht({fetchers:new Map(F.fetchers)},{flushSync:(Te&&Te.flushSync)===!0})}function Nn(ue,Se,Te,Xe={}){let Ke=kl(F.matches,Se);ki(ue),ht({errors:{[Ke.route.id]:Te},fetchers:new Map(F.fetchers)},{flushSync:(Xe&&Xe.flushSync)===!0})}function Sr(ue){return ke.set(ue,(ke.get(ue)||0)+1),He.has(ue)&&He.delete(ue),F.fetchers.get(ue)||DR}function si(ue,Se){$e(ue,Se?.reason),Rn(ue,Uo(null))}function ki(ue){let Se=F.fetchers.get(ue);ve.has(ue)&&!(Se&&Se.state==="loading"&&ne.has(ue))&&$e(ue),Ce.delete(ue),ne.delete(ue),ye.delete(ue),He.delete(ue),oe.delete(ue),F.fetchers.delete(ue)}function Mn(ue){let Se=(ke.get(ue)||0)-1;Se<=0?(ke.delete(ue),He.add(ue)):ke.set(ue,Se),ht({fetchers:new Map(F.fetchers)})}function $e(ue,Se){let Te=ve.get(ue);Te&&(Te.abort(Se),ve.delete(ue))}function rt(ue){for(let Se of ue){let Te=Sr(Se),Xe=Uo(Te.data);F.fetchers.set(Se,Xe)}}function jt(){let ue=[],Se=!1;for(let Te of ye){let Xe=F.fetchers.get(Te);An(Xe,`Expected fetcher: ${Te}`),Xe.state==="loading"&&(ye.delete(Te),ue.push(Te),Se=!0)}return rt(ue),Se}function dn(ue){let Se=[];for(let[Te,Xe]of ne)if(Xe<ue){let Ke=F.fetchers.get(Te);An(Ke,`Expected fetcher: ${Te}`),Ke.state==="loading"&&($e(Te),ne.delete(Te),Se.push(Te))}return rt(Se),Se.length>0}function Yr(ue,Se){let Te=F.blockers.get(ue)||lf;return Fe.get(ue)!==Se&&Fe.set(ue,Se),Te}function st(ue){F.blockers.delete(ue),Fe.delete(ue)}function Hr(ue,Se){let Te=F.blockers.get(ue)||lf;An(Te.state==="unblocked"&&Se.state==="blocked"||Te.state==="blocked"&&Se.state==="blocked"||Te.state==="blocked"&&Se.state==="proceeding"||Te.state==="blocked"&&Se.state==="unblocked"||Te.state==="proceeding"&&Se.state==="unblocked",`Invalid blocker state transition: ${Te.state} -> ${Se.state}`);let Xe=new Map(F.blockers);Xe.set(ue,Se),ht({blockers:Xe})}function Qt({currentLocation:ue,nextLocation:Se,historyAction:Te}){if(Fe.size===0)return;Fe.size>1&&zr(!1,"A router only supports one blocker at a time");let Xe=Array.from(Fe.entries()),[Ke,Ue]=Xe[Xe.length-1],at=F.blockers.get(Ke);if(!(at&&at.state==="proceeding")&&Ue({currentLocation:ue,nextLocation:Se,historyAction:Te}))return Ke}function cr(ue){let Se=ua(404,{pathname:ue}),Te=y||m,{matches:Xe,route:Ke}=zp(Te);return{notFoundMatches:Xe,route:Ke,error:Se}}function ai(ue,Se,Te){if(R=ue,j=Se,D=Te||null,!B&&F.navigation===Lg){B=!0;let Xe=Yi(F.location,F.matches);Xe!=null&&ht({restoreScrollPosition:Xe})}return()=>{R=null,j=null,D=null}}function Xr(ue,Se){return D&&D(ue,Se.map(Xe=>sR(Xe,F.loaderData)))||ue.key}function wr(ue,Se){if(R&&j){let Te=Xr(ue,Se);R[Te]=j()}}function Yi(ue,Se){if(R){let Te=Xr(ue,Se),Xe=R[Te];if(typeof Xe=="number")return Xe}return null}function _n(ue,Se,Te){if(t.patchRoutesOnNavigation)if(ue){if(Object.keys(ue[0].params).length>0)return{active:!0,matches:yf(Se,Te,g,!0)}}else return{active:!0,matches:yf(Se,Te,g,!0)||[]};return{active:!1,matches:null}}async function Kn(ue,Se,Te,Xe){if(!t.patchRoutesOnNavigation)return{type:"success",matches:ue};let Ke=ue;for(;;){let Ue=y==null,at=y||m,ot=h;try{await t.patchRoutesOnNavigation({signal:Te,path:Se,matches:Ke,fetcherKey:Xe,patch:(yt,vt)=>{Te.aborted||_S(yt,vt,at,ot,o,!1)}})}catch(yt){return{type:"error",error:yt,partialMatches:Ke}}finally{Ue&&!Te.aborted&&(m=[...m])}if(Te.aborted)return{type:"aborted"};let nt=Ll(at,Se,g),gt=null;if(nt){if(Object.keys(nt[0].params).length===0)return{type:"success",matches:nt};if(gt=yf(at,Se,g,!0),!(gt&&Ke.length<gt.length&&Wr(Ke,gt.slice(0,Ke.length))))return{type:"success",matches:nt}}if(gt||(gt=yf(at,Se,g,!0)),!gt||Wr(Ke,gt))return{type:"success",matches:null};Ke=gt}}function Wr(ue,Se){return ue.length===Se.length&&ue.every((Te,Xe)=>Te.route.id===Se[Xe].route.id)}function Qn(ue){h={},y=zf(ue,o,void 0,h)}function kn(ue,Se,Te=!1){let Xe=y==null;_S(ue,Se,y||m,h,o,Te),Xe&&(m=[...m],ht({}))}return J={get basename(){return g},get future(){return S},get state(){return F},get routes(){return m},get window(){return e},initialize:Ze,subscribe:kt,enableScrollRestoration:ai,navigate:bn,fetch:ft,revalidate:mn,createHref:ue=>t.history.createHref(ue),encodeLocation:ue=>t.history.encodeLocation(ue),getFetcher:Sr,resetFetcher:si,deleteFetcher:Mn,dispose:Wt,getBlocker:Yr,deleteBlocker:st,patchRoutes:kn,_internalFetchControllers:ve,_internalSetRoutes:Qn,_internalSetStateDoNotUseOrYouWillBreakYourApp(ue){ht(ue)}},t.unstable_instrumentations&&(J=AR(J,t.unstable_instrumentations.map(ue=>ue.router).filter(Boolean))),J}function jR(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Zy(t,e,n,r,i,o){let h,m;if(i){h=[];for(let g of e)if(h.push(g),g.route.id===i){m=g;break}}else h=e,m=e[e.length-1];let y=h1(r||".",u1(h),wa(t.pathname,n)||t.pathname,o==="path");if(r==null&&(y.search=t.search,y.hash=t.hash),(r==null||r===""||r===".")&&m){let g=Tb(y.search);if(m.route.index&&!g)y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&g){let E=new URLSearchParams(y.search),S=E.getAll("index");E.delete("index"),S.filter(I=>I).forEach(I=>E.append("index",I));let N=E.toString();y.search=N?`?${N}`:""}}return n!=="/"&&(y.pathname=vR({basename:n,pathname:y.pathname})),ao(y)}function TS(t,e,n){if(!n||!jR(n))return{path:e};if(n.formMethod&&!tM(n.formMethod))return{path:e,error:ua(405,{method:n.formMethod})};let r=()=>({path:e,error:ua(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),h=q6(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Qi(o))return r();let S=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((N,[I,R])=>`${N}${I}=${R}
`,""):String(n.body);return{path:e,submission:{formMethod:o,formAction:h,formEncType:n.formEncType,formData:void 0,json:void 0,text:S}}}else if(n.formEncType==="application/json"){if(!Qi(o))return r();try{let S=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:o,formAction:h,formEncType:n.formEncType,formData:void 0,json:S,text:void 0}}}catch{return r()}}}An(typeof FormData=="function","FormData is not available in this environment");let m,y;if(n.formData)m=tv(n.formData),y=n.formData;else if(n.body instanceof FormData)m=tv(n.body),y=n.body;else if(n.body instanceof URLSearchParams)m=n.body,y=DS(m);else if(n.body==null)m=new URLSearchParams,y=new FormData;else try{m=new URLSearchParams(n.body),y=DS(m)}catch{return r()}let g={formMethod:o,formAction:h,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:y,json:void 0,text:void 0};if(Qi(g.formMethod))return{path:e,submission:g};let E=Wo(e);return t&&E.search&&Tb(E.search)&&m.append("index",""),E.search=`?${m}`,{path:ao(E),submission:g}}function NS(t,e,n,r,i,o,h,m,y,g,E,S,N,I,R,D,j,B,H,V,se){let ee=V?Bs(V[1])?V[1].error:V[1].data:void 0,J=i.createURL(o.location),F=i.createURL(y),ce;if(E&&o.errors){let ie=Object.keys(o.errors)[0];ce=h.findIndex(Y=>Y.route.id===ie)}else if(V&&Bs(V[1])){let ie=V[0];ce=h.findIndex(Y=>Y.route.id===ie)-1}let de=V?V[1].statusCode:void 0,ze=de&&de>=400,Q={currentUrl:J,currentParams:o.matches[0]?.params||{},nextUrl:F,nextParams:h[0].params,...m,actionResult:ee,actionStatus:de},fe=md(h),he=h.map((ie,Y)=>{let{route:oe}=ie,ve=null;if(ce!=null&&Y>ce?ve=!1:oe.lazy?ve=!0:Ab(oe)?E?ve=Jy(oe,o.loaderData,o.errors):BR(o.loaderData,o.matches[Y],ie)&&(ve=!0):ve=!1,ve!==null)return ev(n,r,t,fe,ie,g,e,ve);let Ee=!1;typeof se=="boolean"?Ee=se:ze?Ee=!1:(S||J.pathname+J.search===F.pathname+F.search||J.search!==F.search||PR(o.matches[Y],ie))&&(Ee=!0);let be={...Q,defaultShouldRevalidate:Ee},ne=Cf(ie,be);return ev(n,r,t,fe,ie,g,e,ne,be,se)}),Ne=[];return R.forEach((ie,Y)=>{if(E||!h.some(ke=>ke.route.id===ie.routeId)||I.has(Y))return;let oe=o.fetchers.get(Y),ve=oe&&oe.state!=="idle"&&oe.data===void 0,Ee=Ll(j,ie.path,B);if(!Ee){if(H&&ve)return;Ne.push({key:Y,routeId:ie.routeId,path:ie.path,matches:null,match:null,request:null,controller:null});return}if(D.has(Y))return;let be=um(Ee,ie.path),ne=new AbortController,ye=Ou(i,ie.path,ne.signal),Ce=null;if(N.has(Y))N.delete(Y),Ce=Gu(n,r,ye,Ee,be,g,e);else if(ve)S&&(Ce=Gu(n,r,ye,Ee,be,g,e));else{let ke;typeof se=="boolean"?ke=se:ze?ke=!1:ke=S;let He={...Q,defaultShouldRevalidate:ke};Cf(be,He)&&(Ce=Gu(n,r,ye,Ee,be,g,e,He))}Ce&&Ne.push({key:Y,routeId:ie.routeId,path:ie.path,matches:Ce,match:be,request:ye,controller:ne})}),{dsMatches:he,revalidatingFetchers:Ne}}function Ab(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function Jy(t,e,n){if(t.lazy)return!0;if(!Ab(t))return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function BR(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function PR(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Cf(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function _S(t,e,n,r,i,o){let h;if(t){let g=r[t];An(g,`No route found to patch children into: routeId = ${t}`),g.children||(g.children=[]),h=g.children}else h=n;let m=[],y=[];if(e.forEach(g=>{let E=h.find(S=>P6(g,S));E?y.push({existingRoute:E,newRoute:g}):m.push(g)}),m.length>0){let g=zf(m,i,[t||"_","patch",String(h?.length||"0")],r);h.push(...g)}if(o&&y.length>0)for(let g=0;g<y.length;g++){let{existingRoute:E,newRoute:S}=y[g],N=E,[I]=zf([S],i,[],{},!0);Object.assign(N,{element:I.element?I.element:N.element,errorElement:I.errorElement?I.errorElement:N.errorElement,hydrateFallbackElement:I.hydrateFallbackElement?I.hydrateFallbackElement:N.hydrateFallbackElement})}}function P6(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>e.children?.some(i=>P6(n,i))):!1}var OS=new WeakMap,U6=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(An(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[t];if(!o)return;let h=OS.get(i);h||(h={},OS.set(i,h));let m=h[t];if(m)return m;let y=(async()=>{let g=tR(t),S=i[t]!==void 0&&t!=="hasErrorBoundary";if(g)zr(!g,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),h[t]=Promise.resolve();else if(S)zr(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let N=await o();N!=null&&(Object.assign(i,{[t]:N}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(N=>N===void 0)&&(i.lazy=void 0))})();return h[t]=y,y},IS=new WeakMap;function UR(t,e,n,r,i){let o=n[t.id];if(An(o,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let E=IS.get(o);if(E)return{lazyRoutePromise:E,lazyHandlerPromise:E};let S=(async()=>{An(typeof t.lazy=="function","No lazy route function found");let N=await t.lazy(),I={};for(let R in N){let D=N[R];if(D===void 0)continue;let j=rR(R),H=o[R]!==void 0&&R!=="hasErrorBoundary";j?zr(!j,"Route property "+R+" is not a supported property to be returned from a lazy route function. This property will be ignored."):H?zr(!H,`Route "${o.id}" has a static property "${R}" defined but its lazy function is also returning a value for this property. The lazy route property "${R}" will be ignored.`):I[R]=D}Object.assign(o,I),Object.assign(o,{...r(o),lazy:void 0})})();return IS.set(o,S),S.catch(()=>{}),{lazyRoutePromise:S,lazyHandlerPromise:S}}let h=Object.keys(t.lazy),m=[],y;for(let E of h){if(i&&i.includes(E))continue;let S=U6({key:E,route:t,manifest:n,mapRouteProperties:r});S&&(m.push(S),E===e&&(y=S))}let g=m.length>0?Promise.all(m).then(()=>{}):void 0;return g?.catch(()=>{}),y?.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:y}}async function RS(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,o)=>{n[e[o].route.id]=i}),n}async function FR(t){return t.matches.some(e=>e.route.middleware)?F6(t,()=>RS(t)):RS(t)}function F6(t,e){return zR(t,e,r=>{if(eM(r))throw r;return r},WR,n);function n(r,i,o){if(o)return Promise.resolve(Object.assign(o.value,{[i]:{type:"error",result:r}}));{let{matches:h}=t,m=Math.min(Math.max(h.findIndex(g=>g.route.id===i),0),Math.max(h.findIndex(g=>g.shouldCallHandler()),0)),y=kl(h,h[m].route.id).route.id;return Promise.resolve({[y]:{type:"error",result:r}})}}}async function zR(t,e,n,r,i){let{matches:o,request:h,params:m,context:y,unstable_pattern:g}=t,E=o.flatMap(N=>N.route.middleware?N.route.middleware.map(I=>[N.route.id,I]):[]);return await z6({request:h,params:m,context:y,unstable_pattern:g},E,e,n,r,i)}async function z6(t,e,n,r,i,o,h=0){let{request:m}=t;if(m.signal.aborted)throw m.signal.reason??new Error(`Request aborted: ${m.method} ${m.url}`);let y=e[h];if(!y)return await n();let[g,E]=y,S,N=async()=>{if(S)throw new Error("You may only call `next()` once per middleware");try{return S={value:await z6(t,e,n,r,i,o,h+1)},S.value}catch(I){return S={value:await o(I,g,S)},S.value}};try{let I=await E(t,N),R=I!=null?r(I):void 0;return i(R)?R:S?R??S.value:(S={value:await N()},S.value)}catch(I){return await o(I,g,S)}}function H6(t,e,n,r,i){let o=U6({key:"middleware",route:r.route,manifest:e,mapRouteProperties:t}),h=UR(r.route,Qi(n.method)?"action":"loader",e,t,i);return{middleware:o,route:h.lazyRoutePromise,handler:h.lazyHandlerPromise}}function ev(t,e,n,r,i,o,h,m,y=null,g){let E=!1,S=H6(t,e,n,i,o);return{...i,_lazyPromises:S,shouldLoad:m,shouldRevalidateArgs:y,shouldCallHandler(N){return E=!0,y?typeof g=="boolean"?Cf(i,{...y,defaultShouldRevalidate:g}):typeof N=="boolean"?Cf(i,{...y,defaultShouldRevalidate:N}):Cf(i,y):m},resolve(N){let{lazy:I,loader:R,middleware:D}=i.route,j=E||m||N&&!Qi(n.method)&&(I||R),B=D&&D.length>0&&!R&&!I;return j&&(Qi(n.method)||!B)?qR({request:n,unstable_pattern:r,match:i,lazyHandlerPromise:S?.handler,lazyRoutePromise:S?.route,handlerOverride:N,scopedContext:h}):Promise.resolve({type:"data",result:void 0})}}}function Gu(t,e,n,r,i,o,h,m=null){return r.map(y=>y.route.id!==i.route.id?{...y,shouldLoad:!1,shouldRevalidateArgs:m,shouldCallHandler:()=>!1,_lazyPromises:H6(t,e,n,y,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:ev(t,e,n,md(r),y,o,h,!0,m))}async function HR(t,e,n,r,i,o){n.some(g=>g._lazyPromises?.middleware)&&await Promise.all(n.map(g=>g._lazyPromises?.middleware));let h={request:e,unstable_pattern:md(n),params:n[0].params,context:i,matches:n},y=await t({...h,fetcherKey:r,runClientMiddleware:g=>{let E=h;return F6(E,()=>g({...E,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(g=>[g._lazyPromises?.handler,g._lazyPromises?.route]))}catch{}return y}async function qR({request:t,unstable_pattern:e,match:n,lazyHandlerPromise:r,lazyRoutePromise:i,handlerOverride:o,scopedContext:h}){let m,y,g=Qi(t.method),E=g?"action":"loader",S=N=>{let I,R=new Promise((B,H)=>I=H);y=()=>I(),t.signal.addEventListener("abort",y);let D=B=>typeof N!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${E}" [routeId: ${n.route.id}]`)):N({request:t,unstable_pattern:e,params:n.params,context:h},...B!==void 0?[B]:[]),j=(async()=>{try{return{type:"data",result:await(o?o(H=>D(H)):D())}}catch(B){return{type:"error",result:B}}})();return Promise.race([j,R])};try{let N=g?n.route.action:n.route.loader;if(r||i)if(N){let I,[R]=await Promise.all([S(N).catch(D=>{I=D}),r,i]);if(I!==void 0)throw I;m=R}else{await r;let I=g?n.route.action:n.route.loader;if(I)[m]=await Promise.all([S(I),i]);else if(E==="action"){let R=new URL(t.url),D=R.pathname+R.search;throw ua(405,{method:t.method,pathname:D,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(N)m=await S(N);else{let I=new URL(t.url),R=I.pathname+I.search;throw ua(404,{pathname:R})}}catch(N){return{type:"error",result:N}}finally{y&&t.signal.removeEventListener("abort",y)}return m}async function VR(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function GR(t){let{result:e,type:n}=t;if(Cb(e)){let r;try{r=await VR(e)}catch(i){return{type:"error",error:i}}return n==="error"?{type:"error",error:new pd(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return n==="error"?BS(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:XR(e),statusCode:Hf(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Hf(e)?e.status:void 0}:BS(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function KR(t,e,n,r,i){let o=t.headers.get("Location");if(An(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!c1(o)){let h=r.slice(0,r.findIndex(m=>m.route.id===n)+1);o=Zy(new URL(e.url),h,i,o),t.headers.set("Location",o)}return t}function MS(t,e,n){if(c1(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=wa(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function Ou(t,e,n,r){let i=t.createURL(q6(e)).toString(),o={signal:n};if(r&&Qi(r.formMethod)){let{formMethod:h,formEncType:m}=r;o.method=h.toUpperCase(),m==="application/json"?(o.headers=new Headers({"Content-Type":m}),o.body=JSON.stringify(r.json)):m==="text/plain"?o.body=r.text:m==="application/x-www-form-urlencoded"&&r.formData?o.body=tv(r.formData):o.body=r.formData}return new Request(i,o)}function tv(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function DS(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function $R(t,e,n,r=!1,i=!1){let o={},h=null,m,y=!1,g={},E=n&&Bs(n[1])?n[1].error:void 0;return t.forEach(S=>{if(!(S.route.id in e))return;let N=S.route.id,I=e[N];if(An(!Ec(I),"Cannot handle redirect results in processLoaderData"),Bs(I)){let R=I.error;if(E!==void 0&&(R=E,E=void 0),h=h||{},i)h[N]=R;else{let D=kl(t,N);h[D.route.id]==null&&(h[D.route.id]=R)}r||(o[N]=B6),y||(y=!0,m=Hf(I.error)?I.error.status:500),I.headers&&(g[N]=I.headers)}else o[N]=I.data,I.statusCode&&I.statusCode!==200&&!y&&(m=I.statusCode),I.headers&&(g[N]=I.headers)}),E!==void 0&&n&&(h={[n[0]]:E},n[2]&&(o[n[2]]=void 0)),{loaderData:o,errors:h,statusCode:m||200,loaderHeaders:g}}function LS(t,e,n,r,i,o){let{loaderData:h,errors:m}=$R(e,n,r);return i.filter(y=>!y.matches||y.matches.some(g=>g.shouldLoad)).forEach(y=>{let{key:g,match:E,controller:S}=y;if(S&&S.signal.aborted)return;let N=o[g];if(An(N,"Did not find corresponding fetcher result"),Bs(N)){let I=kl(t.matches,E?.route.id);m&&m[I.route.id]||(m={...m,[I.route.id]:N.error}),t.fetchers.delete(g)}else if(Ec(N))An(!1,"Unhandled fetcher revalidation redirect");else{let I=Uo(N.data);t.fetchers.set(g,I)}}),{loaderData:h,errors:m}}function kS(t,e,n,r){let i=Object.entries(e).filter(([,o])=>o!==B6).reduce((o,[h,m])=>(o[h]=m,o),{});for(let o of n){let h=o.route.id;if(!e.hasOwnProperty(h)&&t.hasOwnProperty(h)&&o.route.loader&&(i[h]=t[h]),r&&r.hasOwnProperty(h))break}return i}function jS(t){return t?Bs(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function kl(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function zp(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ua(t,{pathname:e,routeId:n,method:r,type:i,message:o}={}){let h="Unknown Server Error",m="Unknown @remix-run/router error";return t===400?(h="Bad Request",r&&e&&n?m=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(m="Unable to encode submission body")):t===403?(h="Forbidden",m=`Route "${n}" does not match URL "${e}"`):t===404?(h="Not Found",m=`No route matches URL "${e}"`):t===405&&(h="Method Not Allowed",r&&e&&n?m=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(m=`Invalid request method "${r.toUpperCase()}"`)),new pd(t||500,h,new Error(m),!0)}function Hp(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Ec(i))return{key:r,result:i}}}function q6(t){let e=typeof t=="string"?Wo(t):t;return ao({...e,hash:""})}function YR(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function XR(t){return new pd(t.init?.status??500,t.init?.statusText??"Internal Server Error",t.data)}function WR(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,n])=>typeof e=="string"&&QR(n))}function QR(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function ZR(t){return Cb(t.result)&&k6.has(t.result.status)}function Bs(t){return t.type==="error"}function Ec(t){return(t&&t.type)==="redirect"}function BS(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Cb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function JR(t){return k6.has(t)}function eM(t){return Cb(t)&&JR(t.status)&&t.headers.has("Location")}function tM(t){return RR.has(t.toUpperCase())}function Qi(t){return OR.has(t.toUpperCase())}function Tb(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function um(t,e){let n=typeof e=="string"?Wo(e).search:e.search;if(t[t.length-1].route.index&&Tb(n||""))return t[t.length-1];let r=I6(t);return r[r.length-1]}function PS(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:h}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(h!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:h,text:void 0}}}function kg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function nM(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function cf(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function rM(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Uo(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function iM(t,e){try{let n=t.sessionStorage.getItem(j6);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function sM(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(j6,JSON.stringify(n))}catch(r){zr(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function US(){let t,e,n=new Promise((r,i)=>{t=async o=>{r(o);try{await n}catch{}},e=async o=>{i(o);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var Gc=W.createContext(null);Gc.displayName="DataRouter";var gd=W.createContext(null);gd.displayName="DataRouterState";var V6=W.createContext(!1);function aM(){return W.useContext(V6)}var Nb=W.createContext({isTransitioning:!1});Nb.displayName="ViewTransition";var G6=W.createContext(new Map);G6.displayName="Fetchers";var oM=W.createContext(null);oM.displayName="Await";var Vs=W.createContext(null);Vs.displayName="Navigation";var f1=W.createContext(null);f1.displayName="Location";var Ea=W.createContext({outlet:null,matches:[],isDataRoute:!1});Ea.displayName="Route";var _b=W.createContext(null);_b.displayName="RouteError";var K6="REACT_ROUTER_ERROR",lM="REDIRECT",cM="ROUTE_ERROR_RESPONSE";function uM(t){if(t.startsWith(`${K6}:${lM}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function hM(t){if(t.startsWith(`${K6}:${cM}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pd(e.status,e.statusText,e.data)}catch{}}function fM(t,{relative:e}={}){An(yh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=W.useContext(Vs),{hash:i,pathname:o,search:h}=vd(t,{relative:e}),m=o;return n!=="/"&&(m=o==="/"?n:no([n,o])),r.createHref({pathname:m,search:h,hash:i})}function yh(){return W.useContext(f1)!=null}function ho(){return An(yh(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(f1).location}var $6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Y6(t){W.useContext(Vs).static||W.useLayoutEffect(t)}function Ti(){let{isDataRoute:t}=W.useContext(Ea);return t?NM():dM()}function dM(){An(yh(),"useNavigate() may be used only in the context of a <Router> component.");let t=W.useContext(Gc),{basename:e,navigator:n}=W.useContext(Vs),{matches:r}=W.useContext(Ea),{pathname:i}=ho(),o=JSON.stringify(u1(r)),h=W.useRef(!1);return Y6(()=>{h.current=!0}),W.useCallback((y,g={})=>{if(zr(h.current,$6),!h.current)return;if(typeof y=="number"){n.go(y);return}let E=h1(y,JSON.parse(o),i,g.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:no([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,o,i,t])}var pM=W.createContext(null);function mM(t){let e=W.useContext(Ea).outlet;return W.useMemo(()=>e&&W.createElement(pM.Provider,{value:t},e),[e,t])}function yd(){let{matches:t}=W.useContext(Ea),e=t[t.length-1];return e?e.params:{}}function vd(t,{relative:e}={}){let{matches:n}=W.useContext(Ea),{pathname:r}=ho(),i=JSON.stringify(u1(n));return W.useMemo(()=>h1(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function gM(t,e,n,r,i){An(yh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=W.useContext(Vs),{matches:h}=W.useContext(Ea),m=h[h.length-1],y=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",S=m&&m.route;{let H=S&&S.path||"";W6(g,!S||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let N=ho(),I;I=N;let R=I.pathname||"/",D=R;if(E!=="/"){let H=E.replace(/^\//,"").split("/");D="/"+R.replace(/^\//,"").split("/").slice(H.length).join("/")}let j=Ll(t,{pathname:D});return zr(S||j!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),zr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),xM(j&&j.map(H=>Object.assign({},H,{params:Object.assign({},y,H.params),pathname:no([E,o.encodeLocation?o.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?E:no([E,o.encodeLocation?o.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),h,n,r,i)}function yM(){let t=TM(),e=Hf(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",t),h=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:o},"ErrorBoundary")," or"," ",W.createElement("code",{style:o},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:i},n):null,h)}var vM=W.createElement(yM,null),X6=class extends W.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=hM(t.digest);n&&(t=n)}let e=t!==void 0?W.createElement(Ea.Provider,{value:this.props.routeContext},W.createElement(_b.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?W.createElement(bM,{error:t},e):e}};X6.contextType=V6;var jg=new WeakMap;function bM({children:t,error:e}){let{basename:n}=W.useContext(Vs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=uM(e.digest);if(r){let i=jg.get(e);if(i)throw i;let o=M6(r.location,n);if(R6&&!jg.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw jg.set(e,h),h}return W.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function wM({routeContext:t,match:e,children:n}){let r=W.useContext(Gc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(Ea.Provider,{value:t},n)}function xM(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,h=n?.errors;if(h!=null){let E=o.findIndex(S=>S.route.id&&h?.[S.route.id]!==void 0);An(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),o=o.slice(0,Math.min(o.length,E+1))}let m=!1,y=-1;if(n)for(let E=0;E<o.length;E++){let S=o[E];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(y=E),S.route.id){let{loaderData:N,errors:I}=n,R=S.route.loader&&!N.hasOwnProperty(S.route.id)&&(!I||I[S.route.id]===void 0);if(S.route.lazy||R){m=!0,y>=0?o=o.slice(0,y+1):o=[o[0]];break}}}let g=n&&r?(E,S)=>{r(E,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:md(n.matches),errorInfo:S})}:void 0;return o.reduceRight((E,S,N)=>{let I,R=!1,D=null,j=null;n&&(I=h&&S.route.id?h[S.route.id]:void 0,D=S.route.errorElement||vM,m&&(y<0&&N===0?(W6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,j=null):y===N&&(R=!0,j=S.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,N+1)),H=()=>{let V;return I?V=D:R?V=j:S.route.Component?V=W.createElement(S.route.Component,null):S.route.element?V=S.route.element:V=E,W.createElement(wM,{match:S,routeContext:{outlet:E,matches:B,isDataRoute:n!=null},children:V})};return n&&(S.route.ErrorBoundary||S.route.errorElement||N===0)?W.createElement(X6,{location:n.location,revalidation:n.revalidation,component:D,error:I,children:H(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:g}):H()},null)}function Ob(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EM(t){let e=W.useContext(Gc);return An(e,Ob(t)),e}function SM(t){let e=W.useContext(gd);return An(e,Ob(t)),e}function AM(t){let e=W.useContext(Ea);return An(e,Ob(t)),e}function Ib(t){let e=AM(t),n=e.matches[e.matches.length-1];return An(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function CM(){return Ib("useRouteId")}function TM(){let t=W.useContext(_b),e=SM("useRouteError"),n=Ib("useRouteError");return t!==void 0?t:e.errors?.[n]}function NM(){let{router:t}=EM("useNavigate"),e=Ib("useNavigate"),n=W.useRef(!1);return Y6(()=>{n.current=!0}),W.useCallback(async(i,o={})=>{zr(n.current,$6),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var FS={};function W6(t,e,n){!e&&!FS[t]&&(FS[t]=!0,zr(!1,n))}var zS={};function HS(t,e){!t&&!zS[e]&&(zS[e]=!0,console.warn(e))}var _M="useOptimistic",qS=YI[_M],OM=()=>{};function IM(t){return qS?qS(t):[t,OM]}function RM(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&zr(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:W.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&zr(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:W.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&zr(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:W.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var MM=["HydrateFallback","hydrateFallbackElement"],DM=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function LM({router:t,flushSync:e,onError:n,unstable_useTransitions:r}){r=aM()||r;let[o,h]=W.useState(t.state),[m,y]=IM(o),[g,E]=W.useState(),[S,N]=W.useState({isTransitioning:!1}),[I,R]=W.useState(),[D,j]=W.useState(),[B,H]=W.useState(),V=W.useRef(new Map),se=W.useCallback((ce,{deletedFetchers:de,newErrors:ze,flushSync:Q,viewTransitionOpts:fe})=>{ze&&n&&Object.values(ze).forEach(Ne=>n(Ne,{location:ce.location,params:ce.matches[0]?.params??{},unstable_pattern:md(ce.matches)})),ce.fetchers.forEach((Ne,ie)=>{Ne.data!==void 0&&V.current.set(ie,Ne.data)}),de.forEach(Ne=>V.current.delete(Ne)),HS(Q===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let he=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(HS(fe==null||he,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!fe||!he){e&&Q?e(()=>h(ce)):r===!1?h(ce):W.startTransition(()=>{r===!0&&y(Ne=>VS(Ne,ce)),h(ce)});return}if(e&&Q){e(()=>{D&&(I?.resolve(),D.skipTransition()),N({isTransitioning:!0,flushSync:!0,currentLocation:fe.currentLocation,nextLocation:fe.nextLocation})});let Ne=t.window.document.startViewTransition(()=>{e(()=>h(ce))});Ne.finished.finally(()=>{e(()=>{R(void 0),j(void 0),E(void 0),N({isTransitioning:!1})})}),e(()=>j(Ne));return}D?(I?.resolve(),D.skipTransition(),H({state:ce,currentLocation:fe.currentLocation,nextLocation:fe.nextLocation})):(E(ce),N({isTransitioning:!0,flushSync:!1,currentLocation:fe.currentLocation,nextLocation:fe.nextLocation}))},[t.window,e,D,I,r,y,n]);W.useLayoutEffect(()=>t.subscribe(se),[t,se]),W.useEffect(()=>{S.isTransitioning&&!S.flushSync&&R(new DM)},[S]),W.useEffect(()=>{if(I&&g&&t.window){let ce=g,de=I.promise,ze=t.window.document.startViewTransition(async()=>{r===!1?h(ce):W.startTransition(()=>{r===!0&&y(Q=>VS(Q,ce)),h(ce)}),await de});ze.finished.finally(()=>{R(void 0),j(void 0),E(void 0),N({isTransitioning:!1})}),j(ze)}},[g,I,t.window,r,y]),W.useEffect(()=>{I&&g&&m.location.key===g.location.key&&I.resolve()},[I,D,m.location,g]),W.useEffect(()=>{!S.isTransitioning&&B&&(E(B.state),N({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}),H(void 0))},[S.isTransitioning,B]);let ee=W.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:ce=>t.navigate(ce),push:(ce,de,ze)=>t.navigate(ce,{state:de,preventScrollReset:ze?.preventScrollReset}),replace:(ce,de,ze)=>t.navigate(ce,{replace:!0,state:de,preventScrollReset:ze?.preventScrollReset})}),[t]),J=t.basename||"/",F=W.useMemo(()=>({router:t,navigator:ee,static:!1,basename:J,onError:n}),[t,ee,J,n]);return W.createElement(W.Fragment,null,W.createElement(Gc.Provider,{value:F},W.createElement(gd.Provider,{value:m},W.createElement(G6.Provider,{value:V.current},W.createElement(Nb.Provider,{value:S},W.createElement(UM,{basename:J,location:m.location,navigationType:m.historyAction,navigator:ee,unstable_useTransitions:r},W.createElement(kM,{routes:t.routes,future:t.future,state:m,onError:n})))))),null)}function VS(t,e){return{...t,navigation:e.navigation.state!=="idle"?e.navigation:t.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:t.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:t.actionData,fetchers:e.fetchers}}var kM=W.memo(jM);function jM({routes:t,future:e,state:n,onError:r}){return gM(t,void 0,n,r,e)}function BM({to:t,replace:e,state:n,relative:r}){An(yh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=W.useContext(Vs);zr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=W.useContext(Ea),{pathname:h}=ho(),m=Ti(),y=h1(t,u1(o),h,r==="path"),g=JSON.stringify(y);return W.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:r})},[m,g,r,e,n]),null}function PM(t){return mM(t.context)}function UM({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:h}){An(!yh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),y=W.useMemo(()=>({basename:m,navigator:i,static:o,unstable_useTransitions:h,future:{}}),[m,i,o,h]);typeof n=="string"&&(n=Wo(n));let{pathname:g="/",search:E="",hash:S="",state:N=null,key:I="default"}=n,R=W.useMemo(()=>{let D=wa(g,m);return D==null?null:{location:{pathname:D,search:E,hash:S,state:N,key:I},navigationType:r}},[m,g,E,S,N,I,r]);return zr(R!=null,`<Router basename="${m}"> is not able to match the URL "${g}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:W.createElement(Vs.Provider,{value:y},W.createElement(f1.Provider,{children:e,value:R}))}var hm="get",fm="application/x-www-form-urlencoded";function d1(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function FM(t){return d1(t)&&t.tagName.toLowerCase()==="button"}function zM(t){return d1(t)&&t.tagName.toLowerCase()==="form"}function HM(t){return d1(t)&&t.tagName.toLowerCase()==="input"}function qM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VM(t,e){return t.button===0&&(!e||e==="_self")&&!qM(t)}function nv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function GM(t,e){let n=nv(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var qp=null;function KM(){if(qp===null)try{new FormData(document.createElement("form"),0),qp=!1}catch{qp=!0}return qp}var $M=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bg(t){return t!=null&&!$M.has(t)?(zr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fm}"`),null):t}function YM(t,e){let n,r,i,o,h;if(zM(t)){let m=t.getAttribute("action");r=m?wa(m,e):null,n=t.getAttribute("method")||hm,i=Bg(t.getAttribute("enctype"))||fm,o=new FormData(t)}else if(FM(t)||HM(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=t.getAttribute("formaction")||m.getAttribute("action");if(r=y?wa(y,e):null,n=t.getAttribute("formmethod")||m.getAttribute("method")||hm,i=Bg(t.getAttribute("formenctype"))||Bg(m.getAttribute("enctype"))||fm,o=new FormData(m,t),!KM()){let{name:g,type:E,value:S}=t;if(E==="image"){let N=g?`${g}.`:"";o.append(`${N}x`,"0"),o.append(`${N}y`,"0")}else g&&o.append(g,S)}}else{if(d1(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hm,r=null,i=fm,h=t}return o&&i==="text/plain"&&(h=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function XM(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&wa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function WM(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QM(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ZM(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let h=await WM(o,n);return h.links?h.links():[]}return[]}));return nD(r.flat(1).filter(QM).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function GS(t,e,n,r,i,o){let h=(y,g)=>n[g]?y.route.id!==n[g].route.id:!0,m=(y,g)=>n[g].pathname!==y.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==y.params["*"];return o==="assets"?e.filter((y,g)=>h(y,g)||m(y,g)):o==="data"?e.filter((y,g)=>{let E=r.routes[y.route.id];if(!E||!E.hasLoader)return!1;if(h(y,g)||m(y,g))return!0;if(y.route.shouldRevalidate){let S=y.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function JM(t,e,{includeHydrateFallback:n}={}){return eD(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function eD(t){return[...new Set(t)]}function tD(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function nD(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(tD(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function Q6(){let t=W.useContext(Gc);return Rb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function rD(){let t=W.useContext(gd);return Rb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Mb=W.createContext(void 0);Mb.displayName="FrameworkContext";function Z6(){let t=W.useContext(Mb);return Rb(t,"You must render this element inside a <HydratedRouter> element"),t}function iD(t,e){let n=W.useContext(Mb),[r,i]=W.useState(!1),[o,h]=W.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:g,onMouseLeave:E,onTouchStart:S}=e,N=W.useRef(null);W.useEffect(()=>{if(t==="render"&&h(!0),t==="viewport"){let D=B=>{B.forEach(H=>{h(H.isIntersecting)})},j=new IntersectionObserver(D,{threshold:.5});return N.current&&j.observe(N.current),()=>{j.disconnect()}}},[t]),W.useEffect(()=>{if(r){let D=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(D)}}},[r]);let I=()=>{i(!0)},R=()=>{i(!1),h(!1)};return n?t!=="intent"?[o,N,{}]:[o,N,{onFocus:uf(m,I),onBlur:uf(y,R),onMouseEnter:uf(g,I),onMouseLeave:uf(E,R),onTouchStart:uf(S,I)}]:[!1,N,{}]}function uf(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function sD({page:t,...e}){let{router:n}=Q6(),r=W.useMemo(()=>Ll(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?W.createElement(oD,{page:t,matches:r,...e}):null}function aD(t){let{manifest:e,routeModules:n}=Z6(),[r,i]=W.useState([]);return W.useEffect(()=>{let o=!1;return ZM(t,e,n).then(h=>{o||i(h)}),()=>{o=!0}},[t,e,n]),r}function oD({page:t,matches:e,...n}){let r=ho(),{manifest:i,routeModules:o}=Z6(),{basename:h}=Q6(),{loaderData:m,matches:y}=rD(),g=W.useMemo(()=>GS(t,e,y,i,r,"data"),[t,e,y,i,r]),E=W.useMemo(()=>GS(t,e,y,i,r,"assets"),[t,e,y,i,r]),S=W.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let R=new Set,D=!1;if(e.forEach(B=>{let H=i.routes[B.route.id];!H||!H.hasLoader||(!g.some(V=>V.route.id===B.route.id)&&B.route.id in m&&o[B.route.id]?.shouldRevalidate||H.hasClientLoader?D=!0:R.add(B.route.id))}),R.size===0)return[];let j=XM(t,h,"data");return D&&R.size>0&&j.searchParams.set("_routes",e.filter(B=>R.has(B.route.id)).map(B=>B.route.id).join(",")),[j.pathname+j.search]},[h,m,r,i,g,e,t,o]),N=W.useMemo(()=>JM(E,i),[E,i]),I=aD(E);return W.createElement(W.Fragment,null,S.map(R=>W.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),N.map(R=>W.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),I.map(({key:R,link:D})=>W.createElement("link",{key:R,nonce:n.nonce,...D})))}function lD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var cD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cD&&(window.__reactRouterVersion="7.11.0")}catch{}function uD(t,e){return kR({basename:e?.basename,getContext:e?.getContext,future:e?.future,history:QI({window:e?.window}),hydrationData:hD(),routes:t,mapRouteProperties:RM,hydrationRouteProperties:MM,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window,unstable_instrumentations:e?.unstable_instrumentations}).initialize()}function hD(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:fD(t.errors)}),t}function fD(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new pd(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let h=new o(i.message);h.stack="",n[r]=h}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}var J6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e5=W.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:h,state:m,target:y,to:g,preventScrollReset:E,viewTransition:S,unstable_defaultShouldRevalidate:N,...I},R){let{basename:D,unstable_useTransitions:j}=W.useContext(Vs),B=typeof g=="string"&&J6.test(g),H=M6(g,D);g=H.to;let V=fM(g,{relative:i}),[se,ee,J]=iD(r,I),F=gD(g,{replace:h,state:m,target:y,preventScrollReset:E,relative:i,viewTransition:S,unstable_defaultShouldRevalidate:N,unstable_useTransitions:j});function ce(ze){e&&e(ze),ze.defaultPrevented||F(ze)}let de=W.createElement("a",{...I,...J,href:H.absoluteURL||V,onClick:H.isExternal||o?e:ce,ref:lD(R,ee),target:y,"data-discover":!B&&n==="render"?"true":void 0});return se&&!B?W.createElement(W.Fragment,null,de,W.createElement(sD,{page:V})):de});e5.displayName="Link";var dD=W.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:h,viewTransition:m,children:y,...g},E){let S=vd(h,{relative:g.relative}),N=ho(),I=W.useContext(gd),{navigator:R,basename:D}=W.useContext(Vs),j=I!=null&&xD(S)&&m===!0,B=R.encodeLocation?R.encodeLocation(S).pathname:S.pathname,H=N.pathname,V=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(H=H.toLowerCase(),V=V?V.toLowerCase():null,B=B.toLowerCase()),V&&D&&(V=wa(V,D)||V);const se=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ee=H===B||!i&&H.startsWith(B)&&H.charAt(se)==="/",J=V!=null&&(V===B||!i&&V.startsWith(B)&&V.charAt(B.length)==="/"),F={isActive:ee,isPending:J,isTransitioning:j},ce=ee?e:void 0,de;typeof r=="function"?de=r(F):de=[r,ee?"active":null,J?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ze=typeof o=="function"?o(F):o;return W.createElement(e5,{...g,"aria-current":ce,className:de,ref:E,style:ze,to:h,viewTransition:m},typeof y=="function"?y(F):y)});dD.displayName="NavLink";var pD=W.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:h=hm,action:m,onSubmit:y,relative:g,preventScrollReset:E,viewTransition:S,unstable_defaultShouldRevalidate:N,...I},R)=>{let{unstable_useTransitions:D}=W.useContext(Vs),j=bD(),B=wD(m,{relative:g}),H=h.toLowerCase()==="get"?"get":"post",V=typeof m=="string"&&J6.test(m),se=ee=>{if(y&&y(ee),ee.defaultPrevented)return;ee.preventDefault();let J=ee.nativeEvent.submitter,F=J?.getAttribute("formmethod")||h,ce=()=>j(J||ee.currentTarget,{fetcherKey:e,method:F,navigate:n,replace:i,state:o,relative:g,preventScrollReset:E,viewTransition:S,unstable_defaultShouldRevalidate:N});D&&n!==!1?W.startTransition(()=>ce()):ce()};return W.createElement("form",{ref:R,method:H,action:B,onSubmit:r?y:se,...I,"data-discover":!V&&t==="render"?"true":void 0})});pD.displayName="Form";function mD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t5(t){let e=W.useContext(Gc);return An(e,mD(t)),e}function gD(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:h,unstable_defaultShouldRevalidate:m,unstable_useTransitions:y}={}){let g=Ti(),E=ho(),S=vd(t,{relative:o});return W.useCallback(N=>{if(VM(N,e)){N.preventDefault();let I=n!==void 0?n:ao(E)===ao(S),R=()=>g(t,{replace:I,state:r,preventScrollReset:i,relative:o,viewTransition:h,unstable_defaultShouldRevalidate:m});y?W.startTransition(()=>R()):R()}},[E,g,S,n,r,e,t,i,o,h,m,y])}function n5(t){zr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=W.useRef(nv(t)),n=W.useRef(!1),r=ho(),i=W.useMemo(()=>GM(r.search,n.current?null:e.current),[r.search]),o=Ti(),h=W.useCallback((m,y)=>{const g=nv(typeof m=="function"?m(new URLSearchParams(i)):m);n.current=!0,o("?"+g,y)},[o,i]);return[i,h]}var yD=0,vD=()=>`__${String(++yD)}__`;function bD(){let{router:t}=t5("useSubmit"),{basename:e}=W.useContext(Vs),n=CM(),r=t.fetch,i=t.navigate;return W.useCallback(async(o,h={})=>{let{action:m,method:y,encType:g,formData:E,body:S}=YM(o,e);if(h.navigate===!1){let N=h.fetcherKey||vD();await r(N,n,h.action||m,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:E,body:S,formMethod:h.method||y,formEncType:h.encType||g,flushSync:h.flushSync})}else await i(h.action||m,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:E,body:S,formMethod:h.method||y,formEncType:h.encType||g,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[r,i,e,n])}function wD(t,{relative:e}={}){let{basename:n}=W.useContext(Vs),r=W.useContext(Ea);An(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...vd(t||".",{relative:e})},h=ho();if(t==null){o.search=h.search;let m=new URLSearchParams(o.search),y=m.getAll("index");if(y.some(E=>E==="")){m.delete("index"),y.filter(S=>S).forEach(S=>m.append("index",S));let E=m.toString();o.search=E?`?${E}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:no([n,o.pathname])),ao(o)}function xD(t,{relative:e}={}){let n=W.useContext(Nb);An(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=t5("useViewTransitionState"),i=vd(t,{relative:e});if(!n.isTransitioning)return!1;let o=wa(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=wa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Nm(i.pathname,h)!=null||Nm(i.pathname,o)!=null}var ED=A6();function SD(t){return W.createElement(LM,{flushSync:ED.flushSync,...t})}const AD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),KS=t=>{const e=CD(t);return e.charAt(0).toUpperCase()+e.slice(1)},r5=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),TD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var ND={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _D=W.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:h,...m},y)=>W.createElement("svg",{ref:y,...ND,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:r5("lucide",i),...!o&&!TD(m)&&{"aria-hidden":"true"},...m},[...h.map(([g,E])=>W.createElement(g,E)),...Array.isArray(o)?o:[o]]));const Kt=(t,e)=>{const n=W.forwardRef(({className:r,...i},o)=>W.createElement(_D,{ref:o,iconNode:e,className:r5(`lucide-${AD(KS(t))}`,`lucide-${t}`,r),...i}));return n.displayName=KS(t),n};const OD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ID=Kt("activity",OD);const RD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cs=Kt("arrow-left",RD);const MD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],i5=Kt("arrow-right",MD);const DD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],LD=Kt("award",DD);const kD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],nh=Kt("book-open",kD);const jD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],s5=Kt("calendar",jD);const BD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],PD=Kt("check",BD);const UD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_m=Kt("chevron-right",UD);const FD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rh=Kt("circle-check-big",FD);const zD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Db=Kt("circle-question-mark",zD);const HD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],qD=Kt("circle-x",HD);const VD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rv=Kt("clock",VD);const GD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],KD=Kt("copy",GD);const $D=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],YD=Kt("database",$D);const XD=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],WD=Kt("delete",XD);const QD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],a5=Kt("download",QD);const ZD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],bd=Kt("file-text",ZD);const JD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],$S=Kt("file",JD);const e9=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],iv=Kt("folder",e9);const t9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],sv=Kt("globe",t9);const n9=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],r9=Kt("graduation-cap",n9);const i9=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],av=Kt("house",i9);const s9=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],a9=Kt("laptop",s9);const o9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],o5=Kt("map-pin",o9);const l9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],ov=Kt("panels-top-left",l9);const c9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],YS=Kt("play",c9);const u9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ih=Kt("plus",u9);const h9=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],l5=Kt("qr-code",h9);const f9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],p1=Kt("refresh-cw",f9);const d9=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],p9=Kt("repeat",d9);const m9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],g9=Kt("save",m9);const y9=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],XS=Kt("scan",y9);const v9=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],dm=Kt("school",v9);const b9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],w9=Kt("send",b9);const x9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E9=Kt("settings",x9);const S9=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],A9=Kt("skip-forward",S9);const C9=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],T9=Kt("smartphone",C9);const N9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_9=Kt("square-pen",N9);const O9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Sc=Kt("star",O9);const I9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],R9=Kt("target",I9);const M9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wd=Kt("trash-2",M9);const D9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],L9=Kt("triangle-alert",D9);const k9=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Tf=Kt("trophy",k9);const j9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],B9=Kt("upload",j9);const P9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],U9=Kt("user-plus",P9);const F9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],c5=Kt("user",F9);const z9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],u5=Kt("users",z9);const H9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q9=Kt("wifi-off",H9);const V9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],G9=Kt("wifi",V9);const K9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xd=Kt("x",K9);const $9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],h5=Kt("zap",$9);function f5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=f5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function WS(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=f5(t))&&(r&&(r+=" "),r+=e);return r}const Y9="modulepreload",X9=function(t){return"/GramShiksha/"+t},QS={},m1=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let g=function(E){return Promise.all(E.map(S=>Promise.resolve(S).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};var h=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),y=m?.nonce||m?.getAttribute("nonce");i=g(n.map(E=>{if(E=X9(E),E in QS)return;QS[E]=!0;const S=E.endsWith(".css"),N=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${N}`))return;const I=document.createElement("link");if(I.rel=S?"stylesheet":Y9,S||(I.as="script"),I.crossOrigin="",I.href=E,y&&I.setAttribute("nonce",y),document.head.appendChild(I),S)return new Promise((R,D)=>{I.addEventListener("load",R),I.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${E}`)))})}))}function o(m){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=m,window.dispatchEvent(y),!y.defaultPrevented)throw m}return i.then(m=>{for(const y of m||[])y.status==="rejected"&&o(y.reason);return e().catch(o)})};function qf(t){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qf(t)}function W9(t,e){if(qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Q9(t){var e=W9(t,"string");return qf(e)=="symbol"?e:e+""}function Z9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q9(r.key),r)}}function Jl(t,e,n){return e&&Z9(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J9(t){return t[t.length-1]}function Vf(t){return Array.isArray(t)?t.slice(0):[t]}function e7(t,e){t=t.slice(0);for(var n=[];t.length;){var r=t.splice(0,e);n.push(r)}return n}function Om(t){return Array.isArray(t)}function t7(t){return t!=null}function Pg(t,e){var n=0,r=-1;for(var i of t){r=r+1;var o=e(i,r);if(o)n=n+1;else break}return n}function Dc(t,e){var n=e.length;if(n!==0){var r=t.length;t.length=r+e.length;for(var i=0;i<n;++i)t[r+i]=e[i]}}function n7(t){return t.filter(function(e,n,r){return r.indexOf(e)===n})}function Gl(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(r==="-")return parseInt(e,10);e+=r}throw new Error("malformatted revision: "+t)}function qo(t,e){var n=e?Gl(e._rev)+1:1;return n+"-"+t}function r7(t){var e=t.split("."),n=e.length;return n===1?r=>r[t]:r=>{for(var i=r,o=0;o<n;++o){var h=e[o];if(i=i[h],typeof i>"u")return i}return i}}function br(t){return Object.assign({},t)}function i7(t){return Object.keys(t)[0]}function Im(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((r,i)=>typeof r=="string"&&typeof i=="string"?r.localeCompare(i):typeof r=="object"?1:-1).map(r=>Im(r,e));if(typeof t=="object"&&!Array.isArray(t)){var n={};return Object.keys(t).sort((r,i)=>r.localeCompare(i)).forEach(r=>{n[r]=Im(t[r],e)}),n}return t}function lv(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),n=e.length;n--;)e[n]=lv(t[n]);return e}var r={};for(var i in t)r[i]=lv(t[i]);return r}var us=lv;function zo(t,e,n){return Object.defineProperty(t,e,{get:function(){return n}}),n}var Lb=1;function vh(){return{lwt:Lb}}function Pa(){return""}function s7(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function a7(t,e,n){if(e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;){var o=e[r],h=n[r];if(r++,o[t]!==h[t]||o._rev!==h._rev||o._meta.lwt!==h._meta.lwt)return!1}return!0}function Gf(t,e){return Gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Gf(t,e)}function kb(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Gf(t,e)}function cv(t){return cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cv(t)}function o7(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function d5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d5=function(){return!!t})()}function l7(t,e,n){if(d5())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&Gf(i,n.prototype),i}function Rm(t){var e=typeof Map=="function"?new Map:void 0;return Rm=function(r){if(r===null||!o7(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return l7(r,arguments,cv(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Gf(i,r)},Rm(t)}var ar={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return`
        RxDB Error-Code: `+t+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function c7(t){var e="";return Object.keys(t).length===0||(e+="-".repeat(20)+`
`,e+=`Parameters:
`,e+=Object.keys(t).map(n=>{var r="[object Object]";try{n==="errors"?r=t[n].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):r=JSON.stringify(t[n],function(i,o){return o===void 0?null:o},2)}catch{}return n+": "+r}).join(`
`),e+=`
`),e}function p5(t,e,n){return`
`+t+`
`+c7(n)}var u7=(function(t){function e(r,i,o={}){var h,m=p5(i,r,o);return h=t.call(this,m)||this,h.code=r,h.message=m,h.url=jb(r),h.parameters=o,h.rxdb=!0,h}kb(e,t);var n=e.prototype;return n.toString=function(){return this.message},Jl(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])})(Rm(Error)),h7=(function(t){function e(r,i,o={}){var h,m=p5(i,r,o);return h=t.call(this,m)||this,h.code=r,h.message=m,h.url=jb(r),h.parameters=o,h.rxdb=!0,h}kb(e,t);var n=e.prototype;return n.toString=function(){return this.message},Jl(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])})(Rm(TypeError));function jb(t){return"https://rxdb.info/errors.html?console=errors#"+t}function m5(t){return`
Find out more about this error here: `+jb(t)+` 
`}function St(t,e){return new u7(t,ar.tunnelErrorMessage(t)+m5(t),e)}function da(t,e){return new h7(t,ar.tunnelErrorMessage(t)+m5(t),e)}function sh(t){return t&&t.status===409?t:!1}var f7={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function g5(t){return St("COL20",{name:f7[t.status],document:t.documentId,writeError:t})}var Vp;function d7(){if(Vp)return Vp;if(typeof crypto>"u"||typeof crypto.subtle>"u"||typeof crypto.subtle.digest!="function")throw St("UT8",{args:{typeof_crypto:typeof crypto,typeof_crypto_subtle:typeof crypto?.subtle,typeof_crypto_subtle_digest:typeof crypto?.subtle?.digest}});return Vp=crypto.subtle.digest.bind(crypto.subtle),Vp}async function p7(t){var e=new TextEncoder().encode(t),n=await d7()("SHA-256",e),r=Array.prototype.map.call(new Uint8Array(n),i=>("00"+i.toString(16)).slice(-2)).join("");return r}var y5=p7;function m7(){return new Promise(t=>setTimeout(t,0))}function g7(t=0){return new Promise(e=>setTimeout(e,t))}function v5(t){return t&&typeof t.then=="function"?t:Promise.resolve(t)}var Bb=Promise.resolve(!0),oo=Promise.resolve(!1),Pb=Promise.resolve(null),ma=Promise.resolve();function g1(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):g7(0)}var Ug=ma;function y7(t=void 0){return Ug=Ug.then(()=>g1(t)),Ug}function v7(t,e){return t.reduce((n,r)=>n.then(r),Promise.resolve(e))}var b7=/\./g,ZS="abcdefghijklmnopqrstuvwxyz";function Ed(t=10){for(var e="",n=0;n<t;n++)e+=ZS.charAt(Math.floor(Math.random()*ZS.length));return e}function b5(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function vf(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function Kf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Kf(t[r],e[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){var o=i[r];if(!Kf(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}var uv=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},Fg=new Set(["__proto__","prototype","constructor"]),w7=new Set("0123456789");function w5(t){var e=[],n="",r="start",i=!1;for(var o of t)switch(o){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=o),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=o;break}if(Fg.has(n))return[];e.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=o;break}if(r==="property"){if(Fg.has(n))return[];e.push(n),n=""}r="index";break}case"]":{if(r==="index"){e.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!w7.has(o))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=o}}switch(i&&(n+="\\"),r){case"property":{if(Fg.has(n))return[];e.push(n);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function x5(t,e){if(typeof e!="number"&&Array.isArray(t)){var n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}function x7(t,e){if(x5(t,e))throw new Error("Cannot use string index")}function Kl(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!uv(t)||typeof e!="string")return n===void 0?t:n;var r=w5(e);if(r.length===0)return n;for(var i=0;i<r.length;i++){var o=r[i];if(x5(t,o)?t=i===r.length-1?void 0:null:t=t[o],t==null){if(i!==r.length-1)return n;break}}return t===void 0?n:t}function E5(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!uv(t)||typeof e!="string")return t;for(var r=t,i=w5(e),o=0;o<i.length;o++){var h=i[o];x7(t,h),o===i.length-1?t[h]=n:uv(t[h])||(t[h]=typeof i[o+1]=="number"?[]:{}),t=t[h]}return r}function ah(t,e){var n=t.get(e);if(typeof n>"u")throw new Error("missing value from map "+e);return n}function zs(t,e,n,r){var i=t.get(e);return typeof i>"u"&&(i=n(),t.set(e,i)),i}function yr(t){var e=t.split("-"),n="RxDB";return e.forEach(r=>{n+=b5(r)}),n+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+n+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+n+`);
        `)}function hv(t){var e={name:t.name,message:t.message,rxdb:t.rxdb,parameters:t.parameters,extensions:t.extensions,code:t.code,url:t.url,stack:t.stack?t.stack.replace(/\n/g,` 
 `):void 0};return e}var zg=0;function Gs(){var t=Date.now();t=t+.01,t<=zg&&(t=zg+.01);var e=parseFloat(t.toFixed(2));return zg=e,e}function Ft(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var Sd={bufferSize:1,refCount:!0},S5="16.21.1",Hg={},E7="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93",JS=16,qg=oo,e4=!1;async function A5(){return e4||(e4=!0,qg=(async()=>!!(Hg.premium&&typeof Hg.premium=="string"&&await y5(Hg.premium)===E7))()),qg}var $f={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postCloseRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],prePrepareRxQuery:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preCloseRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Ts(t,e){$f[t].length>0&&$f[t].forEach(n=>n(e))}async function Lc(t,e){for(var n of $f[t])await n(e)}function oh(t,e){var n=e;n=n.replace(b7,".properties."),n="properties."+n,n=vf(n);var r=Kl(t,n);return r}function S7(t,e,n){if(typeof e.primaryKey=="string")return n;var r=ec(e,n),i=n[t];if(i&&i!==r)throw St("DOC19",{args:{documentData:n,existingPrimary:i,newPrimary:r},schema:e});return n[t]=r,n}function Ks(t){return typeof t=="string"?t:t.key}function A7(t){var e=Ks(t.primaryKey),n=oh(t,e);return Ft(n.maxLength)}function ec(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var n=t.primaryKey;return n.fields.map(r=>{var i=Kl(e,r);if(typeof i>"u")throw St("DOC18",{args:{field:r,documentData:e}});return i}).join(n.separator)}function C7(t){var e=Im(t,!0);return e}function T7(t){return["_deleted",t]}function y1(t){t=br(t);var e=Ks(t.primaryKey);t.properties=br(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=_7,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var n=C5(t);Dc(t.required,n),t.required=t.required.filter(o=>!o.includes(".")).filter((o,h,m)=>m.indexOf(o)===h),t.version=t.version||0;var r=t.indexes.map(o=>{var h=Om(o)?o.slice(0):[o];return h.includes(e)||h.push(e),h[0]!=="_deleted"&&h.unshift("_deleted"),h});r.length===0&&r.push(T7(e)),r.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(o=>{r.push(o)});var i=new Set;return r.filter(o=>{var h=o.join(",");return i.has(h)?!1:(i.add(h),!0)}),t.indexes=r,t}var N7=1e15,_7={type:"object",properties:{lwt:{type:"number",minimum:Lb,maximum:N7,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function C5(t){var e=Object.keys(t.properties).filter(r=>t.properties[r].final),n=Ks(t.primaryKey);return e.push(n),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(r=>e.push(r)),e}function O7(t,e){for(var n=Object.keys(t.defaultValues),r=0;r<n.length;++r){var i=n[r];(!Object.prototype.hasOwnProperty.call(e,i)||typeof e[i]>"u")&&(e[i]=t.defaultValues[i])}return e}var T5=(function(){function t(n,r){if(this.jsonSchema=n,this.hashFunction=r,this.indexes=I7(this.jsonSchema),this.primaryPath=Ks(this.jsonSchema.primaryKey),!n.properties[this.primaryPath].maxLength)throw St("SC39",{schema:n});this.finalFields=C5(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(r,i){this.finalFields.forEach(o=>{if(!Kf(r[o],i[o]))throw St("DOC9",{dataBefore:r,dataAfter:i,fieldName:o,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var r={},i=oh(this.jsonSchema,"");return Object.keys(i).forEach(o=>{var h=o;r.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var m=this.get(h);return m}}),Object.defineProperty(r,o+"$",{get:function(){return this.get$(h)},enumerable:!1,configurable:!1}),Object.defineProperty(r,o+"$$",{get:function(){return this.get$$(h)},enumerable:!1,configurable:!1}),Object.defineProperty(r,o+"_",{get:function(){return this.populate(h)},enumerable:!1,configurable:!1})}),zo(this,"getDocumentPrototype",()=>r),r},e.getPrimaryOfDocumentData=function(r){return ec(this.jsonSchema,r)},Jl(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,i])=>n[r]=i.default),zo(this,"defaultValues",n)}},{key:"hash",get:function(){return zo(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])})();function I7(t){return(t.indexes||[]).map(e=>Om(e)?e:[e])}function R7(t){var e=t.version?t.version:0,n=0;return new Array(e).fill(0).map(()=>n++)}function M7(t,e,n=!0){n&&Ts("preCreateRxSchema",t);var r=y1(t);r=C7(r),ar.deepFreezeWhenDevMode(r);var i=new T5(r,e);return Ts("createRxSchema",i),i}function Ci(t){return typeof t=="function"}function D7(t){return Ci(t?.lift)}function fo(t){return function(e){if(D7(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var fv=function(t,e){return fv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},fv(t,e)};function Kc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");fv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function L7(t,e,n,r){function i(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function m(E){try{g(r.next(E))}catch(S){h(S)}}function y(E){try{g(r.throw(E))}catch(S){h(S)}}function g(E){E.done?o(E.value):i(E.value).then(m,y)}g((r=r.apply(t,e||[])).next())})}function N5(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=m(0),h.throw=m(1),h.return=m(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(E){return y([g,E])}}function y(g){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(E){g=[6,E],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function lh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kc(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],h;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(m){h={error:m}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(h)throw h.error}}return o}function jc(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Ku(t){return this instanceof Ku?(this.v=t,this):new Ku(t)}function k7(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",h),i[Symbol.asyncIterator]=function(){return this},i;function h(I){return function(R){return Promise.resolve(R).then(I,S)}}function m(I,R){r[I]&&(i[I]=function(D){return new Promise(function(j,B){o.push([I,D,j,B])>1||y(I,D)})},R&&(i[I]=R(i[I])))}function y(I,R){try{g(r[I](R))}catch(D){N(o[0][3],D)}}function g(I){I.value instanceof Ku?Promise.resolve(I.value.v).then(E,S):N(o[0][2],I)}function E(I){y("next",I)}function S(I){y("throw",I)}function N(I,R){I(R),o.shift(),o.length&&y(o[0][0],o[0][1])}}function j7(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof lh=="function"?lh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(h){return new Promise(function(m,y){h=t[o](h),i(m,y,h.done,h.value)})}}function i(o,h,m,y){Promise.resolve(y).then(function(g){o({value:g,done:m})},h)}}var _5=(function(t){return t&&typeof t.length=="number"&&typeof t!="function"});function O5(t){return Ci(t?.then)}function Ub(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Vg=Ub(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function dv(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var v1=(function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var h=this._parentage;if(h)if(this._parentage=null,Array.isArray(h))try{for(var m=lh(h),y=m.next();!y.done;y=m.next()){var g=y.value;g.remove(this)}}catch(D){e={error:D}}finally{try{y&&!y.done&&(n=m.return)&&n.call(m)}finally{if(e)throw e.error}}else h.remove(this);var E=this.initialTeardown;if(Ci(E))try{E()}catch(D){o=D instanceof Vg?D.errors:[D]}var S=this._finalizers;if(S){this._finalizers=null;try{for(var N=lh(S),I=N.next();!I.done;I=N.next()){var R=I.value;try{t4(R)}catch(D){o=o??[],D instanceof Vg?o=jc(jc([],kc(o)),kc(D.errors)):o.push(D)}}}catch(D){r={error:D}}finally{try{I&&!I.done&&(i=N.return)&&i.call(N)}finally{if(r)throw r.error}}}if(o)throw new Vg(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)t4(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&dv(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&dv(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=(function(){var e=new t;return e.closed=!0,e})(),t})(),I5=v1.EMPTY;function R5(t){return t instanceof v1||t&&"closed"in t&&Ci(t.remove)&&Ci(t.add)&&Ci(t.unsubscribe)}function t4(t){Ci(t)?t():t.unsubscribe()}var B7={Promise:void 0},P7={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,jc([t,e],kc(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function M5(t){P7.setTimeout(function(){throw t})}function n4(){}function pm(t){t()}var Fb=(function(t){Kc(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,R5(n)&&n.add(r)):r.destination=z7,r}return e.create=function(n,r,i){return new ch(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(v1),U7=(function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Gp(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Gp(r)}else Gp(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Gp(n)}},t})(),ch=(function(t){Kc(e,t);function e(n,r,i){var o=t.call(this)||this,h;return Ci(n)||!n?h={next:n??void 0,error:r??void 0,complete:i??void 0}:h=n,o.destination=new U7(h),o}return e})(Fb);function Gp(t){M5(t)}function F7(t){throw t}var z7={closed:!0,next:n4,error:F7,complete:n4},zb=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Ad(t){return t}function H7(t){return t.length===0?Ad:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Hs=(function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=V7(e)?e:new ch(e,n,r);return pm(function(){var h=i,m=h.operator,y=h.source;o.add(m?m.call(o,y):y?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=r4(n),new n(function(i,o){var h=new ch({next:function(m){try{e(m)}catch(y){o(y),h.unsubscribe()}},error:o,complete:i});r.subscribe(h)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[zb]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return H7(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=r4(e),new e(function(r,i){var o;n.subscribe(function(h){return o=h},function(h){return i(h)},function(){return r(o)})})},t.create=function(e){return new t(e)},t})();function r4(t){var e;return(e=t??B7.Promise)!==null&&e!==void 0?e:Promise}function q7(t){return t&&Ci(t.next)&&Ci(t.error)&&Ci(t.complete)}function V7(t){return t&&t instanceof Fb||q7(t)&&R5(t)}function D5(t){return Ci(t[zb])}function L5(t){return Symbol.asyncIterator&&Ci(t?.[Symbol.asyncIterator])}function k5(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function G7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var j5=G7();function B5(t){return Ci(t?.[j5])}function P5(t){return k7(this,arguments,function(){var n,r,i,o;return N5(this,function(h){switch(h.label){case 0:n=t.getReader(),h.label=1;case 1:h.trys.push([1,,9,10]),h.label=2;case 2:return[4,Ku(n.read())];case 3:return r=h.sent(),i=r.value,o=r.done,o?[4,Ku(void 0)]:[3,5];case 4:return[2,h.sent()];case 5:return[4,Ku(i)];case 6:return[4,h.sent()];case 7:return h.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function U5(t){return Ci(t?.getReader)}function Qo(t){if(t instanceof Hs)return t;if(t!=null){if(D5(t))return K7(t);if(_5(t))return $7(t);if(O5(t))return Y7(t);if(L5(t))return F5(t);if(B5(t))return X7(t);if(U5(t))return W7(t)}throw k5(t)}function K7(t){return new Hs(function(e){var n=t[zb]();if(Ci(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $7(t){return new Hs(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Y7(t){return new Hs(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,M5)})}function X7(t){return new Hs(function(e){var n,r;try{for(var i=lh(t),o=i.next();!o.done;o=i.next()){var h=o.value;if(e.next(h),e.closed)return}}catch(m){n={error:m}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function F5(t){return new Hs(function(e){Q7(t,e).catch(function(n){return e.error(n)})})}function W7(t){return F5(P5(t))}function Q7(t,e){var n,r,i,o;return L7(this,void 0,void 0,function(){var h,m;return N5(this,function(y){switch(y.label){case 0:y.trys.push([0,5,6,11]),n=j7(t),y.label=1;case 1:return[4,n.next()];case 2:if(r=y.sent(),!!r.done)return[3,4];if(h=r.value,e.next(h),e.closed)return[2];y.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return m=y.sent(),i={error:m},[3,11];case 6:return y.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:y.sent(),y.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Vo(t,e,n,r,i){return new Z7(t,e,n,r,i)}var Z7=(function(t){Kc(e,t);function e(n,r,i,o,h,m){var y=t.call(this,n)||this;return y.onFinalize=h,y.shouldUnsubscribe=m,y._next=r?function(g){try{r(g)}catch(E){n.error(E)}}:t.prototype._next,y._error=o?function(g){try{o(g)}catch(E){n.error(E)}finally{this.unsubscribe()}}:t.prototype._error,y._complete=i?function(){try{i()}catch(g){n.error(g)}finally{this.unsubscribe()}}:t.prototype._complete,y}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e})(Fb),z5={now:function(){return(z5.delegate||Date).now()},delegate:void 0};function J7(t){return t&&Ci(t.schedule)}function Hb(t){return t[t.length-1]}function eL(t){return Ci(Hb(t))?t.pop():void 0}function Cd(t){return J7(Hb(t))?t.pop():void 0}function H5(t,e){return typeof Hb(t)=="number"?t.pop():e}function Fl(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}var tL=Array.isArray,nL=Object.getPrototypeOf,rL=Object.prototype,iL=Object.keys;function sL(t){if(t.length===1){var e=t[0];if(tL(e))return{args:e,keys:null};if(aL(e)){var n=iL(e);return{args:n.map(function(r){return e[r]}),keys:n}}}return{args:t,keys:null}}function aL(t){return t&&typeof t=="object"&&nL(t)===rL}function q5(t,e){return e===void 0&&(e=0),fo(function(n,r){n.subscribe(Vo(r,function(i){return Fl(r,t,function(){return r.next(i)},e)},function(){return Fl(r,t,function(){return r.complete()},e)},function(i){return Fl(r,t,function(){return r.error(i)},e)}))})}function V5(t,e){return e===void 0&&(e=0),fo(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function oL(t,e){return Qo(t).pipe(V5(e),q5(e))}function lL(t,e){return Qo(t).pipe(V5(e),q5(e))}function cL(t,e){return new Hs(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function uL(t,e){return new Hs(function(n){var r;return Fl(n,e,function(){r=t[j5](),Fl(n,e,function(){var i,o,h;try{i=r.next(),o=i.value,h=i.done}catch(m){n.error(m);return}h?n.complete():n.next(o)},0,!0)}),function(){return Ci(r?.return)&&r.return()}})}function G5(t,e){if(!t)throw new Error("Iterable cannot be null");return new Hs(function(n){Fl(n,e,function(){var r=t[Symbol.asyncIterator]();Fl(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function hL(t,e){return G5(P5(t),e)}function fL(t,e){if(t!=null){if(D5(t))return oL(t,e);if(_5(t))return cL(t,e);if(O5(t))return lL(t,e);if(L5(t))return G5(t,e);if(B5(t))return uL(t,e);if(U5(t))return hL(t,e)}throw k5(t)}function Td(t,e){return e?fL(t,e):Qo(t)}function di(t,e){return fo(function(n,r){var i=0;n.subscribe(Vo(r,function(o){r.next(t.call(e,o,i++))}))})}var dL=Array.isArray;function pL(t,e){return dL(e)?t.apply(void 0,jc([],kc(e))):t(e)}function mL(t){return di(function(e){return pL(t,e)})}function gL(t,e){return t.reduce(function(n,r,i){return n[r]=e[i],n},{})}function K5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Cd(t),r=eL(t),i=sL(t),o=i.args,h=i.keys;if(o.length===0)return Td([],n);var m=new Hs(yL(o,n,h?function(y){return gL(h,y)}:Ad));return r?m.pipe(mL(r)):m}function yL(t,e,n){return n===void 0&&(n=Ad),function(r){i4(e,function(){for(var i=t.length,o=new Array(i),h=i,m=i,y=function(E){i4(e,function(){var S=Td(t[E],e),N=!1;S.subscribe(Vo(r,function(I){o[E]=I,N||(N=!0,m--),m||r.next(n(o.slice()))},function(){--h||r.complete()}))},r)},g=0;g<i;g++)y(g)},r)}}function i4(t,e,n){t?Fl(n,t,e):e()}function vL(t,e,n,r,i,o,h,m){var y=[],g=0,E=0,S=!1,N=function(){S&&!y.length&&!g&&e.complete()},I=function(D){return g<r?R(D):y.push(D)},R=function(D){g++;var j=!1;Qo(n(D,E++)).subscribe(Vo(e,function(B){e.next(B)},function(){j=!0},void 0,function(){if(j)try{g--;for(var B=function(){var H=y.shift();h||R(H)};y.length&&g<r;)B();N()}catch(H){e.error(H)}}))};return t.subscribe(Vo(e,I,function(){S=!0,N()})),function(){}}function lo(t,e,n){return n===void 0&&(n=1/0),Ci(e)?lo(function(r,i){return di(function(o,h){return e(r,o,i,h)})(Qo(t(r,i)))},n):(typeof e=="number"&&(n=e),fo(function(r,i){return vL(r,i,t,n)}))}function qb(t){return t===void 0&&(t=1/0),lo(Ad,t)}function bL(){return qb(1)}var wL=Ub(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ji=(function(t){Kc(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new s4(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new wL},e.prototype.next=function(n){var r=this;pm(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var h=lh(r.currentObservers),m=h.next();!m.done;m=h.next()){var y=m.value;y.next(n)}}catch(g){i={error:g}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;pm(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;pm(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,h=i.isStopped,m=i.observers;return o||h?I5:(this.currentObservers=null,m.push(n),new v1(function(){r.currentObservers=null,dv(m,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,h=r.isStopped;i?n.error(o):h&&n.complete()},e.prototype.asObservable=function(){var n=new Hs;return n.source=this,n},e.create=function(n,r){return new s4(n,r)},e})(Hs),s4=(function(t){Kc(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:I5},e})(Ji);function a4(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return bL()(Td(t,Cd(t)))}var xL=new Hs(function(t){return t.complete()});function Yf(t,e){return e===void 0&&(e=Ad),t=t??EL,fo(function(n,r){var i,o=!0;n.subscribe(Vo(r,function(h){var m=e(h);(o||!t(i,m))&&(o=!1,i=m,r.next(h))}))})}function EL(t,e){return t===e}function vr(t,e){return fo(function(n,r){var i=0;n.subscribe(Vo(r,function(o){return t.call(e,o,i++)&&r.next(o)}))})}var SL=Ub(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function AL(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Cd(t),r=H5(t,1/0);return fo(function(i,o){qb(r)(Td(jc([i],kc(t)),n)).subscribe(o)})}function CL(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return AL.apply(void 0,jc([],kc(t)))}var Ja=(function(t){Kc(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e})(Ji),TL=(function(t){Kc(e,t);function e(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=z5);var o=t.call(this)||this;return o._bufferSize=n,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,n),o._windowTime=Math.max(1,r),o}return e.prototype.next=function(n){var r=this,i=r.isStopped,o=r._buffer,h=r._infiniteTimeWindow,m=r._timestampProvider,y=r._windowTime;i||(o.push(n),!h&&o.push(m.now()+y)),this._trimBuffer(),t.prototype.next.call(this,n)},e.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,o=i._infiniteTimeWindow,h=i._buffer,m=h.slice(),y=0;y<m.length&&!n.closed;y+=o?1:2)n.next(m[y]);return this._checkFinalizedStatuses(n),r},e.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,o=n._buffer,h=n._infiniteTimeWindow,m=(h?1:2)*r;if(r<1/0&&m<o.length&&o.splice(0,o.length-m),!h){for(var y=i.now(),g=0,E=1;E<o.length&&o[E]<=y;E+=2)g=E;g&&o.splice(0,g+1)}},e})(Ji);function NL(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new Ji}:e,r=t.resetOnError,i=r===void 0?!0:r,o=t.resetOnComplete,h=o===void 0?!0:o,m=t.resetOnRefCountZero,y=m===void 0?!0:m;return function(g){var E,S,N,I=0,R=!1,D=!1,j=function(){S?.unsubscribe(),S=void 0},B=function(){j(),E=N=void 0,R=D=!1},H=function(){var V=E;B(),V?.unsubscribe()};return fo(function(V,se){I++,!D&&!R&&j();var ee=N=N??n();se.add(function(){I--,I===0&&!D&&!R&&(S=Gg(H,y))}),ee.subscribe(se),!E&&I>0&&(E=new ch({next:function(J){return ee.next(J)},error:function(J){D=!0,j(),S=Gg(B,i,J),ee.error(J)},complete:function(){R=!0,j(),S=Gg(B,h),ee.complete()}}),Qo(V).subscribe(E))})(g)}}function Gg(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var i=new ch({next:function(){i.unsubscribe(),t()}});return Qo(e.apply(void 0,jc([],kc(n)))).subscribe(i)}}function Nd(t,e,n){var r,i,o,h,m=!1;return t&&typeof t=="object"?(r=t.bufferSize,h=r===void 0?1/0:r,i=t.windowTime,e=i===void 0?1/0:i,o=t.refCount,m=o===void 0?!1:o,n=t.scheduler):h=t??1/0,NL({connector:function(){return new TL(h,e,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:m})}function _d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Cd(t);return fo(function(r,i){(n?a4(t,r,n):a4(t,r)).subscribe(i)})}function _L(t,e){return fo(function(n,r){var i=null,o=0,h=!1,m=function(){return h&&!i&&r.complete()};n.subscribe(Vo(r,function(y){i?.unsubscribe();var g=0,E=o++;Qo(t(y,E)).subscribe(i=Vo(r,function(S){return r.next(e?e(y,S,E,g++):S)},function(){i=null,m()}))},function(){h=!0,m()}))})}function $5(t){return t.documentData?t.documentData:t.previousDocumentData}function OL(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:ar.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}var IL=new Map;function Y5(t){return zs(IL,t,()=>{for(var e=new Array(t.events.length),n=t.events,r=t.collectionName,i=t.isLocal,o=ar.deepFreezeWhenDevMode,h=0;h<n.length;h++){var m=n[h];e[h]={documentId:m.documentId,collectionName:r,isLocal:i,operation:m.operation,documentData:o(m.documentData),previousDocumentData:o(m.previousDocumentData)}}return e})}function Nc(t,e){return new Promise(function(n,r){var i=new ch({next:function(o){n(o),i.unsubscribe()},error:r,complete:function(){r(new SL)}});t.subscribe(i)})}function RL(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Cd(t),r=H5(t,1/0),i=t;return i.length?i.length===1?Qo(i[0]):qb(r)(Td(i,n)):xL}var $u="",Yu=Number.MIN_SAFE_INTEGER;function ML(t,e){var n=e.selector,r=t.indexes?t.indexes.slice(0):[];e.index&&(r=[e.index]);var i=!!e.sort.find(E=>Object.values(E)[0]==="desc"),o=new Set;Object.keys(n).forEach(E=>{var S=oh(t,E);S&&S.type==="boolean"&&Object.prototype.hasOwnProperty.call(n[E],"$eq")&&o.add(E)});var h=e.sort.map(E=>Object.keys(E)[0]),m=h.filter(E=>!o.has(E)).join(","),y=-1,g;if(r.forEach(E=>{var S=!0,N=!0,I=E.map(H=>{var V=n[H],se=V?Object.keys(V):[],ee={};if(!V||!se.length){var J=N?Yu:$u;ee={startKey:J,endKey:S?$u:Yu,inclusiveStart:!0,inclusiveEnd:!0}}else se.forEach(F=>{if(Vb.has(F)){var ce=V[F],de=jL(F,ce);ee=Object.assign(ee,de)}});return typeof ee.startKey>"u"&&(ee.startKey=Yu),typeof ee.endKey>"u"&&(ee.endKey=$u),typeof ee.inclusiveStart>"u"&&(ee.inclusiveStart=!0),typeof ee.inclusiveEnd>"u"&&(ee.inclusiveEnd=!0),N&&!ee.inclusiveStart&&(N=!1),S&&!ee.inclusiveEnd&&(S=!1),ee}),R=I.map(H=>H.startKey),D=I.map(H=>H.endKey),j={index:E,startKeys:R,endKeys:D,inclusiveEnd:S,inclusiveStart:N,sortSatisfiedByIndex:!i&&m===E.filter(H=>!o.has(H)).join(","),selectorSatisfiedByIndex:kL(E,e.selector,R,D)},B=BL(t,e,j);(B>=y||e.index)&&(y=B,g=j)}),!g)throw St("SNH",{query:e});return g}var Vb=new Set(["$eq","$gt","$gte","$lt","$lte"]),DL=new Set(["$eq","$gt","$gte"]),LL=new Set(["$eq","$lt","$lte"]);function kL(t,e,n,r){var i=Object.entries(e),o=i.find(([F,ce])=>{if(!t.includes(F))return!0;var de=Object.entries(ce).find(([ze,Q])=>!Vb.has(ze));return de});if(o||e.$and||e.$or)return!1;var h=[],m=new Set;for(var[y,g]of Object.entries(e)){if(!t.includes(y))return!1;var E=Object.keys(g).filter(F=>DL.has(F));if(E.length>1)return!1;var S=E[0];if(S&&m.add(y),S!=="$eq"){if(h.length>0)return!1;h.push(S)}}var N=[],I=new Set;for(var[R,D]of Object.entries(e)){if(!t.includes(R))return!1;var j=Object.keys(D).filter(F=>LL.has(F));if(j.length>1)return!1;var B=j[0];if(B&&I.add(R),B!=="$eq"){if(N.length>0)return!1;N.push(B)}}var H=0;for(var V of t){for(var se of[m,I]){if(!se.has(V)&&se.size>0)return!1;se.delete(V)}var ee=n[H],J=r[H];if(ee!==J&&m.size>0&&I.size>0)return!1;H++}return!0}function jL(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function BL(t,e,n){var r=0,i=E=>{E>0&&(r=r+E)},o=10,h=Pg(n.startKeys,E=>E!==Yu&&E!==$u);i(h*o);var m=Pg(n.startKeys,E=>E!==$u&&E!==Yu);i(m*o);var y=Pg(n.startKeys,(E,S)=>E===n.endKeys[S]);i(y*o*1.5);var g=n.sortSatisfiedByIndex?5:0;return i(g),r}class b1 extends Error{}const Xf=Symbol("missing"),X5=Object.freeze(new Error("mingo: cycle detected while processing object/array")),w1=t=>{const e=mm(t);let n=0,r=e.length;for(;r;)n=(n<<5)-n^e.charCodeAt(--r);return n>>>0},Pl=t=>typeof t!="object"&&typeof t!="function"||t===null,W5=t=>Pl(t)||Qf(t)||_c(t),Q5={undefined:1,null:2,number:3,string:4,symbol:5,object:6,array:7,arraybuffer:8,boolean:9,date:10,regexp:11,function:12},$l=(t,e)=>{t===Xf&&(t=void 0),e===Xf&&(e=void 0);const[n,r]=[t,e].map(i=>Q5[Wf(i)]||0);return n!==r?n-r:zl(t,e)?0:t<e?-1:t>e?1:0};class Mm extends Map{#e=w1;#n=new Map;#t=e=>{const n=this.#e(e);return[(this.#n.get(n)||[]).find(r=>zl(r,e)),n]};constructor(){super()}static init(e){const n=new Mm;return e&&(n.#e=e),n}clear(){super.clear(),this.#n.clear()}delete(e){if(Pl(e))return super.delete(e);const[n,r]=this.#t(e);return super.delete(n)?(this.#n.set(r,this.#n.get(r).filter(i=>!zl(i,n))),!0):!1}get(e){if(Pl(e))return super.get(e);const[n,r]=this.#t(e);return super.get(n)}has(e){if(Pl(e))return super.has(e);const[n,r]=this.#t(e);return super.has(n)}set(e,n){if(Pl(e))return super.set(e,n);const[r,i]=this.#t(e);if(super.has(r))super.set(r,n);else{super.set(e,n);const o=this.#n.get(i)||[];o.push(e),this.#n.set(i,o)}return this}get size(){return super.size}}function Mi(t,e){if(!t)throw new b1(e)}const PL=Object.keys(Q5).reduce((t,e)=>(t["[object "+e[0].toUpperCase()+e.substring(1)+"]"]=e,t),{});function Wf(t){const e=Object.prototype.toString.call(t);return e==="[object Object]"?t?.constructor?.name?.toLowerCase()||"object":PL[e]||e.substring(8,e.length-1).toLowerCase()}const Xu=t=>typeof t=="boolean",Ua=t=>typeof t=="string",UL=t=>typeof t=="symbol",js=t=>!isNaN(t)&&typeof t=="number",or=Array.isArray;function hs(t){if(!t)return!1;const e=Object.getPrototypeOf(t);return(e===Object.prototype||e===null)&&Wf(t)==="object"}const Z5=t=>!Pl(t),Qf=t=>t instanceof Date,_c=t=>t instanceof RegExp,Gb=t=>typeof t=="function",qs=t=>t==null,FL=(t,e=!0)=>!!t||e&&t==="",Kb=t=>qs(t)||Ua(t)&&!t||or(t)&&t.length===0||hs(t)&&Object.keys(t).length===0,Od=t=>or(t)?t:[t],uh=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),zL=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),Zf=(t,e)=>{if(qs(t)||Xu(t)||js(t)||Ua(t))return t;if(Qf(t))return new Date(t);if(_c(t))return new RegExp(t);if(zL(t)){const n=t.constructor;return new n(t)}if(e instanceof Set||(e=new Set),e.has(t))throw X5;e.add(t);try{if(or(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Zf(t[r],e);return n}if(hs(t)){const n={};for(const r of Object.keys(t))n[r]=Zf(t[r],e);return n}}finally{e.delete(t)}return t},o4=t=>t===Xf;function pv(t,e){if(o4(t)||qs(t))return e;if(o4(e)||qs(e))return t;if(Pl(t)||Pl(e))return e;or(t)&&or(e)&&Mi(t.length===e.length,"arrays must be of equal length to merge.");for(const n of Object.keys(e))t[n]=pv(t[n],e[n]);return t}function HL(t,e=w1){const n=[Mm.init(e),Mm.init(e)];if(t.length===0)return[];if(t.some(r=>r.length===0))return[];if(t.length===1)return[...t];t[t.length-1].forEach(r=>n[0].set(r,!0));for(let r=t.length-2;r>-1;r--){if(t[r].forEach(i=>{n[0].has(i)&&n[1].set(i,!0)}),n[1].size===0)return[];n.reverse(),n[1].clear()}return Array.from(n[0].keys())}function J5(t,e=1){const n=new Array;function r(i,o){for(let h=0,m=i.length;h<m;h++)or(i[h])&&(o>0||o<0)?r(i[h],Math.max(-1,o-1)):n.push(i[h])}return r(t,e),n}function qL(t){const e={};for(;t;){for(const n of Object.getOwnPropertyNames(t))n in e||(e[n]=t[n]);t=Object.getPrototypeOf(t)}return e}function eT(t){for(;t;){if(Object.getOwnPropertyNames(t).includes("toString"))return t.toString!==Object.prototype.toString;t=Object.getPrototypeOf(t)}return!1}function zl(t,e){if(t===e||Object.is(t,e))return!0;if(t===null||e===null||typeof t!=typeof e||typeof t!="object"||t.constructor!==e.constructor)return!1;if(t instanceof Date)return+t==+e;if(t instanceof RegExp)return t.toString()===e.toString();const n=t.constructor;if(n===Array||n===Object){const r=Object.keys(t).sort(),i=Object.keys(e).sort();if(r.length!==i.length)return!1;for(let o=0,h=r[o];o<r.length;h=r[++o])if(h!==i[o]||!zl(t[h],e[h]))return!1;return!0}return eT(t)&&t.toString()===e.toString()}const mm=(t,e)=>{if(t===null)return"null";if(t===void 0)return"undefined";if(Ua(t)||js(t)||Xu(t))return JSON.stringify(t);if(Qf(t))return t.toISOString();if(_c(t)||UL(t)||Gb(t))return t.toString();if(e instanceof Set||(e=new Set),e.has(t))throw X5;try{if(e.add(t),or(t))return"["+t.map(r=>mm(r,e)).join(",")+"]";if(hs(t))return"{"+Object.keys(t).sort().map(i=>`${i}:${mm(t[i],e)}`).join()+"}";const n=eT(t)?t.toString():mm(qL(t),e);return Wf(t)+"("+n+")"}finally{e.delete(t)}};function VL(t,e){return qs(t)?null:(e=e||w1,e(t))}function GL(t,e,n=w1){if(t.length<1)return new Map;const r=new Map,i=new Map;for(let o=0;o<t.length;o++){const h=t[o],m=e(h,o),y=VL(m,n);if(y===null)i.has(null)?i.get(null).push(h):i.set(null,[h]);else{const g=r.has(y)?r.get(y).find(E=>zl(E,m)):null;qs(g)?(i.set(m,[h]),r.has(y)?r.get(y).push(m):r.set(y,[m])):i.get(g).push(h)}}return i}function mv(t,e){return Z5(t)?t[e]:void 0}function KL(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function Bc(t,e,n){let r=0;function i(h,m){let y=h;for(let g=0;g<m.length;g++){const E=m[g];if(/^\d+$/.exec(E)===null&&or(y)){if(g===0&&r>0)break;r+=1;const N=m.slice(g);y=y.reduce((I,R)=>{const D=i(R,N);return D!==void 0&&I.push(D),I},[]);break}else y=mv(y,E);if(y===void 0)break}return y}const o=W5(t)?t:i(t,e.split("."));return or(o)&&n?.unwrapArray?KL(o,r):o}function Nf(t,e,n){const r=e.indexOf("."),i=r==-1?e:e.substring(0,r),o=e.substring(r+1),h=r!=-1;if(or(t)){const g=/^\d+$/.test(i),E=g&&n?.preserveIndex?[...t]:[];if(g){const S=parseInt(i);let N=mv(t,S);h&&(N=Nf(N,o,n)),n?.preserveIndex?E[S]=N:E.push(N)}else for(const S of t){const N=Nf(S,e,n);n?.preserveMissing?E.push(N??Xf):(N!=null||n?.preserveIndex)&&E.push(N)}return E}const m=n?.preserveKeys?{...t}:{};let y=mv(t,i);if(h&&(y=Nf(y,o,n)),y!==void 0)return m[i]=y,m}function gv(t){if(or(t))for(let e=t.length-1;e>=0;e--)t[e]===Xf?t.splice(e,1):gv(t[e]);else if(hs(t))for(const e in t)uh(t,e)&&gv(t[e])}const l4=/^\d+$/;function Dm(t,e,n,r){const i=e.split("."),o=i[0],h=i.slice(1).join(".");if(i.length===1)(hs(t)||or(t)&&l4.test(o))&&n(t,o);else{r?.buildGraph&&qs(t[o])&&(t[o]={});const m=t[o];if(!m)return;const y=!!(i.length>1&&l4.test(i[1]));or(m)&&r?.descendArray&&!y?m.forEach(g=>Dm(g,h,n,r)):Dm(m,h,n,r)}}function $L(t,e,n){Dm(t,e,(r,i)=>{r[i]=Gb(n)?n(r[i]):n},{buildGraph:!0})}function c4(t,e,n){Dm(t,e,(r,i)=>{if(or(r)){if(/^\d+$/.test(i))r.splice(parseInt(i),1);else if(n&&n.descendArray)for(const o of r)hs(o)&&delete o[i]}else hs(r)&&delete r[i]},n)}const YL=/^\$[a-zA-Z0-9_]+$/;function $c(t){return YL.test(t)}function tT(t){if(W5(t))return _c(t)?{$regex:t}:{$eq:t};if(Z5(t)){if(!Object.keys(t).some($c))return{$eq:t};if(uh(t,"$regex")){const e={...t};return e.$regex=new RegExp(t.$regex,t.$options),delete e.$options,e}}return t}var yv=(t=>(t[t.CLONE_OFF=0]="CLONE_OFF",t[t.CLONE_INPUT=1]="CLONE_INPUT",t[t.CLONE_OUTPUT=2]="CLONE_OUTPUT",t[t.CLONE_ALL=3]="CLONE_ALL",t))(yv||{});class Oc{#e;#n;#t;constructor(e,n,r){this.#e=e,this.update(n,r)}static init(e,n,r){return e instanceof Oc?new Oc(e.#e,e.root??n,{...e.#t,...r,variables:Object.assign({},e.#t?.variables,r?.variables)}):new Oc(e,n,r)}update(e,n){this.#n=e;const r=Object.assign({},this.#t?.variables,n?.variables);return Object.keys(r).length?this.#t={...n,variables:r}:this.#t=n??{},this}getOptions(){return Object.freeze({...this.#e,context:Pc.from(this.#e.context)})}get root(){return this.#n}get local(){return this.#t}get idKey(){return this.#e.idKey}get collation(){return this.#e?.collation}get processingMode(){return this.#e?.processingMode||0}get useStrictMode(){return this.#e?.useStrictMode}get scriptEnabled(){return this.#e?.scriptEnabled}get useGlobalContext(){return this.#e?.useGlobalContext}get hashFunction(){return this.#e?.hashFunction}get collectionResolver(){return this.#e?.collectionResolver}get jsonSchemaValidator(){return this.#e?.jsonSchemaValidator}get variables(){return this.#e?.variables}get context(){return this.#e?.context}}function XL(t){return t instanceof Oc?t.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:0,...t,context:t?.context?Pc.from(t?.context):Pc.init()})}class Pc{#e=new Map;constructor(){}static init(){return new Pc}static from(e){const n=Pc.init();return qs(e)||e.#e.forEach((r,i)=>n.addOperators(i,r)),n}addOperators(e,n){this.#e.has(e)||this.#e.set(e,{});for(const[r,i]of Object.entries(n))this.getOperator(e,r)||(this.#e.get(e)[r]=i);return this}getOperator(e,n){return(this.#e.get(e)??{})[n]??null}addAccumulatorOps(e){return this.addOperators("accumulator",e)}addExpressionOps(e){return this.addOperators("expression",e)}addQueryOps(e){return this.addOperators("query",e)}addPipelineOps(e){return this.addOperators("pipeline",e)}addProjectionOps(e){return this.addOperators("projection",e)}addWindowOps(e){return this.addOperators("window",e)}}const wc=Pc.init();function u4(t,e){for(const[n,r]of Object.entries(e)){Mi(Gb(r)&&$c(n),`'${n}' is not a valid operator`);const i=Jf(t,n,null);Mi(!i||r===i,`${n} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":wc.addAccumulatorOps(e);break;case"expression":wc.addExpressionOps(e);break;case"pipeline":wc.addPipelineOps(e);break;case"projection":wc.addProjectionOps(e);break;case"query":wc.addQueryOps(e);break;case"window":wc.addWindowOps(e);break}}function Jf(t,e,n){const{context:r,useGlobalContext:i}=n||{},o=r?r.getOperator(t,e):null;return!o&&i?wc.getOperator(t,e):o}function Iu(t,e,n,r){const i=Oc.init(r,t);return n&&$c(n)?nT(t,e,n,i):Lm(t,e,i)}const WL=["$$ROOT","$$CURRENT","$$REMOVE","$$NOW"];function Lm(t,e,n){if(Ua(e)&&e.length>0&&e[0]==="$"){if(QL.includes(e))return e;let r=n.root;const i=e.split(".");if(WL.includes(i[0])){switch(i[0]){case"$$ROOT":break;case"$$CURRENT":r=t;break;case"$$REMOVE":r=void 0;break;case"$$NOW":r=new Date;break}e=e.slice(i[0].length+1)}else if(i[0].slice(0,2)==="$$"){r=Object.assign({},n.variables,{this:t},n?.local?.variables);const o=i[0].slice(2);Mi(uh(r,o),`Use of undefined variable: ${o}`),e=e.slice(2)}else e=e.slice(1);return e===""?r:Bc(r,e)}if(or(e))return e.map(r=>Lm(t,r,n));if(hs(e)){const r={},i=Object.entries(e);for(const[o,h]of i){if($c(o))return Mi(i.length==1,"expression must have single operator."),nT(t,h,o,n);r[o]=Lm(t,h,n)}return r}return e}function nT(t,e,n,r){const i=Jf("expression",n,r);if(i)return i(t,e,r);const o=Jf("accumulator",n,r);return Mi(!!o,`accumulator '${n}' is not registered.`),or(t)||(t=Lm(t,e,r),e=null),Mi(or(t),`arguments must resolve to array for ${n}.`),o(t,e,r)}const QL=["$$KEEP","$$PRUNE","$$DESCEND"];function ed(t){return t instanceof h4?t:new h4(t)}function ZL(...t){let e=0;return ed(()=>{for(;e<t.length;){const n=t[e].next();if(!n.done)return n;e++}return{done:!0}})}function JL(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function ek(t,e){const n=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,n)}const vv=new Error;function tk(t,e,n){let r=!1,i=-1,o=0;return function(h){try{e:for(;!r;){let m=t();i++;let y=-1;const g=e.length;let E=!1;for(;++y<g;){const S=e[y];switch(S.action){case 0:m=S.func(m,i);break;case 1:if(!S.func(m,i))continue e;break;case 2:--S.count,S.count||(E=!0);break;case 3:--S.count,S.count||ek(e,y);continue e;default:break e}}if(r=E,h)n[o++]=m;else return{value:m,done:!1}}}catch(m){if(m!==vv)throw m}return r=!0,{done:r}}}let h4=class{constructor(e){this.#e=[],this.#n=[],this.isDone=!1;let n;if(e instanceof Function&&(e={next:e}),JL(e)){const r=e;n=()=>{const i=r.next();if(i.done)throw vv;return i.value}}else if(or(e)){const r=e,i=r.length;let o=0;n=()=>{if(o<i)return r[o++];throw vv}}else if(!(e instanceof Function))throw new b1("Lazy must be initialized with an array, generator, or function.");this.#t=tk(n,this.#e,this.#n)}#e;#n;#t;push(e,n){return typeof n=="function"?this.#e.push({action:e,func:n}):typeof n=="number"&&this.#e.push({action:e,count:n}),this}next(){return this.#t()}map(e){return this.push(0,e)}filter(e){return this.push(1,e)}take(e){return e>0?this.push(2,e):this}drop(e){return e>0?this.push(3,e):this}transform(e){const n=this;let r;return ed(()=>(r||(r=ed(e(n.value()))),r.next()))}value(){return this.isDone||(this.isDone=this.#t(!0).done),this.#n}each(e){for(;;){const n=this.next();if(n.done)break;if(e(n.value)===!1)return!1}return!0}reduce(e,n){let r=this.next();for(n===void 0&&!r.done&&(n=r.value,r=this.next());!r.done;)n=e(n,r.value),r=this.next();return n}size(){return this.reduce((e,n)=>++e,0)}[Symbol.iterator](){return this}};const nk=(t,e,n)=>t.take(e),rT=(t,e,n)=>Kb(e)?t:(sT(e,n),t.map(iT(e,Oc.init(n))));function iT(t,e,n=!0){const r=e.idKey,i=Object.keys(t),o=new Array,h=new Array,m={};for(const I of i){const R=t[I];if(js(R)||Xu(R))R?h.push(I):o.push(I);else if(or(R))m[I]=D=>R.map(j=>Iu(D,j,null,e.update(D))??null);else if(hs(R)){const D=Object.keys(R),j=D.length==1?D[0]:"",B=Jf("projection",j,e);B?j==="$slice"&&!Od(R[j]).every(js)?m[I]=V=>Iu(V,R,I,e.update(V)):m[I]=V=>B(V,R[j],I,e.update(V)):$c(j)?m[I]=H=>Iu(H,R[j],j,e):(sT(R,e),m[I]=H=>{if(!uh(H,I))return Iu(H,R,null,e);n&&e.update(H);const V=Bc(H,I),se=iT(R,e,!1);return or(V)?V.map(se):hs(V)?se(V):se(H)})}else m[I]=Ua(R)&&R[0]==="$"?D=>Iu(D,R,I,e):D=>R}const y=Object.keys(m),g=o.includes(r);if(n&&g&&o.length===1&&!h.length&&!y.length)return I=>{const R={...I};return delete R[r],R};const S=n&&!g&&!h.includes(r),N={preserveMissing:!0};return I=>{const R={};if(o.length&&!h.length){pv(R,I);for(const D of o)c4(R,D,{descendArray:!0})}for(const D of h){const j=Nf(I,D,N)??{};pv(R,j)}h.length&&gv(R);for(const D of y){const j=m[D](I);j===void 0?c4(R,D,{descendArray:!0}):$L(R,D,j)}return S&&uh(I,r)&&(R[r]=Bc(I,r)),R}}function sT(t,e){let n=!1,r=!1;for(const[i,o]of Object.entries(t))Mi(!i.startsWith("$"),"Field names may not start with '$'."),Mi(!i.endsWith(".$"),"Positional projection operator '$' is not supported."),i!==e?.idKey&&(o===0||o===!1?n=!0:(o===1||o===!0)&&(r=!0),Mi(!(n&&r),"Projection cannot have a mix of inclusion and exclusion."))}const rk=(t,e,n)=>t.drop(e),aT=(t,e,n)=>{if(Kb(e)||!hs(e))return t;let r=$l;const i=n.collation;return hs(i)&&Ua(i.locale)&&(r=sk(i)),t.transform(o=>{const h=Object.keys(e);for(const m of h.reverse()){const y=GL(o,S=>Bc(S,m),n.hashFunction),g=Array.from(y.keys()).sort(r);e[m]===-1&&g.reverse();let E=0;for(const S of g)for(const N of y.get(S))o[E++]=N;Mi(E==o.length,"bug: counter must match collection size.")}return o})},ik={1:"base",2:"accent",3:"variant"};function sk(t){const e={sensitivity:ik[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));const n=new Intl.Collator(t.locale,e);return(r,i)=>{if(!Ua(r)||!Ua(i))return $l(r,i);const o=n.compare(r,i);return o<0?-1:o>0?1:0}}const ak={$sort:aT,$skip:rk,$limit:nk};let ok=class{#e;#n;#t;#i;#a={};#r=null;#s=[];constructor(e,n,r,i){this.#e=e,this.#n=n,this.#t=r,this.#i=i}fetch(){if(this.#r)return this.#r;this.#r=ed(this.#e).filter(this.#n);const e=this.#i.processingMode;e&yv.CLONE_INPUT&&this.#r.map(Zf);for(const n of["$sort","$skip","$limit"])uh(this.#a,n)&&(this.#r=ak[n](this.#r,this.#a[n],this.#i));return Object.keys(this.#t).length&&(this.#r=rT(this.#r,this.#t,this.#i)),e&yv.CLONE_OUTPUT&&this.#r.map(Zf),this.#r}fetchAll(){const e=ed([...this.#s]);return this.#s=[],ZL(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.#a.$skip=e,this}limit(e){return this.#a.$limit=e,this}sort(e){return this.#a.$sort=e,this}collation(e){return this.#i={...this.#i,collation:e},this}next(){if(this.#s.length>0)return this.#s.pop();const e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.#s.length>0)return!0;const e=this.fetch().next();return e.done?!1:(this.#s.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}};const lk=new Set(Array.from(["$and","$or","$nor","$expr","$jsonSchema"]));class Id{#e;#n;#t;constructor(e,n){this.#t=Zf(e),this.#n=XL(n),this.#e=[],this.compile()}compile(){Mi(hs(this.#t),`query criteria must be an object: ${JSON.stringify(this.#t)}`);const e={};for(const[n,r]of Object.entries(this.#t)){if(n==="$where")Mi(this.#n.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true."),Object.assign(e,{field:n,expr:r});else if(lk.has(n))this.processOperator(n,n,r);else{Mi(!$c(n),`unknown top level operator: ${n}`);for(const[i,o]of Object.entries(tT(r)))this.processOperator(n,i,o)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,n,r){const i=Jf("query",n,this.#n);Mi(!!i,`unknown query operator ${n}`),this.#e.push(i(e,r,this.#n))}test(e){return this.#e.every(n=>n(e))}find(e,n){return new ok(e,r=>this.test(r),n||{},this.#n)}remove(e){return e.reduce((n,r)=>(this.test(r)||n.push(r),n),[])}}const ck=["monday","mon","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun"];new Set(ck);function $s(t){return(n,r,i)=>{const o={unwrapArray:!0},h=Math.max(1,n.split(".").length-1);return m=>{const y=Bc(m,n,o);return t(y,r,{...i,depth:h})}}}function oT(t,e,n){return zl(t,e)||qs(t)&&qs(e)?!0:or(t)?t.some(r=>zl(r,e))||J5(t,n?.depth).some(r=>zl(r,e)):!1}function uk(t,e,n){return!oT(t,e,n)}function lT(t,e,n){return qs(t)?e.some(r=>r===null):HL([Od(t),e],n?.hashFunction).length>0}function hk(t,e,n){return!lT(t,e,n)}function fk(t,e,n){return x1(t,e,(r,i)=>$l(r,i)<0)}function dk(t,e,n){return x1(t,e,(r,i)=>$l(r,i)<=0)}function pk(t,e,n){return x1(t,e,(r,i)=>$l(r,i)>0)}function mk(t,e,n){return x1(t,e,(r,i)=>$l(r,i)>=0)}function gk(t,e,n){return Od(t).some(r=>e.length===2&&r%e[0]===e[1])}function yk(t,e,n){const r=Od(t),i=o=>Ua(o)&&FL(e.exec(o),n?.useStrictMode);return r.some(i)||J5(r,1).some(i)}function vk(t,e,n){return Array.isArray(t)&&t.length===e}function bk(t){return $c(t)&&["$and","$or","$nor"].indexOf(t)===-1}function wk(t,e,n){if(or(t)&&!Kb(t)){let r=h=>h,i=e;Object.keys(e).every(bk)&&(i={temp:e},r=h=>({temp:h}));const o=new Id(i,n);for(let h=0,m=t.length;h<m;h++)if(o.test(r(t[h])))return!0}return!1}const f4=t=>t===null,xk={array:or,boolean:Xu,bool:Xu,date:Qf,number:js,int:js,long:js,double:js,decimal:js,null:f4,object:hs,regexp:_c,regex:_c,string:Ua,undefined:qs,function:t=>{throw new b1("unsupported type key `function`.")},1:js,2:Ua,3:hs,4:or,6:qs,8:Xu,9:Qf,10:f4,11:_c,16:js,18:js,19:js};function d4(t,e,n){const r=xk[e];return r?r(t):!1}function Ek(t,e,n){return or(e)?e.findIndex(r=>d4(t,r))>=0:d4(t,e)}function x1(t,e,n){return Od(t).some(r=>Wf(r)===Wf(e)&&n(r,e))}const p4=(t,e)=>{const n={};return t.split("").forEach((r,i)=>n[r]=e*(i+1)),n};({...p4("ABCDEFGHIKLM",1),...p4("NOPQRSTUVWXY",-1)});const m4={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Ys(t,e=m4){const n=Object.assign({},m4,e),r=new Set(Object.keys(n));return(i,o,h)=>{const m=Iu(i,o,null,h);if(r.has(`${m}`)){const y=n[`${m}`];if(y instanceof Error)throw new b1(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return y}return t(m)}}Ys(Math.acos,{Infinity:1/0,0:new Error});Ys(Math.acosh,{Infinity:1/0,0:new Error});Ys(Math.asin);Ys(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});Ys(Math.atan);Ys(Math.atanh,{1:1/0,"-1":-1/0});Ys(Math.cos);Ys(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const Sk=Math.PI/180;Ys(t=>t*Sk,{Infinity:1/0,"-Infinity":1/0});const Ak=180/Math.PI;Ys(t=>t*Ak,{Infinity:1/0,"-Infinity":-1/0});Ys(Math.sin);Ys(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});Ys(Math.tan);const Ck=(t,e,n)=>{Mi(or(e),"Invalid expression: $and expects value to be an Array.");const r=e.map(i=>new Id(i,n));return i=>r.every(o=>o.test(i))},cT=(t,e,n)=>{Mi(or(e),"Invalid expression. $or expects value to be an Array");const r=e.map(i=>new Id(i,n));return i=>r.some(o=>o.test(i))},Tk=(t,e,n)=>{Mi(or(e),"Invalid expression. $nor expects value to be an array.");const r=cT("$or",e,n);return i=>!r(i)},Nk=(t,e,n)=>{const r={};r[t]=tT(e);const i=new Id(r,n);return o=>!i.test(o)},_k=$s(oT),Ok=$s(pk),Ik=$s(mk),Rk=$s(lT),Mk=$s(fk),Dk=$s(dk),Lk=$s(uk),kk=$s(hk),jk=$s(gk),Bk=$s(yk),Pk=$s(wk),Uk=$s(vk),Fk=(t,e,n)=>{const r=t.includes("."),i=!!e;return!r||t.match(/\.\d+$/)?o=>Bc(o,t)!==void 0===i:o=>{const h=Nf(o,t,{preserveIndex:!0}),m=Bc(h,t.substring(0,t.lastIndexOf(".")));return or(m)?m.some(y=>y!==void 0)===i:m!==void 0===i}},zk=$s(Ek);var g4=!1;function Hk(t){return g4||(u4("pipeline",{$sort:aT,$project:rT}),u4("query",{$and:Ck,$eq:_k,$elemMatch:Pk,$exists:Fk,$gt:Ok,$gte:Ik,$in:Rk,$lt:Mk,$lte:Dk,$ne:Lk,$nin:kk,$mod:jk,$nor:Tk,$not:Nk,$or:cT,$regex:Bk,$size:Uk,$type:zk}),g4=!0),new Id(t)}function Wu(t,e){var n=Ks(t.primaryKey);e=br(e);var r=us(e);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([S,N])=>{(typeof N!="object"||N===null)&&(r.selector[S]={$eq:N})})):r.selector={},r.index){var i=Vf(r.index);i.includes(n)||i.push(n),r.index=i}if(r.sort){var E=r.sort.find(S=>i7(S)===n);E||(r.sort=r.sort.slice(0),r.sort.push({[n]:"asc"}))}else if(r.index)r.sort=r.index.map(S=>({[S]:"asc"}));else{if(t.indexes){var o=new Set;Object.entries(r.selector).forEach(([S,N])=>{var I=!1;typeof N=="object"&&N!==null?I=!!Object.keys(N).find(R=>Vb.has(R)):I=!0,I&&o.add(S)});var h=-1,m;t.indexes.forEach(S=>{var N=Om(S)?S:[S],I=N.findIndex(R=>!o.has(R));I>0&&I>h&&(h=I,m=N)}),m&&(r.sort=m.map(S=>({[S]:"asc"})))}if(!r.sort)if(t.indexes&&t.indexes.length>0){var y=t.indexes[0],g=Om(y)?y:[y];r.sort=g.map(S=>({[S]:"asc"}))}else r.sort=[{[n]:"asc"}]}return r}function uT(t,e){if(!e.sort)throw St("SNH",{query:e});var n=[];e.sort.forEach(i=>{var o=Object.keys(i)[0],h=Object.values(i)[0];n.push({key:o,direction:h,getValueFn:r7(o)})});var r=(i,o)=>{for(var h=0;h<n.length;++h){var m=n[h],y=m.getValueFn(i),g=m.getValueFn(o);if(y!==g){var E=m.direction==="asc"?$l(y,g):$l(g,y);return E}}};return r}function $b(t,e){if(!e.sort)throw St("SNH",{query:e});var n=Hk(e.selector),r=i=>n.test(i);return r}async function hf(t,e){var n=await t.exec();if(!n)return null;if(Array.isArray(n))return Promise.all(n.map(i=>e(i)));if(n instanceof Map)return Promise.all([...n.values()].map(i=>e(i)));var r=await e(n);return r}function E1(t,e){if(!e.sort)throw St("SNH",{query:e});var n=ML(t,e);return{query:e,queryPlan:n}}var qk="_rxdb_internal";async function bh(t,e){var n=await t.findDocumentsById([e],!1),r=n[0];if(r)return r}async function hh(t,e,n){var r=await t.bulkWrite([e],n);if(r.error.length>0){var i=r.error[0];throw i}else{var o=Ks(t.schema.primaryKey),h=xa(o,[e],r),m=h[0];return m}}function Vk(t,e){var n=bh(t,e),r=t.changeStream().pipe(di(i=>i.events.find(o=>o.documentId===e)),vr(i=>!!i),di(i=>Promise.resolve(Ft(i).documentData)),_d(n),_L(i=>i),vr(i=>!!i));return r}function td(t){return Object.assign({},...t.filter(e=>!!e))}function km(t,e,n,r){if(r)throw r.status===409?St("CONFLICT",{collection:t.name,id:e,writeError:r,data:n}):r.status===422?St("VD2",{collection:t.name,id:e,writeError:r,data:n}):r}function Gk(t,e,n,r,i,o,h){for(var m=!!t.schema.attachments,y=[],g=[],E=[],S=Ed(10),N={id:S,events:[],checkpoint:null,context:i},I=N.events,R=[],D=[],j=[],B=n.size>0,H,V=r.length,se=function(){var J=r[ee],F=J.document,ce=J.previous,de=F[e],ze=F._deleted,Q=ce&&ce._deleted,fe=void 0;B&&(fe=n.get(de));var he;if(fe){var Y=fe._rev;if(!ce||ce&&Y!==ce._rev){var oe={isError:!0,status:409,documentId:de,writeRow:J,documentInDb:fe};return E.push(oe),1}var ve=m?Kg(J):J;m&&(ze?ce&&Object.keys(ce._attachments).forEach(Ce=>{D.push({documentId:de,attachmentId:Ce,digest:Ft(ce)._attachments[Ce].digest})}):(Object.entries(F._attachments).find(([Ce,ke])=>{var He=ce?ce._attachments[Ce]:void 0;return!He&&!ke.data&&(he={documentId:de,documentInDb:fe,isError:!0,status:510,writeRow:J,attachmentId:Ce}),!0}),he||Object.entries(F._attachments).forEach(([Ce,ke])=>{var He=ce?ce._attachments[Ce]:void 0;if(!He)R.push({documentId:de,attachmentId:Ce,attachmentData:ke,digest:ke.digest});else{var Fe=ve.document._attachments[Ce].digest;ke.data&&He.digest!==Fe&&j.push({documentId:de,attachmentId:Ce,attachmentData:ke,digest:ke.digest})}}))),he?E.push(he):(m?g.push(Kg(ve)):g.push(ve),H=ve);var Ee=null,be=null,ne=null;if(Q&&!ze)ne="INSERT",Ee=m?eo(F):F;else if(ce&&!Q&&!ze)ne="UPDATE",Ee=m?eo(F):F,be=ce;else if(ze)ne="DELETE",Ee=Ft(F),be=ce;else throw St("SNH",{args:{writeRow:J}});var ye={documentId:de,documentData:Ee,previousDocumentData:be,operation:ne};I.push(ye)}else{var Ne=!!ze;if(m&&Object.entries(F._attachments).forEach(([Ce,ke])=>{ke.data?R.push({documentId:de,attachmentId:Ce,attachmentData:ke,digest:ke.digest}):(he={documentId:de,isError:!0,status:510,writeRow:J,attachmentId:Ce},E.push(he))}),he||(m?y.push(Kg(J)):y.push(J),H=J),!Ne){var ie={documentId:de,operation:"INSERT",documentData:m?eo(F):F,previousDocumentData:m&&ce?eo(ce):ce};I.push(ie)}}},ee=0;ee<V;ee++)se();return{bulkInsertDocs:y,bulkUpdateDocs:g,newestRow:H,errors:E,eventBulk:N,attachmentsAdd:R,attachmentsRemove:D,attachmentsUpdate:j}}function Kg(t){return{previous:t.previous,document:eo(t.document)}}function Kk(t){return atob(t).length}function $k(t){var e=t.data;if(!e)return t;var n={length:Kk(e),digest:t.digest,type:t.type};return n}function eo(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=br(t);return e._attachments={},Object.entries(t._attachments).forEach(([n,r])=>{e._attachments[n]=$k(r)}),e}function Rd(t){return Object.assign({},t,{_meta:br(t._meta)})}function Yb(t,e,n){ar.deepFreezeWhenDevMode(n);var r=Ks(e.schema.primaryKey),i={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,async bulkWrite(o,h){for(var m=t.token,y=new Array(o.length),g=Gs(),E=0;E<o.length;E++){var S=o[E],N=Rd(S.document);N._meta.lwt=g;var I=S.previous;N._rev=qo(m,I),y[E]={document:N,previous:I}}Ts("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:y});var R=await t.lockedRun(()=>e.bulkWrite(y,h)),D={error:[]};fT.set(D,y);var j=R.error.length===0?[]:R.error.filter(J=>J.status===409&&!J.writeRow.previous&&!J.writeRow.document._deleted&&Ft(J.documentInDb)._deleted?!0:(D.error.push(J),!1));if(j.length>0){var B=new Set,H=j.map(J=>(B.add(J.documentId),{previous:J.documentInDb,document:Object.assign({},J.writeRow.document,{_rev:qo(t.token,J.documentInDb)})})),V=await t.lockedRun(()=>e.bulkWrite(H,h));Dc(D.error,V.error);var se=xa(r,y,D,B),ee=xa(r,H,V);return Dc(se,ee),D}return D},query(o){return t.lockedRun(()=>e.query(o))},count(o){return t.lockedRun(()=>e.count(o))},findDocumentsById(o,h){return t.lockedRun(()=>e.findDocumentsById(o,h))},getAttachmentData(o,h,m){return t.lockedRun(()=>e.getAttachmentData(o,h,m))},getChangedDocumentsSince:e.getChangedDocumentsSince?(o,h)=>t.lockedRun(()=>e.getChangedDocumentsSince(Ft(o),h)):void 0,cleanup(o){return t.lockedRun(()=>e.cleanup(o))},remove(){return t.storageInstances.delete(i),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(i),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()}};return t.storageInstances.add(i),i}function Yk(t){if(t.schema.keyCompression)throw St("UT5",{args:{params:t}});if(jm(t.schema))throw St("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw St("UT7",{args:{params:t}})}function jm(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function Xk(t,e,n){var r=Ks(t.schema.primaryKey),i=n?n.lwt:Lb,o=n?n.id:"";return Wu(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:i}},{"_meta.lwt":{$eq:i},[r]:{$gt:n?o:""}}],"_meta.lwt":{$gte:i}},sort:[{"_meta.lwt":"asc"},{[r]:"asc"}],skip:0,limit:e})}async function hT(t,e,n){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(e,n);var r=Ks(t.schema.primaryKey),i=E1(t.schema,Xk(t,e,n)),o=await t.query(i),h=o.documents,m=J9(h);return{documents:h,checkpoint:m?{id:m[r],lwt:m._meta.lwt}:n||{id:"",lwt:0}}}var fT=new WeakMap,Wk=new WeakMap;function xa(t,e,n,r){return zs(Wk,n,()=>{var i=[],o=fT.get(n);if(o||(o=e),n.error.length>0||r){for(var h=r||new Set,m=0;m<n.error.length;m++){var y=n.error[m];h.add(y.documentId)}for(var g=0;g<o.length;g++){var E=o[g].document;h.has(E[t])||i.push(eo(E))}}else{i.length=e.length-n.error.length;for(var S=0;S<o.length;S++){var N=o[S].document;i[S]=eo(N)}}return i})}var dT=(function(){function t(n,r,i,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=n,this.primaryPath=r,this.preWrite=i,this.postWrite=o}var e=t.prototype;return e.addWrite=function(r,i){var o=r[this.primaryPath],h=zs(this.queueByDocId,o,()=>[]),m=new Promise((y,g)=>{var E={lastKnownDocumentState:r,modifier:i,resolve:y,reject:g};Ft(h).push(E),this.triggerRun()});return m},e.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],i=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(i.entries()).map(async([h,m])=>{var y=Qk(m.map(S=>S.lastKnownDocumentState)),g=y;for(var E of m)try{g=await E.modifier(us(g))}catch(S){E.reject(S),E.reject=()=>{},E.resolve=()=>{}}try{await this.preWrite(g,y)}catch(S){m.forEach(N=>N.reject(S));return}r.push({previous:y,document:g})}));var o=r.length>0?await this.storageInstance.bulkWrite(r,"incremental-write"):{error:[]};return await Promise.all(xa(this.primaryPath,r,o).map(h=>{var m=h[this.primaryPath];this.postWrite(h);var y=ah(i,m);y.forEach(g=>g.resolve(h))})),o.error.forEach(h=>{var m=h.documentId,y=ah(i,m),g=sh(h);if(g){var E=zs(this.queueByDocId,m,()=>[]);y.reverse().forEach(N=>{N.lastKnownDocumentState=Ft(g.documentInDb),Ft(E).unshift(N)})}else{var S=g5(h);y.forEach(N=>N.reject(S))}}),this.isRunning=!1,this.triggerRun()}},t})();function y4(t){var e=async n=>{var r=s7(n);r._deleted=n._deleted;var i=await t(r),o=Object.assign({},i,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:typeof i._deleted<"u"?i._deleted:n._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o};return e}function Qk(t){var e=t[0],n=Gl(e._rev);return t.forEach(r=>{var i=Gl(r._rev);i>n&&(e=r,n=i)}),e}var S1={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(di(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this,e=this.primary;return t.collection.eventBulks$.pipe(vr(n=>!n.isLocal),di(n=>n.events.find(r=>r.documentId===e)),vr(n=>!!n),di(n=>$5(Ft(n))),_d(t.collection._docCache.getLatestDocumentData(e)),Yf((n,r)=>n._rev===r._rev),di(n=>this.collection._docCache.getCachedRxDocument(n)),Nd(Sd))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(ar.isDevMode()){if(t.includes(".item."))throw St("DOC1",{path:t});if(t===this.primaryPath)throw St("DOC2");if(this.collection.schema.finalFields.includes(t))throw St("DOC3",{path:t});var e=oh(this.collection.schema.jsonSchema,t);if(!e)throw St("DOC4",{path:t})}return this.$.pipe(di(n=>Kl(n,t)),Yf())},get$$(t){var e=this.get$(t),n=this.collection.database.getReactivityFactory();return n.fromObservable(e,this.getLatest().get(t),this.collection.database)},populate(t){var e=oh(this.collection.schema.jsonSchema,t),n=this.get(t);if(!n)return Pb;if(!e)throw St("DOC5",{path:t});if(!e.ref)throw St("DOC6",{path:t,schemaObj:e});var r=this.collection.database.collections[e.ref];if(!r)throw St("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?r.findByIds(n).exec().then(i=>{var o=i.values();return Array.from(o)}):r.findOne(n).exec()},get(t){return gT(this,t)},toJSON(t=!1){if(t)return ar.deepFreezeWhenDevMode(this._data);var e=br(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,ar.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return us(this.toJSON(t))},update(t){throw yr("update")},incrementalUpdate(t){throw yr("update")},updateCRDT(t){throw yr("crdt")},putAttachment(){throw yr("attachments")},putAttachmentBase64(){throw yr("attachments")},getAttachment(){throw yr("attachments")},allAttachments(){throw yr("attachments")},get allAttachments$(){throw yr("attachments")},async modify(t,e){var n=this._data,r=await y4(t)(n);return this._saveData(r,n)},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,y4(t)).then(n=>this.collection._docCache.getCachedRxDocument(n))},patch(t){var e=this._data,n=us(e);return Object.entries(t).forEach(([r,i])=>{n[r]=i}),this._saveData(n,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([n,r])=>{e[n]=r}),e))},async _saveData(t,e){if(t=br(t),this._data._deleted)throw St("DOC11",{id:this.primary,document:this});await mT(this.collection,t,e);var n=[{previous:e,document:t}],r=await this.collection.storageInstance.bulkWrite(n,"rx-document-save-data"),i=r.error[0];return km(this.collection,this.primary,t,i),await this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(xa(this.collection.schema.primaryPath,n,r)[0])},async remove(){if(this.deleted)return Promise.reject(St("DOC13",{document:this,id:this.primary}));var t=await this.collection.bulkRemove([this]);if(t.error.length>0){var e=t.error[0];km(this.collection,this.primary,this._data,e)}return t.success[0]},incrementalRemove(){return this.incrementalModify(async t=>(await this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t)).then(async t=>(await this.collection._runHooks("post","remove",t._data,t),t))},close(){throw St("DOC14")}};function pT(t=S1){var e=function(r,i){this.collection=r,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function Zk(t,e,n){var r=new t(e,n);return Ts("createRxDocument",r),r}function mT(t,e,n){return e._meta=Object.assign({},n._meta,e._meta),ar.isDevMode()&&t.schema.validateChange(n,e),t._runHooks("pre","save",e,n)}function gT(t,e){return zs(t._propertyCache,e,()=>{var n=Kl(t._data,e);if(typeof n!="object"||n===null||Array.isArray(n))return ar.deepFreezeWhenDevMode(n);var r=new Proxy(br(n),{get(i,o){if(typeof o!="string")return i[o];var h=o.charAt(o.length-1);if(h==="$")if(o.endsWith("$$")){var m=o.slice(0,-2);return t.get$$(vf(e+"."+m))}else{var y=o.slice(0,-1);return t.get$(vf(e+"."+y))}else if(h==="_"){var g=o.slice(0,-1);return t.populate(vf(e+"."+g))}else{var E=i[o];return typeof E=="number"||typeof E=="string"||typeof E=="boolean"?E:gT(t,vf(e+"."+o))}}});return r})}function Xb(t){return t[t.length-1]}function Jk(t){const e=typeof t;return t!==null&&(e==="object"||e==="function")}function v4(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!Jk(t)||typeof e!="string")return t;const r=e.split(".");if(r.length===0)return n;for(let i=0;i<r.length;i++){const o=r[i];if(ej(t,o)?t=i===r.length-1?void 0:null:t=t[o],t==null){if(i!==r.length-1)return n;break}}return t===void 0?n:t}function ej(t,e){if(typeof e!="number"&&Array.isArray(t)){const n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}const yT=t=>!!t.queryParams.limit,tj=t=>t.queryParams.limit===1,nj=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),rj=t=>t.changeEvent.operation==="DELETE",ij=t=>t.changeEvent.operation==="INSERT",sj=t=>t.changeEvent.operation==="UPDATE",aj=t=>yT(t)&&t.previousResults.length>=t.queryParams.limit,oj=t=>{const e=t.queryParams.sortFields,n=t.changeEvent.previous,r=t.changeEvent.doc;if(!r)return!1;if(!n)return!0;for(let i=0;i<e.length;i++){const o=e[i],h=v4(n,o),m=v4(r,o);if(h!==m)return!0}return!1},lj=t=>{const e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{const n=t.queryParams.primaryKey,r=t.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===e)return!0;return!1}},cj=t=>{const e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},uj=t=>{const e=Xb(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},hj=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=t.previousResults[0];return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)<0:!1},fj=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=Xb(t.previousResults);return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)>0:!1},dj=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=t.previousResults[0];return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)<0:!1},pj=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=Xb(t.previousResults);return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)>0:!1},mj=t=>{const e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},gj=t=>{const e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},yj=t=>t.previousResults.length===0,vj={0:ij,1:sj,2:rj,3:yT,4:tj,5:nj,6:yj,7:aj,8:cj,9:uj,10:oj,11:lj,12:hj,13:fj,14:dj,15:pj,16:mj,17:gj};function bj(t,e,n,r){var i=t.length,o=i-1,h=0;if(i===0)return t.push(e),0;for(var m;r<=o;)h=r+(o-r>>1),m=t[h],n(m,e)<=0?r=h+1:o=h-1;return n(m,e)<=0&&h++,t.splice(h,0,e),h}const wj=t=>{},Wb=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Qb=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Zb=t=>{const e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},Jb=t=>{const e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},xj=t=>{Zb(t),Qb(t)},Ej=t=>{Jb(t),Wb(t)},Sj=t=>{Zb(t),Wb(t)},Aj=t=>{Jb(t),Qb(t)},vT=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);const e=t.queryParams.primaryKey,n=t.previousResults;for(let r=0;r<n.length;r++)if(n[r][e]===t.changeEvent.id){n.splice(r,1);break}},Cj=t=>{const e=t.changeEvent.doc,n=t.queryParams.primaryKey,r=t.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===t.changeEvent.id){r[i]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},Tj=t=>{const e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},bT=t=>{const e=t.changeEvent.id,n=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,n)}else if(t.previousResults.find(i=>i[t.queryParams.primaryKey]===e))return;bj(t.previousResults,n,t.queryParams.sortComparator,0)},Nj=t=>{vT(t),bT(t)},_j=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},Oj=t=>{throw new Error("Action unknownAction should never be called")},Ij=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Rj={doNothing:wj,insertFirst:Wb,insertLast:Qb,removeFirstItem:Zb,removeLastItem:Jb,removeFirstInsertLast:xj,removeLastInsertFirst:Ej,removeFirstInsertFirst:Sj,removeLastInsertLast:Aj,removeExisting:vT,replaceExisting:Cj,alwaysWrong:Tj,insertAtSortPosition:bT,removeExistingAndInsertAtSortPosition:Nj,runFullQueryAgain:_j,unknownAction:Oj},Mj=40;function $g(t){return t.charCodeAt(0)-Mj}function Dj(t){return t?"1":"0"}function b4(t,e){const n=[];for(let r=0,i=t.length;r<i;r+=e)n.push(t.substring(r,r+e));return n}function Lj(t){const e=new Map,r=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,i=t.substring(2,r),o=b4(i,2);for(let D=0;D<o.length;D++){const j=o[D],B=j.charAt(0),H=$g(j.charAt(1));e.set(B,H)}const h=t.substring(r,t.length-3),m=b4(h,4);for(let D=0;D<m.length;D++){const j=m[D],B=j.charAt(0),H=j.charAt(1),V=j.charAt(2),se=$g(j.charAt(3));if(!e.has(H))throw new Error("missing node with id "+H);if(!e.has(V))throw new Error("missing node with id "+V);const ee=e.get(H),J=e.get(V),F={l:se,0:ee,1:J};e.set(B,F)}const y=t.slice(-3),g=y.charAt(0),E=y.charAt(1),S=$g(y.charAt(2)),N=e.get(g),I=e.get(E);return{l:S,0:N,1:I}}function kj(t,e,n){let r=t,i=t.l;for(;;){const o=e[i](n),h=Dj(o);if(r=r[h],typeof r=="number"||typeof r=="string")return r;i=r.l}}const jj="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9bf9bq9cg9ck9cn9nd9np9nq9nf9ng9nm9nk9mr9ms9mt9mj9mk9ml9mn9mc8{8}888mn88m8m4z4w4z44444m4v7yn77~777n777m77m7m7m5m5m55m555m55m5m552|2u2222x222|222222n2n222n2/an/bn/cn///////////,cn,,,,,,,ac0bc00000000000m-m-----------3333(((++++11*m*.";let Yg;function Bj(){return Yg||(Yg=Lj(jj)),Yg}const Pj=t=>kj(Bj(),vj,t);function Uj(t){const e=Pj(t);return Ij[e]}function Fj(t,e,n,r,i){const o=Rj[t];return o({queryParams:e,changeEvent:n,previousResults:r,keyDocumentMap:i}),r}function zj(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(n=>Object.keys(n)[0])}var Hj=new WeakMap;function qj(t){return zs(Hj,t,()=>{var e=t.collection,n=Wu(e.storageInstance.schema,us(t.mangoQuery)),r=e.schema.primaryPath,i=uT(e.schema.jsonSchema,n),o=(g,E)=>{var S={docA:g,docB:E};return i(S.docA,S.docB)},h=$b(e.schema.jsonSchema,n),m=g=>{var E={doc:g};return h(E.doc)},y={primaryKey:t.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:zj(r,n),sortComparator:o,queryMatcher:m};return y})}function Vj(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};for(var n=qj(t),r=Ft(t._result).docsData.slice(0),i=Ft(t._result).docsDataMap,o=!1,h=[],m=0;m<e.length;m++){var y=e[m],g=OL(y);g&&h.push(g)}var E=h.find(S=>{var N={queryParams:n,changeEvent:S,previousResults:r,keyDocumentMap:i},I=Uj(N);if(I==="runFullQueryAgain")return!0;if(I!=="doNothing")return o=!0,Fj(I,n,S,r,i),!1});return E?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:r}}var Gj=(function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(r){var i=r.toString(),o=zs(this._map,i,()=>r);return o},t})();function Kj(){return new Gj}function w4(t,e){e.uncached=!0;var n=e.toString();t._map.delete(n)}function $j(t){return t.refCount$.observers.length}var Yj=100,Xj=30*1e3,Wj=(t,e)=>(n,r)=>{if(!(r._map.size<t)){var i=Gs()-e,o=[],h=Array.from(r._map.values());for(var m of h)if(!($j(m)>0)){if(m._lastEnsureEqual===0&&m._creationTime<i){w4(r,m);continue}o.push(m)}var y=o.length-t;if(!(y<=0)){var g=o.sort((S,N)=>S._lastEnsureEqual-N._lastEnsureEqual),E=g.slice(0,y);E.forEach(S=>w4(r,S))}}},wT=Wj(Yj,Xj),Xg=new WeakSet;function Qj(t){Xg.has(t)||(Xg.add(t),m7().then(()=>y7(200)).then(()=>{t.closed||t.cacheReplacementPolicy(t,t._queryCache),Xg.delete(t)}))}var xT=(function(){function t(n,r,i){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var h=o.docId,m=this.cacheItemByDocId.get(h);m&&(m[0].delete(o.revisionHeight+o.lwt+""),m[0].size===0&&this.cacheItemByDocId.delete(h))}):void 0,this.primaryPath=n,this.changes$=r,this.documentCreator=i,r.subscribe(o=>{this.tasks.add(()=>{for(var h=this.cacheItemByDocId,m=0;m<o.length;m++){var y=o[m],g=h.get(y.documentId);if(g){var E=y.documentData;E||(E=y.previousDocumentData),g[1]=E}}}),this.tasks.size<=1&&g1().then(()=>{this.processTasks()})})}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},e.getLatestDocumentData=function(r){this.processTasks();var i=ah(this.cacheItemByDocId,r);return i[1]},e.getLatestDocumentDataIfExists=function(r){this.processTasks();var i=this.cacheItemByDocId.get(r);if(i)return i[1]},Jl(t,[{key:"getCachedRxDocuments",get:function(){var n=x4(this);return zo(this,"getCachedRxDocuments",n)}},{key:"getCachedRxDocument",get:function(){var n=x4(this);return zo(this,"getCachedRxDocument",r=>n([r])[0])}}])})();function x4(t){var e=t.primaryPath,n=t.cacheItemByDocId,r=t.registry,i=ar.deepFreezeWhenDevMode,o=t.documentCreator,h=m=>{for(var y=new Array(m.length),g=[],E=0;E<m.length;E++){var S=m[E],N=S[e],I=Gl(S._rev),R=void 0,D=void 0,j=n.get(N);j?(R=j[0],D=R.get(I+S._meta.lwt+"")):(R=new Map,j=[R,S],n.set(N,j));var B=D?D.deref():void 0;B||(S=i(S),B=o(S),R.set(I+S._meta.lwt+"",Jj(B)),r&&g.push(B)),y[E]=B}return g.length>0&&r&&(t.tasks.add(()=>{for(var H=0;H<g.length;H++){var V=g[H];r.register(V,{docId:V.primary,revisionHeight:Gl(V.revision),lwt:V._data._meta.lwt})}}),t.tasks.size<=1&&g1().then(()=>{t.processTasks()})),y};return h}function bv(t,e){var n=t.getCachedRxDocuments;return n(e)}var Zj=typeof WeakRef=="function",Jj=Zj?eB:tB;function eB(t){return new WeakRef(t)}function tB(t){return{deref(){return t}}}var E4=(function(){function t(n,r,i){this.time=Gs(),this.query=n,this.count=i,this.documents=bv(this.query.collection._docCache,r)}var e=t.prototype;return e.getValue=function(r){var i=this.query.op;if(i==="count")return this.count;if(i==="findOne"){var o=this.documents.length===0?null:this.documents[0];if(!o&&r)throw St("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:i});return o}else return i==="findByIds"?this.docsMap:this.documents.slice(0)},Jl(t,[{key:"docsData",get:function(){return zo(this,"docsData",this.documents.map(n=>n._data))}},{key:"docsDataMap",get:function(){var n=new Map;return this.documents.forEach(r=>{n.set(r.primary,r._data)}),zo(this,"docsDataMap",n)}},{key:"docsMap",get:function(){for(var n=new Map,r=this.documents,i=0;i<r.length;i++){var o=r[i];n.set(o.primary,o)}return zo(this,"docsMap",n)}}])})(),nB=0,rB=function(){return++nB},ET=(function(){function t(n,r,i,o={}){this.id=rB(),this._execOverDatabaseCount=0,this._creationTime=Gs(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Ja(null),this._result=null,this._latestChangeEvent=-1,this._ensureEqualQueue=oo,this.op=n,this.mangoQuery=r,this.collection=i,this.other=o,r||(this.mangoQuery=gm()),this.isFindOneByIdQuery=lB(this.collection.schema.primaryPath,r)}var e=t.prototype;return e._setResultData=function(r){if(typeof r>"u")throw St("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof r=="number"){this._result=new E4(this,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var i=new E4(this,r,r.length);this._result=i},e._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this.op==="count"){var r=this.getPreparedQuery(),i=await this.collection.storageInstance.count(r);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw St("QU14",{collection:this.collection,queryObj:this.mangoQuery});return{result:i.count,counter:this.collection._changeEventBuffer.getCounter()}}if(this.op==="findByIds"){var o=Ft(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,h=new Map,m=[];if(o.forEach(E=>{var S=this.collection._docCache.getLatestDocumentDataIfExists(E);if(S){if(!S._deleted){var N=this.collection._docCache.getCachedRxDocument(S);h.set(E,N)}}else m.push(E)}),m.length>0){var y=await this.collection.storageInstance.findDocumentsById(m,!1);y.forEach(E=>{var S=this.collection._docCache.getCachedRxDocument(E);h.set(S.primary,S)})}return{result:h,counter:this.collection._changeEventBuffer.getCounter()}}var g=await oB(this);return{result:g.docs,counter:g.counter}},e.exec=async function(r){if(r&&this.op!=="findOne")throw St("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});await S4(this);var i=Ft(this._result);return i.getValue(r)},e.toString=function(){var r=Im({op:this.op,query:Wu(this.collection.schema.jsonSchema,this.mangoQuery),other:this.other},!0),i=JSON.stringify(r);return this.toString=()=>i,i},e.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:Wu(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),Ts("prePrepareQuery",r);var i=E1(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>i,i},e.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},e.remove=async function(){var r=await this.exec();if(Array.isArray(r)){var i=await this.collection.bulkRemove(r);if(i.error.length>0)throw g5(i.error[0]);return i.success}else return r.remove()},e.incrementalRemove=function(){return hf(this.asRxQuery,r=>r.incrementalRemove())},e.update=function(r){throw yr("update")},e.patch=function(r){return hf(this.asRxQuery,i=>i.patch(r))},e.incrementalPatch=function(r){return hf(this.asRxQuery,i=>i.incrementalPatch(r))},e.modify=function(r){return hf(this.asRxQuery,i=>i.modify(r))},e.incrementalModify=function(r){return hf(this.asRxQuery,i=>i.incrementalModify(r))},e.where=function(r){throw yr("query-builder")},e.sort=function(r){throw yr("query-builder")},e.skip=function(r){throw yr("query-builder")},e.limit=function(r){throw yr("query-builder")},Jl(t,[{key:"$",get:function(){if(!this._$){var n=this.collection.eventBulks$.pipe(vr(r=>!r.isLocal),_d(null),lo(()=>S4(this)),di(()=>this._result),Nd(Sd),Yf((r,i)=>!!(r&&r.time===Ft(i).time)),vr(r=>!!r),di(r=>Ft(r).getValue()));this._$=RL(n,this.refCount$.pipe(vr(()=>!1)))}return this._$}},{key:"$$",get:function(){var n=this.collection.database.getReactivityFactory();return n.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var n=this.collection.schema.jsonSchema,r=Wu(this.collection.schema.jsonSchema,this.mangoQuery);return zo(this,"queryMatcher",$b(n,r))}},{key:"asRxQuery",get:function(){return this}}])})();function gm(){return{selector:{}}}function iB(t){return t.collection._queryCache.getByQuery(t)}function Ru(t,e,n,r){Ts("preCreateRxQuery",{op:t,queryObj:e,collection:n,other:r});var i=new ET(t,e,n,r);return i=iB(i),Qj(n),i}function sB(t){var e=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=e}async function S4(t){return t.collection.awaitBeforeReads.size>0&&await Promise.all(Array.from(t.collection.awaitBeforeReads).map(e=>e())),t._ensureEqualQueue=t._ensureEqualQueue.then(()=>aB(t)),t._ensureEqualQueue}function aB(t){if(t._lastEnsureEqual=Gs(),t.collection.database.closed||sB(t))return oo;var e=!1,n=!1;if(t._latestChangeEvent===-1&&(n=!0),!n){var r=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(r===null)n=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var i=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(t.op==="count"){var o=Ft(t._result).count,h=o;i.forEach(y=>{var g=y.previousDocumentData&&t.doesDocumentDataMatch(y.previousDocumentData),E=t.doesDocumentDataMatch(y.documentData);!g&&E&&h++,g&&!E&&h--}),h!==o&&(e=!0,t._setResultData(h))}else{var m=Vj(t,i);m.runFullQueryAgain?n=!0:m.changed&&(e=!0,t._setResultData(m.newResults))}}}return n?t._execOverDatabase().then(y=>{var g=y.result;return t._latestChangeEvent=y.counter,typeof g=="number"?((!t._result||g!==t._result.count)&&(e=!0,t._setResultData(g)),e):((!t._result||!a7(t.collection.schema.primaryPath,g,t._result.docsData))&&(e=!0,t._setResultData(g)),e)}):Promise.resolve(e)}async function oB(t){var e=[],n=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var r=t.isFindOneByIdQuery;if(r=r.filter(E=>{var S=t.collection._docCache.getLatestDocumentDataIfExists(E);return S?(S._deleted||e.push(S),!1):!0}),r.length>0){var i=await n.storageInstance.findDocumentsById(r,!1);Dc(e,i)}}else{var o=t.isFindOneByIdQuery,h=t.collection._docCache.getLatestDocumentDataIfExists(o);if(!h){var m=await n.storageInstance.findDocumentsById([o],!1);m[0]&&(h=m[0])}h&&!h._deleted&&e.push(h)}else{var y=t.getPreparedQuery(),g=await n.storageInstance.query(y);e=g.documents}return{docs:e,counter:n._changeEventBuffer.getCounter()}}function lB(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var n=e.selector[t];if(typeof n=="string")return n;if(Object.keys(n).length===1&&typeof n.$eq=="string"||Object.keys(n).length===1&&Array.isArray(n.$eq)&&!n.$eq.find(r=>typeof r!="string"))return n.$eq}return!1}var Hl="collection",ew="storage-token",ym="rx-migration-status",cB="rx-pipeline-checkpoint",uB="RxInternalDocument",tw=y1({version:0,title:uB,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Hl,ew,ym,cB,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Uc(t,e){return ec(tw,{key:t,context:e})}async function ST(t){var e=E1(t.schema,{selector:{context:Hl,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),n=await t.query(e),r=n.documents;return r}var AT="storageToken",hB=Uc(AT,ew);async function fB(t){var e=Ed(10),n=t.password?await t.hashFunction(JSON.stringify(t.password)):void 0,r={id:hB,context:ew,key:AT,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:n},_deleted:!1,_meta:vh(),_rev:Pa(),_attachments:{}},i=[{document:r}],o=await t.internalStore.bulkWrite(i,"internal-add-storage-token");if(!o.error[0])return xa("id",i,o)[0];var h=Ft(o.error[0]);if(h.isError&&sh(h)){var m=h;if(!dB(m.documentInDb.data.rxdbVersion,t.rxdbVersion))throw St("DM5",{args:{database:t.name,databaseStateVersion:m.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(n&&n!==m.documentInDb.data.passwordHash)throw St("DB1",{passwordHash:n,existingPasswordHash:m.documentInDb.data.passwordHash});var y=m.documentInDb;return Ft(y)}throw h}function dB(t,e){if(!t)return!1;var n=t.split(".")[0],r=e.split(".")[0];return n==="15"&&r==="16"?!0:n===r}async function CT(t,e,n){if(t.schema.version!==n.version)throw St("SNH",{schema:n,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var r=Bm(t.name,t.schema.jsonSchema),i=Uc(r,Hl);;){var o=await bh(t.database.internalStore,i),h=us(Ft(o)),m=h.data.connectedStorages.find(y=>y.collectionName===e&&y.schema.version===n.version);if(m)return;h.data.connectedStorages.push({collectionName:e,schema:n});try{await hh(t.database.internalStore,{previous:Ft(o),document:h},"add-connected-storage-to-collection")}catch(y){if(!sh(y))throw y}}}async function pB(t,e,n){if(t.schema.version!==n.version)throw St("SNH",{schema:n,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var r=Bm(t.name,t.schema.jsonSchema),i=Uc(r,Hl);;){var o=await bh(t.database.internalStore,i),h=us(Ft(o)),m=h.data.connectedStorages.find(y=>y.collectionName===e&&y.schema.version===n.version);if(!m)return;h.data.connectedStorages=h.data.connectedStorages.filter(y=>y.collectionName!==e);try{await hh(t.database.internalStore,{previous:Ft(o),document:h},"remove-connected-storage-from-collection")}catch(y){if(!sh(y))throw y}}}function Bm(t,e){return t+"-"+e.version}function Kp(t,e){return e=br(e),e=O7(t,e),typeof t.jsonSchema.primaryKey!="string"&&(e=S7(t.primaryPath,t.jsonSchema,e)),e._meta=vh(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=Pa()),e}async function mB(t,e){e.multiInstance=t.multiInstance;var n=await t.storage.createStorageInstance(e);return n}async function TT(t,e,n,r,i,o,h,m){var y=await ST(e),g=y.filter(I=>I.data.name===i),E=[];g.forEach(I=>{E.push({collectionName:I.data.name,schema:I.data.schema,isCollection:!0}),I.data.connectedStorages.forEach(R=>E.push({collectionName:R.collectionName,isCollection:!1,schema:R.schema}))});var S=new Set;if(E=E.filter(I=>{var R=I.collectionName+"||"+I.schema.version;return S.has(R)?!1:(S.add(R),!0)}),await Promise.all(E.map(async I=>{var R=await t.createStorageInstance({collectionName:I.collectionName,databaseInstanceToken:n,databaseName:r,multiInstance:o,options:{},schema:I.schema,password:h,devMode:ar.isDevMode()});await R.remove(),I.isCollection&&await Lc("postRemoveRxCollection",{storage:t,databaseName:r,collectionName:i})})),m){var N=g.map(I=>{var R=Rd(I);return R._deleted=!0,R._meta.lwt=Gs(),R._rev=qo(n,I),{previous:I,document:R}});await e.bulkWrite(N,"rx-database-remove-collection-all")}}function la(t){if(t.closed)throw St("COL21",{collection:t.name,version:t.schema.version})}var gB=(function(){function t(n){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=n,this.subs.push(this.collection.eventBulks$.pipe(vr(r=>!r.isLocal)).subscribe(r=>{this.tasks.add(()=>this._handleChangeEvents(r.events)),this.tasks.size<=1&&g1().then(()=>{this.processTasks()})}))}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},e._handleChangeEvents=function(r){var i=this.counter;this.counter=this.counter+r.length,r.length>this.limit?this.buffer=r.slice(r.length*-1):(Dc(this.buffer,r),this.buffer=this.buffer.slice(this.limit*-1));for(var o=i+1,h=this.eventCounterMap,m=0;m<r.length;m++){var y=r[m];h.set(y,o+m)}},e.getCounter=function(){return this.processTasks(),this.counter},e.getBuffer=function(){return this.processTasks(),this.buffer},e.getArrayIndexByPointer=function(r){this.processTasks();var i=this.buffer[0],o=this.eventCounterMap.get(i);if(r<o)return null;var h=r-o;return h},e.getFrom=function(r){this.processTasks();var i=[],o=this.getArrayIndexByPointer(r);if(o===null)return null;for(;;){var h=this.buffer[o];if(o++,h)i.push(h);else return i}},e.runFrom=function(r,i){this.processTasks();var o=this.getFrom(r);if(o===null)throw new Error("out of bounds");o.forEach(h=>i(h))},e.reduceByLastOfDoc=function(r){return this.processTasks(),r.slice(0)},e.close=function(){this.tasks.clear(),this.subs.forEach(r=>r.unsubscribe())},t})();function yB(t){return new gB(t)}var vB=new WeakMap;function bB(t){var e=t.schema.getDocumentPrototype(),n=EB(t),r=S1,i={};return[e,n,r].forEach(o=>{var h=Object.getOwnPropertyNames(o);h.forEach(m=>{var y=Object.getOwnPropertyDescriptor(o,m),g=!0;(m.startsWith("_")||m.endsWith("_")||m.startsWith("$")||m.endsWith("$"))&&(g=!1),typeof y.value=="function"?Object.defineProperty(i,m,{get(){return y.value.bind(this)},enumerable:g,configurable:!1}):(y.enumerable=g,y.configurable=!1,y.writable&&(y.writable=!1),Object.defineProperty(i,m,y))})}),i}function wB(t){return zs(vB,t,()=>pT(bB(t)))}function xB(t,e,n){var r=Zk(e,t,ar.deepFreezeWhenDevMode(n));return t._runHooksSync("post","create",n,r),Ts("postCreateRxDocument",r),r}function EB(t){var e={};return Object.entries(t.methods).forEach(([n,r])=>{e[n]=r}),e}var Pm={isEqual(t,e,n){t=A4(t),e=A4(e);var r=Kf(eo(t),eo(e));return r},resolve(t){return t.realMasterState}};function A4(t){return t._attachments||(t=br(t),t._attachments={}),t}var NT=["pre","post"],_T=["insert","save","remove","create"],C4=!1,Mu=new Set,OT=(function(){function t(n,r,i,o,h={},m={},y={},g={},E={},S=wT,N={},I=Pm){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Kj(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.eventBulks$={},this.onClose=[],this.closed=!1,this.onRemove=[],this.database=n,this.name=r,this.schema=i,this.internalStorageInstance=o,this.instanceCreationOptions=h,this.migrationStrategies=m,this.methods=y,this.attachments=g,this.options=E,this.cacheReplacementPolicy=S,this.statics=N,this.conflictHandler=I,SB(this.asRxCollection),n&&(this.eventBulks$=n.eventBulks$.pipe(vr(R=>R.collectionName===this.name))),this.database&&Mu.add(this)}var e=t.prototype;return e.prepare=async function(){if(!await A5()){for(var r=0;r<10&&Mu.size>JS;)r++,await this.promiseWait(30);if(Mu.size>JS)throw St("COL23",{database:this.database.name,collection:this.name,args:{existing:Array.from(Mu.values()).map(y=>({db:y.database?y.database.name:"",c:y.name}))}})}this.storageInstance=Yb(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new dT(this.storageInstance,this.schema.primaryPath,(y,g)=>mT(this,y,g),y=>this._runHooks("post","save",y)),this.$=this.eventBulks$.pipe(lo(y=>Y5(y))),this.checkpoint$=this.eventBulks$.pipe(di(y=>y.checkpoint)),this._changeEventBuffer=yB(this.asRxCollection);var i;this._docCache=new xT(this.schema.primaryPath,this.eventBulks$.pipe(vr(y=>!y.isLocal),di(y=>y.events)),y=>(i||(i=wB(this.asRxCollection)),xB(this.asRxCollection,i,y)));var o=this.database.internalStore.changeStream().pipe(vr(y=>{var g=this.name+"-"+this.schema.version,E=y.events.find(S=>S.documentData.context==="collection"&&S.documentData.key===g&&S.operation==="DELETE");return!!E})).subscribe(async()=>{await this.close(),await Promise.all(this.onRemove.map(y=>y()))});this._subs.push(o);var h=await this.database.storageToken,m=this.storageInstance.changeStream().subscribe(y=>{var g={id:y.id,isLocal:!1,internal:!1,collectionName:this.name,storageToken:h,events:y.events,databaseToken:this.database.token,checkpoint:y.checkpoint,context:y.context};this.database.$emit(g)});return this._subs.push(m),ma},e.cleanup=function(r){throw la(this),yr("cleanup")},e.migrationNeeded=function(){throw yr("migration-schema")},e.getMigrationState=function(){throw yr("migration-schema")},e.startMigration=function(r=10){return la(this),this.getMigrationState().startMigration(r)},e.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},e.insert=async function(r){la(this);var i=await this.bulkInsert([r]),o=i.error[0];km(this,r[this.schema.primaryPath],r,o);var h=Ft(i.success[0]);return h},e.insertIfNotExists=async function(r){var i=await this.bulkInsert([r]);if(i.error.length>0){var o=i.error[0];if(o.status===409){var h=o.documentInDb;return bv(this._docCache,[h])[0]}else throw o}return i.success[0]},e.bulkInsert=async function(r){if(la(this),r.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,o=new Set,h;if(this.hasHooks("pre","insert"))h=await Promise.all(r.map(j=>{var B=Kp(this.schema,j);return this._runHooks("pre","insert",B).then(()=>(o.add(B[i]),{document:B}))}));else{h=new Array(r.length);for(var m=this.schema,y=0;y<r.length;y++){var g=r[y],E=Kp(m,g);o.add(E[i]),h[y]={document:E}}}if(o.size!==r.length)throw St("COL22",{collection:this.name,args:{documents:r}});var S=await this.storageInstance.bulkWrite(h,"rx-collection-bulk-insert"),N,I=this,R={get success(){if(!N){var j=xa(I.schema.primaryPath,h,S);N=bv(I._docCache,j)}return N},error:S.error};if(this.hasHooks("post","insert")){var D=new Map;h.forEach(j=>{var B=j.document;D.set(B[i],B)}),await Promise.all(R.success.map(j=>this._runHooks("post","insert",D.get(j.primary),j)))}return R},e.bulkRemove=async function(r){la(this);var i=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var o;typeof r[0]=="string"?o=await this.findByIds(r).exec():(o=new Map,r.forEach(I=>o.set(I.primary,I)));var h=[],m=new Map;Array.from(o.values()).forEach(I=>{var R=I.toMutableJSON(!0);h.push(R),m.set(I.primary,R)}),await Promise.all(h.map(I=>{var R=I[this.schema.primaryPath];return this._runHooks("pre","remove",I,o.get(R))}));var y=h.map(I=>{var R=br(I);return R._deleted=!0,{previous:I,document:R}}),g=await this.storageInstance.bulkWrite(y,"rx-collection-bulk-remove"),E=xa(this.schema.primaryPath,y,g),S=[],N=E.map(I=>{var R=I[i],D=this._docCache.getCachedRxDocument(I);return S.push(D),R});return await Promise.all(N.map(I=>this._runHooks("post","remove",m.get(I),o.get(I)))),{success:S,error:g.error}},e.bulkUpsert=async function(r){la(this);var i=[],o=new Map;r.forEach(g=>{var E=Kp(this.schema,g),S=E[this.schema.primaryPath];if(!S)throw St("COL3",{primaryPath:this.schema.primaryPath,data:E,schema:this.schema.jsonSchema});o.set(S,E),i.push(E)});var h=await this.bulkInsert(i),m=h.success.slice(0),y=[];return await Promise.all(h.error.map(async g=>{if(g.status!==409)y.push(g);else{var E=g.documentId,S=ah(o,E),N=Ft(g.documentInDb),I=this._docCache.getCachedRxDocuments([N])[0],R=await I.incrementalModify(()=>S);m.push(R)}})),{error:y,success:m}},e.upsert=async function(r){la(this);var i=await this.bulkUpsert([r]);return km(this.asRxCollection,r[this.schema.primaryPath],r,i.error[0]),i.success[0]},e.incrementalUpsert=function(r){la(this);var i=Kp(this.schema,r),o=i[this.schema.primaryPath];if(!o)throw St("COL4",{data:r});var h=this._incrementalUpsertQueues.get(o);return h||(h=ma),h=h.then(()=>CB(this,o,i)).then(m=>m.inserted?m.doc:AB(m.doc,i)),this._incrementalUpsertQueues.set(o,h),h},e.find=function(r){la(this),Ts("prePrepareRxQuery",{op:"find",queryObj:r,collection:this}),r||(r=gm());var i=Ru("find",r,this);return i},e.findOne=function(r){la(this),Ts("prePrepareRxQuery",{op:"findOne",queryObj:r,collection:this});var i;if(typeof r=="string")i=Ru("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=gm()),r.limit)throw St("QU6");r=br(r),r.limit=1,i=Ru("findOne",r,this)}return i},e.count=function(r){la(this),r||(r=gm());var i=Ru("count",r,this);return i},e.findByIds=function(r){la(this);var i={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},o=Ru("findByIds",i,this);return o},e.exportJSON=function(){throw yr("json-dump")},e.importJSON=function(r){throw yr("json-dump")},e.insertCRDT=function(r){throw yr("crdt")},e.addPipeline=function(r){throw yr("pipeline")},e.addHook=function(r,i,o,h=!1){if(typeof o!="function")throw da("COL7",{key:i,when:r});if(!NT.includes(r))throw da("COL8",{key:i,when:r});if(!_T.includes(i))throw St("COL9",{key:i});if(r==="post"&&i==="create"&&h===!0)throw St("COL10",{when:r,key:i,parallel:h});var m=o.bind(this),y=h?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][y].push(m)},e.getHooks=function(r,i){return!this.hooks[i]||!this.hooks[i][r]?{series:[],parallel:[]}:this.hooks[i][r]},e.hasHooks=function(r,i){if(!this.hooks[i]||!this.hooks[i][r])return!1;var o=this.getHooks(r,i);return o?o.series.length>0||o.parallel.length>0:!1},e._runHooks=function(r,i,o,h){var m=this.getHooks(r,i);if(!m)return ma;var y=m.series.map(g=>()=>g(o,h));return v7(y).then(()=>Promise.all(m.parallel.map(g=>g(o,h))))},e._runHooksSync=function(r,i,o,h){if(this.hasHooks(r,i)){var m=this.getHooks(r,i);m&&m.series.forEach(y=>y(o,h))}},e.promiseWait=function(r){var i=new Promise(o=>{var h=setTimeout(()=>{this.timeouts.delete(h),o()},r);this.timeouts.add(h)});return i},e.close=async function(){return this.closed?oo:(Mu.delete(this),await Promise.all(this.onClose.map(r=>r())),this.closed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.close(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],Lc("postCloseRxCollection",this).then(()=>!0))))},e.remove=async function(){await this.close(),await Promise.all(this.onRemove.map(r=>r())),await TT(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.multiInstance,this.database.password,this.database.hashFunction)},Jl(t,[{key:"insert$",get:function(){return this.$.pipe(vr(n=>n.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(vr(n=>n.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(vr(n=>n.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])})();function SB(t){if(!C4){C4=!0;var e=Object.getPrototypeOf(t);_T.forEach(n=>{NT.map(r=>{var i=r+b5(n);e[i]=function(o,h){return this.addHook(r,n,o,h)}})})}}function AB(t,e){return t.incrementalModify(n=>e)}function CB(t,e,n){var r=t._docCache.getLatestDocumentDataIfExists(e);return r?Promise.resolve({doc:t._docCache.getCachedRxDocuments([r])[0],inserted:!1}):t.findOne(e).exec().then(i=>i?{doc:i,inserted:!1}:t.insert(n).then(o=>({doc:o,inserted:!0})))}async function TB({database:t,name:e,schema:n,instanceCreationOptions:r={},migrationStrategies:i={},autoMigrate:o=!0,statics:h={},methods:m={},attachments:y={},options:g={},localDocuments:E=!1,cacheReplacementPolicy:S=wT,conflictHandler:N=Pm}){var I={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:n.jsonSchema,options:r,multiInstance:t.multiInstance,password:t.password,devMode:ar.isDevMode()};Ts("preCreateRxStorageInstance",I);var R=await mB(t,I),D=new OT(t,e,n,R,r,i,m,y,g,S,h,N);try{await D.prepare(),Object.entries(h).forEach(([j,B])=>{Object.defineProperty(D,j,{get:()=>B.bind(D)})}),Ts("createRxCollection",{collection:D,creator:{name:e,schema:n,storageInstance:R,instanceCreationOptions:r,migrationStrategies:i,methods:m,attachments:y,options:g,cacheReplacementPolicy:S,localDocuments:E,statics:h}}),o&&D.schema.version!==0&&await D.migratePromise()}catch(j){throw Mu.delete(D),await R.close(),j}return D}var IT=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};IT.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,wv(this)},wrapCall:function(e){var n=this;this._qC++;var r;try{r=e()}catch(i){throw this.unlock(),i}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i})},requestIdlePromise:function(e){var n=this;e=e||{};var r,i=new Promise(function(m){return r=m}),o=function(){Wg(n,i),r()};if(i._manRes=o,e.timeout){var h=setTimeout(function(){i._manRes()},e.timeout);i._timeoutObj=h}return this._iC.add(i),wv(this),i},cancelIdlePromise:function(e){Wg(this,e)},requestIdleCallback:function(e,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return e()}),r},cancelIdleCallback:function(e){var n=this._hPM.get(e);this.cancelIdlePromise(n)},clear:function(){var e=this;this._iC.forEach(function(n){return Wg(e,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function NB(t){if(t._iC.size!==0){var e=t._iC.values(),n=e.next().value;n._manRes(),setTimeout(function(){return wv(t)},0)}}function Wg(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var n=t._pHM.get(e);t._hPM.delete(n),t._pHM.delete(e)}t._iC.delete(e)}}function wv(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}NB(t),t._tryIR=!1},0)},0))}let _B=class{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,RT()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,OB(this)},0))}clear(){this.map.clear()}};function OB(t){const e=RT()-t.ttl,n=t.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const i=r[0];if(r[1]<e)t.map.delete(i);else return}}function RT(){return Date.now()}var xv=new Set,T4=new Map,nw=(function(){function t(n,r,i,o,h,m,y=!1,g={},E,S,N,I,R,D){this.idleQueue=new IT,this.rxdbVersion=S5,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onClose=[],this.closed=!1,this.collections={},this.states={},this.eventBulks$=new Ji,this.closePromise=null,this.observable$=this.eventBulks$.pipe(lo(j=>Y5(j))),this.storageToken=oo,this.storageTokenDocument=oo,this.emittedEventBulkIds=new _B(60*1e3),this.name=n,this.token=r,this.storage=i,this.instanceCreationOptions=o,this.password=h,this.multiInstance=m,this.eventReduce=y,this.options=g,this.internalStore=E,this.hashFunction=S,this.cleanupPolicy=N,this.allowSlowCount=I,this.reactivity=R,this.onClosed=D,this.name!=="pseudoInstance"&&(this.internalStore=Yb(this.asRxDatabase,E,tw),this.storageTokenDocument=fB(this.asRxDatabase).catch(j=>this.startupErrors.push(j)),this.storageToken=this.storageTokenDocument.then(j=>j.data.token).catch(j=>this.startupErrors.push(j)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw St("DB14",{database:this.name});return this.reactivity},e.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},e.removeCollectionDoc=async function(r,i){var o=await bh(this.internalStore,Uc(Bm(r,i),Hl));if(!o)throw St("SNH",{name:r,schema:i});var h=Rd(o);h._deleted=!0,await this.internalStore.bulkWrite([{document:h,previous:o}],"rx-database-remove-collection")},e.addCollections=async function(r){var i={},o={},h=[],m={};await Promise.all(Object.entries(r).map(async([E,S])=>{var N=E,I=S.schema;i[N]=I;var R=M7(I,this.hashFunction);if(o[N]=R,this.collections[E])throw St("DB3",{name:E});var D=Bm(E,I),j={id:Uc(D,Hl),key:D,context:Hl,data:{name:N,schemaHash:await R.hash,schema:R.jsonSchema,version:R.version,connectedStorages:[]},_deleted:!1,_meta:vh(),_rev:Pa(),_attachments:{}};h.push({document:j});var B=Object.assign({},S,{name:N,schema:R,database:this}),H=br(S);H.database=this,H.name=E,Ts("preCreateRxCollection",H),B.conflictHandler=H.conflictHandler,m[N]=B}));var y=await this.internalStore.bulkWrite(h,"rx-database-add-collection");await LB(this),await Promise.all(y.error.map(async E=>{if(E.status!==409)throw St("DB12",{database:this.name,writeError:E});var S=Ft(E.documentInDb),N=S.data.name,I=o[N];if(S.data.schemaHash!==await I.hash)throw St("DB6",{database:this.name,collection:N,previousSchemaHash:S.data.schemaHash,schemaHash:await I.hash,previousSchema:S.data.schema,schema:Ft(i[N])})}));var g={};return await Promise.all(Object.keys(r).map(async E=>{var S=m[E],N=await TB(S);g[E]=N,this.collections[E]=N,this[E]||Object.defineProperty(this,E,{get:()=>this.collections[E]})})),g},e.lockedRun=function(r){return this.idleQueue.wrapCall(r)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(r){throw yr("json-dump")},e.addState=function(r){throw yr("state")},e.importJSON=function(r){throw yr("json-dump")},e.backup=function(r){throw yr("backup")},e.leaderElector=function(){throw yr("leader-election")},e.isLeader=function(){throw yr("leader-election")},e.waitForLeadership=function(){throw yr("leader-election")},e.migrationStates=function(){throw yr("migration-schema")},e.close=function(){if(this.closePromise)return this.closePromise;var{promise:r,resolve:i}=MT(),o=h=>{this.onClosed&&this.onClosed(),this.closed=!0,i(h)};return this.closePromise=r,(async()=>{if(await Lc("preCloseRxDatabase",this),this.eventBulks$.complete(),this._subs.map(h=>h.unsubscribe()),this.name==="pseudoInstance"){o(!1);return}return this.requestIdlePromise().then(()=>Promise.all(this.onClose.map(h=>h()))).then(()=>Promise.all(Object.keys(this.collections).map(h=>this.collections[h]).map(h=>h.close()))).then(()=>this.internalStore.close()).then(()=>o(!0))})(),r},e.remove=function(){return this.close().then(()=>MB(this.name,this.storage,this.multiInstance,this.password))},Jl(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])})();function IB(t,e){if(xv.has(DT(t,e)))throw St("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function MT(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function DT(t,e){return e.name+"|"+t}async function LT(t,e,n,r,i,o){var h=await e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:qk,schema:tw,options:r,multiInstance:i,password:o,devMode:ar.isDevMode()});return h}function RB({storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i=!0,eventReduce:o=!0,ignoreDuplicate:h=!1,options:m={},cleanupPolicy:y,closeDuplicates:g=!1,allowSlowCount:E=!1,localDocuments:S=!1,hashFunction:N=y5,reactivity:I}){Ts("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i,eventReduce:o,ignoreDuplicate:h,options:m,localDocuments:S});var R=DT(n,t),D=T4.get(R)||new Set,j=MT(),B=Array.from(D),H=()=>{D.delete(j.promise),xv.delete(R)};return D.add(j.promise),T4.set(R,D),(async()=>{if(g&&await Promise.all(B.map(J=>J.catch(()=>null).then(F=>F&&F.close()))),h){if(!ar.isDevMode())throw St("DB9",{database:n})}else IB(n,t);xv.add(R);var V=Ed(10),se=await LT(V,t,n,e,i,r),ee=new nw(n,V,t,e,r,i,o,m,se,N,y,E,I,H);return await Lc("createRxDatabase",{database:ee,creator:{storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i,eventReduce:o,ignoreDuplicate:h,options:m,localDocuments:S}}),ee})().then(V=>{j.resolve(V)}).catch(V=>{j.reject(V),H()}),j.promise}async function MB(t,e,n=!0,r){var i=Ed(10),o=await LT(i,e,t,{},n,r),h=await ST(o),m=new Set;h.forEach(g=>m.add(g.data.name));var y=Array.from(m);return await Promise.all(y.map(g=>TT(e,o,i,t,g,n,r))),await Lc("postRemoveRxDatabase",{databaseName:t,storage:e}),await o.remove(),y}function DB(t){return t instanceof nw}async function LB(t){if(await t.storageToken,t.startupErrors[0])throw t.startupErrors[0]}var kB={RxSchema:T5.prototype,RxDocument:S1,RxQuery:ET.prototype,RxCollection:OT.prototype,RxDatabase:nw.prototype},Qg=new Set,N4=new Set;function A1(t){if(Ts("preAddRxPlugin",{plugin:t,plugins:Qg}),!Qg.has(t)){{if(N4.has(t.name))throw St("PL3",{name:t.name,plugin:t});Qg.add(t),N4.add(t.name)}if(!t.rxdb)throw da("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,n])=>n(kB[e])),t.overwritable&&Object.assign(ar,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,n])=>{n.after&&$f[e].push(n.after),n.before&&$f[e].unshift(n.before)})}}async function Um(t,e){var n=ec(t.input.metaInstance.schema,{isCheckpoint:"1",itemId:e}),r=await t.input.metaInstance.findDocumentsById([n],!1),i=r[0];if(t.lastCheckpointDoc[e]=i,i)return i.checkpointData}async function Fm(t,e,n){t.checkpointQueue=t.checkpointQueue.then(async()=>{var r=t.lastCheckpointDoc[e];if(n&&!t.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(n))){var i={id:"",isCheckpoint:"1",itemId:e,_deleted:!1,_attachments:{},checkpointData:n,_meta:vh(),_rev:Pa()};for(i.id=ec(t.input.metaInstance.schema,i);!t.events.canceled.getValue();){if(r&&(i.checkpointData=td([r.checkpointData,i.checkpointData])),i._meta.lwt=Gs(),i._rev=qo(await t.checkpointKey,r),t.events.canceled.getValue())return;var o=[{previous:r,document:i}],h=await t.input.metaInstance.bulkWrite(o,"replication-set-checkpoint"),m=xa(t.primaryPath,o,h)[0];if(m){t.lastCheckpointDoc[e]=m;return}else{var y=h.error[0];if(y.status!==409)throw y;r=Ft(y.documentInDb),i._rev=qo(await t.checkpointKey,r)}}}}),await t.checkpointQueue}async function jB(t){var e=await t.hashFunction([t.identifier,t.forkInstance.databaseName,t.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+e}function _4(t,e,n,r,i){var o=Object.assign({},r,{_attachments:e&&r._attachments?r._attachments:{},_meta:n?r._meta:Object.assign({},i?i._meta:{},{lwt:Gs()}),_rev:n?r._rev:Pa()});return o._rev||(o._rev=qo(t,i)),o}function Dl(t,e,n){var r=br(t);return e||delete r._attachments,n||(delete r._meta,delete r._rev),r}function Ev(t,e){return t.hasAttachments?e.map(n=>{var r=us(n.document);return r.docData=eo(r.docData),{document:r,previous:n.previous}}):e}function Sv(t){for(;;)if(t.underlyingPersistentStorage)t=t.underlyingPersistentStorage;else return t}var vm="RxReplicationProtocolMetaData";function Av(t,e){var n=A7(t),r={title:vm,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:t.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:n+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:n>4?n:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:t.properties},isResolvedConflict:{type:"string"}},keyCompression:t.keyCompression,required:["id","isCheckpoint","itemId"]};e&&(r.encrypted=["docData"]);var i=y1(r);return i}function kT(t,e){return t.input.metaInstance.findDocumentsById(e.map(n=>{var r=ec(t.input.metaInstance.schema,{itemId:n,isCheckpoint:"0"});return r}),!0).then(n=>{var r={};return Object.values(n).forEach(i=>{r[i.itemId]={docData:i.docData,metaDocument:i}}),r})}async function zm(t,e,n,r){var i=e[t.primaryPath],o=n?Rd(n):{id:"",isCheckpoint:"0",itemId:i,docData:e,_attachments:{},_deleted:!1,_rev:Pa(),_meta:{lwt:0}};o.docData=e,r&&(o.isResolvedConflict=r),o._meta.lwt=Gs(),o.id=ec(t.input.metaInstance.schema,o),o._rev=qo(await t.checkpointKey,n);var h={previous:n,document:o};return h}async function BB(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.downstream){var e=await Um(t,"down");e||await Fm(t,"down",t.input.initialCheckpoint.downstream)}var n=await t.input.hashFunction(t.input.identifier),r=t.input.replicationHandler,i=0,o=[];function h(R){t.stats.down.addNewTask=t.stats.down.addNewTask+1;var D={time:i++,task:R};o.push(D),t.streamQueue.down=t.streamQueue.down.then(()=>{for(var j=[];o.length>0;){t.events.active.down.next(!0);var B=Ft(o.shift());if(!(B.time<y)){if(B.task==="RESYNC")if(j.length===0){j.push(B.task);break}else break;j.push(B.task)}}if(j.length!==0)return j[0]==="RESYNC"?g():E(j)}).then(()=>{t.events.active.down.next(!1),!t.firstSyncDone.down.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.down.next(!0)})}if(h("RESYNC"),!t.events.canceled.getValue()){var m=r.masterChangeStream$.pipe(lo(async R=>(await Nc(t.events.active.up.pipe(vr(D=>!D))),R))).subscribe(R=>{t.stats.down.masterChangeStreamEmit=t.stats.down.masterChangeStreamEmit+1,h(R)});Nc(t.events.canceled.pipe(vr(R=>!!R))).then(()=>m.unsubscribe())}var y=-1;async function g(){if(t.stats.down.downstreamResyncOnce=t.stats.down.downstreamResyncOnce+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>Um(t,"down"));for(var R=await t.checkpointQueue,D=[];!t.events.canceled.getValue();){y=i++;var j=await r.masterChangesSince(R,t.input.pullBatchSize);if(j.documents.length===0||(R=td([R,j.checkpoint]),D.push(I(j.documents,R)),j.documents.length<t.input.pullBatchSize))break}await Promise.all(D)}}function E(R){t.stats.down.downstreamProcessChanges=t.stats.down.downstreamProcessChanges+1;var D=[],j=null;return R.forEach(B=>{if(B==="RESYNC")throw new Error("SNH");Dc(D,B.documents),j=td([j,B.checkpoint])}),I(D,Ft(j))}var S=ma,N={docs:{}};function I(R,D){var j=t.primaryPath;return t.stats.down.persistFromMaster=t.stats.down.persistFromMaster+1,R.forEach(B=>{var H=B[j];N.docs[H]=B}),N.checkpoint=D,S=S.then(()=>{var B=N.docs;N.docs={};var H=N.checkpoint,V=Object.keys(B);if(t.events.canceled.getValue()||V.length===0)return ma;var se=[],ee={},J={},F=[];return Promise.all([t.input.forkInstance.findDocumentsById(V,!0),kT(t,V)]).then(([ce,de])=>{var ze=new Map;return ce.forEach(Q=>ze.set(Q[j],Q)),Promise.all(V.map(async Q=>{var fe=ze.get(Q),he=fe?Dl(fe,t.hasAttachments,!1):void 0,Ne=B[Q],ie=de[Q];ie&&fe&&ie.metaDocument.isResolvedConflict===fe._rev&&await t.streamQueue.up;var Y=!ie||!he?!1:t.input.conflictHandler.isEqual(ie.docData,he,"downstream-check-if-equal-0");if(!Y&&ie&&ie.docData._rev&&fe&&fe._meta[t.input.identifier]&&Gl(fe._rev)===fe._meta[t.input.identifier]&&(Y=!0),fe&&ie&&Y===!1||fe&&!ie)return ma;var oe=he?t.input.conflictHandler.isEqual(Ne,he,"downstream-check-if-equal-1"):!1;if(he&&oe)return(!ie||Y===!1)&&F.push(await zm(t,he,ie?ie.metaDocument:void 0)),ma;var ve=Object.assign({},Ne,fe?{_meta:br(fe._meta),_attachments:t.hasAttachments&&Ne._attachments?Ne._attachments:{},_rev:Pa()}:{_meta:{lwt:Gs()},_rev:Pa(),_attachments:t.hasAttachments&&Ne._attachments?Ne._attachments:{}});if(Ne._rev){var Ee=fe?Gl(fe._rev)+1:1;ve._meta[t.input.identifier]=Ee,t.input.keepMeta&&(ve._rev=Ne._rev)}t.input.keepMeta&&Ne._meta&&(ve._meta=Ne._meta);var be={previous:fe,document:ve};be.document._rev=be.document._rev?be.document._rev:qo(n,be.previous),se.push(be),ee[Q]=be,J[Q]=await zm(t,Ne,ie?ie.metaDocument:void 0)}))}).then(async()=>{if(se.length>0)return t.input.forkInstance.bulkWrite(se,await t.downstreamBulkWriteFlag).then(ce=>{var de=xa(t.primaryPath,se,ce);de.forEach(Q=>{var fe=Q[j];t.events.processed.down.next(ee[fe]),F.push(J[fe])});var ze;if(ce.error.forEach(Q=>{if(Q.status!==409){var fe=St("RC_PULL",{writeError:Q});t.events.error.next(fe),ze=fe}}),ze)throw ze})}).then(()=>{if(F.length>0)return t.input.metaInstance.bulkWrite(Ev(t,F),"replication-down-write-meta").then(ce=>{ce.error.forEach(de=>{t.events.error.next(St("RC_PULL",{id:de.documentId,writeError:de}))})})}).then(()=>{Fm(t,"down",H)})}).catch(B=>t.events.error.next(B)),S}}async function PB(t,e,n){var r=t.input.conflictHandler,i=r.isEqual(e.realMasterState,e.newDocumentState,"replication-resolve-conflict");if(!i){var o=await r.resolve(e,"replication-resolve-conflict"),h=Object.assign({},o,{_meta:br(n._meta),_rev:Pa(),_attachments:br(n._attachments)});return h._meta.lwt=Gs(),h._rev=qo(await t.checkpointKey,n),h}}async function Cv(t,e,n,r){if(!n._attachments||r&&!r._attachments)throw new Error("_attachments missing");var i=n[t],o=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return await Promise.all(Object.entries(n._attachments).map(async([h,m])=>{if((!o.has(h)||r&&Ft(r._attachments)[h].digest!==m.digest)&&!m.data){var y=await e.getAttachmentData(i,h,m.digest);m.data=y}})),n}async function UB(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.upstream){var e=await Um(t,"up");e||await Fm(t,"up",t.input.initialCheckpoint.upstream)}var n=t.input.replicationHandler;t.streamQueue.up=t.streamQueue.up.then(()=>E().then(()=>S()));var r=0,i=-1,o=[],h=oo,m={docs:{}},y=t.input.forkInstance.changeStream().subscribe(I=>{if(!t.events.paused.getValue())return t.stats.up.forkChangeStreamEmit=t.stats.up.forkChangeStreamEmit+1,o.push({task:I,time:r++}),t.events.active.up.getValue()||t.events.active.up.next(!0),t.input.waitBeforePersist?t.input.waitBeforePersist().then(()=>S()):S()}),g=n.masterChangeStream$.pipe(vr(I=>I==="RESYNC")).subscribe(()=>{o.push({task:"RESYNC",time:r++}),S()});Nc(t.events.canceled.pipe(vr(I=>!!I))).then(()=>{y.unsubscribe(),g.unsubscribe()});async function E(){if(t.stats.up.upstreamInitialSync=t.stats.up.upstreamInitialSync+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>Um(t,"up"));for(var I=await t.checkpointQueue,R=new Set,D=async function(){i=r++,R.size>3&&await Promise.race(Array.from(R));var H=await hT(t.input.forkInstance,t.input.pushBatchSize,I);if(H.documents.length===0)return 1;I=td([I,H.checkpoint]);var V=N(H.documents,Ft(I));R.add(V),V.catch().then(()=>R.delete(V))};!t.events.canceled.getValue()&&!await D(););var j=await Promise.all(R),B=j.find(H=>!!H);B?await E():!t.firstSyncDone.up.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.up.next(!0)}}function S(){if(t.events.canceled.getValue()||o.length===0){t.events.active.up.next(!1);return}t.stats.up.processTasks=t.stats.up.processTasks+1,t.events.active.up.next(!0),t.streamQueue.up=t.streamQueue.up.then(async()=>{for(var I=[],R;o.length>0;){var D=Ft(o.shift());if(!(D.time<i)){if(D.task==="RESYNC"){t.events.active.up.next(!1),await E();return}D.task.context!==await t.downstreamBulkWriteFlag&&Dc(I,D.task.events.map(j=>j.documentData)),R=td([R,D.task.checkpoint])}}if(await N(I,R),o.length===0)t.events.active.up.next(!1);else return S()})}function N(I,R){return t.stats.up.persistToMaster=t.stats.up.persistToMaster+1,I.forEach(D=>{var j=D[t.primaryPath];m.docs[j]=D}),m.checkpoint=R,h=h.then(async()=>{if(t.events.canceled.getValue())return!1;var D=m.docs;m.docs={};var j=m.checkpoint,B=Object.keys(D);function H(){return Fm(t,"up",j)}if(B.length===0)return H(),!1;var V=await kT(t,B),se={},ee=[],J={},F={};if(await Promise.all(B.map(async be=>{var ne=D[be];F[be]=ne;var ye=Dl(ne,t.hasAttachments,!!t.input.keepMeta),Ce=V[be];Ce&&Ce.metaDocument.isResolvedConflict!==ne._rev&&t.input.conflictHandler.isEqual(Ce.docData,ye,"upstream-check-if-equal")||Ce&&Ce.docData._rev&&Gl(ne._rev)===ne._meta[t.input.identifier]||(ee.push(be),se[be]={assumedMasterState:Ce?Ce.docData:void 0,newDocumentState:ye},J[be]=await zm(t,ye,Ce?Ce.metaDocument:void 0))})),ee.length===0)return H(),!1;var ce=Object.values(se),de=new Set,ze={},Q=e7(ce,t.input.pushBatchSize);await Promise.all(Q.map(async be=>{t.hasAttachments&&await Promise.all(be.map(async ye=>{ye.newDocumentState=await Cv(t.primaryPath,t.input.forkInstance,us(ye.newDocumentState),ye.assumedMasterState)}));var ne=await n.masterWrite(be);ne.forEach(ye=>{var Ce=ye[t.primaryPath];de.add(Ce),ze[Ce]=ye})}));var fe=[];if(ee.forEach(be=>{de.has(be)||(t.events.processed.up.next(se[be]),fe.push(J[be]))}),t.events.canceled.getValue())return!1;fe.length>0&&await t.input.metaInstance.bulkWrite(Ev(t,fe),"replication-up-write-meta");var he=!1;if(de.size>0){t.stats.up.persistToMasterHadConflicts=t.stats.up.persistToMasterHadConflicts+1;var Ne=[],ie={};if(await Promise.all(Object.entries(ze).map(([be,ne])=>{var ye=se[be],Ce={newDocumentState:ye.newDocumentState,assumedMasterState:ye.assumedMasterState,realMasterState:ne};return PB(t,Ce,F[be]).then(async ke=>{if(ke){t.events.resolvedConflicts.next({input:Ce,output:ke}),Ne.push({previous:F[be],document:ke});var He=V[be];ie[be]=await zm(t,Ft(ne),He?He.metaDocument:void 0,ke._rev)}})})),Ne.length>0){he=!0,t.stats.up.persistToMasterConflictWrites=t.stats.up.persistToMasterConflictWrites+1;var Y=await t.input.forkInstance.bulkWrite(Ne,"replication-up-write-conflict"),oe;if(Y.error.forEach(be=>{if(be.status!==409){var ne=St("RC_PUSH",{writeError:be});t.events.error.next(ne),oe=ne}}),oe)throw oe;var ve=[],Ee=xa(t.primaryPath,Ne,Y);Ee.forEach(be=>{var ne=be[t.primaryPath];ve.push(ie[ne])}),ve.length>0&&await t.input.metaInstance.bulkWrite(Ev(t,ve),"replication-up-write-conflict-meta")}}return H(),he}).catch(D=>(t.events.error.next(D),!1)),h}}function jT(t){t=br(t),t.forkInstance=Sv(t.forkInstance),t.metaInstance=Sv(t.metaInstance);var e=jB(t),n={primaryPath:Ks(t.forkInstance.schema.primaryKey),hasAttachments:!!t.forkInstance.schema.attachments,input:t,checkpointKey:e,downstreamBulkWriteFlag:e.then(r=>"replication-downstream-"+r),events:{canceled:new Ja(!1),paused:new Ja(!1),active:{down:new Ja(!0),up:new Ja(!0)},processed:{down:new Ji,up:new Ji},resolvedConflicts:new Ji,error:new Ji},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new Ja(!1),up:new Ja(!1)},streamQueue:{down:ma,up:ma},checkpointQueue:ma,lastCheckpointDoc:{}};return BB(n),UB(n),n}function bm(t){return Nc(K5([t.firstSyncDone.down.pipe(vr(e=>!!e)),t.firstSyncDone.up.pipe(vr(e=>!!e))])).then(()=>{})}function Tv(t){return Promise.all([t.streamQueue.up,t.streamQueue.down,t.checkpointQueue])}function FB(t,e,n,r=!1){t=Sv(t);var i=!!t.schema.attachments,o=Ks(t.schema.primaryKey),h={masterChangeStream$:t.changeStream().pipe(lo(async m=>{var y={checkpoint:m.checkpoint,documents:await Promise.all(m.events.map(async g=>{var E=Dl(g.documentData,i,r);return i&&(E=await Cv(o,t,us(E),void 0)),E}))};return y})),masterChangesSince(m,y){return hT(t,y,m).then(async g=>({checkpoint:g.documents.length>0?g.checkpoint:m,documents:await Promise.all(g.documents.map(async E=>{var S=Dl(E,i,r);return i&&(S=await Cv(o,t,us(S),void 0)),S}))}))},async masterWrite(m){var y={};m.forEach(D=>{var j=D.newDocumentState[o];y[j]=D});var g=Object.keys(y),E=await t.findDocumentsById(g,!0),S=new Map;E.forEach(D=>S.set(D[o],D));var N=[],I=[];if(await Promise.all(Object.entries(y).map(([D,j])=>{var B=S.get(D);B?B&&!j.assumedMasterState?N.push(Dl(B,i,r)):e.isEqual(Dl(B,i,r),Ft(j.assumedMasterState),"rxStorageInstanceToReplicationHandler-masterWrite")===!0?I.push({previous:B,document:_4(n,i,r,j.newDocumentState,B)}):N.push(Dl(B,i,r)):I.push({document:_4(n,i,r,j.newDocumentState)})})),I.length>0){var R=await t.bulkWrite(I,"replication-master-write");R.error.forEach(D=>{if(D.status!==409)throw St("SNH",{name:"non conflict error",error:D});N.push(Dl(Ft(D.documentInDb),i,r))})}return N}};return h}async function BT(t){t.events.canceled.next(!0),t.events.active.up.complete(),t.events.active.down.complete(),t.events.processed.up.complete(),t.events.processed.down.complete(),t.events.resolvedConflicts.complete(),t.events.canceled.complete(),await t.checkpointQueue}function zB(t){return t&&typeof t.then=="function"}Promise.resolve(!1);var HB=Promise.resolve(!0),Ho=Promise.resolve();function Ac(t,e){return t||(t=0),new Promise(function(n){return setTimeout(function(){return n(e)},t)})}function qB(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Md(){return Math.random().toString(36).substring(2)}var Zg=0;function Dd(){var t=Date.now()*1e3;return t<=Zg&&(t=Zg+1),Zg=t,t}function VB(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var GB=Dd,KB="native";function $B(t){var e={time:Dd(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(n){e.messagesCallback&&e.messagesCallback(n.data)},e}function YB(t){t.bc.close(),t.subFns=[]}function XB(t,e){try{return t.bc.postMessage(e,!1),Ho}catch(n){return Promise.reject(n)}}function WB(t,e){t.messagesCallback=e}function QB(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function ZB(){return 150}var JB={create:$B,close:YB,onMessage:WB,postMessage:XB,canBeUsed:QB,type:KB,averageResponseTime:ZB,microSeconds:GB};class PT{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){const n=this.map.get(e);return typeof n>"u"?!1:n<Nv()-this.ttl?(this.map.delete(e),!1):!0}add(e){this.map.delete(e),this.map.set(e,Nv()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,eP(this)},0))}clear(){this.map.clear()}}function eP(t){const e=Nv()-t.ttl,n=t.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)break;const i=r[0];if(r[1]<e)t.map.delete(i);else break}}function Nv(){return Date.now()}function rw(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var tP=Dd,nP="pubkey.broadcast-channel-0-",Go="messages",C1={durability:"relaxed"},rP="idb";function UT(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function iw(t){t.commit&&t.commit()}function iP(t){var e=UT(),n=nP+t,r=e.open(n);return r.onupgradeneeded=function(i){var o=i.target.result;o.createObjectStore(Go,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,o){r.onerror=function(h){return o(h)},r.onsuccess=function(){i(r.result)}})}function sP(t,e,n){var r=Date.now(),i={uuid:e,time:r,data:n},o=t.transaction([Go],"readwrite",C1);return new Promise(function(h,m){o.oncomplete=function(){return h()},o.onerror=function(g){return m(g)};var y=o.objectStore(Go);y.add(i),iw(o)})}function aP(t,e){var n=t.transaction(Go,"readonly",C1),r=n.objectStore(Go),i=[],o=IDBKeyRange.bound(e+1,1/0);if(r.getAll){var h=r.getAll(o);return new Promise(function(y,g){h.onerror=function(E){return g(E)},h.onsuccess=function(E){y(E.target.result)}})}function m(){try{return o=IDBKeyRange.bound(e+1,1/0),r.openCursor(o)}catch{return r.openCursor()}}return new Promise(function(y,g){var E=m();E.onerror=function(S){return g(S)},E.onsuccess=function(S){var N=S.target.result;N?N.value.id<e+1?N.continue(e+1):(i.push(N.value),N.continue()):(iw(n),y(i))}})}function oP(t,e){if(t.closed)return Promise.resolve([]);var n=t.db.transaction(Go,"readwrite",C1),r=n.objectStore(Go);return Promise.all(e.map(function(i){var o=r.delete(i);return new Promise(function(h){o.onsuccess=function(){return h()}})}))}function lP(t,e){var n=Date.now()-e,r=t.transaction(Go,"readonly",C1),i=r.objectStore(Go),o=[];return new Promise(function(h){i.openCursor().onsuccess=function(m){var y=m.target.result;if(y){var g=y.value;g.time<n?(o.push(g),y.continue()):(iw(r),h(o))}else h(o)}})}function cP(t){return lP(t.db,t.options.idb.ttl).then(function(e){return oP(t,e.map(function(n){return n.id}))})}function uP(t,e){return e=rw(e),iP(t).then(function(n){var r={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:Md(),eMIs:new PT(e.idb.ttl*2),writeBlockPromise:Ho,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,e.idb.onclose&&e.idb.onclose()},FT(r),r})}function FT(t){t.closed||zT(t).then(function(){return Ac(t.options.idb.fallbackInterval)}).then(function(){return FT(t)})}function hP(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function zT(t){return t.closed||!t.messagesCallback?Ho:aP(t.db,t.lastCursorId).then(function(e){var n=e.filter(function(r){return!!r}).map(function(r){return r.id>t.lastCursorId&&(t.lastCursorId=r.id),r}).filter(function(r){return hP(r,t)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){t.messagesCallback&&(t.eMIs.add(r.id),t.messagesCallback(r.data))}),Ho})}function fP(t){t.closed=!0,t.db.close()}function dP(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return sP(t.db,t.uuid,e)}).then(function(){qB(0,10)===0&&cP(t)}),t.writeBlockPromise}function pP(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e,zT(t)}function mP(){return!!UT()}function gP(t){return t.idb.fallbackInterval*2}var yP={create:uP,close:fP,onMessage:pP,postMessage:dP,canBeUsed:mP,type:rP,averageResponseTime:gP,microSeconds:tP},vP=Dd,bP="pubkey.broadcastChannel-",wP="localstorage";function HT(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function qT(t){return bP+t}function xP(t,e){return new Promise(function(n){Ac().then(function(){var r=qT(t.channelName),i={token:Md(),time:Date.now(),data:e,uuid:t.uuid},o=JSON.stringify(i);HT().setItem(r,o);var h=document.createEvent("Event");h.initEvent("storage",!0,!0),h.key=r,h.newValue=o,window.dispatchEvent(h),n()})})}function EP(t,e){var n=qT(t),r=function(o){o.key===n&&e(JSON.parse(o.newValue))};return window.addEventListener("storage",r),r}function SP(t){window.removeEventListener("storage",t)}function AP(t,e){if(e=rw(e),!VT())throw new Error("BroadcastChannel: localstorage cannot be used");var n=Md(),r=new PT(e.localstorage.removeTimeout),i={channelName:t,uuid:n,eMIs:r};return i.listener=EP(t,function(o){i.messagesCallback&&o.uuid!==n&&(!o.token||r.has(o.token)||o.data.time&&o.data.time<i.messagesCallbackTime||(r.add(o.token),i.messagesCallback(o.data)))}),i}function CP(t){SP(t.listener)}function TP(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e}function VT(){var t=HT();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function NP(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var _P={create:AP,close:CP,onMessage:TP,postMessage:xP,canBeUsed:VT,type:wP,averageResponseTime:NP,microSeconds:vP},GT=Dd,OP="simulate",sw=new Set;function IP(t){var e={time:GT(),name:t,messagesCallback:null};return sw.add(e),e}function RP(t){sw.delete(t)}var KT=5;function MP(t,e){return new Promise(function(n){return setTimeout(function(){var r=Array.from(sw);r.forEach(function(i){i.name===t.name&&i!==t&&i.messagesCallback&&i.time<e.time&&i.messagesCallback(e)}),n()},KT)})}function DP(t,e){t.messagesCallback=e}function LP(){return!0}function kP(){return KT}var jP={create:IP,close:RP,onMessage:DP,postMessage:MP,canBeUsed:LP,type:OP,averageResponseTime:kP,microSeconds:GT},O4=[JB,yP,_P];function BP(t){var e=[].concat(t.methods,O4).filter(Boolean);if(t.type){if(t.type==="simulate")return jP;var n=e.find(function(i){return i.type===t.type});if(n)return n;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(i){return i.type!=="idb"}));var r=e.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(O4.map(function(i){return i.type})))}var $T=new Set,PP=0,T1=function(e,n){this.id=PP++,$T.add(this),this.name=e,this.options=rw(n),this.method=BP(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,UP(this)};T1._pubkey=!0;T1.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return I4(this,"message",e)},postInternal:function(e){return I4(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),n={time:e,fn:t};M4(this,"message",this._onML),t&&typeof t=="function"?(this._onML=n,R4(this,"message",n)):this._onML=null},addEventListener:function(e,n){var r=this.method.microSeconds(),i={time:r,fn:n};R4(this,e,i)},removeEventListener:function(e,n){var r=this._addEL[e].find(function(i){return i.fn===n});M4(this,e,r)},close:function(){var e=this;if(!this.closed){$T.delete(this),this.closed=!0;var n=this._prepP?this._prepP:Ho;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(r){return r()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function I4(t,e,n){var r=t.method.microSeconds(),i={time:r,type:e,data:n},o=t._prepP?t._prepP:Ho;return o.then(function(){var h=t.method.postMessage(t._state,i);return t._uMP.add(h),h.catch().then(function(){return t._uMP.delete(h)}),h})}function UP(t){var e=t.method.create(t.name,t.options);zB(e)?(t._prepP=e,e.then(function(n){t._state=n})):t._state=e}function YT(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function R4(t,e,n){t._addEL[e].push(n),FP(t)}function M4(t,e,n){t._addEL[e]=t._addEL[e].filter(function(r){return r!==n}),zP(t)}function FP(t){if(!t._iL&&YT(t)){var e=function(i){t._addEL[i.type].forEach(function(o){i.time>=o.time&&o.fn(i.data)})},n=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,n)}):(t._iL=!0,t.method.onMessage(t._state,e,n))}}function zP(t){if(t._iL&&!YT(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}function HP(t){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var e=self.close.bind(self);self.close=function(){return t(),e()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){t()},!0),window.addEventListener("unload",function(){t()},!0)}}function qP(t){process.on("exit",function(){return t()}),process.on("beforeExit",function(){return t().then(function(){return process.exit()})}),process.on("SIGINT",function(){return t().then(function(){return process.exit()})}),process.on("uncaughtException",function(e){return t().then(function(){console.trace(e),process.exit(101)})})}var VP=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",GP=VP?qP:HP,_f=new Set,D4=!1;function KP(){D4||(D4=!0,GP(YP))}function $P(t){if(KP(),typeof t!="function")throw new Error("Listener is no function");_f.add(t);var e={remove:function(){return _f.delete(t)},run:function(){return _f.delete(t),t()}};return e}function YP(){var t=[];return _f.forEach(function(e){t.push(e()),_f.delete(e)}),Promise.all(t)}function Ic(t,e){var n={context:"leader",action:e,token:t.token};return t.broadcastChannel.postInternal(n)}function XT(t){t.isLeader=!0,t._hasLeader=!0;var e=$P(function(){return t.die()});t._unl.push(e);var n=function(i){i.context==="leader"&&i.action==="apply"&&Ic(t,"tell"),i.context==="leader"&&i.action==="tell"&&!t._dpLC&&(t._dpLC=!0,t._dpL(),Ic(t,"tell"))};return t.broadcastChannel.addEventListener("internal",n),t._lstns.push(n),Ic(t,"tell")}var WT=function(e,n){var r=this;this.broadcastChannel=e,e._befC.push(function(){return r.die()}),this._options=n,this.isLeader=!1,this.isDead=!1,this.token=Md(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};WT.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then(function(n){var r=n.held?n.held.filter(function(i){return i.name===e.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var n=new Promise(function(r,i){e._wKMC.res=r,e._wKMC.rej=i});this._wLMP=new Promise(function(r,i){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},function(){return e._wKMC.c=void 0,XT(e),r(),n}).catch(function(o){e._wKMC.rej&&e._wKMC.rej(o),i(o)})})}return this._wLMP},set onduplicate(t){},die:function(){var e=this;return this._lstns.forEach(function(n){return e.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Ic(this,"death")}};var QT=function(e,n){var r=this;this.broadcastChannel=e,this._options=n,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=Md(),this._aplQ=Ho,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var i=function(h){h.context==="leader"&&(h.action==="death"&&(r._hasLeader=!1),h.action==="tell"&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",i),this._lstns.push(i)};QT.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var n=this;if(this.isLeader)return Ac(0,!0);if(this.isDead)return Ac(0,!1);if(this._aplQC>1)return this._aplQ;var r=function(){if(n.isLeader)return HB;var o=!1,h,m=new Promise(function(E){h=function(){o=!0,E()}}),y=function(S){S.context==="leader"&&S.token!=n.token&&(S.action==="apply"&&S.token>n.token&&h(),S.action==="tell"&&(h(),n._hasLeader=!0))};n.broadcastChannel.addEventListener("internal",y);var g=e?n._options.responseTime*4:n._options.responseTime;return Ic(n,"apply").then(function(){return Promise.race([Ac(g),m.then(function(){return Promise.reject(new Error)})])}).then(function(){return Ic(n,"apply")}).then(function(){return Promise.race([Ac(g),m.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return n.broadcastChannel.removeEventListener("internal",y),o?!1:XT(n).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return r()}).then(function(){n._aplQC=n._aplQC-1}),this._aplQ.then(function(){return n.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=XP(this)),this._aLP},set onduplicate(t){this._dpL=t},die:function(){var e=this;return this._lstns.forEach(function(n){return e.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Ic(this,"death")}};function XP(t){return t.isLeader?Ho:new Promise(function(e){var n=!1;function r(){n||(n=!0,t.broadcastChannel.removeEventListener("internal",o),e(!0))}t.applyOnce().then(function(){t.isLeader&&r()});var i=function(){return Ac(t._options.fallbackInterval).then(function(){if(!(t.isDead||n))if(t.isLeader)r();else return t.applyOnce(!0).then(function(){t.isLeader?r():i()})})};i();var o=function(m){m.context==="leader"&&m.action==="death"&&(t._hasLeader=!1,t.applyOnce().then(function(){t.isLeader&&r()}))};t.broadcastChannel.addEventListener("internal",o),t._lstns.push(o)})}function WP(t,e){return t||(t={}),t=JSON.parse(JSON.stringify(t)),t.fallbackInterval||(t.fallbackInterval=3e3),t.responseTime||(t.responseTime=e.method.averageResponseTime(e.options)),t}function ZT(t,e){if(t._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");e=WP(e,t);var n=VB()?new WT(t,e):new QT(t,e);return t._befC.push(function(){return n.die()}),t._leaderElector=n,n}var Hm=new Map;function JT(t,e,n,r){var i=Hm.get(e);return i||(i={bc:new T1(["RxDB:",t,n].join("|")),refs:new Set},Hm.set(e,i)),i.refs.add(r),i.bc}function _v(t,e){var n=Hm.get(t);if(n&&(n.refs.delete(e),n.refs.size===0))return Hm.delete(t),n.bc.close()}function QP(t,e,n,r){if(e.multiInstance){var i=JT(t,e.databaseInstanceToken,n.databaseName,n),o=new Ji,h=N=>{N.storageName===t&&N.databaseName===e.databaseName&&N.collectionName===e.collectionName&&N.version===e.schema.version&&o.next(N.eventBulk)};i.addEventListener("message",h);var m=n.changeStream(),y=!1,g=m.subscribe(N=>{y||i.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:N})});n.changeStream=function(){return o.asObservable().pipe(CL(m))};var E=n.close.bind(n);n.close=async function(){return y=!0,g.unsubscribe(),i.removeEventListener("message",h),await _v(e.databaseInstanceToken,n),E()};var S=n.remove.bind(n);n.remove=async function(){return y=!0,g.unsubscribe(),i.removeEventListener("message",h),await _v(e.databaseInstanceToken,n),S()}}}var wm={exports:{}},ZP=wm.exports,L4;function JP(){return L4||(L4=1,(function(t,e){(function(n,r){t.exports=r()})(ZP,function(){var n=function(c,f){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(b[A]=x[A])})(c,f)},r=function(){return(r=Object.assign||function(c){for(var f,b=1,x=arguments.length;b<x;b++)for(var A in f=arguments[b])Object.prototype.hasOwnProperty.call(f,A)&&(c[A]=f[A]);return c}).apply(this,arguments)};function i(c,f,b){for(var x,A=0,_=f.length;A<_;A++)!x&&A in f||((x=x||Array.prototype.slice.call(f,0,A))[A]=f[A]);return c.concat(x||Array.prototype.slice.call(f))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,h=Object.keys,m=Array.isArray;function y(c,f){return typeof f!="object"||h(f).forEach(function(b){c[b]=f[b]}),c}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var g=Object.getPrototypeOf,E={}.hasOwnProperty;function S(c,f){return E.call(c,f)}function N(c,f){typeof f=="function"&&(f=f(g(c))),(typeof Reflect>"u"?h:Reflect.ownKeys)(f).forEach(function(b){R(c,b,f[b])})}var I=Object.defineProperty;function R(c,f,b,x){I(c,f,y(b&&S(b,"get")&&typeof b.get=="function"?{get:b.get,set:b.set,configurable:!0}:{value:b,configurable:!0,writable:!0},x))}function D(c){return{from:function(f){return c.prototype=Object.create(f.prototype),R(c.prototype,"constructor",c),{extend:N.bind(null,c.prototype)}}}}var j=Object.getOwnPropertyDescriptor,B=[].slice;function H(c,f,b){return B.call(c,f,b)}function V(c,f){return f(c)}function se(c){if(!c)throw new Error("Assertion Failed")}function ee(c){o.setImmediate?setImmediate(c):setTimeout(c,0)}function J(c,f){if(typeof f=="string"&&S(c,f))return c[f];if(!f)return c;if(typeof f!="string"){for(var b=[],x=0,A=f.length;x<A;++x){var _=J(c,f[x]);b.push(_)}return b}var M=f.indexOf(".");if(M!==-1){var L=c[f.substr(0,M)];return L==null?void 0:J(L,f.substr(M+1))}}function F(c,f,b){if(c&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(c)))if(typeof f!="string"&&"length"in f){se(typeof b!="string"&&"length"in b);for(var x=0,A=f.length;x<A;++x)F(c,f[x],b[x])}else{var _,M,L=f.indexOf(".");L!==-1?(_=f.substr(0,L),(M=f.substr(L+1))===""?b===void 0?m(c)&&!isNaN(parseInt(_))?c.splice(_,1):delete c[_]:c[_]=b:F(L=!(L=c[_])||!S(c,_)?c[_]={}:L,M,b)):b===void 0?m(c)&&!isNaN(parseInt(f))?c.splice(f,1):delete c[f]:c[f]=b}}function ce(c){var f,b={};for(f in c)S(c,f)&&(b[f]=c[f]);return b}var de=[].concat;function ze(c){return de.apply([],c)}var te="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ze([8,16,32,64].map(function(c){return["Int","Uint","Float"].map(function(f){return f+c+"Array"})}))).filter(function(c){return o[c]}),Q=new Set(te.map(function(c){return o[c]})),fe=null;function he(c){return fe=new WeakMap,c=(function f(b){if(!b||typeof b!="object")return b;var x=fe.get(b);if(x)return x;if(m(b)){x=[],fe.set(b,x);for(var A=0,_=b.length;A<_;++A)x.push(f(b[A]))}else if(Q.has(b.constructor))x=b;else{var M,L=g(b);for(M in x=L===Object.prototype?{}:Object.create(L),fe.set(b,x),b)S(b,M)&&(x[M]=f(b[M]))}return x})(c),fe=null,c}var Ne={}.toString;function ie(c){return Ne.call(c).slice(8,-1)}var Y=typeof Symbol<"u"?Symbol.iterator:"@@iterator",oe=typeof Y=="symbol"?function(c){var f;return c!=null&&(f=c[Y])&&f.apply(c)}:function(){return null};function ve(c,f){return f=c.indexOf(f),0<=f&&c.splice(f,1),0<=f}var Ee={};function be(c){var f,b,x,A;if(arguments.length===1){if(m(c))return c.slice();if(this===Ee&&typeof c=="string")return[c];if(A=oe(c)){for(b=[];!(x=A.next()).done;)b.push(x.value);return b}if(c==null)return[c];if(typeof(f=c.length)!="number")return[c];for(b=new Array(f);f--;)b[f]=c[f];return b}for(f=arguments.length,b=new Array(f);f--;)b[f]=arguments[f];return b}var ne=typeof Symbol<"u"?function(c){return c[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},jr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],vi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(jr),ye={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ce(c,f){this.name=c,this.message=f}function ke(c,f){return c+". Errors: "+Object.keys(f).map(function(b){return f[b].toString()}).filter(function(b,x,A){return A.indexOf(b)===x}).join(`
`)}function He(c,f,b,x){this.failures=f,this.failedKeys=x,this.successCount=b,this.message=ke(c,f)}function Fe(c,f){this.name="BulkError",this.failures=Object.keys(f).map(function(b){return f[b]}),this.failuresByPos=f,this.message=ke(c,this.failures)}D(Ce).from(Error).extend({toString:function(){return this.name+": "+this.message}}),D(He).from(Ce),D(Fe).from(Ce);var Ct=vi.reduce(function(c,f){return c[f]=f+"Error",c},{}),dt=Ce,Ze=vi.reduce(function(c,f){var b=f+"Error";function x(A,_){this.name=b,A?typeof A=="string"?(this.message="".concat(A).concat(_?`
 `+_:""),this.inner=_||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=ye[f]||b,this.inner=null)}return D(x).from(dt),c[f]=x,c},{});Ze.Syntax=SyntaxError,Ze.Type=TypeError,Ze.Range=RangeError;var Wt=jr.reduce(function(c,f){return c[f+"Error"]=Ze[f],c},{}),kt=vi.reduce(function(c,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(c[f+"Error"]=Ze[f]),c},{});function ht(){}function mt(c){return c}function bn(c,f){return c==null||c===mt?f:function(b){return f(c(b))}}function mn(c,f){return function(){c.apply(this,arguments),f.apply(this,arguments)}}function _r(c,f){return c===ht?f:function(){var b=c.apply(this,arguments);b!==void 0&&(arguments[0]=b);var x=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var _=f.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?mn(x,this.onsuccess):x),A&&(this.onerror=this.onerror?mn(A,this.onerror):A),_!==void 0?_:b}}function lr(c,f){return c===ht?f:function(){c.apply(this,arguments);var b=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?mn(b,this.onsuccess):b),x&&(this.onerror=this.onerror?mn(x,this.onerror):x)}}function Tn(c,f){return c===ht?f:function(b){var x=c.apply(this,arguments);y(b,x);var A=this.onsuccess,_=this.onerror;return this.onsuccess=null,this.onerror=null,b=f.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?mn(A,this.onsuccess):A),_&&(this.onerror=this.onerror?mn(_,this.onerror):_),x===void 0?b===void 0?void 0:b:y(x,b)}}function tn(c,f){return c===ht?f:function(){return f.apply(this,arguments)!==!1&&c.apply(this,arguments)}}function ri(c,f){return c===ht?f:function(){var b=c.apply(this,arguments);if(b&&typeof b.then=="function"){for(var x=this,A=arguments.length,_=new Array(A);A--;)_[A]=arguments[A];return b.then(function(){return f.apply(x,_)})}return f.apply(this,arguments)}}kt.ModifyError=He,kt.DexieError=Ce,kt.BulkError=Fe;var ft=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $i(c){ft=c}var Li={},an=100,te=typeof Promise>"u"?[]:(function(){var c=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[c,g(c),c];var f=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[f,g(f),c]})(),jr=te[0],vi=te[1],te=te[2],vi=vi&&vi.then,Wn=jr&&jr.constructor,ii=!!te,Rn=function(c,f){jt.push([c,f]),Sr&&(queueMicrotask(Yi),Sr=!1)},Nn=!0,Sr=!0,si=[],ki=[],Mn=mt,$e={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ht,pgp:!1,env:{},finalize:ht},rt=$e,jt=[],dn=0,Yr=[];function st(c){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=rt;if(typeof c!="function"){if(c!==Li)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&cr(this,this._value))}this._state=null,this._value=null,++f.ref,(function b(x,A){try{A(function(_){if(x._state===null){if(_===x)throw new TypeError("A promise cannot be resolved with itself.");var M=x._lib&&_n();_&&typeof _.then=="function"?b(x,function(L,U){_ instanceof st?_._then(L,U):_.then(L,U)}):(x._state=!0,x._value=_,ai(x)),M&&Kn()}},cr.bind(null,x))}catch(_){cr(x,_)}})(this,c)}var Hr={get:function(){var c=rt,f=Ke;function b(x,A){var _=this,M=!c.global&&(c!==rt||f!==Ke),L=M&&!nt(),U=new st(function(q,K){Xr(_,new Qt(zn(x,c,M,L),zn(A,c,M,L),q,K,c))});return this._consoleTask&&(U._consoleTask=this._consoleTask),U}return b.prototype=Li,b},set:function(c){R(this,"then",c&&c.prototype===Li?Hr:{get:function(){return c},set:Hr.set})}};function Qt(c,f,b,x,A){this.onFulfilled=typeof c=="function"?c:null,this.onRejected=typeof f=="function"?f:null,this.resolve=b,this.reject=x,this.psd=A}function cr(c,f){var b,x;ki.push(f),c._state===null&&(b=c._lib&&_n(),f=Mn(f),c._state=!1,c._value=f,x=c,si.some(function(A){return A._value===x._value})||si.push(x),ai(c),b&&Kn())}function ai(c){var f=c._listeners;c._listeners=[];for(var b=0,x=f.length;b<x;++b)Xr(c,f[b]);var A=c._PSD;--A.ref||A.finalize(),dn===0&&(++dn,Rn(function(){--dn==0&&Wr()},[]))}function Xr(c,f){if(c._state!==null){var b=c._state?f.onFulfilled:f.onRejected;if(b===null)return(c._state?f.resolve:f.reject)(c._value);++f.psd.ref,++dn,Rn(wr,[b,c,f])}else c._listeners.push(f)}function wr(c,f,b){try{var x,A=f._value;!f._state&&ki.length&&(ki=[]),x=ft&&f._consoleTask?f._consoleTask.run(function(){return c(A)}):c(A),f._state||ki.indexOf(A)!==-1||(function(_){for(var M=si.length;M;)if(si[--M]._value===_._value)return si.splice(M,1)})(f),b.resolve(x)}catch(_){b.reject(_)}finally{--dn==0&&Wr(),--b.psd.ref||b.psd.finalize()}}function Yi(){$t($e,function(){_n()&&Kn()})}function _n(){var c=Nn;return Sr=Nn=!1,c}function Kn(){var c,f,b;do for(;0<jt.length;)for(c=jt,jt=[],b=c.length,f=0;f<b;++f){var x=c[f];x[0].apply(null,x[1])}while(0<jt.length);Sr=Nn=!0}function Wr(){var c=si;si=[],c.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var f=Yr.slice(0),b=f.length;b;)f[--b]()}function Qn(c){return new st(Li,!1,c)}function kn(c,f){var b=rt;return function(){var x=_n(),A=rt;try{return vt(b,!0),c.apply(this,arguments)}catch(_){f&&f(_)}finally{vt(A,!1),x&&Kn()}}}N(st.prototype,{then:Hr,_then:function(c,f){Xr(this,new Qt(null,null,c,f,rt))},catch:function(c){if(arguments.length===1)return this.then(null,c);var f=c,b=arguments[1];return typeof f=="function"?this.then(null,function(x){return(x instanceof f?b:Qn)(x)}):this.then(null,function(x){return(x&&x.name===f?b:Qn)(x)})},finally:function(c){return this.then(function(f){return st.resolve(c()).then(function(){return f})},function(f){return st.resolve(c()).then(function(){return Qn(f)})})},timeout:function(c,f){var b=this;return c<1/0?new st(function(x,A){var _=setTimeout(function(){return A(new Ze.Timeout(f))},c);b.then(x,A).finally(clearTimeout.bind(null,_))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&R(st.prototype,Symbol.toStringTag,"Dexie.Promise"),$e.env=Ht(),N(st,{all:function(){var c=be.apply(null,arguments).map(gt);return new st(function(f,b){c.length===0&&f([]);var x=c.length;c.forEach(function(A,_){return st.resolve(A).then(function(M){c[_]=M,--x||f(c)},b)})})},resolve:function(c){return c instanceof st?c:c&&typeof c.then=="function"?new st(function(f,b){c.then(f,b)}):new st(Li,!0,c)},reject:Qn,race:function(){var c=be.apply(null,arguments).map(gt);return new st(function(f,b){c.map(function(x){return st.resolve(x).then(f,b)})})},PSD:{get:function(){return rt},set:function(c){return rt=c}},totalEchoes:{get:function(){return Ke}},newPSD:at,usePSD:$t,scheduler:{get:function(){return Rn},set:function(c){Rn=c}},rejectionMapper:{get:function(){return Mn},set:function(c){Mn=c}},follow:function(c,f){return new st(function(b,x){return at(function(A,_){var M=rt;M.unhandleds=[],M.onunhandled=_,M.finalize=mn(function(){var L,U=this;L=function(){U.unhandleds.length===0?A():_(U.unhandleds[0])},Yr.push(function q(){L(),Yr.splice(Yr.indexOf(q),1)}),++dn,Rn(function(){--dn==0&&Wr()},[])},M.finalize),c()},f,b,x)})}}),Wn&&(Wn.allSettled&&R(st,"allSettled",function(){var c=be.apply(null,arguments).map(gt);return new st(function(f){c.length===0&&f([]);var b=c.length,x=new Array(b);c.forEach(function(A,_){return st.resolve(A).then(function(M){return x[_]={status:"fulfilled",value:M}},function(M){return x[_]={status:"rejected",reason:M}}).then(function(){return--b||f(x)})})})}),Wn.any&&typeof AggregateError<"u"&&R(st,"any",function(){var c=be.apply(null,arguments).map(gt);return new st(function(f,b){c.length===0&&b(new AggregateError([]));var x=c.length,A=new Array(x);c.forEach(function(_,M){return st.resolve(_).then(function(L){return f(L)},function(L){A[M]=L,--x||b(new AggregateError(A))})})})}),Wn.withResolvers&&(st.withResolvers=Wn.withResolvers));var ue={awaits:0,echoes:0,id:0},Se=0,Te=[],Xe=0,Ke=0,Ue=0;function at(c,f,b,x){var A=rt,_=Object.create(A);return _.parent=A,_.ref=0,_.global=!1,_.id=++Ue,$e.env,_.env=ii?{Promise:st,PromiseProp:{value:st,configurable:!0,writable:!0},all:st.all,race:st.race,allSettled:st.allSettled,any:st.any,resolve:st.resolve,reject:st.reject}:{},f&&y(_,f),++A.ref,_.finalize=function(){--this.parent.ref||this.parent.finalize()},x=$t(_,c,b,x),_.ref===0&&_.finalize(),x}function ot(){return ue.id||(ue.id=++Se),++ue.awaits,ue.echoes+=an,ue.id}function nt(){return!!ue.awaits&&(--ue.awaits==0&&(ue.id=0),ue.echoes=ue.awaits*an,!0)}function gt(c){return ue.echoes&&c&&c.constructor===Wn?(ot(),c.then(function(f){return nt(),f},function(f){return nt(),bt(f)})):c}function yt(){var c=Te[Te.length-1];Te.pop(),vt(c,!1)}function vt(c,f){var b,x=rt;(f?!ue.echoes||Xe++&&c===rt:!Xe||--Xe&&c===rt)||queueMicrotask(f?(function(A){++Ke,ue.echoes&&--ue.echoes!=0||(ue.echoes=ue.awaits=ue.id=0),Te.push(rt),vt(A,!0)}).bind(null,c):yt),c!==rt&&(rt=c,x===$e&&($e.env=Ht()),ii&&(b=$e.env.Promise,f=c.env,(x.global||c.global)&&(Object.defineProperty(o,"Promise",f.PromiseProp),b.all=f.all,b.race=f.race,b.resolve=f.resolve,b.reject=f.reject,f.allSettled&&(b.allSettled=f.allSettled),f.any&&(b.any=f.any))))}function Ht(){var c=o.Promise;return ii?{Promise:c,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:c.all,race:c.race,allSettled:c.allSettled,any:c.any,resolve:c.resolve,reject:c.reject}:{}}function $t(c,f,b,x,A){var _=rt;try{return vt(c,!0),f(b,x,A)}finally{vt(_,!1)}}function zn(c,f,b,x){return typeof c!="function"?c:function(){var A=rt;b&&ot(),vt(f,!0);try{return c.apply(this,arguments)}finally{vt(A,!1),x&&queueMicrotask(nt)}}}function gn(c){Promise===Wn&&ue.echoes===0?Xe===0?c():enqueueNativeMicroTask(c):setTimeout(c,0)}(""+vi).indexOf("[native code]")===-1&&(ot=nt=ht);var bt=st.reject,Et="",jn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xn="String expected.",En=[],qe="__dbnames",Ar="readonly",hn="readwrite";function Un(c,f){return c?f?function(){return c.apply(this,arguments)&&f.apply(this,arguments)}:c:f}var Or={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yt(c){return typeof c!="string"||/\./.test(c)?function(f){return f}:function(f){return f[c]===void 0&&c in f&&delete(f=he(f))[c],f}}function nn(){throw Ze.Type()}function Je(c,f){try{var b=Hn(c),x=Hn(f);if(b!==x)return b==="Array"?1:x==="Array"?-1:b==="binary"?1:x==="binary"?-1:b==="string"?1:x==="string"?-1:b==="Date"?1:x!=="Date"?NaN:-1;switch(b){case"number":case"Date":case"string":return f<c?1:c<f?-1:0;case"binary":return(function(A,_){for(var M=A.length,L=_.length,U=M<L?M:L,q=0;q<U;++q)if(A[q]!==_[q])return A[q]<_[q]?-1:1;return M===L?0:M<L?-1:1})(Qr(c),Qr(f));case"Array":return(function(A,_){for(var M=A.length,L=_.length,U=M<L?M:L,q=0;q<U;++q){var K=Je(A[q],_[q]);if(K!==0)return K}return M===L?0:M<L?-1:1})(c,f)}}catch{}return NaN}function Hn(c){var f=typeof c;return f!="object"?f:ArrayBuffer.isView(c)?"binary":(c=ie(c),c==="ArrayBuffer"?"binary":c)}function Qr(c){return c instanceof Uint8Array?c:ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c)}var ur=(lt.prototype._trans=function(c,f,b){var x=this._tx||rt.trans,A=this.name,_=ft&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(c==="readonly"?"read":"write"," ").concat(this.name));function M(q,K,G){if(!G.schema[A])throw new Ze.NotFound("Table "+A+" not part of transaction");return f(G.idbtrans,G)}var L=_n();try{var U=x&&x.db._novip===this.db._novip?x===rt.trans?x._promise(c,M,b):at(function(){return x._promise(c,M,b)},{trans:x,transless:rt.transless||rt}):(function q(K,G,Z,re){if(K.idbdb&&(K._state.openComplete||rt.letThrough||K._vip)){var ae=K._createTransaction(G,Z,K._dbSchema);try{ae.create(),K._state.PR1398_maxLoop=3}catch(le){return le.name===Ct.InvalidState&&K.isOpen()&&0<--K._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),K.close({disableAutoOpen:!1}),K.open().then(function(){return q(K,G,Z,re)})):bt(le)}return ae._promise(G,function(le,pe){return at(function(){return rt.trans=ae,re(le,pe,ae)})}).then(function(le){if(G==="readwrite")try{ae.idbtrans.commit()}catch{}return G==="readonly"?le:ae._completion.then(function(){return le})})}if(K._state.openComplete)return bt(new Ze.DatabaseClosed(K._state.dbOpenError));if(!K._state.isBeingOpened){if(!K._state.autoOpen)return bt(new Ze.DatabaseClosed);K.open().catch(ht)}return K._state.dbReadyPromise.then(function(){return q(K,G,Z,re)})})(this.db,c,[this.name],M);return _&&(U._consoleTask=_,U=U.catch(function(q){return console.trace(q),bt(q)})),U}finally{L&&Kn()}},lt.prototype.get=function(c,f){var b=this;return c&&c.constructor===Object?this.where(c).first(f):c==null?bt(new Ze.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return b.core.get({trans:x,key:c}).then(function(A){return b.hook.reading.fire(A)})}).then(f)},lt.prototype.where=function(c){if(typeof c=="string")return new this.db.WhereClause(this,c);if(m(c))return new this.db.WhereClause(this,"[".concat(c.join("+"),"]"));var f=h(c);if(f.length===1)return this.where(f[0]).equals(c[f[0]]);var b=this.schema.indexes.concat(this.schema.primKey).filter(function(L){if(L.compound&&f.every(function(q){return 0<=L.keyPath.indexOf(q)})){for(var U=0;U<f.length;++U)if(f.indexOf(L.keyPath[U])===-1)return!1;return!0}return!1}).sort(function(L,U){return L.keyPath.length-U.keyPath.length})[0];if(b&&this.db._maxKey!==Et){var _=b.keyPath.slice(0,f.length);return this.where(_).equals(_.map(function(U){return c[U]}))}!b&&ft&&console.warn("The query ".concat(JSON.stringify(c)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var x=this.schema.idxByName;function A(L,U){return Je(L,U)===0}var M=f.reduce(function(G,U){var q=G[0],K=G[1],G=x[U],Z=c[U];return[q||G,q||!G?Un(K,G&&G.multi?function(re){return re=J(re,U),m(re)&&re.some(function(ae){return A(Z,ae)})}:function(re){return A(Z,J(re,U))}):K]},[null,null]),_=M[0],M=M[1];return _?this.where(_.name).equals(c[_.keyPath]).filter(M):b?this.filter(M):this.where(f).equals("")},lt.prototype.filter=function(c){return this.toCollection().and(c)},lt.prototype.count=function(c){return this.toCollection().count(c)},lt.prototype.offset=function(c){return this.toCollection().offset(c)},lt.prototype.limit=function(c){return this.toCollection().limit(c)},lt.prototype.each=function(c){return this.toCollection().each(c)},lt.prototype.toArray=function(c){return this.toCollection().toArray(c)},lt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},lt.prototype.orderBy=function(c){return new this.db.Collection(new this.db.WhereClause(this,m(c)?"[".concat(c.join("+"),"]"):c))},lt.prototype.reverse=function(){return this.toCollection().reverse()},lt.prototype.mapToClass=function(c){var f,b=this.db,x=this.name;function A(){return f!==null&&f.apply(this,arguments)||this}(this.schema.mappedClass=c).prototype instanceof nn&&((function(U,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function K(){this.constructor=U}n(U,q),U.prototype=q===null?Object.create(q):(K.prototype=q.prototype,new K)})(A,f=c),Object.defineProperty(A.prototype,"db",{get:function(){return b},enumerable:!1,configurable:!0}),A.prototype.table=function(){return x},c=A);for(var _=new Set,M=c.prototype;M;M=g(M))Object.getOwnPropertyNames(M).forEach(function(U){return _.add(U)});function L(U){if(!U)return U;var q,K=Object.create(c.prototype);for(q in U)if(!_.has(q))try{K[q]=U[q]}catch{}return K}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=L,this.hook("reading",L),c},lt.prototype.defineClass=function(){return this.mapToClass(function(c){y(this,c)})},lt.prototype.add=function(c,f){var b=this,x=this.schema.primKey,A=x.auto,_=x.keyPath,M=c;return _&&A&&(M=Yt(_)(c)),this._trans("readwrite",function(L){return b.core.mutate({trans:L,type:"add",keys:f!=null?[f]:null,values:[M]})}).then(function(L){return L.numFailures?st.reject(L.failures[0]):L.lastResult}).then(function(L){if(_)try{F(c,_,L)}catch{}return L})},lt.prototype.update=function(c,f){return typeof c!="object"||m(c)?this.where(":id").equals(c).modify(f):(c=J(c,this.schema.primKey.keyPath),c===void 0?bt(new Ze.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(f))},lt.prototype.put=function(c,f){var b=this,x=this.schema.primKey,A=x.auto,_=x.keyPath,M=c;return _&&A&&(M=Yt(_)(c)),this._trans("readwrite",function(L){return b.core.mutate({trans:L,type:"put",values:[M],keys:f!=null?[f]:null})}).then(function(L){return L.numFailures?st.reject(L.failures[0]):L.lastResult}).then(function(L){if(_)try{F(c,_,L)}catch{}return L})},lt.prototype.delete=function(c){var f=this;return this._trans("readwrite",function(b){return f.core.mutate({trans:b,type:"delete",keys:[c]})}).then(function(b){return b.numFailures?st.reject(b.failures[0]):void 0})},lt.prototype.clear=function(){var c=this;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"deleteRange",range:Or})}).then(function(f){return f.numFailures?st.reject(f.failures[0]):void 0})},lt.prototype.bulkGet=function(c){var f=this;return this._trans("readonly",function(b){return f.core.getMany({keys:c,trans:b}).then(function(x){return x.map(function(A){return f.hook.reading.fire(A)})})})},lt.prototype.bulkAdd=function(c,f,b){var x=this,A=Array.isArray(f)?f:void 0,_=(b=b||(A?void 0:f))?b.allKeys:void 0;return this._trans("readwrite",function(M){var q=x.schema.primKey,L=q.auto,q=q.keyPath;if(q&&A)throw new Ze.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==c.length)throw new Ze.InvalidArgument("Arguments objects and keys must have the same length");var U=c.length,q=q&&L?c.map(Yt(q)):c;return x.core.mutate({trans:M,type:"add",keys:A,values:q,wantResults:_}).then(function(ae){var G=ae.numFailures,Z=ae.results,re=ae.lastResult,ae=ae.failures;if(G===0)return _?Z:re;throw new Fe("".concat(x.name,".bulkAdd(): ").concat(G," of ").concat(U," operations failed"),ae)})})},lt.prototype.bulkPut=function(c,f,b){var x=this,A=Array.isArray(f)?f:void 0,_=(b=b||(A?void 0:f))?b.allKeys:void 0;return this._trans("readwrite",function(M){var q=x.schema.primKey,L=q.auto,q=q.keyPath;if(q&&A)throw new Ze.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==c.length)throw new Ze.InvalidArgument("Arguments objects and keys must have the same length");var U=c.length,q=q&&L?c.map(Yt(q)):c;return x.core.mutate({trans:M,type:"put",keys:A,values:q,wantResults:_}).then(function(ae){var G=ae.numFailures,Z=ae.results,re=ae.lastResult,ae=ae.failures;if(G===0)return _?Z:re;throw new Fe("".concat(x.name,".bulkPut(): ").concat(G," of ").concat(U," operations failed"),ae)})})},lt.prototype.bulkUpdate=function(c){var f=this,b=this.core,x=c.map(function(M){return M.key}),A=c.map(function(M){return M.changes}),_=[];return this._trans("readwrite",function(M){return b.getMany({trans:M,keys:x,cache:"clone"}).then(function(L){var U=[],q=[];c.forEach(function(G,Z){var re=G.key,ae=G.changes,le=L[Z];if(le){for(var pe=0,xe=Object.keys(ae);pe<xe.length;pe++){var Oe=xe[pe],Me=ae[Oe];if(Oe===f.schema.primKey.keyPath){if(Je(Me,re)!==0)throw new Ze.Constraint("Cannot update primary key in bulkUpdate()")}else F(le,Oe,Me)}_.push(Z),U.push(re),q.push(le)}});var K=U.length;return b.mutate({trans:M,type:"put",keys:U,values:q,updates:{keys:x,changeSpecs:A}}).then(function(G){var Z=G.numFailures,re=G.failures;if(Z===0)return K;for(var ae=0,le=Object.keys(re);ae<le.length;ae++){var pe,xe=le[ae],Oe=_[Number(xe)];Oe!=null&&(pe=re[xe],delete re[xe],re[Oe]=pe)}throw new Fe("".concat(f.name,".bulkUpdate(): ").concat(Z," of ").concat(K," operations failed"),re)})})})},lt.prototype.bulkDelete=function(c){var f=this,b=c.length;return this._trans("readwrite",function(x){return f.core.mutate({trans:x,type:"delete",keys:c})}).then(function(M){var A=M.numFailures,_=M.lastResult,M=M.failures;if(A===0)return _;throw new Fe("".concat(f.name,".bulkDelete(): ").concat(A," of ").concat(b," operations failed"),M)})},lt);function lt(){}function hr(c){function f(M,L){if(L){for(var U=arguments.length,q=new Array(U-1);--U;)q[U-1]=arguments[U];return b[M].subscribe.apply(null,q),c}if(typeof M=="string")return b[M]}var b={};f.addEventType=_;for(var x=1,A=arguments.length;x<A;++x)_(arguments[x]);return f;function _(M,L,U){if(typeof M!="object"){var q;L=L||tn;var K={subscribers:[],fire:U=U||ht,subscribe:function(G){K.subscribers.indexOf(G)===-1&&(K.subscribers.push(G),K.fire=L(K.fire,G))},unsubscribe:function(G){K.subscribers=K.subscribers.filter(function(Z){return Z!==G}),K.fire=K.subscribers.reduce(L,U)}};return b[M]=f[M]=K}h(q=M).forEach(function(G){var Z=q[G];if(m(Z))_(G,q[G][0],q[G][1]);else{if(Z!=="asap")throw new Ze.InvalidArgument("Invalid event config");var re=_(G,mt,function(){for(var ae=arguments.length,le=new Array(ae);ae--;)le[ae]=arguments[ae];re.subscribers.forEach(function(pe){ee(function(){pe.apply(null,le)})})})}})}}function pi(c,f){return D(f).from({prototype:c}),f}function Sn(c,f){return!(c.filter||c.algorithm||c.or)&&(f?c.justLimit:!c.replayFilter)}function mi(c,f){c.filter=Un(c.filter,f)}function ps(c,f,b){var x=c.replayFilter;c.replayFilter=x?function(){return Un(x(),f())}:f,c.justLimit=b&&!x}function ji(c,f){if(c.isPrimKey)return f.primaryKey;var b=f.getIndexByKeyPath(c.index);if(!b)throw new Ze.Schema("KeyPath "+c.index+" on object store "+f.name+" is not indexed");return b}function rn(c,f,b){var x=ji(c,f.schema);return f.openCursor({trans:b,values:!c.keysOnly,reverse:c.dir==="prev",unique:!!c.unique,query:{index:x,range:c.range}})}function Zn(c,f,b,x){var A=c.replayFilter?Un(c.filter,c.replayFilter()):c.filter;if(c.or){var _={},M=function(L,U,q){var K,G;A&&!A(U,q,function(Z){return U.stop(Z)},function(Z){return U.fail(Z)})||((G=""+(K=U.primaryKey))=="[object ArrayBuffer]"&&(G=""+new Uint8Array(K)),S(_,G)||(_[G]=!0,f(L,U,q)))};return Promise.all([c.or._iterate(M,b),_e(rn(c,x,b),c.algorithm,M,!c.keysOnly&&c.valueMapper)])}return _e(rn(c,x,b),Un(c.algorithm,A),f,!c.keysOnly&&c.valueMapper)}function _e(c,f,b,x){var A=kn(x?function(_,M,L){return b(x(_),M,L)}:b);return c.then(function(_){if(_)return _.start(function(){var M=function(){return _.continue()};f&&!f(_,function(L){return M=L},function(L){_.stop(L),M=ht},function(L){_.fail(L),M=ht})||A(_.value,_,function(L){return M=L}),M()})})}var te=Symbol(),wt=(qn.prototype.execute=function(c){if(this.add!==void 0){var f=this.add;if(m(f))return i(i([],m(c)?c:[],!0),f).sort();if(typeof f=="number")return(Number(c)||0)+f;if(typeof f=="bigint")try{return BigInt(c)+f}catch{return BigInt(0)+f}throw new TypeError("Invalid term ".concat(f))}if(this.remove!==void 0){var b=this.remove;if(m(b))return m(c)?c.filter(function(x){return!b.includes(x)}).sort():[];if(typeof b=="number")return Number(c)-b;if(typeof b=="bigint")try{return BigInt(c)-b}catch{return BigInt(0)-b}throw new TypeError("Invalid subtrahend ".concat(b))}return f=(f=this.replacePrefix)===null||f===void 0?void 0:f[0],f&&typeof c=="string"&&c.startsWith(f)?this.replacePrefix[1]+c.substring(f.length):c},qn);function qn(c){Object.assign(this,c)}var Jn=(qt.prototype._read=function(c,f){var b=this._ctx;return b.error?b.table._trans(null,bt.bind(null,b.error)):b.table._trans("readonly",c).then(f)},qt.prototype._write=function(c){var f=this._ctx;return f.error?f.table._trans(null,bt.bind(null,f.error)):f.table._trans("readwrite",c,"locked")},qt.prototype._addAlgorithm=function(c){var f=this._ctx;f.algorithm=Un(f.algorithm,c)},qt.prototype._iterate=function(c,f){return Zn(this._ctx,c,f,this._ctx.table.core)},qt.prototype.clone=function(c){var f=Object.create(this.constructor.prototype),b=Object.create(this._ctx);return c&&y(b,c),f._ctx=b,f},qt.prototype.raw=function(){return this._ctx.valueMapper=null,this},qt.prototype.each=function(c){var f=this._ctx;return this._read(function(b){return Zn(f,c,b,f.table.core)})},qt.prototype.count=function(c){var f=this;return this._read(function(b){var x=f._ctx,A=x.table.core;if(Sn(x,!0))return A.count({trans:b,query:{index:ji(x,A.schema),range:x.range}}).then(function(M){return Math.min(M,x.limit)});var _=0;return Zn(x,function(){return++_,!1},b,A).then(function(){return _})}).then(c)},qt.prototype.sortBy=function(c,f){var b=c.split(".").reverse(),x=b[0],A=b.length-1;function _(U,q){return q?_(U[b[q]],q-1):U[x]}var M=this._ctx.dir==="next"?1:-1;function L(U,q){return Je(_(U,A),_(q,A))*M}return this.toArray(function(U){return U.sort(L)}).then(f)},qt.prototype.toArray=function(c){var f=this;return this._read(function(b){var x=f._ctx;if(x.dir==="next"&&Sn(x,!0)&&0<x.limit){var A=x.valueMapper,_=ji(x,x.table.core.schema);return x.table.core.query({trans:b,limit:x.limit,values:!0,query:{index:_,range:x.range}}).then(function(L){return L=L.result,A?L.map(A):L})}var M=[];return Zn(x,function(L){return M.push(L)},b,x.table.core).then(function(){return M})},c)},qt.prototype.offset=function(c){var f=this._ctx;return c<=0||(f.offset+=c,Sn(f)?ps(f,function(){var b=c;return function(x,A){return b===0||(b===1?--b:A(function(){x.advance(b),b=0}),!1)}}):ps(f,function(){var b=c;return function(){return--b<0}})),this},qt.prototype.limit=function(c){return this._ctx.limit=Math.min(this._ctx.limit,c),ps(this._ctx,function(){var f=c;return function(b,x,A){return--f<=0&&x(A),0<=f}},!0),this},qt.prototype.until=function(c,f){return mi(this._ctx,function(b,x,A){return!c(b.value)||(x(A),f)}),this},qt.prototype.first=function(c){return this.limit(1).toArray(function(f){return f[0]}).then(c)},qt.prototype.last=function(c){return this.reverse().first(c)},qt.prototype.filter=function(c){var f;return mi(this._ctx,function(b){return c(b.value)}),(f=this._ctx).isMatch=Un(f.isMatch,c),this},qt.prototype.and=function(c){return this.filter(c)},qt.prototype.or=function(c){return new this.db.WhereClause(this._ctx.table,c,this)},qt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qt.prototype.desc=function(){return this.reverse()},qt.prototype.eachKey=function(c){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(b,x){c(x.key,x)})},qt.prototype.eachUniqueKey=function(c){return this._ctx.unique="unique",this.eachKey(c)},qt.prototype.eachPrimaryKey=function(c){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(b,x){c(x.primaryKey,x)})},qt.prototype.keys=function(c){var f=this._ctx;f.keysOnly=!f.isMatch;var b=[];return this.each(function(x,A){b.push(A.key)}).then(function(){return b}).then(c)},qt.prototype.primaryKeys=function(c){var f=this._ctx;if(f.dir==="next"&&Sn(f,!0)&&0<f.limit)return this._read(function(x){var A=ji(f,f.table.core.schema);return f.table.core.query({trans:x,values:!1,limit:f.limit,query:{index:A,range:f.range}})}).then(function(x){return x.result}).then(c);f.keysOnly=!f.isMatch;var b=[];return this.each(function(x,A){b.push(A.primaryKey)}).then(function(){return b}).then(c)},qt.prototype.uniqueKeys=function(c){return this._ctx.unique="unique",this.keys(c)},qt.prototype.firstKey=function(c){return this.limit(1).keys(function(f){return f[0]}).then(c)},qt.prototype.lastKey=function(c){return this.reverse().firstKey(c)},qt.prototype.distinct=function(){var c=this._ctx,c=c.index&&c.table.schema.idxByName[c.index];if(!c||!c.multi)return this;var f={};return mi(this._ctx,function(A){var x=A.primaryKey.toString(),A=S(f,x);return f[x]=!0,!A}),this},qt.prototype.modify=function(c){var f=this,b=this._ctx;return this._write(function(x){var A,_,M;M=typeof c=="function"?c:(A=h(c),_=A.length,function(pe){for(var xe=!1,Oe=0;Oe<_;++Oe){var Me=A[Oe],Pe=c[Me],Ge=J(pe,Me);Pe instanceof wt?(F(pe,Me,Pe.execute(Ge)),xe=!0):Ge!==Pe&&(F(pe,Me,Pe),xe=!0)}return xe});var L=b.table.core,G=L.schema.primaryKey,U=G.outbound,q=G.extractKey,K=200,G=f.db._options.modifyChunkSize;G&&(K=typeof G=="object"?G[L.name]||G["*"]||200:G);function Z(pe,Me){var Oe=Me.failures,Me=Me.numFailures;ae+=pe-Me;for(var Pe=0,Ge=h(Oe);Pe<Ge.length;Pe++){var tt=Ge[Pe];re.push(Oe[tt])}}var re=[],ae=0,le=[];return f.clone().primaryKeys().then(function(pe){function xe(Me){var Pe=Math.min(K,pe.length-Me);return L.getMany({trans:x,keys:pe.slice(Me,Me+Pe),cache:"immutable"}).then(function(Ge){for(var tt=[],et=[],it=U?[]:null,ct=[],ut=0;ut<Pe;++ut){var xt=Ge[ut],Ut={value:he(xt),primKey:pe[Me+ut]};M.call(Ut,Ut.value,Ut)!==!1&&(Ut.value==null?ct.push(pe[Me+ut]):U||Je(q(xt),q(Ut.value))===0?(et.push(Ut.value),U&&it.push(pe[Me+ut])):(ct.push(pe[Me+ut]),tt.push(Ut.value)))}return Promise.resolve(0<tt.length&&L.mutate({trans:x,type:"add",values:tt}).then(function(fn){for(var Vt in fn.failures)ct.splice(parseInt(Vt),1);Z(tt.length,fn)})).then(function(){return(0<et.length||Oe&&typeof c=="object")&&L.mutate({trans:x,type:"put",keys:it,values:et,criteria:Oe,changeSpec:typeof c!="function"&&c,isAdditionalChunk:0<Me}).then(function(fn){return Z(et.length,fn)})}).then(function(){return(0<ct.length||Oe&&c===Ni)&&L.mutate({trans:x,type:"delete",keys:ct,criteria:Oe,isAdditionalChunk:0<Me}).then(function(fn){return Z(ct.length,fn)})}).then(function(){return pe.length>Me+Pe&&xe(Me+K)})})}var Oe=Sn(b)&&b.limit===1/0&&(typeof c!="function"||c===Ni)&&{index:b.index,range:b.range};return xe(0).then(function(){if(0<re.length)throw new He("Error modifying one or more objects",re,ae,le);return pe.length})})})},qt.prototype.delete=function(){var c=this._ctx,f=c.range;return Sn(c)&&(c.isPrimKey||f.type===3)?this._write(function(b){var x=c.table.core.schema.primaryKey,A=f;return c.table.core.count({trans:b,query:{index:x,range:A}}).then(function(_){return c.table.core.mutate({trans:b,type:"deleteRange",range:A}).then(function(M){var L=M.failures;if(M.lastResult,M.results,M=M.numFailures,M)throw new He("Could not delete some values",Object.keys(L).map(function(U){return L[U]}),_-M);return _-M})})}):this.modify(Ni)},qt);function qt(){}var Ni=function(c,f){return f.value=null};function oi(c,f){return c<f?-1:c===f?0:1}function At(c,f){return f<c?-1:c===f?0:1}function on(c,f,b){return c=c instanceof Cr?new c.Collection(c):c,c._ctx.error=new(b||TypeError)(f),c}function ts(c){return new c.Collection(c,function(){return Zr("")}).limit(0)}function Ws(c,f,b,x){var A,_,M,L,U,q,K,G=b.length;if(!b.every(function(ae){return typeof ae=="string"}))return on(c,Xn);function Z(ae){A=ae==="next"?function(pe){return pe.toUpperCase()}:function(pe){return pe.toLowerCase()},_=ae==="next"?function(pe){return pe.toLowerCase()}:function(pe){return pe.toUpperCase()},M=ae==="next"?oi:At;var le=b.map(function(pe){return{lower:_(pe),upper:A(pe)}}).sort(function(pe,xe){return M(pe.lower,xe.lower)});L=le.map(function(pe){return pe.upper}),U=le.map(function(pe){return pe.lower}),K=(q=ae)==="next"?"":x}Z("next"),c=new c.Collection(c,function(){return li(L[0],U[G-1]+x)}),c._ondirectionchange=function(ae){Z(ae)};var re=0;return c._addAlgorithm(function(ae,le,pe){var xe=ae.key;if(typeof xe!="string")return!1;var Oe=_(xe);if(f(Oe,U,re))return!0;for(var Me=null,Pe=re;Pe<G;++Pe){var Ge=(function(tt,et,it,ct,ut,xt){for(var Ut=Math.min(tt.length,ct.length),fn=-1,Vt=0;Vt<Ut;++Vt){var bi=et[Vt];if(bi!==ct[Vt])return ut(tt[Vt],it[Vt])<0?tt.substr(0,Vt)+it[Vt]+it.substr(Vt+1):ut(tt[Vt],ct[Vt])<0?tt.substr(0,Vt)+ct[Vt]+it.substr(Vt+1):0<=fn?tt.substr(0,fn)+et[fn]+it.substr(fn+1):null;ut(tt[Vt],bi)<0&&(fn=Vt)}return Ut<ct.length&&xt==="next"?tt+it.substr(tt.length):Ut<tt.length&&xt==="prev"?tt.substr(0,it.length):fn<0?null:tt.substr(0,fn)+ct[fn]+it.substr(fn+1)})(xe,Oe,L[Pe],U[Pe],M,q);Ge===null&&Me===null?re=Pe+1:(Me===null||0<M(Me,Ge))&&(Me=Ge)}return le(Me!==null?function(){ae.continue(Me+K)}:pe),!1}),c}function li(c,f,b,x){return{type:2,lower:c,upper:f,lowerOpen:b,upperOpen:x}}function Zr(c){return{type:1,lower:c,upper:c}}var Cr=(Object.defineProperty(er.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),er.prototype.between=function(c,f,b,x){b=b!==!1,x=x===!0;try{return 0<this._cmp(c,f)||this._cmp(c,f)===0&&(b||x)&&(!b||!x)?ts(this):new this.Collection(this,function(){return li(c,f,!b,!x)})}catch{return on(this,jn)}},er.prototype.equals=function(c){return c==null?on(this,jn):new this.Collection(this,function(){return Zr(c)})},er.prototype.above=function(c){return c==null?on(this,jn):new this.Collection(this,function(){return li(c,void 0,!0)})},er.prototype.aboveOrEqual=function(c){return c==null?on(this,jn):new this.Collection(this,function(){return li(c,void 0,!1)})},er.prototype.below=function(c){return c==null?on(this,jn):new this.Collection(this,function(){return li(void 0,c,!1,!0)})},er.prototype.belowOrEqual=function(c){return c==null?on(this,jn):new this.Collection(this,function(){return li(void 0,c)})},er.prototype.startsWith=function(c){return typeof c!="string"?on(this,Xn):this.between(c,c+Et,!0,!0)},er.prototype.startsWithIgnoreCase=function(c){return c===""?this.startsWith(c):Ws(this,function(f,b){return f.indexOf(b[0])===0},[c],Et)},er.prototype.equalsIgnoreCase=function(c){return Ws(this,function(f,b){return f===b[0]},[c],"")},er.prototype.anyOfIgnoreCase=function(){var c=be.apply(Ee,arguments);return c.length===0?ts(this):Ws(this,function(f,b){return b.indexOf(f)!==-1},c,"")},er.prototype.startsWithAnyOfIgnoreCase=function(){var c=be.apply(Ee,arguments);return c.length===0?ts(this):Ws(this,function(f,b){return b.some(function(x){return f.indexOf(x)===0})},c,Et)},er.prototype.anyOf=function(){var c=this,f=be.apply(Ee,arguments),b=this._cmp;try{f.sort(b)}catch{return on(this,jn)}if(f.length===0)return ts(this);var x=new this.Collection(this,function(){return li(f[0],f[f.length-1])});x._ondirectionchange=function(_){b=_==="next"?c._ascending:c._descending,f.sort(b)};var A=0;return x._addAlgorithm(function(_,M,L){for(var U=_.key;0<b(U,f[A]);)if(++A===f.length)return M(L),!1;return b(U,f[A])===0||(M(function(){_.continue(f[A])}),!1)}),x},er.prototype.notEqual=function(c){return this.inAnyRange([[-1/0,c],[c,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},er.prototype.noneOf=function(){var c=be.apply(Ee,arguments);if(c.length===0)return new this.Collection(this);try{c.sort(this._ascending)}catch{return on(this,jn)}var f=c.reduce(function(b,x){return b?b.concat([[b[b.length-1][1],x]]):[[-1/0,x]]},null);return f.push([c[c.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},er.prototype.inAnyRange=function(xe,f){var b=this,x=this._cmp,A=this._ascending,_=this._descending,M=this._min,L=this._max;if(xe.length===0)return ts(this);if(!xe.every(function(Oe){return Oe[0]!==void 0&&Oe[1]!==void 0&&A(Oe[0],Oe[1])<=0}))return on(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ze.InvalidArgument);var U=!f||f.includeLowers!==!1,q=f&&f.includeUppers===!0,K,G=A;function Z(Oe,Me){return G(Oe[0],Me[0])}try{(K=xe.reduce(function(Oe,Me){for(var Pe=0,Ge=Oe.length;Pe<Ge;++Pe){var tt=Oe[Pe];if(x(Me[0],tt[1])<0&&0<x(Me[1],tt[0])){tt[0]=M(tt[0],Me[0]),tt[1]=L(tt[1],Me[1]);break}}return Pe===Ge&&Oe.push(Me),Oe},[])).sort(Z)}catch{return on(this,jn)}var re=0,ae=q?function(Oe){return 0<A(Oe,K[re][1])}:function(Oe){return 0<=A(Oe,K[re][1])},le=U?function(Oe){return 0<_(Oe,K[re][0])}:function(Oe){return 0<=_(Oe,K[re][0])},pe=ae,xe=new this.Collection(this,function(){return li(K[0][0],K[K.length-1][1],!U,!q)});return xe._ondirectionchange=function(Oe){G=Oe==="next"?(pe=ae,A):(pe=le,_),K.sort(Z)},xe._addAlgorithm(function(Oe,Me,Pe){for(var Ge,tt=Oe.key;pe(tt);)if(++re===K.length)return Me(Pe),!1;return!ae(Ge=tt)&&!le(Ge)||(b._cmp(tt,K[re][1])===0||b._cmp(tt,K[re][0])===0||Me(function(){G===A?Oe.continue(K[re][0]):Oe.continue(K[re][1])}),!1)}),xe},er.prototype.startsWithAnyOf=function(){var c=be.apply(Ee,arguments);return c.every(function(f){return typeof f=="string"})?c.length===0?ts(this):this.inAnyRange(c.map(function(f){return[f,f+Et]})):on(this,"startsWithAnyOf() only works with strings")},er);function er(){}function yn(c){return kn(function(f){return Ir(f),c(f.target.error),!1})}function Ir(c){c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault()}var qr="storagemutated",_t="x-storagemutated-1",Bi=hr(null,qr),zt=(cn.prototype._lock=function(){return se(!rt.global),++this._reculock,this._reculock!==1||rt.global||(rt.lockOwnerFor=this),this},cn.prototype._unlock=function(){if(se(!rt.global),--this._reculock==0)for(rt.global||(rt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var c=this._blockedFuncs.shift();try{$t(c[1],c[0])}catch{}}return this},cn.prototype._locked=function(){return this._reculock&&rt.lockOwnerFor!==this},cn.prototype.create=function(c){var f=this;if(!this.mode)return this;var b=this.db.idbdb,x=this.db._state.dbOpenError;if(se(!this.idbtrans),!c&&!b)switch(x&&x.name){case"DatabaseClosedError":throw new Ze.DatabaseClosed(x);case"MissingAPIError":throw new Ze.MissingAPI(x.message,x);default:throw new Ze.OpenFailed(x)}if(!this.active)throw new Ze.TransactionInactive;return se(this._completion._state===null),(c=this.idbtrans=c||(this.db.core||b).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=kn(function(A){Ir(A),f._reject(c.error)}),c.onabort=kn(function(A){Ir(A),f.active&&f._reject(new Ze.Abort(c.error)),f.active=!1,f.on("abort").fire(A)}),c.oncomplete=kn(function(){f.active=!1,f._resolve(),"mutatedParts"in c&&Bi.storagemutated.fire(c.mutatedParts)}),this},cn.prototype._promise=function(c,f,b){var x=this;if(c==="readwrite"&&this.mode!=="readwrite")return bt(new Ze.ReadOnly("Transaction is readonly"));if(!this.active)return bt(new Ze.TransactionInactive);if(this._locked())return new st(function(_,M){x._blockedFuncs.push([function(){x._promise(c,f,b).then(_,M)},rt])});if(b)return at(function(){var _=new st(function(M,L){x._lock();var U=f(M,L,x);U&&U.then&&U.then(M,L)});return _.finally(function(){return x._unlock()}),_._lib=!0,_});var A=new st(function(_,M){var L=f(_,M,x);L&&L.then&&L.then(_,M)});return A._lib=!0,A},cn.prototype._root=function(){return this.parent?this.parent._root():this},cn.prototype.waitFor=function(c){var f,b=this._root(),x=st.resolve(c);b._waitingFor?b._waitingFor=b._waitingFor.then(function(){return x}):(b._waitingFor=x,b._waitingQueue=[],f=b.idbtrans.objectStore(b.storeNames[0]),(function _(){for(++b._spinCount;b._waitingQueue.length;)b._waitingQueue.shift()();b._waitingFor&&(f.get(-1/0).onsuccess=_)})());var A=b._waitingFor;return new st(function(_,M){x.then(function(L){return b._waitingQueue.push(kn(_.bind(null,L)))},function(L){return b._waitingQueue.push(kn(M.bind(null,L)))}).finally(function(){b._waitingFor===A&&(b._waitingFor=null)})})},cn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ze.Abort))},cn.prototype.table=function(c){var f=this._memoizedTables||(this._memoizedTables={});if(S(f,c))return f[c];var b=this.schema[c];if(!b)throw new Ze.NotFound("Table "+c+" not part of transaction");return b=new this.db.Table(c,b,this),b.core=this.db.core.table(c),f[c]=b},cn);function cn(){}function ms(c,f,b,x,A,_,M){return{name:c,keyPath:f,unique:b,multi:x,auto:A,compound:_,src:(b&&!M?"&":"")+(x?"*":"")+(A?"++":"")+Vr(f)}}function Vr(c){return typeof c=="string"?c:c?"["+[].join.call(c,"+")+"]":""}function gi(c,f,b){return{name:c,primKey:f,indexes:b,mappedClass:null,idxByName:(x=function(A){return[A.name,A]},b.reduce(function(A,_,M){return M=x(_,M),M&&(A[M[0]]=M[1]),A},{}))};var x}var Gr=function(c){try{return c.only([[]]),Gr=function(){return[[]]},[[]]}catch{return Gr=function(){return Et},Et}};function gs(c){return c==null?function(){}:typeof c=="string"?(f=c).split(".").length===1?function(b){return b[f]}:function(b){return J(b,f)}:function(b){return J(b,c)};var f}function ns(c){return[].slice.call(c)}var k=0;function X(c){return c==null?":id":typeof c=="string"?c:"[".concat(c.join("+"),"]")}function ge(c,f,U){function x(pe){if(pe.type===3)return null;if(pe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var re=pe.lower,ae=pe.upper,le=pe.lowerOpen,pe=pe.upperOpen;return re===void 0?ae===void 0?null:f.upperBound(ae,!!pe):ae===void 0?f.lowerBound(re,!!le):f.bound(re,ae,!!le,!!pe)}function A(Z){var re,ae=Z.name;return{name:ae,schema:Z,mutate:function(le){var pe=le.trans,xe=le.type,Oe=le.keys,Me=le.values,Pe=le.range;return new Promise(function(Ge,tt){Ge=kn(Ge);var et=pe.objectStore(ae),it=et.keyPath==null,ct=xe==="put"||xe==="add";if(!ct&&xe!=="delete"&&xe!=="deleteRange")throw new Error("Invalid operation type: "+xe);var ut,xt=(Oe||Me||{length:1}).length;if(Oe&&Me&&Oe.length!==Me.length)throw new Error("Given keys array must have same length as given values array.");if(xt===0)return Ge({numFailures:0,failures:{},results:[],lastResult:void 0});function Ut(Kr){++bi,Ir(Kr)}var fn=[],Vt=[],bi=0;if(xe==="deleteRange"){if(Pe.type===4)return Ge({numFailures:bi,failures:Vt,results:[],lastResult:void 0});Pe.type===3?fn.push(ut=et.clear()):fn.push(ut=et.delete(x(Pe)))}else{var it=ct?it?[Me,Oe]:[Me,null]:[Oe,null],Jt=it[0],ci=it[1];if(ct)for(var ui=0;ui<xt;++ui)fn.push(ut=ci&&ci[ui]!==void 0?et[xe](Jt[ui],ci[ui]):et[xe](Jt[ui])),ut.onerror=Ut;else for(ui=0;ui<xt;++ui)fn.push(ut=et[xe](Jt[ui])),ut.onerror=Ut}function al(Kr){Kr=Kr.target.result,fn.forEach(function(Ka,ol){return Ka.error!=null&&(Vt[ol]=Ka.error)}),Ge({numFailures:bi,failures:Vt,results:xe==="delete"?Oe:fn.map(function(Ka){return Ka.result}),lastResult:Kr})}ut.onerror=function(Kr){Ut(Kr),al(Kr)},ut.onsuccess=al})},getMany:function(le){var pe=le.trans,xe=le.keys;return new Promise(function(Oe,Me){Oe=kn(Oe);for(var Pe,Ge=pe.objectStore(ae),tt=xe.length,et=new Array(tt),it=0,ct=0,ut=function(fn){fn=fn.target,et[fn._pos]=fn.result,++ct===it&&Oe(et)},xt=yn(Me),Ut=0;Ut<tt;++Ut)xe[Ut]!=null&&((Pe=Ge.get(xe[Ut]))._pos=Ut,Pe.onsuccess=ut,Pe.onerror=xt,++it);it===0&&Oe(et)})},get:function(le){var pe=le.trans,xe=le.key;return new Promise(function(Oe,Me){Oe=kn(Oe);var Pe=pe.objectStore(ae).get(xe);Pe.onsuccess=function(Ge){return Oe(Ge.target.result)},Pe.onerror=yn(Me)})},query:(re=q,function(le){return new Promise(function(pe,xe){pe=kn(pe);var Oe,Me,Pe,it=le.trans,Ge=le.values,tt=le.limit,ut=le.query,et=tt===1/0?void 0:tt,ct=ut.index,ut=ut.range,it=it.objectStore(ae),ct=ct.isPrimaryKey?it:it.index(ct.name),ut=x(ut);if(tt===0)return pe({result:[]});re?((et=Ge?ct.getAll(ut,et):ct.getAllKeys(ut,et)).onsuccess=function(xt){return pe({result:xt.target.result})},et.onerror=yn(xe)):(Oe=0,Me=!Ge&&"openKeyCursor"in ct?ct.openKeyCursor(ut):ct.openCursor(ut),Pe=[],Me.onsuccess=function(xt){var Ut=Me.result;return Ut?(Pe.push(Ge?Ut.value:Ut.primaryKey),++Oe===tt?pe({result:Pe}):void Ut.continue()):pe({result:Pe})},Me.onerror=yn(xe))})}),openCursor:function(le){var pe=le.trans,xe=le.values,Oe=le.query,Me=le.reverse,Pe=le.unique;return new Promise(function(Ge,tt){Ge=kn(Ge);var ct=Oe.index,et=Oe.range,it=pe.objectStore(ae),it=ct.isPrimaryKey?it:it.index(ct.name),ct=Me?Pe?"prevunique":"prev":Pe?"nextunique":"next",ut=!xe&&"openKeyCursor"in it?it.openKeyCursor(x(et),ct):it.openCursor(x(et),ct);ut.onerror=yn(tt),ut.onsuccess=kn(function(xt){var Ut,fn,Vt,bi,Jt=ut.result;Jt?(Jt.___id=++k,Jt.done=!1,Ut=Jt.continue.bind(Jt),fn=(fn=Jt.continuePrimaryKey)&&fn.bind(Jt),Vt=Jt.advance.bind(Jt),bi=function(){throw new Error("Cursor not stopped")},Jt.trans=pe,Jt.stop=Jt.continue=Jt.continuePrimaryKey=Jt.advance=function(){throw new Error("Cursor not started")},Jt.fail=kn(tt),Jt.next=function(){var ci=this,ui=1;return this.start(function(){return ui--?ci.continue():ci.stop()}).then(function(){return ci})},Jt.start=function(ci){function ui(){if(ut.result)try{ci()}catch(Kr){Jt.fail(Kr)}else Jt.done=!0,Jt.start=function(){throw new Error("Cursor behind last entry")},Jt.stop()}var al=new Promise(function(Kr,Ka){Kr=kn(Kr),ut.onerror=yn(Ka),Jt.fail=Ka,Jt.stop=function(ol){Jt.stop=Jt.continue=Jt.continuePrimaryKey=Jt.advance=bi,Kr(ol)}});return ut.onsuccess=kn(function(Kr){ut.onsuccess=ui,ui()}),Jt.continue=Ut,Jt.continuePrimaryKey=fn,Jt.advance=Vt,ui(),al},Ge(Jt)):Ge(null)},tt)})},count:function(le){var pe=le.query,xe=le.trans,Oe=pe.index,Me=pe.range;return new Promise(function(Pe,Ge){var tt=xe.objectStore(ae),et=Oe.isPrimaryKey?tt:tt.index(Oe.name),tt=x(Me),et=tt?et.count(tt):et.count();et.onsuccess=kn(function(it){return Pe(it.target.result)}),et.onerror=yn(Ge)})}}}var _,M,L,K=(M=U,L=ns((_=c).objectStoreNames),{schema:{name:_.name,tables:L.map(function(Z){return M.objectStore(Z)}).map(function(Z){var re=Z.keyPath,pe=Z.autoIncrement,ae=m(re),le={},pe={name:Z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:re==null,compound:ae,keyPath:re,autoIncrement:pe,unique:!0,extractKey:gs(re)},indexes:ns(Z.indexNames).map(function(xe){return Z.index(xe)}).map(function(Pe){var Oe=Pe.name,Me=Pe.unique,Ge=Pe.multiEntry,Pe=Pe.keyPath,Ge={name:Oe,compound:m(Pe),keyPath:Pe,unique:Me,multiEntry:Ge,extractKey:gs(Pe)};return le[X(Pe)]=Ge}),getIndexByKeyPath:function(xe){return le[X(xe)]}};return le[":id"]=pe.primaryKey,re!=null&&(le[X(re)]=pe.primaryKey),pe})},hasGetAll:0<L.length&&"getAll"in M.objectStore(L[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),U=K.schema,q=K.hasGetAll,K=U.tables.map(A),G={};return K.forEach(function(Z){return G[Z.name]=Z}),{stack:"dbcore",transaction:c.transaction.bind(c),table:function(Z){if(!G[Z])throw new Error("Table '".concat(Z,"' not found"));return G[Z]},MIN_KEY:-1/0,MAX_KEY:Gr(f),schema:U}}function je(c,f,b,x){var A=b.IDBKeyRange;return b.indexedDB,{dbcore:(x=ge(f,A,x),c.dbcore.reduce(function(_,M){return M=M.create,r(r({},_),M(_))},x))}}function It(c,x){var b=x.db,x=je(c._middlewares,b,c._deps,x);c.core=x.dbcore,c.tables.forEach(function(A){var _=A.name;c.core.schema.tables.some(function(M){return M.name===_})&&(A.core=c.core.table(_),c[_]instanceof c.Table&&(c[_].core=A.core))})}function pt(c,f,b,x){b.forEach(function(A){var _=x[A];f.forEach(function(M){var L=(function U(q,K){return j(q,K)||(q=g(q))&&U(q,K)})(M,A);(!L||"value"in L&&L.value===void 0)&&(M===c.Transaction.prototype||M instanceof c.Transaction?R(M,A,{get:function(){return this.table(A)},set:function(U){I(this,A,{value:U,writable:!0,configurable:!0,enumerable:!0})}}):M[A]=new c.Table(A,_))})})}function ln(c,f){f.forEach(function(b){for(var x in b)b[x]instanceof c.Table&&delete b[x]})}function wn(c,f){return c._cfg.version-f._cfg.version}function tr(c,f,b,x){var A=c._dbSchema;b.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=gi("$meta",Ii("")[0],[]),c._storeNames.push("$meta"));var _=c._createTransaction("readwrite",c._storeNames,A);_.create(b),_._completion.catch(x);var M=_._reject.bind(_),L=rt.transless||rt;at(function(){return rt.trans=_,rt.transless=L,f!==0?(It(c,b),q=f,((U=_).storeNames.includes("$meta")?U.table("$meta").get("version").then(function(K){return K??q}):st.resolve(q)).then(function(K){return Z=K,re=_,ae=b,le=[],K=(G=c)._versions,pe=G._dbSchema=nr(0,G.idbdb,ae),(K=K.filter(function(xe){return xe._cfg.version>=Z})).length!==0?(K.forEach(function(xe){le.push(function(){var Oe=pe,Me=xe._cfg.dbschema;Br(G,Oe,ae),Br(G,Me,ae),pe=G._dbSchema=Me;var Pe=fr(Oe,Me);Pe.add.forEach(function(ct){Rr(ae,ct[0],ct[1].primKey,ct[1].indexes)}),Pe.change.forEach(function(ct){if(ct.recreate)throw new Ze.Upgrade("Not yet support for changing primary key");var ut=ae.objectStore(ct.name);ct.add.forEach(function(xt){return Tr(ut,xt)}),ct.change.forEach(function(xt){ut.deleteIndex(xt.name),Tr(ut,xt)}),ct.del.forEach(function(xt){return ut.deleteIndex(xt)})});var Ge=xe._cfg.contentUpgrade;if(Ge&&xe._cfg.version>Z){It(G,ae),re._memoizedTables={};var tt=ce(Me);Pe.del.forEach(function(ct){tt[ct]=Oe[ct]}),ln(G,[G.Transaction.prototype]),pt(G,[G.Transaction.prototype],h(tt),tt),re.schema=tt;var et,it=ne(Ge);return it&&ot(),Pe=st.follow(function(){var ct;(et=Ge(re))&&it&&(ct=nt.bind(null,null),et.then(ct,ct))}),et&&typeof et.then=="function"?st.resolve(et):Pe.then(function(){return et})}}),le.push(function(Oe){var Me,Pe,Ge=xe._cfg.dbschema;Me=Ge,Pe=Oe,[].slice.call(Pe.db.objectStoreNames).forEach(function(tt){return Me[tt]==null&&Pe.db.deleteObjectStore(tt)}),ln(G,[G.Transaction.prototype]),pt(G,[G.Transaction.prototype],G._storeNames,G._dbSchema),re.schema=G._dbSchema}),le.push(function(Oe){G.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(G.idbdb.version/10)===xe._cfg.version?(G.idbdb.deleteObjectStore("$meta"),delete G._dbSchema.$meta,G._storeNames=G._storeNames.filter(function(Me){return Me!=="$meta"})):Oe.objectStore("$meta").put(xe._cfg.version,"version"))})}),(function xe(){return le.length?st.resolve(le.shift()(re.idbtrans)).then(xe):st.resolve()})().then(function(){Pt(pe,ae)})):st.resolve();var G,Z,re,ae,le,pe}).catch(M)):(h(A).forEach(function(K){Rr(b,K,A[K].primKey,A[K].indexes)}),It(c,b),void st.follow(function(){return c.on.populate.fire(_)}).catch(M));var U,q})}function Cn(c,f){Pt(c._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var b=nr(0,c.idbdb,f);Br(c,c._dbSchema,f);for(var x=0,A=fr(b,c._dbSchema).change;x<A.length;x++){var _=(function(M){if(M.change.length||M.recreate)return console.warn("Unable to patch indexes of table ".concat(M.name," because it has changes on the type of index or primary key.")),{value:void 0};var L=f.objectStore(M.name);M.add.forEach(function(U){ft&&console.debug("Dexie upgrade patch: Creating missing index ".concat(M.name,".").concat(U.src)),Tr(L,U)})})(A[x]);if(typeof _=="object")return _.value}}function fr(c,f){var b,x={del:[],add:[],change:[]};for(b in c)f[b]||x.del.push(b);for(b in f){var A=c[b],_=f[b];if(A){var M={name:b,def:_,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(_.primKey.keyPath||"")||A.primKey.auto!==_.primKey.auto)M.recreate=!0,x.change.push(M);else{var L=A.idxByName,U=_.idxByName,q=void 0;for(q in L)U[q]||M.del.push(q);for(q in U){var K=L[q],G=U[q];K?K.src!==G.src&&M.change.push(G):M.add.push(G)}(0<M.del.length||0<M.add.length||0<M.change.length)&&x.change.push(M)}}else x.add.push([b,_])}return x}function Rr(c,f,b,x){var A=c.db.createObjectStore(f,b.keyPath?{keyPath:b.keyPath,autoIncrement:b.auto}:{autoIncrement:b.auto});return x.forEach(function(_){return Tr(A,_)}),A}function Pt(c,f){h(c).forEach(function(b){f.db.objectStoreNames.contains(b)||(ft&&console.debug("Dexie: Creating missing table",b),Rr(f,b,c[b].primKey,c[b].indexes))})}function Tr(c,f){c.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function nr(c,f,b){var x={};return H(f.objectStoreNames,0).forEach(function(A){for(var _=b.objectStore(A),M=ms(Vr(q=_.keyPath),q||"",!0,!1,!!_.autoIncrement,q&&typeof q!="string",!0),L=[],U=0;U<_.indexNames.length;++U){var K=_.index(_.indexNames[U]),q=K.keyPath,K=ms(K.name,q,!!K.unique,!!K.multiEntry,!1,q&&typeof q!="string",!1);L.push(K)}x[A]=gi(A,M,L)}),x}function Br(c,f,b){for(var x=b.db.objectStoreNames,A=0;A<x.length;++A){var _=x[A],M=b.objectStore(_);c._hasGetAll="getAll"in M;for(var L=0;L<M.indexNames.length;++L){var U=M.indexNames[L],q=M.index(U).keyPath,K=typeof q=="string"?q:"["+H(q).join("+")+"]";!f[_]||(q=f[_].idxByName[K])&&(q.name=U,delete f[_].idxByName[K],f[_].idxByName[U]=q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(c._hasGetAll=!1)}function Ii(c){return c.split(",").map(function(f,b){var x=(f=f.trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return ms(x,A||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),m(A),b===0)})}var De=(Xt.prototype._parseStoresSpec=function(c,f){h(c).forEach(function(b){if(c[b]!==null){var x=Ii(c[b]),A=x.shift();if(A.unique=!0,A.multi)throw new Ze.Schema("Primary key cannot be multi-valued");x.forEach(function(_){if(_.auto)throw new Ze.Schema("Only primary key can be marked as autoIncrement (++)");if(!_.keyPath)throw new Ze.Schema("Index must have a name and cannot be an empty string")}),f[b]=gi(b,A,x)}})},Xt.prototype.stores=function(b){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,b):b;var b=f._versions,x={},A={};return b.forEach(function(_){y(x,_._cfg.storesSource),A=_._cfg.dbschema={},_._parseStoresSpec(x,A)}),f._dbSchema=A,ln(f,[f._allTables,f,f.Transaction.prototype]),pt(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],h(A),A),f._storeNames=h(A),this},Xt.prototype.upgrade=function(c){return this._cfg.contentUpgrade=ri(this._cfg.contentUpgrade||ht,c),this},Xt);function Xt(){}function dr(c,f){var b=c._dbNamesDB;return b||(b=c._dbNamesDB=new Ui(qe,{addons:[],indexedDB:c,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),b.table("dbnames")}function rs(c){return c&&typeof c.databases=="function"}function el(c){return at(function(){return rt.letThrough=!0,c()})}function tl(c){return!("from"in c)}var yi=function(c,f){if(!this){var b=new yi;return c&&"d"in c&&y(b,c),b}y(this,arguments.length?{d:1,from:c,to:1<arguments.length?f:c}:{d:0})};function go(c,f,b){var x=Je(f,b);if(!isNaN(x)){if(0<x)throw RangeError();if(tl(c))return y(c,{from:f,to:b,d:1});var A=c.l,x=c.r;if(Je(b,c.from)<0)return A?go(A,f,b):c.l={from:f,to:b,d:1,l:null,r:null},xr(c);if(0<Je(f,c.to))return x?go(x,f,b):c.r={from:f,to:b,d:1,l:null,r:null},xr(c);Je(f,c.from)<0&&(c.from=f,c.l=null,c.d=x?x.d+1:1),0<Je(b,c.to)&&(c.to=b,c.r=null,c.d=c.l?c.l.d+1:1),b=!c.r,A&&!c.l&&Sa(c,A),x&&b&&Sa(c,x)}}function Sa(c,f){tl(f)||(function b(x,U){var _=U.from,M=U.to,L=U.l,U=U.r;go(x,_,M),L&&b(x,L),U&&b(x,U)})(c,f)}function Pr(c,f){var b=Qs(f),x=b.next();if(x.done)return!1;for(var A=x.value,_=Qs(c),M=_.next(A.from),L=M.value;!x.done&&!M.done;){if(Je(L.from,A.to)<=0&&0<=Je(L.to,A.from))return!0;Je(A.from,L.from)<0?A=(x=b.next(L.from)).value:L=(M=_.next(A.from)).value}return!1}function Qs(c){var f=tl(c)?null:{s:0,n:c};return{next:function(b){for(var x=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,x)for(;f.n.l&&Je(b,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!x||Je(b,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function xr(c){var f,b,x=(((f=c.r)===null||f===void 0?void 0:f.d)||0)-(((b=c.l)===null||b===void 0?void 0:b.d)||0),A=1<x?"r":x<-1?"l":"";A&&(f=A=="r"?"l":"r",b=r({},c),x=c[A],c.from=x.from,c.to=x.to,c[A]=x[A],b[A]=x[f],(c[f]=b).d=yo(b)),c.d=yo(c)}function yo(b){var f=b.r,b=b.l;return(f?b?Math.max(f.d,b.d):f.d:b?b.d:0)+1}function ys(c,f){return h(f).forEach(function(b){c[b]?Sa(c[b],f[b]):c[b]=(function x(A){var _,M,L={};for(_ in A)S(A,_)&&(M=A[_],L[_]=!M||typeof M!="object"||Q.has(M.constructor)?M:x(M));return L})(f[b])}),c}function Fn(c,f){return c.all||f.all||Object.keys(c).some(function(b){return f[b]&&Pr(f[b],c[b])})}N(yi.prototype,((vi={add:function(c){return Sa(this,c),this},addKey:function(c){return go(this,c,c),this},addKeys:function(c){var f=this;return c.forEach(function(b){return go(f,b,b)}),this},hasKey:function(c){var f=Qs(this).next(c).value;return f&&Je(f.from,c)<=0&&0<=Je(f.to,c)}})[Y]=function(){return Qs(this)},vi));var Rt={},ic={},$n=!1;function vs(c){ys(ic,c),$n||($n=!0,setTimeout(function(){$n=!1,Zs(ic,!(ic={}))},0))}function Zs(c,f){f===void 0&&(f=!1);var b=new Set;if(c.all)for(var x=0,A=Object.values(Rt);x<A.length;x++)eu(M=A[x],c,b,f);else for(var _ in c){var M,L=/^idb\:\/\/(.*)\/(.*)\//.exec(_);L&&(_=L[1],L=L[2],(M=Rt["idb://".concat(_,"/").concat(L)])&&eu(M,c,b,f))}b.forEach(function(U){return U()})}function eu(c,f,b,x){for(var A=[],_=0,M=Object.entries(c.queries.query);_<M.length;_++){for(var L=M[_],U=L[0],q=[],K=0,G=L[1];K<G.length;K++){var Z=G[K];Fn(f,Z.obsSet)?Z.subscribers.forEach(function(pe){return b.add(pe)}):x&&q.push(Z)}x&&A.push([U,q])}if(x)for(var re=0,ae=A;re<ae.length;re++){var le=ae[re],U=le[0],q=le[1];c.queries.query[U]=q}}function bs(c){var f=c._state,b=c._deps.indexedDB;if(f.isBeingOpened||c.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?bt(f.dbOpenError):c});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var x=f.openCanceller,A=Math.round(10*c.verno),_=!1;function M(){if(f.openCanceller!==x)throw new Ze.DatabaseClosed("db.open() was cancelled")}function L(){return new st(function(Z,re){if(M(),!b)throw new Ze.MissingAPI;var ae=c.name,le=f.autoSchema||!A?b.open(ae):b.open(ae,A);if(!le)throw new Ze.MissingAPI;le.onerror=yn(re),le.onblocked=kn(c._fireOnBlocked),le.onupgradeneeded=kn(function(pe){var xe;K=le.transaction,f.autoSchema&&!c._options.allowEmptyDB?(le.onerror=Ir,K.abort(),le.result.close(),(xe=b.deleteDatabase(ae)).onsuccess=xe.onerror=kn(function(){re(new Ze.NoSuchDatabase("Database ".concat(ae," doesnt exist")))})):(K.onerror=yn(re),pe=pe.oldVersion>Math.pow(2,62)?0:pe.oldVersion,G=pe<1,c.idbdb=le.result,_&&Cn(c,K),tr(c,pe/10,K,re))},re),le.onsuccess=kn(function(){K=null;var pe,xe,Oe,Me,Pe,Ge=c.idbdb=le.result,tt=H(Ge.objectStoreNames);if(0<tt.length)try{var et=Ge.transaction((Me=tt).length===1?Me[0]:Me,"readonly");if(f.autoSchema)xe=Ge,Oe=et,(pe=c).verno=xe.version/10,Oe=pe._dbSchema=nr(0,xe,Oe),pe._storeNames=H(xe.objectStoreNames,0),pt(pe,[pe._allTables],h(Oe),Oe);else if(Br(c,c._dbSchema,et),((Pe=fr(nr(0,(Pe=c).idbdb,et),Pe._dbSchema)).add.length||Pe.change.some(function(it){return it.add.length||it.change.length}))&&!_)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ge.close(),A=Ge.version+1,_=!0,Z(L());It(c,et)}catch{}En.push(c),Ge.onversionchange=kn(function(it){f.vcFired=!0,c.on("versionchange").fire(it)}),Ge.onclose=kn(function(it){c.on("close").fire(it)}),G&&(Pe=c._deps,et=ae,Ge=Pe.indexedDB,Pe=Pe.IDBKeyRange,rs(Ge)||et===qe||dr(Ge,Pe).put({name:et}).catch(ht)),Z()},re)}).catch(function(Z){switch(Z?.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),L();break;case"VersionError":if(0<A)return A=0,L()}return st.reject(Z)})}var U,q=f.dbReadyResolve,K=null,G=!1;return st.race([x,(typeof navigator>"u"?st.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Z){function re(){return indexedDB.databases().finally(Z)}U=setInterval(re,100),re()}).finally(function(){return clearInterval(U)}):Promise.resolve()).then(L)]).then(function(){return M(),f.onReadyBeingFired=[],st.resolve(el(function(){return c.on.ready.fire(c.vip)})).then(function Z(){if(0<f.onReadyBeingFired.length){var re=f.onReadyBeingFired.reduce(ri,ht);return f.onReadyBeingFired=[],st.resolve(el(function(){return re(c.vip)})).then(Z)}})}).finally(function(){f.openCanceller===x&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(Z){f.dbOpenError=Z;try{K&&K.abort()}catch{}return x===f.openCanceller&&c._close(),bt(Z)}).finally(function(){f.openComplete=!0,q()}).then(function(){var Z;return G&&(Z={},c.tables.forEach(function(re){re.schema.indexes.forEach(function(ae){ae.name&&(Z["idb://".concat(c.name,"/").concat(re.name,"/").concat(ae.name)]=new yi(-1/0,[[[]]]))}),Z["idb://".concat(c.name,"/").concat(re.name,"/")]=Z["idb://".concat(c.name,"/").concat(re.name,"/:dels")]=new yi(-1/0,[[[]]])}),Bi(qr).fire(Z),Zs(Z,!0)),c})}function vo(c){function f(_){return c.next(_)}var b=A(f),x=A(function(_){return c.throw(_)});function A(_){return function(U){var L=_(U),U=L.value;return L.done?U:U&&typeof U.then=="function"?U.then(b,x):m(U)?Promise.all(U).then(b,x):b(U)}}return A(f)()}function bo(c,f,b){for(var x=m(c)?c.slice():[c],A=0;A<b;++A)x.push(f);return x}var wo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(c){return r(r({},c),{table:function(f){var b=c.table(f),x=b.schema,A={},_=[];function M(G,Z,re){var ae=X(G),le=A[ae]=A[ae]||[],pe=G==null?0:typeof G=="string"?1:G.length,xe=0<Z,xe=r(r({},re),{name:xe?"".concat(ae,"(virtual-from:").concat(re.name,")"):re.name,lowLevelIndex:re,isVirtual:xe,keyTail:Z,keyLength:pe,extractKey:gs(G),unique:!xe&&re.unique});return le.push(xe),xe.isPrimaryKey||_.push(xe),1<pe&&M(pe===2?G[0]:G.slice(0,pe-1),Z+1,re),le.sort(function(Oe,Me){return Oe.keyTail-Me.keyTail}),xe}f=M(x.primaryKey.keyPath,0,x.primaryKey),A[":id"]=[f];for(var L=0,U=x.indexes;L<U.length;L++){var q=U[L];M(q.keyPath,0,q)}function K(G){var Z,re=G.query.index;return re.isVirtual?r(r({},G),{query:{index:re.lowLevelIndex,range:(Z=G.query.range,re=re.keyTail,{type:Z.type===1?2:Z.type,lower:bo(Z.lower,Z.lowerOpen?c.MAX_KEY:c.MIN_KEY,re),lowerOpen:!0,upper:bo(Z.upper,Z.upperOpen?c.MIN_KEY:c.MAX_KEY,re),upperOpen:!0})}}):G}return r(r({},b),{schema:r(r({},x),{primaryKey:f,indexes:_,getIndexByKeyPath:function(G){return(G=A[X(G)])&&G[0]}}),count:function(G){return b.count(K(G))},query:function(G){return b.query(K(G))},openCursor:function(G){var Z=G.query.index,re=Z.keyTail,ae=Z.isVirtual,le=Z.keyLength;return ae?b.openCursor(K(G)).then(function(xe){return xe&&pe(xe)}):b.openCursor(G);function pe(xe){return Object.create(xe,{continue:{value:function(Oe){Oe!=null?xe.continue(bo(Oe,G.reverse?c.MAX_KEY:c.MIN_KEY,re)):G.unique?xe.continue(xe.key.slice(0,le).concat(G.reverse?c.MIN_KEY:c.MAX_KEY,re)):xe.continue()}},continuePrimaryKey:{value:function(Oe,Me){xe.continuePrimaryKey(bo(Oe,c.MAX_KEY,re),Me)}},primaryKey:{get:function(){return xe.primaryKey}},key:{get:function(){var Oe=xe.key;return le===1?Oe[0]:Oe.slice(0,le)}},value:{get:function(){return xe.value}}})}}})}})}};function Js(c,f,b,x){return b=b||{},x=x||"",h(c).forEach(function(A){var _,M,L;S(f,A)?(_=c[A],M=f[A],typeof _=="object"&&typeof M=="object"&&_&&M?(L=ie(_))!==ie(M)?b[x+A]=f[A]:L==="Object"?Js(_,M,b,x+A+"."):_!==M&&(b[x+A]=f[A]):_!==M&&(b[x+A]=f[A])):b[x+A]=void 0}),h(f).forEach(function(A){S(c,A)||(b[x+A]=f[A])}),b}function nl(c,f){return f.type==="delete"?f.keys:f.keys||f.values.map(c.extractKey)}var tu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(c){return r(r({},c),{table:function(f){var b=c.table(f),x=b.schema.primaryKey;return r(r({},b),{mutate:function(A){var _=rt.trans,M=_.table(f).hook,L=M.deleting,U=M.creating,q=M.updating;switch(A.type){case"add":if(U.fire===ht)break;return _._promise("readwrite",function(){return K(A)},!0);case"put":if(U.fire===ht&&q.fire===ht)break;return _._promise("readwrite",function(){return K(A)},!0);case"delete":if(L.fire===ht)break;return _._promise("readwrite",function(){return K(A)},!0);case"deleteRange":if(L.fire===ht)break;return _._promise("readwrite",function(){return(function G(Z,re,ae){return b.query({trans:Z,values:!1,query:{index:x,range:re},limit:ae}).then(function(le){var pe=le.result;return K({type:"delete",keys:pe,trans:Z}).then(function(xe){return 0<xe.numFailures?Promise.reject(xe.failures[0]):pe.length<ae?{failures:[],numFailures:0,lastResult:void 0}:G(Z,r(r({},re),{lower:pe[pe.length-1],lowerOpen:!0}),ae)})})})(A.trans,A.range,1e4)},!0)}return b.mutate(A);function K(G){var Z,re,ae,le=rt.trans,pe=G.keys||nl(x,G);if(!pe)throw new Error("Keys missing");return(G=G.type==="add"||G.type==="put"?r(r({},G),{keys:pe}):r({},G)).type!=="delete"&&(G.values=i([],G.values)),G.keys&&(G.keys=i([],G.keys)),Z=b,ae=pe,((re=G).type==="add"?Promise.resolve([]):Z.getMany({trans:re.trans,keys:ae,cache:"immutable"})).then(function(xe){var Oe=pe.map(function(Me,Pe){var Ge,tt,et,it=xe[Pe],ct={onerror:null,onsuccess:null};return G.type==="delete"?L.fire.call(ct,Me,it,le):G.type==="add"||it===void 0?(Ge=U.fire.call(ct,Me,G.values[Pe],le),Me==null&&Ge!=null&&(G.keys[Pe]=Me=Ge,x.outbound||F(G.values[Pe],x.keyPath,Me))):(Ge=Js(it,G.values[Pe]),(tt=q.fire.call(ct,Ge,Me,it,le))&&(et=G.values[Pe],Object.keys(tt).forEach(function(ut){S(et,ut)?et[ut]=tt[ut]:F(et,ut,tt[ut])}))),ct});return b.mutate(G).then(function(Me){for(var Pe=Me.failures,Ge=Me.results,tt=Me.numFailures,Me=Me.lastResult,et=0;et<pe.length;++et){var it=(Ge||pe)[et],ct=Oe[et];it==null?ct.onerror&&ct.onerror(Pe[et]):ct.onsuccess&&ct.onsuccess(G.type==="put"&&xe[et]?G.values[et]:it)}return{failures:Pe,results:Ge,numFailures:tt,lastResult:Me}}).catch(function(Me){return Oe.forEach(function(Pe){return Pe.onerror&&Pe.onerror(Me)}),Promise.reject(Me)})})}}})}})}};function ea(c,f,b){try{if(!f||f.keys.length<c.length)return null;for(var x=[],A=0,_=0;A<f.keys.length&&_<c.length;++A)Je(f.keys[A],c[_])===0&&(x.push(b?he(f.values[A]):f.values[A]),++_);return x.length===c.length?x:null}catch{return null}}var rl={stack:"dbcore",level:-1,create:function(c){return{table:function(f){var b=c.table(f);return r(r({},b),{getMany:function(x){if(!x.cache)return b.getMany(x);var A=ea(x.keys,x.trans._cache,x.cache==="clone");return A?st.resolve(A):b.getMany(x).then(function(_){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?he(_):_},_})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),b.mutate(x)}})}}}};function sc(c,f){return c.trans.mode==="readonly"&&!!c.subscr&&!c.trans.explicit&&c.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function Aa(c,f){switch(c){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var qa={stack:"dbcore",level:0,name:"Observability",create:function(c){var f=c.schema.name,b=new yi(c.MIN_KEY,c.MAX_KEY);return r(r({},c),{transaction:function(x,A,_){if(rt.subscr&&A!=="readonly")throw new Ze.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(rt.querier));return c.transaction(x,A,_)},table:function(x){var A=c.table(x),_=A.schema,M=_.primaryKey,G=_.indexes,L=M.extractKey,U=M.outbound,q=M.autoIncrement&&G.filter(function(re){return re.compound&&re.keyPath.includes(M.keyPath)}),K=r(r({},A),{mutate:function(re){function ae(ut){return ut="idb://".concat(f,"/").concat(x,"/").concat(ut),Me[ut]||(Me[ut]=new yi)}var le,pe,xe,Oe=re.trans,Me=re.mutatedParts||(re.mutatedParts={}),Pe=ae(""),Ge=ae(":dels"),tt=re.type,ct=re.type==="deleteRange"?[re.range]:re.type==="delete"?[re.keys]:re.values.length<50?[nl(M,re).filter(function(ut){return ut}),re.values]:[],et=ct[0],it=ct[1],ct=re.trans._cache;return m(et)?(Pe.addKeys(et),(ct=tt==="delete"||et.length===it.length?ea(et,ct):null)||Ge.addKeys(et),(ct||it)&&(le=ae,pe=ct,xe=it,_.indexes.forEach(function(ut){var xt=le(ut.name||"");function Ut(Vt){return Vt!=null?ut.extractKey(Vt):null}function fn(Vt){return ut.multiEntry&&m(Vt)?Vt.forEach(function(bi){return xt.addKey(bi)}):xt.addKey(Vt)}(pe||xe).forEach(function(Vt,ci){var Jt=pe&&Ut(pe[ci]),ci=xe&&Ut(xe[ci]);Je(Jt,ci)!==0&&(Jt!=null&&fn(Jt),ci!=null&&fn(ci))})}))):et?(it={from:(it=et.lower)!==null&&it!==void 0?it:c.MIN_KEY,to:(it=et.upper)!==null&&it!==void 0?it:c.MAX_KEY},Ge.add(it),Pe.add(it)):(Pe.add(b),Ge.add(b),_.indexes.forEach(function(ut){return ae(ut.name).add(b)})),A.mutate(re).then(function(ut){return!et||re.type!=="add"&&re.type!=="put"||(Pe.addKeys(ut.results),q&&q.forEach(function(xt){for(var Ut=re.values.map(function(Jt){return xt.extractKey(Jt)}),fn=xt.keyPath.findIndex(function(Jt){return Jt===M.keyPath}),Vt=0,bi=ut.results.length;Vt<bi;++Vt)Ut[Vt][fn]=ut.results[Vt];ae(xt.name).addKeys(Ut)})),Oe.mutatedParts=ys(Oe.mutatedParts||{},Me),ut})}}),G=function(ae){var le=ae.query,ae=le.index,le=le.range;return[ae,new yi((ae=le.lower)!==null&&ae!==void 0?ae:c.MIN_KEY,(le=le.upper)!==null&&le!==void 0?le:c.MAX_KEY)]},Z={get:function(re){return[M,new yi(re.key)]},getMany:function(re){return[M,new yi().addKeys(re.keys)]},count:G,query:G,openCursor:G};return h(Z).forEach(function(re){K[re]=function(ae){var le=rt.subscr,pe=!!le,xe=sc(rt,A)&&Aa(re,ae)?ae.obsSet={}:le;if(pe){var Oe=function(it){return it="idb://".concat(f,"/").concat(x,"/").concat(it),xe[it]||(xe[it]=new yi)},Me=Oe(""),Pe=Oe(":dels"),le=Z[re](ae),pe=le[0],le=le[1];if((re==="query"&&pe.isPrimaryKey&&!ae.values?Pe:Oe(pe.name||"")).add(le),!pe.isPrimaryKey){if(re!=="count"){var Ge=re==="query"&&U&&ae.values&&A.query(r(r({},ae),{values:!1}));return A[re].apply(this,arguments).then(function(it){if(re==="query"){if(U&&ae.values)return Ge.then(function(Ut){return Ut=Ut.result,Me.addKeys(Ut),it});var ct=ae.values?it.result.map(L):it.result;(ae.values?Me:Pe).addKeys(ct)}else if(re==="openCursor"){var ut=it,xt=ae.values;return ut&&Object.create(ut,{key:{get:function(){return Pe.addKey(ut.primaryKey),ut.key}},primaryKey:{get:function(){var Ut=ut.primaryKey;return Pe.addKey(Ut),Ut}},value:{get:function(){return xt&&Me.addKey(ut.primaryKey),ut.value}}})}return it})}Pe.add(b)}}return A[re].apply(this,arguments)}}),K}})}};function Ns(c,f,b){if(b.numFailures===0)return f;if(f.type==="deleteRange")return null;var x=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1;return b.numFailures===x?null:(f=r({},f),m(f.keys)&&(f.keys=f.keys.filter(function(A,_){return!(_ in b.failures)})),"values"in f&&m(f.values)&&(f.values=f.values.filter(function(A,_){return!(_ in b.failures)})),f)}function Va(c,f){return b=c,((x=f).lower===void 0||(x.lowerOpen?0<Je(b,x.lower):0<=Je(b,x.lower)))&&(c=c,(f=f).upper===void 0||(f.upperOpen?Je(c,f.upper)<0:Je(c,f.upper)<=0));var b,x}function Pi(c,f,Z,x,A,_){if(!Z||Z.length===0)return c;var M=f.query.index,L=M.multiEntry,U=f.query.range,q=x.schema.primaryKey.extractKey,K=M.extractKey,G=(M.lowLevelIndex||M).extractKey,Z=Z.reduce(function(re,ae){var le=re,pe=[];if(ae.type==="add"||ae.type==="put")for(var xe=new yi,Oe=ae.values.length-1;0<=Oe;--Oe){var Me,Pe=ae.values[Oe],Ge=q(Pe);xe.hasKey(Ge)||(Me=K(Pe),(L&&m(Me)?Me.some(function(ut){return Va(ut,U)}):Va(Me,U))&&(xe.addKey(Ge),pe.push(Pe)))}switch(ae.type){case"add":var tt=new yi().addKeys(f.values?re.map(function(xt){return q(xt)}):re),le=re.concat(f.values?pe.filter(function(xt){return xt=q(xt),!tt.hasKey(xt)&&(tt.addKey(xt),!0)}):pe.map(function(xt){return q(xt)}).filter(function(xt){return!tt.hasKey(xt)&&(tt.addKey(xt),!0)}));break;case"put":var et=new yi().addKeys(ae.values.map(function(xt){return q(xt)}));le=re.filter(function(xt){return!et.hasKey(f.values?q(xt):xt)}).concat(f.values?pe:pe.map(function(xt){return q(xt)}));break;case"delete":var it=new yi().addKeys(ae.keys);le=re.filter(function(xt){return!it.hasKey(f.values?q(xt):xt)});break;case"deleteRange":var ct=ae.range;le=re.filter(function(xt){return!Va(q(xt),ct)})}return le},c);return Z===c?c:(Z.sort(function(re,ae){return Je(G(re),G(ae))||Je(q(re),q(ae))}),f.limit&&f.limit<1/0&&(Z.length>f.limit?Z.length=f.limit:c.length===f.limit&&Z.length<f.limit&&(A.dirty=!0)),_?Object.freeze(Z):Z)}function il(c,f){return Je(c.lower,f.lower)===0&&Je(c.upper,f.upper)===0&&!!c.lowerOpen==!!f.lowerOpen&&!!c.upperOpen==!!f.upperOpen}function is(c,f){return(function(b,x,A,_){if(b===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((x=Je(b,x))===0){if(A&&_)return 0;if(A)return 1;if(_)return-1}return x})(c.lower,f.lower,c.lowerOpen,f.lowerOpen)<=0&&0<=(function(b,x,A,_){if(b===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((x=Je(b,x))===0){if(A&&_)return 0;if(A)return-1;if(_)return 1}return x})(c.upper,f.upper,c.upperOpen,f.upperOpen)}function xo(c,f,b,x){c.subscribers.add(b),x.addEventListener("abort",function(){var A,_;c.subscribers.delete(b),c.subscribers.size===0&&(A=c,_=f,setTimeout(function(){A.subscribers.size===0&&ve(_,A)},3e3))})}var Ca={stack:"dbcore",level:0,name:"Cache",create:function(c){var f=c.schema.name;return r(r({},c),{transaction:function(b,x,A){var _,M,L=c.transaction(b,x,A);return x==="readwrite"&&(M=(_=new AbortController).signal,A=function(U){return function(){if(_.abort(),x==="readwrite"){for(var q=new Set,K=0,G=b;K<G.length;K++){var Z=G[K],re=Rt["idb://".concat(f,"/").concat(Z)];if(re){var ae=c.table(Z),le=re.optimisticOps.filter(function(xt){return xt.trans===L});if(L._explicit&&U&&L.mutatedParts)for(var pe=0,xe=Object.values(re.queries.query);pe<xe.length;pe++)for(var Oe=0,Me=(tt=xe[pe]).slice();Oe<Me.length;Oe++)Fn((et=Me[Oe]).obsSet,L.mutatedParts)&&(ve(tt,et),et.subscribers.forEach(function(xt){return q.add(xt)}));else if(0<le.length){re.optimisticOps=re.optimisticOps.filter(function(xt){return xt.trans!==L});for(var Pe=0,Ge=Object.values(re.queries.query);Pe<Ge.length;Pe++)for(var tt,et,it,ct=0,ut=(tt=Ge[Pe]).slice();ct<ut.length;ct++)(et=ut[ct]).res!=null&&L.mutatedParts&&(U&&!et.dirty?(it=Object.isFrozen(et.res),it=Pi(et.res,et.req,le,ae,et,it),et.dirty?(ve(tt,et),et.subscribers.forEach(function(xt){return q.add(xt)})):it!==et.res&&(et.res=it,et.promise=st.resolve({result:it}))):(et.dirty&&ve(tt,et),et.subscribers.forEach(function(xt){return q.add(xt)})))}}}q.forEach(function(xt){return xt()})}}},L.addEventListener("abort",A(!1),{signal:M}),L.addEventListener("error",A(!1),{signal:M}),L.addEventListener("complete",A(!0),{signal:M})),L},table:function(b){var x=c.table(b),A=x.schema.primaryKey;return r(r({},x),{mutate:function(_){var M=rt.trans;if(A.outbound||M.db._options.cache==="disabled"||M.explicit||M.idbtrans.mode!=="readwrite")return x.mutate(_);var L=Rt["idb://".concat(f,"/").concat(b)];return L?(M=x.mutate(_),_.type!=="add"&&_.type!=="put"||!(50<=_.values.length||nl(A,_).some(function(U){return U==null}))?(L.optimisticOps.push(_),_.mutatedParts&&vs(_.mutatedParts),M.then(function(U){0<U.numFailures&&(ve(L.optimisticOps,_),(U=Ns(0,_,U))&&L.optimisticOps.push(U),_.mutatedParts&&vs(_.mutatedParts))}),M.catch(function(){ve(L.optimisticOps,_),_.mutatedParts&&vs(_.mutatedParts)})):M.then(function(U){var q=Ns(0,r(r({},_),{values:_.values.map(function(K,G){var Z;return U.failures[G]?K:(K=(Z=A.keyPath)!==null&&Z!==void 0&&Z.includes(".")?he(K):r({},K),F(K,A.keyPath,U.results[G]),K)})}),U);L.optimisticOps.push(q),queueMicrotask(function(){return _.mutatedParts&&vs(_.mutatedParts)})}),M):x.mutate(_)},query:function(_){if(!sc(rt,x)||!Aa("query",_))return x.query(_);var M=((q=rt.trans)===null||q===void 0?void 0:q.db._options.cache)==="immutable",G=rt,L=G.requery,U=G.signal,q=(function(ae,le,pe,xe){var Oe=Rt["idb://".concat(ae,"/").concat(le)];if(!Oe)return[];if(!(le=Oe.queries[pe]))return[null,!1,Oe,null];var Me=le[(xe.query?xe.query.index.name:null)||""];if(!Me)return[null,!1,Oe,null];switch(pe){case"query":var Pe=Me.find(function(Ge){return Ge.req.limit===xe.limit&&Ge.req.values===xe.values&&il(Ge.req.query.range,xe.query.range)});return Pe?[Pe,!0,Oe,Me]:[Me.find(function(Ge){return("limit"in Ge.req?Ge.req.limit:1/0)>=xe.limit&&(!xe.values||Ge.req.values)&&is(Ge.req.query.range,xe.query.range)}),!1,Oe,Me];case"count":return Pe=Me.find(function(Ge){return il(Ge.req.query.range,xe.query.range)}),[Pe,!!Pe,Oe,Me]}})(f,b,"query",_),K=q[0],G=q[1],Z=q[2],re=q[3];return K&&G?K.obsSet=_.obsSet:(G=x.query(_).then(function(ae){var le=ae.result;if(K&&(K.res=le),M){for(var pe=0,xe=le.length;pe<xe;++pe)Object.freeze(le[pe]);Object.freeze(le)}else ae.result=he(le);return ae}).catch(function(ae){return re&&K&&ve(re,K),Promise.reject(ae)}),K={obsSet:_.obsSet,promise:G,subscribers:new Set,type:"query",req:_,dirty:!1},re?re.push(K):(re=[K],(Z=Z||(Rt["idb://".concat(f,"/").concat(b)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[_.query.index.name||""]=re)),xo(K,re,L,U),K.promise.then(function(ae){return{result:Pi(ae.result,_,Z?.optimisticOps,x,K,M)}})}})}})}};function sl(c,f){return new Proxy(c,{get:function(b,x,A){return x==="db"?f:Reflect.get(b,x,A)}})}var Ui=(Bn.prototype.version=function(c){if(isNaN(c)||c<.1)throw new Ze.Type("Given version is not a positive number");if(c=Math.round(10*c)/10,this.idbdb||this._state.isBeingOpened)throw new Ze.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,c);var f=this._versions,b=f.filter(function(x){return x._cfg.version===c})[0];return b||(b=new this.Version(c),f.push(b),f.sort(wn),b.stores({}),this._state.autoSchema=!1,b)},Bn.prototype._whenReady=function(c){var f=this;return this.idbdb&&(this._state.openComplete||rt.letThrough||this._vip)?c():new st(function(b,x){if(f._state.openComplete)return x(new Ze.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void x(new Ze.DatabaseClosed);f.open().catch(ht)}f._state.dbReadyPromise.then(b,x)}).then(c)},Bn.prototype.use=function(c){var f=c.stack,b=c.create,x=c.level,A=c.name;return A&&this.unuse({stack:f,name:A}),c=this._middlewares[f]||(this._middlewares[f]=[]),c.push({stack:f,create:b,level:x??10,name:A}),c.sort(function(_,M){return _.level-M.level}),this},Bn.prototype.unuse=function(c){var f=c.stack,b=c.name,x=c.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(A){return x?A.create!==x:!!b&&A.name!==b})),this},Bn.prototype.open=function(){var c=this;return $t($e,function(){return bs(c)})},Bn.prototype._close=function(){var c=this._state,f=En.indexOf(this);if(0<=f&&En.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}c.isBeingOpened||(c.dbReadyPromise=new st(function(b){c.dbReadyResolve=b}),c.openCanceller=new st(function(b,x){c.cancelOpen=x}))},Bn.prototype.close=function(b){var f=(b===void 0?{disableAutoOpen:!0}:b).disableAutoOpen,b=this._state;f?(b.isBeingOpened&&b.cancelOpen(new Ze.DatabaseClosed),this._close(),b.autoOpen=!1,b.dbOpenError=new Ze.DatabaseClosed):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)},Bn.prototype.delete=function(c){var f=this;c===void 0&&(c={disableAutoOpen:!0});var b=0<arguments.length&&typeof arguments[0]!="object",x=this._state;return new st(function(A,_){function M(){f.close(c);var L=f._deps.indexedDB.deleteDatabase(f.name);L.onsuccess=kn(function(){var U,q,K;U=f._deps,q=f.name,K=U.indexedDB,U=U.IDBKeyRange,rs(K)||q===qe||dr(K,U).delete(q).catch(ht),A()}),L.onerror=yn(_),L.onblocked=f._fireOnBlocked}if(b)throw new Ze.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(M):M()})},Bn.prototype.backendDB=function(){return this.idbdb},Bn.prototype.isOpen=function(){return this.idbdb!==null},Bn.prototype.hasBeenClosed=function(){var c=this._state.dbOpenError;return c&&c.name==="DatabaseClosed"},Bn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Bn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Bn.prototype,"tables",{get:function(){var c=this;return h(this._allTables).map(function(f){return c._allTables[f]})},enumerable:!1,configurable:!0}),Bn.prototype.transaction=function(){var c=(function(f,b,x){var A=arguments.length;if(A<2)throw new Ze.InvalidArgument("Too few arguments");for(var _=new Array(A-1);--A;)_[A-1]=arguments[A];return x=_.pop(),[f,ze(_),x]}).apply(this,arguments);return this._transaction.apply(this,c)},Bn.prototype._transaction=function(c,f,b){var x=this,A=rt.trans;A&&A.db===this&&c.indexOf("!")===-1||(A=null);var _,M,L=c.indexOf("?")!==-1;c=c.replace("!","").replace("?","");try{if(M=f.map(function(q){if(q=q instanceof x.Table?q.name:q,typeof q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return q}),c=="r"||c===Ar)_=Ar;else{if(c!="rw"&&c!=hn)throw new Ze.InvalidArgument("Invalid transaction mode: "+c);_=hn}if(A){if(A.mode===Ar&&_===hn){if(!L)throw new Ze.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&M.forEach(function(q){if(A&&A.storeNames.indexOf(q)===-1){if(!L)throw new Ze.SubTransaction("Table "+q+" not included in parent transaction.");A=null}}),L&&A&&!A.active&&(A=null)}}catch(q){return A?A._promise(null,function(K,G){G(q)}):bt(q)}var U=(function q(K,G,Z,re,ae){return st.resolve().then(function(){var le=rt.transless||rt,pe=K._createTransaction(G,Z,K._dbSchema,re);if(pe.explicit=!0,le={trans:pe,transless:le},re)pe.idbtrans=re.idbtrans;else try{pe.create(),pe.idbtrans._explicit=!0,K._state.PR1398_maxLoop=3}catch(Me){return Me.name===Ct.InvalidState&&K.isOpen()&&0<--K._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),K.close({disableAutoOpen:!1}),K.open().then(function(){return q(K,G,Z,null,ae)})):bt(Me)}var xe,Oe=ne(ae);return Oe&&ot(),le=st.follow(function(){var Me;(xe=ae.call(pe,pe))&&(Oe?(Me=nt.bind(null,null),xe.then(Me,Me)):typeof xe.next=="function"&&typeof xe.throw=="function"&&(xe=vo(xe)))},le),(xe&&typeof xe.then=="function"?st.resolve(xe).then(function(Me){return pe.active?Me:bt(new Ze.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):le.then(function(){return xe})).then(function(Me){return re&&pe._resolve(),pe._completion.then(function(){return Me})}).catch(function(Me){return pe._reject(Me),bt(Me)})})}).bind(null,this,_,M,A,b);return A?A._promise(_,U,"lock"):rt.trans?$t(rt.transless,function(){return x._whenReady(U)}):this._whenReady(U)},Bn.prototype.table=function(c){if(!S(this._allTables,c))throw new Ze.InvalidTable("Table ".concat(c," does not exist"));return this._allTables[c]},Bn);function Bn(c,f){var b=this;this._middlewares={},this.verno=0;var x=Bn.dependencies;this._options=f=r({addons:Bn.addons,autoOpen:!0,indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},x=f.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,_,M,L,U,q={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ht,dbReadyPromise:null,cancelOpen:ht,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};q.dbReadyPromise=new st(function(G){q.dbReadyResolve=G}),q.openCanceller=new st(function(G,Z){q.cancelOpen=Z}),this._state=q,this.name=c,this.on=hr(this,"populate","blocked","versionchange","close",{ready:[ri,ht]}),this.on.ready.subscribe=V(this.on.ready.subscribe,function(G){return function(Z,re){Bn.vip(function(){var ae,le=b._state;le.openComplete?(le.dbOpenError||st.resolve().then(Z),re&&G(Z)):le.onReadyBeingFired?(le.onReadyBeingFired.push(Z),re&&G(Z)):(G(Z),ae=b,re||G(function pe(){ae.on.ready.unsubscribe(Z),ae.on.ready.unsubscribe(pe)}))})}}),this.Collection=(A=this,pi(Jn.prototype,function(xe,pe){this.db=A;var re=Or,ae=null;if(pe)try{re=pe()}catch(Oe){ae=Oe}var le=xe._ctx,pe=le.table,xe=pe.hook.reading.fire;this._ctx={table:pe,index:le.index,isPrimKey:!le.index||pe.schema.primKey.keyPath&&le.index===pe.schema.primKey.name,range:re,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ae,or:le.or,valueMapper:xe!==mt?xe:null}})),this.Table=(_=this,pi(ur.prototype,function(G,Z,re){this.db=_,this._tx=re,this.name=G,this.schema=Z,this.hook=_._allTables[G]?_._allTables[G].hook:hr(null,{creating:[_r,ht],reading:[bn,mt],updating:[Tn,ht],deleting:[lr,ht]})})),this.Transaction=(M=this,pi(zt.prototype,function(G,Z,re,ae,le){var pe=this;this.db=M,this.mode=G,this.storeNames=Z,this.schema=re,this.chromeTransactionDurability=ae,this.idbtrans=null,this.on=hr(this,"complete","error","abort"),this.parent=le||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new st(function(xe,Oe){pe._resolve=xe,pe._reject=Oe}),this._completion.then(function(){pe.active=!1,pe.on.complete.fire()},function(xe){var Oe=pe.active;return pe.active=!1,pe.on.error.fire(xe),pe.parent?pe.parent._reject(xe):Oe&&pe.idbtrans&&pe.idbtrans.abort(),bt(xe)})})),this.Version=(L=this,pi(De.prototype,function(G){this.db=L,this._cfg={version:G,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(U=this,pi(Cr.prototype,function(G,Z,re){if(this.db=U,this._ctx={table:G,index:Z===":id"?null:Z,or:re},this._cmp=this._ascending=Je,this._descending=function(ae,le){return Je(le,ae)},this._max=function(ae,le){return 0<Je(ae,le)?ae:le},this._min=function(ae,le){return Je(ae,le)<0?ae:le},this._IDBKeyRange=U._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ze.MissingAPI})),this.on("versionchange",function(G){0<G.newVersion?console.warn("Another connection wants to upgrade database '".concat(b.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(b.name,"'. Closing db now to resume the delete request.")),b.close({disableAutoOpen:!1})}),this.on("blocked",function(G){!G.newVersion||G.newVersion<G.oldVersion?console.warn("Dexie.delete('".concat(b.name,"') was blocked")):console.warn("Upgrade '".concat(b.name,"' blocked by other connection holding version ").concat(G.oldVersion/10))}),this._maxKey=Gr(f.IDBKeyRange),this._createTransaction=function(G,Z,re,ae){return new b.Transaction(G,Z,re,b._options.chromeTransactionDurability,ae)},this._fireOnBlocked=function(G){b.on("blocked").fire(G),En.filter(function(Z){return Z.name===b.name&&Z!==b&&!Z._state.vcFired}).map(function(Z){return Z.on("versionchange").fire(G)})},this.use(rl),this.use(Ca),this.use(qa),this.use(wo),this.use(tu);var K=new Proxy(this,{get:function(G,Z,re){if(Z==="_vip")return!0;if(Z==="table")return function(le){return sl(b.table(le),K)};var ae=Reflect.get(G,Z,re);return ae instanceof ur?sl(ae,K):Z==="tables"?ae.map(function(le){return sl(le,K)}):Z==="_createTransaction"?function(){return sl(ae.apply(this,arguments),K)}:ae}});this.vip=K,x.forEach(function(G){return G(b)})}var Eo,vi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ta=(xn.prototype.subscribe=function(c,f,b){return this._subscribe(c&&typeof c!="function"?c:{next:c,error:f,complete:b})},xn.prototype[vi]=function(){return this},xn);function xn(c){this._subscribe=c}try{Eo={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Eo={indexedDB:null,IDBKeyRange:null}}function Ga(c){var f,b=!1,x=new Ta(function(A){var _=ne(c),M,L=!1,U={},q={},K={get closed(){return L},unsubscribe:function(){L||(L=!0,M&&M.abort(),G&&Bi.storagemutated.unsubscribe(re))}};A.start&&A.start(K);var G=!1,Z=function(){return gn(ae)},re=function(le){ys(U,le),Fn(q,U)&&Z()},ae=function(){var le,pe,xe;!L&&Eo.indexedDB&&(U={},le={},M&&M.abort(),M=new AbortController,xe=(function(Oe){var Me=_n();try{_&&ot();var Pe=at(c,Oe);return Pe=_?Pe.finally(nt):Pe}finally{Me&&Kn()}})(pe={subscr:le,signal:M.signal,requery:Z,querier:c,trans:null}),Promise.resolve(xe).then(function(Oe){b=!0,f=Oe,L||pe.signal.aborted||(U={},(function(Me){for(var Pe in Me)if(S(Me,Pe))return;return 1})(q=le)||G||(Bi(qr,re),G=!0),gn(function(){return!L&&A.next&&A.next(Oe)}))},function(Oe){b=!1,["DatabaseClosedError","AbortError"].includes(Oe?.name)||L||gn(function(){L||A.error&&A.error(Oe)})}))};return setTimeout(Z,0),K});return x.hasValue=function(){return b},x.getValue=function(){return f},x}var z=Ui;function a(c){var f=d;try{d=!0,Bi.storagemutated.fire(c),Zs(c,!0)}finally{d=f}}N(z,r(r({},kt),{delete:function(c){return new z(c,{addons:[]}).delete()},exists:function(c){return new z(c,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(c){try{return f=z.dependencies,b=f.indexedDB,f=f.IDBKeyRange,(rs(b)?Promise.resolve(b.databases()).then(function(x){return x.map(function(A){return A.name}).filter(function(A){return A!==qe})}):dr(b,f).toCollection().primaryKeys()).then(c)}catch{return bt(new Ze.MissingAPI)}var f,b},defineClass:function(){return function(c){y(this,c)}},ignoreTransaction:function(c){return rt.trans?$t(rt.transless,c):c()},vip:el,async:function(c){return function(){try{var f=vo(c.apply(this,arguments));return f&&typeof f.then=="function"?f:st.resolve(f)}catch(b){return bt(b)}}},spawn:function(c,f,b){try{var x=vo(c.apply(b,f||[]));return x&&typeof x.then=="function"?x:st.resolve(x)}catch(A){return bt(A)}},currentTransaction:{get:function(){return rt.trans||null}},waitFor:function(c,f){return f=st.resolve(typeof c=="function"?z.ignoreTransaction(c):c).timeout(f||6e4),rt.trans?rt.trans.waitFor(f):f},Promise:st,debug:{get:function(){return ft},set:function(c){$i(c)}},derive:D,extend:y,props:N,override:V,Events:hr,on:Bi,liveQuery:Ga,extendObservabilitySet:ys,getByKeyPath:J,setByKeyPath:F,delByKeyPath:function(c,f){typeof f=="string"?F(c,f,void 0):"length"in f&&[].map.call(f,function(b){F(c,b,void 0)})},shallowClone:ce,deepClone:he,getObjectDiff:Js,cmp:Je,asap:ee,minKey:-1/0,addons:[],connections:En,errnames:Ct,dependencies:Eo,cache:Rt,semVer:"4.0.10",version:"4.0.10".split(".").map(function(c){return parseInt(c)}).reduce(function(c,f,b){return c+f/Math.pow(10,2*b)})})),z.maxKey=Gr(z.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Bi(qr,function(c){d||(c=new CustomEvent(_t,{detail:c}),d=!0,dispatchEvent(c),d=!1)}),addEventListener(_t,function(c){c=c.detail,d||a(c)}));var u,d=!1,v=function(){};return typeof BroadcastChannel<"u"&&((v=function(){(u=new BroadcastChannel(_t)).onmessage=function(c){return c.data&&a(c.data)}})(),typeof u.unref=="function"&&u.unref(),Bi(qr,function(c){d||u.postMessage(c)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(c){if(!Ui.disableBfCache&&c.persisted){ft&&console.debug("Dexie: handling persisted pagehide"),u?.close();for(var f=0,b=En;f<b.length;f++)b[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(c){!Ui.disableBfCache&&c.persisted&&(ft&&console.debug("Dexie: handling persisted pageshow"),v(),a({all:new yi(-1/0,[[]])}))})),st.rejectionMapper=function(c,f){return!c||c instanceof Ce||c instanceof TypeError||c instanceof SyntaxError||!c.name||!Wt[c.name]?c:(f=new Wt[c.name](f||c.message,c),"stack"in c&&R(f,"stack",{get:function(){return this.inner.stack}}),f)},$i(ft),r(Ui,Object.freeze({__proto__:null,Dexie:Ui,liveQuery:Ga,Entity:nn,cmp:Je,PropModSymbol:te,PropModification:wt,replacePrefix:function(c,f){return new wt({replacePrefix:[c,f]})},add:function(c){return new wt({add:c})},remove:function(c){return new wt({remove:c})},default:Ui,RangeSet:yi,mergeRanges:Sa,rangesOverlap:Pr}),{default:Ui}),Ui})})(wm)),wm.exports}var eU=JP();const Ov=Zl(eU),k4=Symbol.for("Dexie"),qm=globalThis[k4]||(globalThis[k4]=Ov);if(Ov.semVer!==qm.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ov.semVer} and ${qm.semVer}`);const{liveQuery:jee,mergeRanges:Bee,rangesOverlap:Pee,RangeSet:Uee,cmp:Fee,Entity:zee,PropModSymbol:Hee,PropModification:qee,replacePrefix:Vee,add:Gee,remove:Kee}=qm;var Vm="docs",tU="changes",j4="attachments",eN="dexie",B4=new Map,xm=new Map;function nU(t,e,n,r){var i="rxdb-dexie-"+t+"--"+r.version+"--"+e,o=zs(B4,i,()=>{var h=(async()=>{var m=br(n);m.autoOpen=!1;var y=new qm(i,m);n.onCreate&&await n.onCreate(y,i);var g={[Vm]:sU(r),[tU]:"++sequence, id",[j4]:"id"};return y.version(1).stores(g),await y.open(),{dexieDb:y,dexieTable:y[Vm],dexieAttachmentsTable:y[j4],booleanIndexes:aU(r)}})();return B4.set(i,o),xm.set(o,0),h});return o}async function rU(t){var e=await t,n=xm.get(t),r=n-1;r===0?(e.dexieDb.close(),xm.delete(t)):xm.set(t,r)}var Iv="__";function wh(t){var e=t.split(".");if(e.length>1)return e.map(r=>wh(r)).join(".");if(t.startsWith("|")){var n=t.substring(1);return Iv+n}else return t}function tN(t){var e=t.split(".");if(e.length>1)return e.map(r=>tN(r)).join(".");if(t.startsWith(Iv)){var n=t.substring(Iv.length);return"|"+n}else return t}function iU(t,e){if(!e)return e;var n=br(e);return n=Rv(n),t.forEach(r=>{var i=Kl(e,r),o=i?"1":"0",h=wh(r);E5(n,h,o)}),n}function nN(t,e){return e&&(e=br(e),e=Mv(e),t.forEach(n=>{var r=Kl(e,n),i=r==="1";E5(e,n,i)}),e)}function Rv(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(n=>Rv(n));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="object"&&(r=Rv(r)),e[wh(n)]=r}),e}}function Mv(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(n=>Mv(n));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([n,r])=>{(typeof r=="object"||Array.isArray(t))&&(r=Mv(r)),e[tN(n)]=r}),e}}function sU(t){var e=[],n=Ks(t.primaryKey);e.push([n]),e.push(["_deleted",n]),t.indexes&&t.indexes.forEach(o=>{var h=Vf(o);e.push(h)}),e.push(["_meta.lwt",n]),e.push(["_meta.lwt"]),e=e.map(o=>o.map(h=>wh(h)));var r=e.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");r=r.filter((o,h,m)=>m.indexOf(o)===h);var i=r.join(", ");return i}async function P4(t,e){var n=await t,r=await n.dexieTable.bulkGet(e);return r.map(i=>nN(n.booleanIndexes,i))}function $p(t,e){return t+"||"+e}function aU(t){var e=new Set,n=[];return t.indexes?(t.indexes.forEach(r=>{var i=Vf(r);i.forEach(o=>{if(!e.has(o)){e.add(o);var h=oh(t,o);h.type==="boolean"&&n.push(o)}})}),n.push("_deleted"),n7(n)):n}function U4(t){return t===Yu?-1/0:t}function F4(t,e,n){if(t.includes(e)){var r=n===$u||n===!0?"1":"0";return r}else return n}function rN(t,e,n){if(!n){if(typeof window>"u")throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var r=e.startKeys.map((h,m)=>{var y=e.index[m];return F4(t,y,h)}).map(U4),i=e.endKeys.map((h,m)=>{var y=e.index[m];return F4(t,y,h)}).map(U4),o=n.bound(r,i,!e.inclusiveStart,!e.inclusiveEnd);return o}async function z4(t,e){var n=await t.internals,r=e.query,i=r.skip?r.skip:0,o=r.limit?r.limit:1/0,h=i+o,m=e.queryPlan,y=!1;m.selectorSatisfiedByIndex||(y=$b(t.schema,e.query));var g=rN(n.booleanIndexes,m,n.dexieDb._options.IDBKeyRange),E=m.index,S=[];if(await n.dexieDb.transaction("r",n.dexieTable,async I=>{var R=I.idbtrans,D=R.objectStore(Vm),j,B;B="["+E.map(V=>wh(V)).join("+")+"]",j=D.index(B);var H=j.openCursor(g);await new Promise(V=>{H.onsuccess=function(se){var ee=se.target.result;if(ee){var J=nN(n.booleanIndexes,ee.value);(!y||y(J))&&S.push(J),m.sortSatisfiedByIndex&&S.length===h?V():ee.continue()}else V()}})}),!m.sortSatisfiedByIndex){var N=uT(t.schema,e.query);S=S.sort(N)}return S=S.slice(i,h),{documents:S}}async function oU(t,e){var n=await t.internals,r=e.queryPlan,i=r.index,o=rN(n.booleanIndexes,r,n.dexieDb._options.IDBKeyRange),h=-1;return await n.dexieDb.transaction("r",n.dexieTable,async m=>{var y=m.idbtrans,g=y.objectStore(Vm),E,S;S="["+i.map(I=>wh(I)).join("+")+"]",E=g.index(S);var N=E.count(o);h=await new Promise((I,R)=>{N.onsuccess=function(){I(N.result)},N.onerror=D=>R(D)})}),h}var lU=Gs(),Jg=!1,cU=(function(){function t(n,r,i,o,h,m,y,g){this.changes$=new Ji,this.instanceId=lU++,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=o,this.internals=h,this.options=m,this.settings=y,this.devMode=g,this.primaryPath=Ks(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=async function(r,i){vc(this),!Jg&&!await A5()&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium/?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),Jg=!0,r.forEach(E=>{if(!E.document._rev||E.previous&&!E.previous._rev)throw St("SNH",{args:{row:E}})});var o=await this.internals,h={error:[]};this.devMode&&(r=r.map(E=>{var S=Rd(E.document);return{previous:E.previous,document:S}}));var m=r.map(E=>E.document[this.primaryPath]),y;if(await o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,async()=>{var E=new Map,S=await P4(this.internals,m);S.forEach(R=>{var D=R;return D&&E.set(D[this.primaryPath],D),D}),y=Gk(this,this.primaryPath,E,r,i),h.error=y.errors;var N=[];y.bulkInsertDocs.forEach(R=>{N.push(R.document)}),y.bulkUpdateDocs.forEach(R=>{N.push(R.document)}),N=N.map(R=>iU(o.booleanIndexes,R)),N.length>0&&await o.dexieTable.bulkPut(N);var I=[];y.attachmentsAdd.forEach(R=>{I.push({id:$p(R.documentId,R.attachmentId),data:R.attachmentData.data})}),y.attachmentsUpdate.forEach(R=>{I.push({id:$p(R.documentId,R.attachmentId),data:R.attachmentData.data})}),await o.dexieAttachmentsTable.bulkPut(I),await o.dexieAttachmentsTable.bulkDelete(y.attachmentsRemove.map(R=>$p(R.documentId,R.attachmentId)))}),y=Ft(y),y.eventBulk.events.length>0){var g=Ft(y.newestRow).document;y.eventBulk.checkpoint={id:g[this.primaryPath],lwt:g._meta.lwt},this.changes$.next(y.eventBulk)}return h},e.findDocumentsById=async function(r,i){vc(this);var o=await this.internals,h=[];return await o.dexieDb.transaction("r",o.dexieTable,async()=>{var m=await P4(this.internals,r);m.forEach(y=>{y&&(!y._deleted||i)&&h.push(y)})}),h},e.query=function(r){return vc(this),z4(this,r)},e.count=async function(r){if(r.queryPlan.selectorSatisfiedByIndex){var i=await oU(this,r);return{count:i,mode:"fast"}}else{var o=await z4(this,r);return{count:o.documents.length,mode:"slow"}}},e.changeStream=function(){return vc(this),this.changes$.asObservable()},e.cleanup=async function(r){vc(this);var i=await this.internals;return await i.dexieDb.transaction("rw",i.dexieTable,async()=>{var o=Gs()-r,h=await i.dexieTable.where("_meta.lwt").below(o).toArray(),m=[];h.forEach(y=>{y._deleted==="1"&&m.push(y[this.primaryPath])}),await i.dexieTable.bulkDelete(m)}),!0},e.getAttachmentData=async function(r,i,o){vc(this);var h=await this.internals,m=$p(r,i);return await h.dexieDb.transaction("r",h.dexieAttachmentsTable,async()=>{var y=await h.dexieAttachmentsTable.get(m);if(y)return y.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+i)})},e.remove=async function(){vc(this);var r=await this.internals;return await r.dexieTable.clear(),this.close()},e.close=function(){return this.closed?this.closed:(this.closed=(async()=>{this.changes$.complete(),await rU(this.internals)})(),this.closed)},t})();async function uU(t,e,n){var r=nU(e.databaseName,e.collectionName,n,e.schema),i=new cU(t,e.databaseName,e.collectionName,e.schema,r,e.options,n,e.devMode);return await QP(eN,e,i),Promise.resolve(i)}function vc(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var hU=(function(){function t(n){this.name=eN,this.rxdbVersion=S5,this.settings=n}var e=t.prototype;return e.createStorageInstance=function(r){if(Yk(r),r.schema.indexes){var i=r.schema.indexes.flat();i.filter(o=>!o.includes(".")).forEach(o=>{if(!r.schema.required||!r.schema.required.includes(o))throw St("DXE1",{field:o,schema:r.schema})})}return uU(this,r,this.settings)},t})();function fU(t={}){var e=new hU(t);return e}var dU=["__proto__","constructor","prototype"];function bf(t,e){Object.keys(e).forEach(n=>{dU.includes(n)||(typeof t[n]>"u"?t[n]=e[n]:Of(e[n])?bf(t[n],e[n]):t[n]=e[n])})}function Of(t){return t.toString()==="[object Object]"}var N1=(function(){function t(n,r){if(this.options={},this._conditions={},this._fields={},this._path=r,n){var i=this;n.selector&&i.find(n.selector),n.limit&&i.limit(n.limit),n.skip&&i.skip(n.skip),n.sort&&n.sort.forEach(o=>i.sort(o))}}var e=t.prototype;return e.where=function(r,i){if(!arguments.length)return this;var o=typeof arguments[0];if(o==="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(o==="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw da("MQ1",{path:arguments[0]})},e.equals=function(r){this._ensurePath("equals");var i=this._path;return this._conditions[i]=r,this},e.eq=function(r){this._ensurePath("eq");var i=this._path;return this._conditions[i]=r,this},e.or=function(r){var i=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},e.nor=function(r){var i=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},e.and=function(r){var i=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},e.mod=function(r,i){var o,h;arguments.length===1?(this._ensurePath("mod"),o=arguments[0],h=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),o=arguments.slice(),h=this._path):arguments.length===3?(o=arguments.slice(1),h=arguments[0]):(o=arguments[1],h=arguments[0]);var m=this._conditions[h]||(this._conditions[h]={});return m.$mod=o,this},e.exists=function(r,i){var o,h;arguments.length===0?(this._ensurePath("exists"),o=this._path,h=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),o=this._path,h=arguments[0]):(o=arguments[0],h=!0):arguments.length===2&&(o=arguments[0],h=arguments[1]);var m=this._conditions[o]||(this._conditions[o]={});return m.$exists=h,this},e.elemMatch=function(r,i){if(arguments[0]===null)throw da("MQ2");var o,h,m;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),h=this._path,o=arguments[0];else if(Of(arguments[0]))this._ensurePath("elemMatch"),h=this._path,m=arguments[0];else if(typeof arguments[1]=="function")h=arguments[0],o=arguments[1];else if(arguments[1]&&Of(arguments[1]))h=arguments[0],m=arguments[1];else throw da("MQ2");o&&(m=new t,o(m),m=m._conditions);var y=this._conditions[h]||(this._conditions[h]={});return y.$elemMatch=m,this},e.sort=function(r){if(!r)return this;var i,o=typeof r;if(Array.isArray(r)){i=r.length;for(var h=0;h<r.length;++h)mU(this.options,r[h][0],r[h][1]);return this}if(arguments.length===1&&o==="string"){r=r.split(/\s+/),i=r.length;for(var m=0;m<i;++m){var y=r[m];if(y){var g=y[0]==="-"?-1:1;g===-1&&(y=y.substring(1)),H4(this.options,y,g)}}return this}if(Of(r)){var E=Object.keys(r);return E.forEach(S=>H4(this.options,S,r[S])),this}throw da("MQ3",{args:arguments})},e.merge=function(r){if(!r)return this;if(!q4(r))throw da("MQ4",{source:r});return r instanceof t?(r._conditions&&bf(this._conditions,r._conditions),r._fields&&(this._fields||(this._fields={}),bf(this._fields,r._fields)),r.options&&(this.options||(this.options={}),bf(this.options,r.options)),r._distinct&&(this._distinct=r._distinct),this):(bf(this._conditions,r),this)},e.find=function(r){return q4(r)&&this.merge(r),this},e._ensurePath=function(r){if(!this._path)throw St("MQ5",{method:r})},e.toJSON=function(){var r={selector:this._conditions};return this.options.skip&&(r.skip=this.options.skip),this.options.limit&&(r.limit=this.options.limit),this.options.sort&&(r.sort=pU(this.options.sort)),{query:r,path:this._path}},t})();function pU(t){return Object.entries(t).map(([e,n])=>{var r=n===1?"asc":"desc",i={[e]:r};return i})}var iN=["limit","skip","maxScan","batchSize","comment"];iN.forEach(function(t){N1.prototype[t]=function(e){return this.options[t]=e,this}});var sN=["gt","gte","lt","lte","ne","in","nin","all","regex","size"];sN.forEach(function(t){N1.prototype[t]=function(){var e,n;arguments.length===1?(this._ensurePath(t),n=arguments[0],e=this._path):(n=arguments[1],e=arguments[0]);var r=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};if(t==="regex"){if(n instanceof RegExp)throw St("QU16",{field:e,query:this._conditions});typeof n=="string"?r["$"+t]=n:(r["$"+t]=n.$regex,n.$options&&(r.$options=n.$options))}else r["$"+t]=n;return this}});function H4(t,e,n){if(Array.isArray(t.sort))throw da("MQ6",{opts:t,field:e,value:n});if(n&&n.$meta){var r=t.sort||(t.sort={});r[e]={$meta:n.$meta};return}var i=String(n||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(i))throw Array.isArray(n)&&(n="["+n+"]"),da("MQ7",{field:e,value:n});var o=t.sort||(t.sort={}),h=n.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");o[e]=parseInt(h,10)}function mU(t,e,n){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw da("MQ8",{opts:t,field:e,value:n});t.sort.push([e,n])}function q4(t){return t instanceof N1||Of(t)}function gU(t,e){return new N1(t,e)}var V4="queryBuilderPath";function yU(t,e,n){var r=gU(us(t.mangoQuery),t.other[V4]);r[e](n);var i=r.toJSON();return Ru(t.op,i.query,t.collection,{...t.other,[V4]:i.path})}function ey(t,e){t[e]=function(n){if(ar.isDevMode()&&this.op==="findByIds")throw St("QU17",{collection:this.collection.name,query:this.mangoQuery});return yU(this,e,n)}}var vU={name:"query-builder",rxdb:!0,prototypes:{RxQuery(t){["where","equals","eq","or","nor","and","mod","exists","elemMatch","sort"].forEach(e=>{ey(t,e)}),iN.forEach(e=>{ey(t,e)}),sN.forEach(e=>{ey(t,e)})}}};async function aN(t){var e=R7(t.collection.schema.jsonSchema).map(o=>t.collection.name+"-"+o),n=await t.database.internalStore.findDocumentsById(e.map(o=>Uc(o,Hl)),!1),r={};n.forEach(o=>r[o.key]=o);var i=e.find(o=>r[o]);return i?r[i]:void 0}function bU(t,e,n){var r=br(n._attachments),i=us(n),o=i._meta;delete i._meta,i._attachments=r;for(var h=e+1,m=Promise.resolve(i),y=function(){var g=h;m=m.then(E=>wU(t,g,E)),h++};h<=t.schema.version;)y();return m.then(g=>g===null?Pb:(o&&(g._meta=o),g))}function wU(t,e,n){if(n===null)return Pb;var r=t.migrationStrategies[e](n,t),i=v5(r);return i}async function oN(t){if(t.collection.schema.version===0)return oo;var e=await aN(t);return!!e}var xU=200,lN=new WeakMap;function EU(t){var e=cN(t.database),n=e.getValue().slice(0);n.push(t),e.next(n)}function cN(t){return zs(lN,t,()=>new Ja([]))}function SU(t){var e=lN.get(t);e&&e.complete()}var AU=(function(){function t(n,r,i=[n.name,"v",n.schema.version].join("-")){this.started=!1,this.canceled=!1,this.updateStatusHandlers=[],this.updateStatusQueue=Bb,this.collection=n,this.migrationStrategies=r,this.statusDocKey=i,this.database=n.database,this.oldCollectionMeta=aN(this),this.mustMigrate=oN(this),this.statusDocId=Uc(this.statusDocKey,ym),EU(this),this.$=Vk(this.database.internalStore,this.statusDocId).pipe(vr(o=>!!o),di(o=>Ft(o).data),Nd(Sd))}var e=t.prototype;return e.getStatus=function(){return Nc(this.$)},e.startMigration=async function(r=xU){var i=await this.mustMigrate;if(i){if(this.started)throw St("DM1");if(this.started=!0,this.database.multiInstance){this.broadcastChannel=new T1(["rx-migration-state",this.database.name,this.collection.name,this.collection.schema.version].join("|"));var o=ZT(this.broadcastChannel);await o.awaitLeadership()}var h=await this.oldCollectionMeta,m=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:this.collection.name,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Ft(h).data.schema,password:this.database.password,devMode:ar.isDevMode()}),y=await this.getConnectedStorageInstances(),g=await this.countAllDocuments([m].concat(y.map(S=>S.oldStorage)));await this.updateStatus(S=>(S.count.total=g,S));try{await Promise.all(y.map(async S=>{await CT(this.collection,S.newStorage.collectionName,S.newStorage.schema),await this.migrateStorage(S.oldStorage,S.newStorage,r),await S.newStorage.close()})),await this.migrateStorage(m,this.collection.storageInstance.originalStorageInstance,r)}catch(S){await m.close(),await this.updateStatus(N=>(N.status="ERROR",N.error=hv(S),N));return}try{await hh(this.database.internalStore,{previous:h,document:Object.assign({},h,{_deleted:!0})},"rx-migration-remove-collection-meta")}catch(S){var E=sh(S);if(!(E&&E.documentInDb._deleted))throw S}await this.updateStatus(S=>(S.status="DONE",S)),this.broadcastChannel&&await this.broadcastChannel.close()}},e.updateStatus=function(r){return this.updateStatusHandlers.push(r),this.updateStatusQueue=this.updateStatusQueue.then(async()=>{if(this.updateStatusHandlers.length!==0){var i=this.updateStatusHandlers;for(this.updateStatusHandlers=[];;){var o=await bh(this.database.internalStore,this.statusDocId),h=us(o);o||(h={id:this.statusDocId,key:this.statusDocKey,context:ym,data:{collectionName:this.collection.name,status:"RUNNING",count:{total:0,handled:0,percent:0}},_deleted:!1,_meta:vh(),_rev:Pa(),_attachments:{}});var m=Ft(h).data;for(var y of i)m=y(m);if(m.count.percent=Math.round(m.count.handled/m.count.total*100),h&&o&&Kf(h.data,o.data))break;try{await hh(this.database.internalStore,{previous:o,document:Ft(h)},ym);break}catch(g){if(!sh(g))throw g}}}}),this.updateStatusQueue},e.migrateStorage=async function(r,i,o){this.collection.onClose.push(()=>this.cancel()),this.database.onClose.push(()=>this.cancel());var h=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:"rx-migration-state-meta-"+r.collectionName+"-"+r.schema.version,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Av(r.schema,jm(r.schema)),password:this.database.password,devMode:ar.isDevMode()}),m=FB(i,Pm,this.database.token,!0),y=jT({keepMeta:!0,identifier:["rx-migration-state",r.collectionName,r.schema.version,this.collection.schema.version].join("-"),replicationHandler:{masterChangesSince(){return Promise.resolve({checkpoint:null,documents:[]})},masterWrite:async E=>{var S=await Promise.all(E.map(async I=>{var R=I.newDocumentState;if(i.schema.title===vm&&(R=I.newDocumentState.docData,I.newDocumentState.isCheckpoint==="1"))return{assumedMasterState:void 0,newDocumentState:I.newDocumentState};var D=await bU(this.collection,r.schema.version,R);if(D===null)return null;var j={assumedMasterState:void 0,newDocumentState:i.schema.title===vm?Object.assign({},I.newDocumentState,{docData:D}):D};return j}));S=S.filter(I=>!!I&&!!I.newDocumentState);var N=await m.masterWrite(S);return N},masterChangeStream$:new Ji().asObservable()},forkInstance:r,metaInstance:h,pushBatchSize:o,pullBatchSize:0,conflictHandler:Pm,hashFunction:this.database.hashFunction}),g=!1;if(y.events.error.subscribe(E=>g=E),y.events.processed.up.subscribe(()=>{this.updateStatus(E=>(E.count.handled=E.count.handled+1,E))}),await bm(y),await Tv(y),await this.updateStatusQueue,g)throw await h.close(),g;await Promise.all([r.remove(),h.remove()]),await this.cancel()},e.cancel=async function(){this.canceled=!0,this.replicationState&&await BT(this.replicationState),this.broadcastChannel&&await this.broadcastChannel.close()},e.countAllDocuments=async function(r){var i=0;return await Promise.all(r.map(async o=>{var h=E1(o.schema,Wu(o.schema,{selector:{}})),m=await o.count(h);i+=m.count})),i},e.getConnectedStorageInstances=async function(){var r=Ft(await this.oldCollectionMeta),i=[];return await Promise.all(await Promise.all(r.data.connectedStorages.map(async o=>{if(o.schema.title!==vm)throw new Error("unknown migration handling for schema");var h=Av(us(this.collection.schema.jsonSchema),jm(o.schema));h.version=this.collection.schema.version;var[m,y]=await Promise.all([this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:ar.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:o.schema,password:this.database.password,collectionName:o.collectionName}),this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:ar.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:h,password:this.database.password,collectionName:o.collectionName})]);i.push({oldStorage:m,newStorage:y})}))),i},e.migratePromise=async function(r){this.startMigration(r);var i=await this.mustMigrate;if(!i)return{status:"DONE",collectionName:this.collection.name,count:{handled:0,percent:0,total:0}};var o=await Promise.race([Nc(this.$.pipe(vr(h=>h.status==="DONE"))),Nc(this.$.pipe(vr(h=>h.status==="ERROR")))]);if(o.status==="ERROR")throw St("DM4",{collection:this.collection.name,error:o.error});return o},t})(),Gm=new WeakMap,Dv=new WeakMap;function If(t){var e=Gm.get(t);if(!e){var n=t.database?t.database:t,r=t.database?t.name:"";throw St("LD8",{database:n.name,collection:r})}return e}function uN(t,e,n,r,i,o){return e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:CU(r),schema:hN,options:i,multiInstance:o,devMode:ar.isDevMode()})}function G4(t){var e=Gm.get(t);if(e)return Gm.delete(t),e.then(n=>n.storageInstance.close())}async function K4(t,e,n){var r=Ed(10),i=await uN(r,t,e,n,{},!1);await i.remove()}function CU(t){return"plugin-local-documents-"+t}var hN=y1({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function $4(t,e){var n=await If(this),r={id:t,data:e,_deleted:!1,_meta:vh(),_rev:Pa(),_attachments:{}};return hh(n.storageInstance,{document:r},"local-document-insert").then(i=>n.docCache.getCachedRxDocument(i))}function Y4(t,e){return this.getLocal(t).then(n=>{if(n)return n.incrementalModify(()=>e);var r=this.insertLocal(t,e);return r})}async function X4(t){var e=await If(this),n=e.docCache,r=n.getLatestDocumentDataIfExists(t);return r?Promise.resolve(n.getCachedRxDocument(r)):bh(e.storageInstance,t).then(i=>i?e.docCache.getCachedRxDocument(i):null)}function W4(t){return this.$.pipe(_d(null),lo(async e=>{if(e)return{changeEvent:e};var n=await this.getLocal(t);return{doc:n}}),lo(async e=>{if(e.changeEvent){var n=e.changeEvent;if(!n.isLocal||n.documentId!==t)return{use:!1};var r=await this.getLocal(t);return{use:!0,doc:r}}else return{use:!0,doc:e.doc}}),vr(e=>e.use),di(e=>e.doc))}var TU=pT(),NU=(function(t){function e(n,r,i){var o;return o=t.call(this,null,r)||this,o.id=n,o.parent=i,o}return kb(e,t),e})(TU),Rf={get isLocal(){return!0},get allAttachments$(){throw St("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var t=this,e=ah(Dv,this.parent),n=this.primary;return t.parent.eventBulks$.pipe(vr(r=>!!r.isLocal),di(r=>r.events.find(i=>i.documentId===n)),vr(r=>!!r),di(r=>$5(Ft(r))),_d(e.docCache.getLatestDocumentData(this.primary)),Yf((r,i)=>r._rev===i._rev),di(r=>e.docCache.getCachedRxDocument(r)),Nd(Sd))},get $$(){var t=this,e=ty(t),n=e.getReactivityFactory();return n.fromObservable(t.$,t.getLatest()._data,e)},get deleted$$(){var t=this,e=ty(t),n=e.getReactivityFactory();return n.fromObservable(t.deleted$,t.getLatest().deleted,e)},getLatest(){var t=ah(Dv,this.parent),e=t.docCache.getLatestDocumentData(this.primary);return t.docCache.getCachedRxDocument(e)},get(t){if(t="data."+t,!!this._data){if(typeof t!="string")throw da("LD2",{objPath:t});var e=Kl(this._data,t);return e=ar.deepFreezeWhenDevMode(e),e}},get$(t){if(t="data."+t,ar.isDevMode()){if(t.includes(".item."))throw St("LD3",{objPath:t});if(t===this.primaryPath)throw St("LD4")}return this.$.pipe(di(e=>e._data),di(e=>Kl(e,t)),Yf())},get$$(t){var e=ty(this),n=e.getReactivityFactory();return n.fromObservable(this.get$(t),this.getLatest().get(t),e)},async incrementalModify(t){var e=await If(this.parent);return e.incrementalWriteQueue.addWrite(this._data,async n=>(n.data=await t(n.data,this),n)).then(n=>e.docCache.getCachedRxDocument(n))},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([n,r])=>{e[n]=r}),e))},async _saveData(t){var e=await If(this.parent),n=this._data;t.id=this.id;var r=[{previous:n,document:t}];return e.storageInstance.bulkWrite(r,"local-document-save-data").then(i=>{if(i.error[0])throw i.error[0];var o=xa(this.collection.schema.primaryPath,r,i)[0];t=br(t),t._rev=o._rev})},async remove(){var t=await If(this.parent),e=br(this._data);return e._deleted=!0,hh(t.storageInstance,{previous:this._data,document:e},"local-document-remove").then(n=>t.docCache.getCachedRxDocument(n))}},Q4=!1,_U=()=>{if(!Q4){Q4=!0;var t=S1,e=Object.getOwnPropertyNames(t);e.forEach(r=>{var i=Object.getOwnPropertyDescriptor(Rf,r);if(!i){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(Rf,r,o)}});var n=r=>()=>{throw St("LD6",{functionName:r})};["populate","update","putAttachment","putAttachmentBase64","getAttachment","allAttachments"].forEach(r=>Rf[r]=n(r))}};function OU(t,e){_U();var n=new NU(t.id,t,e);return Object.setPrototypeOf(n,Rf),n.prototype=Rf,n}function ty(t){var e=t.parent;return DB(e)?e:e.database}function Z4(t){var e=t.database?t.database:t,n=t.database?t.name:"",r=(async()=>{var i=await uN(e.token,e.storage,e.name,n,e.instanceCreationOptions,e.multiInstance);i=Yb(e,i,hN);var o=new xT("id",e.eventBulks$.pipe(vr(E=>{var S=!1;return(n===""&&!E.collectionName||n!==""&&E.collectionName===n)&&(S=!0),S&&E.isLocal}),di(E=>E.events)),E=>OU(E,t)),h=new dT(i,"id",()=>{},()=>{}),m=await e.storageToken,y=i.changeStream().subscribe(E=>{for(var S=new Array(E.events.length),N=E.events,I=t.database?t.name:void 0,R=0;R<N.length;R++){var D=N[R];S[R]={documentId:D.documentId,collectionName:I,isLocal:!0,operation:D.operation,documentData:ar.deepFreezeWhenDevMode(D.documentData),previousDocumentData:ar.deepFreezeWhenDevMode(D.previousDocumentData)}}var j={id:E.id,isLocal:!0,internal:!1,collectionName:t.database?t.name:void 0,storageToken:m,events:S,databaseToken:e.token,checkpoint:E.checkpoint,context:E.context};e.$emit(j)});t._subs.push(y);var g={database:e,parent:t,storageInstance:i,docCache:o,incrementalWriteQueue:h};return Dv.set(t,g),g})();Gm.set(t,r)}var IU={name:"local-documents",rxdb:!0,prototypes:{RxCollection:t=>{t.insertLocal=$4,t.upsertLocal=Y4,t.getLocal=X4,t.getLocal$=W4},RxDatabase:t=>{t.insertLocal=$4,t.upsertLocal=Y4,t.getLocal=X4,t.getLocal$=W4}},hooks:{createRxDatabase:{before:t=>{t.creator.localDocuments&&Z4(t.database)}},createRxCollection:{before:t=>{t.creator.localDocuments&&Z4(t.collection)}},preCloseRxDatabase:{after:t=>G4(t)},postCloseRxCollection:{after:t=>G4(t)},postRemoveRxDatabase:{after:t=>K4(t.storage,t.databaseName,"")},postRemoveRxCollection:{after:t=>K4(t.storage,t.databaseName,t.collectionName)}},overwritable:{}},RU=new WeakMap,MU={name:"migration-schema",rxdb:!0,init(){A1(IU)},hooks:{preCloseRxDatabase:{after:SU}},prototypes:{RxDatabase:t=>{t.migrationStates=function(){return cN(this).pipe(Nd(Sd))}},RxCollection:t=>{t.getMigrationState=function(){return zs(RU,this,()=>new AU(this.asRxCollection,this.migrationStrategies))},t.migrationNeeded=function(){return this.schema.version===0?oo:oN(this.getMigrationState())}}}},DU=MU;const LU={version:7,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},avatarId:{type:"string"},pinHash:{type:"string"},role:{type:"string",enum:["student","teacher"],default:"student"},classId:{type:"string"},birthdate:{type:"string"},rollNo:{type:"string"},schoolName:{type:"string"},villageName:{type:"string"},state:{type:"string"},country:{type:"string"},ipAddress:{type:"string"},password:{type:"string"},medium:{type:"string",enum:["english","marathi"]},phone:{type:"string"},teacherClassId:{type:"string"},createdAt:{type:"number"}},required:["id","name","avatarId","pinHash","createdAt","role"]},kU={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},userId:{type:"string",maxLength:100},levelId:{type:"string"},score:{type:"number"},stars:{type:"number",minimum:0,maximum:3},timestamp:{type:"number"}},required:["id","userId","levelId","score","stars","timestamp"],indexes:["userId"]},jU={version:6,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},type:{type:"string",enum:["subject","module","text","quiz","lesson"]},title:{type:"string"},thumbnail:{type:"string"},description:{type:"string"},classId:{type:"string"},subjectId:{type:"string"},moduleId:{type:"string"},isHomework:{type:"boolean"},data:{type:"object",properties:{content:{type:"string"},questions:{type:"array",items:{type:"object",properties:{id:{type:"string"},text:{type:"string"},options:{type:"array",items:{type:"string"}},correctAnswer:{type:"number"}}}},translations:{type:"object"},attachments:{type:"array",items:{type:"object",properties:{id:{type:"string"},name:{type:"string"},type:{type:"string"},data:{type:"string"}}}}}},teacherId:{type:"string"},createdAt:{type:"number"},updatedAt:{type:"number"},medium:{type:"string",enum:["english","marathi"]}},required:["id","type","title","createdAt"]},BU={version:3,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},standard:{type:"string"},medium:{type:"string",enum:["english","marathi"]},teacherId:{type:"string"},code:{type:"string",maxLength:6},createdAt:{type:"number"}},required:["id","name","teacherId","createdAt"]},Vi=[];for(let t=0;t<256;++t)Vi.push((t+256).toString(16).slice(1));function PU(t,e=0){return(Vi[t[e+0]]+Vi[t[e+1]]+Vi[t[e+2]]+Vi[t[e+3]]+"-"+Vi[t[e+4]]+Vi[t[e+5]]+"-"+Vi[t[e+6]]+Vi[t[e+7]]+"-"+Vi[t[e+8]]+Vi[t[e+9]]+"-"+Vi[t[e+10]]+Vi[t[e+11]]+Vi[t[e+12]]+Vi[t[e+13]]+Vi[t[e+14]]+Vi[t[e+15]]).toLowerCase()}let ny;const UU=new Uint8Array(16);function FU(){if(!ny){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ny=crypto.getRandomValues.bind(crypto)}return ny(UU)}const zU=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J4={randomUUID:zU};function HU(t,e,n){t=t||{};const r=t.random??t.rng?.()??FU();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,PU(r)}function va(t,e,n){return J4.randomUUID&&!t?J4.randomUUID():HU(t)}const ry={english:{en:"English",mr:""},marathi:{en:"Marathi",mr:""},hindi:{en:"Hindi",mr:""},math:{en:"Mathematics",mr:""},evs:{en:"Environmental Studies",mr:" "},science:{en:"General Science",mr:" "},history_civics:{en:"History & Civics",mr:"  "},geography:{en:"Geography",mr:""},math_1:{en:"Mathematics Part-I (Algebra)",mr:" - ()"},math_2:{en:"Mathematics Part-II (Geometry)",mr:" - ()"},science_1:{en:"Science & Technology Part-I",mr:"   -"},science_2:{en:"Science & Technology Part-II",mr:"   -"},history_poly:{en:"History & Political Science",mr:"  "},defense:{en:"Defense Studies",mr:" "}},eA={math:{en:["Number Systems","Addition","Subtraction","Multiplication","Shapes"],mr:[" ","","","",""]},math_1:{en:["Linear Equations","Quadratic Equations","Arithmetic Progression","Financial Planning","Probability","Statistics"],mr:["   ",""," ","","",""]},math_2:{en:["Similarity","Pythagoras Theorem","Circle","Geometric Constructions","Coordinate Geometry","Trigonometry","Mensuration"],mr:[""," ",""," "," ","",""]},science:{en:["Living World","Force and Motion","Current Electricity","Measurement of Matter","Acids, Bases and Salts","Sound","Light"],mr:[" ","  "," "," ",",   ","",""]},science_1:{en:["Gravitation","Periodic Classification of Elements","Chemical Reactions","Effects of Electric Current","Heat","Refraction of Light"],mr:["","  "," ","  ",""," "]},science_2:{en:["Heredity and Evolution","Life Processes","Environmental Management","Animal Classification","Introduction to Microbiology","Cell Biology"],mr:["  "," "," "," "," ",""]},history_civics:{en:["Sources of History","India before 1947","The Constitution","Local Government","Fundamental Rights"],mr:[" ","  ","","  "," "]},history_poly:{en:["Historiography","Applied History","Mass Media and History","Working of the Constitution","Electoral Process","Political Parties"],mr:[""," ","  "," "," "," "]},geography:{en:["The Earth","Interior of Earth","Climate","Natural Vegetation","Water Resources","Agriculture","Human Geography"],mr:[""," ",""," ","","","  "]},english:{en:["The Fun They Had","Sound of Music","Little Girl","Snake and Mirror","My Childhood","Packing"],mr:["   ","  "," ","  "," ",""]},marathi:{en:["Santvani","Beta Me Aikato Ahe","G.P.","Vayam Motham Khotam","Maza Abhyas","Aaji Kuthe?"],mr:["","   ","... ","  "," "," ?"]},hindi:{en:["Dukh Ka Adhikar","Everest: Meri Shikhar Yatra","Tum Kab Jaoge Atithi","Vaigyanik Chetana","Kichad Ka Kavya"],mr:["  ",":   ","   "," ","  "]},evs:{en:["Our Surroundings","Water for All","Food for Health","Shelter","Clothes We Wear"],mr:[" "," ","  ",""," "]},defense:{en:["National Security","Internal Security","Disaster Management","Armed Forces"],mr:[" "," "," "," "]}},qU=()=>{const t=[],e=["1","2","3","4","5","6","7","8","9","10"],n=["english","marathi"];return e.forEach(r=>{n.forEach(i=>{const o=parseInt(r);let h=[];o>=1&&o<=4?h=["english","marathi","math","evs"]:o>=5&&o<=8?h=["english","hindi","marathi","math","science","history_civics","geography"]:o>=9&&(h=["english","hindi","marathi","math_1","math_2","science_1","science_2","history_poly","geography"],o===10&&h.push("defense")),h.forEach(m=>{const y=va(),g=i==="marathi"?ry[m].mr:ry[m].en,E=ry[m].en;t.push({id:y,type:"subject",title:g,description:`${E} for Class ${r} (${i==="english"?"English":"Marathi"} Medium)`,classId:r,medium:i,createdAt:Date.now()});const S=eA[m]||eA.math;S&&(i==="marathi"?S.mr:S.en).forEach((I,R)=>{const D=va();t.push({id:D,type:"lesson",title:I,description:`Chapter ${R+1} of ${g}`,classId:r,subjectId:y,medium:i,createdAt:Date.now()+R,thumbnail:`https://source.unsplash.com/random/800x600?${m.split("_")[0]},education,${R}`,data:{attachments:[{id:va(),name:"TextBook.pdf",type:"application/pdf",data:"data:application/pdf;base64,JVBERi0xLjAKMSAwIG9iajw8L1BhZ2VzIDIgMCBSPj5lbmRvYmogMiAwIG9iajw8L0tpZHNbMyAwIFJdL0NvdW50IDE+PmVuZG9iaWogMyAwIG9iajw8L01lZGlhQm94WzAgMCAzIDNdPj5lbmRvYmoKdHJhaWxlcjw8L1Jvb3QgMSAwIFI+Pgo="}]}})})})})}),t};async function fN(t){const e=await t.count().exec();if(e>100){console.log("Database likely already seeded with full curriculum. Skipping. (Count:",e,")");return}console.log("Seeding comprehensive curriculum (Classes 1-10, English & Marathi)...");try{const n=qU(),r=100;for(let i=0;i<n.length;i+=r){const o=n.slice(i,i+r);await t.bulkUpsert(o),console.log(`Seeded chunk ${i} to ${i+o.length}`)}console.log("Seeding complete!  Total items:",n.length)}catch(n){console.error("Seeding failed:",n)}}const VU=Object.freeze(Object.defineProperty({__proto__:null,seedContent:fN},Symbol.toStringTag,{value:"Module"}));var dN=new WeakMap,GU=new WeakMap;function tA(t){return zs(GU,t,()=>ZT(t))}function KU(){var t=JT(this.storage.name,this.token,this.name,this),e=this.close.bind(this);this.close=function(){return _v(this.token,this),e()};var n=tA(t);return n||(n=tA(t),dN.set(this,n)),this.leaderElector=()=>n,n}function $U(){return this.multiInstance?this.leaderElector().isLeader:!0}function YU(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):Bb}function XU(t){var e=dN.get(t);e&&e.die()}var WU=!0,QU={RxDatabase:t=>{t.leaderElector=KU,t.isLeader=$U,t.waitForLeadership=YU}},ZU={name:"leader-election",rxdb:WU,prototypes:QU,hooks:{preCloseRxDatabase:{after:XU}}},nA=t=>Promise.resolve(t);function rA(t,e){if(t==="_deleted")return e;e=br(e);var n=!!e._deleted;return e[t]=n,delete e._deleted,e}function iy(t,e,n){return n.map(r=>{var i=br(r);if(e!=="_deleted"){var o=!!i[e];i._deleted=o,delete i[e]}else i._deleted=!!i._deleted;var h=t.schema.primaryPath;return i[h]=ec(t.schema.jsonSchema,i),i})}function iA(t,e){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return t.promiseWait(e);var n,r=new Promise(i=>{n=()=>{window.removeEventListener("online",n),i()},window.addEventListener("online",n)});return Promise.race([r,t.promiseWait(e)]).then(()=>{window.removeEventListener("online",n)})}function JU(t){function e(){if(!(typeof document>"u"||typeof document.dispatchEvent!="function")){var r=new Event("mousemove");document.dispatchEvent(r)}}var n=setInterval(e,20*1e3);t.onCancel.push(()=>clearInterval(n))}var eF=new WeakMap,tF=(function(){function t(n,r,i,o,h,m,y,g,E){this.subs=[],this.subjects={received:new Ji,sent:new Ji,error:new Ji,canceled:new Ja(!1),active:new Ja(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.wasStarted=!1,this.startQueue=ma,this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new Ji,this.replicationIdentifier=n,this.collection=r,this.deletedField=i,this.pull=o,this.push=h,this.live=m,this.retryTime=y,this.autoStart=g,this.toggleOnDocumentVisible=E,this.metaInfoPromise=(async()=>{var I="rx-replication-meta-"+await r.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-")),R=Av(this.collection.schema.jsonSchema,jm(this.collection.schema.jsonSchema));return{collectionName:I,schema:R}})();var S=zs(eF,r,()=>[]);S.push(this),this.collection.onClose.push(()=>this.cancel()),Object.keys(this.subjects).forEach(I=>{Object.defineProperty(this,I+"$",{get:function(){return this.subjects[I].asObservable()}})});var N=new Promise(I=>{this.callOnStart=I});this.startPromise=N}var e=t.prototype;return e.start=function(){return this.startQueue=this.startQueue.then(()=>this._start()),this.startQueue},e._start=async function(){if(!this.isStopped()){if(this.internalReplicationState&&this.internalReplicationState.events.paused.next(!1),this.wasStarted){this.reSync();return}this.wasStarted=!0,this.toggleOnDocumentVisible||JU(this);var r=this.pull&&this.pull.modifier?this.pull.modifier:nA,i=this.push&&this.push.modifier?this.push.modifier:nA,o=this.collection.database,h=await this.metaInfoPromise,[m]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:o.name,collectionName:h.collectionName,databaseInstanceToken:o.token,multiInstance:o.multiInstance,options:{},schema:h.schema,password:o.password,devMode:ar.isDevMode()}),CT(this.collection,h.collectionName,h.schema)]);this.metaInstance=m,this.internalReplicationState=jT({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:o.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(vr(y=>!!this.pull),lo(async y=>{if(y==="RESYNC")return y;var g=br(y);return g.documents=iy(this.collection,this.deletedField,g.documents),g.documents=await Promise.all(g.documents.map(E=>r(E))),g})),masterChangesSince:async(y,g)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var E=!1,S={};!E&&!this.isStoppedOrPaused();)try{S=await this.pull.handler(y,g),E=!0}catch(R){var N=St("RC_PULL",{checkpoint:y,errors:Vf(R).map(D=>hv(D)),direction:"pull"});this.subjects.error.next(N),await iA(this.collection,Ft(this.retryTime))}if(this.isStoppedOrPaused())return{checkpoint:null,documents:[]};var I=br(S);return I.documents=iy(this.collection,this.deletedField,I.documents),I.documents=await Promise.all(I.documents.map(R=>r(R))),I},masterWrite:async y=>{if(!this.push)return[];var g=!1;await Lc("preReplicationMasterWrite",{rows:y,collection:this.collection});var E=await Promise.all(y.map(async D=>(D.newDocumentState=await i(D.newDocumentState),D.newDocumentState===null?null:(D.assumedMasterState&&(D.assumedMasterState=await i(D.assumedMasterState)),this.deletedField!=="_deleted"&&(D.newDocumentState=rA(this.deletedField,D.newDocumentState),D.assumedMasterState&&(D.assumedMasterState=rA(this.deletedField,D.assumedMasterState))),D)))),S=E.filter(t7),N=null;for(S.length===0&&(g=!0,N=[]);!g&&!this.isStoppedOrPaused();)try{if(N=await this.push.handler(S),!Array.isArray(N))throw St("RC_PUSH_NO_AR",{pushRows:y,direction:"push",args:{result:N}});g=!0}catch(D){var I=D.rxdb?D:St("RC_PUSH",{pushRows:y,errors:Vf(D).map(j=>hv(j)),direction:"push"});this.subjects.error.next(I),await iA(this.collection,Ft(this.retryTime))}if(this.isStoppedOrPaused())return[];await Lc("preReplicationMasterWriteDocumentsHandle",{result:N,collection:this.collection});var R=iy(this.collection,this.deletedField,Ft(N));return R}}}),this.subs.push(this.internalReplicationState.events.error.subscribe(y=>{this.subjects.error.next(y)}),this.internalReplicationState.events.processed.down.subscribe(y=>this.subjects.received.next(y.document)),this.internalReplicationState.events.processed.up.subscribe(y=>{this.subjects.sent.next(y.newDocumentState)}),K5([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([y,g])=>{var E=y||g;this.subjects.active.next(E)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:y=>{this.isStoppedOrPaused()||this.remoteEvents$.next(y)},error:y=>{this.subjects.error.next(y)}})),this.live||(await bm(this.internalReplicationState),await Tv(this.internalReplicationState),await this._cancel()),this.callOnStart()}},e.pause=function(){return this.startQueue=this.startQueue.then(()=>{this.internalReplicationState&&this.internalReplicationState.events.paused.next(!0)}),this.startQueue},e.isPaused=function(){return!!(this.internalReplicationState&&this.internalReplicationState.events.paused.getValue())},e.isStopped=function(){return!!this.subjects.canceled.getValue()},e.isStoppedOrPaused=function(){return this.isPaused()||this.isStopped()},e.awaitInitialReplication=async function(){return await this.startPromise,bm(Ft(this.internalReplicationState))},e.awaitInSync=async function(){await this.startPromise,await bm(Ft(this.internalReplicationState));for(var r=2;r>0;)r--,await this.collection.database.requestIdlePromise(),await Tv(Ft(this.internalReplicationState));return!0},e.reSync=function(){this.remoteEvents$.next("RESYNC")},e.emitEvent=function(r){this.remoteEvents$.next(r)},e.cancel=async function(){this.startQueue=this.startQueue.catch(()=>{}).then(async()=>{await this._cancel()}),await this.startQueue},e._cancel=async function(r=!1){if(this.isStopped())return oo;var i=this.onCancel.map(o=>v5(o()));return this.internalReplicationState&&await BT(this.internalReplicationState),this.metaInstance&&!r&&i.push(Ft(this.internalReplicationState).checkpointQueue.then(()=>Ft(this.metaInstance).close())),this.subs.forEach(o=>o.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(i)},e.remove=async function(){return this.startQueue=this.startQueue.then(async()=>{var r=await this.metaInfoPromise;await this._cancel(!0),await Ft(this.internalReplicationState).checkpointQueue.then(()=>Ft(this.metaInstance).remove()),await pB(this.collection,r.collectionName,r.schema)}),this.startQueue},t})();function sy({replicationIdentifier:t,collection:e,deletedField:n="_deleted",pull:r,push:i,live:o=!0,retryTime:h=1e3*5,waitForLeadership:m=!0,autoStart:y=!0,toggleOnDocumentVisible:g=!1}){if(A1(ZU),!r&&!i)throw St("UT3",{collection:e.name,args:{replicationIdentifier:t}});var E=new tF(t,e,n,r,i,o,h,y,g);if(g&&typeof document<"u"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"){var S=()=>{if(!E.isStopped()){var N=document.visibilityState==="visible";N?E.start():e.database.isLeader()||E.pause()}};document.addEventListener("visibilitychange",S),E.onCancel.push(()=>document.removeEventListener("visibilitychange",S))}return nF(m,E),E}function nF(t,e){var n=t&&e.collection.database.multiInstance,r=n?e.collection.database.waitForLeadership():Bb;return r.then(()=>{e.isStopped()||e.autoStart&&e.start()})}A1(vU);A1(DU);const Qu=window,rF=()=>{if(Qu._edu_db_storage)return Qu._edu_db_storage;const t=fU();return Qu._edu_db_storage=t,t},pN=async()=>{if(Qu._edu_db_promise)return Qu._edu_db_promise;const t=(async()=>{console.log("Initializing Database...");const e=await RB({name:"gramshiksha_db_v1",storage:rF(),multiInstance:!0,ignoreDuplicate:!0});return console.log("Adding Collections..."),await e.addCollections({users:{schema:LU,migrationStrategies:{1:function(n){return n.role="student",n},2:function(n){return n.classId=null,n},3:function(n){return n},4:function(n){return n.medium="english",n},5:function(n){return n.phone="",n},6:function(n){return n.classId&&(n.classId=n.classId.replace(/\D/g,"")),n},7:function(n){return n}}},progress:{schema:kU},content:{schema:jU,migrationStrategies:{1:function(n){return n},2:function(n){return n.classId=null,n},3:function(n){return n},4:function(n){return n.translations={},n.attachments=[],n},5:function(n){return n.data&&n.data.questions&&n.data.questions.forEach(r=>{r.correctAnswer=Number(r.correctAnswer)||0}),n},6:function(n){return n.medium="english",n}}},classes:{schema:BU,migrationStrategies:{1:function(n){return n},2:function(n){const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let i="";for(let o=0;o<6;o++)i+=r.charAt(Math.floor(Math.random()*r.length));return n.code=i,n},3:function(n){if(!n.code){const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let i="";for(let o=0;o<6;o++)i+=r.charAt(Math.floor(Math.random()*r.length));n.code=i}return n}}}}),await fN(e.content),console.log("Database Ready!"),e})();return Qu._edu_db_promise=t,t},iF=async(t,e,n)=>{console.log("Starting Sync with",e);const r=e.replace(/\/$/,"");try{await sy({collection:t.users,replicationIdentifier:"users-sync",pull:{handler:async i=>{try{return{documents:(await(await fetch(`${r}/users/_all_docs?include_docs=true`)).json()).rows.map(y=>y.doc),checkpoint:{id:"last"}}}catch(o){return console.warn("Sync Pull Failed (Offline?)",o),{documents:[],checkpoint:i}}}},push:{handler:async i=>{try{return await fetch(`${r}/users/_bulk_docs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:i.map(o=>o.newDocumentState)})}),[]}catch(o){return console.warn("Sync Push Failed",o),[]}}}}),await sy({collection:t.progress,replicationIdentifier:"progress-sync",pull:{handler:async i=>{try{return{documents:(await(await fetch(`${r}/progress/_all_docs?include_docs=true`)).json()).rows.map(y=>y.doc),checkpoint:{id:"last"}}}catch{return{documents:[],checkpoint:i}}}},push:{handler:async i=>{try{return await fetch(`${r}/progress/_bulk_docs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:i.map(o=>o.newDocumentState)})}),[]}catch{return[]}}}}),await sy({collection:t.content,replicationIdentifier:"content-sync",pull:{handler:async i=>{try{let m=(await(await fetch(`${r}/content/_all_docs?include_docs=true`)).json()).rows.map(y=>y.doc);return n&&(m=m.filter(y=>y.classId===n)),{documents:m,checkpoint:{id:"last"}}}catch{return{documents:[],checkpoint:i}}}}}),console.log("Sync Initiated")}catch(i){console.error("Sync Setup Error",i)}},sF=Object.freeze(Object.defineProperty({__proto__:null,createDB:pN,syncDatabase:iF},Symbol.toStringTag,{value:"Module"})),mN=W.createContext({db:null,isReady:!1}),aF=({children:t})=>{const[e,n]=W.useState(null),[r,i]=W.useState(null);if(W.useEffect(()=>{(async()=>{try{const h=await pN();n(h)}catch(h){console.error("Failed to initialize database:",h),i(h.message||"Unknown Database Error")}})()},[]),r){const o=async()=>{confirm("This will Delete ALL Data and Reset the App. Continue?")&&((await window.indexedDB.databases()).forEach(m=>window.indexedDB.deleteDatabase(m.name)),window.location.reload())};return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-950 text-white p-6 text-center",children:T.jsxs("div",{className:"space-y-4 max-w-md bg-black/40 p-8 rounded-xl border border-red-500/30",children:[T.jsx("h2",{className:"text-xl font-bold text-red-400",children:"Database Error (Migration)"}),T.jsx("p",{className:"text-red-200 text-sm",children:r}),T.jsxs("div",{className:"flex gap-4 justify-center",children:[T.jsx("button",{onClick:()=>window.location.reload(),className:"bg-white/10 hover:bg-white/20 px-4 py-2 rounded text-sm",children:"Try Reload"}),T.jsx("button",{onClick:o,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded font-bold text-sm shadow-lg shadow-red-900/50",children:"Reset Data (Fix)"})]})]})})}return e?T.jsx(mN.Provider,{value:{db:e,isReady:!0},children:t}):T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white",children:T.jsxs("div",{className:"flex flex-col items-center gap-4",children:[T.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-primary-500 border-t-transparent animate-spin"}),T.jsx("span",{className:"text-sm text-slate-400",children:"Loading Offline Database..."})]})})},Di=()=>W.useContext(mN),gN=W.createContext(null);async function sA(t){const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}const oF=({children:t})=>{const{db:e}=Di(),[n,r]=W.useState(null);W.useEffect(()=>{const y=localStorage.getItem("activeUserId");y&&e&&e.users.findOne(y).exec().then(g=>{g&&r(g.toJSON())})},[e]);const i=async(y,g)=>{if(!e)return!1;const E=await e.users.findOne(y).exec();if(!E)return!1;const S=await sA(g);return E.get("pinHash")===S?(r(E.toJSON()),localStorage.setItem("activeUserId",y),!0):!1},o=async y=>{if(!e)return;const g=va(),{pin:E,...S}=y,N=await sA(E);try{if(await e.users.insert({id:g,name:y.name||"Anonymous",role:y.role||"student",avatarId:y.avatarId||"",pinHash:N,createdAt:Date.now(),...S}),y.role==="student"&&y.classId&&y.medium){console.log("Seeding subjects for student...");try{const{getSubjects:I}=await m1(async()=>{const{getSubjects:B}=await import("./syllabus-DL4VRE7A.js");return{getSubjects:B}},[]),R=I(y.classId,y.medium),D=Date.now(),j=R.map(B=>({id:va(),type:"subject",title:B,classId:y.classId,createdAt:D,updatedAt:D,thumbnail:"",description:`Standard ${y.classId} Subject`}));await e.content.bulkInsert(j),console.log(`Seeded ${R.length} subjects for Class ${y.classId}`)}catch(I){console.error("Failed to seed subjects:",I)}}}catch(I){console.error("User Insert Failed:",I),alert("Failed to create profile: "+I.message);return}await i(g,y.pin)},h=()=>{r(null),localStorage.removeItem("activeUserId")},m=async()=>e?(await e.users.find().sort({createdAt:"desc"}).exec()).map(g=>g.toJSON()):[];return T.jsx(gN.Provider,{value:{currentUser:n,login:i,signup:o,logout:h,getAllUsers:m},children:t})},fs=()=>{const t=W.useContext(gN);if(!t)throw new Error("useAuth must be used within AuthProvider");return t};function lF(){const[t,e]=W.useState(navigator.onLine),[n,r]=W.useState("idle"),{db:i}=Di(),{currentUser:o}=fs();W.useEffect(()=>{const m=()=>e(!0),y=()=>e(!1);return window.addEventListener("online",m),window.addEventListener("offline",y),()=>{window.removeEventListener("online",m),window.removeEventListener("offline",y)}},[]);const h=async()=>{if(!(!t||!i)){r("syncing");try{const m=localStorage.getItem("teacherIP")||"http://localhost:5984/db",{syncDatabase:y}=await m1(async()=>{const{syncDatabase:g}=await Promise.resolve().then(()=>sF);return{syncDatabase:g}},void 0);await y(i,m,o?.classId),r("idle")}catch(m){console.error("Sync Failed",m),r("error"),setTimeout(()=>r("idle"),3e3)}}};return t?T.jsx("button",{onClick:h,className:`fixed bottom-4 right-4 border p-3 rounded-full flex items-center justify-center shadow-lg transition-all ${n==="syncing"?"bg-blue-900/50 border-blue-500/50 text-blue-200":"bg-slate-800 border-green-900/50 text-green-400 hover:bg-slate-700"}`,title:n==="syncing"?"Syncing...":"Online",children:n==="syncing"?T.jsx(p1,{className:"w-4 h-4 animate-spin"}):T.jsx(G9,{className:"w-4 h-4"})}):T.jsx("div",{className:"fixed bottom-4 right-4 bg-slate-800 border border-slate-700 text-slate-400 p-3 rounded-full flex items-center justify-center shadow-lg",title:"Offline",children:T.jsx(q9,{className:"w-4 h-4"})})}const sn=t=>typeof t=="string",ff=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},aA=t=>t==null?"":""+t,cF=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},uF=/###/g,oA=t=>t&&t.indexOf("###")>-1?t.replace(uF,"."):t,lA=t=>!t||sn(t),Mf=(t,e,n)=>{const r=sn(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(lA(t))return{};const o=oA(r[i]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++i}return lA(t)?{}:{obj:t,k:oA(r[i])}},cA=(t,e,n)=>{const{obj:r,k:i}=Mf(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let o=e[e.length-1],h=e.slice(0,e.length-1),m=Mf(t,h,Object);for(;m.obj===void 0&&h.length;)o=`${h[h.length-1]}.${o}`,h=h.slice(0,h.length-1),m=Mf(t,h,Object),m?.obj&&typeof m.obj[`${m.k}.${o}`]<"u"&&(m.obj=void 0);m.obj[`${m.k}.${o}`]=n},hF=(t,e,n,r)=>{const{obj:i,k:o}=Mf(t,e,Object);i[o]=i[o]||[],i[o].push(n)},Km=(t,e)=>{const{obj:n,k:r}=Mf(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},fF=(t,e,n)=>{const r=Km(t,n);return r!==void 0?r:Km(e,n)},yN=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?sn(t[r])||t[r]instanceof String||sn(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):yN(t[r],e[r],n):t[r]=e[r]);return t},Nu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var dF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const pF=t=>sn(t)?t.replace(/[&<>"'\/]/g,e=>dF[e]):t;class mF{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const gF=[" ",",","?","!",";"],yF=new mF(20),vF=(t,e,n)=>{e=e||"",n=n||"";const r=gF.filter(h=>e.indexOf(h)<0&&n.indexOf(h)<0);if(r.length===0)return!0;const i=yF.getRegExp(`(${r.map(h=>h==="?"?"\\?":h).join("|")})`);let o=!i.test(t);if(!o){const h=t.indexOf(n);h>0&&!i.test(t.substring(0,h))&&(o=!0)}return o},Lv=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let h,m="";for(let y=o;y<r.length;++y)if(y!==o&&(m+=n),m+=r[y],h=i[m],h!==void 0){if(["string","number","boolean"].indexOf(typeof h)>-1&&y<r.length-1)continue;o+=y-o+1;break}i=h}return i},nd=t=>t?.replace("_","-"),bF={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class $m{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||bF,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(sn(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new $m(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new $m(this.logger,e)}}var to=new $m;let _1=class{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,o])=>{for(let h=0;h<o;h++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let h=0;h<o;h++)i.apply(i,[e,...n])})}};class uA extends _1{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,h=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let m;e.indexOf(".")>-1?m=e.split("."):(m=[e,n],r&&(Array.isArray(r)?m.push(...r):sn(r)&&o?m.push(...r.split(o)):m.push(r)));const y=Km(this.data,m);return!y&&!n&&!r&&e.indexOf(".")>-1&&(e=m[0],n=m[1],r=m.slice(2).join(".")),y||!h||!sn(r)?y:Lv(this.data?.[e]?.[n],r,o)}addResource(e,n,r,i,o={silent:!1}){const h=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let m=[e,n];r&&(m=m.concat(h?r.split(h):r)),e.indexOf(".")>-1&&(m=e.split("."),i=n,n=m[1]),this.addNamespaces(n),cA(this.data,m,i),o.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const o in r)(sn(r[o])||Array.isArray(r[o]))&&this.addResource(e,n,o,r[o],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,o,h={silent:!1,skipCopy:!1}){let m=[e,n];e.indexOf(".")>-1&&(m=e.split("."),i=r,r=n,n=m[1]),this.addNamespaces(n);let y=Km(this.data,m)||{};h.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?yN(y,r,o):y={...y,...r},cA(this.data,m,y),h.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var vN={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(o=>{e=this.processors[o]?.process(e,n,r,i)??e}),e}};const bN=Symbol("i18next/PATH_KEY");function wF(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>(n?.revoke?.(),i===bN?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function kv(t,e){const{[bN]:n}=t(wF());return n.join(e?.keySeparator??".")}const hA={},ay=t=>!sn(t)&&typeof t!="boolean"&&typeof t!="number";class Ym extends _1{constructor(e,n={}){super(),cF(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=to.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);if(i?.res===void 0)return!1;const o=ay(i.res);return!(r.returnObjects===!1&&o)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const h=r&&e.indexOf(r)>-1,m=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!vF(e,r,i);if(h&&!m){const y=e.match(this.interpolator.nestingRegexp);if(y&&y.length>0)return{key:e,namespaces:sn(o)?[o]:o};const g=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(g[0])>-1)&&(o=g.shift()),e=g.join(i)}return{key:e,namespaces:sn(o)?[o]:o}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=kv(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,h=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:m,namespaces:y}=this.extractFromKey(e[e.length-1],i),g=y[y.length-1];let E=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;E===void 0&&(E=":");const S=i.lng||this.language,N=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(S?.toLowerCase()==="cimode")return N?o?{res:`${g}${E}${m}`,usedKey:m,exactUsedKey:m,usedLng:S,usedNS:g,usedParams:this.getUsedParamsDetails(i)}:`${g}${E}${m}`:o?{res:m,usedKey:m,exactUsedKey:m,usedLng:S,usedNS:g,usedParams:this.getUsedParamsDetails(i)}:m;const I=this.resolve(e,i);let R=I?.res;const D=I?.usedKey||m,j=I?.exactUsedKey||m,B=["[object Number]","[object Function]","[object RegExp]"],H=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,V=!this.i18nFormat||this.i18nFormat.handleAsObject,se=i.count!==void 0&&!sn(i.count),ee=Ym.hasDefaultValue(i),J=se?this.pluralResolver.getSuffix(S,i.count,i):"",F=i.ordinal&&se?this.pluralResolver.getSuffix(S,i.count,{ordinal:!1}):"",ce=se&&!i.ordinal&&i.count===0,de=ce&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${J}`]||i[`defaultValue${F}`]||i.defaultValue;let ze=R;V&&!R&&ee&&(ze=de);const Q=ay(ze),fe=Object.prototype.toString.apply(ze);if(V&&ze&&Q&&B.indexOf(fe)<0&&!(sn(H)&&Array.isArray(ze))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const he=this.options.returnedObjectHandler?this.options.returnedObjectHandler(D,ze,{...i,ns:y}):`key '${m} (${this.language})' returned an object instead of string.`;return o?(I.res=he,I.usedParams=this.getUsedParamsDetails(i),I):he}if(h){const he=Array.isArray(ze),Ne=he?[]:{},ie=he?j:D;for(const Y in ze)if(Object.prototype.hasOwnProperty.call(ze,Y)){const oe=`${ie}${h}${Y}`;ee&&!R?Ne[Y]=this.translate(oe,{...i,defaultValue:ay(de)?de[Y]:void 0,joinArrays:!1,ns:y}):Ne[Y]=this.translate(oe,{...i,joinArrays:!1,ns:y}),Ne[Y]===oe&&(Ne[Y]=ze[Y])}R=Ne}}else if(V&&sn(H)&&Array.isArray(R))R=R.join(H),R&&(R=this.extendTranslation(R,e,i,r));else{let he=!1,Ne=!1;!this.isValidLookup(R)&&ee&&(he=!0,R=de),this.isValidLookup(R)||(Ne=!0,R=m);const Y=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ne?void 0:R,oe=ee&&de!==R&&this.options.updateMissing;if(Ne||he||oe){if(this.logger.log(oe?"updateKey":"missingKey",S,g,m,oe?de:R),h){const ne=this.resolve(m,{...i,keySeparator:!1});ne&&ne.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ve=[];const Ee=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ee&&Ee[0])for(let ne=0;ne<Ee.length;ne++)ve.push(Ee[ne]);else this.options.saveMissingTo==="all"?ve=this.languageUtils.toResolveHierarchy(i.lng||this.language):ve.push(i.lng||this.language);const be=(ne,ye,Ce)=>{const ke=ee&&Ce!==R?Ce:Y;this.options.missingKeyHandler?this.options.missingKeyHandler(ne,g,ye,ke,oe,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ne,g,ye,ke,oe,i),this.emit("missingKey",ne,g,ye,R)};this.options.saveMissing&&(this.options.saveMissingPlurals&&se?ve.forEach(ne=>{const ye=this.pluralResolver.getSuffixes(ne,i);ce&&i[`defaultValue${this.options.pluralSeparator}zero`]&&ye.indexOf(`${this.options.pluralSeparator}zero`)<0&&ye.push(`${this.options.pluralSeparator}zero`),ye.forEach(Ce=>{be([ne],m+Ce,i[`defaultValue${Ce}`]||de)})}):be(ve,m,de))}R=this.extendTranslation(R,e,i,I,r),Ne&&R===m&&this.options.appendNamespaceToMissingKey&&(R=`${g}${E}${m}`),(Ne||he)&&this.options.parseMissingKeyHandler&&(R=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}${E}${m}`:m,he?R:void 0,i))}return o?(I.res=R,I.usedParams=this.getUsedParamsDetails(i),I):R}extendTranslation(e,n,r,i,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const y=sn(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(y){const S=e.match(this.interpolator.nestingRegexp);g=S&&S.length}let E=r.replace&&!sn(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(E={...this.options.interpolation.defaultVariables,...E}),e=this.interpolator.interpolate(e,E,r.lng||this.language||i.usedLng,r),y){const S=e.match(this.interpolator.nestingRegexp),N=S&&S.length;g<N&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...S)=>o?.[0]===S[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${S[0]} in key: ${n[0]}`),null):this.translate(...S,n),r)),r.interpolation&&this.interpolator.reset()}const h=r.postProcess||this.options.postProcess,m=sn(h)?[h]:h;return e!=null&&m?.length&&r.applyPostProcessor!==!1&&(e=vN.handle(m,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,o,h,m;return sn(e)&&(e=[e]),e.forEach(y=>{if(this.isValidLookup(r))return;const g=this.extractFromKey(y,n),E=g.key;i=E;let S=g.namespaces;this.options.fallbackNS&&(S=S.concat(this.options.fallbackNS));const N=n.count!==void 0&&!sn(n.count),I=N&&!n.ordinal&&n.count===0,R=n.context!==void 0&&(sn(n.context)||typeof n.context=="number")&&n.context!=="",D=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);S.forEach(j=>{this.isValidLookup(r)||(m=j,!hA[`${D[0]}-${j}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(m)&&(hA[`${D[0]}-${j}`]=!0,this.logger.warn(`key "${i}" for languages "${D.join(", ")}" won't get resolved as namespace "${m}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),D.forEach(B=>{if(this.isValidLookup(r))return;h=B;const H=[E];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(H,E,B,j,n);else{let se;N&&(se=this.pluralResolver.getSuffix(B,n.count,n));const ee=`${this.options.pluralSeparator}zero`,J=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(N&&(n.ordinal&&se.indexOf(J)===0&&H.push(E+se.replace(J,this.options.pluralSeparator)),H.push(E+se),I&&H.push(E+ee)),R){const F=`${E}${this.options.contextSeparator||"_"}${n.context}`;H.push(F),N&&(n.ordinal&&se.indexOf(J)===0&&H.push(F+se.replace(J,this.options.pluralSeparator)),H.push(F+se),I&&H.push(F+ee))}}let V;for(;V=H.pop();)this.isValidLookup(r)||(o=V,r=this.getResource(B,j,V,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:h,usedNS:m}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!sn(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class fA{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=to.create("languageUtils")}getScriptPartFromCode(e){if(e=nd(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=nd(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(sn(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(h=>{if(h===o)return h;if(!(h.indexOf("-")<0&&o.indexOf("-")<0)&&(h.indexOf("-")>0&&o.indexOf("-")<0&&h.substring(0,h.indexOf("-"))===o||h.indexOf(o)===0&&o.length>1))return h})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),sn(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],o=h=>{h&&(this.isSupportedCode(h)?i.push(h):this.logger.warn(`rejecting language code not found in supportedLngs: ${h}`))};return sn(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):sn(e)&&o(this.formatLanguageCode(e)),r.forEach(h=>{i.indexOf(h)<0&&o(this.formatLanguageCode(h))}),i}}const dA={zero:0,one:1,two:2,few:3,many:4,other:5},pA={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class xF{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=to.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=nd(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let h;try{h=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),pA;if(!e.match(/-|_/))return pA;const y=this.languageUtils.getLanguagePartFromCode(e);h=this.getRule(y,n)}return this.pluralRulesCache[o]=h,h}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>dA[i]-dA[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const mA=(t,e,n,r=".",i=!0)=>{let o=fF(t,e,n);return!o&&i&&sn(n)&&(o=Lv(t,n,r),o===void 0&&(o=Lv(e,n,r))),o},oy=t=>t.replace(/\$/g,"$$$$");class gA{constructor(e={}){this.logger=to.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:h,suffix:m,suffixEscaped:y,formatSeparator:g,unescapeSuffix:E,unescapePrefix:S,nestingPrefix:N,nestingPrefixEscaped:I,nestingSuffix:R,nestingSuffixEscaped:D,nestingOptionsSeparator:j,maxReplaces:B,alwaysFormat:H}=e.interpolation;this.escape=n!==void 0?n:pF,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Nu(o):h||"{{",this.suffix=m?Nu(m):y||"}}",this.formatSeparator=g||",",this.unescapePrefix=E?"":S||"-",this.unescapeSuffix=this.unescapePrefix?"":E||"",this.nestingPrefix=N?Nu(N):I||Nu("$t("),this.nestingSuffix=R?Nu(R):D||Nu(")"),this.nestingOptionsSeparator=j||",",this.maxReplaces=B||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let o,h,m;const y=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=I=>{if(I.indexOf(this.formatSeparator)<0){const B=mA(n,y,I,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(B,void 0,r,{...i,...n,interpolationkey:I}):B}const R=I.split(this.formatSeparator),D=R.shift().trim(),j=R.join(this.formatSeparator).trim();return this.format(mA(n,y,D,this.options.keySeparator,this.options.ignoreJSONStructure),j,r,{...i,...n,interpolationkey:D})};this.resetRegExp();const E=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,S=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:I=>oy(I)},{regex:this.regexp,safeValue:I=>this.escapeValue?oy(this.escape(I)):oy(I)}].forEach(I=>{for(m=0;o=I.regex.exec(e);){const R=o[1].trim();if(h=g(R),h===void 0)if(typeof E=="function"){const j=E(e,o,i);h=sn(j)?j:""}else if(i&&Object.prototype.hasOwnProperty.call(i,R))h="";else if(S){h=o[0];continue}else this.logger.warn(`missed to pass in variable ${R} for interpolating ${e}`),h="";else!sn(h)&&!this.useRawValueToEscape&&(h=aA(h));const D=I.safeValue(h);if(e=e.replace(o[0],D),S?(I.regex.lastIndex+=h.length,I.regex.lastIndex-=o[0].length):I.regex.lastIndex=0,m++,m>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,o,h;const m=(y,g)=>{const E=this.nestingOptionsSeparator;if(y.indexOf(E)<0)return y;const S=y.split(new RegExp(`${E}[ ]*{`));let N=`{${S[1]}`;y=S[0],N=this.interpolate(N,h);const I=N.match(/'/g),R=N.match(/"/g);((I?.length??0)%2===0&&!R||R.length%2!==0)&&(N=N.replace(/'/g,'"'));try{h=JSON.parse(N),g&&(h={...g,...h})}catch(D){return this.logger.warn(`failed parsing options string in nesting for key ${y}`,D),`${y}${E}${N}`}return h.defaultValue&&h.defaultValue.indexOf(this.prefix)>-1&&delete h.defaultValue,y};for(;i=this.nestingRegexp.exec(e);){let y=[];h={...r},h=h.replace&&!sn(h.replace)?h.replace:h,h.applyPostProcessor=!1,delete h.defaultValue;const g=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(g!==-1&&(y=i[1].slice(g).split(this.formatSeparator).map(E=>E.trim()).filter(Boolean),i[1]=i[1].slice(0,g)),o=n(m.call(this,i[1].trim(),h),h),o&&i[0]===e&&!sn(o))return o;sn(o)||(o=aA(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),y.length&&(o=y.reduce((E,S)=>this.format(E,S,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const EF=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(h=>{if(h){const[m,...y]=h.split(":"),g=y.join(":").trim().replace(/^'+|'+$/g,""),E=m.trim();n[E]||(n[E]=g),g==="false"&&(n[E]=!1),g==="true"&&(n[E]=!0),isNaN(g)||(n[E]=parseInt(g,10))}})}return{formatName:e,formatOptions:n}},yA=t=>{const e={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const h=r+JSON.stringify(o);let m=e[h];return m||(m=t(nd(r),i),e[h]=m),m(n)}},SF=t=>(e,n,r)=>t(nd(n),r)(e);class AF{constructor(e={}){this.logger=to.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?yA:SF;this.formats={number:r((i,o)=>{const h=new Intl.NumberFormat(i,{...o});return m=>h.format(m)}),currency:r((i,o)=>{const h=new Intl.NumberFormat(i,{...o,style:"currency"});return m=>h.format(m)}),datetime:r((i,o)=>{const h=new Intl.DateTimeFormat(i,{...o});return m=>h.format(m)}),relativetime:r((i,o)=>{const h=new Intl.RelativeTimeFormat(i,{...o});return m=>h.format(m,o.range||"day")}),list:r((i,o)=>{const h=new Intl.ListFormat(i,{...o});return m=>h.format(m)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=yA(n)}format(e,n,r,i={}){const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(m=>m.indexOf(")")>-1)){const m=o.findIndex(y=>y.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,m)].join(this.formatSeparator)}return o.reduce((m,y)=>{const{formatName:g,formatOptions:E}=EF(y);if(this.formats[g]){let S=m;try{const N=i?.formatParams?.[i.interpolationkey]||{},I=N.locale||N.lng||i.locale||i.lng||r;S=this.formats[g](m,I,{...E,...i,...N})}catch(N){this.logger.warn(N)}return S}else this.logger.warn(`there was no format function for ${g}`);return m},e)}}const CF=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class TF extends _1{constructor(e,n,r,i={}){super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=to.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,n,r,i){const o={},h={},m={},y={};return e.forEach(g=>{let E=!0;n.forEach(S=>{const N=`${g}|${S}`;!r.reload&&this.store.hasResourceBundle(g,S)?this.state[N]=2:this.state[N]<0||(this.state[N]===1?h[N]===void 0&&(h[N]=!0):(this.state[N]=1,E=!1,h[N]===void 0&&(h[N]=!0),o[N]===void 0&&(o[N]=!0),y[S]===void 0&&(y[S]=!0)))}),E||(m[g]=!0)}),(Object.keys(o).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(h),toLoadLanguages:Object.keys(m),toLoadNamespaces:Object.keys(y)}}loaded(e,n,r){const i=e.split("|"),o=i[0],h=i[1];n&&this.emit("failedLoading",o,h,n),!n&&r&&this.store.addResourceBundle(o,h,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const m={};this.queue.forEach(y=>{hF(y.loaded,[o],h),CF(y,e),n&&y.errors.push(n),y.pendingCount===0&&!y.done&&(Object.keys(y.loaded).forEach(g=>{m[g]||(m[g]={});const E=y.loaded[g];E.length&&E.forEach(S=>{m[g][S]===void 0&&(m[g][S]=!0)})}),y.done=!0,y.errors.length?y.callback(y.errors):y.callback())}),this.emit("loaded",m),this.queue=this.queue.filter(y=>!y.done)}read(e,n,r,i=0,o=this.retryTimeout,h){if(!e.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:o,callback:h});return}this.readingCalls++;const m=(g,E)=>{if(this.readingCalls--,this.waitingReads.length>0){const S=this.waitingReads.shift();this.read(S.lng,S.ns,S.fcName,S.tried,S.wait,S.callback)}if(g&&E&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,o*2,h)},o);return}h(g,E)},y=this.backend[r].bind(this.backend);if(y.length===2){try{const g=y(e,n);g&&typeof g.then=="function"?g.then(E=>m(null,E)).catch(m):m(null,g)}catch(g){m(g)}return}return y(e,n,m)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();sn(e)&&(e=this.languageUtils.toResolveHierarchy(e)),sn(n)&&(n=[n]);const o=this.queueLoad(e,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(h=>{this.loadOne(h)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(h,m)=>{h&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,h),!h&&m&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,m),this.loaded(e,h,m)})}saveMissing(e,n,r,i,o,h={},m=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const y={...h,isUpdate:o},g=this.backend.create.bind(this.backend);if(g.length<6)try{let E;g.length===5?E=g(e,n,r,i,y):E=g(e,n,r,i),E&&typeof E.then=="function"?E.then(S=>m(null,S)).catch(m):m(null,E)}catch(E){m(E)}else g(e,n,r,i,m,y)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const vA=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),sn(t[1])&&(e.defaultValue=t[1]),sn(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),bA=t=>(sn(t.ns)&&(t.ns=[t.ns]),sn(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),sn(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Yp=()=>{},NF=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Df extends _1{constructor(e={},n){if(super(),this.options=bA(e),this.services={},this.logger=to,this.modules={external:[]},NF(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(sn(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=vA();this.options={...r,...this.options,...bA(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const i=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?to.init(i(this.modules.logger),this.options):to.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=AF;const E=new fA(this.options);this.store=new uA(this.options.resources,this.options);const S=this.services;S.logger=to,S.resourceStore=this.store,S.languageUtils=E,S.pluralResolver=new xF(E,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),g&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(S.formatter=i(g),S.formatter.init&&S.formatter.init(S,this.options),this.options.interpolation.format=S.formatter.format.bind(S.formatter)),S.interpolator=new gA(this.options),S.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},S.backendConnector=new TF(i(this.modules.backend),S.resourceStore,S,this.options),S.backendConnector.on("*",(I,...R)=>{this.emit(I,...R)}),this.modules.languageDetector&&(S.languageDetector=i(this.modules.languageDetector),S.languageDetector.init&&S.languageDetector.init(S,this.options.detection,this.options)),this.modules.i18nFormat&&(S.i18nFormat=i(this.modules.i18nFormat),S.i18nFormat.init&&S.i18nFormat.init(this)),this.translator=new Ym(this.services,this.options),this.translator.on("*",(I,...R)=>{this.emit(I,...R)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Yp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=(...E)=>this.store[g](...E)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=(...E)=>(this.store[g](...E),this)});const m=ff(),y=()=>{const g=(E,S)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),m.resolve(S),n(E,S)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?y():setTimeout(y,0),m}loadResources(e,n=Yp){let r=n;const i=sn(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],h=m=>{if(!m||m==="cimode")return;this.services.languageUtils.toResolveHierarchy(m).forEach(g=>{g!=="cimode"&&o.indexOf(g)<0&&o.push(g)})};i?h(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(y=>h(y)),this.options.preload?.forEach?.(m=>h(m)),this.services.backendConnector.load(o,this.options.ns,m=>{!m&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(m)})}else r(null)}reloadResources(e,n,r){const i=ff();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Yp),this.services.backendConnector.reload(e,n,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&vN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=ff();this.emit("languageChanging",e);const i=m=>{this.language=m,this.languages=this.services.languageUtils.toResolveHierarchy(m),this.resolvedLanguage=void 0,this.setResolvedLanguage(m)},o=(m,y)=>{y?this.isLanguageChangingTo===e&&(i(y),this.translator.changeLanguage(y),this.isLanguageChangingTo=void 0,this.emit("languageChanged",y),this.logger.log("languageChanged",y)):this.isLanguageChangingTo=void 0,r.resolve((...g)=>this.t(...g)),n&&n(m,(...g)=>this.t(...g))},h=m=>{!e&&!m&&this.services.languageDetector&&(m=[]);const y=sn(m)?m:m&&m[0],g=this.store.hasLanguageSomeTranslations(y)?y:this.services.languageUtils.getBestMatchFromCodes(sn(m)?[m]:m);g&&(this.language||i(g),this.translator.language||this.translator.changeLanguage(g),this.services.languageDetector?.cacheUserLanguage?.(g)),this.loadResources(g,E=>{o(E,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(h):this.services.languageDetector.detect(h):h(e),r}getFixedT(e,n,r){const i=(o,h,...m)=>{let y;typeof h!="object"?y=this.options.overloadTranslationOptionHandler([o,h].concat(m)):y={...h},y.lng=y.lng||i.lng,y.lngs=y.lngs||i.lngs,y.ns=y.ns||i.ns,y.keyPrefix!==""&&(y.keyPrefix=y.keyPrefix||r||i.keyPrefix);const g=this.options.keySeparator||".";let E;return y.keyPrefix&&Array.isArray(o)?E=o.map(S=>(typeof S=="function"&&(S=kv(S,{...this.options,...h})),`${y.keyPrefix}${g}${S}`)):(typeof o=="function"&&(o=kv(o,{...this.options,...h})),E=y.keyPrefix?`${y.keyPrefix}${g}${o}`:o),this.t(E,y)};return sn(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const h=(m,y)=>{const g=this.services.backendConnector.state[`${m}|${y}`];return g===-1||g===0||g===2};if(n.precheck){const m=n.precheck(this,h);if(m!==void 0)return m}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||h(r,e)&&(!i||h(o,e)))}loadNamespaces(e,n){const r=ff();return this.options.ns?(sn(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=ff();sn(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(h=>i.indexOf(h)<0&&this.services.languageUtils.isSupportedCode(h));return o.length?(this.options.preload=i.concat(o),this.loadResources(h=>{r.resolve(),n&&n(h)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const o=i.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new fA(vA());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const r=new Df(e,n);return r.createInstance=Df.createInstance,r}cloneInstance(e={},n=Yp){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Df(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(m=>{o[m]=this[m]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const m=Object.keys(this.store.data).reduce((y,g)=>(y[g]={...this.store.data[g]},y[g]=Object.keys(y[g]).reduce((E,S)=>(E[S]={...y[g][S]},E),y[g]),y),{});o.store=new uA(m,i),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new gA(i)),o.translator=new Ym(o.services,i),o.translator.on("*",(m,...y)=>{o.emit(m,...y)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ds=Df.createInstance();ds.createInstance;ds.dir;ds.init;ds.loadResources;ds.reloadResources;ds.use;ds.changeLanguage;ds.getFixedT;ds.t;ds.exists;ds.setDefaultNamespace;ds.hasLoadedNamespace;ds.loadNamespaces;ds.loadLanguages;const _F=(t,e,n,r)=>{const i=[n,{code:e,...r||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Fc(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...i):console?.warn&&console.warn(...i)},wA={},wN=(t,e,n,r)=>{Fc(n)&&wA[n]||(Fc(n)&&(wA[n]=new Date),_F(t,e,n,r))},xN=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},jv=(t,e,n)=>{t.loadNamespaces(e,xN(t,n))},xA=(t,e,n,r)=>{if(Fc(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return jv(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,xN(t,r))},OF=(t,e,n={})=>!e.languages||!e.languages.length?(wN(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Fc=t=>typeof t=="string",IF=t=>typeof t=="object"&&t!==null,RF=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,MF={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},DF=t=>MF[t],LF=t=>t.replace(RF,DF);let Bv={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:LF,transDefaultProps:void 0};const kF=(t={})=>{Bv={...Bv,...t}},jF=()=>Bv;let EN;const BF=t=>{EN=t},PF=()=>EN,UF={type:"3rdParty",init(t){kF(t.options.react),BF(t)}},FF=W.createContext();class zF{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var ly={exports:{}},cy={};var EA;function HF(){if(EA)return cy;EA=1;var t=gh();function e(S,N){return S===N&&(S!==0||1/S===1/N)||S!==S&&N!==N}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,h=t.useDebugValue;function m(S,N){var I=N(),R=r({inst:{value:I,getSnapshot:N}}),D=R[0].inst,j=R[1];return o(function(){D.value=I,D.getSnapshot=N,y(D)&&j({inst:D})},[S,I,N]),i(function(){return y(D)&&j({inst:D}),S(function(){y(D)&&j({inst:D})})},[S]),h(I),I}function y(S){var N=S.getSnapshot;S=S.value;try{var I=N();return!n(S,I)}catch{return!0}}function g(S,N){return N()}var E=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:m;return cy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:E,cy}var SA;function qF(){return SA||(SA=1,ly.exports=HF()),ly.exports}var VF=qF();const GF=(t,e)=>Fc(e)?e:IF(e)&&Fc(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,KF={t:GF,ready:!1},$F=()=>()=>{},xh=(t,e={})=>{const{i18n:n}=e,{i18n:r,defaultNS:i}=W.useContext(FF)||{},o=n||r||PF();o&&!o.reportNamespaces&&(o.reportNamespaces=new zF),o||wN(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const h=W.useMemo(()=>({...jF(),...o?.options?.react,...e}),[o,e]),{useSuspense:m,keyPrefix:y}=h,g=i||o?.options?.defaultNS,E=Fc(g)?[g]:g||["translation"],S=W.useMemo(()=>E,E);o?.reportNamespaces?.addUsedNamespaces?.(S);const N=W.useRef(0),I=W.useCallback(de=>{if(!o)return $F;const{bindI18n:ze,bindI18nStore:Q}=h,fe=()=>{N.current+=1,de()};return ze&&o.on(ze,fe),Q&&o.store.on(Q,fe),()=>{ze&&ze.split(" ").forEach(he=>o.off(he,fe)),Q&&Q.split(" ").forEach(he=>o.store.off(he,fe))}},[o,h]),R=W.useRef(),D=W.useCallback(()=>{if(!o)return KF;const de=!!(o.isInitialized||o.initializedStoreOnce)&&S.every(ie=>OF(ie,o,h)),ze=e.lng||o.language,Q=N.current,fe=R.current;if(fe&&fe.ready===de&&fe.lng===ze&&fe.keyPrefix===y&&fe.revision===Q)return fe;const Ne={t:o.getFixedT(ze,h.nsMode==="fallback"?S:S[0],y),ready:de,lng:ze,keyPrefix:y,revision:Q};return R.current=Ne,Ne},[o,S,y,h,e.lng]),[j,B]=W.useState(0),{t:H,ready:V}=VF.useSyncExternalStore(I,D,D);W.useEffect(()=>{if(o&&!V&&!m){const de=()=>B(ze=>ze+1);e.lng?xA(o,e.lng,S,de):jv(o,S,de)}},[o,e.lng,S,V,m,j]);const se=o||{},ee=W.useRef(null),J=W.useRef(),F=de=>{const ze=Object.getOwnPropertyDescriptors(de);ze.__original&&delete ze.__original;const Q=Object.create(Object.getPrototypeOf(de),ze);if(!Object.prototype.hasOwnProperty.call(Q,"__original"))try{Object.defineProperty(Q,"__original",{value:de,writable:!1,enumerable:!1,configurable:!1})}catch{}return Q},ce=W.useMemo(()=>{const de=se,ze=de?.language;let Q=de;de&&(ee.current&&ee.current.__original===de?J.current!==ze?(Q=F(de),ee.current=Q,J.current=ze):Q=ee.current:(Q=F(de),ee.current=Q,J.current=ze));const fe=[H,Q,V];return fe.t=H,fe.i18n=Q,fe.ready=V,fe},[H,se,V,se.resolvedLanguage,se.language,se.languages]);if(o&&m&&!V)throw new Promise(de=>{const ze=()=>de();e.lng?xA(o,e.lng,S,ze):jv(o,S,ze)});return ce};function YF(){const t=Ti(),e=ho(),{t:n}=xh(),r=[{icon:av,label:n("nav.home"),path:"/dashboard"},{icon:p1,label:n("nav.sync"),path:"/sync"},{icon:E9,label:n("nav.settings"),path:"/settings"}],i=e.pathname==="/",o=e.pathname.includes("/play/");return T.jsx("div",{className:"min-h-screen bg-transparent text-foreground font-sans selection:bg-primary/30 flex justify-center aurora-bg",children:T.jsxs("div",{className:`w-full max-w-md h-screen relative shadow-2xl bg-black/50 glass-panel flex flex-col border-x border-white/5 overflow-hidden ${o?"border-none bg-black/80":""}`,children:[T.jsx("main",{className:"flex-1 overflow-y-auto no-scrollbar",children:T.jsx(PM,{})}),T.jsx(lF,{}),!i&&!e.pathname.includes("/play/")&&T.jsx("nav",{className:"h-16 bg-slate-900/90 backdrop-blur-lg border-t border-white/5 grid grid-cols-3 shrink-0 z-40",children:r.map(h=>{const m=e.pathname===h.path,y=h.icon;return T.jsxs("button",{onClick:()=>t(h.path),className:WS("flex flex-col items-center justify-center gap-1 transition-all active:scale-95",m?"text-primary-400":"text-slate-500 hover:text-slate-300"),children:[T.jsx(y,{className:WS("w-6 h-6",m&&"fill-current/20")}),T.jsx("span",{className:"text-[10px] font-medium",children:h.label})]},h.label)})})]})})}const XF="/GramShiksha/assets/logo-vWW33kSL.png";function WF({className:t="w-24 h-24"}){return T.jsx("div",{className:`relative flex items-center justify-center ${t}`,children:T.jsx("img",{src:XF,alt:"GramSiksha Logo",className:"w-full h-full object-contain mix-blend-screen filter grayscale brightness-200 sepia hue-rotate-[160deg] saturate-[500%] contrast-125 drop-shadow-[0_0_15px_rgba(6,182,212,0.6)]"})})}const aw=W.createContext({});function ow(t){const e=W.useRef(null);return e.current===null&&(e.current=t()),e.current}const lw=typeof window<"u",SN=lw?W.useLayoutEffect:W.useEffect,O1=W.createContext(null);function cw(t,e){t.indexOf(e)===-1&&t.push(e)}function uw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ko=(t,e,n)=>n>e?e:n<t?t:n;let hw=()=>{};const $o={},AN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function CN(t){return typeof t=="object"&&t!==null}const TN=t=>/^0[^.\s]+$/u.test(t);function fw(t){let e;return()=>(e===void 0&&(e=t()),e)}const ba=t=>t,QF=(t,e)=>n=>e(t(n)),Ld=(...t)=>t.reduce(QF),rd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class dw{constructor(){this.subscriptions=[]}add(e){return cw(this.subscriptions,e),()=>uw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const h=this.subscriptions[o];h&&h(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ro=t=>t*1e3,ga=t=>t/1e3;function NN(t,e){return e?t*(1e3/e):0}const _N=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ZF=1e-7,JF=12;function ez(t,e,n,r,i){let o,h,m=0;do h=e+(n-e)/2,o=_N(h,r,i)-t,o>0?n=h:e=h;while(Math.abs(o)>ZF&&++m<JF);return h}function kd(t,e,n,r){if(t===e&&n===r)return ba;const i=o=>ez(o,0,1,t,n);return o=>o===0||o===1?o:_N(i(o),e,r)}const ON=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IN=t=>e=>1-t(1-e),RN=kd(.33,1.53,.69,.99),pw=IN(RN),MN=ON(pw),DN=t=>(t*=2)<1?.5*pw(t):.5*(2-Math.pow(2,-10*(t-1))),mw=t=>1-Math.sin(Math.acos(t)),LN=IN(mw),kN=ON(mw),tz=kd(.42,0,1,1),nz=kd(0,0,.58,1),jN=kd(.42,0,.58,1),rz=t=>Array.isArray(t)&&typeof t[0]!="number",BN=t=>Array.isArray(t)&&typeof t[0]=="number",iz={linear:ba,easeIn:tz,easeInOut:jN,easeOut:nz,circIn:mw,circInOut:kN,circOut:LN,backIn:pw,backInOut:MN,backOut:RN,anticipate:DN},sz=t=>typeof t=="string",AA=t=>{if(BN(t)){hw(t.length===4);const[e,n,r,i]=t;return kd(e,n,r,i)}else if(sz(t))return iz[t];return t},Xp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function az(t,e){let n=new Set,r=new Set,i=!1,o=!1;const h=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1};function y(E){h.has(E)&&(g.schedule(E),t()),E(m)}const g={schedule:(E,S=!1,N=!1)=>{const R=N&&i?n:r;return S&&h.add(E),R.has(E)||R.add(E),E},cancel:E=>{r.delete(E),h.delete(E)},process:E=>{if(m=E,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(y),n.clear(),i=!1,o&&(o=!1,g.process(E))}};return g}const oz=40;function PN(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,h=Xp.reduce((V,se)=>(V[se]=az(o),V),{}),{setup:m,read:y,resolveKeyframes:g,preUpdate:E,update:S,preRender:N,render:I,postRender:R}=h,D=()=>{const V=$o.useManualTiming?i.timestamp:performance.now();n=!1,$o.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(V-i.timestamp,oz),1)),i.timestamp=V,i.isProcessing=!0,m.process(i),y.process(i),g.process(i),E.process(i),S.process(i),N.process(i),I.process(i),R.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(D))},j=()=>{n=!0,r=!0,i.isProcessing||t(D)};return{schedule:Xp.reduce((V,se)=>{const ee=h[se];return V[se]=(J,F=!1,ce=!1)=>(n||j(),ee.schedule(J,F,ce)),V},{}),cancel:V=>{for(let se=0;se<Xp.length;se++)h[Xp[se]].cancel(V)},state:i,steps:h}}const{schedule:Fr,cancel:Yl,state:Gi,steps:uy}=PN(typeof requestAnimationFrame<"u"?requestAnimationFrame:ba,!0);let Em;function lz(){Em=void 0}const Cs={now:()=>(Em===void 0&&Cs.set(Gi.isProcessing||$o.useManualTiming?Gi.timestamp:performance.now()),Em),set:t=>{Em=t,queueMicrotask(lz)}},UN=t=>e=>typeof e=="string"&&e.startsWith(t),FN=UN("--"),cz=UN("var(--"),gw=t=>cz(t)?uz.test(t.split("/*")[0].trim()):!1,uz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Eh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},id={...Eh,transform:t=>Ko(0,1,t)},Wp={...Eh,default:1},Lf=t=>Math.round(t*1e5)/1e5,yw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hz(t){return t==null}const fz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vw=(t,e)=>n=>!!(typeof n=="string"&&fz.test(n)&&n.startsWith(t)||e&&!hz(n)&&Object.prototype.hasOwnProperty.call(n,e)),zN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,h,m]=r.match(yw);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(h),alpha:m!==void 0?parseFloat(m):1}},dz=t=>Ko(0,255,t),hy={...Eh,transform:t=>Math.round(dz(t))},Cc={test:vw("rgb","red"),parse:zN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+hy.transform(t)+", "+hy.transform(e)+", "+hy.transform(n)+", "+Lf(id.transform(r))+")"};function pz(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Pv={test:vw("#"),parse:pz,transform:Cc.transform},jd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rl=jd("deg"),io=jd("%"),Zt=jd("px"),mz=jd("vh"),gz=jd("vw"),CA={...io,parse:t=>io.parse(t)/100,transform:t=>io.transform(t*100)},Uu={test:vw("hsl","hue"),parse:zN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+io.transform(Lf(e))+", "+io.transform(Lf(n))+", "+Lf(id.transform(r))+")"},Ai={test:t=>Cc.test(t)||Pv.test(t)||Uu.test(t),parse:t=>Cc.test(t)?Cc.parse(t):Uu.test(t)?Uu.parse(t):Pv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Cc.transform(t):Uu.transform(t),getAnimatableNone:t=>{const e=Ai.parse(t);return e.alpha=0,Ai.transform(e)}},yz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vz(t){return isNaN(t)&&typeof t=="string"&&(t.match(yw)?.length||0)+(t.match(yz)?.length||0)>0}const HN="number",qN="color",bz="var",wz="var(",TA="${}",xz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function sd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const m=e.replace(xz,y=>(Ai.test(y)?(r.color.push(o),i.push(qN),n.push(Ai.parse(y))):y.startsWith(wz)?(r.var.push(o),i.push(bz),n.push(y)):(r.number.push(o),i.push(HN),n.push(parseFloat(y))),++o,TA)).split(TA);return{values:n,split:m,indexes:r,types:i}}function VN(t){return sd(t).values}function GN(t){const{split:e,types:n}=sd(t),r=e.length;return i=>{let o="";for(let h=0;h<r;h++)if(o+=e[h],i[h]!==void 0){const m=n[h];m===HN?o+=Lf(i[h]):m===qN?o+=Ai.transform(i[h]):o+=i[h]}return o}}const Ez=t=>typeof t=="number"?0:Ai.test(t)?Ai.getAnimatableNone(t):t;function Sz(t){const e=VN(t);return GN(t)(e.map(Ez))}const Xl={test:vz,parse:VN,createTransformer:GN,getAnimatableNone:Sz};function fy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Az({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,h=0;if(!e)i=o=h=n;else{const m=n<.5?n*(1+e):n+e-n*e,y=2*n-m;i=fy(y,m,t+1/3),o=fy(y,m,t),h=fy(y,m,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(h*255),alpha:r}}function Xm(t,e){return n=>n>0?e:t}const $r=(t,e,n)=>t+(e-t)*n,dy=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Cz=[Pv,Cc,Uu],Tz=t=>Cz.find(e=>e.test(t));function NA(t){const e=Tz(t);if(!e)return!1;let n=e.parse(t);return e===Uu&&(n=Az(n)),n}const _A=(t,e)=>{const n=NA(t),r=NA(e);if(!n||!r)return Xm(t,e);const i={...n};return o=>(i.red=dy(n.red,r.red,o),i.green=dy(n.green,r.green,o),i.blue=dy(n.blue,r.blue,o),i.alpha=$r(n.alpha,r.alpha,o),Cc.transform(i))},Uv=new Set(["none","hidden"]);function Nz(t,e){return Uv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function _z(t,e){return n=>$r(t,e,n)}function bw(t){return typeof t=="number"?_z:typeof t=="string"?gw(t)?Xm:Ai.test(t)?_A:Rz:Array.isArray(t)?KN:typeof t=="object"?Ai.test(t)?_A:Oz:Xm}function KN(t,e){const n=[...t],r=n.length,i=t.map((o,h)=>bw(o)(o,e[h]));return o=>{for(let h=0;h<r;h++)n[h]=i[h](o);return n}}function Oz(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=bw(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function Iz(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],h=t.indexes[o][r[o]],m=t.values[h]??0;n[i]=m,r[o]++}return n}const Rz=(t,e)=>{const n=Xl.createTransformer(e),r=sd(t),i=sd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Uv.has(t)&&!i.values.length||Uv.has(e)&&!r.values.length?Nz(t,e):Ld(KN(Iz(r,i),i.values),n):Xm(t,e)};function $N(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$r(t,e,n):bw(t)(t,e)}const Mz=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Fr.update(e,n),stop:()=>Yl(e),now:()=>Gi.isProcessing?Gi.timestamp:Cs.now()}},YN=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Wm=2e4;function ww(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Wm;)e+=n,r=t.next(e);return e>=Wm?1/0:e}function Dz(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(ww(r),Wm);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:ga(i)}}const Lz=5;function XN(t,e,n){const r=Math.max(e-Lz,0);return NN(n-t(r),e-r)}const ni={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},py=.001;function kz({duration:t=ni.duration,bounce:e=ni.bounce,velocity:n=ni.velocity,mass:r=ni.mass}){let i,o,h=1-e;h=Ko(ni.minDamping,ni.maxDamping,h),t=Ko(ni.minDuration,ni.maxDuration,ga(t)),h<1?(i=g=>{const E=g*h,S=E*t,N=E-n,I=Fv(g,h),R=Math.exp(-S);return py-N/I*R},o=g=>{const S=g*h*t,N=S*n+n,I=Math.pow(h,2)*Math.pow(g,2)*t,R=Math.exp(-S),D=Fv(Math.pow(g,2),h);return(-i(g)+py>0?-1:1)*((N-I)*R)/D}):(i=g=>{const E=Math.exp(-g*t),S=(g-n)*t+1;return-py+E*S},o=g=>{const E=Math.exp(-g*t),S=(n-g)*(t*t);return E*S});const m=5/t,y=Bz(i,o,m);if(t=ro(t),isNaN(y))return{stiffness:ni.stiffness,damping:ni.damping,duration:t};{const g=Math.pow(y,2)*r;return{stiffness:g,damping:h*2*Math.sqrt(r*g),duration:t}}}const jz=12;function Bz(t,e,n){let r=n;for(let i=1;i<jz;i++)r=r-t(r)/e(r);return r}function Fv(t,e){return t*Math.sqrt(1-e*e)}const Pz=["duration","bounce"],Uz=["stiffness","damping","mass"];function OA(t,e){return e.some(n=>t[n]!==void 0)}function Fz(t){let e={velocity:ni.velocity,stiffness:ni.stiffness,damping:ni.damping,mass:ni.mass,isResolvedFromDuration:!1,...t};if(!OA(t,Uz)&&OA(t,Pz))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*Ko(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ni.mass,stiffness:i,damping:o}}else{const n=kz(t);e={...e,...n,mass:ni.mass},e.isResolvedFromDuration=!0}return e}function Qm(t=ni.visualDuration,e=ni.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],h=n.keyframes[n.keyframes.length-1],m={done:!1,value:o},{stiffness:y,damping:g,mass:E,duration:S,velocity:N,isResolvedFromDuration:I}=Fz({...n,velocity:-ga(n.velocity||0)}),R=N||0,D=g/(2*Math.sqrt(y*E)),j=h-o,B=ga(Math.sqrt(y/E)),H=Math.abs(j)<5;r||(r=H?ni.restSpeed.granular:ni.restSpeed.default),i||(i=H?ni.restDelta.granular:ni.restDelta.default);let V;if(D<1){const ee=Fv(B,D);V=J=>{const F=Math.exp(-D*B*J);return h-F*((R+D*B*j)/ee*Math.sin(ee*J)+j*Math.cos(ee*J))}}else if(D===1)V=ee=>h-Math.exp(-B*ee)*(j+(R+B*j)*ee);else{const ee=B*Math.sqrt(D*D-1);V=J=>{const F=Math.exp(-D*B*J),ce=Math.min(ee*J,300);return h-F*((R+D*B*j)*Math.sinh(ce)+ee*j*Math.cosh(ce))/ee}}const se={calculatedDuration:I&&S||null,next:ee=>{const J=V(ee);if(I)m.done=ee>=S;else{let F=ee===0?R:0;D<1&&(F=ee===0?ro(R):XN(V,ee,J));const ce=Math.abs(F)<=r,de=Math.abs(h-J)<=i;m.done=ce&&de}return m.value=m.done?h:J,m},toString:()=>{const ee=Math.min(ww(se),Wm),J=YN(F=>se.next(ee*F).value,ee,30);return ee+"ms "+J},toTransition:()=>{}};return se}Qm.applyToOptions=t=>{const e=Dz(t,100,Qm);return t.ease=e.ease,t.duration=ro(e.duration),t.type="keyframes",t};function zv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:h,min:m,max:y,restDelta:g=.5,restSpeed:E}){const S=t[0],N={done:!1,value:S},I=ce=>m!==void 0&&ce<m||y!==void 0&&ce>y,R=ce=>m===void 0?y:y===void 0||Math.abs(m-ce)<Math.abs(y-ce)?m:y;let D=n*e;const j=S+D,B=h===void 0?j:h(j);B!==j&&(D=B-S);const H=ce=>-D*Math.exp(-ce/r),V=ce=>B+H(ce),se=ce=>{const de=H(ce),ze=V(ce);N.done=Math.abs(de)<=g,N.value=N.done?B:ze};let ee,J;const F=ce=>{I(N.value)&&(ee=ce,J=Qm({keyframes:[N.value,R(N.value)],velocity:XN(V,ce,N.value),damping:i,stiffness:o,restDelta:g,restSpeed:E}))};return F(0),{calculatedDuration:null,next:ce=>{let de=!1;return!J&&ee===void 0&&(de=!0,se(ce),F(ce)),ee!==void 0&&ce>=ee?J.next(ce-ee):(!de&&se(ce),N)}}}function zz(t,e,n){const r=[],i=n||$o.mix||$N,o=t.length-1;for(let h=0;h<o;h++){let m=i(t[h],t[h+1]);if(e){const y=Array.isArray(e)?e[h]||ba:e;m=Ld(y,m)}r.push(m)}return r}function Hz(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(hw(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const h=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const m=zz(e,r,i),y=m.length,g=E=>{if(h&&E<t[0])return e[0];let S=0;if(y>1)for(;S<t.length-2&&!(E<t[S+1]);S++);const N=rd(t[S],t[S+1],E);return m[S](N)};return n?E=>g(Ko(t[0],t[o-1],E)):g}function qz(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=rd(0,e,r);t.push($r(n,1,i))}}function Vz(t){const e=[0];return qz(e,t.length-1),e}function Gz(t,e){return t.map(n=>n*e)}function Kz(t,e){return t.map(()=>e||jN).splice(0,t.length-1)}function kf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=rz(r)?r.map(AA):AA(r),o={done:!1,value:e[0]},h=Gz(n&&n.length===e.length?n:Vz(e),t),m=Hz(h,e,{ease:Array.isArray(i)?i:Kz(e,i)});return{calculatedDuration:t,next:y=>(o.value=m(y),o.done=y>=t,o)}}const $z=t=>t!==null;function xw(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter($z),m=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!m||r===void 0?o[m]:r}const Yz={decay:zv,inertia:zv,tween:kf,keyframes:kf,spring:Qm};function WN(t){typeof t.type=="string"&&(t.type=Yz[t.type])}class Ew{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Xz=t=>t/100;class Sw extends Ew{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Cs.now()&&this.tick(Cs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;WN(e);const{type:n=kf,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:h=0}=e;let{keyframes:m}=e;const y=n||kf;y!==kf&&typeof m[0]!="number"&&(this.mixKeyframes=Ld(Xz,$N(m[0],m[1])),m=[0,100]);const g=y({...e,keyframes:m});o==="mirror"&&(this.mirroredGenerator=y({...e,keyframes:[...m].reverse(),velocity:-h})),g.calculatedDuration===null&&(g.calculatedDuration=ww(g));const{calculatedDuration:E}=g;this.calculatedDuration=E,this.resolvedDuration=E+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=g}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:h,resolvedDuration:m,calculatedDuration:y}=this;if(this.startTime===null)return r.next(0);const{delay:g=0,keyframes:E,repeat:S,repeatType:N,repeatDelay:I,type:R,onUpdate:D,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const B=this.currentTime-g*(this.playbackSpeed>=0?1:-1),H=this.playbackSpeed>=0?B<0:B>i;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let V=this.currentTime,se=r;if(S){const ce=Math.min(this.currentTime,i)/m;let de=Math.floor(ce),ze=ce%1;!ze&&ce>=1&&(ze=1),ze===1&&de--,de=Math.min(de,S+1),de%2&&(N==="reverse"?(ze=1-ze,I&&(ze-=I/m)):N==="mirror"&&(se=h)),V=Ko(0,1,ze)*m}const ee=H?{done:!1,value:E[0]}:se.next(V);o&&(ee.value=o(ee.value));let{done:J}=ee;!H&&y!==null&&(J=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return F&&R!==zv&&(ee.value=xw(E,this.options,j,this.speed)),D&&D(ee.value),F&&this.finish(),ee}then(e,n){return this.finished.then(e,n)}get duration(){return ga(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ga(e)}get time(){return ga(this.currentTime)}set time(e){e=ro(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Cs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ga(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Mz,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Cs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Wz(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Tc=t=>t*180/Math.PI,Hv=t=>{const e=Tc(Math.atan2(t[1],t[0]));return qv(e)},Qz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Hv,rotateZ:Hv,skewX:t=>Tc(Math.atan(t[1])),skewY:t=>Tc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},qv=t=>(t=t%360,t<0&&(t+=360),t),IA=Hv,RA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),MA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Zz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:RA,scaleY:MA,scale:t=>(RA(t)+MA(t))/2,rotateX:t=>qv(Tc(Math.atan2(t[6],t[5]))),rotateY:t=>qv(Tc(Math.atan2(-t[2],t[0]))),rotateZ:IA,rotate:IA,skewX:t=>Tc(Math.atan(t[4])),skewY:t=>Tc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Vv(t){return t.includes("scale")?1:0}function Gv(t,e){if(!t||t==="none")return Vv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Zz,i=n;else{const m=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Qz,i=m}if(!i)return Vv(e);const o=r[e],h=i[1].split(",").map(eH);return typeof o=="function"?o(h):h[o]}const Jz=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Gv(n,e)};function eH(t){return parseFloat(t.trim())}const Sh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ah=new Set(Sh),DA=t=>t===Eh||t===Zt,tH=new Set(["x","y","z"]),nH=Sh.filter(t=>!tH.has(t));function rH(t){const e=[];return nH.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Rc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Gv(e,"x"),y:(t,{transform:e})=>Gv(e,"y")};Rc.translateX=Rc.x;Rc.translateY=Rc.y;const Mc=new Set;let Kv=!1,$v=!1,Yv=!1;function QN(){if($v){const t=Array.from(Mc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=rH(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,h])=>{r.getValue(o)?.set(h)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}$v=!1,Kv=!1,Mc.forEach(t=>t.complete(Yv)),Mc.clear()}function ZN(){Mc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&($v=!0)})}function iH(){Yv=!0,ZN(),QN(),Yv=!1}class Aw{constructor(e,n,r,i,o,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(Mc.add(this),Kv||(Kv=!0,Fr.read(ZN),Fr.resolveKeyframes(QN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i?.get(),h=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const m=r.readValue(n,h);m!=null&&(e[0]=m)}e[0]===void 0&&(e[0]=h),i&&o===void 0&&i.set(e[0])}Wz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Mc.delete(this)}cancel(){this.state==="scheduled"&&(Mc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sH=t=>t.startsWith("--");function aH(t,e,n){sH(e)?t.style.setProperty(e,n):t.style[e]=n}const oH=fw(()=>window.ScrollTimeline!==void 0),lH={};function cH(t,e){const n=fw(t);return()=>lH[e]??n()}const JN=cH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,LA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wf([0,.65,.55,1]),circOut:wf([.55,0,1,.45]),backIn:wf([.31,.01,.66,-.59]),backOut:wf([.33,1.53,.69,.99])};function e_(t,e){if(t)return typeof t=="function"?JN()?YN(t,e):"ease-out":BN(t)?wf(t):Array.isArray(t)?t.map(n=>e_(n,e)||LA.easeOut):LA[t]}function uH(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:h="loop",ease:m="easeOut",times:y}={},g=void 0){const E={[e]:n};y&&(E.offset=y);const S=e_(m,i);Array.isArray(S)&&(E.easing=S);const N={delay:r,duration:i,easing:Array.isArray(S)?"linear":S,fill:"both",iterations:o+1,direction:h==="reverse"?"alternate":"normal"};return g&&(N.pseudoElement=g),t.animate(E,N)}function t_(t){return typeof t=="function"&&"applyToOptions"in t}function hH({type:t,...e}){return t_(t)&&JN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class fH extends Ew{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:h=!1,finalKeyframe:m,onComplete:y}=e;this.isPseudoElement=!!o,this.allowFlatten=h,this.options=e,hw(typeof e.type!="string");const g=hH(e);this.animation=uH(n,r,i,g,o),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const E=xw(i,this.options,m,this.speed);this.updateMotionValue?this.updateMotionValue(E):aH(n,r,E),this.animation.cancel()}y?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ga(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ga(e)}get time(){return ga(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ro(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&oH()?(this.animation.timeline=e,ba):n(this)}}const n_={anticipate:DN,backInOut:MN,circInOut:kN};function dH(t){return t in n_}function pH(t){typeof t.ease=="string"&&dH(t.ease)&&(t.ease=n_[t.ease])}const kA=10;class mH extends fH{constructor(e){pH(e),WN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...h}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const m=new Sw({...h,autoplay:!1}),y=ro(this.finishedTime??this.time);n.setWithVelocity(m.sample(y-kA).value,m.sample(y).value,kA),m.stop()}}const jA=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xl.test(t)||t==="0")&&!t.startsWith("url("));function gH(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yH(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],h=jA(i,e),m=jA(o,e);return!h||!m?!1:gH(t)||(n==="spring"||t_(n))&&r}function Xv(t){t.duration=0,t.type="keyframes"}const vH=new Set(["opacity","clipPath","filter","transform"]),bH=fw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wH(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:h}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:y,transformTemplate:g}=e.owner.getProps();return bH()&&n&&vH.has(n)&&(n!=="transform"||!g)&&!y&&!r&&i!=="mirror"&&o!==0&&h!=="inertia"}const xH=40;class EH extends Ew{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:h="loop",keyframes:m,name:y,motionValue:g,element:E,...S}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Cs.now();const N={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:h,name:y,motionValue:g,element:E,...S},I=E?.KeyframeResolver||Aw;this.keyframeResolver=new I(m,(R,D,j)=>this.onKeyframesResolved(R,D,N,!j),y,g,E),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:o,type:h,velocity:m,delay:y,isHandoff:g,onUpdate:E}=r;this.resolvedAt=Cs.now(),yH(e,o,h,m)||(($o.instantAnimations||!y)&&E?.(xw(e,r,n)),e[0]=e[e.length-1],Xv(r),r.repeat=0);const N={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>xH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},I=!g&&wH(N)?new mH({...N,element:N.motionValue.owner.current}):new Sw(N);I.finished.then(()=>this.notifyFinished()).catch(ba),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),iH()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const SH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AH(t){const e=SH.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function r_(t,e,n=1){const[r,i]=AH(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const h=o.trim();return AN(h)?parseFloat(h):h}return gw(i)?r_(i,e,n+1):i}function Cw(t,e){return t?.[e]??t?.default??t}const i_=new Set(["width","height","top","left","right","bottom",...Sh]),CH={test:t=>t==="auto",parse:t=>t},s_=t=>e=>e.test(t),a_=[Eh,Zt,io,Rl,gz,mz,CH],BA=t=>a_.find(s_(t));function TH(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||TN(t):!0}const NH=new Set(["brightness","contrast","saturate","opacity"]);function _H(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(yw)||[];if(!r)return t;const i=n.replace(r,"");let o=NH.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const OH=/\b([a-z-]*)\(.*?\)/gu,Wv={...Xl,getAnimatableNone:t=>{const e=t.match(OH);return e?e.map(_H).join(" "):t}},PA={...Eh,transform:Math.round},IH={rotate:Rl,rotateX:Rl,rotateY:Rl,rotateZ:Rl,scale:Wp,scaleX:Wp,scaleY:Wp,scaleZ:Wp,skew:Rl,skewX:Rl,skewY:Rl,distance:Zt,translateX:Zt,translateY:Zt,translateZ:Zt,x:Zt,y:Zt,z:Zt,perspective:Zt,transformPerspective:Zt,opacity:id,originX:CA,originY:CA,originZ:Zt},Tw={borderWidth:Zt,borderTopWidth:Zt,borderRightWidth:Zt,borderBottomWidth:Zt,borderLeftWidth:Zt,borderRadius:Zt,radius:Zt,borderTopLeftRadius:Zt,borderTopRightRadius:Zt,borderBottomRightRadius:Zt,borderBottomLeftRadius:Zt,width:Zt,maxWidth:Zt,height:Zt,maxHeight:Zt,top:Zt,right:Zt,bottom:Zt,left:Zt,padding:Zt,paddingTop:Zt,paddingRight:Zt,paddingBottom:Zt,paddingLeft:Zt,margin:Zt,marginTop:Zt,marginRight:Zt,marginBottom:Zt,marginLeft:Zt,backgroundPositionX:Zt,backgroundPositionY:Zt,...IH,zIndex:PA,fillOpacity:id,strokeOpacity:id,numOctaves:PA},RH={...Tw,color:Ai,backgroundColor:Ai,outlineColor:Ai,fill:Ai,stroke:Ai,borderColor:Ai,borderTopColor:Ai,borderRightColor:Ai,borderBottomColor:Ai,borderLeftColor:Ai,filter:Wv,WebkitFilter:Wv},o_=t=>RH[t];function l_(t,e){let n=o_(t);return n!==Wv&&(n=Xl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const MH=new Set(["auto","none","0"]);function DH(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!MH.has(o)&&sd(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=l_(n,i)}class LH extends Aw{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let y=0;y<e.length;y++){let g=e[y];if(typeof g=="string"&&(g=g.trim(),gw(g))){const E=r_(g,n.current);E!==void 0&&(e[y]=E),y===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!i_.has(r)||e.length!==2)return;const[i,o]=e,h=BA(i),m=BA(o);if(h!==m)if(DA(h)&&DA(m))for(let y=0;y<e.length;y++){const g=e[y];typeof g=="string"&&(e[y]=parseFloat(g))}else Rc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||TH(e[i]))&&r.push(i);r.length&&DH(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,h=r[o];r[o]=Rc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),this.removedTransforms?.length&&this.removedTransforms.forEach(([m,y])=>{e.getValue(m).set(y)}),this.resolveNoneKeyframes()}}function kH(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const c_=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function u_(t){return CN(t)&&"offsetHeight"in t}const UA=30,jH=t=>!isNaN(parseFloat(t));class BH{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Cs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Cs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jH(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new dw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Fr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Cs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>UA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,UA);return NN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fh(t,e){return new BH(t,e)}const{schedule:Nw}=PN(queueMicrotask,!1),Ma={x:!1,y:!1};function h_(){return Ma.x||Ma.y}function PH(t){return t==="x"||t==="y"?Ma[t]?null:(Ma[t]=!0,()=>{Ma[t]=!1}):Ma.x||Ma.y?null:(Ma.x=Ma.y=!0,()=>{Ma.x=Ma.y=!1})}function f_(t,e){const n=kH(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function FA(t){return!(t.pointerType==="touch"||h_())}function UH(t,e,n={}){const[r,i,o]=f_(t,n),h=m=>{if(!FA(m))return;const{target:y}=m,g=e(y,m);if(typeof g!="function"||!y)return;const E=S=>{FA(S)&&(g(S),y.removeEventListener("pointerleave",E))};y.addEventListener("pointerleave",E,i)};return r.forEach(m=>{m.addEventListener("pointerenter",h,i)}),o}const d_=(t,e)=>e?t===e?!0:d_(t,e.parentElement):!1,_w=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,FH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zH(t){return FH.has(t.tagName)||t.tabIndex!==-1}const Sm=new WeakSet;function zA(t){return e=>{e.key==="Enter"&&t(e)}}function my(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const HH=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=zA(()=>{if(Sm.has(n))return;my(n,"down");const i=zA(()=>{my(n,"up")}),o=()=>my(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function HA(t){return _w(t)&&!h_()}function qH(t,e,n={}){const[r,i,o]=f_(t,n),h=m=>{const y=m.currentTarget;if(!HA(m))return;Sm.add(y);const g=e(y,m),E=(I,R)=>{window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",N),Sm.has(y)&&Sm.delete(y),HA(I)&&typeof g=="function"&&g(I,{success:R})},S=I=>{E(I,y===window||y===document||n.useGlobalTarget||d_(y,I.target))},N=I=>{E(I,!1)};window.addEventListener("pointerup",S,i),window.addEventListener("pointercancel",N,i)};return r.forEach(m=>{(n.useGlobalTarget?window:m).addEventListener("pointerdown",h,i),u_(m)&&(m.addEventListener("focus",g=>HH(g,i)),!zH(m)&&!m.hasAttribute("tabindex")&&(m.tabIndex=0))}),o}function p_(t){return CN(t)&&"ownerSVGElement"in t}function VH(t){return p_(t)&&t.tagName==="svg"}const es=t=>!!(t&&t.getVelocity),GH=[...a_,Ai,Xl],KH=t=>GH.find(s_(t)),Ow=W.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function qA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $H(...t){return e=>{let n=!1;const r=t.map(i=>{const o=qA(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():qA(t[i],null)}}}}function YH(...t){return W.useCallback($H(...t),t)}class XH extends W.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=u_(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function WH({children:t,isPresent:e,anchorX:n,root:r}){const i=W.useId(),o=W.useRef(null),h=W.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=W.useContext(Ow),y=YH(o,t?.ref);return W.useInsertionEffect(()=>{const{width:g,height:E,top:S,left:N,right:I}=h.current;if(e||!o.current||!g||!E)return;const R=n==="left"?`left: ${N}`:`right: ${I}`;o.current.dataset.motionPopId=i;const D=document.createElement("style");m&&(D.nonce=m);const j=r??document.head;return j.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${E}px !important;
            ${R}px !important;
            top: ${S}px !important;
          }
        `),()=>{j.contains(D)&&j.removeChild(D)}},[e]),T.jsx(XH,{isPresent:e,childRef:o,sizeRef:h,children:W.cloneElement(t,{ref:y})})}const QH=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:h,anchorX:m,root:y})=>{const g=ow(ZH),E=W.useId();let S=!0,N=W.useMemo(()=>(S=!1,{id:E,initial:e,isPresent:n,custom:i,onExitComplete:I=>{g.set(I,!0);for(const R of g.values())if(!R)return;r&&r()},register:I=>(g.set(I,!1),()=>g.delete(I))}),[n,g,r]);return o&&S&&(N={...N}),W.useMemo(()=>{g.forEach((I,R)=>g.set(R,!1))},[n]),W.useEffect(()=>{!n&&!g.size&&r&&r()},[n]),h==="popLayout"&&(t=T.jsx(WH,{isPresent:n,anchorX:m,root:y,children:t})),T.jsx(O1.Provider,{value:N,children:t})};function ZH(){return new Map}function m_(t=!0){const e=W.useContext(O1);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=W.useId();W.useEffect(()=>{if(t)return i(o)},[t]);const h=W.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,h]:[!0]}const Qp=t=>t.key||"";function VA(t){const e=[];return W.Children.forEach(t,n=>{W.isValidElement(n)&&e.push(n)}),e}const co=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:h=!1,anchorX:m="left",root:y})=>{const[g,E]=m_(h),S=W.useMemo(()=>VA(t),[t]),N=h&&!g?[]:S.map(Qp),I=W.useRef(!0),R=W.useRef(S),D=ow(()=>new Map),[j,B]=W.useState(S),[H,V]=W.useState(S);SN(()=>{I.current=!1,R.current=S;for(let J=0;J<H.length;J++){const F=Qp(H[J]);N.includes(F)?D.delete(F):D.get(F)!==!0&&D.set(F,!1)}},[H,N.length,N.join("-")]);const se=[];if(S!==j){let J=[...S];for(let F=0;F<H.length;F++){const ce=H[F],de=Qp(ce);N.includes(de)||(J.splice(F,0,ce),se.push(ce))}return o==="wait"&&se.length&&(J=se),V(VA(J)),B(S),null}const{forceRender:ee}=W.useContext(aw);return T.jsx(T.Fragment,{children:H.map(J=>{const F=Qp(J),ce=h&&!g?!1:S===H||N.includes(F),de=()=>{if(D.has(F))D.set(F,!0);else return;let ze=!0;D.forEach(Q=>{Q||(ze=!1)}),ze&&(ee?.(),V(R.current),h&&E?.(),r&&r())};return T.jsx(QH,{isPresent:ce,initial:!I.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:y,onExitComplete:ce?void 0:de,anchorX:m,children:J},F)})})},g_=W.createContext({strict:!1}),GA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dh={};for(const t in GA)dh[t]={isEnabled:e=>GA[t].some(n=>!!e[n])};function JH(t){for(const e in t)dh[e]={...dh[e],...t[e]}}const eq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||eq.has(t)}let y_=t=>!Zm(t);function tq(t){typeof t=="function"&&(y_=e=>e.startsWith("on")?!Zm(e):t(e))}try{tq(require("@emotion/is-prop-valid").default)}catch{}function nq(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(y_(i)||n===!0&&Zm(i)||!e&&!Zm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const I1=W.createContext({});function R1(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ad(t){return typeof t=="string"||Array.isArray(t)}const Iw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Rw=["initial",...Iw];function M1(t){return R1(t.animate)||Rw.some(e=>ad(t[e]))}function v_(t){return!!(M1(t)||t.variants)}function rq(t,e){if(M1(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ad(n)?n:void 0,animate:ad(r)?r:void 0}}return t.inherit!==!1?e:{}}function iq(t){const{initial:e,animate:n}=rq(t,W.useContext(I1));return W.useMemo(()=>({initial:e,animate:n}),[KA(e),KA(n)])}function KA(t){return Array.isArray(t)?t.join(" "):t}function $A(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const df={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Zt.test(t))t=parseFloat(t);else return t;const n=$A(t,e.target.x),r=$A(t,e.target.y);return`${n}% ${r}%`}},sq={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Xl.parse(t);if(i.length>5)return r;const o=Xl.createTransformer(t),h=typeof i[0]!="number"?1:0,m=n.x.scale*e.x,y=n.y.scale*e.y;i[0+h]/=m,i[1+h]/=y;const g=$r(m,y,.5);return typeof i[2+h]=="number"&&(i[2+h]/=g),typeof i[3+h]=="number"&&(i[3+h]/=g),o(i)}},Qv={borderRadius:{...df,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:df,borderTopRightRadius:df,borderBottomLeftRadius:df,borderBottomRightRadius:df,boxShadow:sq};function b_(t,{layout:e,layoutId:n}){return Ah.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Qv[t]||t==="opacity")}const aq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oq=Sh.length;function lq(t,e,n){let r="",i=!0;for(let o=0;o<oq;o++){const h=Sh[o],m=t[h];if(m===void 0)continue;let y=!0;if(typeof m=="number"?y=m===(h.startsWith("scale")?1:0):y=parseFloat(m)===0,!y||n){const g=c_(m,Tw[h]);if(!y){i=!1;const E=aq[h]||h;r+=`${E}(${g}) `}n&&(e[h]=g)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Mw(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let h=!1,m=!1;for(const y in e){const g=e[y];if(Ah.has(y)){h=!0;continue}else if(FN(y)){i[y]=g;continue}else{const E=c_(g,Tw[y]);y.startsWith("origin")?(m=!0,o[y]=E):r[y]=E}}if(e.transform||(h||n?r.transform=lq(e,t.transform,n):r.transform&&(r.transform="none")),m){const{originX:y="50%",originY:g="50%",originZ:E=0}=o;r.transformOrigin=`${y} ${g} ${E}`}}const Dw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function w_(t,e,n){for(const r in e)!es(e[r])&&!b_(r,n)&&(t[r]=e[r])}function cq({transformTemplate:t},e){return W.useMemo(()=>{const n=Dw();return Mw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function uq(t,e){const n=t.style||{},r={};return w_(r,n,t),Object.assign(r,cq(t,e)),r}function hq(t,e){const n={},r=uq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const fq={offset:"stroke-dashoffset",array:"stroke-dasharray"},dq={offset:"strokeDashoffset",array:"strokeDasharray"};function pq(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?fq:dq;t[o.offset]=Zt.transform(-r);const h=Zt.transform(e),m=Zt.transform(n);t[o.array]=`${h} ${m}`}function x_(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:h=0,...m},y,g,E){if(Mw(t,m,g),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:S,style:N}=t;S.transform&&(N.transform=S.transform,delete S.transform),(N.transform||S.transformOrigin)&&(N.transformOrigin=S.transformOrigin??"50% 50%",delete S.transformOrigin),N.transform&&(N.transformBox=E?.transformBox??"fill-box",delete S.transformBox),e!==void 0&&(S.x=e),n!==void 0&&(S.y=n),r!==void 0&&(S.scale=r),i!==void 0&&pq(S,i,o,h,!1)}const E_=()=>({...Dw(),attrs:{}}),S_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mq(t,e,n,r){const i=W.useMemo(()=>{const o=E_();return x_(o,e,S_(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};w_(o,t.style,t),i.style={...o,...i.style}}return i}const gq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lw(t){return typeof t!="string"||t.includes("-")?!1:!!(gq.indexOf(t)>-1||/[A-Z]/u.test(t))}function yq(t,e,n,{latestValues:r},i,o=!1){const m=(Lw(t)?mq:hq)(e,r,i,t),y=nq(e,typeof t=="string",o),g=t!==W.Fragment?{...y,...m,ref:n}:{},{children:E}=e,S=W.useMemo(()=>es(E)?E.get():E,[E]);return W.createElement(t,{...g,children:S})}function YA(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function kw(t,e,n,r){if(typeof e=="function"){const[i,o]=YA(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=YA(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function Am(t){return es(t)?t.get():t}function vq({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:bq(n,r,i,t),renderState:e()}}function bq(t,e,n,r){const i={},o=r(t,{});for(const N in o)i[N]=Am(o[N]);let{initial:h,animate:m}=t;const y=M1(t),g=v_(t);e&&g&&!y&&t.inherit!==!1&&(h===void 0&&(h=e.initial),m===void 0&&(m=e.animate));let E=n?n.initial===!1:!1;E=E||h===!1;const S=E?m:h;if(S&&typeof S!="boolean"&&!R1(S)){const N=Array.isArray(S)?S:[S];for(let I=0;I<N.length;I++){const R=kw(t,N[I]);if(R){const{transitionEnd:D,transition:j,...B}=R;for(const H in B){let V=B[H];if(Array.isArray(V)){const se=E?V.length-1:0;V=V[se]}V!==null&&(i[H]=V)}for(const H in D)i[H]=D[H]}}}return i}const A_=t=>(e,n)=>{const r=W.useContext(I1),i=W.useContext(O1),o=()=>vq(t,e,r,i);return n?o():ow(o)};function jw(t,e,n){const{style:r}=t,i={};for(const o in r)(es(r[o])||e.style&&es(e.style[o])||b_(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const wq=A_({scrapeMotionValuesFromProps:jw,createRenderState:Dw});function C_(t,e,n){const r=jw(t,e,n);for(const i in t)if(es(t[i])||es(e[i])){const o=Sh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const xq=A_({scrapeMotionValuesFromProps:C_,createRenderState:E_}),Eq=Symbol.for("motionComponentSymbol");function Fu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Sq(t,e,n){return W.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Fu(n)&&(n.current=r))},[e])}const Bw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Aq="framerAppearId",T_="data-"+Bw(Aq),N_=W.createContext({});function Cq(t,e,n,r,i){const{visualElement:o}=W.useContext(I1),h=W.useContext(g_),m=W.useContext(O1),y=W.useContext(Ow).reducedMotion,g=W.useRef(null);r=r||h.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:o,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:y}));const E=g.current,S=W.useContext(N_);E&&!E.projection&&i&&(E.type==="html"||E.type==="svg")&&Tq(g.current,n,i,S);const N=W.useRef(!1);W.useInsertionEffect(()=>{E&&N.current&&E.update(n,m)});const I=n[T_],R=W.useRef(!!I&&!window.MotionHandoffIsComplete?.(I)&&window.MotionHasOptimisedAnimation?.(I));return SN(()=>{E&&(N.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),E.scheduleRenderMicrotask(),R.current&&E.animationState&&E.animationState.animateChanges())}),W.useEffect(()=>{E&&(!R.current&&E.animationState&&E.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(I)}),R.current=!1),E.enteringChildren=void 0)}),E}function Tq(t,e,n,r){const{layoutId:i,layout:o,drag:h,dragConstraints:m,layoutScroll:y,layoutRoot:g,layoutCrossfade:E}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:__(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!h||m&&Fu(m),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:E,layoutScroll:y,layoutRoot:g})}function __(t){if(t)return t.options.allowProjection!==!1?t.projection:__(t.parent)}function gy(t,{forwardMotionProps:e=!1}={},n,r){n&&JH(n);const i=Lw(t)?xq:wq;function o(m,y){let g;const E={...W.useContext(Ow),...m,layoutId:Nq(m)},{isStatic:S}=E,N=iq(m),I=i(m,S);if(!S&&lw){_q();const R=Oq(E);g=R.MeasureLayout,N.visualElement=Cq(t,I,E,r,R.ProjectionNode)}return T.jsxs(I1.Provider,{value:N,children:[g&&N.visualElement?T.jsx(g,{visualElement:N.visualElement,...E}):null,yq(t,m,Sq(I,N.visualElement,y),I,S,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const h=W.forwardRef(o);return h[Eq]=t,h}function Nq({layoutId:t}){const e=W.useContext(aw).id;return e&&t!==void 0?e+"-"+t:t}function _q(t,e){W.useContext(g_).strict}function Oq(t){const{drag:e,layout:n}=dh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Iq(t,e){if(typeof Proxy>"u")return gy;const n=new Map,r=(o,h)=>gy(o,h,t,e),i=(o,h)=>r(o,h);return new Proxy(i,{get:(o,h)=>h==="create"?r:(n.has(h)||n.set(h,gy(h,void 0,t,e)),n.get(h))})}function O_({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Rq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Mq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yy(t){return t===void 0||t===1}function Zv({scale:t,scaleX:e,scaleY:n}){return!yy(t)||!yy(e)||!yy(n)}function xc(t){return Zv(t)||I_(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function I_(t){return XA(t.x)||XA(t.y)}function XA(t){return t&&t!=="0%"}function Jm(t,e,n){const r=t-n,i=e*r;return n+i}function WA(t,e,n,r,i){return i!==void 0&&(t=Jm(t,i,r)),Jm(t,n,r)+e}function Jv(t,e=0,n=1,r,i){t.min=WA(t.min,e,n,r,i),t.max=WA(t.max,e,n,r,i)}function R_(t,{x:e,y:n}){Jv(t.x,e.translate,e.scale,e.originPoint),Jv(t.y,n.translate,n.scale,n.originPoint)}const QA=.999999999999,ZA=1.0000000000001;function Dq(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,h;for(let m=0;m<i;m++){o=n[m],h=o.projectionDelta;const{visualElement:y}=o.options;y&&y.props.style&&y.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Hu(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),h&&(e.x*=h.x.scale,e.y*=h.y.scale,R_(t,h)),r&&xc(o.latestValues)&&Hu(t,o.latestValues))}e.x<ZA&&e.x>QA&&(e.x=1),e.y<ZA&&e.y>QA&&(e.y=1)}function zu(t,e){t.min=t.min+e,t.max=t.max+e}function JA(t,e,n,r,i=.5){const o=$r(t.min,t.max,i);Jv(t,e,n,o,r)}function Hu(t,e){JA(t.x,e.x,e.scaleX,e.scale,e.originX),JA(t.y,e.y,e.scaleY,e.scale,e.originY)}function M_(t,e){return O_(Mq(t.getBoundingClientRect(),e))}function Lq(t,e,n){const r=M_(t,n),{scroll:i}=e;return i&&(zu(r.x,i.offset.x),zu(r.y,i.offset.y)),r}const eC=()=>({translate:0,scale:1,origin:0,originPoint:0}),qu=()=>({x:eC(),y:eC()}),tC=()=>({min:0,max:0}),Oi=()=>({x:tC(),y:tC()}),eb={current:null},D_={current:!1};function kq(){if(D_.current=!0,!!lw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>eb.current=t.matches;t.addEventListener("change",e),e()}else eb.current=!1}const jq=new WeakMap;function Bq(t,e,n){for(const r in e){const i=e[r],o=n[r];if(es(i))t.addValue(r,i);else if(es(o))t.addValue(r,fh(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const h=t.getValue(r);h.liveStyle===!0?h.jump(i):h.hasAnimated||h.set(i)}else{const h=t.getStaticValue(r);t.addValue(r,fh(h!==void 0?h:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const nC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Pq{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:h},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Aw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=Cs.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,Fr.render(this.render,!1,!0))};const{latestValues:y,renderState:g}=h;this.latestValues=y,this.baseTarget={...y},this.initialValues=n.initial?{...y}:{},this.renderState=g,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=m,this.blockInitialAnimation=!!o,this.isControllingVariants=M1(n),this.isVariantNode=v_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:E,...S}=this.scrapeMotionValuesFromProps(n,{},this);for(const N in S){const I=S[N];y[N]!==void 0&&es(I)&&I.set(y[N])}}mount(e){this.current=e,jq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),D_.current||kq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:eb.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Yl(this.notifyUpdate),Yl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ah.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&Fr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in dh){const n=dh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Oi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<nC.length;r++){const i=nC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,h=e[o];h&&(this.propEventSubscriptions[i]=this.on(i,h))}this.prevMotionValues=Bq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=fh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(AN(r)||TN(r))?r=parseFloat(r):!KH(r)&&Xl.test(n)&&(r=l_(e,n)),this.setBaseTarget(e,es(r)?r.get():r)),es(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=kw(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!es(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new dw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Nw.render(this.render)}}class L_ extends Pq{constructor(){super(...arguments),this.KeyframeResolver=LH}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;es(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function k_(t,{style:e,vars:n},r,i){const o=t.style;let h;for(h in e)o[h]=e[h];i?.applyProjectionStyles(o,r);for(h in n)o.setProperty(h,n[h])}function Uq(t){return window.getComputedStyle(t)}class Fq extends L_{constructor(){super(...arguments),this.type="html",this.renderInstance=k_}readValueFromInstance(e,n){if(Ah.has(n))return this.projection?.isProjecting?Vv(n):Jz(e,n);{const r=Uq(e),i=(FN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return M_(e,n)}build(e,n,r){Mw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return jw(e,n,r)}}const j_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zq(t,e,n,r){k_(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(j_.has(i)?i:Bw(i),e.attrs[i])}class Hq extends L_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Oi}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ah.has(n)){const r=o_(n);return r&&r.default||0}return n=j_.has(n)?n:Bw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return C_(e,n,r)}build(e,n,r){x_(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){zq(e,n,r,i)}mount(e){this.isSVGTag=S_(e.tagName),super.mount(e)}}const qq=(t,e)=>Lw(t)?new Hq(e):new Fq(e,{allowProjection:t!==W.Fragment});function Zu(t,e,n){const r=t.getProps();return kw(r,e,n!==void 0?n:r.custom,t)}const tb=t=>Array.isArray(t);function Vq(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,fh(n))}function Gq(t){return tb(t)?t[t.length-1]||0:t}function Kq(t,e){const n=Zu(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const h in o){const m=Gq(o[h]);Vq(t,h,m)}}function $q(t){return!!(es(t)&&t.add)}function nb(t,e){const n=t.getValue("willChange");if($q(n))return n.add(e);if(!n&&$o.WillChange){const r=new $o.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function B_(t){return t.props[T_]}const Yq=t=>t!==null;function Xq(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Yq),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const Wq={type:"spring",stiffness:500,damping:25,restSpeed:10},Qq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Zq={type:"keyframes",duration:.8},Jq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eV=(t,{keyframes:e})=>e.length>2?Zq:Ah.has(t)?t.startsWith("scale")?Qq(e[1]):Wq:Jq;function tV({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:h,repeatDelay:m,from:y,elapsed:g,...E}){return!!Object.keys(E).length}const Pw=(t,e,n,r={},i,o)=>h=>{const m=Cw(r,t)||{},y=m.delay||r.delay||0;let{elapsed:g=0}=r;g=g-ro(y);const E={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...m,delay:-g,onUpdate:N=>{e.set(N),m.onUpdate&&m.onUpdate(N)},onComplete:()=>{h(),m.onComplete&&m.onComplete()},name:t,motionValue:e,element:o?void 0:i};tV(m)||Object.assign(E,eV(t,E)),E.duration&&(E.duration=ro(E.duration)),E.repeatDelay&&(E.repeatDelay=ro(E.repeatDelay)),E.from!==void 0&&(E.keyframes[0]=E.from);let S=!1;if((E.type===!1||E.duration===0&&!E.repeatDelay)&&(Xv(E),E.delay===0&&(S=!0)),($o.instantAnimations||$o.skipAnimations)&&(S=!0,Xv(E),E.delay=0),E.allowFlatten=!m.type&&!m.ease,S&&!o&&e.get()!==void 0){const N=Xq(E.keyframes,m);if(N!==void 0){Fr.update(()=>{E.onUpdate(N),E.onComplete()});return}}return m.isSync?new Sw(E):new EH(E)};function nV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function P_(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:h,...m}=e;r&&(o=r);const y=[],g=i&&t.animationState&&t.animationState.getState()[i];for(const E in m){const S=t.getValue(E,t.latestValues[E]??null),N=m[E];if(N===void 0||g&&nV(g,E))continue;const I={delay:n,...Cw(o||{},E)},R=S.get();if(R!==void 0&&!S.isAnimating&&!Array.isArray(N)&&N===R&&!I.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const B=B_(t);if(B){const H=window.MotionHandoffAnimation(B,E,Fr);H!==null&&(I.startTime=H,D=!0)}}nb(t,E),S.start(Pw(E,S,N,t.shouldReduceMotion&&i_.has(E)?{type:!1}:I,t,D));const j=S.animation;j&&y.push(j)}return h&&Promise.all(y).then(()=>{Fr.update(()=>{h&&Kq(t,h)})}),y}function U_(t,e,n,r=0,i=1){const o=Array.from(t).sort((g,E)=>g.sortNodePosition(E)).indexOf(e),h=t.size,m=(h-1)*r;return typeof n=="function"?n(o,h):i===1?o*r:m-o*r}function rb(t,e,n={}){const r=Zu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(P_(t,r,n)):()=>Promise.resolve(),h=t.variantChildren&&t.variantChildren.size?(y=0)=>{const{delayChildren:g=0,staggerChildren:E,staggerDirection:S}=i;return rV(t,e,y,g,E,S,n)}:()=>Promise.resolve(),{when:m}=i;if(m){const[y,g]=m==="beforeChildren"?[o,h]:[h,o];return y().then(()=>g())}else return Promise.all([o(),h(n.delay)])}function rV(t,e,n=0,r=0,i=0,o=1,h){const m=[];for(const y of t.variantChildren)y.notify("AnimationStart",e),m.push(rb(y,e,{...h,delay:n+(typeof r=="function"?0:r)+U_(t.variantChildren,y,r,i,o)}).then(()=>y.notify("AnimationComplete",e)));return Promise.all(m)}function iV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>rb(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=rb(t,e,n);else{const i=typeof e=="function"?Zu(t,e,n.custom):e;r=Promise.all(P_(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function F_(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const sV=Rw.length;function z_(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?z_(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<sV;n++){const r=Rw[n],i=t.props[r];(ad(i)||i===!1)&&(e[r]=i)}return e}const aV=[...Iw].reverse(),oV=Iw.length;function lV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>iV(t,n,r)))}function cV(t){let e=lV(t),n=rC(),r=!0;const i=y=>(g,E)=>{const S=Zu(t,E,y==="exit"?t.presenceContext?.custom:void 0);if(S){const{transition:N,transitionEnd:I,...R}=S;g={...g,...R,...I}}return g};function o(y){e=y(t)}function h(y){const{props:g}=t,E=z_(t.parent)||{},S=[],N=new Set;let I={},R=1/0;for(let j=0;j<oV;j++){const B=aV[j],H=n[B],V=g[B]!==void 0?g[B]:E[B],se=ad(V),ee=B===y?H.isActive:null;ee===!1&&(R=j);let J=V===E[B]&&V!==g[B]&&se;if(J&&r&&t.manuallyAnimateOnMount&&(J=!1),H.protectedKeys={...I},!H.isActive&&ee===null||!V&&!H.prevProp||R1(V)||typeof V=="boolean")continue;const F=uV(H.prevProp,V);let ce=F||B===y&&H.isActive&&!J&&se||j>R&&se,de=!1;const ze=Array.isArray(V)?V:[V];let Q=ze.reduce(i(B),{});ee===!1&&(Q={});const{prevResolvedValues:fe={}}=H,he={...fe,...Q},Ne=oe=>{ce=!0,N.has(oe)&&(de=!0,N.delete(oe)),H.needsAnimating[oe]=!0;const ve=t.getValue(oe);ve&&(ve.liveStyle=!1)};for(const oe in he){const ve=Q[oe],Ee=fe[oe];if(I.hasOwnProperty(oe))continue;let be=!1;tb(ve)&&tb(Ee)?be=!F_(ve,Ee):be=ve!==Ee,be?ve!=null?Ne(oe):N.add(oe):ve!==void 0&&N.has(oe)?Ne(oe):H.protectedKeys[oe]=!0}H.prevProp=V,H.prevResolvedValues=Q,H.isActive&&(I={...I,...Q}),r&&t.blockInitialAnimation&&(ce=!1);const ie=J&&F;ce&&(!ie||de)&&S.push(...ze.map(oe=>{const ve={type:B};if(typeof oe=="string"&&r&&!ie&&t.manuallyAnimateOnMount&&t.parent){const{parent:Ee}=t,be=Zu(Ee,oe);if(Ee.enteringChildren&&be){const{delayChildren:ne}=be.transition||{};ve.delay=U_(Ee.enteringChildren,t,ne)}}return{animation:oe,options:ve}}))}if(N.size){const j={};if(typeof g.initial!="boolean"){const B=Zu(t,Array.isArray(g.initial)?g.initial[0]:g.initial);B&&B.transition&&(j.transition=B.transition)}N.forEach(B=>{const H=t.getBaseTarget(B),V=t.getValue(B);V&&(V.liveStyle=!0),j[B]=H??null}),S.push({animation:j})}let D=!!S.length;return r&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(S):Promise.resolve()}function m(y,g){if(n[y].isActive===g)return Promise.resolve();t.variantChildren?.forEach(S=>S.animationState?.setActive(y,g)),n[y].isActive=g;const E=h(y);for(const S in n)n[S].protectedKeys={};return E}return{animateChanges:h,setActive:m,setAnimateFunction:o,getState:()=>n,reset:()=>{n=rC()}}}function uV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!F_(e,t):!1}function bc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rC(){return{animate:bc(!0),whileInView:bc(),whileHover:bc(),whileTap:bc(),whileDrag:bc(),whileFocus:bc(),exit:bc()}}class tc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class hV extends tc{constructor(e){super(e),e.animationState||(e.animationState=cV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();R1(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let fV=0;class dV extends tc{constructor(){super(...arguments),this.id=fV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const pV={animation:{Feature:hV},exit:{Feature:dV}};function od(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Bd(t){return{point:{x:t.pageX,y:t.pageY}}}const mV=t=>e=>_w(e)&&t(e,Bd(e));function jf(t,e,n,r){return od(t,e,mV(n),r)}const H_=1e-4,gV=1-H_,yV=1+H_,q_=.01,vV=0-q_,bV=0+q_;function os(t){return t.max-t.min}function wV(t,e,n){return Math.abs(t-e)<=n}function iC(t,e,n,r=.5){t.origin=r,t.originPoint=$r(e.min,e.max,t.origin),t.scale=os(n)/os(e),t.translate=$r(n.min,n.max,t.origin)-t.originPoint,(t.scale>=gV&&t.scale<=yV||isNaN(t.scale))&&(t.scale=1),(t.translate>=vV&&t.translate<=bV||isNaN(t.translate))&&(t.translate=0)}function Bf(t,e,n,r){iC(t.x,e.x,n.x,r?r.originX:void 0),iC(t.y,e.y,n.y,r?r.originY:void 0)}function sC(t,e,n){t.min=n.min+e.min,t.max=t.min+os(e)}function xV(t,e,n){sC(t.x,e.x,n.x),sC(t.y,e.y,n.y)}function aC(t,e,n){t.min=e.min-n.min,t.max=t.min+os(e)}function e1(t,e,n){aC(t.x,e.x,n.x),aC(t.y,e.y,n.y)}function ca(t){return[t("x"),t("y")]}const V_=({current:t})=>t?t.ownerDocument.defaultView:null,oC=(t,e)=>Math.abs(t-e);function EV(t,e){const n=oC(t.x,e.x),r=oC(t.y,e.y);return Math.sqrt(n**2+r**2)}class G_{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:h=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=by(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,R=EV(N.offset,{x:0,y:0})>=this.distanceThreshold;if(!I&&!R)return;const{point:D}=N,{timestamp:j}=Gi;this.history.push({...D,timestamp:j});const{onStart:B,onMove:H}=this.handlers;I||(B&&B(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),H&&H(this.lastMoveEvent,N)},this.handlePointerMove=(N,I)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=vy(I,this.transformPagePoint),Fr.update(this.updatePoint,!0)},this.handlePointerUp=(N,I)=>{this.end();const{onEnd:R,onSessionEnd:D,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=by(N.type==="pointercancel"?this.lastMoveEventInfo:vy(I,this.transformPagePoint),this.history);this.startEvent&&R&&R(N,B),D&&D(N,B)},!_w(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=h,this.contextWindow=i||window;const m=Bd(e),y=vy(m,this.transformPagePoint),{point:g}=y,{timestamp:E}=Gi;this.history=[{...g,timestamp:E}];const{onSessionStart:S}=n;S&&S(e,by(y,this.history)),this.removeListeners=Ld(jf(this.contextWindow,"pointermove",this.handlePointerMove),jf(this.contextWindow,"pointerup",this.handlePointerUp),jf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Yl(this.updatePoint)}}function vy(t,e){return e?{point:e(t.point)}:t}function lC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function by({point:t},e){return{point:t,delta:lC(t,K_(e)),offset:lC(t,SV(e)),velocity:AV(e,.1)}}function SV(t){return t[0]}function K_(t){return t[t.length-1]}function AV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=K_(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ro(e)));)n--;if(!r)return{x:0,y:0};const o=ga(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const h={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function CV(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$r(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$r(n,t,r.max):Math.min(t,n)),t}function cC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function TV(t,{top:e,left:n,bottom:r,right:i}){return{x:cC(t.x,n,i),y:cC(t.y,e,r)}}function uC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function NV(t,e){return{x:uC(t.x,e.x),y:uC(t.y,e.y)}}function _V(t,e){let n=.5;const r=os(t),i=os(e);return i>r?n=rd(e.min,e.max-r,t.min):r>i&&(n=rd(t.min,t.max-i,e.min)),Ko(0,1,n)}function OV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ib=.35;function IV(t=ib){return t===!1?t=0:t===!0&&(t=ib),{x:hC(t,"left","right"),y:hC(t,"top","bottom")}}function hC(t,e,n){return{min:fC(t,e),max:fC(t,n)}}function fC(t,e){return typeof t=="number"?t:t[e]||0}const RV=new WeakMap;class MV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Oi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=S=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Bd(S).point)},h=(S,N)=>{const{drag:I,dragPropagation:R,onDragStart:D}=this.getProps();if(I&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=PH(I),!this.openDragLock))return;this.latestPointerEvent=S,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ca(B=>{let H=this.getAxisMotionValue(B).get()||0;if(io.test(H)){const{projection:V}=this.visualElement;if(V&&V.layout){const se=V.layout.layoutBox[B];se&&(H=os(se)*(parseFloat(H)/100))}}this.originPoint[B]=H}),D&&Fr.postRender(()=>D(S,N)),nb(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},m=(S,N)=>{this.latestPointerEvent=S,this.latestPanInfo=N;const{dragPropagation:I,dragDirectionLock:R,onDirectionLock:D,onDrag:j}=this.getProps();if(!I&&!this.openDragLock)return;const{offset:B}=N;if(R&&this.currentDirection===null){this.currentDirection=DV(B),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",N.point,B),this.updateAxis("y",N.point,B),this.visualElement.render(),j&&j(S,N)},y=(S,N)=>{this.latestPointerEvent=S,this.latestPanInfo=N,this.stop(S,N),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>ca(S=>this.getAnimationState(S)==="paused"&&this.getAxisMotionValue(S).animation?.play()),{dragSnapToOrigin:E}=this.getProps();this.panSession=new G_(e,{onSessionStart:o,onStart:h,onMove:m,onSessionEnd:y,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:E,distanceThreshold:r,contextWindow:V_(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:h}=i;this.startAnimation(h);const{onDragEnd:m}=this.getProps();m&&Fr.postRender(()=>m(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Zp(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let h=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(h=CV(h,this.constraints[e],this.elastic[e])),o.set(h)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Fu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=TV(r.layoutBox,e):this.constraints=!1,this.elastic=IV(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ca(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=OV(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Fu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Lq(r,i.root,this.visualElement.getTransformPagePoint());let h=NV(i.layout.layoutBox,o);if(n){const m=n(Rq(h));this.hasMutatedConstraints=!!m,m&&(h=O_(m))}return h}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:h,onDragTransitionEnd:m}=this.getProps(),y=this.constraints||{},g=ca(E=>{if(!Zp(E,n,this.currentDirection))return;let S=y&&y[E]||{};h&&(S={min:0,max:0});const N=i?200:1e6,I=i?40:1e7,R={type:"inertia",velocity:r?e[E]:0,bounceStiffness:N,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...o,...S};return this.startAxisValueAnimation(E,R)});return Promise.all(g).then(m)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return nb(this.visualElement,e),r.start(Pw(e,r,0,n,this.visualElement,!1))}stopAnimation(){ca(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ca(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ca(n=>{const{drag:r}=this.getProps();if(!Zp(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:h,max:m}=i.layout.layoutBox[n];o.set(e[n]-$r(h,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Fu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ca(h=>{const m=this.getAxisMotionValue(h);if(m&&this.constraints!==!1){const y=m.get();i[h]=_V({min:y,max:y},this.constraints[h])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ca(h=>{if(!Zp(h,e,null))return;const m=this.getAxisMotionValue(h),{min:y,max:g}=this.constraints[h];m.set($r(y,g,i[h]))})}addListeners(){if(!this.visualElement.current)return;RV.set(this.visualElement,this);const e=this.visualElement.current,n=jf(e,"pointerdown",y=>{const{drag:g,dragListener:E=!0}=this.getProps();g&&E&&this.start(y)}),r=()=>{const{dragConstraints:y}=this.getProps();Fu(y)&&y.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Fr.read(r);const h=od(window,"resize",()=>this.scalePositionWithinConstraints()),m=i.addEventListener("didUpdate",(({delta:y,hasLayoutChanged:g})=>{this.isDragging&&g&&(ca(E=>{const S=this.getAxisMotionValue(E);S&&(this.originPoint[E]+=y[E].translate,S.set(S.get()+y[E].translate))}),this.visualElement.render())}));return()=>{h(),n(),o(),m&&m()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:h=ib,dragMomentum:m=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:h,dragMomentum:m}}}function Zp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function DV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class LV extends tc{constructor(e){super(e),this.removeGroupControls=ba,this.removeListeners=ba,this.controls=new MV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ba}unmount(){this.removeGroupControls(),this.removeListeners()}}const dC=t=>(e,n)=>{t&&Fr.postRender(()=>t(e,n))};class kV extends tc{constructor(){super(...arguments),this.removePointerDownListener=ba}onPointerDown(e){this.session=new G_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:V_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:dC(e),onStart:dC(n),onMove:r,onEnd:(o,h)=>{delete this.session,i&&Fr.postRender(()=>i(o,h))}}}mount(){this.removePointerDownListener=jf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Cm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let wy=!1;class jV extends W.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),wy&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Cm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:h}=r;return h&&(h.isPresent=o,wy=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?h.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?h.promote():h.relegate()||Fr.postRender(()=>{const m=h.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Nw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;wy=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $_(t){const[e,n]=m_(),r=W.useContext(aw);return T.jsx(jV,{...t,layoutGroup:r,switchLayoutGroup:W.useContext(N_),isPresent:e,safeToRemove:n})}function BV(t,e,n){const r=es(t)?t:fh(t);return r.start(Pw("",r,e,n)),r.animation}const PV=(t,e)=>t.depth-e.depth;class UV{constructor(){this.children=[],this.isDirty=!1}add(e){cw(this.children,e),this.isDirty=!0}remove(e){uw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PV),this.isDirty=!1,this.children.forEach(e)}}function FV(t,e){const n=Cs.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Yl(r),t(o-e))};return Fr.setup(r,!0),()=>Yl(r)}const Y_=["TopLeft","TopRight","BottomLeft","BottomRight"],zV=Y_.length,pC=t=>typeof t=="string"?parseFloat(t):t,mC=t=>typeof t=="number"||Zt.test(t);function HV(t,e,n,r,i,o){i?(t.opacity=$r(0,n.opacity??1,qV(r)),t.opacityExit=$r(e.opacity??1,0,VV(r))):o&&(t.opacity=$r(e.opacity??1,n.opacity??1,r));for(let h=0;h<zV;h++){const m=`border${Y_[h]}Radius`;let y=gC(e,m),g=gC(n,m);if(y===void 0&&g===void 0)continue;y||(y=0),g||(g=0),y===0||g===0||mC(y)===mC(g)?(t[m]=Math.max($r(pC(y),pC(g),r),0),(io.test(g)||io.test(y))&&(t[m]+="%")):t[m]=g}(e.rotate||n.rotate)&&(t.rotate=$r(e.rotate||0,n.rotate||0,r))}function gC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const qV=X_(0,.5,LN),VV=X_(.5,.95,ba);function X_(t,e,n){return r=>r<t?0:r>e?1:n(rd(t,e,r))}function yC(t,e){t.min=e.min,t.max=e.max}function Oa(t,e){yC(t.x,e.x),yC(t.y,e.y)}function vC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function bC(t,e,n,r,i){return t-=e,t=Jm(t,1/n,r),i!==void 0&&(t=Jm(t,1/i,r)),t}function GV(t,e=0,n=1,r=.5,i,o=t,h=t){if(io.test(e)&&(e=parseFloat(e),e=$r(h.min,h.max,e/100)-h.min),typeof e!="number")return;let m=$r(o.min,o.max,r);t===o&&(m-=e),t.min=bC(t.min,e,n,m,i),t.max=bC(t.max,e,n,m,i)}function wC(t,e,[n,r,i],o,h){GV(t,e[n],e[r],e[i],e.scale,o,h)}const KV=["x","scaleX","originX"],$V=["y","scaleY","originY"];function xC(t,e,n,r){wC(t.x,e,KV,n?n.x:void 0,r?r.x:void 0),wC(t.y,e,$V,n?n.y:void 0,r?r.y:void 0)}function EC(t){return t.translate===0&&t.scale===1}function W_(t){return EC(t.x)&&EC(t.y)}function SC(t,e){return t.min===e.min&&t.max===e.max}function YV(t,e){return SC(t.x,e.x)&&SC(t.y,e.y)}function AC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Q_(t,e){return AC(t.x,e.x)&&AC(t.y,e.y)}function CC(t){return os(t.x)/os(t.y)}function TC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class XV{constructor(){this.members=[]}add(e){cw(this.members,e),e.scheduleRender()}remove(e){if(uw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function WV(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,h=n?.z||0;if((i||o||h)&&(r=`translate3d(${i}px, ${o}px, ${h}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:g,rotate:E,rotateX:S,rotateY:N,skewX:I,skewY:R}=n;g&&(r=`perspective(${g}px) ${r}`),E&&(r+=`rotate(${E}deg) `),S&&(r+=`rotateX(${S}deg) `),N&&(r+=`rotateY(${N}deg) `),I&&(r+=`skewX(${I}deg) `),R&&(r+=`skewY(${R}deg) `)}const m=t.x.scale*e.x,y=t.y.scale*e.y;return(m!==1||y!==1)&&(r+=`scale(${m}, ${y})`),r||"none"}const xy=["","X","Y","Z"],QV=1e3;let ZV=0;function Ey(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Z_(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=B_(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Fr,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Z_(r)}function J_({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(h={},m=e?.()){this.id=ZV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tG),this.nodes.forEach(sG),this.nodes.forEach(aG),this.nodes.forEach(nG)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let y=0;y<this.path.length;y++)this.path[y].shouldResetTransform=!0;this.root===this&&(this.nodes=new UV)}addEventListener(h,m){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new dw),this.eventHandlers.get(h).add(m)}notifyListeners(h,...m){const y=this.eventHandlers.get(h);y&&y.notify(...m)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=p_(h)&&!VH(h),this.instance=h;const{layoutId:m,layout:y,visualElement:g}=this.options;if(g&&!g.current&&g.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(y||m)&&(this.isLayoutDirty=!0),t){let E,S=0;const N=()=>this.root.updateBlockedByResize=!1;Fr.read(()=>{S=window.innerWidth}),t(h,()=>{const I=window.innerWidth;I!==S&&(S=I,this.root.updateBlockedByResize=!0,E&&E(),E=FV(N,250),Cm.hasAnimatedSinceResize&&(Cm.hasAnimatedSinceResize=!1,this.nodes.forEach(OC)))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&g&&(m||y)&&this.addEventListener("didUpdate",({delta:E,hasLayoutChanged:S,hasRelativeLayoutChanged:N,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||g.getDefaultTransition()||hG,{onLayoutAnimationStart:D,onLayoutAnimationComplete:j}=g.getProps(),B=!this.targetLayout||!Q_(this.targetLayout,I),H=!S&&N;if(this.options.layoutRoot||this.resumeFrom||H||S&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...Cw(R,"layout"),onPlay:D,onComplete:j};(g.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(E,H)}else S||OC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oG),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Z_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let E=0;E<this.path.length;E++){const S=this.path[E];S.shouldResetTransform=!0,S.updateScroll("snapshot"),S.options.layoutRoot&&S.willUpdate(!1)}const{layoutId:m,layout:y}=this.options;if(m===void 0&&!y)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_C);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(iG),this.nodes.forEach(JV),this.nodes.forEach(eG)):this.nodes.forEach(_C),this.clearAllSnapshots();const m=Cs.now();Gi.delta=Ko(0,1e3/60,m-Gi.timestamp),Gi.timestamp=m,Gi.isProcessing=!0,uy.update.process(Gi),uy.preRender.process(Gi),uy.render.process(Gi),Gi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Nw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rG),this.sharedNodes.forEach(lG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!os(this.snapshot.measuredBox.x)&&!os(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let y=0;y<this.path.length;y++)this.path[y].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Oi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let m=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(m=!1),m&&this.instance){const y=r(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:y,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:y}}}resetTransform(){if(!i)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,m=this.projectionDelta&&!W_(this.projectionDelta),y=this.getTransformTemplate(),g=y?y(this.latestValues,""):void 0,E=g!==this.prevTransformTemplateValue;h&&this.instance&&(m||xc(this.latestValues)||E)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const m=this.measurePageBox();let y=this.removeElementScroll(m);return h&&(y=this.removeTransform(y)),fG(y),{animationId:this.root.animationId,measuredBox:m,layoutBox:y,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:h}=this.options;if(!h)return Oi();const m=h.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(dG))){const{scroll:g}=this.root;g&&(zu(m.x,g.offset.x),zu(m.y,g.offset.y))}return m}removeElementScroll(h){const m=Oi();if(Oa(m,h),this.scroll?.wasRoot)return m;for(let y=0;y<this.path.length;y++){const g=this.path[y],{scroll:E,options:S}=g;g!==this.root&&E&&S.layoutScroll&&(E.wasRoot&&Oa(m,h),zu(m.x,E.offset.x),zu(m.y,E.offset.y))}return m}applyTransform(h,m=!1){const y=Oi();Oa(y,h);for(let g=0;g<this.path.length;g++){const E=this.path[g];!m&&E.options.layoutScroll&&E.scroll&&E!==E.root&&Hu(y,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),xc(E.latestValues)&&Hu(y,E.latestValues)}return xc(this.latestValues)&&Hu(y,this.latestValues),y}removeTransform(h){const m=Oi();Oa(m,h);for(let y=0;y<this.path.length;y++){const g=this.path[y];if(!g.instance||!xc(g.latestValues))continue;Zv(g.latestValues)&&g.updateSnapshot();const E=Oi(),S=g.measurePageBox();Oa(E,S),xC(m,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,E)}return xc(this.latestValues)&&xC(m,this.latestValues),m}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==m;if(!(h||y&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:E,layoutId:S}=this.options;if(!this.layout||!(E||S))return;this.resolvedRelativeTargetAt=Gi.timestamp;const N=this.getClosestProjectingParent();N&&this.linkedParentVersion!==N.layoutVersion&&!N.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(N&&N.layout?this.createRelativeTarget(N,this.layout.layoutBox,N.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Oi(),this.targetWithTransforms=Oi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Oa(this.target,this.layout.layoutBox),R_(this.target,this.targetDelta)):Oa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?this.createRelativeTarget(N,this.target,N.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Zv(this.parent.latestValues)||I_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(h,m,y){this.relativeParent=h,this.linkedParentVersion=h.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oi(),this.relativeTargetOrigin=Oi(),e1(this.relativeTargetOrigin,m,y),Oa(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const h=this.getLead(),m=!!this.resumingFrom||this!==h;let y=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(y=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===Gi.timestamp&&(y=!1),y)return;const{layout:g,layoutId:E}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||E))return;Oa(this.layoutCorrected,this.layout.layoutBox);const S=this.treeScale.x,N=this.treeScale.y;Dq(this.layoutCorrected,this.treeScale,this.path,m),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Oi());const{target:I}=h;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vC(this.prevProjectionDelta.x,this.projectionDelta.x),vC(this.prevProjectionDelta.y,this.projectionDelta.y)),Bf(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==S||this.treeScale.y!==N||!TC(this.projectionDelta.x,this.prevProjectionDelta.x)||!TC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){if(this.options.visualElement?.scheduleRender(),h){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qu(),this.projectionDelta=qu(),this.projectionDeltaWithTransform=qu()}setAnimationOrigin(h,m=!1){const y=this.snapshot,g=y?y.latestValues:{},E={...this.latestValues},S=qu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const N=Oi(),I=y?y.source:void 0,R=this.layout?this.layout.source:void 0,D=I!==R,j=this.getStack(),B=!j||j.members.length<=1,H=!!(D&&!B&&this.options.crossfade===!0&&!this.path.some(uG));this.animationProgress=0;let V;this.mixTargetDelta=se=>{const ee=se/1e3;IC(S.x,h.x,ee),IC(S.y,h.y,ee),this.setTargetDelta(S),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(e1(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cG(this.relativeTarget,this.relativeTargetOrigin,N,ee),V&&YV(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=Oi()),Oa(V,this.relativeTarget)),D&&(this.animationValues=E,HV(E,g,this.latestValues,ee,H,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ee},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Yl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fr.update(()=>{Cm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fh(0)),this.currentAnimation=BV(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),h.onUpdate&&h.onUpdate(m)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:m,target:y,layout:g,latestValues:E}=h;if(!(!m||!y||!g)){if(this!==h&&this.layout&&g&&e8(this.options.animationType,this.layout.layoutBox,g.layoutBox)){y=this.target||Oi();const S=os(this.layout.layoutBox.x);y.x.min=h.target.x.min,y.x.max=y.x.min+S;const N=os(this.layout.layoutBox.y);y.y.min=h.target.y.min,y.y.max=y.y.min+N}Oa(m,y),Hu(m,E),Bf(this.projectionDeltaWithTransform,this.layoutCorrected,m,E)}}registerSharedNode(h,m){this.sharedNodes.has(h)||this.sharedNodes.set(h,new XV),this.sharedNodes.get(h).add(m);const g=m.options.initialPromotionConfig;m.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(m):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){const{layoutId:h}=this.options;return h?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:h}=this.options;return h?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:m,preserveFollowOpacity:y}={}){const g=this.getStack();g&&g.promote(this,y),h&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let m=!1;const{latestValues:y}=h;if((y.z||y.rotate||y.rotateX||y.rotateY||y.rotateZ||y.skewX||y.skewY)&&(m=!0),!m)return;const g={};y.z&&Ey("z",h,g,this.animationValues);for(let E=0;E<xy.length;E++)Ey(`rotate${xy[E]}`,h,g,this.animationValues),Ey(`skew${xy[E]}`,h,g,this.animationValues);h.render();for(const E in g)h.setStaticValue(E,g[E]),this.animationValues&&(this.animationValues[E]=g[E]);h.scheduleRender()}applyProjectionStyles(h,m){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const y=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=Am(m?.pointerEvents)||"",h.transform=y?y(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=Am(m?.pointerEvents)||""),this.hasProjected&&!xc(this.latestValues)&&(h.transform=y?y({},""):"none",this.hasProjected=!1);return}h.visibility="";const E=g.animationValues||g.latestValues;this.applyTransformsToTarget();let S=WV(this.projectionDeltaWithTransform,this.treeScale,E);y&&(S=y(E,S)),h.transform=S;const{x:N,y:I}=this.projectionDelta;h.transformOrigin=`${N.origin*100}% ${I.origin*100}% 0`,g.animationValues?h.opacity=g===this?E.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:h.opacity=g===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const R in Qv){if(E[R]===void 0)continue;const{correct:D,applyTo:j,isCSSVariable:B}=Qv[R],H=S==="none"?E[R]:D(E[R],g);if(j){const V=j.length;for(let se=0;se<V;se++)h[j[se]]=H}else B?this.options.visualElement.renderState.vars[R]=H:h[R]=H}this.options.layoutId&&(h.pointerEvents=g===this?Am(m?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>h.currentAnimation?.stop()),this.root.nodes.forEach(NC),this.root.sharedNodes.clear()}}}function JV(t){t.updateLayout()}function eG(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?ca(E=>{const S=o?e.measuredBox[E]:e.layoutBox[E],N=os(S);S.min=n[E].min,S.max=S.min+N}):e8(i,e.layoutBox,n)&&ca(E=>{const S=o?e.measuredBox[E]:e.layoutBox[E],N=os(n[E]);S.max=S.min+N,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[E].max=t.relativeTarget[E].min+N)});const h=qu();Bf(h,n,e.layoutBox);const m=qu();o?Bf(m,t.applyTransform(r,!0),e.measuredBox):Bf(m,n,e.layoutBox);const y=!W_(h);let g=!1;if(!t.resumeFrom){const E=t.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:S,layout:N}=E;if(S&&N){const I=Oi();e1(I,e.layoutBox,S.layoutBox);const R=Oi();e1(R,n,N.layoutBox),Q_(I,R)||(g=!0),E.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=I,t.relativeParent=E)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:m,layoutDelta:h,hasLayoutChanged:y,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function tG(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function nG(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rG(t){t.clearSnapshot()}function NC(t){t.clearMeasurements()}function _C(t){t.isLayoutDirty=!1}function iG(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function OC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function sG(t){t.resolveTargetDelta()}function aG(t){t.calcProjection()}function oG(t){t.resetSkewAndRotation()}function lG(t){t.removeLeadSnapshot()}function IC(t,e,n){t.translate=$r(e.translate,0,n),t.scale=$r(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function RC(t,e,n,r){t.min=$r(e.min,n.min,r),t.max=$r(e.max,n.max,r)}function cG(t,e,n,r){RC(t.x,e.x,n.x,r),RC(t.y,e.y,n.y,r)}function uG(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const hG={duration:.45,ease:[.4,0,.1,1]},MC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),DC=MC("applewebkit/")&&!MC("chrome/")?Math.round:ba;function LC(t){t.min=DC(t.min),t.max=DC(t.max)}function fG(t){LC(t.x),LC(t.y)}function e8(t,e,n){return t==="position"||t==="preserve-aspect"&&!wV(CC(e),CC(n),.2)}function dG(t){return t!==t.root&&t.scroll?.wasRoot}const pG=J_({attachResizeListener:(t,e)=>od(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sy={current:void 0},t8=J_({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Sy.current){const t=new pG({});t.mount(window),t.setOptions({layoutScroll:!0}),Sy.current=t}return Sy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mG={pan:{Feature:kV},drag:{Feature:LV,ProjectionNode:t8,MeasureLayout:$_}};function kC(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Fr.postRender(()=>o(e,Bd(e)))}class gG extends tc{mount(){const{current:e}=this.node;e&&(this.unmount=UH(e,(n,r)=>(kC(this.node,r,"Start"),i=>kC(this.node,i,"End"))))}unmount(){}}class yG extends tc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ld(od(this.node.current,"focus",()=>this.onFocus()),od(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jC(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Fr.postRender(()=>o(e,Bd(e)))}class vG extends tc{mount(){const{current:e}=this.node;e&&(this.unmount=qH(e,(n,r)=>(jC(this.node,r,"Start"),(i,{success:o})=>jC(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sb=new WeakMap,Ay=new WeakMap,bG=t=>{const e=sb.get(t.target);e&&e(t)},wG=t=>{t.forEach(bG)};function xG({root:t,...e}){const n=t||document;Ay.has(n)||Ay.set(n,{});const r=Ay.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wG,{root:t,...e})),r[i]}function EG(t,e,n){const r=xG(e);return sb.set(t,n),r.observe(t),()=>{sb.delete(t),r.unobserve(t)}}const SG={some:0,all:1};class AG extends tc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,h={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:SG[i]},m=y=>{const{isIntersecting:g}=y;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:E,onViewportLeave:S}=this.node.getProps(),N=g?E:S;N&&N(y)};return EG(this.node.current,h,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(CG(e,n))&&this.startObserver()}unmount(){}}function CG({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const TG={inView:{Feature:AG},tap:{Feature:vG},focus:{Feature:yG},hover:{Feature:gG}},NG={layout:{ProjectionNode:t8,MeasureLayout:$_}},_G={...pV,...TG,...mG,...NG},en=Iq(_G,qq);function ab({length:t=4,onSubmit:e,onCancel:n,title:r="Enter PIN",description:i="Secure your profile"}){const[o,h]=W.useState(""),m=g=>{if(o.length<t){const E=o+g;h(E),E.length===t&&setTimeout(()=>e(E),300)}},y=()=>{h(g=>g.slice(0,-1))};return W.useEffect(()=>{const g=E=>{/\d/.test(E.key)?m(parseInt(E.key)):E.key==="Backspace"&&y()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[o]),T.jsxs("div",{className:"flex flex-col items-center space-y-8 w-full max-w-sm mx-auto p-6 bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl",children:[T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-fuchsia-400 text-transparent bg-clip-text drop-shadow-[0_0_10px_rgba(34,211,238,0.5)]",children:r}),T.jsx("p",{className:"text-slate-400 text-sm font-medium",children:i})]}),T.jsx("div",{className:"flex gap-4 mb-4",children:[...Array(t)].map((g,E)=>T.jsx(en.div,{initial:!1,animate:{scale:E<o.length?1.3:1,backgroundColor:E<o.length?"#22d3ee":"rgba(255,255,255,0.1)",boxShadow:E<o.length?"0 0 15px #22d3ee":"none"},className:"w-4 h-4 rounded-full transition-colors duration-200"},E))}),T.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full",children:[[1,2,3,4,5,6,7,8,9].map(g=>T.jsx("button",{onClick:()=>m(g),className:`h-16 w-16 rounded-2xl bg-white/5 border border-white/10 text-2xl font-bold text-white shadow-lg active:scale-95 transition-all outline-none \r
                                   hover:bg-cyan-500/20 hover:border-cyan-500/50 hover:text-cyan-400 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)]`,children:g},g)),T.jsx("div",{}),T.jsx("button",{onClick:()=>m(0),className:`h-16 w-16 rounded-2xl bg-white/5 border border-white/10 text-2xl font-bold text-white shadow-lg active:scale-95 transition-all outline-none \r
                               hover:bg-cyan-500/20 hover:border-cyan-500/50 hover:text-cyan-400 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)]`,children:"0"}),T.jsx("button",{onClick:y,className:`h-16 w-16 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-red-400 shadow-lg active:scale-95 transition-all outline-none \r
                               hover:bg-red-500/20 hover:border-red-500/50 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)]`,children:T.jsx(WD,{className:"w-6 h-6"})})]}),n&&T.jsx("button",{onClick:n,className:"text-slate-500 text-sm hover:text-white transition-colors uppercase tracking-wider font-semibold",children:"Cancel"})]})}function OG(){const{login:t,currentUser:e}=fs(),{db:n}=Di(),r=Ti(),[i,o]=W.useState([]),[h,m]=W.useState(null),[y,g]=W.useState(0),[E,S]=W.useState(!0);W.useEffect(()=>{e&&(e.role==="teacher"?r("/teacher"):r("/dashboard"))},[e,r]),W.useEffect(()=>{if(!n)return;const R=n.users.find().sort({createdAt:"desc"}).$.subscribe(D=>{o(D.map(j=>j.toJSON()))});return n.content.count().exec().then(D=>{g(D),S(!1)}),()=>R.unsubscribe()},[n]);const N=async R=>{if(!h)return;await t(h.id,R)?h.role==="teacher"?r("/teacher"):r("/dashboard"):alert("Incorrect PIN! Try again.")},I=async()=>{if(n){S(!0);try{const{seedContent:R}=await m1(async()=>{const{seedContent:j}=await Promise.resolve().then(()=>VU);return{seedContent:j}},void 0);await R(n.content);const D=await n.content.count().exec();g(D),alert("Content Loaded: "+D)}catch(R){alert("Seeding failed: "+R)}S(!1)}};return T.jsxs("div",{className:"flex flex-col items-center justify-start min-h-full w-full p-6 pt-10 pb-32 relative text-center",children:[T.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden pointer-events-none z-0 bg-[#030712]",children:[T.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(at_0%_0%,rgba(14,165,233,0.15)_0px,transparent_50%),radial-gradient(at_100%_0%,rgba(99,102,241,0.15)_0px,transparent_50%),radial-gradient(at_100%_100%,rgba(217,70,239,0.15)_0px,transparent_50%),radial-gradient(at_0%_100%,rgba(14,165,233,0.1)_0px,transparent_50%)]"}),T.jsx("div",{className:"absolute top-0 left-0 w-full h-[40%] overflow-hidden pointer-events-none z-0",children:[...Array(50)].map((R,D)=>T.jsx(en.div,{initial:{opacity:0,y:0,scale:.5},animate:{opacity:[0,.4,0],y:-100,rotate:Math.random()*360,x:Math.random()*40-20+"px"},transition:{duration:Math.random()*5+5,repeat:1/0,delay:Math.random()*5,ease:"linear"},className:"absolute text-primary-400/10 font-mono font-bold text-2xl select-none",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},children:["A","B","C","1","2","3","+","","","?","",""][Math.floor(Math.random()*12)]},D))}),T.jsx("div",{className:"absolute top-[-10%] left-[20%] w-[500px] h-[500px] bg-primary-500/10 rounded-full blur-[100px] animate-pulse-slow"}),T.jsx("div",{className:"absolute bottom-[-10%] right-[20%] w-[500px] h-[500px] bg-accent-500/10 rounded-full blur-[100px] animate-pulse-slow delay-1000"})]}),T.jsxs("div",{className:" relative z-10 w-full max-w-5xl mx-auto flex flex-col items-center gap-12",children:[T.jsx("div",{className:"relative w-full max-w-lg mx-auto flex flex-col items-center",children:T.jsxs(en.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"space-y-0 relative z-10",children:[T.jsxs("div",{className:"flex justify-center relative",children:[T.jsx("div",{className:"absolute top-[60%] left-1/2 -translate-x-1/2 w-48 h-28 bg-[conic-gradient(from_180deg_at_50%_0%,rgba(251,191,36,0.2)_0deg,transparent_45deg,transparent_315deg,rgba(251,191,36,0.2)_360deg)] blur-xl pointer-events-none -z-10 mix-blend-screen [mask-image:linear-gradient(to_bottom,black_50%,transparent)]"}),T.jsx(en.div,{whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300},className:"",children:T.jsx(WF,{className:"w-32 h-32"})})]}),T.jsx("h1",{className:"text-4xl md:text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-amber-200 via-white to-cyan-200 drop-shadow-[0_4px_15px_rgba(251,191,36,0.3)] -mt-4 pb-4",children:"GramSiksha"}),y===0&&!E&&T.jsx("button",{onClick:I,className:"opacity-0 hover:opacity-100 text-xs text-slate-700 bg-slate-900 px-2 py-1 rounded",children:"Initialize"})]})}),T.jsxs(en.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.6},className:"w-full max-w-md mx-auto space-y-3",children:[T.jsxs("button",{onClick:()=>r("/create-profile"),className:"w-full group relative overflow-hidden rounded-2xl bg-slate-900/50 p-[1px] transition-all hover:scale-[1.02]",children:[T.jsx("span",{className:"absolute inset-[-100%] animate-[spin_3s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#0ea5e9_0%,#030712_50%,#0ea5e9_100%)] opacity-50"}),T.jsxs("span",{className:"relative flex w-full cursor-pointer items-center justify-center gap-3 rounded-2xl bg-slate-950/90 px-6 py-4 text-sm font-bold text-white backdrop-blur-3xl transition-colors hover:bg-slate-900/80",children:[T.jsx(U9,{className:"h-5 w-5 text-cyan-400"}),"Create New Profile"]})]}),i.length>0&&T.jsxs("div",{className:"relative py-4",children:[T.jsx("div",{className:"absolute inset-0 flex items-center",children:T.jsx("span",{className:"w-full border-t border-white/5"})}),T.jsx("div",{className:"relative flex justify-center text-xs uppercase tracking-widest",children:T.jsx("span",{className:"bg-[#030712] px-2 text-slate-500",children:"Or continue as"})})]}),T.jsx("div",{className:"space-y-4 w-full pb-4",children:i.map(R=>{const D=R.role==="teacher",j=D?"hover:shadow-[0_0_20px_rgba(168,85,247,0.5)] hover:border-purple-500/50":"hover:shadow-[0_0_20px_rgba(6,182,212,0.5)] hover:border-cyan-500/50",B=D?"group-hover:text-purple-300":"group-hover:text-cyan-300",H=D?"bg-purple-500/10 text-purple-400 border-purple-500/20":"bg-cyan-500/10 text-cyan-400 border-cyan-500/20";return T.jsxs("div",{onClick:()=>m(R),className:`group relative flex items-center gap-4 p-4 rounded-xl bg-slate-900/90 border border-white/10 transition-all duration-300 cursor-pointer hover:-translate-y-1 hover:scale-[1.02] shadow-lg ${j}`,children:[T.jsx("div",{className:`absolute inset-0 rounded-xl opacity-0 group-hover:opacity-20 transition-opacity duration-500 bg-gradient-to-r ${D?"from-purple-600 via-transparent to-transparent":"from-cyan-600 via-transparent to-transparent"}`}),T.jsx("div",{className:`relative z-10 w-14 h-14 rounded-lg flex items-center justify-center text-2xl shadow-inner border border-white/5 bg-slate-950 transition-colors duration-300 ${D?"group-hover:border-purple-500/30":"group-hover:border-cyan-500/30"}`,children:T.jsx("div",{className:`${D?"text-purple-400":"text-cyan-400"}`,children:D?T.jsx(nh,{className:"w-7 h-7"}):T.jsx(c5,{className:"w-7 h-7"})})}),T.jsx("div",{className:"relative z-10 flex-1 text-left",children:T.jsx("div",{className:`font-bold text-slate-100 text-lg transition-colors duration-300 ${B}`,children:R.name})}),T.jsx("div",{className:"relative z-10 flex items-center",children:T.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border ${H}`,children:R.role})}),T.jsx("div",{className:`relative z-10 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 ${D?"text-purple-400":"text-cyan-400"}`,children:T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},R.id)})})]})]}),T.jsx(co,{children:h&&T.jsx(en.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4",children:T.jsxs(en.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-sm bg-[#0a0a0a] border border-white/10 rounded-3xl p-8 relative shadow-2xl ring-1 ring-white/10",children:[T.jsx("button",{onClick:()=>m(null),className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-white rounded-full hover:bg-white/5 transition-colors",children:T.jsx(xd,{className:"w-5 h-5"})}),T.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[T.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-900 border-2 border-white/10 flex items-center justify-center text-5xl mb-4 shadow-xl shadow-primary-500/10",children:h.avatarId}),T.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome back!"}),T.jsxs("p",{className:"text-slate-400 text-sm",children:["Enter PIN for ",h.name]})]}),T.jsx(ab,{onSubmit:N,title:"",description:""})]})})})]})}const Qa=({label:t,value:e,onChange:n,type:r="text",placeholder:i,required:o=!0})=>T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:t}),T.jsx("input",{type:r,value:e,onChange:h=>n(h.target.value),placeholder:i,required:o,className:"w-full bg-[#333] border-none rounded text-white p-3 focus:ring-2 focus:ring-red-600 focus:outline-none placeholder:text-slate-500 transition-all font-medium"})]});function IG(){const t=Ti(),{signup:e}=fs(),{db:n}=Di(),[r,i]=W.useState("role"),[o,h]=W.useState(!1),[m,y]=W.useState({role:"student",name:"",classId:"",birthdate:"",rollNo:"",medium:"english",schoolName:"",villageName:"",state:"",country:"India",ipAddress:"",password:""}),g=(j,B)=>{y(H=>({...H,[j]:B}))},E=j=>{y(B=>({...B,role:j})),i(j==="student"?"student-form":"teacher-form")},[S,N]=W.useState(""),I=j=>{j.preventDefault(),i("student-join-class")},R=async()=>{if(!(!n||!S||S.length<6)){h(!0);try{const B=(await n.classes.find().exec()).find(H=>H.get("code")===S);B?(y(H=>({...H,teacherClassId:B.get("id"),classId:B.get("standard").replace(/\D/g,""),medium:B.get("medium")})),i("student-password")):alert("Invalid Class Code. Please try again.")}catch(j){console.error(j),alert("Error joining class")}finally{h(!1)}}},D=j=>{j.preventDefault(),i("teacher-password")};return T.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4 font-sans relative overflow-hidden",children:[T.jsx("div",{className:"absolute inset-0 bg-[url('https://assets.nflxext.com/ffe/siteui/vlv3/ab180a27-b661-44cd-9579-9fb69939e338/f2e6e187-5f78-4389-9d7a-75a7b2123f95/IN-en-20231009-popsignuptwoweeks-perspective_alpha_website_medium.jpg')] opacity-10 bg-cover bg-center pointer-events-none"}),T.jsx("div",{className:"absolute inset-0 bg-black/80 pointer-events-none"}),T.jsxs(en.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative z-10 w-full max-w-[450px] bg-black/75 backdrop-blur-md rounded-xl p-12 py-16 border border-white/10 shadow-2xl",children:[r!=="role"&&T.jsx("button",{onClick:()=>i("role"),className:"absolute top-6 left-6 text-slate-400 hover:text-white transition-colors",children:T.jsx(cs,{className:"w-5 h-5"})}),r!=="teacher-password"&&r!=="student-password"&&T.jsxs("h1",{className:"text-3xl font-bold text-white mb-8 text-center tracking-tight",children:[r==="role"&&"Who's Learning?",r==="student-form"&&"Student Profile",r==="teacher-form"&&"Teacher Profile"]}),T.jsxs(co,{mode:"wait",children:[r==="role"&&T.jsxs(en.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid gap-4",children:[T.jsxs("button",{onClick:()=>E("student"),className:"group flex items-center gap-6 p-6 bg-[#333] hover:bg-[#444] rounded-lg transition-all border border-transparent hover:border-white/20",children:[T.jsx("div",{className:"p-3 bg-blue-600/20 rounded-lg group-hover:scale-110 transition-transform",children:T.jsx(r9,{className:"w-8 h-8 text-blue-400"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("h3",{className:"text-xl font-bold text-white",children:"Student"}),T.jsx("p",{className:"text-sm text-slate-400",children:"Join your class to learn"})]}),T.jsx(_m,{className:"w-6 h-6 text-slate-500 ml-auto group-hover:translate-x-1 transition-transform"})]}),T.jsxs("button",{onClick:()=>E("teacher"),className:"group flex items-center gap-6 p-6 bg-[#333] hover:bg-[#444] rounded-lg transition-all border border-transparent hover:border-white/20",children:[T.jsx("div",{className:"p-3 bg-red-600/20 rounded-lg group-hover:scale-110 transition-transform",children:T.jsx(dm,{className:"w-8 h-8 text-red-500"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("h3",{className:"text-xl font-bold text-white",children:"Teacher"}),T.jsx("p",{className:"text-sm text-slate-400",children:"Manage school & content"})]}),T.jsx(_m,{className:"w-6 h-6 text-slate-500 ml-auto group-hover:translate-x-1 transition-transform"})]})]},"role"),r==="student-form"&&T.jsxs(en.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:I,className:"space-y-5",children:[T.jsx(Qa,{label:"Full Name",value:m.name,onChange:j=>g("name",j),placeholder:"e.g. Rahul Kumar"}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Standard / Class"}),T.jsx("div",{className:"grid grid-cols-5 gap-2",children:["1","2","3","4","5","6","7","8","9","10"].map(j=>{const B=j+(j==="1"?"st":j==="2"?"nd":j==="3"?"rd":"th");return T.jsx("button",{type:"button",onClick:()=>g("classId",j),className:`p-2 rounded text-xs font-bold transition-all border ${m.classId===j?"bg-blue-600/20 text-blue-400 border-blue-600":"bg-[#333] text-gray-400 border-transparent hover:bg-[#444]"}`,children:B},j)})})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Medium of Education"}),T.jsx("div",{className:"grid grid-cols-2 gap-3",children:["english","marathi"].map(j=>T.jsx("button",{type:"button",onClick:()=>g("medium",j),className:`p-3 rounded text-sm font-bold capitalize transition-all border ${m.medium===j?"bg-red-600/20 text-red-500 border-red-600":"bg-[#333] text-gray-400 border-transparent hover:bg-[#444]"}`,children:j},j))})]}),T.jsx(Qa,{label:"Roll Number",value:m.rollNo,onChange:j=>g("rollNo",j),placeholder:"e.g. 24"}),T.jsx(Qa,{label:"Date of Birth",type:"date",value:m.birthdate,onChange:j=>g("birthdate",j)}),T.jsx("button",{type:"submit",disabled:o,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded mt-6 transition-colors shadow-lg shadow-black/40 disabled:opacity-50",children:"Next"})]},"student-form"),r==="student-join-class"&&T.jsxs(en.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h2",{className:"text-xl font-bold text-white",children:"Join Your Class"}),T.jsx("p",{className:"text-sm text-slate-400",children:"Enter the 6-character code given by your teacher."})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsx(Qa,{label:"Class Code",value:S,onChange:j=>N(j.toUpperCase()),placeholder:"Ex: X7A9B2",required:!1}),T.jsx("button",{onClick:R,disabled:o||S.length<6,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded transition-colors shadow-lg shadow-blue-900/40 disabled:opacity-50",children:o?"Verifying...":"Verify & Join Class"}),T.jsxs("div",{className:"relative flex py-2 items-center",children:[T.jsx("div",{className:"flex-grow border-t border-gray-600"}),T.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-400 text-xs uppercase",children:"OR"}),T.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),T.jsx("button",{onClick:()=>i("student-password"),className:"w-full bg-white/5 hover:bg-white/10 text-slate-300 font-bold py-3 rounded transition-colors border border-white/10",children:"Skip (Self Study)"})]})]},"student-join-class"),r==="student-password"&&T.jsx(en.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex justify-center",children:T.jsx(ab,{title:"Set PIN",description:"Create a 4-digit secret code",onSubmit:async j=>{h(!0);try{await e({...m,pin:j,avatarId:""}),t("/dashboard")}catch(B){console.error(B),h(!1)}}})},"student-password"),r==="teacher-form"&&T.jsxs(en.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:D,className:"space-y-4",children:[T.jsx(Qa,{label:"Full Name",value:m.name,onChange:j=>g("name",j),placeholder:"e.g. Priya Sharma"}),T.jsx(Qa,{label:"School Name",value:m.schoolName,onChange:j=>g("schoolName",j),placeholder:"e.g. GramSiksha High"}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsx(Qa,{label:"Village/City",value:m.villageName,onChange:j=>g("villageName",j),placeholder:"Village"}),T.jsx(Qa,{label:"State",value:m.state,onChange:j=>g("state",j),placeholder:"State"})]}),T.jsx(Qa,{label:"Country",value:m.country,onChange:j=>g("country",j),placeholder:"Country"}),T.jsx(Qa,{label:"Device IP (Auto/Manual)",value:m.ipAddress,onChange:j=>g("ipAddress",j),placeholder:"e.g. 192.168.1.5",required:!1}),T.jsx("button",{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded mt-6 transition-colors shadow-lg shadow-black/40",children:"Next"})]},"teacher-form"),r==="teacher-password"&&T.jsx(en.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex justify-center",children:T.jsx(ab,{title:"Set Access PIN",description:"Create a 4-digit security code",onSubmit:async j=>{h(!0);try{await e({...m,pin:j,avatarId:""}),t("/teacher")}catch(B){console.error(B),h(!1)}}})},"teacher-password")]})]})]})}const n8=async(t,e)=>{const r=(await t.users.find().exec()).filter(y=>{const g=y.get("role")!=="teacher";return e?g&&y.get("teacherClassId")===e:g}),i=await t.progress.find().exec(),o={},h={};i.forEach(y=>{const g=y.get("userId"),E=y.get("score")||0,S=y.get("stars")||0;o[g]||(o[g]=0),h[g]||(h[g]=0),h[g]+=S,o[g]+=E});const m=r.map(y=>({id:y.get("id"),name:y.get("name"),avatarId:y.get("avatarId"),totalStars:h[y.get("id")]||0,totalScore:o[y.get("id")]||0,rank:0}));return m.sort((y,g)=>g.totalStars!==y.totalStars?g.totalStars-y.totalStars:g.totalScore-y.totalScore),m.map((y,g)=>({...y,rank:g+1}))};function RG(){const{currentUser:t}=fs(),{db:e}=Di(),n=Ti(),{t:r}=xh(),[i,o]=W.useState({stars:0,xp:0,completed:0,rank:0}),[h,m]=W.useState(!0),[y,g]=W.useState(0),[E,S]=W.useState(null),N=[{title:r("nav.my_class"),icon:ID,path:"/learn",color:"from-cyan-400 to-blue-400",desc:r("nav.subjects_lessons"),shadow:"shadow-cyan-500/50"},{title:r("nav.homework"),icon:Sc,path:"/homework",color:"from-purple-400 to-pink-400",desc:r("nav.pending_assignments"),shadow:"shadow-purple-500/50"},{title:r("nav.leaderboard"),icon:Tf,path:"/leaderboard",color:"from-yellow-400 to-orange-400",desc:r("nav.class_rankings"),shadow:"shadow-yellow-500/50"},{title:r("nav.village_rank"),icon:o5,path:"/village",color:"from-blue-400 to-indigo-400",desc:r("nav.community_standing"),shadow:"shadow-blue-500/50"},{title:r("nav.recently_sync"),icon:a5,path:"/sync",color:"from-emerald-400 to-green-400",desc:r("nav.sync_history"),shadow:"shadow-emerald-500/50"},{title:r("nav.attendance"),icon:s5,path:"/attendance",color:"from-rose-400 to-red-400",desc:r("nav.track_presence"),shadow:"shadow-rose-500/50"}];return W.useEffect(()=>{if(!e||!t)return;(async()=>{const R=await e.progress.find({selector:{userId:t.id}}).exec();let D=0,j=0,B=0;R.forEach(ee=>{D+=ee.get("stars")||0,j+=ee.get("xp")||0,B+=1});const V=(await n8(e,t.teacherClassId)).find(ee=>ee.id===t.id),se=V?V.rank:0;o({stars:D,xp:j,completed:B,rank:se}),m(!1)})()},[e,t]),W.useEffect(()=>{const I=setInterval(()=>{g(R=>(R+1)%3)},3e3);return()=>clearInterval(I)},[]),h?T.jsx("div",{className:"min-h-screen grid place-items-center text-cyan-400 animate-pulse",children:"Initializing Interface..."}):T.jsxs("div",{className:"min-h-screen p-4 pb-24 font-sans relative animate-fade-in",children:[T.jsx("div",{className:"cosmic-bg"}),T.jsxs("header",{className:"flex justify-between items-center mb-8 pt-2",children:[T.jsxs("div",{children:[T.jsxs("h1",{className:"text-3xl font-black text-white tracking-tight drop-shadow-lg",children:[r("dashboard.hello",{name:""})," ",T.jsx("span",{className:"bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:t?.name})]}),T.jsx("p",{className:"text-sm text-slate-400 font-medium tracking-wide",children:r("dashboard.ready")})]}),T.jsx("div",{className:"flex gap-4",children:T.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center overflow-hidden",children:T.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${t?.avatarId}`,alt:"avatar"})})})]}),T.jsx("div",{className:"mb-8 relative h-48 flex items-center justify-center",children:T.jsxs(co,{mode:"wait",children:[y===0&&T.jsx(en.div,{initial:{opacity:0,scale:.8,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:.8,filter:"blur(10px)"},transition:{duration:.5},className:"absolute inset-0 flex items-center justify-center",children:T.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[T.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center mb-2",children:[T.jsx(en.div,{animate:{rotate:360},transition:{duration:10,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border border-cyan-500/30 border-dashed"}),T.jsx(en.div,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute inset-2 rounded-full border-2 border-transparent border-t-cyan-500/80 border-b-cyan-500/20"}),T.jsxs("div",{className:"absolute inset-6 rounded-full bg-black/80 backdrop-blur-md border border-cyan-500/50 flex flex-col items-center justify-center shadow-[0_0_50px_rgba(6,182,212,0.6)]",children:[T.jsx(h5,{className:"w-10 h-10 text-cyan-400 fill-cyan-400 mb-1 drop-shadow-md"}),T.jsx("span",{className:"text-2xl font-black text-white leading-none tracking-tighter",children:i.xp}),T.jsx("span",{className:"text-[8px] text-cyan-500 font-bold uppercase tracking-widest mt-1",children:r("dashboard.xp")})]})]}),T.jsx("div",{className:"text-center",children:T.jsx("p",{className:"text-cyan-400 font-bold tracking-[0.3em] uppercase text-xs drop-shadow-lg",children:r("dashboard.system_energy")})})]})},"xp"),y===1&&T.jsx(en.div,{initial:{opacity:0,scale:.8,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:.8,filter:"blur(10px)"},transition:{duration:.5},className:"absolute inset-0 flex items-center justify-center",children:T.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[T.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center mb-2",children:[T.jsx(en.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border border-yellow-500/30 border-dashed"}),T.jsx(en.div,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute inset-2 rounded-full border-2 border-transparent border-t-yellow-500/80 border-b-yellow-500/20"}),T.jsxs("div",{className:"absolute inset-6 rounded-full bg-black/80 backdrop-blur-md border border-yellow-500/50 flex flex-col items-center justify-center shadow-[0_0_50px_rgba(234,179,8,0.5)]",children:[T.jsx(Tf,{className:"w-8 h-8 text-yellow-400 mb-1 drop-shadow-md"}),T.jsxs("span",{className:"text-3xl font-black text-white leading-none tracking-tighter",children:["#",i.rank>0?i.rank:"-"]})]})]}),T.jsx("div",{className:"text-center",children:T.jsx("p",{className:"text-yellow-500 font-bold tracking-[0.3em] uppercase text-xs drop-shadow-lg",children:r("dashboard.elite_status")})})]})},"rank"),y===2&&T.jsx(en.div,{initial:{opacity:0,scale:.8,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:.8,filter:"blur(10px)"},transition:{duration:.5},className:"absolute inset-0 flex items-center justify-center",children:T.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[T.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center mb-2",children:[T.jsx(en.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},className:"absolute inset-0 border border-fuchsia-500/30 rounded-full skew-x-12"}),T.jsx(en.div,{animate:{rotate:-360},transition:{duration:12,repeat:1/0,ease:"linear"},className:"absolute inset-2 border border-fuchsia-500/20 rounded-full skew-y-12"}),T.jsxs("div",{className:"absolute inset-8 rounded-full bg-black/80 backdrop-blur-md border border-fuchsia-500/50 flex flex-col items-center justify-center shadow-[0_0_60px_rgba(232,121,249,0.5)]",children:[T.jsx(Sc,{className:"w-8 h-8 text-fuchsia-400 fill-fuchsia-400 mb-1"}),T.jsx("span",{className:"text-2xl font-black text-white leading-none tracking-tighter",children:i.stars})]})]}),T.jsx("div",{className:"text-center",children:T.jsx("p",{className:"text-fuchsia-500 font-bold tracking-[0.3em] uppercase text-xs drop-shadow-lg",children:r("dashboard.star_currency")})})]})},"stars")]})}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6 relative z-10 max-w-4xl mx-auto perspective-1000",children:N.map((I,R)=>{const D=E===R;return T.jsxs(en.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0,scale:D?1.02:1},transition:{delay:R*.1,duration:.3},onMouseEnter:()=>S(R),onMouseLeave:()=>S(null),onClick:()=>n(I.path),className:`group relative h-40 lg:h-48 rounded-3xl overflow-hidden glass-panel border transition-all duration-300 text-left p-6 flex flex-col justify-between
                                ${D?`border-white/40 shadow-2xl ${I.shadow} z-20`:"border-white/5 shadow-lg z-10"}
                            `,children:[T.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:T.jsx(I.icon,{className:"w-24 h-24 text-white"})}),T.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${I.color} p-0.5 shadow-lg group-hover:scale-110 transition-transform`,children:T.jsx("div",{className:"w-full h-full bg-black/50 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:T.jsx(I.icon,{className:"w-6 h-6 text-white"})})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-cyan-400 transition-colors mb-1",children:I.title}),T.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase tracking-wider",children:I.desc})]})]},I.title)})})]})}const MG=(t,e)=>{const n=t/e;let r=0,i=0;return n>=.6&&(r=1),n>=.8&&(r=2),n===1&&(r=3),r===1&&(i=10),r===2&&(i=25),r===3&&(i=50),{score:Math.round(n*100),total:e,stars:r,passed:r>0,coinsEarned:i}};function DG({questions:t,onComplete:e,onExit:n}){const[r,i]=W.useState(0),[o,h]=W.useState(null),[m,y]=W.useState(!1),[g,E]=W.useState(0),S=t[r],N=B=>{m||h(B)},I=()=>{if(o===null)return;Number(o)===Number(S.correctAnswer)&&E(H=>H+1),y(!0)},R=()=>{y(!0)},D=()=>{r<t.length-1?(i(B=>B+1),h(null),y(!1)):j()},j=()=>{const B=MG(g,t.length);e(B)};return T.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-slate-100 overflow-hidden",children:[T.jsxs("header",{className:"h-16 px-4 flex items-center justify-between border-b border-white/10 bg-slate-950/80 backdrop-blur-md z-10 shrink-0",children:[T.jsx("button",{onClick:n,className:"text-sm font-medium text-slate-400 hover:text-white transition-colors",children:"Exit"}),T.jsxs("div",{className:"px-3 py-1 bg-white/10 rounded-full text-xs font-bold text-primary-400 border border-white/5",children:["Question ",r+1," / ",t.length]})]}),T.jsx("div",{className:"flex-1 overflow-y-auto p-6 pb-32 scrollbar-hide",children:T.jsx(co,{mode:"wait",children:T.jsxs(en.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:"max-w-2xl mx-auto space-y-8",children:[T.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white leading-relaxed",children:S.text}),T.jsx("div",{className:"space-y-3",children:S.options.map((B,H)=>{let V="border-slate-700 bg-slate-800/50 text-slate-300 hover:bg-slate-800";if(o===H&&(V="border-primary-500 bg-primary-500/20 text-white ring-2 ring-primary-500/50"),m){const se=Number(S.correctAnswer)===H;se?V="border-green-500 bg-green-500/20 text-white":o===H&&!se?V="border-red-500 bg-red-500/20 text-white opacity-50":V="border-slate-800 bg-slate-900/50 text-slate-600 opacity-50"}return T.jsx("button",{onClick:()=>N(H),disabled:m,className:`w-full p-4 rounded-xl border-2 text-left font-medium transition-all transform active:scale-[0.98] relative z-20 ${V}`,children:T.jsxs("div",{className:"flex items-center justify-between pointer-events-none",children:[T.jsx("span",{children:B}),m&&Number(S.correctAnswer)===H&&T.jsx(rh,{className:"text-green-500 w-5 h-5"}),m&&o===H&&Number(S.correctAnswer)!==H&&T.jsx(qD,{className:"text-red-500 w-5 h-5"})]})},H)})})]},r)})}),T.jsx("div",{className:"h-24 px-4 border-t border-white/10 bg-slate-950/80 backdrop-blur-md z-30 shrink-0 flex items-center justify-center pb-4",children:T.jsx("div",{className:"w-full max-w-2xl flex gap-3",children:m?T.jsxs("button",{onClick:D,className:`w-full font-bold py-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 z-30 ${Number(S.correctAnswer)===o?"bg-green-600 hover:bg-green-500 shadow-green-500/20 text-white":"bg-white/10 hover:bg-white/20 text-white"}`,children:[r===t.length-1?"Finish Quiz":"Next Question"," ",T.jsx(i5,{className:"w-5 h-5"})]}):T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:R,className:"px-6 py-4 rounded-xl font-bold text-slate-400 hover:bg-white/5 hover:text-white transition-colors z-30",children:T.jsx(A9,{className:"w-6 h-6"})}),T.jsxs("button",{onClick:I,disabled:o===null,className:`flex-1 font-bold py-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 z-30 ${o!==null?"bg-primary text-primary-foreground hover:bg-primary/90 shadow-primary/20":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:["Submit Answer ",T.jsx(w9,{className:"w-4 h-4"})]})]})})})]})}const LG=[{code:"en",label:"English"},{code:"hi",label:"Hindi"},{code:"mr",label:"Marathi"}];function BC({data:t,onComplete:e,onExit:n}){const[r,i]=W.useState("list"),[o,h]=W.useState(null),[m,y]=W.useState("en");if(!t)return T.jsx("div",{className:"p-10 text-center text-slate-400",children:"Loading lesson content..."});const g=()=>t.translations&&t.translations[m]?t.translations[m]:t.translations&&t.translations.en?t.translations.en:t.content?t.content:t.sections&&t.sections.length>0?t.sections.map(R=>`<h3>${R.title}</h3><p>${R.content}</p>`).join("<hr/>"):null,E=g(),S=t.attachments?.find(R=>R.name==="TextBook.pdf"),N=t.attachments?.filter(R=>R.name!=="TextBook.pdf")||[],I=(R,D,j)=>{h({type:R,content:D,name:j}),i("viewer")};return r==="list"?T.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-slate-100 aurora-bg",children:[T.jsxs("header",{className:"h-16 px-4 flex items-center justify-between border-b border-white/10 bg-slate-950/60 backdrop-blur-xl z-10 shrink-0 sticky top-0",children:[T.jsx("button",{onClick:n,className:"text-sm font-bold text-slate-300 hover:text-white px-3 py-1.5 rounded-lg hover:bg-white/10 transition-colors",children:" Back"}),T.jsx("h2",{className:"font-bold text-white",children:"Lesson Resources"}),T.jsx("div",{className:"w-10"})]}),T.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 pb-32 scrollbar-hide",children:T.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[S?T.jsxs(en.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>I("pdf",S.data,S.name),className:"w-full text-left p-6 rounded-3xl bg-gradient-to-br from-red-500/10 to-orange-500/10 border border-red-500/20 hover:border-red-500/50 hover:bg-red-500/20 transition-all group flex items-start gap-4",children:[T.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-500/20 flex items-center justify-center shrink-0 border border-red-500/30 group-hover:scale-110 transition-transform",children:T.jsx("div",{className:"text-xl font-bold text-red-400",children:"PDF"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-bold text-white mb-1 group-hover:text-red-400 transition-colors",children:"TextBook"}),T.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"Official Digital Textbook PDF"})]})]}):T.jsx("div",{className:"p-4 border border-dashed border-white/10 rounded-2xl text-center text-slate-500 text-sm",children:"No Textbook Linked"}),E&&T.jsxs(en.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>I("html",E,"Lesson Notes"),className:"w-full text-left p-6 rounded-3xl glass-panel border-white/5 hover:border-cyan-500/50 hover:bg-white/5 transition-all group flex items-start gap-4",children:[T.jsx("div",{className:"w-14 h-14 rounded-2xl bg-cyan-500/20 flex items-center justify-center shrink-0 border border-cyan-500/30 group-hover:scale-110 transition-transform",children:T.jsx(bd,{className:"w-8 h-8 text-cyan-400"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-bold text-white mb-1 group-hover:text-cyan-400 transition-colors",children:"Lesson Notes"}),T.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"Key concepts and summary"})]})]}),N.map((R,D)=>T.jsxs(en.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2+D*.05},onClick:()=>I(R.type.includes("pdf")||R.name.endsWith(".pdf")?"pdf":"unknown",R.data,R.name),className:"w-full text-left p-6 rounded-3xl glass-panel border-white/5 hover:border-purple-500/50 hover:bg-white/5 transition-all group flex items-start gap-4",children:[T.jsx("div",{className:"w-14 h-14 rounded-2xl bg-purple-500/20 flex items-center justify-center shrink-0 border border-purple-500/30 group-hover:scale-110 transition-transform",children:T.jsx(a5,{className:"w-8 h-8 text-purple-400"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-bold text-white mb-1 group-hover:text-purple-400 transition-colors",children:R.name}),T.jsx("p",{className:"text-sm text-slate-400 font-medium uppercase",children:R.type.split("/")[1]||"FILE"})]})]},R.id))]})})]}):T.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-slate-100 aurora-bg",children:[T.jsxs("header",{className:"h-16 px-4 flex items-center justify-between border-b border-white/10 bg-slate-950/60 backdrop-blur-xl z-20 shrink-0 sticky top-0",children:[T.jsx("button",{onClick:()=>i("list"),className:"text-sm font-bold text-slate-300 hover:text-white px-3 py-1.5 rounded-lg hover:bg-white/10 transition-colors flex items-center gap-2",children:"Start Back"}),T.jsx("h2",{className:"font-bold text-white line-clamp-1 max-w-[50%]",children:o?.name}),T.jsx("div",{className:"flex gap-1 bg-black/20 rounded-xl p-1 border border-white/5",children:o?.type==="html"&&LG.map(R=>T.jsx("button",{onClick:()=>y(R.code),className:`px-3 py-1 text-xs font-bold rounded-lg transition-all ${m===R.code?"bg-cyan-500/20 text-cyan-400 shadow-sm border border-cyan-500/30":"text-slate-500 hover:text-slate-300"}`,children:R.label},R.code))})]}),T.jsx("div",{className:"flex-1 overflow-y-auto w-full h-full relative",children:o?.type==="pdf"?T.jsx("div",{className:"w-full h-full bg-slate-900 flex flex-col items-center justify-center p-4",children:T.jsx("object",{data:o.content,type:"application/pdf",className:"w-full h-full rounded-xl shadow-2xl border border-white/10",children:T.jsxs("div",{className:"text-center text-slate-500 space-y-4",children:[T.jsx("p",{children:"Preview not available."}),T.jsx("a",{href:o.content,download:o.name,className:"px-6 py-3 bg-blue-600 rounded-xl text-white font-bold inline-block",children:"Download PDF"})]})})}):o?.type==="html"?T.jsx("div",{className:"p-4 md:p-8 max-w-3xl mx-auto pb-32",children:T.jsx("div",{className:`prose prose-invert prose-lg max-w-none \r
                            prose-headings:text-transparent prose-headings:bg-clip-text prose-headings:bg-gradient-to-r prose-headings:from-cyan-400 prose-headings:to-blue-400\r
                            prose-p:text-slate-300 prose-strong:text-white prose-li:text-slate-300\r
                            glass-panel p-6 md:p-10 rounded-3xl`,dangerouslySetInnerHTML:{__html:g()||""}})}):T.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 gap-4",children:[T.jsx("p",{children:"File type not supported for preview."}),T.jsx("a",{href:o.content,download:o.name,className:"px-6 py-3 bg-white/10 rounded-xl hover:bg-white/20 text-white transition-colors",children:"Download File"})]})})]})}function kG(){const{levelId:t}=yd(),e=Ti(),{db:n}=Di(),{currentUser:r}=fs(),[i,o]=W.useState(!0),[h,m]=W.useState(null),[y,g]=W.useState([]),[E,S]=W.useState(null),[N,I]=W.useState(!1);W.useEffect(()=>{!n||!t||n.content.findOne(t).exec().then(async D=>{if(D){let j=D.toJSON();const B=j.type;if(B==="lesson"||B==="module"||B==="text"){const H=j.data||{},V=H.attachments||[];if(!V.some(se=>se.name==="TextBook.pdf")){console.log("Auto-Seeding Missing Textbook...");const ee=[...V,{id:va(),name:"TextBook.pdf",type:"application/pdf",data:"data:application/pdf;base64,JVBERi0xLjcKCjEgMCBvYmoKPDwvVHlwZSAvQ2F0YWxvZwovUGFnZXMgMiAwIFIKPj4KZW5kb2JqCgoyIDAgb2JqCjw8L1R5cGUgL1BhZ2VzCi9LaWRzIFszIDAgUl0KL0NvdW50IDEKPj4KZW5kb2JqCgozIDAgb2JqCjw8L1R5cGUgL1BhZ2wJL01lZGlhQm94IFswIDAgNTk1LjI4IDg0MS44OV0KL1Jlc291cmNlcyA8PC9Qcm9jU2V0IFsvUERGXS4+PgovQ29udGVudHMgNCAwIFIKPj4KZW5kb2JqCgo0IDAgb2JqCjw8L0xlbmd0aCA0ND4+CnN0cmVhbQpxCjEwMCAxMDAgTDc1IDIwMCByZQpTClFZW5kc3RyZWFtCmVuZG9iagoKeHJlZgowIDUKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDEwIDAwMDAwIG4gCjAwMDAwMDAwNjAgMDAwMDAgbiAKMDAwMDAwMDExNyAwMDAwMCBuIAowMDAwMDAwMjI0IDAwMDAwIG4gCnRyYWlsZXIKPDwvU2l6ZSA1Ci9Sb290IDEgMCBSCj4+CnN0YXJ0eHJlZgoyNzUKJSVFT0YK"}];await D.patch({data:{...H,attachments:ee}}),j={...j,data:{...H,attachments:ee}}}}m(j),(j.type==="module"||j.type==="lesson")&&n.content.find().exec().then(H=>{const V=H.map(se=>se.toJSON()).filter(se=>se.moduleId===t).sort((se,ee)=>(se.createdAt||0)-(ee.createdAt||0));g(V)})}else console.error("Level not found"),e("/dashboard");o(!1)})},[n,t,e]);const R=async D=>{if(!n||!r||!t)return;S(D);const B=(await n.progress.find({selector:{userId:r.id,levelId:t}}).exec())[0];B?D.score>B.get("score")&&await B.patch({score:D.score,stars:Math.max(D.stars,B.get("stars")),timestamp:Date.now()}):await n.progress.insert({id:va(),userId:r.id,levelId:t,score:D.score,stars:D.stars,timestamp:Date.now()})};if(i)return T.jsx("div",{className:"text-white p-6",children:"Loading Level..."});if(!h)return null;if(E)return T.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-6 space-y-8 text-center",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("h1",{className:"text-4xl font-bold text-white",children:E.passed?"Level Complete!":"Try Again"}),T.jsxs("p",{className:"text-slate-400",children:["You scored ",E.score,"%"]})]}),T.jsx("div",{className:"flex gap-4",children:[1,2,3].map(D=>T.jsx(Sc,{className:`w-12 h-12 ${D<=E.stars?"text-yellow-400 fill-yellow-400":"text-slate-700"}`},D))}),E.passed&&T.jsx("div",{className:"bg-slate-800 p-4 rounded-xl border border-white/10",children:T.jsxs("span",{className:"text-yellow-400 font-bold text-xl",children:["+",E.coinsEarned," Coins"]})}),T.jsxs("div",{className:"flex gap-4 w-full max-w-xs",children:[T.jsxs("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white py-4 rounded-xl flex items-center justify-center gap-2",children:[T.jsx(p9,{className:"w-5 h-5"})," Retry"]}),T.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex-1 bg-primary-600 hover:bg-primary-500 text-white py-4 rounded-xl flex items-center justify-center gap-2 font-bold shadow-lg shadow-primary-500/20",children:[T.jsx(av,{className:"w-5 h-5"})," Done"]})]})]});if(h.type==="quiz")return T.jsx("div",{className:"h-full bg-transparent",children:T.jsx(DG,{questions:h.data.questions,onComplete:R,onExit:()=>e("/dashboard")})});if(h.type==="text")return T.jsx("div",{className:"h-full bg-transparent",children:T.jsx(BC,{data:h.data||h,onComplete:R,onExit:()=>e("/dashboard")})});if(N)return T.jsx("div",{className:"h-full bg-transparent",children:T.jsx(BC,{data:h.data||h,onComplete:R,onExit:()=>I(!1)})});if(h.type==="module"||h.type==="lesson"){const D=h.type==="lesson"&&(h.data?.content||h.data?.translations||h.data?.attachments?.some(j=>j.name==="TextBook.pdf"));return T.jsxs("div",{className:"min-h-screen p-6 bg-slate-950 text-white font-sans animate-fade-in relative",children:[T.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-950 to-slate-950 -z-10"}),T.jsxs("header",{className:"flex items-center gap-4 mb-8",children:[T.jsx("button",{onClick:()=>e("/learn"),className:"p-3 glass-panel rounded-xl text-slate-400 hover:text-white transition-colors",children:T.jsx(av,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400",children:h.title}),T.jsxs("p",{className:"text-sm text-slate-400",children:[y.length+(D?1:0)," items"]})]})]}),T.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[D&&T.jsxs("button",{onClick:()=>I(!0),className:"w-full glass-panel p-6 rounded-2xl flex items-center gap-4 group hover:bg-white/5 transition-all text-left border border-white/5 hover:border-indigo-500/30 mb-4 bg-indigo-500/10",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500 flex items-center justify-center text-white shadow-lg shadow-indigo-500/20",children:T.jsx(nh,{className:"w-6 h-6"})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:"font-bold text-lg text-white group-hover:text-indigo-300 transition-colors",children:"Start Reading"}),T.jsx("p",{className:"text-sm text-slate-400",children:"Main Lesson Content / Textbook"})]}),T.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsx("span",{className:"px-3 py-1 bg-indigo-500 rounded-lg text-xs font-bold",children:"OPEN"})})]}),y.map(j=>T.jsxs("button",{onClick:()=>e(`/play/${j.id}`),className:"w-full glass-panel p-6 rounded-2xl flex items-center gap-4 group hover:bg-white/5 transition-all text-left border border-white/5 hover:border-indigo-500/30",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center text-indigo-400 group-hover:scale-110 transition-transform shadow-lg shadow-indigo-500/10",children:j.type==="quiz"?"?":""}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:"font-bold text-lg text-white group-hover:text-indigo-300 transition-colors",children:j.title}),T.jsx("p",{className:"text-sm text-slate-500",children:j.type==="quiz"?"Quiz Assessment":"Study Material"})]}),T.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0",children:T.jsx("span",{className:"text-indigo-400 font-bold text-sm",children:"Start "})})]},j.id)),y.length===0&&T.jsxs("div",{className:"text-center py-20 text-slate-500",children:[T.jsx("p",{children:"This module is empty."}),T.jsx("button",{onClick:()=>e("/learn"),className:"text-indigo-400 text-sm mt-4 hover:underline",children:"Go Back"})]})]})]})}return T.jsxs("div",{className:"text-white p-6",children:["Unknown Content Type: ",h.type]})}var _u={},Cy={exports:{}},Ty,PC;function jG(){if(PC)return Ty;PC=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ty=t,Ty}var Ny,UC;function BG(){if(UC)return Ny;UC=1;var t=jG();function e(){}function n(){}return n.resetWarningCache=e,Ny=function(){function r(h,m,y,g,E,S){if(S!==t){var N=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw N.name="Invariant Violation",N}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},Ny}var FC;function r8(){return FC||(FC=1,Cy.exports=BG()()),Cy.exports}var _y,zC;function i8(){return zC||(zC=1,_y={L:1,M:0,Q:3,H:2}),_y}var Oy,HC;function s8(){return HC||(HC=1,Oy={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Oy}var Iy,qC;function PG(){if(qC)return Iy;qC=1;var t=s8();function e(n){this.mode=t.MODE_8BIT_BYTE,this.data=n}return e.prototype={getLength:function(n){return this.data.length},write:function(n){for(var r=0;r<this.data.length;r++)n.put(this.data.charCodeAt(r),8)}},Iy=e,Iy}var Ry,VC;function UG(){if(VC)return Ry;VC=1;var t=i8();function e(n,r){this.totalCount=n,this.dataCount=r}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(n,r){var i=e.getRsBlockTable(n,r);if(i==null)throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+r);for(var o=i.length/3,h=new Array,m=0;m<o;m++)for(var y=i[m*3+0],g=i[m*3+1],E=i[m*3+2],S=0;S<y;S++)h.push(new e(g,E));return h},e.getRsBlockTable=function(n,r){switch(r){case t.L:return e.RS_BLOCK_TABLE[(n-1)*4+0];case t.M:return e.RS_BLOCK_TABLE[(n-1)*4+1];case t.Q:return e.RS_BLOCK_TABLE[(n-1)*4+2];case t.H:return e.RS_BLOCK_TABLE[(n-1)*4+3];default:return}},Ry=e,Ry}var My,GC;function FG(){if(GC)return My;GC=1;function t(){this.buffer=new Array,this.length=0}return t.prototype={get:function(e){var n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)==1},put:function(e,n){for(var r=0;r<n;r++)this.putBit((e>>>n-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},My=t,My}var Dy,KC;function a8(){if(KC)return Dy;KC=1;for(var t={glog:function(n){if(n<1)throw new Error("glog("+n+")");return t.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return t.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)t.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)t.EXP_TABLE[e]=t.EXP_TABLE[e-4]^t.EXP_TABLE[e-5]^t.EXP_TABLE[e-6]^t.EXP_TABLE[e-8];for(var e=0;e<255;e++)t.LOG_TABLE[t.EXP_TABLE[e]]=e;return Dy=t,Dy}var Ly,$C;function o8(){if($C)return Ly;$C=1;var t=a8();function e(n,r){if(n.length==null)throw new Error(n.length+"/"+r);for(var i=0;i<n.length&&n[i]==0;)i++;this.num=new Array(n.length-i+r);for(var o=0;o<n.length-i;o++)this.num[o]=n[o+i]}return e.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length},multiply:function(n){for(var r=new Array(this.getLength()+n.getLength()-1),i=0;i<this.getLength();i++)for(var o=0;o<n.getLength();o++)r[i+o]^=t.gexp(t.glog(this.get(i))+t.glog(n.get(o)));return new e(r,0)},mod:function(n){if(this.getLength()-n.getLength()<0)return this;for(var r=t.glog(this.get(0))-t.glog(n.get(0)),i=new Array(this.getLength()),o=0;o<this.getLength();o++)i[o]=this.get(o);for(var o=0;o<n.getLength();o++)i[o]^=t.gexp(t.glog(n.get(o))+r);return new e(i,0).mod(n)}},Ly=e,Ly}var ky,YC;function zG(){if(YC)return ky;YC=1;var t=s8(),e=o8(),n=a8(),r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(o){for(var h=o<<10;i.getBCHDigit(h)-i.getBCHDigit(i.G15)>=0;)h^=i.G15<<i.getBCHDigit(h)-i.getBCHDigit(i.G15);return(o<<10|h)^i.G15_MASK},getBCHTypeNumber:function(o){for(var h=o<<12;i.getBCHDigit(h)-i.getBCHDigit(i.G18)>=0;)h^=i.G18<<i.getBCHDigit(h)-i.getBCHDigit(i.G18);return o<<12|h},getBCHDigit:function(o){for(var h=0;o!=0;)h++,o>>>=1;return h},getPatternPosition:function(o){return i.PATTERN_POSITION_TABLE[o-1]},getMask:function(o,h,m){switch(o){case r.PATTERN000:return(h+m)%2==0;case r.PATTERN001:return h%2==0;case r.PATTERN010:return m%3==0;case r.PATTERN011:return(h+m)%3==0;case r.PATTERN100:return(Math.floor(h/2)+Math.floor(m/3))%2==0;case r.PATTERN101:return h*m%2+h*m%3==0;case r.PATTERN110:return(h*m%2+h*m%3)%2==0;case r.PATTERN111:return(h*m%3+(h+m)%2)%2==0;default:throw new Error("bad maskPattern:"+o)}},getErrorCorrectPolynomial:function(o){for(var h=new e([1],0),m=0;m<o;m++)h=h.multiply(new e([1,n.gexp(m)],0));return h},getLengthInBits:function(o,h){if(1<=h&&h<10)switch(o){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:return 8;case t.MODE_KANJI:return 8;default:throw new Error("mode:"+o)}else if(h<27)switch(o){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw new Error("mode:"+o)}else if(h<41)switch(o){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw new Error("mode:"+o)}else throw new Error("type:"+h)},getLostPoint:function(o){for(var h=o.getModuleCount(),m=0,y=0;y<h;y++)for(var g=0;g<h;g++){for(var E=0,S=o.isDark(y,g),N=-1;N<=1;N++)if(!(y+N<0||h<=y+N))for(var I=-1;I<=1;I++)g+I<0||h<=g+I||N==0&&I==0||S==o.isDark(y+N,g+I)&&E++;E>5&&(m+=3+E-5)}for(var y=0;y<h-1;y++)for(var g=0;g<h-1;g++){var R=0;o.isDark(y,g)&&R++,o.isDark(y+1,g)&&R++,o.isDark(y,g+1)&&R++,o.isDark(y+1,g+1)&&R++,(R==0||R==4)&&(m+=3)}for(var y=0;y<h;y++)for(var g=0;g<h-6;g++)o.isDark(y,g)&&!o.isDark(y,g+1)&&o.isDark(y,g+2)&&o.isDark(y,g+3)&&o.isDark(y,g+4)&&!o.isDark(y,g+5)&&o.isDark(y,g+6)&&(m+=40);for(var g=0;g<h;g++)for(var y=0;y<h-6;y++)o.isDark(y,g)&&!o.isDark(y+1,g)&&o.isDark(y+2,g)&&o.isDark(y+3,g)&&o.isDark(y+4,g)&&!o.isDark(y+5,g)&&o.isDark(y+6,g)&&(m+=40);for(var D=0,g=0;g<h;g++)for(var y=0;y<h;y++)o.isDark(y,g)&&D++;var j=Math.abs(100*D/h/h-50)/5;return m+=j*10,m}};return ky=i,ky}var jy,XC;function HG(){if(XC)return jy;XC=1;var t=PG(),e=UG(),n=FG(),r=zG(),i=o8();function o(m,y){this.typeNumber=m,this.errorCorrectLevel=y,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var h=o.prototype;return h.addData=function(m){var y=new t(m);this.dataList.push(y),this.dataCache=null},h.isDark=function(m,y){if(m<0||this.moduleCount<=m||y<0||this.moduleCount<=y)throw new Error(m+","+y);return this.modules[m][y]},h.getModuleCount=function(){return this.moduleCount},h.make=function(){if(this.typeNumber<1){var m=1;for(m=1;m<40;m++){for(var y=e.getRSBlocks(m,this.errorCorrectLevel),g=new n,E=0,S=0;S<y.length;S++)E+=y[S].dataCount;for(var S=0;S<this.dataList.length;S++){var N=this.dataList[S];g.put(N.mode,4),g.put(N.getLength(),r.getLengthInBits(N.mode,m)),N.write(g)}if(g.getLengthInBits()<=E*8)break}this.typeNumber=m}this.makeImpl(!1,this.getBestMaskPattern())},h.makeImpl=function(m,y){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var g=0;g<this.moduleCount;g++){this.modules[g]=new Array(this.moduleCount);for(var E=0;E<this.moduleCount;E++)this.modules[g][E]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(m,y),this.typeNumber>=7&&this.setupTypeNumber(m),this.dataCache==null&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,y)},h.setupPositionProbePattern=function(m,y){for(var g=-1;g<=7;g++)if(!(m+g<=-1||this.moduleCount<=m+g))for(var E=-1;E<=7;E++)y+E<=-1||this.moduleCount<=y+E||(0<=g&&g<=6&&(E==0||E==6)||0<=E&&E<=6&&(g==0||g==6)||2<=g&&g<=4&&2<=E&&E<=4?this.modules[m+g][y+E]=!0:this.modules[m+g][y+E]=!1)},h.getBestMaskPattern=function(){for(var m=0,y=0,g=0;g<8;g++){this.makeImpl(!0,g);var E=r.getLostPoint(this);(g==0||m>E)&&(m=E,y=g)}return y},h.createMovieClip=function(m,y,g){var E=m.createEmptyMovieClip(y,g),S=1;this.make();for(var N=0;N<this.modules.length;N++)for(var I=N*S,R=0;R<this.modules[N].length;R++){var D=R*S,j=this.modules[N][R];j&&(E.beginFill(0,100),E.moveTo(D,I),E.lineTo(D+S,I),E.lineTo(D+S,I+S),E.lineTo(D,I+S),E.endFill())}return E},h.setupTimingPattern=function(){for(var m=8;m<this.moduleCount-8;m++)this.modules[m][6]==null&&(this.modules[m][6]=m%2==0);for(var y=8;y<this.moduleCount-8;y++)this.modules[6][y]==null&&(this.modules[6][y]=y%2==0)},h.setupPositionAdjustPattern=function(){for(var m=r.getPatternPosition(this.typeNumber),y=0;y<m.length;y++)for(var g=0;g<m.length;g++){var E=m[y],S=m[g];if(this.modules[E][S]==null)for(var N=-2;N<=2;N++)for(var I=-2;I<=2;I++)N==-2||N==2||I==-2||I==2||N==0&&I==0?this.modules[E+N][S+I]=!0:this.modules[E+N][S+I]=!1}},h.setupTypeNumber=function(m){for(var y=r.getBCHTypeNumber(this.typeNumber),g=0;g<18;g++){var E=!m&&(y>>g&1)==1;this.modules[Math.floor(g/3)][g%3+this.moduleCount-8-3]=E}for(var g=0;g<18;g++){var E=!m&&(y>>g&1)==1;this.modules[g%3+this.moduleCount-8-3][Math.floor(g/3)]=E}},h.setupTypeInfo=function(m,y){for(var g=this.errorCorrectLevel<<3|y,E=r.getBCHTypeInfo(g),S=0;S<15;S++){var N=!m&&(E>>S&1)==1;S<6?this.modules[S][8]=N:S<8?this.modules[S+1][8]=N:this.modules[this.moduleCount-15+S][8]=N}for(var S=0;S<15;S++){var N=!m&&(E>>S&1)==1;S<8?this.modules[8][this.moduleCount-S-1]=N:S<9?this.modules[8][15-S-1+1]=N:this.modules[8][15-S-1]=N}this.modules[this.moduleCount-8][8]=!m},h.mapData=function(m,y){for(var g=-1,E=this.moduleCount-1,S=7,N=0,I=this.moduleCount-1;I>0;I-=2)for(I==6&&I--;;){for(var R=0;R<2;R++)if(this.modules[E][I-R]==null){var D=!1;N<m.length&&(D=(m[N]>>>S&1)==1);var j=r.getMask(y,E,I-R);j&&(D=!D),this.modules[E][I-R]=D,S--,S==-1&&(N++,S=7)}if(E+=g,E<0||this.moduleCount<=E){E-=g,g=-g;break}}},o.PAD0=236,o.PAD1=17,o.createData=function(m,y,g){for(var E=e.getRSBlocks(m,y),S=new n,N=0;N<g.length;N++){var I=g[N];S.put(I.mode,4),S.put(I.getLength(),r.getLengthInBits(I.mode,m)),I.write(S)}for(var R=0,N=0;N<E.length;N++)R+=E[N].dataCount;if(S.getLengthInBits()>R*8)throw new Error("code length overflow. ("+S.getLengthInBits()+">"+R*8+")");for(S.getLengthInBits()+4<=R*8&&S.put(0,4);S.getLengthInBits()%8!=0;)S.putBit(!1);for(;!(S.getLengthInBits()>=R*8||(S.put(o.PAD0,8),S.getLengthInBits()>=R*8));)S.put(o.PAD1,8);return o.createBytes(S,E)},o.createBytes=function(m,y){for(var g=0,E=0,S=0,N=new Array(y.length),I=new Array(y.length),R=0;R<y.length;R++){var D=y[R].dataCount,j=y[R].totalCount-D;E=Math.max(E,D),S=Math.max(S,j),N[R]=new Array(D);for(var B=0;B<N[R].length;B++)N[R][B]=255&m.buffer[B+g];g+=D;var H=r.getErrorCorrectPolynomial(j),V=new i(N[R],H.getLength()-1),se=V.mod(H);I[R]=new Array(H.getLength()-1);for(var B=0;B<I[R].length;B++){var ee=B+se.getLength()-I[R].length;I[R][B]=ee>=0?se.get(ee):0}}for(var J=0,B=0;B<y.length;B++)J+=y[B].totalCount;for(var F=new Array(J),ce=0,B=0;B<E;B++)for(var R=0;R<y.length;R++)B<N[R].length&&(F[ce++]=N[R][B]);for(var B=0;B<S;B++)for(var R=0;R<y.length;R++)B<I[R].length&&(F[ce++]=I[R][B]);return F},jy=o,jy}var Jp={},WC;function qG(){if(WC)return Jp;WC=1,Object.defineProperty(Jp,"__esModule",{value:!0});var t=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var S=arguments[E];for(var N in S)Object.prototype.hasOwnProperty.call(S,N)&&(g[N]=S[N])}return g},e=r8(),n=o(e),r=gh(),i=o(r);function o(g){return g&&g.__esModule?g:{default:g}}function h(g,E){var S={};for(var N in g)E.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(g,N)&&(S[N]=g[N]);return S}var m={bgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,bgD:n.default.string.isRequired,fgColor:n.default.oneOfType([n.default.object,n.default.string]).isRequired,fgD:n.default.string.isRequired,size:n.default.number.isRequired,title:n.default.string,viewBoxSize:n.default.number.isRequired,xmlns:n.default.string},y=(0,r.forwardRef)(function(g,E){var S=g.bgColor,N=g.bgD,I=g.fgD,R=g.fgColor,D=g.size,j=g.title,B=g.viewBoxSize,H=g.xmlns,V=H===void 0?"http://www.w3.org/2000/svg":H,se=h(g,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return i.default.createElement("svg",t({},se,{height:D,ref:E,viewBox:"0 0 "+B+" "+B,width:D,xmlns:V}),j?i.default.createElement("title",null,j):null,i.default.createElement("path",{d:N,fill:S}),i.default.createElement("path",{d:I,fill:R}))});return y.displayName="QRCodeSvg",y.propTypes=m,Jp.default=y,Jp}var QC;function VG(){if(QC)return _u;QC=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.QRCode=void 0;var t=Object.assign||function(D){for(var j=1;j<arguments.length;j++){var B=arguments[j];for(var H in B)Object.prototype.hasOwnProperty.call(B,H)&&(D[H]=B[H])}return D},e=r8(),n=S(e),r=i8(),i=S(r),o=HG(),h=S(o),m=gh(),y=S(m),g=qG(),E=S(g);function S(D){return D&&D.__esModule?D:{default:D}}function N(D,j){var B={};for(var H in D)j.indexOf(H)>=0||Object.prototype.hasOwnProperty.call(D,H)&&(B[H]=D[H]);return B}var I={bgColor:n.default.oneOfType([n.default.object,n.default.string]),fgColor:n.default.oneOfType([n.default.object,n.default.string]),level:n.default.string,size:n.default.number,value:n.default.string.isRequired},R=(0,m.forwardRef)(function(D,j){var B=D.bgColor,H=B===void 0?"#FFFFFF":B,V=D.fgColor,se=V===void 0?"#000000":V,ee=D.level,J=ee===void 0?"L":ee,F=D.size,ce=F===void 0?256:F,de=D.value,ze=N(D,["bgColor","fgColor","level","size","value"]),Q=new h.default(-1,i.default[J]);Q.addData(de),Q.make();var fe=Q.modules;return y.default.createElement(E.default,t({},ze,{bgColor:H,bgD:fe.map(function(he,Ne){return he.map(function(ie,Y){return ie?"":"M "+Y+" "+Ne+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:se,fgD:fe.map(function(he,Ne){return he.map(function(ie,Y){return ie?"M "+Y+" "+Ne+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:j,size:ce,viewBoxSize:fe.length}))});return _u.QRCode=R,R.displayName="QRCode",R.propTypes=I,_u.default=R,_u}var GG=VG();const l8=Zl(GG);var By={exports:{}},ZC;function KG(){return ZC||(ZC=1,(function(t){var e=(function(){var n=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function h(y,g){if(!o[y]){o[y]={};for(var E=0;E<y.length;E++)o[y][y.charAt(E)]=E}return o[y][g]}var m={compressToBase64:function(y){if(y==null)return"";var g=m._compress(y,6,function(E){return r.charAt(E)});switch(g.length%4){default:case 0:return g;case 1:return g+"===";case 2:return g+"==";case 3:return g+"="}},decompressFromBase64:function(y){return y==null?"":y==""?null:m._decompress(y.length,32,function(g){return h(r,y.charAt(g))})},compressToUTF16:function(y){return y==null?"":m._compress(y,15,function(g){return n(g+32)})+" "},decompressFromUTF16:function(y){return y==null?"":y==""?null:m._decompress(y.length,16384,function(g){return y.charCodeAt(g)-32})},compressToUint8Array:function(y){for(var g=m.compress(y),E=new Uint8Array(g.length*2),S=0,N=g.length;S<N;S++){var I=g.charCodeAt(S);E[S*2]=I>>>8,E[S*2+1]=I%256}return E},decompressFromUint8Array:function(y){if(y==null)return m.decompress(y);for(var g=new Array(y.length/2),E=0,S=g.length;E<S;E++)g[E]=y[E*2]*256+y[E*2+1];var N=[];return g.forEach(function(I){N.push(n(I))}),m.decompress(N.join(""))},compressToEncodedURIComponent:function(y){return y==null?"":m._compress(y,6,function(g){return i.charAt(g)})},decompressFromEncodedURIComponent:function(y){return y==null?"":y==""?null:(y=y.replace(/ /g,"+"),m._decompress(y.length,32,function(g){return h(i,y.charAt(g))}))},compress:function(y){return m._compress(y,16,function(g){return n(g)})},_compress:function(y,g,E){if(y==null)return"";var S,N,I={},R={},D="",j="",B="",H=2,V=3,se=2,ee=[],J=0,F=0,ce;for(ce=0;ce<y.length;ce+=1)if(D=y.charAt(ce),Object.prototype.hasOwnProperty.call(I,D)||(I[D]=V++,R[D]=!0),j=B+D,Object.prototype.hasOwnProperty.call(I,j))B=j;else{if(Object.prototype.hasOwnProperty.call(R,B)){if(B.charCodeAt(0)<256){for(S=0;S<se;S++)J=J<<1,F==g-1?(F=0,ee.push(E(J)),J=0):F++;for(N=B.charCodeAt(0),S=0;S<8;S++)J=J<<1|N&1,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=N>>1}else{for(N=1,S=0;S<se;S++)J=J<<1|N,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=0;for(N=B.charCodeAt(0),S=0;S<16;S++)J=J<<1|N&1,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=N>>1}H--,H==0&&(H=Math.pow(2,se),se++),delete R[B]}else for(N=I[B],S=0;S<se;S++)J=J<<1|N&1,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=N>>1;H--,H==0&&(H=Math.pow(2,se),se++),I[j]=V++,B=String(D)}if(B!==""){if(Object.prototype.hasOwnProperty.call(R,B)){if(B.charCodeAt(0)<256){for(S=0;S<se;S++)J=J<<1,F==g-1?(F=0,ee.push(E(J)),J=0):F++;for(N=B.charCodeAt(0),S=0;S<8;S++)J=J<<1|N&1,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=N>>1}else{for(N=1,S=0;S<se;S++)J=J<<1|N,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=0;for(N=B.charCodeAt(0),S=0;S<16;S++)J=J<<1|N&1,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=N>>1}H--,H==0&&(H=Math.pow(2,se),se++),delete R[B]}else for(N=I[B],S=0;S<se;S++)J=J<<1|N&1,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=N>>1;H--,H==0&&(H=Math.pow(2,se),se++)}for(N=2,S=0;S<se;S++)J=J<<1|N&1,F==g-1?(F=0,ee.push(E(J)),J=0):F++,N=N>>1;for(;;)if(J=J<<1,F==g-1){ee.push(E(J));break}else F++;return ee.join("")},decompress:function(y){return y==null?"":y==""?null:m._decompress(y.length,32768,function(g){return y.charCodeAt(g)})},_decompress:function(y,g,E){var S=[],N=4,I=4,R=3,D="",j=[],B,H,V,se,ee,J,F,ce={val:E(0),position:g,index:1};for(B=0;B<3;B+=1)S[B]=B;for(V=0,ee=Math.pow(2,2),J=1;J!=ee;)se=ce.val&ce.position,ce.position>>=1,ce.position==0&&(ce.position=g,ce.val=E(ce.index++)),V|=(se>0?1:0)*J,J<<=1;switch(V){case 0:for(V=0,ee=Math.pow(2,8),J=1;J!=ee;)se=ce.val&ce.position,ce.position>>=1,ce.position==0&&(ce.position=g,ce.val=E(ce.index++)),V|=(se>0?1:0)*J,J<<=1;F=n(V);break;case 1:for(V=0,ee=Math.pow(2,16),J=1;J!=ee;)se=ce.val&ce.position,ce.position>>=1,ce.position==0&&(ce.position=g,ce.val=E(ce.index++)),V|=(se>0?1:0)*J,J<<=1;F=n(V);break;case 2:return""}for(S[3]=F,H=F,j.push(F);;){if(ce.index>y)return"";for(V=0,ee=Math.pow(2,R),J=1;J!=ee;)se=ce.val&ce.position,ce.position>>=1,ce.position==0&&(ce.position=g,ce.val=E(ce.index++)),V|=(se>0?1:0)*J,J<<=1;switch(F=V){case 0:for(V=0,ee=Math.pow(2,8),J=1;J!=ee;)se=ce.val&ce.position,ce.position>>=1,ce.position==0&&(ce.position=g,ce.val=E(ce.index++)),V|=(se>0?1:0)*J,J<<=1;S[I++]=n(V),F=I-1,N--;break;case 1:for(V=0,ee=Math.pow(2,16),J=1;J!=ee;)se=ce.val&ce.position,ce.position>>=1,ce.position==0&&(ce.position=g,ce.val=E(ce.index++)),V|=(se>0?1:0)*J,J<<=1;S[I++]=n(V),F=I-1,N--;break;case 2:return j.join("")}if(N==0&&(N=Math.pow(2,R),R++),S[F])D=S[F];else if(F===I)D=H+H.charAt(0);else return null;j.push(D),S[I++]=H+D.charAt(0),N--,H=D,N==0&&(N=Math.pow(2,R),R++)}}};return m})();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(By)),By.exports}var $G=KG();const Uw=Zl($G),YG=async(t,e)=>{const n=await t.users.findOne(e).exec();if(!n)throw new Error("User not found");const r=n.toJSON(),i=await t.progress.find({selector:{userId:e}}).exec(),o={type:"profile",u:r.id,n:r.name,tn:r.role==="teacher"?r.name:void 0,tp:r.phone||void 0,p:i.map(y=>({l:y.get("levelId"),s:y.get("score"),t:y.get("stars")}))},h=JSON.stringify(o);return Uw.compressToEncodedURIComponent(h)},XG=async(t,e,n)=>{const r=await t.users.findOne(e).exec();if(!r)throw new Error("User not found");const i=await t.content.find({selector:{id:{$in:n}}}).exec(),o={type:"content",u:r.get("id"),n:r.get("name"),c:i.map(m=>m.toJSON())},h=Uw.compressToEncodedURIComponent(JSON.stringify(o));return h.length>2500&&console.warn("Payload size warning:",h.length),h},WG=async(t,e,n)=>{const r=Uw.decompressFromEncodedURIComponent(n);if(!r)throw new Error("Invalid QR Code (Decompression failed)");let i;try{i=JSON.parse(r)}catch{throw new Error("Invalid Data Format")}if(i.type==="profile"||!i.type&&i.p){const o=i;if(!o.u||!Array.isArray(o.p))throw new Error("Invalid Profile Data");let h=0,m=0;for(const y of o.p){const g=await t.progress.findOne({selector:{userId:e,levelId:y.l}}).exec();g?y.s>g.get("score")&&(await g.patch({score:y.s,stars:Math.max(y.t,g.get("stars")),timestamp:Date.now()}),h++):(await t.progress.insert({id:va(),userId:e,levelId:y.l,score:y.s,stars:y.t,timestamp:Date.now()}),h++,m+=y.t)}return JC({title:h>0?"Synced Progress":"Check-in Sync",type:"Progress",teacher:o.tn||o.n,phone:o.tp}),QG(),{success:!0,type:"profile",message:`Synced ${h} levels from ${o.n}`,details:{levelsUpdated:h,newStars:m,importerName:o.n}}}if(i.type==="content"){const o=i;if(!Array.isArray(o.c))throw new Error("Invalid Content Data");let h=0;for(const m of o.c){const y=await t.content.findOne(m.id).exec();y?await y.patch(m):await t.content.insert(m),h++}return JC({title:`Received ${h} Resources`,type:"Content",teacher:o.n}),{success:!0,type:"content",message:`Imported ${h} items from ${o.n}`,details:{itemsImported:h,importerName:o.n}}}throw new Error("Unknown Payload Type")},JC=t=>{try{const e={id:Date.now(),title:t.title,type:t.type,date:new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),teacher:t.teacher,phone:t.phone||"N/A"},n=JSON.parse(localStorage.getItem("sync_history")||"[]");localStorage.setItem("sync_history",JSON.stringify([e,...n].slice(0,20)))}catch(e){console.warn("Failed to save sync log",e)}},QG=()=>{try{const t=new Date().toISOString().split("T")[0],e=JSON.parse(localStorage.getItem("attendance_log")||"[]");e.includes(t)||(localStorage.setItem("attendance_log",JSON.stringify([...e,t])),console.log("Marked Attendance for",t))}catch(t){console.warn("Failed to mark attendance",t)}};function ZG(){const{currentUser:t}=fs(),{db:e}=Di(),[n,r]=W.useState(null),[i,o]=W.useState([]),[h,m]=W.useState(null),[y,g]=W.useState(""),[E,S]=W.useState(!1),[N,I]=W.useState(!1),R=async()=>{if(!(!t||!e)){S(!0);try{const B=await YG(e,t.id);g(B)}catch(B){console.error(B)}finally{S(!1)}}};W.useEffect(()=>{if(!e||n!=="content")return;(async()=>{const H=await e.content.find({selector:{type:{$in:["quiz","lesson"]}},limit:50}).exec();o(H.map(V=>V.toJSON()))})()},[e,n]);const D=async B=>{if(!(!e||!t)){S(!0),m(B);try{const H=await XG(e,t.id,[B]);g(H)}catch(H){console.error(H)}finally{S(!1)}}},j=()=>{y&&(navigator.clipboard.writeText(y),I(!0),setTimeout(()=>I(!1),2e3))};return n?n==="content"&&!h?T.jsxs("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsx("button",{onClick:()=>r(null),className:"text-xs text-slate-400 hover:text-white",children:" Back"}),T.jsx("span",{className:"text-xs font-bold text-emerald-400",children:"Select Item"})]}),i.map(B=>T.jsxs("button",{onClick:()=>D(B.id),className:"w-full text-left p-3 rounded-lg bg-white/5 border border-white/10 hover:bg-emerald-500/20 transition-all",children:[T.jsx("p",{className:"font-bold text-white text-sm line-clamp-1",children:B.title}),T.jsxs("p",{className:"text-xs text-slate-500 uppercase",children:[B.type,"  ",B.medium]})]},B.id))]}):T.jsxs("div",{className:"flex flex-col items-center space-y-6 pt-2",children:[T.jsxs("div",{className:"w-full flex justify-between items-center px-2",children:[T.jsx("button",{onClick:()=>{r(null),m(null)},className:"text-xs text-slate-400 hover:text-white",children:" Change"}),T.jsx("span",{className:"text-sm font-bold text-white",children:n==="profile"?"My Progress":"Shared Content"}),T.jsx("div",{className:"w-8"})]}),E?T.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400 animate-pulse",children:"Generating..."}):T.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-2xl relative group",children:[T.jsx(l8,{value:y,size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-white/90 transition-opacity",children:T.jsx("span",{className:"text-black font-bold text-sm",children:"Scan to Sync"})})]}),T.jsx("p",{className:"text-slate-400 text-xs text-center max-w-xs",children:n==="profile"?"Contains your user ID and level progress.":"Contains the selected Quiz/Lesson data."}),T.jsxs("button",{onClick:j,className:"flex items-center gap-2 text-slate-500 hover:text-white transition-colors text-xs border border-white/10 px-3 py-1.5 rounded-full",children:[N?T.jsx(PD,{className:"w-3 h-3 text-green-400"}):T.jsx(KD,{className:"w-3 h-3"}),N?"Copied":"Copy Payload String"]})]}):T.jsxs("div",{className:"space-y-4",children:[T.jsx("h3",{className:"text-white font-bold mb-4",children:"What do you want to share?"}),T.jsxs("button",{onClick:()=>{r("profile"),R()},className:"w-full text-left p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-cyan-500/20 hover:border-cyan-500/50 transition-all flex items-center gap-4 group",children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 group-hover:bg-cyan-500/30 group-hover:text-cyan-200",children:T.jsx(c5,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-white",children:"My Progress"}),T.jsx("p",{className:"text-xs text-slate-400",children:"Sync scores and stars to another device."})]}),T.jsx(_m,{className:"w-5 h-5 text-slate-500 ml-auto group-hover:text-cyan-400"})]}),T.jsxs("button",{onClick:()=>r("content"),className:"w-full text-left p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-emerald-500/20 hover:border-emerald-500/50 transition-all flex items-center gap-4 group",children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center text-green-400 group-hover:bg-emerald-500/30 group-hover:text-emerald-200",children:T.jsx(bd,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-white",children:"Educational Content"}),T.jsx("p",{className:"text-xs text-slate-400",children:"Share a specific Quiz or Lesson."})]}),T.jsx(_m,{className:"w-5 h-5 text-slate-500 ml-auto group-hover:text-emerald-400"})]})]})}var Tt;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Tt||(Tt={}));var e3=new Map([[Tt.QR_CODE,"QR_CODE"],[Tt.AZTEC,"AZTEC"],[Tt.CODABAR,"CODABAR"],[Tt.CODE_39,"CODE_39"],[Tt.CODE_93,"CODE_93"],[Tt.CODE_128,"CODE_128"],[Tt.DATA_MATRIX,"DATA_MATRIX"],[Tt.MAXICODE,"MAXICODE"],[Tt.ITF,"ITF"],[Tt.EAN_13,"EAN_13"],[Tt.EAN_8,"EAN_8"],[Tt.PDF_417,"PDF_417"],[Tt.RSS_14,"RSS_14"],[Tt.RSS_EXPANDED,"RSS_EXPANDED"],[Tt.UPC_A,"UPC_A"],[Tt.UPC_E,"UPC_E"],[Tt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),t3;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(t3||(t3={}));function JG(t){return Object.values(Tt).includes(t)}var Wl;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Wl||(Wl={}));var Da=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Wl.SCAN_TYPE_CAMERA,Wl.SCAN_TYPE_FILE],t})(),c8=(function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!e3.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,e3.get(e))},t})(),n3=(function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),ob;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(ob||(ob={}));var u8=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:ob.UNKWOWN_ERROR}},t})(),h8=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function Za(t){return typeof t>"u"||t===null}function eK(t,e,n){return t>n?n:t<e?e:t}var Vu=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),sr=(function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t})(),r3=(function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t})(),f8=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),h=Object.keys(e),m=0,y=h;m<y.length;m++){var g=y[m];if(o.has(g))return n.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t})(),xf={exports:{}},tK=xf.exports,i3;function nK(){return i3||(i3=1,(function(t,e){(function(n,r){r(e)})(tK,(function(n){function r(z){return z==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,a){z.__proto__=a}||function(z,a){for(var u in a)a.hasOwnProperty(u)&&(z[u]=a[u])};function o(z,a){i(z,a);function u(){this.constructor=z}z.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}function h(z,a){var u=Object.setPrototypeOf;u?u(z,a):z.__proto__=a}function m(z,a){a===void 0&&(a=z.constructor);var u=Error.captureStackTrace;u&&u(z,a)}var y=(function(z){o(a,z);function a(u){var d=this.constructor,v=z.call(this,u)||this;return Object.defineProperty(v,"name",{value:d.name,enumerable:!1}),h(v,d.prototype),m(v),v}return a})(Error);class g extends y{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}g.kind="Exception";class E extends g{}E.kind="ArgumentException";class S extends g{}S.kind="IllegalArgumentException";class N{constructor(a){if(this.binarizer=a,a===null)throw new S("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,u){return this.binarizer.getBlackRow(a,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,u,d,v){const c=this.binarizer.getLuminanceSource().crop(a,u,d,v);return new N(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends g{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class R{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(a,u,d,v,c){for(;c--;)d[v++]=a[u++]}static currentTimeMillis(){return Date.now()}}class j extends g{}j.kind="IndexOutOfBoundsException";class B extends j{constructor(a=void 0,u=void 0){super(u),this.index=a,this.message=u}}B.kind="ArrayIndexOutOfBoundsException";class H{static fill(a,u){for(let d=0,v=a.length;d<v;d++)a[d]=u}static fillWithin(a,u,d,v){H.rangeCheck(a.length,u,d);for(let c=u;c<d;c++)a[c]=v}static rangeCheck(a,u,d){if(u>d)throw new S("fromIndex("+u+") > toIndex("+d+")");if(u<0)throw new B(u);if(d>a)throw new B(d)}static asList(...a){return a}static create(a,u,d){return Array.from({length:a}).map(c=>Array.from({length:u}).fill(d))}static createInt32Array(a,u,d){return Array.from({length:a}).map(c=>Int32Array.from({length:u}).fill(d))}static equals(a,u){if(!a||!u||!a.length||!u.length||a.length!==u.length)return!1;for(let d=0,v=a.length;d<v;d++)if(a[d]!==u[d])return!1;return!0}static hashCode(a){if(a===null)return 0;let u=1;for(const d of a)u=31*u+d;return u}static fillUint8Array(a,u){for(let d=0;d!==a.length;d++)a[d]=u}static copyOf(a,u){return a.slice(0,u)}static copyOfUint8Array(a,u){if(a.length<=u){const d=new Uint8Array(u);return d.set(a),d}return a.slice(0,u)}static copyOfRange(a,u,d){const v=d-u,c=new Int32Array(v);return D.arraycopy(a,u,c,0,v),c}static binarySearch(a,u,d){d===void 0&&(d=H.numberComparator);let v=0,c=a.length-1;for(;v<=c;){const f=c+v>>1,b=d(u,a[f]);if(b>0)v=f+1;else if(b<0)c=f-1;else return f}return-v-1}static numberComparator(a,u){return a-u}}class V{static numberOfTrailingZeros(a){let u;if(a===0)return 32;let d=31;return u=a<<16,u!==0&&(d-=16,a=u),u=a<<8,u!==0&&(d-=8,a=u),u=a<<4,u!==0&&(d-=4,a=u),u=a<<2,u!==0&&(d-=2,a=u),d-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let u=1;return a>>>16||(u+=16,a<<=16),a>>>24||(u+=8,a<<=8),a>>>28||(u+=4,a<<=4),a>>>30||(u+=2,a<<=2),u-=a>>>31,u}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,u){return Math.trunc(a/u)}static parseInt(a,u=void 0){return parseInt(a,u)}}V.MIN_VALUE_32_BITS=-2147483648,V.MAX_VALUE=Number.MAX_SAFE_INTEGER;class se{constructor(a,u){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,u==null?this.bits=se.makeArray(a):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const u=se.makeArray(a);D.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const u=this.size;if(a>=u)return u;const d=this.bits;let v=Math.floor(a/32),c=d[v];c&=~((1<<(a&31))-1);const f=d.length;for(;c===0;){if(++v===f)return u;c=d[v]}const b=v*32+V.numberOfTrailingZeros(c);return b>u?u:b}getNextUnset(a){const u=this.size;if(a>=u)return u;const d=this.bits;let v=Math.floor(a/32),c=~d[v];c&=~((1<<(a&31))-1);const f=d.length;for(;c===0;){if(++v===f)return u;c=~d[v]}const b=v*32+V.numberOfTrailingZeros(c);return b>u?u:b}setBulk(a,u){this.bits[Math.floor(a/32)]=u}setRange(a,u){if(u<a||a<0||u>this.size)throw new S;if(u===a)return;u--;const d=Math.floor(a/32),v=Math.floor(u/32),c=this.bits;for(let f=d;f<=v;f++){const b=f>d?0:a&31,A=(2<<(f<v?31:u&31))-(1<<b);c[f]|=A}}clear(){const a=this.bits.length,u=this.bits;for(let d=0;d<a;d++)u[d]=0}isRange(a,u,d){if(u<a||a<0||u>this.size)throw new S;if(u===a)return!0;u--;const v=Math.floor(a/32),c=Math.floor(u/32),f=this.bits;for(let b=v;b<=c;b++){const x=b>v?0:a&31,_=(2<<(b<c?31:u&31))-(1<<x)&4294967295;if((f[b]&_)!==(d?_:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,u){if(u<0||u>32)throw new S("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let d=u;d>0;d--)this.appendBit((a>>d-1&1)===1)}appendBitArray(a){const u=a.size;this.ensureCapacity(this.size+u);for(let d=0;d<u;d++)this.appendBit(a.get(d))}xor(a){if(this.size!==a.size)throw new S("Sizes don't match");const u=this.bits;for(let d=0,v=u.length;d<v;d++)u[d]^=a.bits[d]}toBytes(a,u,d,v){for(let c=0;c<v;c++){let f=0;for(let b=0;b<8;b++)this.get(a)&&(f|=1<<7-b),a++;u[d+c]=f}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),d=u+1,v=this.bits;for(let c=0;c<d;c++){let f=v[c];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,a[u-c]=f}if(this.size!==d*32){const c=d*32-this.size;let f=a[0]>>>c;for(let b=1;b<d;b++){const x=a[b];f|=x<<32-c,a[b-1]=f,f=x>>>c}a[d-1]=f}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof se))return!1;const u=a;return this.size===u.size&&H.equals(this.bits,u.bits)}hashCode(){return 31*this.size+H.hashCode(this.bits)}toString(){let a="";for(let u=0,d=this.size;u<d;u++)(u&7)===0&&(a+=" "),a+=this.get(u)?"X":".";return a}clone(){return new se(this.size,this.bits.slice())}}var ee;(function(z){z[z.OTHER=0]="OTHER",z[z.PURE_BARCODE=1]="PURE_BARCODE",z[z.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",z[z.TRY_HARDER=3]="TRY_HARDER",z[z.CHARACTER_SET=4]="CHARACTER_SET",z[z.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",z[z.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",z[z.ASSUME_GS1=7]="ASSUME_GS1",z[z.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",z[z.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",z[z.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ee||(ee={}));var J=ee;class F extends g{static getFormatInstance(){return new F}}F.kind="FormatException";var ce;(function(z){z[z.Cp437=0]="Cp437",z[z.ISO8859_1=1]="ISO8859_1",z[z.ISO8859_2=2]="ISO8859_2",z[z.ISO8859_3=3]="ISO8859_3",z[z.ISO8859_4=4]="ISO8859_4",z[z.ISO8859_5=5]="ISO8859_5",z[z.ISO8859_6=6]="ISO8859_6",z[z.ISO8859_7=7]="ISO8859_7",z[z.ISO8859_8=8]="ISO8859_8",z[z.ISO8859_9=9]="ISO8859_9",z[z.ISO8859_10=10]="ISO8859_10",z[z.ISO8859_11=11]="ISO8859_11",z[z.ISO8859_13=12]="ISO8859_13",z[z.ISO8859_14=13]="ISO8859_14",z[z.ISO8859_15=14]="ISO8859_15",z[z.ISO8859_16=15]="ISO8859_16",z[z.SJIS=16]="SJIS",z[z.Cp1250=17]="Cp1250",z[z.Cp1251=18]="Cp1251",z[z.Cp1252=19]="Cp1252",z[z.Cp1256=20]="Cp1256",z[z.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",z[z.UTF8=22]="UTF8",z[z.ASCII=23]="ASCII",z[z.Big5=24]="Big5",z[z.GB18030=25]="GB18030",z[z.EUC_KR=26]="EUC_KR"})(ce||(ce={}));class de{constructor(a,u,d,...v){this.valueIdentifier=a,this.name=d,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=v,de.VALUE_IDENTIFIER_TO_ECI.set(a,this),de.NAME_TO_ECI.set(d,this);const c=this.values;for(let f=0,b=c.length;f!==b;f++){const x=c[f];de.VALUES_TO_ECI.set(x,this)}for(const f of v)de.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new F("incorect value");const u=de.VALUES_TO_ECI.get(a);if(u===void 0)throw new F("incorect value");return u}static getCharacterSetECIByName(a){const u=de.NAME_TO_ECI.get(a);if(u===void 0)throw new F("incorect value");return u}equals(a){if(!(a instanceof de))return!1;const u=a;return this.getName()===u.getName()}}de.VALUE_IDENTIFIER_TO_ECI=new Map,de.VALUES_TO_ECI=new Map,de.NAME_TO_ECI=new Map,de.Cp437=new de(ce.Cp437,Int32Array.from([0,2]),"Cp437"),de.ISO8859_1=new de(ce.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),de.ISO8859_2=new de(ce.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),de.ISO8859_3=new de(ce.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),de.ISO8859_4=new de(ce.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),de.ISO8859_5=new de(ce.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),de.ISO8859_6=new de(ce.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),de.ISO8859_7=new de(ce.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),de.ISO8859_8=new de(ce.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),de.ISO8859_9=new de(ce.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),de.ISO8859_10=new de(ce.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),de.ISO8859_11=new de(ce.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),de.ISO8859_13=new de(ce.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),de.ISO8859_14=new de(ce.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),de.ISO8859_15=new de(ce.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),de.ISO8859_16=new de(ce.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),de.SJIS=new de(ce.SJIS,20,"SJIS","Shift_JIS"),de.Cp1250=new de(ce.Cp1250,21,"Cp1250","windows-1250"),de.Cp1251=new de(ce.Cp1251,22,"Cp1251","windows-1251"),de.Cp1252=new de(ce.Cp1252,23,"Cp1252","windows-1252"),de.Cp1256=new de(ce.Cp1256,24,"Cp1256","windows-1256"),de.UnicodeBigUnmarked=new de(ce.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),de.UTF8=new de(ce.UTF8,26,"UTF8","UTF-8"),de.ASCII=new de(ce.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),de.Big5=new de(ce.Big5,28,"Big5"),de.GB18030=new de(ce.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),de.EUC_KR=new de(ce.EUC_KR,30,"EUC_KR","EUC-KR");class ze extends g{}ze.kind="UnsupportedOperationException";class Q{static decode(a,u){const d=this.encodingName(u);return this.customDecoder?this.customDecoder(a,d):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(d)?this.decodeFallback(a,d):new TextDecoder(d).decode(a)}static shouldDecodeOnFallback(a){return!Q.isBrowser()&&a==="ISO-8859-1"}static encode(a,u){const d=this.encodingName(u);return this.customEncoder?this.customEncoder(a,d):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof de?a:de.getCharacterSetECIByName(a)}static decodeFallback(a,u){const d=this.encodingCharacterSet(u);if(Q.isDecodeFallbackSupported(d)){let v="";for(let c=0,f=a.length;c<f;c++){let b=a[c].toString(16);b.length<2&&(b="0"+b),v+="%"+b}return decodeURIComponent(v)}if(d.equals(de.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new ze(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(de.UTF8)||a.equals(de.ISO8859_1)||a.equals(de.ASCII)}static encodeFallback(a){const d=btoa(unescape(encodeURIComponent(a))).split(""),v=[];for(let c=0;c<d.length;c++)v.push(d[c].charCodeAt(0));return new Uint8Array(v)}}class fe{static castAsNonUtf8Char(a,u=null){const d=u?u.getName():this.ISO88591;return Q.decode(new Uint8Array([a]),d)}static guessEncoding(a,u){if(u!=null&&u.get(J.CHARACTER_SET)!==void 0)return u.get(J.CHARACTER_SET).toString();const d=a.length;let v=!0,c=!0,f=!0,b=0,x=0,A=0,_=0,M=0,L=0,U=0,q=0,K=0,G=0,Z=0;const re=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let ae=0;ae<d&&(v||c||f);ae++){const le=a[ae]&255;f&&(b>0?(le&128)===0?f=!1:b--:(le&128)!==0&&((le&64)===0?f=!1:(b++,(le&32)===0?x++:(b++,(le&16)===0?A++:(b++,(le&8)===0?_++:f=!1))))),v&&(le>127&&le<160?v=!1:le>159&&(le<192||le===215||le===247)&&Z++),c&&(M>0?le<64||le===127||le>252?c=!1:M--:le===128||le===160||le>239?c=!1:le>160&&le<224?(L++,q=0,U++,U>K&&(K=U)):le>127?(M++,U=0,q++,q>G&&(G=q)):(U=0,q=0))}return f&&b>0&&(f=!1),c&&M>0&&(c=!1),f&&(re||x+A+_>0)?fe.UTF8:c&&(fe.ASSUME_SHIFT_JIS||K>=3||G>=3)?fe.SHIFT_JIS:v&&c?K===2&&L===2||Z*10>=d?fe.SHIFT_JIS:fe.ISO88591:v?fe.ISO88591:c?fe.SHIFT_JIS:f?fe.UTF8:fe.PLATFORM_DEFAULT_ENCODING}static format(a,...u){let d=-1;function v(f,b,x,A,_,M){if(f==="%%")return"%";if(u[++d]===void 0)return;f=A?parseInt(A.substr(1)):void 0;let L=_?parseInt(_.substr(1)):void 0,U;switch(M){case"s":U=u[d];break;case"c":U=u[d][0];break;case"f":U=parseFloat(u[d]).toFixed(f);break;case"p":U=parseFloat(u[d]).toPrecision(f);break;case"e":U=parseFloat(u[d]).toExponential(f);break;case"x":U=parseInt(u[d]).toString(L||16);break;case"d":U=parseFloat(parseInt(u[d],L||10).toPrecision(f)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(L);let q=parseInt(x),K=x&&x[0]+""=="0"?"0":" ";for(;U.length<q;)U=b!==void 0?U+K:K+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(c,v)}static getBytes(a,u){return Q.encode(a,u)}static getCharCode(a,u=0){return a.charCodeAt(u)}static getCharAt(a){return String.fromCharCode(a)}}fe.SHIFT_JIS=de.SJIS.getName(),fe.GB2312="GB2312",fe.ISO88591=de.ISO8859_1.getName(),fe.EUC_JP="EUC_JP",fe.UTF8=de.UTF8.getName(),fe.PLATFORM_DEFAULT_ENCODING=fe.UTF8,fe.ASSUME_SHIFT_JIS=!1;class he{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=fe.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,u,d){for(let v=u;u<u+d;v++)this.append(a[v]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,u){this.value=this.value.substr(0,a)+u+this.value.substr(a+1)}substring(a,u){return this.value.substring(a,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,u){this.value=this.value.substr(0,a)+u+this.value.substr(a+u.length)}}class Ne{constructor(a,u,d,v){if(this.width=a,this.height=u,this.rowSize=d,this.bits=v,u==null&&(u=a),this.height=u,a<1||u<1)throw new S("Both dimensions must be greater than 0");d==null&&(d=Math.floor((a+31)/32)),this.rowSize=d,v==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const u=a.length,d=a[0].length,v=new Ne(d,u);for(let c=0;c<u;c++){const f=a[c];for(let b=0;b<d;b++)f[b]&&v.set(b,c)}return v}static parseFromString(a,u,d){if(a===null)throw new S("stringRepresentation cannot be null");const v=new Array(a.length);let c=0,f=0,b=-1,x=0,A=0;for(;A<a.length;)if(a.charAt(A)===`
`||a.charAt(A)==="\r"){if(c>f){if(b===-1)b=c-f;else if(c-f!==b)throw new S("row lengths do not match");f=c,x++}A++}else if(a.substring(A,A+u.length)===u)A+=u.length,v[c]=!0,c++;else if(a.substring(A,A+d.length)===d)A+=d.length,v[c]=!1,c++;else throw new S("illegal character encountered: "+a.substring(A));if(c>f){if(b===-1)b=c-f;else if(c-f!==b)throw new S("row lengths do not match");x++}const _=new Ne(b,x);for(let M=0;M<c;M++)v[M]&&_.set(Math.floor(M%b),Math.floor(M/b));return _}get(a,u){const d=u*this.rowSize+Math.floor(a/32);return(this.bits[d]>>>(a&31)&1)!==0}set(a,u){const d=u*this.rowSize+Math.floor(a/32);this.bits[d]|=1<<(a&31)&4294967295}unset(a,u){const d=u*this.rowSize+Math.floor(a/32);this.bits[d]&=~(1<<(a&31)&4294967295)}flip(a,u){const d=u*this.rowSize+Math.floor(a/32);this.bits[d]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new S("input matrix dimensions do not match");const u=new se(Math.floor(this.width/32)+1),d=this.rowSize,v=this.bits;for(let c=0,f=this.height;c<f;c++){const b=c*d,x=a.getRow(c,u).getBitArray();for(let A=0;A<d;A++)v[b+A]^=x[A]}}clear(){const a=this.bits,u=a.length;for(let d=0;d<u;d++)a[d]=0}setRegion(a,u,d,v){if(u<0||a<0)throw new S("Left and top must be nonnegative");if(v<1||d<1)throw new S("Height and width must be at least 1");const c=a+d,f=u+v;if(f>this.height||c>this.width)throw new S("The region must fit inside the matrix");const b=this.rowSize,x=this.bits;for(let A=u;A<f;A++){const _=A*b;for(let M=a;M<c;M++)x[_+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(a,u){u==null||u.getSize()<this.width?u=new se(this.width):u.clear();const d=this.rowSize,v=this.bits,c=a*d;for(let f=0;f<d;f++)u.setBulk(f*32,v[c+f]);return u}setRow(a,u){D.arraycopy(u.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),u=this.getHeight();let d=new se(a),v=new se(a);for(let c=0,f=Math.floor((u+1)/2);c<f;c++)d=this.getRow(c,d),v=this.getRow(u-1-c,v),d.reverse(),v.reverse(),this.setRow(c,v),this.setRow(u-1-c,d)}getEnclosingRectangle(){const a=this.width,u=this.height,d=this.rowSize,v=this.bits;let c=a,f=u,b=-1,x=-1;for(let A=0;A<u;A++)for(let _=0;_<d;_++){const M=v[A*d+_];if(M!==0){if(A<f&&(f=A),A>x&&(x=A),_*32<c){let L=0;for(;(M<<31-L&4294967295)===0;)L++;_*32+L<c&&(c=_*32+L)}if(_*32+31>b){let L=31;for(;!(M>>>L);)L--;_*32+L>b&&(b=_*32+L)}}}return b<c||x<f?null:Int32Array.from([c,f,b-c+1,x-f+1])}getTopLeftOnBit(){const a=this.rowSize,u=this.bits;let d=0;for(;d<u.length&&u[d]===0;)d++;if(d===u.length)return null;const v=d/a;let c=d%a*32;const f=u[d];let b=0;for(;(f<<31-b&4294967295)===0;)b++;return c+=b,Int32Array.from([c,v])}getBottomRightOnBit(){const a=this.rowSize,u=this.bits;let d=u.length-1;for(;d>=0&&u[d]===0;)d--;if(d<0)return null;const v=Math.floor(d/a);let c=Math.floor(d%a)*32;const f=u[d];let b=31;for(;!(f>>>b);)b--;return c+=b,Int32Array.from([c,v])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof Ne))return!1;const u=a;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&H.equals(this.bits,u.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+H.hashCode(this.bits),a}toString(a="X ",u="  ",d=`
`){return this.buildToString(a,u,d)}buildToString(a,u,d){let v=new he;for(let c=0,f=this.height;c<f;c++){for(let b=0,x=this.width;b<x;b++)v.append(this.get(b,c)?a:u);v.append(d)}return v.toString()}clone(){return new Ne(this.width,this.height,this.rowSize,this.bits.slice())}}class ie extends g{static getNotFoundInstance(){return new ie}}ie.kind="NotFoundException";class Y extends R{constructor(a){super(a),this.luminances=Y.EMPTY,this.buckets=new Int32Array(Y.LUMINANCE_BUCKETS)}getBlackRow(a,u){const d=this.getLuminanceSource(),v=d.getWidth();u==null||u.getSize()<v?u=new se(v):u.clear(),this.initArrays(v);const c=d.getRow(a,this.luminances),f=this.buckets;for(let x=0;x<v;x++)f[(c[x]&255)>>Y.LUMINANCE_SHIFT]++;const b=Y.estimateBlackPoint(f);if(v<3)for(let x=0;x<v;x++)(c[x]&255)<b&&u.set(x);else{let x=c[0]&255,A=c[1]&255;for(let _=1;_<v-1;_++){const M=c[_+1]&255;(A*4-x-M)/2<b&&u.set(_),x=A,A=M}}return u}getBlackMatrix(){const a=this.getLuminanceSource(),u=a.getWidth(),d=a.getHeight(),v=new Ne(u,d);this.initArrays(u);const c=this.buckets;for(let x=1;x<5;x++){const A=Math.floor(d*x/5),_=a.getRow(A,this.luminances),M=Math.floor(u*4/5);for(let L=Math.floor(u/5);L<M;L++){const U=_[L]&255;c[U>>Y.LUMINANCE_SHIFT]++}}const f=Y.estimateBlackPoint(c),b=a.getMatrix();for(let x=0;x<d;x++){const A=x*u;for(let _=0;_<u;_++)(b[A+_]&255)<f&&v.set(_,x)}return v}createBinarizer(a){return new Y(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const u=this.buckets;for(let d=0;d<Y.LUMINANCE_BUCKETS;d++)u[d]=0}static estimateBlackPoint(a){const u=a.length;let d=0,v=0,c=0;for(let _=0;_<u;_++)a[_]>c&&(v=_,c=a[_]),a[_]>d&&(d=a[_]);let f=0,b=0;for(let _=0;_<u;_++){const M=_-v,L=a[_]*M*M;L>b&&(f=_,b=L)}if(v>f){const _=v;v=f,f=_}if(f-v<=u/16)throw new ie;let x=f-1,A=-1;for(let _=f-1;_>v;_--){const M=_-v,L=M*M*(f-_)*(d-a[_]);L>A&&(x=_,A=L)}return x<<Y.LUMINANCE_SHIFT}}Y.LUMINANCE_BITS=5,Y.LUMINANCE_SHIFT=8-Y.LUMINANCE_BITS,Y.LUMINANCE_BUCKETS=1<<Y.LUMINANCE_BITS,Y.EMPTY=Uint8ClampedArray.from([0]);class oe extends Y{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),u=a.getWidth(),d=a.getHeight();if(u>=oe.MINIMUM_DIMENSION&&d>=oe.MINIMUM_DIMENSION){const v=a.getMatrix();let c=u>>oe.BLOCK_SIZE_POWER;(u&oe.BLOCK_SIZE_MASK)!==0&&c++;let f=d>>oe.BLOCK_SIZE_POWER;(d&oe.BLOCK_SIZE_MASK)!==0&&f++;const b=oe.calculateBlackPoints(v,c,f,u,d),x=new Ne(u,d);oe.calculateThresholdForBlock(v,c,f,u,d,b,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new oe(a)}static calculateThresholdForBlock(a,u,d,v,c,f,b){const x=c-oe.BLOCK_SIZE,A=v-oe.BLOCK_SIZE;for(let _=0;_<d;_++){let M=_<<oe.BLOCK_SIZE_POWER;M>x&&(M=x);const L=oe.cap(_,2,d-3);for(let U=0;U<u;U++){let q=U<<oe.BLOCK_SIZE_POWER;q>A&&(q=A);const K=oe.cap(U,2,u-3);let G=0;for(let re=-2;re<=2;re++){const ae=f[L+re];G+=ae[K-2]+ae[K-1]+ae[K]+ae[K+1]+ae[K+2]}const Z=G/25;oe.thresholdBlock(a,q,M,Z,v,b)}}}static cap(a,u,d){return a<u?u:a>d?d:a}static thresholdBlock(a,u,d,v,c,f){for(let b=0,x=d*c+u;b<oe.BLOCK_SIZE;b++,x+=c)for(let A=0;A<oe.BLOCK_SIZE;A++)(a[x+A]&255)<=v&&f.set(u+A,d+b)}static calculateBlackPoints(a,u,d,v,c){const f=c-oe.BLOCK_SIZE,b=v-oe.BLOCK_SIZE,x=new Array(d);for(let A=0;A<d;A++){x[A]=new Int32Array(u);let _=A<<oe.BLOCK_SIZE_POWER;_>f&&(_=f);for(let M=0;M<u;M++){let L=M<<oe.BLOCK_SIZE_POWER;L>b&&(L=b);let U=0,q=255,K=0;for(let Z=0,re=_*v+L;Z<oe.BLOCK_SIZE;Z++,re+=v){for(let ae=0;ae<oe.BLOCK_SIZE;ae++){const le=a[re+ae]&255;U+=le,le<q&&(q=le),le>K&&(K=le)}if(K-q>oe.MIN_DYNAMIC_RANGE)for(Z++,re+=v;Z<oe.BLOCK_SIZE;Z++,re+=v)for(let ae=0;ae<oe.BLOCK_SIZE;ae++)U+=a[re+ae]&255}let G=U>>oe.BLOCK_SIZE_POWER*2;if(K-q<=oe.MIN_DYNAMIC_RANGE&&(G=q/2,A>0&&M>0)){const Z=(x[A-1][M]+2*x[A][M-1]+x[A-1][M-1])/4;q<Z&&(G=Z)}x[A][M]=G}}return x}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class ve{constructor(a,u){this.width=a,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,u,d,v){throw new ze("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ze("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ze("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let u=new he;for(let d=0;d<this.height;d++){const v=this.getRow(d,a);for(let c=0;c<this.width;c++){const f=v[c]&255;let b;f<64?b="#":f<128?b="+":f<192?b=".":b=" ",u.append(b)}u.append(`
`)}return u.toString()}}class Ee extends ve{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,u){const d=this.delegate.getRow(a,u),v=this.getWidth();for(let c=0;c<v;c++)d[c]=255-(d[c]&255);return d}getMatrix(){const a=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),d=new Uint8ClampedArray(u);for(let v=0;v<u;v++)d[v]=255-(a[v]&255);return d}isCropSupported(){return this.delegate.isCropSupported()}crop(a,u,d,v){return new Ee(this.delegate.crop(a,u,d,v))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ee(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ee(this.delegate.rotateCounterClockwise45())}}class be extends ve{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const u=a.getContext("2d").getImageData(0,0,a.width,a.height);return be.toGrayscaleBuffer(u.data,a.width,a.height)}static toGrayscaleBuffer(a,u,d){const v=new Uint8ClampedArray(u*d);for(let c=0,f=0,b=a.length;c<b;c+=4,f++){let x;if(a[c+3]===0)x=255;else{const _=a[c],M=a[c+1],L=a[c+2];x=306*_+601*M+117*L+512>>10}v[f]=x}return v}getRow(a,u){if(a<0||a>=this.getHeight())throw new S("Requested row is outside the image: "+a);const d=this.getWidth(),v=a*d;return u===null?u=this.buffer.slice(v,v+d):(u.length<d&&(u=new Uint8ClampedArray(d)),u.set(this.buffer.slice(v,v+d))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,u,d,v){return super.crop(a,u,d,v),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const u=this.getTempCanvasElement(),d=u.getContext("2d"),v=a*be.DEGREE_TO_RADIANS,c=this.canvas.width,f=this.canvas.height,b=Math.ceil(Math.abs(Math.cos(v))*c+Math.abs(Math.sin(v))*f),x=Math.ceil(Math.abs(Math.sin(v))*c+Math.abs(Math.cos(v))*f);return u.width=b,u.height=x,d.translate(b/2,x/2),d.rotate(v),d.drawImage(this.canvas,c/-2,f/-2),this.buffer=be.makeBufferFromCanvasImageData(u),this}invert(){return new Ee(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(a,u,d){this.deviceId=a,this.label=u,this.kind="videoinput",this.groupId=d||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ye=(globalThis||window||self||window||void 0)&&(globalThis||window||self||window||void 0).__awaiter||function(z,a,u,d){function v(c){return c instanceof u?c:new u(function(f){f(c)})}return new(u||(u=Promise))(function(c,f){function b(_){try{A(d.next(_))}catch(M){f(M)}}function x(_){try{A(d.throw(_))}catch(M){f(M)}}function A(_){_.done?c(_.value):v(_.value).then(b,x)}A((d=d.apply(z,a||[])).next())})};class Ce{constructor(a,u=500,d){this.reader=a,this.timeBetweenScansMillis=u,this._hints=d,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return ye(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const d of a){const v=d.kind==="video"?"videoinput":d.kind;if(v!=="videoinput")continue;const c=d.deviceId||d.id,f=d.label||`Video device ${u.length+1}`,b=d.groupId,x={deviceId:c,label:f,kind:v,groupId:b};u.push(x)}return u})}getVideoInputDevices(){return ye(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new ne(u.deviceId,u.label))})}findDeviceById(a){return ye(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(d=>d.deviceId===a):null})}decodeFromInputVideoDevice(a,u){return ye(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,u)})}decodeOnceFromVideoDevice(a,u){return ye(this,void 0,void 0,function*(){this.reset();let d;a?d={deviceId:{exact:a}}:d={facingMode:"environment"};const v={video:d};return yield this.decodeOnceFromConstraints(v,u)})}decodeOnceFromConstraints(a,u){return ye(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(d,u)})}decodeOnceFromStream(a,u){return ye(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(a,u);return yield this.decodeOnce(d)})}decodeFromInputVideoDeviceContinuously(a,u,d){return ye(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,u,d)})}decodeFromVideoDevice(a,u,d){return ye(this,void 0,void 0,function*(){let v;a?v={deviceId:{exact:a}}:v={facingMode:"environment"};const c={video:v};return yield this.decodeFromConstraints(c,u,d)})}decodeFromConstraints(a,u,d){return ye(this,void 0,void 0,function*(){const v=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(v,u,d)})}decodeFromStream(a,u,d){return ye(this,void 0,void 0,function*(){this.reset();const v=yield this.attachStreamToVideo(a,u);return yield this.decodeContinuously(v,d)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,u){return ye(this,void 0,void 0,function*(){const d=this.prepareVideoElement(u);return this.addVideoSource(d,a),this.videoElement=d,this.stream=a,yield this.playVideoOnLoadAsync(d),d})}playVideoOnLoadAsync(a){return new Promise((u,d)=>this.playVideoOnLoad(a,()=>u()))}playVideoOnLoad(a,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",u),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return ye(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,u){const d=document.getElementById(a);if(!d)throw new E(`element with id '${a}' not found`);if(d.nodeName.toLowerCase()!==u.toLowerCase())throw new E(`element with id '${a}' must be an ${u} element`);return d}decodeFromImage(a,u){if(!a&&!u)throw new E("either imageElement with a src set or an url must be provided");return u&&!a?this.decodeFromImageUrl(u):this.decodeFromImageElement(a)}decodeFromVideo(a,u){if(!a&&!u)throw new E("Either an element with a src set or an URL must be provided");return u&&!a?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,u,d){if(a===void 0&&u===void 0)throw new E("Either an element with a src set or an URL must be provided");return u&&!a?this.decodeFromVideoUrlContinuously(u,d):this.decodeFromVideoElementContinuously(a,d)}decodeFromImageElement(a){if(!a)throw new E("An image element must be provided.");this.reset();const u=this.prepareImageElement(a);this.imageElement=u;let d;return this.isImageLoaded(u)?d=this.decodeOnce(u,!1,!0):d=this._decodeOnLoadImage(u),d}decodeFromVideoElement(a){const u=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(a,u){const d=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(d,u)}_decodeFromVideoElementSetup(a){if(!a)throw new E("A video element must be provided.");this.reset();const u=this.prepareVideoElement(a);return this.videoElement=u,u}decodeFromImageUrl(a){if(!a)throw new E("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const d=this._decodeOnLoadImage(u);return u.src=a,d}decodeFromVideoUrl(a){if(!a)throw new E("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),d=this.decodeFromVideoElement(u);return u.src=a,d}decodeFromVideoUrlContinuously(a,u){if(!a)throw new E("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),v=this.decodeFromVideoElementContinuously(d,u);return d.src=a,v}_decodeOnLoadImage(a){return new Promise((u,d)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(u,d),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return ye(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,u){return ye(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,u)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let u;return typeof a>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof a=="string"&&(u=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(u=a),u}prepareVideoElement(a){let u;return!a&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof a=="string"&&(u=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(u=a),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(a,u=!0,d=!0){this._stopAsyncDecode=!1;const v=(c,f)=>{if(this._stopAsyncDecode){f(new ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const b=this.decode(a);c(b)}catch(b){const x=u&&b instanceof ie,_=(b instanceof I||b instanceof F)&&d;if(x||_)return setTimeout(v,this._timeBetweenDecodingAttempts,c,f);f(b)}};return new Promise((c,f)=>v(c,f))}decodeContinuously(a,u){this._stopContinuousDecode=!1;const d=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const v=this.decode(a);u(v,null),setTimeout(d,this.timeBetweenScansMillis)}catch(v){u(null,v);const c=v instanceof I||v instanceof F,f=v instanceof ie;(c||f)&&setTimeout(d,this._timeBetweenDecodingAttempts)}};d()}decode(a){const u=this.createBinaryBitmap(a);return this.decodeBitmap(u)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,u,d){u||(u={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),d||(d=this.captureCanvasContext),d.drawImage(a,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(a,u,d=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),d||(d=this.captureCanvasContext),d.drawImage(a,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const u=this.getCaptureCanvas(a),d=new be(u),v=new oe(d);return new N(v)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const d=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=d}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const u=this.createCaptureCanvas(a);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let d,v;return typeof a<"u"&&(a instanceof HTMLVideoElement?(d=a.videoWidth,v=a.videoHeight):a instanceof HTMLImageElement&&(d=a.naturalWidth||a.width,v=a.naturalHeight||a.height)),u.style.width=d+"px",u.style.height=v+"px",u.width=d,u.height=v,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,u){try{a.srcObject=u}catch{a.src=URL.createObjectURL(u)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class ke{constructor(a,u,d=u==null?0:8*u.length,v,c,f=D.currentTimeMillis()){this.text=a,this.rawBytes=u,this.numBits=d,this.resultPoints=v,this.format=c,this.timestamp=f,this.text=a,this.rawBytes=u,d==null?this.numBits=u==null?0:8*u.length:this.numBits=d,this.resultPoints=v,this.format=c,this.resultMetadata=null,f==null?this.timestamp=D.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,u)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const u=this.resultPoints;if(u===null)this.resultPoints=a;else if(a!==null&&a.length>0){const d=new Array(u.length+a.length);D.arraycopy(u,0,d,0,u.length),D.arraycopy(a,0,d,u.length,a.length),this.resultPoints=d}}getTimestamp(){return this.timestamp}toString(){return this.text}}var He;(function(z){z[z.AZTEC=0]="AZTEC",z[z.CODABAR=1]="CODABAR",z[z.CODE_39=2]="CODE_39",z[z.CODE_93=3]="CODE_93",z[z.CODE_128=4]="CODE_128",z[z.DATA_MATRIX=5]="DATA_MATRIX",z[z.EAN_8=6]="EAN_8",z[z.EAN_13=7]="EAN_13",z[z.ITF=8]="ITF",z[z.MAXICODE=9]="MAXICODE",z[z.PDF_417=10]="PDF_417",z[z.QR_CODE=11]="QR_CODE",z[z.RSS_14=12]="RSS_14",z[z.RSS_EXPANDED=13]="RSS_EXPANDED",z[z.UPC_A=14]="UPC_A",z[z.UPC_E=15]="UPC_E",z[z.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(He||(He={}));var Fe=He,Ct;(function(z){z[z.OTHER=0]="OTHER",z[z.ORIENTATION=1]="ORIENTATION",z[z.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",z[z.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",z[z.ISSUE_NUMBER=4]="ISSUE_NUMBER",z[z.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",z[z.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",z[z.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",z[z.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",z[z.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",z[z.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ct||(Ct={}));var dt=Ct;class Ze{constructor(a,u,d,v,c=-1,f=-1){this.rawBytes=a,this.text=u,this.byteSegments=d,this.ecLevel=v,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=f,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Wt{exp(a){return this.expTable[a]}log(a){if(a===0)throw new S;return this.logTable[a]}static addOrSubtract(a,u){return a^u}}class kt{constructor(a,u){if(u.length===0)throw new S;this.field=a;const d=u.length;if(d>1&&u[0]===0){let v=1;for(;v<d&&u[v]===0;)v++;v===d?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(d-v),D.arraycopy(u,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const u=this.coefficients;let d;if(a===1){d=0;for(let f=0,b=u.length;f!==b;f++){const x=u[f];d=Wt.addOrSubtract(d,x)}return d}d=u[0];const v=u.length,c=this.field;for(let f=1;f<v;f++)d=Wt.addOrSubtract(c.multiply(a,d),u[f]);return d}addOrSubtract(a){if(!this.field.equals(a.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let u=this.coefficients,d=a.coefficients;if(u.length>d.length){const f=u;u=d,d=f}let v=new Int32Array(d.length);const c=d.length-u.length;D.arraycopy(d,0,v,0,c);for(let f=c;f<d.length;f++)v[f]=Wt.addOrSubtract(u[f-c],d[f]);return new kt(this.field,v)}multiply(a){if(!this.field.equals(a.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const u=this.coefficients,d=u.length,v=a.coefficients,c=v.length,f=new Int32Array(d+c-1),b=this.field;for(let x=0;x<d;x++){const A=u[x];for(let _=0;_<c;_++)f[x+_]=Wt.addOrSubtract(f[x+_],b.multiply(A,v[_]))}return new kt(b,f)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const u=this.coefficients.length,d=this.field,v=new Int32Array(u),c=this.coefficients;for(let f=0;f<u;f++)v[f]=d.multiply(c[f],a);return new kt(d,v)}multiplyByMonomial(a,u){if(a<0)throw new S;if(u===0)return this.field.getZero();const d=this.coefficients,v=d.length,c=new Int32Array(v+a),f=this.field;for(let b=0;b<v;b++)c[b]=f.multiply(d[b],u);return new kt(f,c)}divide(a){if(!this.field.equals(a.field))throw new S("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new S("Divide by 0");const u=this.field;let d=u.getZero(),v=this;const c=a.getCoefficient(a.getDegree()),f=u.inverse(c);for(;v.getDegree()>=a.getDegree()&&!v.isZero();){const b=v.getDegree()-a.getDegree(),x=u.multiply(v.getCoefficient(v.getDegree()),f),A=a.multiplyByMonomial(b,x),_=u.buildMonomial(b,x);d=d.addOrSubtract(_),v=v.addOrSubtract(A)}return[d,v]}toString(){let a="";for(let u=this.getDegree();u>=0;u--){let d=this.getCoefficient(u);if(d!==0){if(d<0?(a+=" - ",d=-d):a.length>0&&(a+=" + "),u===0||d!==1){const v=this.field.log(d);v===0?a+="1":v===1?a+="a":(a+="a^",a+=v)}u!==0&&(u===1?a+="x":(a+="x^",a+=u))}}return a}}class ht extends g{}ht.kind="ArithmeticException";class mt extends Wt{constructor(a,u,d){super(),this.primitive=a,this.size=u,this.generatorBase=d;const v=new Int32Array(u);let c=1;for(let b=0;b<u;b++)v[b]=c,c*=2,c>=u&&(c^=a,c&=u-1);this.expTable=v;const f=new Int32Array(u);for(let b=0;b<u-1;b++)f[v[b]]=b;this.logTable=f,this.zero=new kt(this,Int32Array.from([0])),this.one=new kt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,u){if(a<0)throw new S;if(u===0)return this.zero;const d=new Int32Array(a+1);return d[0]=u,new kt(this,d)}inverse(a){if(a===0)throw new ht;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,u){return a===0||u===0?0:this.expTable[(this.logTable[a]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+V.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}mt.AZTEC_DATA_12=new mt(4201,4096,1),mt.AZTEC_DATA_10=new mt(1033,1024,1),mt.AZTEC_DATA_6=new mt(67,64,1),mt.AZTEC_PARAM=new mt(19,16,1),mt.QR_CODE_FIELD_256=new mt(285,256,0),mt.DATA_MATRIX_FIELD_256=new mt(301,256,1),mt.AZTEC_DATA_8=mt.DATA_MATRIX_FIELD_256,mt.MAXICODE_FIELD_64=mt.AZTEC_DATA_6;class bn extends g{}bn.kind="ReedSolomonException";class mn extends g{}mn.kind="IllegalStateException";class _r{constructor(a){this.field=a}decode(a,u){const d=this.field,v=new kt(d,a),c=new Int32Array(u);let f=!0;for(let U=0;U<u;U++){const q=v.evaluateAt(d.exp(U+d.getGeneratorBase()));c[c.length-1-U]=q,q!==0&&(f=!1)}if(f)return;const b=new kt(d,c),x=this.runEuclideanAlgorithm(d.buildMonomial(u,1),b,u),A=x[0],_=x[1],M=this.findErrorLocations(A),L=this.findErrorMagnitudes(_,M);for(let U=0;U<M.length;U++){const q=a.length-1-d.log(M[U]);if(q<0)throw new bn("Bad error location");a[q]=mt.addOrSubtract(a[q],L[U])}}runEuclideanAlgorithm(a,u,d){if(a.getDegree()<u.getDegree()){const U=a;a=u,u=U}const v=this.field;let c=a,f=u,b=v.getZero(),x=v.getOne();for(;f.getDegree()>=(d/2|0);){let U=c,q=b;if(c=f,b=x,c.isZero())throw new bn("r_{i-1} was zero");f=U;let K=v.getZero();const G=c.getCoefficient(c.getDegree()),Z=v.inverse(G);for(;f.getDegree()>=c.getDegree()&&!f.isZero();){const re=f.getDegree()-c.getDegree(),ae=v.multiply(f.getCoefficient(f.getDegree()),Z);K=K.addOrSubtract(v.buildMonomial(re,ae)),f=f.addOrSubtract(c.multiplyByMonomial(re,ae))}if(x=K.multiply(b).addOrSubtract(q),f.getDegree()>=c.getDegree())throw new mn("Division algorithm failed to reduce polynomial?")}const A=x.getCoefficient(0);if(A===0)throw new bn("sigmaTilde(0) was zero");const _=v.inverse(A),M=x.multiplyScalar(_),L=f.multiplyScalar(_);return[M,L]}findErrorLocations(a){const u=a.getDegree();if(u===1)return Int32Array.from([a.getCoefficient(1)]);const d=new Int32Array(u);let v=0;const c=this.field;for(let f=1;f<c.getSize()&&v<u;f++)a.evaluateAt(f)===0&&(d[v]=c.inverse(f),v++);if(v!==u)throw new bn("Error locator degree does not match number of roots");return d}findErrorMagnitudes(a,u){const d=u.length,v=new Int32Array(d),c=this.field;for(let f=0;f<d;f++){const b=c.inverse(u[f]);let x=1;for(let A=0;A<d;A++)if(f!==A){const _=c.multiply(u[A],b),M=(_&1)===0?_|1:_&-2;x=c.multiply(x,M)}v[f]=c.multiply(a.evaluateAt(b),c.inverse(x)),c.getGeneratorBase()!==0&&(v[f]=c.multiply(v[f],b))}return v}}var lr;(function(z){z[z.UPPER=0]="UPPER",z[z.LOWER=1]="LOWER",z[z.MIXED=2]="MIXED",z[z.DIGIT=3]="DIGIT",z[z.PUNCT=4]="PUNCT",z[z.BINARY=5]="BINARY"})(lr||(lr={}));class Tn{decode(a){this.ddata=a;let u=a.getBits(),d=this.extractBits(u),v=this.correctBits(d),c=Tn.convertBoolArrayToByteArray(v),f=Tn.getEncodedData(v),b=new Ze(c,f,null,null);return b.setNumBits(v.length),b}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let u=a.length,d=lr.UPPER,v=lr.UPPER,c="",f=0;for(;f<u;)if(v===lr.BINARY){if(u-f<5)break;let b=Tn.readCode(a,f,5);if(f+=5,b===0){if(u-f<11)break;b=Tn.readCode(a,f,11)+31,f+=11}for(let x=0;x<b;x++){if(u-f<8){f=u;break}const A=Tn.readCode(a,f,8);c+=fe.castAsNonUtf8Char(A),f+=8}v=d}else{let b=v===lr.DIGIT?4:5;if(u-f<b)break;let x=Tn.readCode(a,f,b);f+=b;let A=Tn.getCharacter(v,x);A.startsWith("CTRL_")?(d=v,v=Tn.getTable(A.charAt(5)),A.charAt(6)==="L"&&(d=v)):(c+=A,v=d)}return c}static getTable(a){switch(a){case"L":return lr.LOWER;case"P":return lr.PUNCT;case"M":return lr.MIXED;case"D":return lr.DIGIT;case"B":return lr.BINARY;default:return lr.UPPER}}static getCharacter(a,u){switch(a){case lr.UPPER:return Tn.UPPER_TABLE[u];case lr.LOWER:return Tn.LOWER_TABLE[u];case lr.MIXED:return Tn.MIXED_TABLE[u];case lr.PUNCT:return Tn.PUNCT_TABLE[u];case lr.DIGIT:return Tn.DIGIT_TABLE[u];default:throw new mn("Bad table")}}correctBits(a){let u,d;this.ddata.getNbLayers()<=2?(d=6,u=mt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(d=8,u=mt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(d=10,u=mt.AZTEC_DATA_10):(d=12,u=mt.AZTEC_DATA_12);let v=this.ddata.getNbDatablocks(),c=a.length/d;if(c<v)throw new F;let f=a.length%d,b=new Int32Array(c);for(let L=0;L<c;L++,f+=d)b[L]=Tn.readCode(a,f,d);try{new _r(u).decode(b,c-v)}catch(L){throw new F(L)}let x=(1<<d)-1,A=0;for(let L=0;L<v;L++){let U=b[L];if(U===0||U===x)throw new F;(U===1||U===x-1)&&A++}let _=new Array(v*d-A),M=0;for(let L=0;L<v;L++){let U=b[L];if(U===1||U===x-1)_.fill(U>1,M,M+d-1),M+=d-1;else for(let q=d-1;q>=0;--q)_[M++]=(U&1<<q)!==0}return _}extractBits(a){let u=this.ddata.isCompact(),d=this.ddata.getNbLayers(),v=(u?11:14)+d*4,c=new Int32Array(v),f=new Array(this.totalBitsInLayer(d,u));if(u)for(let b=0;b<c.length;b++)c[b]=b;else{let b=v+1+2*V.truncDivision(V.truncDivision(v,2)-1,15),x=v/2,A=V.truncDivision(b,2);for(let _=0;_<x;_++){let M=_+V.truncDivision(_,15);c[x-_-1]=A-M-1,c[x+_]=A+M+1}}for(let b=0,x=0;b<d;b++){let A=(d-b)*4+(u?9:12),_=b*2,M=v-1-_;for(let L=0;L<A;L++){let U=L*2;for(let q=0;q<2;q++)f[x+U+q]=a.get(c[_+q],c[_+L]),f[x+2*A+U+q]=a.get(c[_+L],c[M-q]),f[x+4*A+U+q]=a.get(c[M-q],c[M-L]),f[x+6*A+U+q]=a.get(c[M-L],c[_+q])}x+=A*8}return f}static readCode(a,u,d){let v=0;for(let c=u;c<u+d;c++)v<<=1,a[c]&&(v|=1);return v}static readByte(a,u){let d=a.length-u;return d>=8?Tn.readCode(a,u,8):Tn.readCode(a,u,d)<<8-d}static convertBoolArrayToByteArray(a){let u=new Uint8Array((a.length+7)/8);for(let d=0;d<u.length;d++)u[d]=Tn.readByte(a,8*d);return u}totalBitsInLayer(a,u){return((u?88:112)+16*a)*a}}Tn.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Tn.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Tn.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Tn.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Tn.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tn{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,u,d,v){const c=a-d,f=u-v;return Math.sqrt(c*c+f*f)}static sum(a){let u=0;for(let d=0,v=a.length;d!==v;d++){const c=a[d];u+=c}return u}}class ri{static floatToIntBits(a){return a}}ri.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ft{constructor(a,u){this.x=a,this.y=u}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof ft){const u=a;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*ri.floatToIntBits(this.x)+ri.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const u=this.distance(a[0],a[1]),d=this.distance(a[1],a[2]),v=this.distance(a[0],a[2]);let c,f,b;if(d>=u&&d>=v?(f=a[0],c=a[1],b=a[2]):v>=d&&v>=u?(f=a[1],c=a[0],b=a[2]):(f=a[2],c=a[0],b=a[1]),this.crossProductZ(c,f,b)<0){const x=c;c=b,b=x}a[0]=c,a[1]=f,a[2]=b}static distance(a,u){return tn.distance(a.x,a.y,u.x,u.y)}static crossProductZ(a,u,d){const v=u.x,c=u.y;return(d.x-v)*(a.y-c)-(d.y-c)*(a.x-v)}}class $i{constructor(a,u){this.bits=a,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Li extends $i{constructor(a,u,d,v,c){super(a,u),this.compact=d,this.nbDatablocks=v,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class an{constructor(a,u,d,v){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),u==null&&(u=an.INIT_SIZE),d==null&&(d=a.getWidth()/2|0),v==null&&(v=a.getHeight()/2|0);const c=u/2|0;if(this.leftInit=d-c,this.rightInit=d+c,this.upInit=v-c,this.downInit=v+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}detect(){let a=this.leftInit,u=this.rightInit,d=this.upInit,v=this.downInit,c=!1,f=!0,b=!1,x=!1,A=!1,_=!1,M=!1;const L=this.width,U=this.height;for(;f;){f=!1;let q=!0;for(;(q||!x)&&u<L;)q=this.containsBlackPoint(d,v,u,!1),q?(u++,f=!0,x=!0):x||u++;if(u>=L){c=!0;break}let K=!0;for(;(K||!A)&&v<U;)K=this.containsBlackPoint(a,u,v,!0),K?(v++,f=!0,A=!0):A||v++;if(v>=U){c=!0;break}let G=!0;for(;(G||!_)&&a>=0;)G=this.containsBlackPoint(d,v,a,!1),G?(a--,f=!0,_=!0):_||a--;if(a<0){c=!0;break}let Z=!0;for(;(Z||!M)&&d>=0;)Z=this.containsBlackPoint(a,u,d,!0),Z?(d--,f=!0,M=!0):M||d--;if(d<0){c=!0;break}f&&(b=!0)}if(!c&&b){const q=u-a;let K=null;for(let ae=1;K===null&&ae<q;ae++)K=this.getBlackPointOnSegment(a,v-ae,a+ae,v);if(K==null)throw new ie;let G=null;for(let ae=1;G===null&&ae<q;ae++)G=this.getBlackPointOnSegment(a,d+ae,a+ae,d);if(G==null)throw new ie;let Z=null;for(let ae=1;Z===null&&ae<q;ae++)Z=this.getBlackPointOnSegment(u,d+ae,u-ae,d);if(Z==null)throw new ie;let re=null;for(let ae=1;re===null&&ae<q;ae++)re=this.getBlackPointOnSegment(u,v-ae,u-ae,v);if(re==null)throw new ie;return this.centerEdges(re,K,Z,G)}else throw new ie}getBlackPointOnSegment(a,u,d,v){const c=tn.round(tn.distance(a,u,d,v)),f=(d-a)/c,b=(v-u)/c,x=this.image;for(let A=0;A<c;A++){const _=tn.round(a+A*f),M=tn.round(u+A*b);if(x.get(_,M))return new ft(_,M)}return null}centerEdges(a,u,d,v){const c=a.getX(),f=a.getY(),b=u.getX(),x=u.getY(),A=d.getX(),_=d.getY(),M=v.getX(),L=v.getY(),U=an.CORR;return c<this.width/2?[new ft(M-U,L+U),new ft(b+U,x+U),new ft(A-U,_-U),new ft(c+U,f-U)]:[new ft(M+U,L+U),new ft(b+U,x-U),new ft(A-U,_+U),new ft(c-U,f-U)]}containsBlackPoint(a,u,d,v){const c=this.image;if(v){for(let f=a;f<=u;f++)if(c.get(f,d))return!0}else for(let f=a;f<=u;f++)if(c.get(d,f))return!0;return!1}}an.INIT_SIZE=10,an.CORR=1;class jr{static checkAndNudgePoints(a,u){const d=a.getWidth(),v=a.getHeight();let c=!0;for(let f=0;f<u.length&&c;f+=2){const b=Math.floor(u[f]),x=Math.floor(u[f+1]);if(b<-1||b>d||x<-1||x>v)throw new ie;c=!1,b===-1?(u[f]=0,c=!0):b===d&&(u[f]=d-1,c=!0),x===-1?(u[f+1]=0,c=!0):x===v&&(u[f+1]=v-1,c=!0)}c=!0;for(let f=u.length-2;f>=0&&c;f-=2){const b=Math.floor(u[f]),x=Math.floor(u[f+1]);if(b<-1||b>d||x<-1||x>v)throw new ie;c=!1,b===-1?(u[f]=0,c=!0):b===d&&(u[f]=d-1,c=!0),x===-1?(u[f+1]=0,c=!0):x===v&&(u[f+1]=v-1,c=!0)}}}class Wn{constructor(a,u,d,v,c,f,b,x,A){this.a11=a,this.a21=u,this.a31=d,this.a12=v,this.a22=c,this.a32=f,this.a13=b,this.a23=x,this.a33=A}static quadrilateralToQuadrilateral(a,u,d,v,c,f,b,x,A,_,M,L,U,q,K,G){const Z=Wn.quadrilateralToSquare(a,u,d,v,c,f,b,x);return Wn.squareToQuadrilateral(A,_,M,L,U,q,K,G).times(Z)}transformPoints(a){const u=a.length,d=this.a11,v=this.a12,c=this.a13,f=this.a21,b=this.a22,x=this.a23,A=this.a31,_=this.a32,M=this.a33;for(let L=0;L<u;L+=2){const U=a[L],q=a[L+1],K=c*U+x*q+M;a[L]=(d*U+f*q+A)/K,a[L+1]=(v*U+b*q+_)/K}}transformPointsWithValues(a,u){const d=this.a11,v=this.a12,c=this.a13,f=this.a21,b=this.a22,x=this.a23,A=this.a31,_=this.a32,M=this.a33,L=a.length;for(let U=0;U<L;U++){const q=a[U],K=u[U],G=c*q+x*K+M;a[U]=(d*q+f*K+A)/G,u[U]=(v*q+b*K+_)/G}}static squareToQuadrilateral(a,u,d,v,c,f,b,x){const A=a-d+c-b,_=u-v+f-x;if(A===0&&_===0)return new Wn(d-a,c-d,a,v-u,f-v,u,0,0,1);{const M=d-c,L=b-c,U=v-f,q=x-f,K=M*q-L*U,G=(A*q-L*_)/K,Z=(M*_-A*U)/K;return new Wn(d-a+G*d,b-a+Z*b,a,v-u+G*v,x-u+Z*x,u,G,Z,1)}}static quadrilateralToSquare(a,u,d,v,c,f,b,x){return Wn.squareToQuadrilateral(a,u,d,v,c,f,b,x).buildAdjoint()}buildAdjoint(){return new Wn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new Wn(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class ii extends jr{sampleGrid(a,u,d,v,c,f,b,x,A,_,M,L,U,q,K,G,Z,re,ae){const le=Wn.quadrilateralToQuadrilateral(v,c,f,b,x,A,_,M,L,U,q,K,G,Z,re,ae);return this.sampleGridWithTransform(a,u,d,le)}sampleGridWithTransform(a,u,d,v){if(u<=0||d<=0)throw new ie;const c=new Ne(u,d),f=new Float32Array(2*u);for(let b=0;b<d;b++){const x=f.length,A=b+.5;for(let _=0;_<x;_+=2)f[_]=_/2+.5,f[_+1]=A;v.transformPoints(f),jr.checkAndNudgePoints(a,f);try{for(let _=0;_<x;_+=2)a.get(Math.floor(f[_]),Math.floor(f[_+1]))&&c.set(_/2,b)}catch{throw new ie}}return c}}class Rn{static setGridSampler(a){Rn.gridSampler=a}static getInstance(){return Rn.gridSampler}}Rn.gridSampler=new ii;class Nn{constructor(a,u){this.x=a,this.y=u}toResultPoint(){return new ft(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Sr{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let u=this.getMatrixCenter(),d=this.getBullsEyeCorners(u);if(a){let f=d[0];d[0]=d[2],d[2]=f}this.extractParameters(d);let v=this.sampleGrid(this.image,d[this.shift%4],d[(this.shift+1)%4],d[(this.shift+2)%4],d[(this.shift+3)%4]),c=this.getMatrixCornerPoints(d);return new Li(v,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new ie;let u=2*this.nbCenterLayers,d=new Int32Array([this.sampleLine(a[0],a[1],u),this.sampleLine(a[1],a[2],u),this.sampleLine(a[2],a[3],u),this.sampleLine(a[3],a[0],u)]);this.shift=this.getRotation(d,u);let v=0;for(let f=0;f<4;f++){let b=d[(this.shift+f)%4];this.compact?(v<<=7,v+=b>>1&127):(v<<=10,v+=(b>>2&992)+(b>>1&31))}let c=this.getCorrectedParameterData(v,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(a,u){let d=0;a.forEach((v,c,f)=>{let b=(v>>u-2<<1)+(v&1);d=(d<<3)+b}),d=((d&1)<<11)+(d>>1);for(let v=0;v<4;v++)if(V.bitCount(d^this.EXPECTED_CORNER_BITS[v])<=2)return v;throw new ie}getCorrectedParameterData(a,u){let d,v;u?(d=7,v=2):(d=10,v=4);let c=d-v,f=new Int32Array(d);for(let x=d-1;x>=0;--x)f[x]=a&15,a>>=4;try{new _r(mt.AZTEC_PARAM).decode(f,c)}catch{throw new ie}let b=0;for(let x=0;x<v;x++)b=(b<<4)+f[x];return b}getBullsEyeCorners(a){let u=a,d=a,v=a,c=a,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(u,f,1,-1),L=this.getFirstDifferent(d,f,1,1),U=this.getFirstDifferent(v,f,-1,1),q=this.getFirstDifferent(c,f,-1,-1);if(this.nbCenterLayers>2){let K=this.distancePoint(q,M)*this.nbCenterLayers/(this.distancePoint(c,u)*(this.nbCenterLayers+2));if(K<.75||K>1.25||!this.isWhiteOrBlackRectangle(M,L,U,q))break}u=M,d=L,v=U,c=q,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;let b=new ft(u.getX()+.5,u.getY()-.5),x=new ft(d.getX()+.5,d.getY()+.5),A=new ft(v.getX()-.5,v.getY()+.5),_=new ft(c.getX()-.5,c.getY()-.5);return this.expandSquare([b,x,A,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,u,d,v;try{let b=new an(this.image).detect();a=b[0],u=b[1],d=b[2],v=b[3]}catch{let x=this.image.getWidth()/2,A=this.image.getHeight()/2;a=this.getFirstDifferent(new Nn(x+7,A-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new Nn(x+7,A+7),!1,1,1).toResultPoint(),d=this.getFirstDifferent(new Nn(x-7,A+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new Nn(x-7,A-7),!1,-1,-1).toResultPoint()}let c=tn.round((a.getX()+v.getX()+u.getX()+d.getX())/4),f=tn.round((a.getY()+v.getY()+u.getY()+d.getY())/4);try{let b=new an(this.image,15,c,f).detect();a=b[0],u=b[1],d=b[2],v=b[3]}catch{a=this.getFirstDifferent(new Nn(c+7,f-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new Nn(c+7,f+7),!1,1,1).toResultPoint(),d=this.getFirstDifferent(new Nn(c-7,f+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new Nn(c-7,f-7),!1,-1,-1).toResultPoint()}return c=tn.round((a.getX()+v.getX()+u.getX()+d.getX())/4),f=tn.round((a.getY()+v.getY()+u.getY()+d.getY())/4),new Nn(c,f)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,u,d,v,c){let f=Rn.getInstance(),b=this.getDimension(),x=b/2-this.nbCenterLayers,A=b/2+this.nbCenterLayers;return f.sampleGrid(a,b,b,x,x,A,x,A,A,x,A,u.getX(),u.getY(),d.getX(),d.getY(),v.getX(),v.getY(),c.getX(),c.getY())}sampleLine(a,u,d){let v=0,c=this.distanceResultPoint(a,u),f=c/d,b=a.getX(),x=a.getY(),A=f*(u.getX()-a.getX())/c,_=f*(u.getY()-a.getY())/c;for(let M=0;M<d;M++)this.image.get(tn.round(b+M*A),tn.round(x+M*_))&&(v|=1<<d-M-1);return v}isWhiteOrBlackRectangle(a,u,d,v){let c=3;a=new Nn(a.getX()-c,a.getY()+c),u=new Nn(u.getX()-c,u.getY()-c),d=new Nn(d.getX()+c,d.getY()-c),v=new Nn(v.getX()+c,v.getY()+c);let f=this.getColor(v,a);if(f===0)return!1;let b=this.getColor(a,u);return b!==f||(b=this.getColor(u,d),b!==f)?!1:(b=this.getColor(d,v),b===f)}getColor(a,u){let d=this.distancePoint(a,u),v=(u.getX()-a.getX())/d,c=(u.getY()-a.getY())/d,f=0,b=a.getX(),x=a.getY(),A=this.image.get(a.getX(),a.getY()),_=Math.ceil(d);for(let L=0;L<_;L++)b+=v,x+=c,this.image.get(tn.round(b),tn.round(x))!==A&&f++;let M=f/d;return M>.1&&M<.9?0:M<=.1===A?1:-1}getFirstDifferent(a,u,d,v){let c=a.getX()+d,f=a.getY()+v;for(;this.isValid(c,f)&&this.image.get(c,f)===u;)c+=d,f+=v;for(c-=d,f-=v;this.isValid(c,f)&&this.image.get(c,f)===u;)c+=d;for(c-=d;this.isValid(c,f)&&this.image.get(c,f)===u;)f+=v;return f-=v,new Nn(c,f)}expandSquare(a,u,d){let v=d/(2*u),c=a[0].getX()-a[2].getX(),f=a[0].getY()-a[2].getY(),b=(a[0].getX()+a[2].getX())/2,x=(a[0].getY()+a[2].getY())/2,A=new ft(b+v*c,x+v*f),_=new ft(b-v*c,x-v*f);c=a[1].getX()-a[3].getX(),f=a[1].getY()-a[3].getY(),b=(a[1].getX()+a[3].getX())/2,x=(a[1].getY()+a[3].getY())/2;let M=new ft(b+v*c,x+v*f),L=new ft(b-v*c,x-v*f);return[A,M,_,L]}isValid(a,u){return a>=0&&a<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(a){let u=tn.round(a.getX()),d=tn.round(a.getY());return this.isValid(u,d)}distancePoint(a,u){return tn.distance(a.getX(),a.getY(),u.getX(),u.getY())}distanceResultPoint(a,u){return tn.distance(a.getX(),a.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(V.truncDivision(this.nbLayers-4,8)+1)+15}}class si{decode(a,u=null){let d=null,v=new Sr(a.getBlackMatrix()),c=null,f=null;try{let _=v.detectMirror(!1);c=_.getPoints(),this.reportFoundResultPoints(u,c),f=new Tn().decode(_)}catch(_){d=_}if(f==null)try{let _=v.detectMirror(!0);c=_.getPoints(),this.reportFoundResultPoints(u,c),f=new Tn().decode(_)}catch(_){throw d??_}let b=new ke(f.getText(),f.getRawBytes(),f.getNumBits(),c,Fe.AZTEC,D.currentTimeMillis()),x=f.getByteSegments();x!=null&&b.putMetadata(dt.BYTE_SEGMENTS,x);let A=f.getECLevel();return A!=null&&b.putMetadata(dt.ERROR_CORRECTION_LEVEL,A),b}reportFoundResultPoints(a,u){if(a!=null){let d=a.get(J.NEED_RESULT_POINT_CALLBACK);d!=null&&u.forEach((v,c,f)=>{d.foundPossibleResultPoint(v)})}}reset(){}}class ki extends Ce{constructor(a=500){super(new si,a)}}class Mn{decode(a,u){try{return this.doDecode(a,u)}catch{if(u&&u.get(J.TRY_HARDER)===!0&&a.isRotateSupported()){const c=a.rotateCounterClockwise(),f=this.doDecode(c,u),b=f.getResultMetadata();let x=270;b!==null&&b.get(dt.ORIENTATION)===!0&&(x=x+b.get(dt.ORIENTATION)%360),f.putMetadata(dt.ORIENTATION,x);const A=f.getResultPoints();if(A!==null){const _=c.getHeight();for(let M=0;M<A.length;M++)A[M]=new ft(_-A[M].getY()-1,A[M].getX())}return f}else throw new ie}}reset(){}doDecode(a,u){const d=a.getWidth(),v=a.getHeight();let c=new se(d);const f=u&&u.get(J.TRY_HARDER)===!0,b=Math.max(1,v>>(f?8:5));let x;f?x=v:x=15;const A=Math.trunc(v/2);for(let _=0;_<x;_++){const M=Math.trunc((_+1)/2),L=(_&1)===0,U=A+b*(L?M:-M);if(U<0||U>=v)break;try{c=a.getBlackRow(U,c)}catch{continue}for(let q=0;q<2;q++){if(q===1&&(c.reverse(),u&&u.get(J.NEED_RESULT_POINT_CALLBACK)===!0)){const K=new Map;u.forEach((G,Z)=>K.set(Z,G)),K.delete(J.NEED_RESULT_POINT_CALLBACK),u=K}try{const K=this.decodeRow(U,c,u);if(q===1){K.putMetadata(dt.ORIENTATION,180);const G=K.getResultPoints();G!==null&&(G[0]=new ft(d-G[0].getX()-1,G[0].getY()),G[1]=new ft(d-G[1].getX()-1,G[1].getY()))}return K}catch{}}}throw new ie}static recordPattern(a,u,d){const v=d.length;for(let A=0;A<v;A++)d[A]=0;const c=a.getSize();if(u>=c)throw new ie;let f=!a.get(u),b=0,x=u;for(;x<c;){if(a.get(x)!==f)d[b]++;else{if(++b===v)break;d[b]=1,f=!f}x++}if(!(b===v||b===v-1&&x===c))throw new ie}static recordPatternInReverse(a,u,d){let v=d.length,c=a.get(u);for(;u>0&&v>=0;)a.get(--u)!==c&&(v--,c=!c);if(v>=0)throw new ie;Mn.recordPattern(a,u+1,d)}static patternMatchVariance(a,u,d){const v=a.length;let c=0,f=0;for(let A=0;A<v;A++)c+=a[A],f+=u[A];if(c<f)return Number.POSITIVE_INFINITY;const b=c/f;d*=b;let x=0;for(let A=0;A<v;A++){const _=a[A],M=u[A]*b,L=_>M?_-M:M-_;if(L>d)return Number.POSITIVE_INFINITY;x+=L}return x/c}}class $e extends Mn{static findStartPattern(a){const u=a.getSize(),d=a.getNextSet(0);let v=0,c=Int32Array.from([0,0,0,0,0,0]),f=d,b=!1;const x=6;for(let A=d;A<u;A++)if(a.get(A)!==b)c[v]++;else{if(v===x-1){let _=$e.MAX_AVG_VARIANCE,M=-1;for(let L=$e.CODE_START_A;L<=$e.CODE_START_C;L++){const U=Mn.patternMatchVariance(c,$e.CODE_PATTERNS[L],$e.MAX_INDIVIDUAL_VARIANCE);U<_&&(_=U,M=L)}if(M>=0&&a.isRange(Math.max(0,f-(A-f)/2),f,!1))return Int32Array.from([f,A,M]);f+=c[0]+c[1],c=c.slice(2,c.length-1),c[v-1]=0,c[v]=0,v--}else v++;c[v]=1,b=!b}throw new ie}static decodeCode(a,u,d){Mn.recordPattern(a,d,u);let v=$e.MAX_AVG_VARIANCE,c=-1;for(let f=0;f<$e.CODE_PATTERNS.length;f++){const b=$e.CODE_PATTERNS[f],x=this.patternMatchVariance(u,b,$e.MAX_INDIVIDUAL_VARIANCE);x<v&&(v=x,c=f)}if(c>=0)return c;throw new ie}decodeRow(a,u,d){const v=d&&d.get(J.ASSUME_GS1)===!0,c=$e.findStartPattern(u),f=c[2];let b=0;const x=new Uint8Array(20);x[b++]=f;let A;switch(f){case $e.CODE_START_A:A=$e.CODE_CODE_A;break;case $e.CODE_START_B:A=$e.CODE_CODE_B;break;case $e.CODE_START_C:A=$e.CODE_CODE_C;break;default:throw new F}let _=!1,M=!1,L="",U=c[0],q=c[1];const K=Int32Array.from([0,0,0,0,0,0]);let G=0,Z=0,re=f,ae=0,le=!0,pe=!1,xe=!1;for(;!_;){const ct=M;switch(M=!1,G=Z,Z=$e.decodeCode(u,K,q),x[b++]=Z,Z!==$e.CODE_STOP&&(le=!0),Z!==$e.CODE_STOP&&(ae++,re+=ae*Z),U=q,q+=K.reduce((ut,xt)=>ut+xt,0),Z){case $e.CODE_START_A:case $e.CODE_START_B:case $e.CODE_START_C:throw new F}switch(A){case $e.CODE_CODE_A:if(Z<64)xe===pe?L+=String.fromCharCode(32+Z):L+=String.fromCharCode(32+Z+128),xe=!1;else if(Z<96)xe===pe?L+=String.fromCharCode(Z-64):L+=String.fromCharCode(Z+64),xe=!1;else switch(Z!==$e.CODE_STOP&&(le=!1),Z){case $e.CODE_FNC_1:v&&(L.length===0?L+="]C1":L+="");break;case $e.CODE_FNC_2:case $e.CODE_FNC_3:break;case $e.CODE_FNC_4_A:!pe&&xe?(pe=!0,xe=!1):pe&&xe?(pe=!1,xe=!1):xe=!0;break;case $e.CODE_SHIFT:M=!0,A=$e.CODE_CODE_B;break;case $e.CODE_CODE_B:A=$e.CODE_CODE_B;break;case $e.CODE_CODE_C:A=$e.CODE_CODE_C;break;case $e.CODE_STOP:_=!0;break}break;case $e.CODE_CODE_B:if(Z<96)xe===pe?L+=String.fromCharCode(32+Z):L+=String.fromCharCode(32+Z+128),xe=!1;else switch(Z!==$e.CODE_STOP&&(le=!1),Z){case $e.CODE_FNC_1:v&&(L.length===0?L+="]C1":L+="");break;case $e.CODE_FNC_2:case $e.CODE_FNC_3:break;case $e.CODE_FNC_4_B:!pe&&xe?(pe=!0,xe=!1):pe&&xe?(pe=!1,xe=!1):xe=!0;break;case $e.CODE_SHIFT:M=!0,A=$e.CODE_CODE_A;break;case $e.CODE_CODE_A:A=$e.CODE_CODE_A;break;case $e.CODE_CODE_C:A=$e.CODE_CODE_C;break;case $e.CODE_STOP:_=!0;break}break;case $e.CODE_CODE_C:if(Z<100)Z<10&&(L+="0"),L+=Z;else switch(Z!==$e.CODE_STOP&&(le=!1),Z){case $e.CODE_FNC_1:v&&(L.length===0?L+="]C1":L+="");break;case $e.CODE_CODE_A:A=$e.CODE_CODE_A;break;case $e.CODE_CODE_B:A=$e.CODE_CODE_B;break;case $e.CODE_STOP:_=!0;break}break}ct&&(A=A===$e.CODE_CODE_A?$e.CODE_CODE_B:$e.CODE_CODE_A)}const Oe=q-U;if(q=u.getNextUnset(q),!u.isRange(q,Math.min(u.getSize(),q+(q-U)/2),!1))throw new ie;if(re-=ae*G,re%103!==G)throw new I;const Me=L.length;if(Me===0)throw new ie;Me>0&&le&&(A===$e.CODE_CODE_C?L=L.substring(0,Me-2):L=L.substring(0,Me-1));const Pe=(c[1]+c[0])/2,Ge=U+Oe/2,tt=x.length,et=new Uint8Array(tt);for(let ct=0;ct<tt;ct++)et[ct]=x[ct];const it=[new ft(Pe,a),new ft(Ge,a)];return new ke(L,et,0,it,Fe.CODE_128,new Date().getTime())}}$e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],$e.MAX_AVG_VARIANCE=.25,$e.MAX_INDIVIDUAL_VARIANCE=.7,$e.CODE_SHIFT=98,$e.CODE_CODE_C=99,$e.CODE_CODE_B=100,$e.CODE_CODE_A=101,$e.CODE_FNC_1=102,$e.CODE_FNC_2=97,$e.CODE_FNC_3=96,$e.CODE_FNC_4_A=101,$e.CODE_FNC_4_B=100,$e.CODE_START_A=103,$e.CODE_START_B=104,$e.CODE_START_C=105,$e.CODE_STOP=106;class rt extends Mn{constructor(a=!1,u=!1){super(),this.usingCheckDigit=a,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,u,d){let v=this.counters;v.fill(0),this.decodeRowResult="";let c=rt.findAsteriskPattern(u,v),f=u.getNextSet(c[1]),b=u.getSize(),x,A;do{rt.recordPattern(u,f,v);let K=rt.toNarrowWidePattern(v);if(K<0)throw new ie;x=rt.patternToChar(K),this.decodeRowResult+=x,A=f;for(let G of v)f+=G;f=u.getNextSet(f)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let K of v)_+=K;let M=f-A-_;if(f!==b&&M*2<_)throw new ie;if(this.usingCheckDigit){let K=this.decodeRowResult.length-1,G=0;for(let Z=0;Z<K;Z++)G+=rt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Z));if(this.decodeRowResult.charAt(K)!==rt.ALPHABET_STRING.charAt(G%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,K)}if(this.decodeRowResult.length===0)throw new ie;let L;this.extendedMode?L=rt.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let U=(c[1]+c[0])/2,q=A+_/2;return new ke(L,null,0,[new ft(U,a),new ft(q,a)],Fe.CODE_39,new Date().getTime())}static findAsteriskPattern(a,u){let d=a.getSize(),v=a.getNextSet(0),c=0,f=v,b=!1,x=u.length;for(let A=v;A<d;A++)if(a.get(A)!==b)u[c]++;else{if(c===x-1){if(this.toNarrowWidePattern(u)===rt.ASTERISK_ENCODING&&a.isRange(Math.max(0,f-Math.floor((A-f)/2)),f,!1))return[f,A];f+=u[0]+u[1],u.copyWithin(0,2,2+c-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,b=!b}throw new ie}static toNarrowWidePattern(a){let u=a.length,d=0,v;do{let c=2147483647;for(let x of a)x<c&&x>d&&(c=x);d=c,v=0;let f=0,b=0;for(let x=0;x<u;x++){let A=a[x];A>d&&(b|=1<<u-1-x,v++,f+=A)}if(v===3){for(let x=0;x<u&&v>0;x++){let A=a[x];if(A>d&&(v--,A*2>=f))return-1}return b}}while(v>3);return-1}static patternToChar(a){for(let u=0;u<rt.CHARACTER_ENCODINGS.length;u++)if(rt.CHARACTER_ENCODINGS[u]===a)return rt.ALPHABET_STRING.charAt(u);if(a===rt.ASTERISK_ENCODING)return"*";throw new ie}static decodeExtended(a){let u=a.length,d="";for(let v=0;v<u;v++){let c=a.charAt(v);if(c==="+"||c==="$"||c==="%"||c==="/"){let f=a.charAt(v+1),b="\0";switch(c){case"+":if(f>="A"&&f<="Z")b=String.fromCharCode(f.charCodeAt(0)+32);else throw new F;break;case"$":if(f>="A"&&f<="Z")b=String.fromCharCode(f.charCodeAt(0)-64);else throw new F;break;case"%":if(f>="A"&&f<="E")b=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")b=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")b=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")b=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")b="\0";else if(f==="V")b="@";else if(f==="W")b="`";else if(f==="X"||f==="Y"||f==="Z")b="";else throw new F;break;case"/":if(f>="A"&&f<="O")b=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")b=":";else throw new F;break}d+=b,v++}else d+=c}return d}}rt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",rt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],rt.ASTERISK_ENCODING=148;class jt extends Mn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,u,d){let v=this.decodeStart(u),c=this.decodeEnd(u),f=new he;jt.decodeMiddle(u,v[1],c[0],f);let b=f.toString(),x=null;d!=null&&(x=d.get(J.ALLOWED_LENGTHS)),x==null&&(x=jt.DEFAULT_ALLOWED_LENGTHS);let A=b.length,_=!1,M=0;for(let q of x){if(A===q){_=!0;break}q>M&&(M=q)}if(!_&&A>M&&(_=!0),!_)throw new F;const L=[new ft(v[1],a),new ft(c[0],a)];return new ke(b,null,0,L,Fe.ITF,new Date().getTime())}static decodeMiddle(a,u,d,v){let c=new Int32Array(10),f=new Int32Array(5),b=new Int32Array(5);for(c.fill(0),f.fill(0),b.fill(0);u<d;){Mn.recordPattern(a,u,c);for(let A=0;A<5;A++){let _=2*A;f[A]=c[_],b[A]=c[_+1]}let x=jt.decodeDigit(f);v.append(x.toString()),x=this.decodeDigit(b),v.append(x.toString()),c.forEach(function(A){u+=A})}}decodeStart(a){let u=jt.skipWhiteSpace(a),d=jt.findGuardPattern(a,u,jt.START_PATTERN);return this.narrowLineWidth=(d[1]-d[0])/4,this.validateQuietZone(a,d[0]),d}validateQuietZone(a,u){let d=this.narrowLineWidth*10;d=d<u?d:u;for(let v=u-1;d>0&&v>=0&&!a.get(v);v--)d--;if(d!==0)throw new ie}static skipWhiteSpace(a){const u=a.getSize(),d=a.getNextSet(0);if(d===u)throw new ie;return d}decodeEnd(a){a.reverse();try{let u=jt.skipWhiteSpace(a),d;try{d=jt.findGuardPattern(a,u,jt.END_PATTERN_REVERSED[0])}catch(c){c instanceof ie&&(d=jt.findGuardPattern(a,u,jt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,d[0]);let v=d[0];return d[0]=a.getSize()-d[1],d[1]=a.getSize()-v,d}finally{a.reverse()}}static findGuardPattern(a,u,d){let v=d.length,c=new Int32Array(v),f=a.getSize(),b=!1,x=0,A=u;c.fill(0);for(let _=u;_<f;_++)if(a.get(_)!==b)c[x]++;else{if(x===v-1){if(Mn.patternMatchVariance(c,d,jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return[A,_];A+=c[0]+c[1],D.arraycopy(c,2,c,0,x-1),c[x-1]=0,c[x]=0,x--}else x++;c[x]=1,b=!b}throw new ie}static decodeDigit(a){let u=jt.MAX_AVG_VARIANCE,d=-1,v=jt.PATTERNS.length;for(let c=0;c<v;c++){let f=jt.PATTERNS[c],b=Mn.patternMatchVariance(a,f,jt.MAX_INDIVIDUAL_VARIANCE);b<u?(u=b,d=c):b===u&&(d=-1)}if(d>=0)return d%10;throw new ie}}jt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],jt.MAX_AVG_VARIANCE=.38,jt.MAX_INDIVIDUAL_VARIANCE=.5,jt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],jt.START_PATTERN=Int32Array.from([1,1,1,1]),jt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class dn extends Mn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let u=!1,d,v=0,c=Int32Array.from([0,0,0]);for(;!u;){c=Int32Array.from([0,0,0]),d=dn.findGuardPattern(a,v,!1,this.START_END_PATTERN,c);let f=d[0];v=d[1];let b=f-(v-f);b>=0&&(u=a.isRange(b,f,!1))}return d}static checkChecksum(a){return dn.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let u=a.length;if(u===0)return!1;let d=parseInt(a.charAt(u-1),10);return dn.getStandardUPCEANChecksum(a.substring(0,u-1))===d}static getStandardUPCEANChecksum(a){let u=a.length,d=0;for(let v=u-1;v>=0;v-=2){let c=a.charAt(v).charCodeAt(0)-48;if(c<0||c>9)throw new F;d+=c}d*=3;for(let v=u-2;v>=0;v-=2){let c=a.charAt(v).charCodeAt(0)-48;if(c<0||c>9)throw new F;d+=c}return(1e3-d)%10}static decodeEnd(a,u){return dn.findGuardPattern(a,u,!1,dn.START_END_PATTERN,new Int32Array(dn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,u,d,v){return this.findGuardPattern(a,u,d,v,new Int32Array(v.length))}static findGuardPattern(a,u,d,v,c){let f=a.getSize();u=d?a.getNextUnset(u):a.getNextSet(u);let b=0,x=u,A=v.length,_=d;for(let M=u;M<f;M++)if(a.get(M)!==_)c[b]++;else{if(b===A-1){if(Mn.patternMatchVariance(c,v,dn.MAX_INDIVIDUAL_VARIANCE)<dn.MAX_AVG_VARIANCE)return Int32Array.from([x,M]);x+=c[0]+c[1];let L=c.slice(2,c.length-1);for(let U=0;U<b-1;U++)c[U]=L[U];c[b-1]=0,c[b]=0,b--}else b++;c[b]=1,_=!_}throw new ie}static decodeDigit(a,u,d,v){this.recordPattern(a,d,u);let c=this.MAX_AVG_VARIANCE,f=-1,b=v.length;for(let x=0;x<b;x++){let A=v[x],_=Mn.patternMatchVariance(u,A,dn.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,f=x)}if(f>=0)return f;throw new ie}}dn.MAX_AVG_VARIANCE=.48,dn.MAX_INDIVIDUAL_VARIANCE=.7,dn.START_END_PATTERN=Int32Array.from([1,1,1]),dn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),dn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),dn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Yr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,u,d){let v=this.decodeRowStringBuffer,c=this.decodeMiddle(u,d,v),f=v.toString(),b=Yr.parseExtensionString(f),x=[new ft((d[0]+d[1])/2,a),new ft(c,a)],A=new ke(f,null,0,x,Fe.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&A.putAllMetadata(b),A}decodeMiddle(a,u,d){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=a.getSize(),f=u[1],b=0;for(let A=0;A<5&&f<c;A++){let _=dn.decodeDigit(a,v,f,dn.L_AND_G_PATTERNS);d+=String.fromCharCode(48+_%10);for(let M of v)f+=M;_>=10&&(b|=1<<4-A),A!==4&&(f=a.getNextSet(f),f=a.getNextUnset(f))}if(d.length!==5)throw new ie;let x=this.determineCheckDigit(b);if(Yr.extensionChecksum(d.toString())!==x)throw new ie;return f}static extensionChecksum(a){let u=a.length,d=0;for(let v=u-2;v>=0;v-=2)d+=a.charAt(v).charCodeAt(0)-48;d*=3;for(let v=u-1;v>=0;v-=2)d+=a.charAt(v).charCodeAt(0)-48;return d*=3,d%10}determineCheckDigit(a){for(let u=0;u<10;u++)if(a===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new ie}static parseExtensionString(a){if(a.length!==5)return null;let u=Yr.parseExtension5String(a);return u==null?null:new Map([[dt.SUGGESTED_PRICE,u]])}static parseExtension5String(a){let u;switch(a.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let d=parseInt(a.substring(1)),v=(d/100).toString(),c=d%100,f=c<10?"0"+c:c.toString();return u+v+"."+f}}class st{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,u,d){let v=this.decodeRowStringBuffer,c=this.decodeMiddle(u,d,v),f=v.toString(),b=st.parseExtensionString(f),x=[new ft((d[0]+d[1])/2,a),new ft(c,a)],A=new ke(f,null,0,x,Fe.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&A.putAllMetadata(b),A}decodeMiddle(a,u,d){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=a.getSize(),f=u[1],b=0;for(let x=0;x<2&&f<c;x++){let A=dn.decodeDigit(a,v,f,dn.L_AND_G_PATTERNS);d+=String.fromCharCode(48+A%10);for(let _ of v)f+=_;A>=10&&(b|=1<<1-x),x!==1&&(f=a.getNextSet(f),f=a.getNextUnset(f))}if(d.length!==2)throw new ie;if(parseInt(d.toString())%4!==b)throw new ie;return f}static parseExtensionString(a){return a.length!==2?null:new Map([[dt.ISSUE_NUMBER,parseInt(a)]])}}class Hr{static decodeRow(a,u,d){let v=dn.findGuardPattern(u,d,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Yr().decodeRow(a,u,v)}catch{return new st().decodeRow(a,u,v)}}}Hr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Qt extends dn{constructor(){super(),this.decodeRowStringBuffer="",Qt.L_AND_G_PATTERNS=Qt.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let u=Qt.L_PATTERNS[a-10],d=new Int32Array(u.length);for(let v=0;v<u.length;v++)d[v]=u[u.length-v-1];Qt.L_AND_G_PATTERNS[a]=d}}decodeRow(a,u,d){let v=Qt.findStartGuardPattern(u),c=d==null?null:d.get(J.NEED_RESULT_POINT_CALLBACK);if(c!=null){const le=new ft((v[0]+v[1])/2,a);c.foundPossibleResultPoint(le)}let f=this.decodeMiddle(u,v,this.decodeRowStringBuffer),b=f.rowOffset,x=f.resultString;if(c!=null){const le=new ft(b,a);c.foundPossibleResultPoint(le)}let A=this.decodeEnd(u,b);if(c!=null){const le=new ft((A[0]+A[1])/2,a);c.foundPossibleResultPoint(le)}let _=A[1],M=_+(_-A[0]);if(M>=u.getSize()||!u.isRange(_,M,!1))throw new ie;let L=x.toString();if(L.length<8)throw new F;if(!Qt.checkChecksum(L))throw new I;let U=(v[1]+v[0])/2,q=(A[1]+A[0])/2,K=this.getBarcodeFormat(),G=[new ft(U,a),new ft(q,a)],Z=new ke(L,null,0,G,K,new Date().getTime()),re=0;try{let le=Hr.decodeRow(a,u,A[1]);Z.putMetadata(dt.UPC_EAN_EXTENSION,le.getText()),Z.putAllMetadata(le.getResultMetadata()),Z.addResultPoints(le.getResultPoints()),re=le.getText().length}catch{}let ae=d==null?null:d.get(J.ALLOWED_EAN_EXTENSIONS);if(ae!=null){let le=!1;for(let pe in ae)if(re.toString()===pe){le=!0;break}if(!le)throw new ie}return Z}decodeEnd(a,u){return Qt.findGuardPattern(a,u,!1,Qt.START_END_PATTERN,new Int32Array(Qt.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return Qt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let u=a.length;if(u===0)return!1;let d=parseInt(a.charAt(u-1),10);return Qt.getStandardUPCEANChecksum(a.substring(0,u-1))===d}static getStandardUPCEANChecksum(a){let u=a.length,d=0;for(let v=u-1;v>=0;v-=2){let c=a.charAt(v).charCodeAt(0)-48;if(c<0||c>9)throw new F;d+=c}d*=3;for(let v=u-2;v>=0;v-=2){let c=a.charAt(v).charCodeAt(0)-48;if(c<0||c>9)throw new F;d+=c}return(1e3-d)%10}}class cr extends Qt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,u,d){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=a.getSize(),f=u[1],b=0;for(let A=0;A<6&&f<c;A++){let _=Qt.decodeDigit(a,v,f,Qt.L_AND_G_PATTERNS);d+=String.fromCharCode(48+_%10);for(let M of v)f+=M;_>=10&&(b|=1<<5-A)}d=cr.determineFirstDigit(d,b),f=Qt.findGuardPattern(a,f,!0,Qt.MIDDLE_PATTERN,new Int32Array(Qt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&f<c;A++){let _=Qt.decodeDigit(a,v,f,Qt.L_PATTERNS);d+=String.fromCharCode(48+_);for(let M of v)f+=M}return{rowOffset:f,resultString:d}}getBarcodeFormat(){return Fe.EAN_13}static determineFirstDigit(a,u){for(let d=0;d<10;d++)if(u===this.FIRST_DIGIT_ENCODINGS[d])return a=String.fromCharCode(48+d)+a,a;throw new ie}}cr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ai extends Qt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,u,d){const v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=a.getSize(),f=u[1];for(let x=0;x<4&&f<c;x++){let A=Qt.decodeDigit(a,v,f,Qt.L_PATTERNS);d+=String.fromCharCode(48+A);for(let _ of v)f+=_}f=Qt.findGuardPattern(a,f,!0,Qt.MIDDLE_PATTERN,new Int32Array(Qt.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&f<c;x++){let A=Qt.decodeDigit(a,v,f,Qt.L_PATTERNS);d+=String.fromCharCode(48+A);for(let _ of v)f+=_}return{rowOffset:f,resultString:d}}getBarcodeFormat(){return Fe.EAN_8}}class Xr extends Qt{constructor(){super(...arguments),this.ean13Reader=new cr}getBarcodeFormat(){return Fe.UPC_A}decode(a,u){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,u,d){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,u,d))}decodeMiddle(a,u,d){return this.ean13Reader.decodeMiddle(a,u,d)}maybeReturnResult(a){let u=a.getText();if(u.charAt(0)==="0"){let d=new ke(u.substring(1),null,null,a.getResultPoints(),Fe.UPC_A);return a.getResultMetadata()!=null&&d.putAllMetadata(a.getResultMetadata()),d}else throw new ie}reset(){this.ean13Reader.reset()}}class wr extends Qt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,u,d){const v=this.decodeMiddleCounters.map(A=>A);v[0]=0,v[1]=0,v[2]=0,v[3]=0;const c=a.getSize();let f=u[1],b=0;for(let A=0;A<6&&f<c;A++){const _=wr.decodeDigit(a,v,f,wr.L_AND_G_PATTERNS);d+=String.fromCharCode(48+_%10);for(let M of v)f+=M;_>=10&&(b|=1<<5-A)}let x=wr.determineNumSysAndCheckDigit(d,b);return{rowOffset:f,resultString:x}}decodeEnd(a,u){return wr.findGuardPatternWithoutCounters(a,u,!0,wr.MIDDLE_END_PATTERN)}checkChecksum(a){return Qt.checkChecksum(wr.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,u){for(let d=0;d<=1;d++)for(let v=0;v<10;v++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[d][v]){let c=String.fromCharCode(48+d),f=String.fromCharCode(48+v);return c+a+f}throw ie.getNotFoundInstance()}getBarcodeFormat(){return Fe.UPC_E}static convertUPCEtoUPCA(a){const u=a.slice(1,7).split("").map(c=>c.charCodeAt(0)),d=new he;d.append(a.charAt(0));let v=u[5];switch(v){case 0:case 1:case 2:d.appendChars(u,0,2),d.append(v),d.append("0000"),d.appendChars(u,2,3);break;case 3:d.appendChars(u,0,3),d.append("00000"),d.appendChars(u,3,2);break;case 4:d.appendChars(u,0,4),d.append("00000"),d.append(u[4]);break;default:d.appendChars(u,0,5),d.append("0000"),d.append(v);break}return a.length>=8&&d.append(a.charAt(7)),d.toString()}}wr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),wr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Yi extends Mn{constructor(a){super();let u=a==null?null:a.get(J.POSSIBLE_FORMATS),d=[];r(u)?(d.push(new cr),d.push(new Xr),d.push(new ai),d.push(new wr)):(u.indexOf(Fe.EAN_13)>-1&&d.push(new cr),u.indexOf(Fe.UPC_A)>-1&&d.push(new Xr),u.indexOf(Fe.EAN_8)>-1&&d.push(new ai),u.indexOf(Fe.UPC_E)>-1&&d.push(new wr)),this.readers=d}decodeRow(a,u,d){for(let v of this.readers)try{const c=v.decodeRow(a,u,d),f=c.getBarcodeFormat()===Fe.EAN_13&&c.getText().charAt(0)==="0",b=d==null?null:d.get(J.POSSIBLE_FORMATS),x=b==null||b.includes(Fe.UPC_A);if(f&&x){const A=c.getRawBytes(),_=new ke(c.getText().substring(1),A,A?A.length:null,c.getResultPoints(),Fe.UPC_A);return _.putAllMetadata(c.getResultMetadata()),_}return c}catch{}throw new ie}reset(){for(let a of this.readers)a.reset()}}class _n extends Mn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,u){for(let d=0;d<u.length;d++)if(Mn.patternMatchVariance(a,u[d],_n.MAX_INDIVIDUAL_VARIANCE)<_n.MAX_AVG_VARIANCE)return d;throw new ie}static count(a){return tn.sum(new Int32Array(a))}static increment(a,u){let d=0,v=u[0];for(let c=1;c<a.length;c++)u[c]>v&&(v=u[c],d=c);a[d]++}static decrement(a,u){let d=0,v=u[0];for(let c=1;c<a.length;c++)u[c]<v&&(v=u[c],d=c);a[d]--}static isFinderPattern(a){let u=a[0]+a[1],d=u+a[2]+a[3],v=u/d;if(v>=_n.MIN_FINDER_PATTERN_RATIO&&v<=_n.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let b of a)b>f&&(f=b),b<c&&(c=b);return f<10*c}return!1}}_n.MAX_AVG_VARIANCE=.2,_n.MAX_INDIVIDUAL_VARIANCE=.45,_n.MIN_FINDER_PATTERN_RATIO=9.5/12,_n.MAX_FINDER_PATTERN_RATIO=12.5/14;class Kn{constructor(a,u){this.value=a,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof Kn))return!1;const u=a;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Wr{constructor(a,u,d,v,c){this.value=a,this.startEnd=u,this.value=a,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new ft(d,c)),this.resultPoints.push(new ft(v,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof Wr))return!1;const u=a;return this.value===u.value}hashCode(){return this.value}}class Qn{constructor(){}static getRSSvalue(a,u,d){let v=0;for(let x of a)v+=x;let c=0,f=0,b=a.length;for(let x=0;x<b-1;x++){let A;for(A=1,f|=1<<x;A<a[x];A++,f&=~(1<<x)){let _=Qn.combins(v-A-1,b-x-2);if(d&&f===0&&v-A-(b-x-1)>=b-x-1&&(_-=Qn.combins(v-A-(b-x),b-x-2)),b-x-1>1){let M=0;for(let L=v-A-(b-x-2);L>u;L--)M+=Qn.combins(v-A-L-1,b-x-3);_-=M*(b-1-x)}else v-A>u&&_--;c+=_}v-=A}return c}static combins(a,u){let d,v;a-u>u?(v=u,d=a-u):(v=a-u,d=u);let c=1,f=1;for(let b=a;b>d;b--)c*=b,f<=v&&(c/=f,f++);for(;f<=v;)c/=f,f++;return c}}class kn{static buildBitArray(a){let u=a.length*2-1;a[a.length-1].getRightChar()==null&&(u-=1);let d=12*u,v=new se(d),c=0,b=a[0].getRightChar().getValue();for(let x=11;x>=0;--x)(b&1<<x)!=0&&v.set(c),c++;for(let x=1;x<a.length;++x){let A=a[x],_=A.getLeftChar().getValue();for(let M=11;M>=0;--M)(_&1<<M)!=0&&v.set(c),c++;if(A.getRightChar()!=null){let M=A.getRightChar().getValue();for(let L=11;L>=0;--L)(M&1<<L)!=0&&v.set(c),c++}}return v}}class ue{constructor(a,u){u?this.decodedInformation=null:(this.finished=a,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Se{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class Te extends Se{constructor(a,u){super(a),this.value=u}getValue(){return this.value}isFNC1(){return this.value===Te.FNC1}}Te.FNC1="$";class Xe extends Se{constructor(a,u,d){super(a),d?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ke extends Se{constructor(a,u,d){if(super(a),u<0||u>10||d<0||d>10)throw new F;this.firstDigit=u,this.secondDigit=d}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ke.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ke.FNC1}isAnyFNC1(){return this.firstDigit===Ke.FNC1||this.secondDigit===Ke.FNC1}}Ke.FNC1=10;class Ue{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new ie;let u=a.substring(0,2);for(let c of Ue.TWO_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(2,c[2],a):Ue.processFixedAI(2,c[1],a);if(a.length<3)throw new ie;let d=a.substring(0,3);for(let c of Ue.THREE_DIGIT_DATA_LENGTH)if(c[0]===d)return c[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(3,c[2],a):Ue.processFixedAI(3,c[1],a);for(let c of Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===d)return c[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,c[2],a):Ue.processFixedAI(4,c[1],a);if(a.length<4)throw new ie;let v=a.substring(0,4);for(let c of Ue.FOUR_DIGIT_DATA_LENGTH)if(c[0]===v)return c[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,c[2],a):Ue.processFixedAI(4,c[1],a);throw new ie}static processFixedAI(a,u,d){if(d.length<a)throw new ie;let v=d.substring(0,a);if(d.length<a+u)throw new ie;let c=d.substring(a,a+u),f=d.substring(a+u),b="("+v+")"+c,x=Ue.parseFieldsInGeneralPurpose(f);return x==null?b:b+x}static processVariableAI(a,u,d){let v=d.substring(0,a),c;d.length<a+u?c=d.length:c=a+u;let f=d.substring(a,c),b=d.substring(c),x="("+v+")"+f,A=Ue.parseFieldsInGeneralPurpose(b);return A==null?x:x+A}}Ue.VARIABLE_LENGTH=[],Ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ue.VARIABLE_LENGTH,20],["22",Ue.VARIABLE_LENGTH,29],["30",Ue.VARIABLE_LENGTH,8],["37",Ue.VARIABLE_LENGTH,8],["90",Ue.VARIABLE_LENGTH,30],["91",Ue.VARIABLE_LENGTH,30],["92",Ue.VARIABLE_LENGTH,30],["93",Ue.VARIABLE_LENGTH,30],["94",Ue.VARIABLE_LENGTH,30],["95",Ue.VARIABLE_LENGTH,30],["96",Ue.VARIABLE_LENGTH,30],["97",Ue.VARIABLE_LENGTH,3],["98",Ue.VARIABLE_LENGTH,30],["99",Ue.VARIABLE_LENGTH,30]],Ue.THREE_DIGIT_DATA_LENGTH=[["240",Ue.VARIABLE_LENGTH,30],["241",Ue.VARIABLE_LENGTH,30],["242",Ue.VARIABLE_LENGTH,6],["250",Ue.VARIABLE_LENGTH,30],["251",Ue.VARIABLE_LENGTH,30],["253",Ue.VARIABLE_LENGTH,17],["254",Ue.VARIABLE_LENGTH,20],["400",Ue.VARIABLE_LENGTH,30],["401",Ue.VARIABLE_LENGTH,30],["402",17],["403",Ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ue.VARIABLE_LENGTH,20],["421",Ue.VARIABLE_LENGTH,15],["422",3],["423",Ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ue.VARIABLE_LENGTH,15],["391",Ue.VARIABLE_LENGTH,18],["392",Ue.VARIABLE_LENGTH,15],["393",Ue.VARIABLE_LENGTH,18],["703",Ue.VARIABLE_LENGTH,30]],Ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ue.VARIABLE_LENGTH,20],["8003",Ue.VARIABLE_LENGTH,30],["8004",Ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ue.VARIABLE_LENGTH,30],["8008",Ue.VARIABLE_LENGTH,12],["8018",18],["8020",Ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ue.VARIABLE_LENGTH,70],["8200",Ue.VARIABLE_LENGTH,70]];class at{constructor(a){this.buffer=new he,this.information=a}decodeAllCodes(a,u){let d=u,v=null;do{let c=this.decodeGeneralPurposeField(d,v),f=Ue.parseFieldsInGeneralPurpose(c.getNewString());if(f!=null&&a.append(f),c.isRemaining()?v=""+c.getRemainingValue():v=null,d===c.getNewPosition())break;d=c.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let u=a;u<a+3;++u)if(this.information.get(u))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(a,4);return c===0?new Ke(this.information.getSize(),Ke.FNC1,Ke.FNC1):new Ke(this.information.getSize(),c-1,Ke.FNC1)}let u=this.extractNumericValueFromBitArray(a,7),d=(u-8)/11,v=(u-8)%11;return new Ke(a+7,d,v)}extractNumericValueFromBitArray(a,u){return at.extractNumericValueFromBitArray(this.information,a,u)}static extractNumericValueFromBitArray(a,u,d){let v=0;for(let c=0;c<d;++c)a.get(u+c)&&(v|=1<<d-c-1);return v}decodeGeneralPurposeField(a,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(a);let d=this.parseBlocks();return d!=null&&d.isRemaining()?new Xe(this.current.getPosition(),this.buffer.toString(),d.getRemainingValue()):new Xe(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,u;do{let d=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),a=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),a=u.isFinished()):(u=this.parseNumericBlock(),a=u.isFinished()),!(d!==this.current.getPosition())&&!a)break}while(!a);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let u;return a.isSecondDigitFNC1()?u=new Xe(this.current.getPosition(),this.buffer.toString()):u=new Xe(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new ue(!0,u)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let u=new Xe(this.current.getPosition(),this.buffer.toString());return new ue(!0,u)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ue(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let u=new Xe(this.current.getPosition(),this.buffer.toString());return new ue(!0,u)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ue(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let u=new Xe(this.current.getPosition(),this.buffer.toString());return new ue(!0,u)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ue(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(a,5);if(u>=5&&u<16)return!0;if(a+7>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(a,7);if(d>=64&&d<116)return!0;if(a+8>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(a,8);return v>=232&&v<253}decodeIsoIec646(a){let u=this.extractNumericValueFromBitArray(a,5);if(u===15)return new Te(a+5,Te.FNC1);if(u>=5&&u<15)return new Te(a+5,"0"+(u-5));let d=this.extractNumericValueFromBitArray(a,7);if(d>=64&&d<90)return new Te(a+7,""+(d+1));if(d>=90&&d<116)return new Te(a+7,""+(d+7));let v=this.extractNumericValueFromBitArray(a,8),c;switch(v){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new F}return new Te(a+8,c)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(a,5);if(u>=5&&u<16)return!0;if(a+6>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(a,6);return d>=16&&d<63}decodeAlphanumeric(a){let u=this.extractNumericValueFromBitArray(a,5);if(u===15)return new Te(a+5,Te.FNC1);if(u>=5&&u<15)return new Te(a+5,"0"+(u-5));let d=this.extractNumericValueFromBitArray(a,6);if(d>=32&&d<58)return new Te(a+6,""+(d+33));let v;switch(d){case 58:v="*";break;case 59:v=",";break;case 60:v="-";break;case 61:v=".";break;case 62:v="/";break;default:throw new mn("Decoding invalid alphanumeric value: "+d)}return new Te(a+6,v)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let u=0;u<5&&u+a<this.information.getSize();++u)if(u===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+u))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let u=a;u<a+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let u=0;u<4&&u+a<this.information.getSize();++u)if(this.information.get(a+u))return!1;return!0}}class ot{constructor(a){this.information=a,this.generalDecoder=new at(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class nt extends ot{constructor(a){super(a)}encodeCompressedGtin(a,u){a.append("(01)");let d=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,u,d)}encodeCompressedGtinWithoutAI(a,u,d){for(let v=0;v<4;++v){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*v,10);c/100===0&&a.append("0"),c/10===0&&a.append("0"),a.append(c)}nt.appendCheckDigit(a,d)}static appendCheckDigit(a,u){let d=0;for(let v=0;v<13;v++){let c=a.charAt(v+u).charCodeAt(0)-48;d+=(v&1)===0?3*c:c}d=10-d%10,d===10&&(d=0),a.append(d)}}nt.GTIN_SIZE=40;class gt extends nt{constructor(a){super(a)}parseInformation(){let a=new he;a.append("(01)");let u=a.length(),d=this.getGeneralDecoder().extractNumericValueFromBitArray(gt.HEADER_SIZE,4);return a.append(d),this.encodeCompressedGtinWithoutAI(a,gt.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(a,gt.HEADER_SIZE+44)}}gt.HEADER_SIZE=4;class yt extends ot{constructor(a){super(a)}parseInformation(){let a=new he;return this.getGeneralDecoder().decodeAllCodes(a,yt.HEADER_SIZE)}}yt.HEADER_SIZE=5;class vt extends nt{constructor(a){super(a)}encodeCompressedWeight(a,u,d){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(u,d);this.addWeightCode(a,v);let c=this.checkWeight(v),f=1e5;for(let b=0;b<5;++b)c/f===0&&a.append("0"),f/=10;a.append(c)}}class Ht extends vt{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=Ht.HEADER_SIZE+vt.GTIN_SIZE+Ht.WEIGHT_SIZE)throw new ie;let a=new he;return this.encodeCompressedGtin(a,Ht.HEADER_SIZE),this.encodeCompressedWeight(a,Ht.HEADER_SIZE+vt.GTIN_SIZE,Ht.WEIGHT_SIZE),a.toString()}}Ht.HEADER_SIZE=5,Ht.WEIGHT_SIZE=15;class $t extends Ht{constructor(a){super(a)}addWeightCode(a,u){a.append("(3103)")}checkWeight(a){return a}}class zn extends Ht{constructor(a){super(a)}addWeightCode(a,u){u<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class gn extends nt{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<gn.HEADER_SIZE+nt.GTIN_SIZE)throw new ie;let a=new he;this.encodeCompressedGtin(a,gn.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(gn.HEADER_SIZE+nt.GTIN_SIZE,gn.LAST_DIGIT_SIZE);a.append("(392"),a.append(u),a.append(")");let d=this.getGeneralDecoder().decodeGeneralPurposeField(gn.HEADER_SIZE+nt.GTIN_SIZE+gn.LAST_DIGIT_SIZE,null);return a.append(d.getNewString()),a.toString()}}gn.HEADER_SIZE=8,gn.LAST_DIGIT_SIZE=2;class bt extends nt{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<bt.HEADER_SIZE+nt.GTIN_SIZE)throw new ie;let a=new he;this.encodeCompressedGtin(a,bt.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(bt.HEADER_SIZE+nt.GTIN_SIZE,bt.LAST_DIGIT_SIZE);a.append("(393"),a.append(u),a.append(")");let d=this.getGeneralDecoder().extractNumericValueFromBitArray(bt.HEADER_SIZE+nt.GTIN_SIZE+bt.LAST_DIGIT_SIZE,bt.FIRST_THREE_DIGITS_SIZE);d/100==0&&a.append("0"),d/10==0&&a.append("0"),a.append(d);let v=this.getGeneralDecoder().decodeGeneralPurposeField(bt.HEADER_SIZE+nt.GTIN_SIZE+bt.LAST_DIGIT_SIZE+bt.FIRST_THREE_DIGITS_SIZE,null);return a.append(v.getNewString()),a.toString()}}bt.HEADER_SIZE=8,bt.LAST_DIGIT_SIZE=2,bt.FIRST_THREE_DIGITS_SIZE=10;class Et extends vt{constructor(a,u,d){super(a),this.dateCode=d,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE+Et.DATE_SIZE)throw new ie;let a=new he;return this.encodeCompressedGtin(a,Et.HEADER_SIZE),this.encodeCompressedWeight(a,Et.HEADER_SIZE+Et.GTIN_SIZE,Et.WEIGHT_SIZE),this.encodeCompressedDate(a,Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(u,Et.DATE_SIZE);if(d==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let v=d%32;d/=32;let c=d%12+1;d/=12;let f=d;f/10==0&&a.append("0"),a.append(f),c/10==0&&a.append("0"),a.append(c),v/10==0&&a.append("0"),a.append(v)}addWeightCode(a,u){a.append("("),a.append(this.firstAIdigits),a.append(u/1e5),a.append(")")}checkWeight(a){return a%1e5}}Et.HEADER_SIZE=8,Et.WEIGHT_SIZE=20,Et.DATE_SIZE=16;function jn(z){try{if(z.get(1))return new gt(z);if(!z.get(2))return new yt(z);switch(at.extractNumericValueFromBitArray(z,1,4)){case 4:return new $t(z);case 5:return new zn(z)}switch(at.extractNumericValueFromBitArray(z,1,5)){case 12:return new gn(z);case 13:return new bt(z)}switch(at.extractNumericValueFromBitArray(z,1,7)){case 56:return new Et(z,"310","11");case 57:return new Et(z,"320","11");case 58:return new Et(z,"310","13");case 59:return new Et(z,"320","13");case 60:return new Et(z,"310","15");case 61:return new Et(z,"320","15");case 62:return new Et(z,"310","17");case 63:return new Et(z,"320","17")}}catch(a){throw console.log(a),new mn("unknown decoder: "+z)}}class Xn{constructor(a,u,d,v){this.leftchar=a,this.rightchar=u,this.finderpattern=d,this.maybeLast=v}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,u){return a instanceof Xn?Xn.equalsOrNull(a.leftchar,u.leftchar)&&Xn.equalsOrNull(a.rightchar,u.rightchar)&&Xn.equalsOrNull(a.finderpattern,u.finderpattern):!1}static equalsOrNull(a,u){return a===null?u===null:Xn.equals(a,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class En{constructor(a,u,d){this.pairs=a,this.rowNumber=u,this.wasReversed=d}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,u){return a instanceof En?this.checkEqualitity(a,u)&&a.wasReversed===u.wasReversed:!1}checkEqualitity(a,u){if(!a||!u)return;let d;return a.forEach((v,c)=>{u.forEach(f=>{v.getLeftChar().getValue()===f.getLeftChar().getValue()&&v.getRightChar().getValue()===f.getRightChar().getValue()&&v.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(d=!0)})}),d}}class qe extends _n{constructor(a){super(...arguments),this.pairs=new Array(qe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,u,d){this.pairs.length=0,this.startFromEven=!1;try{return qe.constructResult(this.decodeRow2pairs(a,u))}catch(v){this.verbose&&console.log(v)}return this.pairs.length=0,this.startFromEven=!0,qe.constructResult(this.decodeRow2pairs(a,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,u){let d=!1;for(;!d;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,a))}catch(c){if(c instanceof ie){if(!this.pairs.length)throw new ie;d=!0}}if(this.checkChecksum())return this.pairs;let v;if(this.rows.length?v=!0:v=!1,this.storeRow(a,!1),v){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new ie}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(d){this.verbose&&console.log(d)}return a&&(this.rows=this.rows.reverse()),u}checkRows(a,u){for(let d=u;d<this.rows.length;d++){let v=this.rows[d];this.pairs.length=0;for(let f of a)this.pairs.push(f.getPairs());if(this.pairs.push(v.getPairs()),!qe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(a);c.push(v);try{return this.checkRows(c,d+1)}catch(f){this.verbose&&console.log(f)}}throw new ie}static isValidSequence(a){for(let u of qe.FINDER_PATTERN_SEQUENCES){if(a.length>u.length)continue;let d=!0;for(let v=0;v<a.length;v++)if(a[v].getFinderPattern().getValue()!=u[v]){d=!1;break}if(d)return!0}return!1}storeRow(a,u){let d=0,v=!1,c=!1;for(;d<this.rows.length;){let f=this.rows[d];if(f.getRowNumber()>a){c=f.isEquivalent(this.pairs);break}v=f.isEquivalent(this.pairs),d++}c||v||qe.isPartialRow(this.pairs,this.rows)||(this.rows.push(d,new En(this.pairs,a,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,u){for(let d of u)if(d.getPairs().length!==a.length){for(let v of d.getPairs())for(let c of a)if(Xn.equals(v,c))break}}static isPartialRow(a,u){for(let d of u){let v=!0;for(let c of a){let f=!1;for(let b of d.getPairs())if(c.equals(b)){f=!0;break}if(!f){v=!1;break}}if(v)return!0}return!1}getRows(){return this.rows}static constructResult(a){let u=kn.buildBitArray(a),v=jn(u).parseInformation(),c=a[0].getFinderPattern().getResultPoints(),f=a[a.length-1].getFinderPattern().getResultPoints(),b=[c[0],c[1],f[0],f[1]];return new ke(v,null,null,b,Fe.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),u=a.getLeftChar(),d=a.getRightChar();if(d==null)return!1;let v=d.getChecksumPortion(),c=2;for(let b=1;b<this.pairs.size();++b){let x=this.pairs.get(b);v+=x.getLeftChar().getChecksumPortion(),c++;let A=x.getRightChar();A!=null&&(v+=A.getChecksumPortion(),c++)}return v%=211,211*(c-4)+v==u.getValue()}static getNextSecondBar(a,u){let d;return a.get(u)?(d=a.getNextUnset(u),d=a.getNextSet(d)):(d=a.getNextSet(u),d=a.getNextUnset(d)),d}retrieveNextPair(a,u,d){let v=u.length%2==0;this.startFromEven&&(v=!v);let c,f=!0,b=-1;do this.findNextPair(a,u,b),c=this.parseFoundFinderPattern(a,d,v),c==null?b=qe.getNextSecondBar(a,this.startEnd[0]):f=!1;while(f);let x=this.decodeDataCharacter(a,c,v,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new ie;let A;try{A=this.decodeDataCharacter(a,c,v,!1)}catch(_){A=null,this.verbose&&console.log(_)}return new Xn(x,A,c,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,u,d){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let c=a.getSize(),f;d>=0?f=d:this.isEmptyPair(u)?f=0:f=u[u.length-1].getFinderPattern().getStartEnd()[1];let b=u.length%2!=0;this.startFromEven&&(b=!b);let x=!1;for(;f<c&&(x=!a.get(f),!!x);)f++;let A=0,_=f;for(let M=f;M<c;M++)if(a.get(M)!=x)v[A]++;else{if(A==3){if(b&&qe.reverseCounters(v),qe.isFinderPattern(v)){this.startEnd[0]=_,this.startEnd[1]=M;return}b&&qe.reverseCounters(v),_+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,A--}else A++;v[A]=1,x=!x}throw new ie}static reverseCounters(a){let u=a.length;for(let d=0;d<u/2;++d){let v=a[d];a[d]=a[u-d-1],a[u-d-1]=v}}parseFoundFinderPattern(a,u,d){let v,c,f;if(d){let A=this.startEnd[0]-1;for(;A>=0&&!a.get(A);)A--;A++,v=this.startEnd[0]-A,c=A,f=this.startEnd[1]}else c=this.startEnd[0],f=a.getNextUnset(this.startEnd[1]+1),v=f-this.startEnd[1];let b=this.getDecodeFinderCounters();D.arraycopy(b,0,b,1,b.length-1),b[0]=v;let x;try{x=this.parseFinderValue(b,qe.FINDER_PATTERNS)}catch{return null}return new Wr(x,[c,f],c,f,u)}decodeDataCharacter(a,u,d,v){let c=this.getDataCharacterCounters();for(let Ge=0;Ge<c.length;Ge++)c[Ge]=0;if(v)qe.recordPatternInReverse(a,u.getStartEnd()[0],c);else{qe.recordPattern(a,u.getStartEnd()[1],c);for(let Ge=0,tt=c.length-1;Ge<tt;Ge++,tt--){let et=c[Ge];c[Ge]=c[tt],c[tt]=et}}let f=17,b=tn.sum(new Int32Array(c))/f,x=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(b-x)/x>.3)throw new ie;let A=this.getOddCounts(),_=this.getEvenCounts(),M=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let Ge=0;Ge<c.length;Ge++){let tt=1*c[Ge]/b,et=tt+.5;if(et<1){if(tt<.3)throw new ie;et=1}else if(et>8){if(tt>8.7)throw new ie;et=8}let it=Ge/2;(Ge&1)==0?(A[it]=et,M[it]=tt-et):(_[it]=et,L[it]=tt-et)}this.adjustOddEvenCounts(f);let U=4*u.getValue()+(d?0:2)+(v?0:1)-1,q=0,K=0;for(let Ge=A.length-1;Ge>=0;Ge--){if(qe.isNotA1left(u,d,v)){let tt=qe.WEIGHTS[U][2*Ge];K+=A[Ge]*tt}q+=A[Ge]}let G=0;for(let Ge=_.length-1;Ge>=0;Ge--)if(qe.isNotA1left(u,d,v)){let tt=qe.WEIGHTS[U][2*Ge+1];G+=_[Ge]*tt}let Z=K+G;if((q&1)!=0||q>13||q<4)throw new ie;let re=(13-q)/2,ae=qe.SYMBOL_WIDEST[re],le=9-ae,pe=Qn.getRSSvalue(A,ae,!0),xe=Qn.getRSSvalue(_,le,!1),Oe=qe.EVEN_TOTAL_SUBSET[re],Me=qe.GSUM[re],Pe=pe*Oe+xe+Me;return new Kn(Pe,Z)}static isNotA1left(a,u,d){return!(a.getValue()==0&&u&&d)}adjustOddEvenCounts(a){let u=tn.sum(new Int32Array(this.getOddCounts())),d=tn.sum(new Int32Array(this.getEvenCounts())),v=!1,c=!1;u>13?c=!0:u<4&&(v=!0);let f=!1,b=!1;d>13?b=!0:d<4&&(f=!0);let x=u+d-a,A=(u&1)==1,_=(d&1)==0;if(x==1)if(A){if(_)throw new ie;c=!0}else{if(!_)throw new ie;b=!0}else if(x==-1)if(A){if(_)throw new ie;v=!0}else{if(!_)throw new ie;f=!0}else if(x==0){if(A){if(!_)throw new ie;u<d?(v=!0,b=!0):(c=!0,f=!0)}else if(_)throw new ie}else throw new ie;if(v){if(c)throw new ie;qe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&qe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(b)throw new ie;qe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&qe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}qe.SYMBOL_WIDEST=[7,5,4,3,1],qe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],qe.GSUM=[0,348,1388,2948,3988],qe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],qe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],qe.FINDER_PAT_A=0,qe.FINDER_PAT_B=1,qe.FINDER_PAT_C=2,qe.FINDER_PAT_D=3,qe.FINDER_PAT_E=4,qe.FINDER_PAT_F=5,qe.FINDER_PATTERN_SEQUENCES=[[qe.FINDER_PAT_A,qe.FINDER_PAT_A],[qe.FINDER_PAT_A,qe.FINDER_PAT_B,qe.FINDER_PAT_B],[qe.FINDER_PAT_A,qe.FINDER_PAT_C,qe.FINDER_PAT_B,qe.FINDER_PAT_D],[qe.FINDER_PAT_A,qe.FINDER_PAT_E,qe.FINDER_PAT_B,qe.FINDER_PAT_D,qe.FINDER_PAT_C],[qe.FINDER_PAT_A,qe.FINDER_PAT_E,qe.FINDER_PAT_B,qe.FINDER_PAT_D,qe.FINDER_PAT_D,qe.FINDER_PAT_F],[qe.FINDER_PAT_A,qe.FINDER_PAT_E,qe.FINDER_PAT_B,qe.FINDER_PAT_D,qe.FINDER_PAT_E,qe.FINDER_PAT_F,qe.FINDER_PAT_F],[qe.FINDER_PAT_A,qe.FINDER_PAT_A,qe.FINDER_PAT_B,qe.FINDER_PAT_B,qe.FINDER_PAT_C,qe.FINDER_PAT_C,qe.FINDER_PAT_D,qe.FINDER_PAT_D],[qe.FINDER_PAT_A,qe.FINDER_PAT_A,qe.FINDER_PAT_B,qe.FINDER_PAT_B,qe.FINDER_PAT_C,qe.FINDER_PAT_C,qe.FINDER_PAT_D,qe.FINDER_PAT_E,qe.FINDER_PAT_E],[qe.FINDER_PAT_A,qe.FINDER_PAT_A,qe.FINDER_PAT_B,qe.FINDER_PAT_B,qe.FINDER_PAT_C,qe.FINDER_PAT_C,qe.FINDER_PAT_D,qe.FINDER_PAT_E,qe.FINDER_PAT_F,qe.FINDER_PAT_F],[qe.FINDER_PAT_A,qe.FINDER_PAT_A,qe.FINDER_PAT_B,qe.FINDER_PAT_B,qe.FINDER_PAT_C,qe.FINDER_PAT_D,qe.FINDER_PAT_D,qe.FINDER_PAT_E,qe.FINDER_PAT_E,qe.FINDER_PAT_F,qe.FINDER_PAT_F]],qe.MAX_PAIRS=11;class Ar extends Kn{constructor(a,u,d){super(a,u),this.count=0,this.finderPattern=d}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class hn extends _n{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,u,d){const v=this.decodePair(u,!1,a,d);hn.addOrTally(this.possibleLeftPairs,v),u.reverse();let c=this.decodePair(u,!0,a,d);hn.addOrTally(this.possibleRightPairs,c),u.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let b of this.possibleRightPairs)if(b.getCount()>1&&hn.checkChecksum(f,b))return hn.constructResult(f,b)}throw new ie}static addOrTally(a,u){if(u==null)return;let d=!1;for(let v of a)if(v.getValue()===u.getValue()){v.incrementCount(),d=!0;break}d||a.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,u){let d=4537077*a.getValue()+u.getValue(),v=new String(d).toString(),c=new he;for(let A=13-v.length;A>0;A--)c.append("0");c.append(v);let f=0;for(let A=0;A<13;A++){let _=c.charAt(A).charCodeAt(0)-48;f+=(A&1)===0?3*_:_}f=10-f%10,f===10&&(f=0),c.append(f.toString());let b=a.getFinderPattern().getResultPoints(),x=u.getFinderPattern().getResultPoints();return new ke(c.toString(),null,0,[b[0],b[1],x[0],x[1]],Fe.RSS_14,new Date().getTime())}static checkChecksum(a,u){let d=(a.getChecksumPortion()+16*u.getChecksumPortion())%79,v=9*a.getFinderPattern().getValue()+u.getFinderPattern().getValue();return v>72&&v--,v>8&&v--,d===v}decodePair(a,u,d,v){try{let c=this.findFinderPattern(a,u),f=this.parseFoundFinderPattern(a,d,u,c),b=v==null?null:v.get(J.NEED_RESULT_POINT_CALLBACK);if(b!=null){let _=(c[0]+c[1])/2;u&&(_=a.getSize()-1-_),b.foundPossibleResultPoint(new ft(_,d))}let x=this.decodeDataCharacter(a,f,!0),A=this.decodeDataCharacter(a,f,!1);return new Ar(1597*x.getValue()+A.getValue(),x.getChecksumPortion()+4*A.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(a,u,d){let v=this.getDataCharacterCounters();for(let G=0;G<v.length;G++)v[G]=0;if(d)Mn.recordPatternInReverse(a,u.getStartEnd()[0],v);else{Mn.recordPattern(a,u.getStartEnd()[1]+1,v);for(let G=0,Z=v.length-1;G<Z;G++,Z--){let re=v[G];v[G]=v[Z],v[Z]=re}}let c=d?16:15,f=tn.sum(new Int32Array(v))/c,b=this.getOddCounts(),x=this.getEvenCounts(),A=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let G=0;G<v.length;G++){let Z=v[G]/f,re=Math.floor(Z+.5);re<1?re=1:re>8&&(re=8);let ae=Math.floor(G/2);(G&1)===0?(b[ae]=re,A[ae]=Z-re):(x[ae]=re,_[ae]=Z-re)}this.adjustOddEvenCounts(d,c);let M=0,L=0;for(let G=b.length-1;G>=0;G--)L*=9,L+=b[G],M+=b[G];let U=0,q=0;for(let G=x.length-1;G>=0;G--)U*=9,U+=x[G],q+=x[G];let K=L+3*U;if(d){if((M&1)!==0||M>12||M<4)throw new ie;let G=(12-M)/2,Z=hn.OUTSIDE_ODD_WIDEST[G],re=9-Z,ae=Qn.getRSSvalue(b,Z,!1),le=Qn.getRSSvalue(x,re,!0),pe=hn.OUTSIDE_EVEN_TOTAL_SUBSET[G],xe=hn.OUTSIDE_GSUM[G];return new Kn(ae*pe+le+xe,K)}else{if((q&1)!==0||q>10||q<4)throw new ie;let G=(10-q)/2,Z=hn.INSIDE_ODD_WIDEST[G],re=9-Z,ae=Qn.getRSSvalue(b,Z,!0),le=Qn.getRSSvalue(x,re,!1),pe=hn.INSIDE_ODD_TOTAL_SUBSET[G],xe=hn.INSIDE_GSUM[G];return new Kn(le*pe+ae+xe,K)}}findFinderPattern(a,u){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let v=a.getSize(),c=!1,f=0;for(;f<v&&(c=!a.get(f),u!==c);)f++;let b=0,x=f;for(let A=f;A<v;A++)if(a.get(A)!==c)d[b]++;else{if(b===3){if(_n.isFinderPattern(d))return[x,A];x+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,b--}else b++;d[b]=1,c=!c}throw new ie}parseFoundFinderPattern(a,u,d,v){let c=a.get(v[0]),f=v[0]-1;for(;f>=0&&c!==a.get(f);)f--;f++;const b=v[0]-f,x=this.getDecodeFinderCounters(),A=new Int32Array(x.length);D.arraycopy(x,0,A,1,x.length-1),A[0]=b;const _=this.parseFinderValue(A,hn.FINDER_PATTERNS);let M=f,L=v[1];return d&&(M=a.getSize()-1-M,L=a.getSize()-1-L),new Wr(_,[f,v[1]],M,L,u)}adjustOddEvenCounts(a,u){let d=tn.sum(new Int32Array(this.getOddCounts())),v=tn.sum(new Int32Array(this.getEvenCounts())),c=!1,f=!1,b=!1,x=!1;a?(d>12?f=!0:d<4&&(c=!0),v>12?x=!0:v<4&&(b=!0)):(d>11?f=!0:d<5&&(c=!0),v>10?x=!0:v<4&&(b=!0));let A=d+v-u,_=(d&1)===(a?1:0),M=(v&1)===1;if(A===1)if(_){if(M)throw new ie;f=!0}else{if(!M)throw new ie;x=!0}else if(A===-1)if(_){if(M)throw new ie;c=!0}else{if(!M)throw new ie;b=!0}else if(A===0){if(_){if(!M)throw new ie;d<v?(c=!0,x=!0):(f=!0,b=!0)}else if(M)throw new ie}else throw new ie;if(c){if(f)throw new ie;_n.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&_n.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(x)throw new ie;_n.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&_n.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}hn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],hn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],hn.OUTSIDE_GSUM=[0,161,961,2015,2715],hn.INSIDE_GSUM=[0,336,1036,1516],hn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],hn.INSIDE_ODD_WIDEST=[2,4,6,8],hn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Un extends Mn{constructor(a,u){super(),this.readers=[],this.verbose=u===!0;const d=a?a.get(J.POSSIBLE_FORMATS):null,v=a&&a.get(J.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;d?((d.includes(Fe.EAN_13)||d.includes(Fe.UPC_A)||d.includes(Fe.EAN_8)||d.includes(Fe.UPC_E))&&this.readers.push(new Yi(a)),d.includes(Fe.CODE_39)&&this.readers.push(new rt(v)),d.includes(Fe.CODE_128)&&this.readers.push(new $e),d.includes(Fe.ITF)&&this.readers.push(new jt),d.includes(Fe.RSS_14)&&this.readers.push(new hn),d.includes(Fe.RSS_EXPANDED)&&this.readers.push(new qe(this.verbose))):(this.readers.push(new Yi(a)),this.readers.push(new rt),this.readers.push(new Yi(a)),this.readers.push(new $e),this.readers.push(new jt),this.readers.push(new hn),this.readers.push(new qe(this.verbose)))}decodeRow(a,u,d){for(let v=0;v<this.readers.length;v++)try{return this.readers[v].decodeRow(a,u,d)}catch{}throw new ie}reset(){this.readers.forEach(a=>a.reset())}}class Or extends Ce{constructor(a=500,u){super(new Un(u),a,u)}}class Yt{constructor(a,u,d){this.ecCodewords=a,this.ecBlocks=[u],d&&this.ecBlocks.push(d)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class nn{constructor(a,u){this.count=a,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Je{constructor(a,u,d,v,c,f){this.versionNumber=a,this.symbolSizeRows=u,this.symbolSizeColumns=d,this.dataRegionSizeRows=v,this.dataRegionSizeColumns=c,this.ecBlocks=f;let b=0;const x=f.getECCodewords(),A=f.getECBlocks();for(let _ of A)b+=_.getCount()*(_.getDataCodewords()+x);this.totalCodewords=b}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,u){if((a&1)!==0||(u&1)!==0)throw new F;for(let d of Je.VERSIONS)if(d.symbolSizeRows===a&&d.symbolSizeColumns===u)return d;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Je(1,10,10,8,8,new Yt(5,new nn(1,3))),new Je(2,12,12,10,10,new Yt(7,new nn(1,5))),new Je(3,14,14,12,12,new Yt(10,new nn(1,8))),new Je(4,16,16,14,14,new Yt(12,new nn(1,12))),new Je(5,18,18,16,16,new Yt(14,new nn(1,18))),new Je(6,20,20,18,18,new Yt(18,new nn(1,22))),new Je(7,22,22,20,20,new Yt(20,new nn(1,30))),new Je(8,24,24,22,22,new Yt(24,new nn(1,36))),new Je(9,26,26,24,24,new Yt(28,new nn(1,44))),new Je(10,32,32,14,14,new Yt(36,new nn(1,62))),new Je(11,36,36,16,16,new Yt(42,new nn(1,86))),new Je(12,40,40,18,18,new Yt(48,new nn(1,114))),new Je(13,44,44,20,20,new Yt(56,new nn(1,144))),new Je(14,48,48,22,22,new Yt(68,new nn(1,174))),new Je(15,52,52,24,24,new Yt(42,new nn(2,102))),new Je(16,64,64,14,14,new Yt(56,new nn(2,140))),new Je(17,72,72,16,16,new Yt(36,new nn(4,92))),new Je(18,80,80,18,18,new Yt(48,new nn(4,114))),new Je(19,88,88,20,20,new Yt(56,new nn(4,144))),new Je(20,96,96,22,22,new Yt(68,new nn(4,174))),new Je(21,104,104,24,24,new Yt(56,new nn(6,136))),new Je(22,120,120,18,18,new Yt(68,new nn(6,175))),new Je(23,132,132,20,20,new Yt(62,new nn(8,163))),new Je(24,144,144,22,22,new Yt(62,new nn(8,156),new nn(2,155))),new Je(25,8,18,6,16,new Yt(7,new nn(1,5))),new Je(26,8,32,6,14,new Yt(11,new nn(1,10))),new Je(27,12,26,10,24,new Yt(14,new nn(1,16))),new Je(28,12,36,10,16,new Yt(18,new nn(1,22))),new Je(29,16,36,14,16,new Yt(24,new nn(1,32))),new Je(30,16,48,14,22,new Yt(28,new nn(1,49)))]}}Je.VERSIONS=Je.buildVersions();class Hn{constructor(a){const u=a.getHeight();if(u<8||u>144||(u&1)!==0)throw new F;this.version=Hn.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new Ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const u=a.getHeight(),d=a.getWidth();return Je.getVersionForDimensions(u,d)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let u=0,d=4,v=0;const c=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let b=!1,x=!1,A=!1,_=!1;do if(d===c&&v===0&&!b)a[u++]=this.readCorner1(c,f)&255,d-=2,v+=2,b=!0;else if(d===c-2&&v===0&&(f&3)!==0&&!x)a[u++]=this.readCorner2(c,f)&255,d-=2,v+=2,x=!0;else if(d===c+4&&v===2&&(f&7)===0&&!A)a[u++]=this.readCorner3(c,f)&255,d-=2,v+=2,A=!0;else if(d===c-2&&v===0&&(f&7)===4&&!_)a[u++]=this.readCorner4(c,f)&255,d-=2,v+=2,_=!0;else{do d<c&&v>=0&&!this.readMappingMatrix.get(v,d)&&(a[u++]=this.readUtah(d,v,c,f)&255),d-=2,v+=2;while(d>=0&&v<f);d+=1,v+=3;do d>=0&&v<f&&!this.readMappingMatrix.get(v,d)&&(a[u++]=this.readUtah(d,v,c,f)&255),d+=2,v-=2;while(d<c&&v>=0);d+=3,v+=1}while(d<c||v<f);if(u!==this.version.getTotalCodewords())throw new F;return a}readModule(a,u,d,v){return a<0&&(a+=d,u+=4-(d+4&7)),u<0&&(u+=v,a+=4-(v+4&7)),this.readMappingMatrix.set(u,a),this.mappingBitMatrix.get(u,a)}readUtah(a,u,d,v){let c=0;return this.readModule(a-2,u-2,d,v)&&(c|=1),c<<=1,this.readModule(a-2,u-1,d,v)&&(c|=1),c<<=1,this.readModule(a-1,u-2,d,v)&&(c|=1),c<<=1,this.readModule(a-1,u-1,d,v)&&(c|=1),c<<=1,this.readModule(a-1,u,d,v)&&(c|=1),c<<=1,this.readModule(a,u-2,d,v)&&(c|=1),c<<=1,this.readModule(a,u-1,d,v)&&(c|=1),c<<=1,this.readModule(a,u,d,v)&&(c|=1),c}readCorner1(a,u){let d=0;return this.readModule(a-1,0,a,u)&&(d|=1),d<<=1,this.readModule(a-1,1,a,u)&&(d|=1),d<<=1,this.readModule(a-1,2,a,u)&&(d|=1),d<<=1,this.readModule(0,u-2,a,u)&&(d|=1),d<<=1,this.readModule(0,u-1,a,u)&&(d|=1),d<<=1,this.readModule(1,u-1,a,u)&&(d|=1),d<<=1,this.readModule(2,u-1,a,u)&&(d|=1),d<<=1,this.readModule(3,u-1,a,u)&&(d|=1),d}readCorner2(a,u){let d=0;return this.readModule(a-3,0,a,u)&&(d|=1),d<<=1,this.readModule(a-2,0,a,u)&&(d|=1),d<<=1,this.readModule(a-1,0,a,u)&&(d|=1),d<<=1,this.readModule(0,u-4,a,u)&&(d|=1),d<<=1,this.readModule(0,u-3,a,u)&&(d|=1),d<<=1,this.readModule(0,u-2,a,u)&&(d|=1),d<<=1,this.readModule(0,u-1,a,u)&&(d|=1),d<<=1,this.readModule(1,u-1,a,u)&&(d|=1),d}readCorner3(a,u){let d=0;return this.readModule(a-1,0,a,u)&&(d|=1),d<<=1,this.readModule(a-1,u-1,a,u)&&(d|=1),d<<=1,this.readModule(0,u-3,a,u)&&(d|=1),d<<=1,this.readModule(0,u-2,a,u)&&(d|=1),d<<=1,this.readModule(0,u-1,a,u)&&(d|=1),d<<=1,this.readModule(1,u-3,a,u)&&(d|=1),d<<=1,this.readModule(1,u-2,a,u)&&(d|=1),d<<=1,this.readModule(1,u-1,a,u)&&(d|=1),d}readCorner4(a,u){let d=0;return this.readModule(a-3,0,a,u)&&(d|=1),d<<=1,this.readModule(a-2,0,a,u)&&(d|=1),d<<=1,this.readModule(a-1,0,a,u)&&(d|=1),d<<=1,this.readModule(0,u-2,a,u)&&(d|=1),d<<=1,this.readModule(0,u-1,a,u)&&(d|=1),d<<=1,this.readModule(1,u-1,a,u)&&(d|=1),d<<=1,this.readModule(2,u-1,a,u)&&(d|=1),d<<=1,this.readModule(3,u-1,a,u)&&(d|=1),d}extractDataRegion(a){const u=this.version.getSymbolSizeRows(),d=this.version.getSymbolSizeColumns();if(a.getHeight()!==u)throw new S("Dimension of bitMatrix must match the version size");const v=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),f=u/v|0,b=d/c|0,x=f*v,A=b*c,_=new Ne(A,x);for(let M=0;M<f;++M){const L=M*v;for(let U=0;U<b;++U){const q=U*c;for(let K=0;K<v;++K){const G=M*(v+2)+1+K,Z=L+K;for(let re=0;re<c;++re){const ae=U*(c+2)+1+re;if(a.get(ae,G)){const le=q+re;_.set(le,Z)}}}}}return _}}class Qr{constructor(a,u){this.numDataCodewords=a,this.codewords=u}static getDataBlocks(a,u){const d=u.getECBlocks();let v=0;const c=d.getECBlocks();for(let K of c)v+=K.getCount();const f=new Array(v);let b=0;for(let K of c)for(let G=0;G<K.getCount();G++){const Z=K.getDataCodewords(),re=d.getECCodewords()+Z;f[b++]=new Qr(Z,new Uint8Array(re))}const A=f[0].codewords.length-d.getECCodewords(),_=A-1;let M=0;for(let K=0;K<_;K++)for(let G=0;G<b;G++)f[G].codewords[K]=a[M++];const L=u.getVersionNumber()===24,U=L?8:b;for(let K=0;K<U;K++)f[K].codewords[A-1]=a[M++];const q=f[0].codewords.length;for(let K=A;K<q;K++)for(let G=0;G<b;G++){const Z=L?(G+8)%b:G,re=L&&Z>7?K-1:K;f[Z].codewords[re]=a[M++]}if(M!==a.length)throw new S;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ur{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new S(""+a);let u=0,d=this.bitOffset,v=this.byteOffset;const c=this.bytes;if(d>0){const f=8-d,b=a<f?a:f,x=f-b,A=255>>8-b<<x;u=(c[v]&A)>>x,a-=b,d+=b,d===8&&(d=0,v++)}if(a>0){for(;a>=8;)u=u<<8|c[v]&255,v++,a-=8;if(a>0){const f=8-a,b=255>>f<<f;u=u<<a|(c[v]&b)>>f,d+=a}}return this.bitOffset=d,this.byteOffset=v,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var lt;(function(z){z[z.PAD_ENCODE=0]="PAD_ENCODE",z[z.ASCII_ENCODE=1]="ASCII_ENCODE",z[z.C40_ENCODE=2]="C40_ENCODE",z[z.TEXT_ENCODE=3]="TEXT_ENCODE",z[z.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",z[z.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",z[z.BASE256_ENCODE=6]="BASE256_ENCODE"})(lt||(lt={}));class hr{static decode(a){const u=new ur(a),d=new he,v=new he,c=new Array;let f=lt.ASCII_ENCODE;do if(f===lt.ASCII_ENCODE)f=this.decodeAsciiSegment(u,d,v);else{switch(f){case lt.C40_ENCODE:this.decodeC40Segment(u,d);break;case lt.TEXT_ENCODE:this.decodeTextSegment(u,d);break;case lt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,d);break;case lt.EDIFACT_ENCODE:this.decodeEdifactSegment(u,d);break;case lt.BASE256_ENCODE:this.decodeBase256Segment(u,d,c);break;default:throw new F}f=lt.ASCII_ENCODE}while(f!==lt.PAD_ENCODE&&u.available()>0);return v.length()>0&&d.append(v.toString()),new Ze(a,d.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(a,u,d){let v=!1;do{let c=a.readBits(8);if(c===0)throw new F;if(c<=128)return v&&(c+=128),u.append(String.fromCharCode(c-1)),lt.ASCII_ENCODE;if(c===129)return lt.PAD_ENCODE;if(c<=229){const f=c-130;f<10&&u.append("0"),u.append(""+f)}else switch(c){case 230:return lt.C40_ENCODE;case 231:return lt.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:v=!0;break;case 236:u.append("[)>05"),d.insert(0,"");break;case 237:u.append("[)>06"),d.insert(0,"");break;case 238:return lt.ANSIX12_ENCODE;case 239:return lt.TEXT_ENCODE;case 240:return lt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||a.available()!==0)throw new F;break}}while(a.available()>0);return lt.ASCII_ENCODE}static decodeC40Segment(a,u){let d=!1;const v=[];let c=0;do{if(a.available()===8)return;const f=a.readBits(8);if(f===254)return;this.parseTwoBytes(f,a.readBits(8),v);for(let b=0;b<3;b++){const x=v[b];switch(c){case 0:if(x<3)c=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[x];d?(u.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):u.append(A)}else throw new F;break;case 1:d?(u.append(String.fromCharCode(x+128)),d=!1):u.append(String.fromCharCode(x)),c=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[x];d?(u.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):u.append(A)}else switch(x){case 27:u.append("");break;case 30:d=!0;break;default:throw new F}c=0;break;case 3:d?(u.append(String.fromCharCode(x+224)),d=!1):u.append(String.fromCharCode(x+96)),c=0;break;default:throw new F}}}while(a.available()>0)}static decodeTextSegment(a,u){let d=!1,v=[],c=0;do{if(a.available()===8)return;const f=a.readBits(8);if(f===254)return;this.parseTwoBytes(f,a.readBits(8),v);for(let b=0;b<3;b++){const x=v[b];switch(c){case 0:if(x<3)c=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[x];d?(u.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):u.append(A)}else throw new F;break;case 1:d?(u.append(String.fromCharCode(x+128)),d=!1):u.append(String.fromCharCode(x)),c=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[x];d?(u.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):u.append(A)}else switch(x){case 27:u.append("");break;case 30:d=!0;break;default:throw new F}c=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[x];d?(u.append(String.fromCharCode(A.charCodeAt(0)+128)),d=!1):u.append(A),c=0}else throw new F;break;default:throw new F}}}while(a.available()>0)}static decodeAnsiX12Segment(a,u){const d=[];do{if(a.available()===8)return;const v=a.readBits(8);if(v===254)return;this.parseTwoBytes(v,a.readBits(8),d);for(let c=0;c<3;c++){const f=d[c];switch(f){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(f<14)u.append(String.fromCharCode(f+44));else if(f<40)u.append(String.fromCharCode(f+51));else throw new F;break}}}while(a.available()>0)}static parseTwoBytes(a,u,d){let v=(a<<8)+u-1,c=Math.floor(v/1600);d[0]=c,v-=c*1600,c=Math.floor(v/40),d[1]=c,d[2]=v-c*40}static decodeEdifactSegment(a,u){do{if(a.available()<=16)return;for(let d=0;d<4;d++){let v=a.readBits(6);if(v===31){const c=8-a.getBitOffset();c!==8&&a.readBits(c);return}(v&32)===0&&(v|=64),u.append(String.fromCharCode(v))}}while(a.available()>0)}static decodeBase256Segment(a,u,d){let v=1+a.getByteOffset();const c=this.unrandomize255State(a.readBits(8),v++);let f;if(c===0?f=a.available()/8|0:c<250?f=c:f=250*(c-249)+this.unrandomize255State(a.readBits(8),v++),f<0)throw new F;const b=new Uint8Array(f);for(let x=0;x<f;x++){if(a.available()<8)throw new F;b[x]=this.unrandomize255State(a.readBits(8),v++)}d.push(b);try{u.append(Q.decode(b,fe.ISO88591))}catch(x){throw new mn("Platform does not support required encoding: "+x.message)}}static unrandomize255State(a,u){const d=149*u%255+1,v=a-d;return v>=0?v:v+256}}hr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],hr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],hr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],hr.TEXT_SHIFT2_SET_CHARS=hr.C40_SHIFT2_SET_CHARS,hr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class pi{constructor(){this.rsDecoder=new _r(mt.DATA_MATRIX_FIELD_256)}decode(a){const u=new Hn(a),d=u.getVersion(),v=u.readCodewords(),c=Qr.getDataBlocks(v,d);let f=0;for(let A of c)f+=A.getNumDataCodewords();const b=new Uint8Array(f),x=c.length;for(let A=0;A<x;A++){const _=c[A],M=_.getCodewords(),L=_.getNumDataCodewords();this.correctErrors(M,L);for(let U=0;U<L;U++)b[U*x+A]=M[U]}return hr.decode(b)}correctErrors(a,u){const d=new Int32Array(a);try{this.rsDecoder.decode(d,a.length-u)}catch{throw new I}for(let v=0;v<u;v++)a[v]=d[v]}}class Sn{constructor(a){this.image=a,this.rectangleDetector=new an(this.image)}detect(){const a=this.rectangleDetector.detect();let u=this.detectSolid1(a);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new ie;u=this.shiftToModuleCenter(u);const d=u[0],v=u[1],c=u[2],f=u[3];let b=this.transitionsBetween(d,f)+1,x=this.transitionsBetween(c,f)+1;(b&1)===1&&(b+=1),(x&1)===1&&(x+=1),4*b<7*x&&4*x<7*b&&(b=x=Math.max(b,x));let A=Sn.sampleGrid(this.image,d,v,c,f,b,x);return new $i(A,[d,v,c,f])}static shiftPoint(a,u,d){let v=(u.getX()-a.getX())/(d+1),c=(u.getY()-a.getY())/(d+1);return new ft(a.getX()+v,a.getY()+c)}static moveAway(a,u,d){let v=a.getX(),c=a.getY();return v<u?v-=1:v+=1,c<d?c-=1:c+=1,new ft(v,c)}detectSolid1(a){let u=a[0],d=a[1],v=a[3],c=a[2],f=this.transitionsBetween(u,d),b=this.transitionsBetween(d,v),x=this.transitionsBetween(v,c),A=this.transitionsBetween(c,u),_=f,M=[c,u,d,v];return _>b&&(_=b,M[0]=u,M[1]=d,M[2]=v,M[3]=c),_>x&&(_=x,M[0]=d,M[1]=v,M[2]=c,M[3]=u),_>A&&(M[0]=v,M[1]=c,M[2]=u,M[3]=d),M}detectSolid2(a){let u=a[0],d=a[1],v=a[2],c=a[3],f=this.transitionsBetween(u,c),b=Sn.shiftPoint(d,v,(f+1)*4),x=Sn.shiftPoint(v,d,(f+1)*4),A=this.transitionsBetween(b,u),_=this.transitionsBetween(x,c);return A<_?(a[0]=u,a[1]=d,a[2]=v,a[3]=c):(a[0]=d,a[1]=v,a[2]=c,a[3]=u),a}correctTopRight(a){let u=a[0],d=a[1],v=a[2],c=a[3],f=this.transitionsBetween(u,c),b=this.transitionsBetween(d,c),x=Sn.shiftPoint(u,d,(b+1)*4),A=Sn.shiftPoint(v,d,(f+1)*4);f=this.transitionsBetween(x,c),b=this.transitionsBetween(A,c);let _=new ft(c.getX()+(v.getX()-d.getX())/(f+1),c.getY()+(v.getY()-d.getY())/(f+1)),M=new ft(c.getX()+(u.getX()-d.getX())/(b+1),c.getY()+(u.getY()-d.getY())/(b+1));if(!this.isValid(_))return this.isValid(M)?M:null;if(!this.isValid(M))return _;let L=this.transitionsBetween(x,_)+this.transitionsBetween(A,_),U=this.transitionsBetween(x,M)+this.transitionsBetween(A,M);return L>U?_:M}shiftToModuleCenter(a){let u=a[0],d=a[1],v=a[2],c=a[3],f=this.transitionsBetween(u,c)+1,b=this.transitionsBetween(v,c)+1,x=Sn.shiftPoint(u,d,b*4),A=Sn.shiftPoint(v,d,f*4);f=this.transitionsBetween(x,c)+1,b=this.transitionsBetween(A,c)+1,(f&1)===1&&(f+=1),(b&1)===1&&(b+=1);let _=(u.getX()+d.getX()+v.getX()+c.getX())/4,M=(u.getY()+d.getY()+v.getY()+c.getY())/4;u=Sn.moveAway(u,_,M),d=Sn.moveAway(d,_,M),v=Sn.moveAway(v,_,M),c=Sn.moveAway(c,_,M);let L,U;return x=Sn.shiftPoint(u,d,b*4),x=Sn.shiftPoint(x,c,f*4),L=Sn.shiftPoint(d,u,b*4),L=Sn.shiftPoint(L,v,f*4),A=Sn.shiftPoint(v,c,b*4),A=Sn.shiftPoint(A,d,f*4),U=Sn.shiftPoint(c,v,b*4),U=Sn.shiftPoint(U,u,f*4),[x,L,A,U]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,u,d,v,c,f,b){return Rn.getInstance().sampleGrid(a,f,b,.5,.5,f-.5,.5,f-.5,b-.5,.5,b-.5,u.getX(),u.getY(),c.getX(),c.getY(),v.getX(),v.getY(),d.getX(),d.getY())}transitionsBetween(a,u){let d=Math.trunc(a.getX()),v=Math.trunc(a.getY()),c=Math.trunc(u.getX()),f=Math.trunc(u.getY()),b=Math.abs(f-v)>Math.abs(c-d);if(b){let K=d;d=v,v=K,K=c,c=f,f=K}let x=Math.abs(c-d),A=Math.abs(f-v),_=-x/2,M=v<f?1:-1,L=d<c?1:-1,U=0,q=this.image.get(b?v:d,b?d:v);for(let K=d,G=v;K!==c;K+=L){let Z=this.image.get(b?G:K,b?K:G);if(Z!==q&&(U++,q=Z),_+=A,_>0){if(G===f)break;G+=M,_-=x}}return U}}class mi{constructor(){this.decoder=new pi}decode(a,u=null){let d,v;if(u!=null&&u.has(J.PURE_BARCODE)){const A=mi.extractPureBits(a.getBlackMatrix());d=this.decoder.decode(A),v=mi.NO_POINTS}else{const A=new Sn(a.getBlackMatrix()).detect();d=this.decoder.decode(A.getBits()),v=A.getPoints()}const c=d.getRawBytes(),f=new ke(d.getText(),c,8*c.length,v,Fe.DATA_MATRIX,D.currentTimeMillis()),b=d.getByteSegments();b!=null&&f.putMetadata(dt.BYTE_SEGMENTS,b);const x=d.getECLevel();return x!=null&&f.putMetadata(dt.ERROR_CORRECTION_LEVEL,x),f}reset(){}static extractPureBits(a){const u=a.getTopLeftOnBit(),d=a.getBottomRightOnBit();if(u==null||d==null)throw new ie;const v=this.moduleSize(u,a);let c=u[1];const f=d[1];let b=u[0];const A=(d[0]-b+1)/v,_=(f-c+1)/v;if(A<=0||_<=0)throw new ie;const M=v/2;c+=M,b+=M;const L=new Ne(A,_);for(let U=0;U<_;U++){const q=c+U*v;for(let K=0;K<A;K++)a.get(b+K*v,q)&&L.set(K,U)}return L}static moduleSize(a,u){const d=u.getWidth();let v=a[0];const c=a[1];for(;v<d&&u.get(v,c);)v++;if(v===d)throw new ie;const f=v-a[0];if(f===0)throw new ie;return f}}mi.NO_POINTS=[];class ps extends Ce{constructor(a=500){super(new mi,a)}}var ji;(function(z){z[z.L=0]="L",z[z.M=1]="M",z[z.Q=2]="Q",z[z.H=3]="H"})(ji||(ji={}));class rn{constructor(a,u,d){this.value=a,this.stringValue=u,this.bits=d,rn.FOR_BITS.set(d,this),rn.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return rn.L;case"M":return rn.M;case"Q":return rn.Q;case"H":return rn.H;default:throw new E(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof rn))return!1;const u=a;return this.value===u.value}static forBits(a){if(a<0||a>=rn.FOR_BITS.size)throw new S;return rn.FOR_BITS.get(a)}}rn.FOR_BITS=new Map,rn.FOR_VALUE=new Map,rn.L=new rn(ji.L,"L",1),rn.M=new rn(ji.M,"M",0),rn.Q=new rn(ji.Q,"Q",3),rn.H=new rn(ji.H,"H",2);class Zn{constructor(a){this.errorCorrectionLevel=rn.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,u){return V.bitCount(a^u)}static decodeFormatInformation(a,u){const d=Zn.doDecodeFormatInformation(a,u);return d!==null?d:Zn.doDecodeFormatInformation(a^Zn.FORMAT_INFO_MASK_QR,u^Zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,u){let d=Number.MAX_SAFE_INTEGER,v=0;for(const c of Zn.FORMAT_INFO_DECODE_LOOKUP){const f=c[0];if(f===a||f===u)return new Zn(c[1]);let b=Zn.numBitsDiffering(a,f);b<d&&(v=c[1],d=b),a!==u&&(b=Zn.numBitsDiffering(u,f),b<d&&(v=c[1],d=b))}return d<=3?new Zn(v):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof Zn))return!1;const u=a;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}Zn.FORMAT_INFO_MASK_QR=21522,Zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class _e{constructor(a,...u){this.ecCodewordsPerBlock=a,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const u=this.ecBlocks;for(const d of u)a+=d.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class te{constructor(a,u){this.count=a,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class wt{constructor(a,u,...d){this.versionNumber=a,this.alignmentPatternCenters=u,this.ecBlocks=d;let v=0;const c=d[0].getECCodewordsPerBlock(),f=d[0].getECBlocks();for(const b of f)v+=b.getCount()*(b.getDataCodewords()+c);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new F;try{return this.getVersionForNumber((a-17)/4)}catch{throw new F}}static getVersionForNumber(a){if(a<1||a>40)throw new S;return wt.VERSIONS[a-1]}static decodeVersionInformation(a){let u=Number.MAX_SAFE_INTEGER,d=0;for(let v=0;v<wt.VERSION_DECODE_INFO.length;v++){const c=wt.VERSION_DECODE_INFO[v];if(c===a)return wt.getVersionForNumber(v+7);const f=Zn.numBitsDiffering(a,c);f<u&&(d=v+7,u=f)}return u<=3?wt.getVersionForNumber(d):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),u=new Ne(a);u.setRegion(0,0,9,9),u.setRegion(a-8,0,8,9),u.setRegion(0,a-8,9,8);const d=this.alignmentPatternCenters.length;for(let v=0;v<d;v++){const c=this.alignmentPatternCenters[v]-2;for(let f=0;f<d;f++)v===0&&(f===0||f===d-1)||v===d-1&&f===0||u.setRegion(this.alignmentPatternCenters[f]-2,c,5,5)}return u.setRegion(6,9,1,a-17),u.setRegion(9,6,a-17,1),this.versionNumber>6&&(u.setRegion(a-11,0,3,6),u.setRegion(0,a-11,6,3)),u}toString(){return""+this.versionNumber}}wt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),wt.VERSIONS=[new wt(1,new Int32Array(0),new _e(7,new te(1,19)),new _e(10,new te(1,16)),new _e(13,new te(1,13)),new _e(17,new te(1,9))),new wt(2,Int32Array.from([6,18]),new _e(10,new te(1,34)),new _e(16,new te(1,28)),new _e(22,new te(1,22)),new _e(28,new te(1,16))),new wt(3,Int32Array.from([6,22]),new _e(15,new te(1,55)),new _e(26,new te(1,44)),new _e(18,new te(2,17)),new _e(22,new te(2,13))),new wt(4,Int32Array.from([6,26]),new _e(20,new te(1,80)),new _e(18,new te(2,32)),new _e(26,new te(2,24)),new _e(16,new te(4,9))),new wt(5,Int32Array.from([6,30]),new _e(26,new te(1,108)),new _e(24,new te(2,43)),new _e(18,new te(2,15),new te(2,16)),new _e(22,new te(2,11),new te(2,12))),new wt(6,Int32Array.from([6,34]),new _e(18,new te(2,68)),new _e(16,new te(4,27)),new _e(24,new te(4,19)),new _e(28,new te(4,15))),new wt(7,Int32Array.from([6,22,38]),new _e(20,new te(2,78)),new _e(18,new te(4,31)),new _e(18,new te(2,14),new te(4,15)),new _e(26,new te(4,13),new te(1,14))),new wt(8,Int32Array.from([6,24,42]),new _e(24,new te(2,97)),new _e(22,new te(2,38),new te(2,39)),new _e(22,new te(4,18),new te(2,19)),new _e(26,new te(4,14),new te(2,15))),new wt(9,Int32Array.from([6,26,46]),new _e(30,new te(2,116)),new _e(22,new te(3,36),new te(2,37)),new _e(20,new te(4,16),new te(4,17)),new _e(24,new te(4,12),new te(4,13))),new wt(10,Int32Array.from([6,28,50]),new _e(18,new te(2,68),new te(2,69)),new _e(26,new te(4,43),new te(1,44)),new _e(24,new te(6,19),new te(2,20)),new _e(28,new te(6,15),new te(2,16))),new wt(11,Int32Array.from([6,30,54]),new _e(20,new te(4,81)),new _e(30,new te(1,50),new te(4,51)),new _e(28,new te(4,22),new te(4,23)),new _e(24,new te(3,12),new te(8,13))),new wt(12,Int32Array.from([6,32,58]),new _e(24,new te(2,92),new te(2,93)),new _e(22,new te(6,36),new te(2,37)),new _e(26,new te(4,20),new te(6,21)),new _e(28,new te(7,14),new te(4,15))),new wt(13,Int32Array.from([6,34,62]),new _e(26,new te(4,107)),new _e(22,new te(8,37),new te(1,38)),new _e(24,new te(8,20),new te(4,21)),new _e(22,new te(12,11),new te(4,12))),new wt(14,Int32Array.from([6,26,46,66]),new _e(30,new te(3,115),new te(1,116)),new _e(24,new te(4,40),new te(5,41)),new _e(20,new te(11,16),new te(5,17)),new _e(24,new te(11,12),new te(5,13))),new wt(15,Int32Array.from([6,26,48,70]),new _e(22,new te(5,87),new te(1,88)),new _e(24,new te(5,41),new te(5,42)),new _e(30,new te(5,24),new te(7,25)),new _e(24,new te(11,12),new te(7,13))),new wt(16,Int32Array.from([6,26,50,74]),new _e(24,new te(5,98),new te(1,99)),new _e(28,new te(7,45),new te(3,46)),new _e(24,new te(15,19),new te(2,20)),new _e(30,new te(3,15),new te(13,16))),new wt(17,Int32Array.from([6,30,54,78]),new _e(28,new te(1,107),new te(5,108)),new _e(28,new te(10,46),new te(1,47)),new _e(28,new te(1,22),new te(15,23)),new _e(28,new te(2,14),new te(17,15))),new wt(18,Int32Array.from([6,30,56,82]),new _e(30,new te(5,120),new te(1,121)),new _e(26,new te(9,43),new te(4,44)),new _e(28,new te(17,22),new te(1,23)),new _e(28,new te(2,14),new te(19,15))),new wt(19,Int32Array.from([6,30,58,86]),new _e(28,new te(3,113),new te(4,114)),new _e(26,new te(3,44),new te(11,45)),new _e(26,new te(17,21),new te(4,22)),new _e(26,new te(9,13),new te(16,14))),new wt(20,Int32Array.from([6,34,62,90]),new _e(28,new te(3,107),new te(5,108)),new _e(26,new te(3,41),new te(13,42)),new _e(30,new te(15,24),new te(5,25)),new _e(28,new te(15,15),new te(10,16))),new wt(21,Int32Array.from([6,28,50,72,94]),new _e(28,new te(4,116),new te(4,117)),new _e(26,new te(17,42)),new _e(28,new te(17,22),new te(6,23)),new _e(30,new te(19,16),new te(6,17))),new wt(22,Int32Array.from([6,26,50,74,98]),new _e(28,new te(2,111),new te(7,112)),new _e(28,new te(17,46)),new _e(30,new te(7,24),new te(16,25)),new _e(24,new te(34,13))),new wt(23,Int32Array.from([6,30,54,78,102]),new _e(30,new te(4,121),new te(5,122)),new _e(28,new te(4,47),new te(14,48)),new _e(30,new te(11,24),new te(14,25)),new _e(30,new te(16,15),new te(14,16))),new wt(24,Int32Array.from([6,28,54,80,106]),new _e(30,new te(6,117),new te(4,118)),new _e(28,new te(6,45),new te(14,46)),new _e(30,new te(11,24),new te(16,25)),new _e(30,new te(30,16),new te(2,17))),new wt(25,Int32Array.from([6,32,58,84,110]),new _e(26,new te(8,106),new te(4,107)),new _e(28,new te(8,47),new te(13,48)),new _e(30,new te(7,24),new te(22,25)),new _e(30,new te(22,15),new te(13,16))),new wt(26,Int32Array.from([6,30,58,86,114]),new _e(28,new te(10,114),new te(2,115)),new _e(28,new te(19,46),new te(4,47)),new _e(28,new te(28,22),new te(6,23)),new _e(30,new te(33,16),new te(4,17))),new wt(27,Int32Array.from([6,34,62,90,118]),new _e(30,new te(8,122),new te(4,123)),new _e(28,new te(22,45),new te(3,46)),new _e(30,new te(8,23),new te(26,24)),new _e(30,new te(12,15),new te(28,16))),new wt(28,Int32Array.from([6,26,50,74,98,122]),new _e(30,new te(3,117),new te(10,118)),new _e(28,new te(3,45),new te(23,46)),new _e(30,new te(4,24),new te(31,25)),new _e(30,new te(11,15),new te(31,16))),new wt(29,Int32Array.from([6,30,54,78,102,126]),new _e(30,new te(7,116),new te(7,117)),new _e(28,new te(21,45),new te(7,46)),new _e(30,new te(1,23),new te(37,24)),new _e(30,new te(19,15),new te(26,16))),new wt(30,Int32Array.from([6,26,52,78,104,130]),new _e(30,new te(5,115),new te(10,116)),new _e(28,new te(19,47),new te(10,48)),new _e(30,new te(15,24),new te(25,25)),new _e(30,new te(23,15),new te(25,16))),new wt(31,Int32Array.from([6,30,56,82,108,134]),new _e(30,new te(13,115),new te(3,116)),new _e(28,new te(2,46),new te(29,47)),new _e(30,new te(42,24),new te(1,25)),new _e(30,new te(23,15),new te(28,16))),new wt(32,Int32Array.from([6,34,60,86,112,138]),new _e(30,new te(17,115)),new _e(28,new te(10,46),new te(23,47)),new _e(30,new te(10,24),new te(35,25)),new _e(30,new te(19,15),new te(35,16))),new wt(33,Int32Array.from([6,30,58,86,114,142]),new _e(30,new te(17,115),new te(1,116)),new _e(28,new te(14,46),new te(21,47)),new _e(30,new te(29,24),new te(19,25)),new _e(30,new te(11,15),new te(46,16))),new wt(34,Int32Array.from([6,34,62,90,118,146]),new _e(30,new te(13,115),new te(6,116)),new _e(28,new te(14,46),new te(23,47)),new _e(30,new te(44,24),new te(7,25)),new _e(30,new te(59,16),new te(1,17))),new wt(35,Int32Array.from([6,30,54,78,102,126,150]),new _e(30,new te(12,121),new te(7,122)),new _e(28,new te(12,47),new te(26,48)),new _e(30,new te(39,24),new te(14,25)),new _e(30,new te(22,15),new te(41,16))),new wt(36,Int32Array.from([6,24,50,76,102,128,154]),new _e(30,new te(6,121),new te(14,122)),new _e(28,new te(6,47),new te(34,48)),new _e(30,new te(46,24),new te(10,25)),new _e(30,new te(2,15),new te(64,16))),new wt(37,Int32Array.from([6,28,54,80,106,132,158]),new _e(30,new te(17,122),new te(4,123)),new _e(28,new te(29,46),new te(14,47)),new _e(30,new te(49,24),new te(10,25)),new _e(30,new te(24,15),new te(46,16))),new wt(38,Int32Array.from([6,32,58,84,110,136,162]),new _e(30,new te(4,122),new te(18,123)),new _e(28,new te(13,46),new te(32,47)),new _e(30,new te(48,24),new te(14,25)),new _e(30,new te(42,15),new te(32,16))),new wt(39,Int32Array.from([6,26,54,82,110,138,166]),new _e(30,new te(20,117),new te(4,118)),new _e(28,new te(40,47),new te(7,48)),new _e(30,new te(43,24),new te(22,25)),new _e(30,new te(10,15),new te(67,16))),new wt(40,Int32Array.from([6,30,58,86,114,142,170]),new _e(30,new te(19,118),new te(6,119)),new _e(28,new te(18,47),new te(31,48)),new _e(30,new te(34,24),new te(34,25)),new _e(30,new te(20,15),new te(61,16)))];var qn;(function(z){z[z.DATA_MASK_000=0]="DATA_MASK_000",z[z.DATA_MASK_001=1]="DATA_MASK_001",z[z.DATA_MASK_010=2]="DATA_MASK_010",z[z.DATA_MASK_011=3]="DATA_MASK_011",z[z.DATA_MASK_100=4]="DATA_MASK_100",z[z.DATA_MASK_101=5]="DATA_MASK_101",z[z.DATA_MASK_110=6]="DATA_MASK_110",z[z.DATA_MASK_111=7]="DATA_MASK_111"})(qn||(qn={}));class Jn{constructor(a,u){this.value=a,this.isMasked=u}unmaskBitMatrix(a,u){for(let d=0;d<u;d++)for(let v=0;v<u;v++)this.isMasked(d,v)&&a.flip(v,d)}}Jn.values=new Map([[qn.DATA_MASK_000,new Jn(qn.DATA_MASK_000,(z,a)=>(z+a&1)===0)],[qn.DATA_MASK_001,new Jn(qn.DATA_MASK_001,(z,a)=>(z&1)===0)],[qn.DATA_MASK_010,new Jn(qn.DATA_MASK_010,(z,a)=>a%3===0)],[qn.DATA_MASK_011,new Jn(qn.DATA_MASK_011,(z,a)=>(z+a)%3===0)],[qn.DATA_MASK_100,new Jn(qn.DATA_MASK_100,(z,a)=>(Math.floor(z/2)+Math.floor(a/3)&1)===0)],[qn.DATA_MASK_101,new Jn(qn.DATA_MASK_101,(z,a)=>z*a%6===0)],[qn.DATA_MASK_110,new Jn(qn.DATA_MASK_110,(z,a)=>z*a%6<3)],[qn.DATA_MASK_111,new Jn(qn.DATA_MASK_111,(z,a)=>(z+a+z*a%3&1)===0)]]);class qt{constructor(a){const u=a.getHeight();if(u<21||(u&3)!==1)throw new F;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let c=0;c<6;c++)a=this.copyBit(c,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let c=5;c>=0;c--)a=this.copyBit(8,c,a);const u=this.bitMatrix.getHeight();let d=0;const v=u-7;for(let c=u-1;c>=v;c--)d=this.copyBit(8,c,d);for(let c=u-8;c<u;c++)d=this.copyBit(c,8,d);if(this.parsedFormatInfo=Zn.decodeFormatInformation(a,d),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),u=Math.floor((a-17)/4);if(u<=6)return wt.getVersionForNumber(u);let d=0;const v=a-11;for(let f=5;f>=0;f--)for(let b=a-9;b>=v;b--)d=this.copyBit(b,f,d);let c=wt.decodeVersionInformation(d);if(c!==null&&c.getDimensionForVersion()===a)return this.parsedVersion=c,c;d=0;for(let f=5;f>=0;f--)for(let b=a-9;b>=v;b--)d=this.copyBit(f,b,d);if(c=wt.decodeVersionInformation(d),c!==null&&c.getDimensionForVersion()===a)return this.parsedVersion=c,c;throw new F}copyBit(a,u,d){return(this.isMirror?this.bitMatrix.get(u,a):this.bitMatrix.get(a,u))?d<<1|1:d<<1}readCodewords(){const a=this.readFormatInformation(),u=this.readVersion(),d=Jn.values.get(a.getDataMask()),v=this.bitMatrix.getHeight();d.unmaskBitMatrix(this.bitMatrix,v);const c=u.buildFunctionPattern();let f=!0;const b=new Uint8Array(u.getTotalCodewords());let x=0,A=0,_=0;for(let M=v-1;M>0;M-=2){M===6&&M--;for(let L=0;L<v;L++){const U=f?v-1-L:L;for(let q=0;q<2;q++)c.get(M-q,U)||(_++,A<<=1,this.bitMatrix.get(M-q,U)&&(A|=1),_===8&&(b[x++]=A,_=0,A=0))}f=!f}if(x!==u.getTotalCodewords())throw new F;return b}remask(){if(this.parsedFormatInfo===null)return;const a=Jn.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,u)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let u=0,d=a.getWidth();u<d;u++)for(let v=u+1,c=a.getHeight();v<c;v++)a.get(u,v)!==a.get(v,u)&&(a.flip(v,u),a.flip(u,v))}}class Ni{constructor(a,u){this.numDataCodewords=a,this.codewords=u}static getDataBlocks(a,u,d){if(a.length!==u.getTotalCodewords())throw new S;const v=u.getECBlocksForLevel(d);let c=0;const f=v.getECBlocks();for(const q of f)c+=q.getCount();const b=new Array(c);let x=0;for(const q of f)for(let K=0;K<q.getCount();K++){const G=q.getDataCodewords(),Z=v.getECCodewordsPerBlock()+G;b[x++]=new Ni(G,new Uint8Array(Z))}const A=b[0].codewords.length;let _=b.length-1;for(;_>=0&&b[_].codewords.length!==A;)_--;_++;const M=A-v.getECCodewordsPerBlock();let L=0;for(let q=0;q<M;q++)for(let K=0;K<x;K++)b[K].codewords[q]=a[L++];for(let q=_;q<x;q++)b[q].codewords[M]=a[L++];const U=b[0].codewords.length;for(let q=M;q<U;q++)for(let K=0;K<x;K++){const G=K<_?q:q+1;b[K].codewords[G]=a[L++]}return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var oi;(function(z){z[z.TERMINATOR=0]="TERMINATOR",z[z.NUMERIC=1]="NUMERIC",z[z.ALPHANUMERIC=2]="ALPHANUMERIC",z[z.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",z[z.BYTE=4]="BYTE",z[z.ECI=5]="ECI",z[z.KANJI=6]="KANJI",z[z.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",z[z.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",z[z.HANZI=9]="HANZI"})(oi||(oi={}));class At{constructor(a,u,d,v){this.value=a,this.stringValue=u,this.characterCountBitsForVersions=d,this.bits=v,At.FOR_BITS.set(v,this),At.FOR_VALUE.set(a,this)}static forBits(a){const u=At.FOR_BITS.get(a);if(u===void 0)throw new S;return u}getCharacterCountBits(a){const u=a.getVersionNumber();let d;return u<=9?d=0:u<=26?d=1:d=2,this.characterCountBitsForVersions[d]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof At))return!1;const u=a;return this.value===u.value}toString(){return this.stringValue}}At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.TERMINATOR=new At(oi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),At.NUMERIC=new At(oi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),At.ALPHANUMERIC=new At(oi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),At.STRUCTURED_APPEND=new At(oi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),At.BYTE=new At(oi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),At.ECI=new At(oi.ECI,"ECI",Int32Array.from([0,0,0]),7),At.KANJI=new At(oi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),At.FNC1_FIRST_POSITION=new At(oi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),At.FNC1_SECOND_POSITION=new At(oi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),At.HANZI=new At(oi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class on{static decode(a,u,d,v){const c=new ur(a);let f=new he;const b=new Array;let x=-1,A=-1;try{let _=null,M=!1,L;do{if(c.available()<4)L=At.TERMINATOR;else{const U=c.readBits(4);L=At.forBits(U)}switch(L){case At.TERMINATOR:break;case At.FNC1_FIRST_POSITION:case At.FNC1_SECOND_POSITION:M=!0;break;case At.STRUCTURED_APPEND:if(c.available()<16)throw new F;x=c.readBits(8),A=c.readBits(8);break;case At.ECI:const U=on.parseECIValue(c);if(_=de.getCharacterSetECIByValue(U),_===null)throw new F;break;case At.HANZI:const q=c.readBits(4),K=c.readBits(L.getCharacterCountBits(u));q===on.GB2312_SUBSET&&on.decodeHanziSegment(c,f,K);break;default:const G=c.readBits(L.getCharacterCountBits(u));switch(L){case At.NUMERIC:on.decodeNumericSegment(c,f,G);break;case At.ALPHANUMERIC:on.decodeAlphanumericSegment(c,f,G,M);break;case At.BYTE:on.decodeByteSegment(c,f,G,_,b,v);break;case At.KANJI:on.decodeKanjiSegment(c,f,G);break;default:throw new F}break}}while(L!==At.TERMINATOR)}catch{throw new F}return new Ze(a,f.toString(),b.length===0?null:b,d===null?null:d.toString(),x,A)}static decodeHanziSegment(a,u,d){if(d*13>a.available())throw new F;const v=new Uint8Array(2*d);let c=0;for(;d>0;){const f=a.readBits(13);let b=f/96<<8&4294967295|f%96;b<959?b+=41377:b+=42657,v[c]=b>>8&255,v[c+1]=b&255,c+=2,d--}try{u.append(Q.decode(v,fe.GB2312))}catch(f){throw new F(f)}}static decodeKanjiSegment(a,u,d){if(d*13>a.available())throw new F;const v=new Uint8Array(2*d);let c=0;for(;d>0;){const f=a.readBits(13);let b=f/192<<8&4294967295|f%192;b<7936?b+=33088:b+=49472,v[c]=b>>8,v[c+1]=b,c+=2,d--}try{u.append(Q.decode(v,fe.SHIFT_JIS))}catch(f){throw new F(f)}}static decodeByteSegment(a,u,d,v,c,f){if(8*d>a.available())throw new F;const b=new Uint8Array(d);for(let A=0;A<d;A++)b[A]=a.readBits(8);let x;v===null?x=fe.guessEncoding(b,f):x=v.getName();try{u.append(Q.decode(b,x))}catch(A){throw new F(A)}c.push(b)}static toAlphaNumericChar(a){if(a>=on.ALPHANUMERIC_CHARS.length)throw new F;return on.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,u,d,v){const c=u.length();for(;d>1;){if(a.available()<11)throw new F;const f=a.readBits(11);u.append(on.toAlphaNumericChar(Math.floor(f/45))),u.append(on.toAlphaNumericChar(f%45)),d-=2}if(d===1){if(a.available()<6)throw new F;u.append(on.toAlphaNumericChar(a.readBits(6)))}if(v)for(let f=c;f<u.length();f++)u.charAt(f)==="%"&&(f<u.length()-1&&u.charAt(f+1)==="%"?u.deleteCharAt(f+1):u.setCharAt(f,""))}static decodeNumericSegment(a,u,d){for(;d>=3;){if(a.available()<10)throw new F;const v=a.readBits(10);if(v>=1e3)throw new F;u.append(on.toAlphaNumericChar(Math.floor(v/100))),u.append(on.toAlphaNumericChar(Math.floor(v/10)%10)),u.append(on.toAlphaNumericChar(v%10)),d-=3}if(d===2){if(a.available()<7)throw new F;const v=a.readBits(7);if(v>=100)throw new F;u.append(on.toAlphaNumericChar(Math.floor(v/10))),u.append(on.toAlphaNumericChar(v%10))}else if(d===1){if(a.available()<4)throw new F;const v=a.readBits(4);if(v>=10)throw new F;u.append(on.toAlphaNumericChar(v))}}static parseECIValue(a){const u=a.readBits(8);if((u&128)===0)return u&127;if((u&192)===128){const d=a.readBits(8);return(u&63)<<8&4294967295|d}if((u&224)===192){const d=a.readBits(16);return(u&31)<<16&4294967295|d}throw new F}}on.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",on.GB2312_SUBSET=1;class ts{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const u=a[0];a[0]=a[2],a[2]=u}}class Ws{constructor(){this.rsDecoder=new _r(mt.QR_CODE_FIELD_256)}decodeBooleanArray(a,u){return this.decodeBitMatrix(Ne.parseFromBooleanArray(a),u)}decodeBitMatrix(a,u){const d=new qt(a);let v=null;try{return this.decodeBitMatrixParser(d,u)}catch(c){v=c}try{d.remask(),d.setMirror(!0),d.readVersion(),d.readFormatInformation(),d.mirror();const c=this.decodeBitMatrixParser(d,u);return c.setOther(new ts(!0)),c}catch(c){throw v!==null?v:c}}decodeBitMatrixParser(a,u){const d=a.readVersion(),v=a.readFormatInformation().getErrorCorrectionLevel(),c=a.readCodewords(),f=Ni.getDataBlocks(c,d,v);let b=0;for(const _ of f)b+=_.getNumDataCodewords();const x=new Uint8Array(b);let A=0;for(const _ of f){const M=_.getCodewords(),L=_.getNumDataCodewords();this.correctErrors(M,L);for(let U=0;U<L;U++)x[A++]=M[U]}return on.decode(x,d,v,u)}correctErrors(a,u){const d=new Int32Array(a);try{this.rsDecoder.decode(d,a.length-u)}catch{throw new I}for(let v=0;v<u;v++)a[v]=d[v]}}class li extends ft{constructor(a,u,d){super(a,u),this.estimatedModuleSize=d}aboutEquals(a,u,d){if(Math.abs(u-this.getY())<=a&&Math.abs(d-this.getX())<=a){const v=Math.abs(a-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(a,u,d){const v=(this.getX()+u)/2,c=(this.getY()+a)/2,f=(this.estimatedModuleSize+d)/2;return new li(v,c,f)}}class Zr{constructor(a,u,d,v,c,f,b){this.image=a,this.startX=u,this.startY=d,this.width=v,this.height=c,this.moduleSize=f,this.resultPointCallback=b,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,u=this.height,d=this.width,v=a+d,c=this.startY+u/2,f=new Int32Array(3),b=this.image;for(let x=0;x<u;x++){const A=c+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));f[0]=0,f[1]=0,f[2]=0;let _=a;for(;_<v&&!b.get(_,A);)_++;let M=0;for(;_<v;){if(b.get(_,A))if(M===1)f[1]++;else if(M===2){if(this.foundPatternCross(f)){const L=this.handlePossibleCenter(f,A,_);if(L!==null)return L}f[0]=f[2],f[1]=1,f[2]=0,M=1}else f[++M]++;else M===1&&M++,f[M]++;_++}if(this.foundPatternCross(f)){const L=this.handlePossibleCenter(f,A,v);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie}static centerFromEnd(a,u){return u-a[2]-a[1]/2}foundPatternCross(a){const u=this.moduleSize,d=u/2;for(let v=0;v<3;v++)if(Math.abs(u-a[v])>=d)return!1;return!0}crossCheckVertical(a,u,d,v){const c=this.image,f=c.getHeight(),b=this.crossCheckStateCount;b[0]=0,b[1]=0,b[2]=0;let x=a;for(;x>=0&&c.get(u,x)&&b[1]<=d;)b[1]++,x--;if(x<0||b[1]>d)return NaN;for(;x>=0&&!c.get(u,x)&&b[0]<=d;)b[0]++,x--;if(b[0]>d)return NaN;for(x=a+1;x<f&&c.get(u,x)&&b[1]<=d;)b[1]++,x++;if(x===f||b[1]>d)return NaN;for(;x<f&&!c.get(u,x)&&b[2]<=d;)b[2]++,x++;if(b[2]>d)return NaN;const A=b[0]+b[1]+b[2];return 5*Math.abs(A-v)>=2*v?NaN:this.foundPatternCross(b)?Zr.centerFromEnd(b,x):NaN}handlePossibleCenter(a,u,d){const v=a[0]+a[1]+a[2],c=Zr.centerFromEnd(a,d),f=this.crossCheckVertical(u,c,2*a[1],v);if(!isNaN(f)){const b=(a[0]+a[1]+a[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(b,f,c))return A.combineEstimate(f,c,b);const x=new li(c,f,b);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Cr extends ft{constructor(a,u,d,v){super(a,u),this.estimatedModuleSize=d,this.count=v,v===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,u,d){if(Math.abs(u-this.getY())<=a&&Math.abs(d-this.getX())<=a){const v=Math.abs(a-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(a,u,d){const v=this.count+1,c=(this.count*this.getX()+u)/v,f=(this.count*this.getY()+a)/v,b=(this.count*this.estimatedModuleSize+d)/v;return new Cr(c,f,b,v)}}class er{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class yn{constructor(a,u){this.image=a,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const u=a!=null&&a.get(J.TRY_HARDER)!==void 0,d=a!=null&&a.get(J.PURE_BARCODE)!==void 0,v=this.image,c=v.getHeight(),f=v.getWidth();let b=Math.floor(3*c/(4*yn.MAX_MODULES));(b<yn.MIN_SKIP||u)&&(b=yn.MIN_SKIP);let x=!1;const A=new Int32Array(5);for(let M=b-1;M<c&&!x;M+=b){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let L=0;for(let U=0;U<f;U++)if(v.get(U,M))(L&1)===1&&L++,A[L]++;else if((L&1)===0)if(L===4)if(yn.foundPatternCross(A)){if(this.handlePossibleCenter(A,M,U,d)===!0)if(b=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const K=this.findRowSkip();K>A[2]&&(M+=K-A[2]-b,U=f-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,L=3;continue}L=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,L=3;else A[++L]++;else A[L]++;yn.foundPatternCross(A)&&this.handlePossibleCenter(A,M,f,d)===!0&&(b=A[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return ft.orderBestPatterns(_),new er(_)}static centerFromEnd(a,u){return u-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let u=0;for(let c=0;c<5;c++){const f=a[c];if(f===0)return!1;u+=f}if(u<7)return!1;const d=u/7,v=d/2;return Math.abs(d-a[0])<v&&Math.abs(d-a[1])<v&&Math.abs(3*d-a[2])<3*v&&Math.abs(d-a[3])<v&&Math.abs(d-a[4])<v}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,u,d,v){const c=this.getCrossCheckStateCount();let f=0;const b=this.image;for(;a>=f&&u>=f&&b.get(u-f,a-f);)c[2]++,f++;if(a<f||u<f)return!1;for(;a>=f&&u>=f&&!b.get(u-f,a-f)&&c[1]<=d;)c[1]++,f++;if(a<f||u<f||c[1]>d)return!1;for(;a>=f&&u>=f&&b.get(u-f,a-f)&&c[0]<=d;)c[0]++,f++;if(c[0]>d)return!1;const x=b.getHeight(),A=b.getWidth();for(f=1;a+f<x&&u+f<A&&b.get(u+f,a+f);)c[2]++,f++;if(a+f>=x||u+f>=A)return!1;for(;a+f<x&&u+f<A&&!b.get(u+f,a+f)&&c[3]<d;)c[3]++,f++;if(a+f>=x||u+f>=A||c[3]>=d)return!1;for(;a+f<x&&u+f<A&&b.get(u+f,a+f)&&c[4]<d;)c[4]++,f++;if(c[4]>=d)return!1;const _=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(_-v)<2*v&&yn.foundPatternCross(c)}crossCheckVertical(a,u,d,v){const c=this.image,f=c.getHeight(),b=this.getCrossCheckStateCount();let x=a;for(;x>=0&&c.get(u,x);)b[2]++,x--;if(x<0)return NaN;for(;x>=0&&!c.get(u,x)&&b[1]<=d;)b[1]++,x--;if(x<0||b[1]>d)return NaN;for(;x>=0&&c.get(u,x)&&b[0]<=d;)b[0]++,x--;if(b[0]>d)return NaN;for(x=a+1;x<f&&c.get(u,x);)b[2]++,x++;if(x===f)return NaN;for(;x<f&&!c.get(u,x)&&b[3]<d;)b[3]++,x++;if(x===f||b[3]>=d)return NaN;for(;x<f&&c.get(u,x)&&b[4]<d;)b[4]++,x++;if(b[4]>=d)return NaN;const A=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(A-v)>=2*v?NaN:yn.foundPatternCross(b)?yn.centerFromEnd(b,x):NaN}crossCheckHorizontal(a,u,d,v){const c=this.image,f=c.getWidth(),b=this.getCrossCheckStateCount();let x=a;for(;x>=0&&c.get(x,u);)b[2]++,x--;if(x<0)return NaN;for(;x>=0&&!c.get(x,u)&&b[1]<=d;)b[1]++,x--;if(x<0||b[1]>d)return NaN;for(;x>=0&&c.get(x,u)&&b[0]<=d;)b[0]++,x--;if(b[0]>d)return NaN;for(x=a+1;x<f&&c.get(x,u);)b[2]++,x++;if(x===f)return NaN;for(;x<f&&!c.get(x,u)&&b[3]<d;)b[3]++,x++;if(x===f||b[3]>=d)return NaN;for(;x<f&&c.get(x,u)&&b[4]<d;)b[4]++,x++;if(b[4]>=d)return NaN;const A=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(A-v)>=v?NaN:yn.foundPatternCross(b)?yn.centerFromEnd(b,x):NaN}handlePossibleCenter(a,u,d,v){const c=a[0]+a[1]+a[2]+a[3]+a[4];let f=yn.centerFromEnd(a,d),b=this.crossCheckVertical(u,Math.floor(f),a[2],c);if(!isNaN(b)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(b),a[2],c),!isNaN(f)&&(!v||this.crossCheckDiagonal(Math.floor(b),Math.floor(f),a[2],c)))){const x=c/7;let A=!1;const _=this.possibleCenters;for(let M=0,L=_.length;M<L;M++){const U=_[M];if(U.aboutEquals(x,b,f)){_[M]=U.combineEstimate(b,f,x),A=!0;break}}if(!A){const M=new Cr(f,b,x);_.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const d of this.possibleCenters)if(d.getCount()>=yn.CENTER_QUORUM)if(u==null)u=d;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-d.getX())-Math.abs(u.getY()-d.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,u=0;const d=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=yn.CENTER_QUORUM&&(a++,u+=f.getEstimatedModuleSize());if(a<3)return!1;const v=u/d;let c=0;for(const f of this.possibleCenters)c+=Math.abs(f.getEstimatedModuleSize()-v);return c<=.05*u}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new ie;const u=this.possibleCenters;let d;if(a>3){let v=0,c=0;for(const x of this.possibleCenters){const A=x.getEstimatedModuleSize();v+=A,c+=A*A}d=v/a;let f=Math.sqrt(c/a-d*d);u.sort((x,A)=>{const _=Math.abs(A.getEstimatedModuleSize()-d),M=Math.abs(x.getEstimatedModuleSize()-d);return _<M?-1:_>M?1:0});const b=Math.max(.2*d,f);for(let x=0;x<u.length&&u.length>3;x++){const A=u[x];Math.abs(A.getEstimatedModuleSize()-d)>b&&(u.splice(x,1),x--)}}if(u.length>3){let v=0;for(const c of u)v+=c.getEstimatedModuleSize();d=v/u.length,u.sort((c,f)=>{if(f.getCount()===c.getCount()){const b=Math.abs(f.getEstimatedModuleSize()-d),x=Math.abs(c.getEstimatedModuleSize()-d);return b<x?1:b>x?-1:0}else return f.getCount()-c.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}yn.CENTER_QUORUM=2,yn.MIN_SKIP=3,yn.MAX_MODULES=57;class Ir{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(J.NEED_RESULT_POINT_CALLBACK);const d=new yn(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(d)}processFinderPatternInfo(a){const u=a.getTopLeft(),d=a.getTopRight(),v=a.getBottomLeft(),c=this.calculateModuleSize(u,d,v);if(c<1)throw new ie("No pattern found in proccess finder.");const f=Ir.computeDimension(u,d,v,c),b=wt.getProvisionalVersionForDimension(f),x=b.getDimensionForVersion()-7;let A=null;if(b.getAlignmentPatternCenters().length>0){const U=d.getX()-u.getX()+v.getX(),q=d.getY()-u.getY()+v.getY(),K=1-3/x,G=Math.floor(u.getX()+K*(U-u.getX())),Z=Math.floor(u.getY()+K*(q-u.getY()));for(let re=4;re<=16;re<<=1)try{A=this.findAlignmentInRegion(c,G,Z,re);break}catch(ae){if(!(ae instanceof ie))throw ae}}const _=Ir.createTransform(u,d,v,A,f),M=Ir.sampleGrid(this.image,_,f);let L;return A===null?L=[v,u,d]:L=[v,u,d,A],new $i(M,L)}static createTransform(a,u,d,v,c){const f=c-3.5;let b,x,A,_;return v!==null?(b=v.getX(),x=v.getY(),A=f-3,_=A):(b=u.getX()-a.getX()+d.getX(),x=u.getY()-a.getY()+d.getY(),A=f,_=f),Wn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,A,_,3.5,f,a.getX(),a.getY(),u.getX(),u.getY(),b,x,d.getX(),d.getY())}static sampleGrid(a,u,d){return Rn.getInstance().sampleGridWithTransform(a,d,d,u)}static computeDimension(a,u,d,v){const c=tn.round(ft.distance(a,u)/v),f=tn.round(ft.distance(a,d)/v);let b=Math.floor((c+f)/2)+7;switch(b&3){case 0:b++;break;case 2:b--;break;case 3:throw new ie("Dimensions could be not found.")}return b}calculateModuleSize(a,u,d){return(this.calculateModuleSizeOneWay(a,u)+this.calculateModuleSizeOneWay(a,d))/2}calculateModuleSizeOneWay(a,u){const d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(u.getX()),Math.floor(u.getY())),v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(d)?v/7:isNaN(v)?d/7:(d+v)/14}sizeOfBlackWhiteBlackRunBothWays(a,u,d,v){let c=this.sizeOfBlackWhiteBlackRun(a,u,d,v),f=1,b=a-(d-a);b<0?(f=a/(a-b),b=0):b>=this.image.getWidth()&&(f=(this.image.getWidth()-1-a)/(b-a),b=this.image.getWidth()-1);let x=Math.floor(u-(v-u)*f);return f=1,x<0?(f=u/(u-x),x=0):x>=this.image.getHeight()&&(f=(this.image.getHeight()-1-u)/(x-u),x=this.image.getHeight()-1),b=Math.floor(a+(b-a)*f),c+=this.sizeOfBlackWhiteBlackRun(a,u,b,x),c-1}sizeOfBlackWhiteBlackRun(a,u,d,v){const c=Math.abs(v-u)>Math.abs(d-a);if(c){let U=a;a=u,u=U,U=d,d=v,v=U}const f=Math.abs(d-a),b=Math.abs(v-u);let x=-f/2;const A=a<d?1:-1,_=u<v?1:-1;let M=0;const L=d+A;for(let U=a,q=u;U!==L;U+=A){const K=c?q:U,G=c?U:q;if(M===1===this.image.get(K,G)){if(M===2)return tn.distance(U,q,a,u);M++}if(x+=b,x>0){if(q===v)break;q+=_,x-=f}}return M===2?tn.distance(d+A,v,a,u):NaN}findAlignmentInRegion(a,u,d,v){const c=Math.floor(v*a),f=Math.max(0,u-c),b=Math.min(this.image.getWidth()-1,u+c);if(b-f<a*3)throw new ie("Alignment top exceeds estimated module size.");const x=Math.max(0,d-c),A=Math.min(this.image.getHeight()-1,d+c);if(A-x<a*3)throw new ie("Alignment bottom exceeds estimated module size.");return new Zr(this.image,f,x,b-f,A-x,a,this.resultPointCallback).find()}}class qr{constructor(){this.decoder=new Ws}getDecoder(){return this.decoder}decode(a,u){let d,v;if(u!=null&&u.get(J.PURE_BARCODE)!==void 0){const x=qr.extractPureBits(a.getBlackMatrix());d=this.decoder.decodeBitMatrix(x,u),v=qr.NO_POINTS}else{const x=new Ir(a.getBlackMatrix()).detect(u);d=this.decoder.decodeBitMatrix(x.getBits(),u),v=x.getPoints()}d.getOther()instanceof ts&&d.getOther().applyMirroredCorrection(v);const c=new ke(d.getText(),d.getRawBytes(),void 0,v,Fe.QR_CODE,void 0),f=d.getByteSegments();f!==null&&c.putMetadata(dt.BYTE_SEGMENTS,f);const b=d.getECLevel();return b!==null&&c.putMetadata(dt.ERROR_CORRECTION_LEVEL,b),d.hasStructuredAppend()&&(c.putMetadata(dt.STRUCTURED_APPEND_SEQUENCE,d.getStructuredAppendSequenceNumber()),c.putMetadata(dt.STRUCTURED_APPEND_PARITY,d.getStructuredAppendParity())),c}reset(){}static extractPureBits(a){const u=a.getTopLeftOnBit(),d=a.getBottomRightOnBit();if(u===null||d===null)throw new ie;const v=this.moduleSize(u,a);let c=u[1],f=d[1],b=u[0],x=d[0];if(b>=x||c>=f)throw new ie;if(f-c!==x-b&&(x=b+(f-c),x>=a.getWidth()))throw new ie;const A=Math.round((x-b+1)/v),_=Math.round((f-c+1)/v);if(A<=0||_<=0)throw new ie;if(_!==A)throw new ie;const M=Math.floor(v/2);c+=M,b+=M;const L=b+Math.floor((A-1)*v)-x;if(L>0){if(L>M)throw new ie;b-=L}const U=c+Math.floor((_-1)*v)-f;if(U>0){if(U>M)throw new ie;c-=U}const q=new Ne(A,_);for(let K=0;K<_;K++){const G=c+Math.floor(K*v);for(let Z=0;Z<A;Z++)a.get(b+Math.floor(Z*v),G)&&q.set(Z,K)}return q}static moduleSize(a,u){const d=u.getHeight(),v=u.getWidth();let c=a[0],f=a[1],b=!0,x=0;for(;c<v&&f<d;){if(b!==u.get(c,f)){if(++x===5)break;b=!b}c++,f++}if(c===v||f===d)throw new ie;return(c-a[0])/7}}qr.NO_POINTS=new Array;class _t{PDF417Common(){}static getBitCountSum(a){return tn.sum(a)}static toIntArray(a){if(a==null||!a.length)return _t.EMPTY_INT_ARRAY;const u=new Int32Array(a.length);let d=0;for(const v of a)u[d++]=v;return u}static getCodeword(a){const u=H.binarySearch(_t.SYMBOL_TABLE,a&262143);return u<0?-1:(_t.CODEWORD_TABLE[u]-1)%_t.NUMBER_OF_CODEWORDS}}_t.NUMBER_OF_CODEWORDS=929,_t.MAX_CODEWORDS_IN_BARCODE=_t.NUMBER_OF_CODEWORDS-1,_t.MIN_ROWS_IN_BARCODE=3,_t.MAX_ROWS_IN_BARCODE=90,_t.MODULES_IN_CODEWORD=17,_t.MODULES_IN_STOP_PATTERN=18,_t.BARS_IN_MODULE=8,_t.EMPTY_INT_ARRAY=new Int32Array([]),_t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),_t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Bi{constructor(a,u){this.bits=a,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class zt{static detectMultiple(a,u,d){let v=a.getBlackMatrix(),c=zt.detect(d,v);return c.length||(v=v.clone(),v.rotate180(),c=zt.detect(d,v)),new Bi(v,c)}static detect(a,u){const d=new Array;let v=0,c=0,f=!1;for(;v<u.getHeight();){const b=zt.findVertices(u,v,c);if(b[0]==null&&b[3]==null){if(!f)break;f=!1,c=0;for(const x of d)x[1]!=null&&(v=Math.trunc(Math.max(v,x[1].getY()))),x[3]!=null&&(v=Math.max(v,Math.trunc(x[3].getY())));v+=zt.ROW_STEP;continue}if(f=!0,d.push(b),!a)break;b[2]!=null?(c=Math.trunc(b[2].getX()),v=Math.trunc(b[2].getY())):(c=Math.trunc(b[4].getX()),v=Math.trunc(b[4].getY()))}return d}static findVertices(a,u,d){const v=a.getHeight(),c=a.getWidth(),f=new Array(8);return zt.copyToResult(f,zt.findRowsWithPattern(a,v,c,u,d,zt.START_PATTERN),zt.INDEXES_START_PATTERN),f[4]!=null&&(d=Math.trunc(f[4].getX()),u=Math.trunc(f[4].getY())),zt.copyToResult(f,zt.findRowsWithPattern(a,v,c,u,d,zt.STOP_PATTERN),zt.INDEXES_STOP_PATTERN),f}static copyToResult(a,u,d){for(let v=0;v<d.length;v++)a[d[v]]=u[v]}static findRowsWithPattern(a,u,d,v,c,f){const b=new Array(4);let x=!1;const A=new Int32Array(f.length);for(;v<u;v+=zt.ROW_STEP){let M=zt.findGuardPattern(a,c,v,d,!1,f,A);if(M!=null){for(;v>0;){const L=zt.findGuardPattern(a,c,--v,d,!1,f,A);if(L!=null)M=L;else{v++;break}}b[0]=new ft(M[0],v),b[1]=new ft(M[1],v),x=!0;break}}let _=v+1;if(x){let M=0,L=Int32Array.from([Math.trunc(b[0].getX()),Math.trunc(b[1].getX())]);for(;_<u;_++){const U=zt.findGuardPattern(a,L[0],_,d,!1,f,A);if(U!=null&&Math.abs(L[0]-U[0])<zt.MAX_PATTERN_DRIFT&&Math.abs(L[1]-U[1])<zt.MAX_PATTERN_DRIFT)L=U,M=0;else{if(M>zt.SKIPPED_ROW_COUNT_MAX)break;M++}}_-=M+1,b[2]=new ft(L[0],_),b[3]=new ft(L[1],_)}return _-v<zt.BARCODE_MIN_HEIGHT&&H.fill(b,null),b}static findGuardPattern(a,u,d,v,c,f,b){H.fillWithin(b,0,b.length,0);let x=u,A=0;for(;a.get(x,d)&&x>0&&A++<zt.MAX_PIXEL_DRIFT;)x--;let _=x,M=0,L=f.length;for(let U=c;_<v;_++)if(a.get(_,d)!==U)b[M]++;else{if(M===L-1){if(zt.patternMatchVariance(b,f,zt.MAX_INDIVIDUAL_VARIANCE)<zt.MAX_AVG_VARIANCE)return new Int32Array([x,_]);x+=b[0]+b[1],D.arraycopy(b,2,b,0,M-1),b[M-1]=0,b[M]=0,M--}else M++;b[M]=1,U=!U}return M===L-1&&zt.patternMatchVariance(b,f,zt.MAX_INDIVIDUAL_VARIANCE)<zt.MAX_AVG_VARIANCE?new Int32Array([x,_-1]):null}static patternMatchVariance(a,u,d){let v=a.length,c=0,f=0;for(let A=0;A<v;A++)c+=a[A],f+=u[A];if(c<f)return 1/0;let b=c/f;d*=b;let x=0;for(let A=0;A<v;A++){let _=a[A],M=u[A]*b,L=_>M?_-M:M-_;if(L>d)return 1/0;x+=L}return x/c}}zt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),zt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),zt.MAX_AVG_VARIANCE=.42,zt.MAX_INDIVIDUAL_VARIANCE=.8,zt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),zt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),zt.MAX_PIXEL_DRIFT=3,zt.MAX_PATTERN_DRIFT=5,zt.SKIPPED_ROW_COUNT_MAX=25,zt.ROW_STEP=5,zt.BARCODE_MIN_HEIGHT=10;class cn{constructor(a,u){if(u.length===0)throw new S;this.field=a;let d=u.length;if(d>1&&u[0]===0){let v=1;for(;v<d&&u[v]===0;)v++;v===d?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(d-v),D.arraycopy(u,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let v=0;for(let c of this.coefficients)v=this.field.add(v,c);return v}let u=this.coefficients[0],d=this.coefficients.length;for(let v=1;v<d;v++)u=this.field.add(this.field.multiply(a,u),this.coefficients[v]);return u}add(a){if(!this.field.equals(a.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let u=this.coefficients,d=a.coefficients;if(u.length>d.length){let f=u;u=d,d=f}let v=new Int32Array(d.length),c=d.length-u.length;D.arraycopy(d,0,v,0,c);for(let f=c;f<d.length;f++)v[f]=this.field.add(u[f-c],d[f]);return new cn(this.field,v)}subtract(a){if(!this.field.equals(a.field))throw new S("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof cn?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new cn(this.field,new Int32Array([0]));let u=this.coefficients,d=u.length,v=a.coefficients,c=v.length,f=new Int32Array(d+c-1);for(let b=0;b<d;b++){let x=u[b];for(let A=0;A<c;A++)f[b+A]=this.field.add(f[b+A],this.field.multiply(x,v[A]))}return new cn(this.field,f)}negative(){let a=this.coefficients.length,u=new Int32Array(a);for(let d=0;d<a;d++)u[d]=this.field.subtract(0,this.coefficients[d]);return new cn(this.field,u)}multiplyScalar(a){if(a===0)return new cn(this.field,new Int32Array([0]));if(a===1)return this;let u=this.coefficients.length,d=new Int32Array(u);for(let v=0;v<u;v++)d[v]=this.field.multiply(this.coefficients[v],a);return new cn(this.field,d)}multiplyByMonomial(a,u){if(a<0)throw new S;if(u===0)return new cn(this.field,new Int32Array([0]));let d=this.coefficients.length,v=new Int32Array(d+a);for(let c=0;c<d;c++)v[c]=this.field.multiply(this.coefficients[c],u);return new cn(this.field,v)}toString(){let a=new he;for(let u=this.getDegree();u>=0;u--){let d=this.getCoefficient(u);d!==0&&(d<0?(a.append(" - "),d=-d):a.length()>0&&a.append(" + "),(u===0||d!==1)&&a.append(d),u!==0&&(u===1?a.append("x"):(a.append("x^"),a.append(u))))}return a.toString()}}class ms{add(a,u){return(a+u)%this.modulus}subtract(a,u){return(this.modulus+a-u)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new S;return this.logTable[a]}inverse(a){if(a===0)throw new ht;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,u){return a===0||u===0?0:this.expTable[(this.logTable[a]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class Vr extends ms{constructor(a,u){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let d=1;for(let v=0;v<a;v++)this.expTable[v]=d,d=d*u%a;for(let v=0;v<a-1;v++)this.logTable[this.expTable[v]]=v;this.zero=new cn(this,new Int32Array([0])),this.one=new cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,u){if(a<0)throw new S;if(u===0)return this.zero;let d=new Int32Array(a+1);return d[0]=u,new cn(this,d)}}Vr.PDF417_GF=new Vr(_t.NUMBER_OF_CODEWORDS,3);class gi{constructor(){this.field=Vr.PDF417_GF}decode(a,u,d){let v=new cn(this.field,a),c=new Int32Array(u),f=!1;for(let q=u;q>0;q--){let K=v.evaluateAt(this.field.exp(q));c[u-q]=K,K!==0&&(f=!0)}if(!f)return 0;let b=this.field.getOne();if(d!=null)for(const q of d){let K=this.field.exp(a.length-1-q),G=new cn(this.field,new Int32Array([this.field.subtract(0,K),1]));b=b.multiply(G)}let x=new cn(this.field,c),A=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),x,u),_=A[0],M=A[1],L=this.findErrorLocations(_),U=this.findErrorMagnitudes(M,_,L);for(let q=0;q<L.length;q++){let K=a.length-1-this.field.log(L[q]);if(K<0)throw I.getChecksumInstance();a[K]=this.field.subtract(a[K],U[q])}return L.length}runEuclideanAlgorithm(a,u,d){if(a.getDegree()<u.getDegree()){let L=a;a=u,u=L}let v=a,c=u,f=this.field.getZero(),b=this.field.getOne();for(;c.getDegree()>=Math.round(d/2);){let L=v,U=f;if(v=c,f=b,v.isZero())throw I.getChecksumInstance();c=L;let q=this.field.getZero(),K=v.getCoefficient(v.getDegree()),G=this.field.inverse(K);for(;c.getDegree()>=v.getDegree()&&!c.isZero();){let Z=c.getDegree()-v.getDegree(),re=this.field.multiply(c.getCoefficient(c.getDegree()),G);q=q.add(this.field.buildMonomial(Z,re)),c=c.subtract(v.multiplyByMonomial(Z,re))}b=q.multiply(f).subtract(U).negative()}let x=b.getCoefficient(0);if(x===0)throw I.getChecksumInstance();let A=this.field.inverse(x),_=b.multiply(A),M=c.multiply(A);return[_,M]}findErrorLocations(a){let u=a.getDegree(),d=new Int32Array(u),v=0;for(let c=1;c<this.field.getSize()&&v<u;c++)a.evaluateAt(c)===0&&(d[v]=this.field.inverse(c),v++);if(v!==u)throw I.getChecksumInstance();return d}findErrorMagnitudes(a,u,d){let v=u.getDegree(),c=new Int32Array(v);for(let A=1;A<=v;A++)c[v-A]=this.field.multiply(A,u.getCoefficient(A));let f=new cn(this.field,c),b=d.length,x=new Int32Array(b);for(let A=0;A<b;A++){let _=this.field.inverse(d[A]),M=this.field.subtract(0,a.evaluateAt(_)),L=this.field.inverse(f.evaluateAt(_));x[A]=this.field.multiply(M,L)}return x}}class Gr{constructor(a,u,d,v,c){a instanceof Gr?this.constructor_2(a):this.constructor_1(a,u,d,v,c)}constructor_1(a,u,d,v,c){const f=u==null||d==null,b=v==null||c==null;if(f&&b)throw new ie;f?(u=new ft(0,v.getY()),d=new ft(0,c.getY())):b&&(v=new ft(a.getWidth()-1,u.getY()),c=new ft(a.getWidth()-1,d.getY())),this.image=a,this.topLeft=u,this.bottomLeft=d,this.topRight=v,this.bottomRight=c,this.minX=Math.trunc(Math.min(u.getX(),d.getX())),this.maxX=Math.trunc(Math.max(v.getX(),c.getX())),this.minY=Math.trunc(Math.min(u.getY(),v.getY())),this.maxY=Math.trunc(Math.max(d.getY(),c.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,u){return a==null?u:u==null?a:new Gr(a.image,a.topLeft,a.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(a,u,d){let v=this.topLeft,c=this.bottomLeft,f=this.topRight,b=this.bottomRight;if(a>0){let x=d?this.topLeft:this.topRight,A=Math.trunc(x.getY()-a);A<0&&(A=0);let _=new ft(x.getX(),A);d?v=_:f=_}if(u>0){let x=d?this.bottomLeft:this.bottomRight,A=Math.trunc(x.getY()+u);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let _=new ft(x.getX(),A);d?c=_:b=_}return new Gr(this.image,v,c,f,b)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class gs{constructor(a,u,d,v){this.columnCount=a,this.errorCorrectionLevel=v,this.rowCountUpperPart=u,this.rowCountLowerPart=d,this.rowCount=u+d}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ns{constructor(){this.buffer=""}static form(a,u){let d=-1;function v(f,b,x,A,_,M){if(f==="%%")return"%";if(u[++d]===void 0)return;f=A?parseInt(A.substr(1)):void 0;let L=_?parseInt(_.substr(1)):void 0,U;switch(M){case"s":U=u[d];break;case"c":U=u[d][0];break;case"f":U=parseFloat(u[d]).toFixed(f);break;case"p":U=parseFloat(u[d]).toPrecision(f);break;case"e":U=parseFloat(u[d]).toExponential(f);break;case"x":U=parseInt(u[d]).toString(L||16);break;case"d":U=parseFloat(parseInt(u[d],L||10).toPrecision(f)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(L);let q=parseInt(x),K=x&&x[0]+""=="0"?"0":" ";for(;U.length<q;)U=b!==void 0?U+K:K+U;return U}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(c,v)}format(a,...u){this.buffer+=ns.form(a,u)}toString(){return this.buffer}}class k{constructor(a){this.boundingBox=new Gr(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let u=this.getCodeword(a);if(u!=null)return u;for(let d=1;d<k.MAX_NEARBY_DISTANCE;d++){let v=this.imageRowToCodewordIndex(a)-d;if(v>=0&&(u=this.codewords[v],u!=null)||(v=this.imageRowToCodewordIndex(a)+d,v<this.codewords.length&&(u=this.codewords[v],u!=null)))return u}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,u){this.codewords[this.imageRowToCodewordIndex(a)]=u}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new ns;let u=0;for(const d of this.codewords){if(d==null){a.format("%3d:    |   %n",u++);continue}a.format("%3d: %3d|%3d%n",u++,d.getRowNumber(),d.getValue())}return a.toString()}}k.MAX_NEARBY_DISTANCE=5;class X{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let u=this.values.get(a);u==null&&(u=0),u++,this.values.set(a,u)}getValue(){let a=-1,u=new Array;for(const[d,v]of this.values.entries()){const c={getKey:()=>d,getValue:()=>v};c.getValue()>a?(a=c.getValue(),u=[],u.push(c.getKey())):c.getValue()===a&&u.push(c.getKey())}return _t.toIntArray(u)}getConfidence(a){return this.values.get(a)}}class ge extends k{constructor(a,u){super(a),this._isLeft=u}setRowNumbers(){for(let a of this.getCodewords())a?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,a);let d=this.getBoundingBox(),v=this._isLeft?d.getTopLeft():d.getTopRight(),c=this._isLeft?d.getBottomLeft():d.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(v.getY())),b=this.imageRowToCodewordIndex(Math.trunc(c.getY())),x=-1,A=1,_=0;for(let M=f;M<b;M++){if(u[M]==null)continue;let L=u[M],U=L.getRowNumber()-x;if(U===0)_++;else if(U===1)A=Math.max(A,_),_=1,x=L.getRowNumber();else if(U<0||L.getRowNumber()>=a.getRowCount()||U>M)u[M]=null;else{let q;A>2?q=(A-2)*U:q=U;let K=q>=M;for(let G=1;G<=q&&!K;G++)K=u[M-G]!=null;K?u[M]=null:(x=L.getRowNumber(),_=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let u=new Int32Array(a.getRowCount());for(let d of this.getCodewords())if(d!=null){let v=d.getRowNumber();if(v>=u.length)continue;u[v]++}return u}adjustIncompleteIndicatorColumnRowNumbers(a){let u=this.getBoundingBox(),d=this._isLeft?u.getTopLeft():u.getTopRight(),v=this._isLeft?u.getBottomLeft():u.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(d.getY())),f=this.imageRowToCodewordIndex(Math.trunc(v.getY())),b=this.getCodewords(),x=-1;for(let A=c;A<f;A++){if(b[A]==null)continue;let _=b[A];_.setRowNumberAsRowIndicatorColumn();let M=_.getRowNumber()-x;M===0||(M===1?x=_.getRowNumber():_.getRowNumber()>=a.getRowCount()?b[A]=null:x=_.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),u=new X,d=new X,v=new X,c=new X;for(let b of a){if(b==null)continue;b.setRowNumberAsRowIndicatorColumn();let x=b.getValue()%30,A=b.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:d.setValue(x*3+1);break;case 1:c.setValue(x/3),v.setValue(x%3);break;case 2:u.setValue(x+1);break}}if(u.getValue().length===0||d.getValue().length===0||v.getValue().length===0||c.getValue().length===0||u.getValue()[0]<1||d.getValue()[0]+v.getValue()[0]<_t.MIN_ROWS_IN_BARCODE||d.getValue()[0]+v.getValue()[0]>_t.MAX_ROWS_IN_BARCODE)return null;let f=new gs(u.getValue()[0],d.getValue()[0],v.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,f),f}removeIncorrectCodewords(a,u){for(let d=0;d<a.length;d++){let v=a[d];if(a[d]==null)continue;let c=v.getValue()%30,f=v.getRowNumber();if(f>u.getRowCount()){a[d]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:c*3+1!==u.getRowCountUpperPart()&&(a[d]=null);break;case 1:(Math.trunc(c/3)!==u.getErrorCorrectionLevel()||c%3!==u.getRowCountLowerPart())&&(a[d]=null);break;case 2:c+1!==u.getColumnCount()&&(a[d]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class je{constructor(a,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=_t.MAX_CODEWORDS_IN_BARCODE,u;do u=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let d=this.detectionResultColumns[u].getCodewords();for(let v=0;v<d.length;v++)d[v]!=null&&(d[v].hasValidRowNumber()||this.adjustRowNumbers(u,v,d))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let d=0;d<a.length;d++)if(a[d]!=null&&u[d]!=null&&a[d].getRowNumber()===u[d].getRowNumber())for(let v=1;v<=this.barcodeColumnCount;v++){let c=this.detectionResultColumns[v].getCodewords()[d];c!=null&&(c.setRowNumber(a[d].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[v].getCodewords()[d]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let d=0;d<u.length;d++){if(u[d]==null)continue;let v=u[d].getRowNumber(),c=0;for(let f=this.barcodeColumnCount+1;f>0&&c<this.ADJUST_ROW_NUMBER_SKIP;f--){let b=this.detectionResultColumns[f].getCodewords()[d];b!=null&&(c=je.adjustRowNumberIfValid(v,c,b),b.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,u=this.detectionResultColumns[0].getCodewords();for(let d=0;d<u.length;d++){if(u[d]==null)continue;let v=u[d].getRowNumber(),c=0;for(let f=1;f<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;f++){let b=this.detectionResultColumns[f].getCodewords()[d];b!=null&&(c=je.adjustRowNumberIfValid(v,c,b),b.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,u,d){return d==null||d.hasValidRowNumber()||(d.isValidRowNumber(a)?(d.setRowNumber(a),u=0):++u),u}adjustRowNumbers(a,u,d){if(!this.detectionResultColumns[a-1])return;let v=d[u],c=this.detectionResultColumns[a-1].getCodewords(),f=c;this.detectionResultColumns[a+1]!=null&&(f=this.detectionResultColumns[a+1].getCodewords());let b=new Array(14);b[2]=c[u],b[3]=f[u],u>0&&(b[0]=d[u-1],b[4]=c[u-1],b[5]=f[u-1]),u>1&&(b[8]=d[u-2],b[10]=c[u-2],b[11]=f[u-2]),u<d.length-1&&(b[1]=d[u+1],b[6]=c[u+1],b[7]=f[u+1]),u<d.length-2&&(b[9]=d[u+2],b[12]=c[u+2],b[13]=f[u+2]);for(let x of b)if(je.adjustRowNumber(v,x))return}static adjustRowNumber(a,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===a.getBucket()?(a.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,u){this.detectionResultColumns[a]=u}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new ns;for(let d=0;d<a.getCodewords().length;d++){u.format("CW %3d:",d);for(let v=0;v<this.barcodeColumnCount+2;v++){if(this.detectionResultColumns[v]==null){u.format("    |   ");continue}let c=this.detectionResultColumns[v].getCodewords()[d];if(c==null){u.format("    |   ");continue}u.format(" %3d|%3d",c.getRowNumber(),c.getValue())}u.format("%n")}return u.toString()}}class It{constructor(a,u,d,v){this.rowNumber=It.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(u),this.bucket=Math.trunc(d),this.value=Math.trunc(v)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==It.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}It.BARCODE_ROW_UNKNOWN=-1;class pt{static initialize(){for(let a=0;a<_t.SYMBOL_TABLE.length;a++){let u=_t.SYMBOL_TABLE[a],d=u&1;for(let v=0;v<_t.BARS_IN_MODULE;v++){let c=0;for(;(u&1)===d;)c+=1,u>>=1;d=u&1,pt.RATIOS_TABLE[a]||(pt.RATIOS_TABLE[a]=new Array(_t.BARS_IN_MODULE)),pt.RATIOS_TABLE[a][_t.BARS_IN_MODULE-v-1]=Math.fround(c/_t.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let u=pt.getDecodedCodewordValue(pt.sampleBitCounts(a));return u!==-1?u:pt.getClosestDecodedValue(a)}static sampleBitCounts(a){let u=tn.sum(a),d=new Int32Array(_t.BARS_IN_MODULE),v=0,c=0;for(let f=0;f<_t.MODULES_IN_CODEWORD;f++){let b=u/(2*_t.MODULES_IN_CODEWORD)+f*u/_t.MODULES_IN_CODEWORD;c+a[v]<=b&&(c+=a[v],v++),d[v]++}return d}static getDecodedCodewordValue(a){let u=pt.getBitValue(a);return _t.getCodeword(u)===-1?-1:u}static getBitValue(a){let u=0;for(let d=0;d<a.length;d++)for(let v=0;v<a[d];v++)u=u<<1|(d%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(a){let u=tn.sum(a),d=new Array(_t.BARS_IN_MODULE);if(u>1)for(let f=0;f<d.length;f++)d[f]=Math.fround(a[f]/u);let v=ri.MAX_VALUE,c=-1;this.bSymbolTableReady||pt.initialize();for(let f=0;f<pt.RATIOS_TABLE.length;f++){let b=0,x=pt.RATIOS_TABLE[f];for(let A=0;A<_t.BARS_IN_MODULE;A++){let _=Math.fround(x[A]-d[A]);if(b+=Math.fround(_*_),b>=v)break}b<v&&(v=b,c=_t.SYMBOL_TABLE[f])}return c}}pt.bSymbolTableReady=!1,pt.RATIOS_TABLE=new Array(_t.SYMBOL_TABLE.length).map(z=>new Array(_t.BARS_IN_MODULE));class ln{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class wn{static parseLong(a,u=void 0){return parseInt(a,u)}}class tr extends g{}tr.kind="NullPointerException";class Cn{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,u,d){if(a==null)throw new tr;if(u<0||u>a.length||d<0||u+d>a.length||u+d<0)throw new j;if(d===0)return;for(let v=0;v<d;v++)this.write(a[u+v])}flush(){}close(){}}class fr extends g{}class Rr extends Cn{constructor(a=32){if(super(),this.count=0,a<0)throw new S("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let d=this.buf.length<<1;if(d-a<0&&(d=a),d<0){if(a<0)throw new fr;d=V.MAX_VALUE}this.buf=H.copyOfUint8Array(this.buf,d)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,u,d){if(u<0||u>a.length||d<0||u+d-a.length>0)throw new j;this.ensureCapacity(this.count+d),D.arraycopy(a,u,this.buf,this.count,d),this.count+=d}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return H.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var Pt;(function(z){z[z.ALPHA=0]="ALPHA",z[z.LOWER=1]="LOWER",z[z.MIXED=2]="MIXED",z[z.PUNCT=3]="PUNCT",z[z.ALPHA_SHIFT=4]="ALPHA_SHIFT",z[z.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pt||(Pt={}));function Tr(){if(typeof window<"u"||typeof window<"u")return window.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let nr;function Br(z){if(typeof nr>"u"&&(nr=Tr()),nr===null)throw new Error("BigInt is not supported!");return nr(z)}function Ii(){let z=[];z[0]=Br(1);let a=Br(900);z[1]=a;for(let u=2;u<16;u++)z[u]=z[u-1]*a;return z}class De{static decode(a,u){let d=new he(""),v=de.ISO8859_1;d.enableDecoding(v);let c=1,f=a[c++],b=new ln;for(;c<a[0];){switch(f){case De.TEXT_COMPACTION_MODE_LATCH:c=De.textCompaction(a,c,d);break;case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:c=De.byteCompaction(f,a,v,c,d);break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[c++]);break;case De.NUMERIC_COMPACTION_MODE_LATCH:c=De.numericCompaction(a,c,d);break;case De.ECI_CHARSET:de.getCharacterSetECIByValue(a[c++]);break;case De.ECI_GENERAL_PURPOSE:c+=2;break;case De.ECI_USER_DEFINED:c++;break;case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=De.decodeMacroBlock(a,c,b);break;case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:throw new F;default:c--,c=De.textCompaction(a,c,d);break}if(c<a.length)f=a[c++];else throw F.getFormatInstance()}if(d.length()===0)throw F.getFormatInstance();let x=new Ze(null,d.toString(),null,u);return x.setOther(b),x}static decodeMacroBlock(a,u,d){if(u+De.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw F.getFormatInstance();let v=new Int32Array(De.NUMBER_OF_SEQUENCE_CODEWORDS);for(let b=0;b<De.NUMBER_OF_SEQUENCE_CODEWORDS;b++,u++)v[b]=a[u];d.setSegmentIndex(V.parseInt(De.decodeBase900toBase10(v,De.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new he;u=De.textCompaction(a,u,c),d.setFileId(c.toString());let f=-1;for(a[u]===De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=u+1);u<a[0];)switch(a[u]){case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,a[u]){case De.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let b=new he;u=De.textCompaction(a,u+1,b),d.setFileName(b.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new he;u=De.textCompaction(a,u+1,x),d.setSender(x.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new he;u=De.textCompaction(a,u+1,A),d.setAddressee(A.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new he;u=De.numericCompaction(a,u+1,_),d.setSegmentCount(V.parseInt(_.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new he;u=De.numericCompaction(a,u+1,M),d.setTimestamp(wn.parseLong(M.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new he;u=De.numericCompaction(a,u+1,L),d.setChecksum(V.parseInt(L.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let U=new he;u=De.numericCompaction(a,u+1,U),d.setFileSize(wn.parseLong(U.toString()));break;default:throw F.getFormatInstance()}break;case De.MACRO_PDF417_TERMINATOR:u++,d.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(f!==-1){let b=u-f;d.isLastSegment()&&b--,d.setOptionalData(H.copyOfRange(a,f,f+b))}return u}static textCompaction(a,u,d){let v=new Int32Array((a[0]-u)*2),c=new Int32Array((a[0]-u)*2),f=0,b=!1;for(;u<a[0]&&!b;){let x=a[u++];if(x<De.TEXT_COMPACTION_MODE_LATCH)v[f]=x/30,v[f+1]=x%30,f+=2;else switch(x){case De.TEXT_COMPACTION_MODE_LATCH:v[f++]=De.TEXT_COMPACTION_MODE_LATCH;break;case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:u--,b=!0;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v[f]=De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=a[u++],c[f]=x,f++;break}}return De.decodeTextCompaction(v,c,f,d),u}static decodeTextCompaction(a,u,d,v){let c=Pt.ALPHA,f=Pt.ALPHA,b=0;for(;b<d;){let x=a[b],A="";switch(c){case Pt.ALPHA:if(x<26)A=String.fromCharCode(65+x);else switch(x){case 26:A=" ";break;case De.LL:c=Pt.LOWER;break;case De.ML:c=Pt.MIXED;break;case De.PS:f=c,c=Pt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(u[b]);break;case De.TEXT_COMPACTION_MODE_LATCH:c=Pt.ALPHA;break}break;case Pt.LOWER:if(x<26)A=String.fromCharCode(97+x);else switch(x){case 26:A=" ";break;case De.AS:f=c,c=Pt.ALPHA_SHIFT;break;case De.ML:c=Pt.MIXED;break;case De.PS:f=c,c=Pt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(u[b]);break;case De.TEXT_COMPACTION_MODE_LATCH:c=Pt.ALPHA;break}break;case Pt.MIXED:if(x<De.PL)A=De.MIXED_CHARS[x];else switch(x){case De.PL:c=Pt.PUNCT;break;case 26:A=" ";break;case De.LL:c=Pt.LOWER;break;case De.AL:c=Pt.ALPHA;break;case De.PS:f=c,c=Pt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(u[b]);break;case De.TEXT_COMPACTION_MODE_LATCH:c=Pt.ALPHA;break}break;case Pt.PUNCT:if(x<De.PAL)A=De.PUNCT_CHARS[x];else switch(x){case De.PAL:c=Pt.ALPHA;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(u[b]);break;case De.TEXT_COMPACTION_MODE_LATCH:c=Pt.ALPHA;break}break;case Pt.ALPHA_SHIFT:if(c=f,x<26)A=String.fromCharCode(65+x);else switch(x){case 26:A=" ";break;case De.TEXT_COMPACTION_MODE_LATCH:c=Pt.ALPHA;break}break;case Pt.PUNCT_SHIFT:if(c=f,x<De.PAL)A=De.PUNCT_CHARS[x];else switch(x){case De.PAL:c=Pt.ALPHA;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(u[b]);break;case De.TEXT_COMPACTION_MODE_LATCH:c=Pt.ALPHA;break}break}A!==""&&v.append(A),b++}}static byteCompaction(a,u,d,v,c){let f=new Rr,b=0,x=0,A=!1;switch(a){case De.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),M=u[v++];for(;v<u[0]&&!A;)switch(_[b++]=M,x=900*x+M,M=u[v++],M){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:v--,A=!0;break;default:if(b%5===0&&b>0){for(let L=0;L<6;++L)f.write(Number(Br(x)>>Br(8*(5-L))));x=0,b=0}break}v===u[0]&&M<De.TEXT_COMPACTION_MODE_LATCH&&(_[b++]=M);for(let L=0;L<b;L++)f.write(_[L]);break;case De.BYTE_COMPACTION_MODE_LATCH_6:for(;v<u[0]&&!A;){let L=u[v++];if(L<De.TEXT_COMPACTION_MODE_LATCH)b++,x=900*x+L;else switch(L){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:v--,A=!0;break}if(b%5===0&&b>0){for(let U=0;U<6;++U)f.write(Number(Br(x)>>Br(8*(5-U))));x=0,b=0}}break}return c.append(Q.decode(f.toByteArray(),d)),v}static numericCompaction(a,u,d){let v=0,c=!1,f=new Int32Array(De.MAX_NUMERIC_CODEWORDS);for(;u<a[0]&&!c;){let b=a[u++];if(u===a[0]&&(c=!0),b<De.TEXT_COMPACTION_MODE_LATCH)f[v]=b,v++;else switch(b){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:u--,c=!0;break}(v%De.MAX_NUMERIC_CODEWORDS===0||b===De.NUMERIC_COMPACTION_MODE_LATCH||c)&&v>0&&(d.append(De.decodeBase900toBase10(f,v)),v=0)}return u}static decodeBase900toBase10(a,u){let d=Br(0);for(let c=0;c<u;c++)d+=De.EXP900[u-c-1]*Br(a[c]);let v=d.toString();if(v.charAt(0)!=="1")throw new F;return v.substring(1)}}De.TEXT_COMPACTION_MODE_LATCH=900,De.BYTE_COMPACTION_MODE_LATCH=901,De.NUMERIC_COMPACTION_MODE_LATCH=902,De.BYTE_COMPACTION_MODE_LATCH_6=924,De.ECI_USER_DEFINED=925,De.ECI_GENERAL_PURPOSE=926,De.ECI_CHARSET=927,De.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,De.MACRO_PDF417_TERMINATOR=922,De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,De.MAX_NUMERIC_CODEWORDS=15,De.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,De.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,De.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,De.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,De.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,De.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,De.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,De.PL=25,De.LL=27,De.AS=27,De.ML=28,De.AL=28,De.PS=29,De.PAL=29,De.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,De.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",De.EXP900=Tr()?Ii():[],De.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Xt{constructor(){}static decode(a,u,d,v,c,f,b){let x=new Gr(a,u,d,v,c),A=null,_=null,M;for(let q=!0;;q=!1){if(u!=null&&(A=Xt.getRowIndicatorColumn(a,x,u,!0,f,b)),v!=null&&(_=Xt.getRowIndicatorColumn(a,x,v,!1,f,b)),M=Xt.merge(A,_),M==null)throw ie.getNotFoundInstance();let K=M.getBoundingBox();if(q&&K!=null&&(K.getMinY()<x.getMinY()||K.getMaxY()>x.getMaxY()))x=K;else break}M.setBoundingBox(x);let L=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,A),M.setDetectionResultColumn(L,_);let U=A!=null;for(let q=1;q<=L;q++){let K=U?q:L-q;if(M.getDetectionResultColumn(K)!==void 0)continue;let G;K===0||K===L?G=new ge(x,K===0):G=new k(x),M.setDetectionResultColumn(K,G);let Z=-1,re=Z;for(let ae=x.getMinY();ae<=x.getMaxY();ae++){if(Z=Xt.getStartColumn(M,K,ae,U),Z<0||Z>x.getMaxX()){if(re===-1)continue;Z=re}let le=Xt.detectCodeword(a,x.getMinX(),x.getMaxX(),U,Z,ae,f,b);le!=null&&(G.setCodeword(ae,le),re=Z,f=Math.min(f,le.getWidth()),b=Math.max(b,le.getWidth()))}}return Xt.createDecoderResult(M)}static merge(a,u){if(a==null&&u==null)return null;let d=Xt.getBarcodeMetadata(a,u);if(d==null)return null;let v=Gr.merge(Xt.adjustBoundingBox(a),Xt.adjustBoundingBox(u));return new je(d,v)}static adjustBoundingBox(a){if(a==null)return null;let u=a.getRowHeights();if(u==null)return null;let d=Xt.getMax(u),v=0;for(let b of u)if(v+=d-b,b>0)break;let c=a.getCodewords();for(let b=0;v>0&&c[b]==null;b++)v--;let f=0;for(let b=u.length-1;b>=0&&(f+=d-u[b],!(u[b]>0));b--);for(let b=c.length-1;f>0&&c[b]==null;b--)f--;return a.getBoundingBox().addMissingRows(v,f,a.isLeft())}static getMax(a){let u=-1;for(let d of a)u=Math.max(u,d);return u}static getBarcodeMetadata(a,u){let d;if(a==null||(d=a.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let v;return u==null||(v=u.getBarcodeMetadata())==null?d:d.getColumnCount()!==v.getColumnCount()&&d.getErrorCorrectionLevel()!==v.getErrorCorrectionLevel()&&d.getRowCount()!==v.getRowCount()?null:d}static getRowIndicatorColumn(a,u,d,v,c,f){let b=new ge(u,v);for(let x=0;x<2;x++){let A=x===0?1:-1,_=Math.trunc(Math.trunc(d.getX()));for(let M=Math.trunc(Math.trunc(d.getY()));M<=u.getMaxY()&&M>=u.getMinY();M+=A){let L=Xt.detectCodeword(a,0,a.getWidth(),v,_,M,c,f);L!=null&&(b.setCodeword(M,L),v?_=L.getStartX():_=L.getEndX())}}return b}static adjustCodewordCount(a,u){let d=u[0][1],v=d.getValue(),c=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-Xt.getNumberOfECCodeWords(a.getBarcodeECLevel());if(v.length===0){if(c<1||c>_t.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();d.setValue(c)}else v[0]!==c&&d.setValue(c)}static createDecoderResult(a){let u=Xt.createBarcodeMatrix(a);Xt.adjustCodewordCount(a,u);let d=new Array,v=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),c=[],f=new Array;for(let x=0;x<a.getBarcodeRowCount();x++)for(let A=0;A<a.getBarcodeColumnCount();A++){let _=u[x][A+1].getValue(),M=x*a.getBarcodeColumnCount()+A;_.length===0?d.push(M):_.length===1?v[M]=_[0]:(f.push(M),c.push(_))}let b=new Array(c.length);for(let x=0;x<b.length;x++)b[x]=c[x];return Xt.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),v,_t.toIntArray(d),_t.toIntArray(f),b)}static createDecoderResultFromAmbiguousValues(a,u,d,v,c){let f=new Int32Array(v.length),b=100;for(;b-- >0;){for(let x=0;x<f.length;x++)u[v[x]]=c[x][f[x]];try{return Xt.decodeCodewords(u,a,d)}catch(x){if(!(x instanceof I))throw x}if(f.length===0)throw I.getChecksumInstance();for(let x=0;x<f.length;x++)if(f[x]<c[x].length-1){f[x]++;break}else if(f[x]=0,x===f.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(a){let u=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let v=0;v<u.length;v++)for(let c=0;c<u[v].length;c++)u[v][c]=new X;let d=0;for(let v of a.getDetectionResultColumns()){if(v!=null){for(let c of v.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=0){if(f>=u.length)continue;u[f][d].setValue(c.getValue())}}}d++}return u}static isValidBarcodeColumn(a,u){return u>=0&&u<=a.getBarcodeColumnCount()+1}static getStartColumn(a,u,d,v){let c=v?1:-1,f=null;if(Xt.isValidBarcodeColumn(a,u-c)&&(f=a.getDetectionResultColumn(u-c).getCodeword(d)),f!=null)return v?f.getEndX():f.getStartX();if(f=a.getDetectionResultColumn(u).getCodewordNearby(d),f!=null)return v?f.getStartX():f.getEndX();if(Xt.isValidBarcodeColumn(a,u-c)&&(f=a.getDetectionResultColumn(u-c).getCodewordNearby(d)),f!=null)return v?f.getEndX():f.getStartX();let b=0;for(;Xt.isValidBarcodeColumn(a,u-c);){u-=c;for(let x of a.getDetectionResultColumn(u).getCodewords())if(x!=null)return(v?x.getEndX():x.getStartX())+c*b*(x.getEndX()-x.getStartX());b++}return v?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,u,d,v,c,f,b,x){c=Xt.adjustCodewordStartColumn(a,u,d,v,c,f);let A=Xt.getModuleBitCount(a,u,d,v,c,f);if(A==null)return null;let _,M=tn.sum(A);if(v)_=c+M;else{for(let q=0;q<A.length/2;q++){let K=A[q];A[q]=A[A.length-1-q],A[A.length-1-q]=K}_=c,c=_-M}if(!Xt.checkCodewordSkew(M,b,x))return null;let L=pt.getDecodedValue(A),U=_t.getCodeword(L);return U===-1?null:new It(c,_,Xt.getCodewordBucketNumber(L),U)}static getModuleBitCount(a,u,d,v,c,f){let b=c,x=new Int32Array(8),A=0,_=v?1:-1,M=v;for(;(v?b<d:b>=u)&&A<x.length;)a.get(b,f)===M?(x[A]++,b+=_):(A++,M=!M);return A===x.length||b===(v?d:u)&&A===x.length-1?x:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,u,d,v,c,f){let b=c,x=v?-1:1;for(let A=0;A<2;A++){for(;(v?b>=u:b<d)&&v===a.get(b,f);){if(Math.abs(c-b)>Xt.CODEWORD_SKEW_SIZE)return c;b+=x}x=-x,v=!v}return b}static checkCodewordSkew(a,u,d){return u-Xt.CODEWORD_SKEW_SIZE<=a&&a<=d+Xt.CODEWORD_SKEW_SIZE}static decodeCodewords(a,u,d){if(a.length===0)throw F.getFormatInstance();let v=1<<u+1,c=Xt.correctErrors(a,d,v);Xt.verifyCodewordCount(a,v);let f=De.decode(a,""+u);return f.setErrorsCorrected(c),f.setErasures(d.length),f}static correctErrors(a,u,d){if(u!=null&&u.length>d/2+Xt.MAX_ERRORS||d<0||d>Xt.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return Xt.errorCorrection.decode(a,d,u)}static verifyCodewordCount(a,u){if(a.length<4)throw F.getFormatInstance();let d=a[0];if(d>a.length)throw F.getFormatInstance();if(d===0)if(u<a.length)a[0]=a.length-u;else throw F.getFormatInstance()}static getBitCountForCodeword(a){let u=new Int32Array(8),d=0,v=u.length-1;for(;!((a&1)!==d&&(d=a&1,v--,v<0));)u[v]++,a>>=1;return u}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return Xt.getCodewordBucketNumber(Xt.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let u=new ns;for(let d=0;d<a.length;d++){u.format("Row %2d: ",d);for(let v=0;v<a[d].length;v++){let c=a[d][v];c.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}u.format("%n")}return u.toString()}}Xt.CODEWORD_SKEW_SIZE=2,Xt.MAX_ERRORS=3,Xt.MAX_EC_CODEWORDS=512,Xt.errorCorrection=new gi;class dr{decode(a,u=null){let d=dr.decode(a,u,!1);if(d==null||d.length===0||d[0]==null)throw ie.getNotFoundInstance();return d[0]}decodeMultiple(a,u=null){try{return dr.decode(a,u,!0)}catch(d){throw d instanceof F||d instanceof I?ie.getNotFoundInstance():d}}static decode(a,u,d){const v=new Array,c=zt.detectMultiple(a,u,d);for(const f of c.getPoints()){const b=Xt.decode(c.getBits(),f[4],f[5],f[6],f[7],dr.getMinCodewordWidth(f),dr.getMaxCodewordWidth(f)),x=new ke(b.getText(),b.getRawBytes(),void 0,f,Fe.PDF_417);x.putMetadata(dt.ERROR_CORRECTION_LEVEL,b.getECLevel());const A=b.getOther();A!=null&&x.putMetadata(dt.PDF417_EXTRA_METADATA,A),v.push(x)}return v.map(f=>f)}static getMaxWidth(a,u){return a==null||u==null?0:Math.trunc(Math.abs(a.getX()-u.getX()))}static getMinWidth(a,u){return a==null||u==null?V.MAX_VALUE:Math.trunc(Math.abs(a.getX()-u.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(dr.getMaxWidth(a[0],a[4]),dr.getMaxWidth(a[6],a[2])*_t.MODULES_IN_CODEWORD/_t.MODULES_IN_STOP_PATTERN),Math.max(dr.getMaxWidth(a[1],a[5]),dr.getMaxWidth(a[7],a[3])*_t.MODULES_IN_CODEWORD/_t.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(dr.getMinWidth(a[0],a[4]),dr.getMinWidth(a[6],a[2])*_t.MODULES_IN_CODEWORD/_t.MODULES_IN_STOP_PATTERN),Math.min(dr.getMinWidth(a[1],a[5]),dr.getMinWidth(a[7],a[3])*_t.MODULES_IN_CODEWORD/_t.MODULES_IN_STOP_PATTERN)))}reset(){}}class rs extends g{}rs.kind="ReaderException";class el{constructor(a,u){this.verbose=a===!0,u&&this.setHints(u)}decode(a,u){return u&&this.setHints(u),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const u=!r(a)&&a.get(J.TRY_HARDER)===!0,d=r(a)?null:a.get(J.POSSIBLE_FORMATS),v=new Array;if(!r(d)){const c=d.some(f=>f===Fe.UPC_A||f===Fe.UPC_E||f===Fe.EAN_13||f===Fe.EAN_8||f===Fe.CODABAR||f===Fe.CODE_39||f===Fe.CODE_93||f===Fe.CODE_128||f===Fe.ITF||f===Fe.RSS_14||f===Fe.RSS_EXPANDED);c&&!u&&v.push(new Un(a,this.verbose)),d.includes(Fe.QR_CODE)&&v.push(new qr),d.includes(Fe.DATA_MATRIX)&&v.push(new mi),d.includes(Fe.AZTEC)&&v.push(new si),d.includes(Fe.PDF_417)&&v.push(new dr),c&&u&&v.push(new Un(a,this.verbose))}v.length===0&&(u||v.push(new Un(a,this.verbose)),v.push(new qr),v.push(new mi),v.push(new si),v.push(new dr),u&&v.push(new Un(a,this.verbose))),this.readers=v}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new rs("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(a,this.hints)}catch(d){if(d instanceof rs)continue}throw new ie("No MultiFormat Readers were able to detect the code.")}}class tl extends Ce{constructor(a=null,u=500){const d=new el;d.setHints(a),super(d,u)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class yi extends Ce{constructor(a=500){super(new dr,a)}}class go extends Ce{constructor(a=500){super(new qr,a)}}var Sa;(function(z){z[z.ERROR_CORRECTION=0]="ERROR_CORRECTION",z[z.CHARACTER_SET=1]="CHARACTER_SET",z[z.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",z[z.MIN_SIZE=3]="MIN_SIZE",z[z.MAX_SIZE=4]="MAX_SIZE",z[z.MARGIN=5]="MARGIN",z[z.PDF417_COMPACT=6]="PDF417_COMPACT",z[z.PDF417_COMPACTION=7]="PDF417_COMPACTION",z[z.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",z[z.AZTEC_LAYERS=9]="AZTEC_LAYERS",z[z.QR_VERSION=10]="QR_VERSION"})(Sa||(Sa={}));var Pr=Sa;class Qs{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new kt(a,Int32Array.from([1])))}buildGenerator(a){const u=this.cachedGenerators;if(a>=u.length){let d=u[u.length-1];const v=this.field;for(let c=u.length;c<=a;c++){const f=d.multiply(new kt(v,Int32Array.from([1,v.exp(c-1+v.getGeneratorBase())])));u.push(f),d=f}}return u[a]}encode(a,u){if(u===0)throw new S("No error correction bytes");const d=a.length-u;if(d<=0)throw new S("No data bytes provided");const v=this.buildGenerator(u),c=new Int32Array(d);D.arraycopy(a,0,c,0,d);let f=new kt(this.field,c);f=f.multiplyByMonomial(u,1);const x=f.divide(v)[1].getCoefficients(),A=u-x.length;for(let _=0;_<A;_++)a[d+_]=0;D.arraycopy(x,0,a,d+A,x.length)}}class xr{constructor(){}static applyMaskPenaltyRule1(a){return xr.applyMaskPenaltyRule1Internal(a,!0)+xr.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let u=0;const d=a.getArray(),v=a.getWidth(),c=a.getHeight();for(let f=0;f<c-1;f++){const b=d[f];for(let x=0;x<v-1;x++){const A=b[x];A===b[x+1]&&A===d[f+1][x]&&A===d[f+1][x+1]&&u++}}return xr.N2*u}static applyMaskPenaltyRule3(a){let u=0;const d=a.getArray(),v=a.getWidth(),c=a.getHeight();for(let f=0;f<c;f++)for(let b=0;b<v;b++){const x=d[f];b+6<v&&x[b]===1&&x[b+1]===0&&x[b+2]===1&&x[b+3]===1&&x[b+4]===1&&x[b+5]===0&&x[b+6]===1&&(xr.isWhiteHorizontal(x,b-4,b)||xr.isWhiteHorizontal(x,b+7,b+11))&&u++,f+6<c&&d[f][b]===1&&d[f+1][b]===0&&d[f+2][b]===1&&d[f+3][b]===1&&d[f+4][b]===1&&d[f+5][b]===0&&d[f+6][b]===1&&(xr.isWhiteVertical(d,b,f-4,f)||xr.isWhiteVertical(d,b,f+7,f+11))&&u++}return u*xr.N3}static isWhiteHorizontal(a,u,d){u=Math.max(u,0),d=Math.min(d,a.length);for(let v=u;v<d;v++)if(a[v]===1)return!1;return!0}static isWhiteVertical(a,u,d,v){d=Math.max(d,0),v=Math.min(v,a.length);for(let c=d;c<v;c++)if(a[c][u]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let u=0;const d=a.getArray(),v=a.getWidth(),c=a.getHeight();for(let x=0;x<c;x++){const A=d[x];for(let _=0;_<v;_++)A[_]===1&&u++}const f=a.getHeight()*a.getWidth();return Math.floor(Math.abs(u*2-f)*10/f)*xr.N4}static getDataMaskBit(a,u,d){let v,c;switch(a){case 0:v=d+u&1;break;case 1:v=d&1;break;case 2:v=u%3;break;case 3:v=(d+u)%3;break;case 4:v=Math.floor(d/2)+Math.floor(u/3)&1;break;case 5:c=d*u,v=(c&1)+c%3;break;case 6:c=d*u,v=(c&1)+c%3&1;break;case 7:c=d*u,v=c%3+(d+u&1)&1;break;default:throw new S("Invalid mask pattern: "+a)}return v===0}static applyMaskPenaltyRule1Internal(a,u){let d=0;const v=u?a.getHeight():a.getWidth(),c=u?a.getWidth():a.getHeight(),f=a.getArray();for(let b=0;b<v;b++){let x=0,A=-1;for(let _=0;_<c;_++){const M=u?f[b][_]:f[_][b];M===A?x++:(x>=5&&(d+=xr.N1+(x-5)),x=1,A=M)}x>=5&&(d+=xr.N1+(x-5))}return d}}xr.N1=3,xr.N2=3,xr.N3=40,xr.N4=10;class yo{constructor(a,u){this.width=a,this.height=u;const d=new Array(u);for(let v=0;v!==u;v++)d[v]=new Uint8Array(a);this.bytes=d}getHeight(){return this.height}getWidth(){return this.width}get(a,u){return this.bytes[u][a]}getArray(){return this.bytes}setNumber(a,u,d){this.bytes[u][a]=d}setBoolean(a,u,d){this.bytes[u][a]=d?1:0}clear(a){for(const u of this.bytes)H.fill(u,a)}equals(a){if(!(a instanceof yo))return!1;const u=a;if(this.width!==u.width||this.height!==u.height)return!1;for(let d=0,v=this.height;d<v;++d){const c=this.bytes[d],f=u.bytes[d];for(let b=0,x=this.width;b<x;++b)if(c[b]!==f[b])return!1}return!0}toString(){const a=new he;for(let u=0,d=this.height;u<d;++u){const v=this.bytes[u];for(let c=0,f=this.width;c<f;++c)switch(v[c]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class ys{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new he;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<ys.NUM_MASK_PATTERNS}}ys.NUM_MASK_PATTERNS=8;class Fn extends g{}Fn.kind="WriterException";class Rt{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,u,d,v,c){Rt.clearMatrix(c),Rt.embedBasicPatterns(d,c),Rt.embedTypeInfo(u,v,c),Rt.maybeEmbedVersionInfo(d,c),Rt.embedDataBits(a,v,c)}static embedBasicPatterns(a,u){Rt.embedPositionDetectionPatternsAndSeparators(u),Rt.embedDarkDotAtLeftBottomCorner(u),Rt.maybeEmbedPositionAdjustmentPatterns(a,u),Rt.embedTimingPatterns(u)}static embedTypeInfo(a,u,d){const v=new se;Rt.makeTypeInfoBits(a,u,v);for(let c=0,f=v.getSize();c<f;++c){const b=v.get(v.getSize()-1-c),x=Rt.TYPE_INFO_COORDINATES[c],A=x[0],_=x[1];if(d.setBoolean(A,_,b),c<8){const M=d.getWidth()-c-1;d.setBoolean(M,8,b)}else{const L=d.getHeight()-7+(c-8);d.setBoolean(8,L,b)}}}static maybeEmbedVersionInfo(a,u){if(a.getVersionNumber()<7)return;const d=new se;Rt.makeVersionInfoBits(a,d);let v=17;for(let c=0;c<6;++c)for(let f=0;f<3;++f){const b=d.get(v);v--,u.setBoolean(c,u.getHeight()-11+f,b),u.setBoolean(u.getHeight()-11+f,c,b)}}static embedDataBits(a,u,d){let v=0,c=-1,f=d.getWidth()-1,b=d.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);b>=0&&b<d.getHeight();){for(let x=0;x<2;++x){const A=f-x;if(!Rt.isEmpty(d.get(A,b)))continue;let _;v<a.getSize()?(_=a.get(v),++v):_=!1,u!==255&&xr.getDataMaskBit(u,A,b)&&(_=!_),d.setBoolean(A,b,_)}b+=c}c=-c,b+=c,f-=2}if(v!==a.getSize())throw new Fn("Not all bits consumed: "+v+"/"+a.getSize())}static findMSBSet(a){return 32-V.numberOfLeadingZeros(a)}static calculateBCHCode(a,u){if(u===0)throw new S("0 polynomial");const d=Rt.findMSBSet(u);for(a<<=d-1;Rt.findMSBSet(a)>=d;)a^=u<<Rt.findMSBSet(a)-d;return a}static makeTypeInfoBits(a,u,d){if(!ys.isValidMaskPattern(u))throw new Fn("Invalid mask pattern");const v=a.getBits()<<3|u;d.appendBits(v,5);const c=Rt.calculateBCHCode(v,Rt.TYPE_INFO_POLY);d.appendBits(c,10);const f=new se;if(f.appendBits(Rt.TYPE_INFO_MASK_PATTERN,15),d.xor(f),d.getSize()!==15)throw new Fn("should not happen but we got: "+d.getSize())}static makeVersionInfoBits(a,u){u.appendBits(a.getVersionNumber(),6);const d=Rt.calculateBCHCode(a.getVersionNumber(),Rt.VERSION_INFO_POLY);if(u.appendBits(d,12),u.getSize()!==18)throw new Fn("should not happen but we got: "+u.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let u=8;u<a.getWidth()-8;++u){const d=(u+1)%2;Rt.isEmpty(a.get(u,6))&&a.setNumber(u,6,d),Rt.isEmpty(a.get(6,u))&&a.setNumber(6,u,d)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new Fn;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,u,d){for(let v=0;v<8;++v){if(!Rt.isEmpty(d.get(a+v,u)))throw new Fn;d.setNumber(a+v,u,0)}}static embedVerticalSeparationPattern(a,u,d){for(let v=0;v<7;++v){if(!Rt.isEmpty(d.get(a,u+v)))throw new Fn;d.setNumber(a,u+v,0)}}static embedPositionAdjustmentPattern(a,u,d){for(let v=0;v<5;++v){const c=Rt.POSITION_ADJUSTMENT_PATTERN[v];for(let f=0;f<5;++f)d.setNumber(a+f,u+v,c[f])}}static embedPositionDetectionPattern(a,u,d){for(let v=0;v<7;++v){const c=Rt.POSITION_DETECTION_PATTERN[v];for(let f=0;f<7;++f)d.setNumber(a+f,u+v,c[f])}}static embedPositionDetectionPatternsAndSeparators(a){const u=Rt.POSITION_DETECTION_PATTERN[0].length;Rt.embedPositionDetectionPattern(0,0,a),Rt.embedPositionDetectionPattern(a.getWidth()-u,0,a),Rt.embedPositionDetectionPattern(0,a.getWidth()-u,a);const d=8;Rt.embedHorizontalSeparationPattern(0,d-1,a),Rt.embedHorizontalSeparationPattern(a.getWidth()-d,d-1,a),Rt.embedHorizontalSeparationPattern(0,a.getWidth()-d,a);const v=7;Rt.embedVerticalSeparationPattern(v,0,a),Rt.embedVerticalSeparationPattern(a.getHeight()-v-1,0,a),Rt.embedVerticalSeparationPattern(v,a.getHeight()-v,a)}static maybeEmbedPositionAdjustmentPatterns(a,u){if(a.getVersionNumber()<2)return;const d=a.getVersionNumber()-1,v=Rt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[d];for(let c=0,f=v.length;c!==f;c++){const b=v[c];if(b>=0)for(let x=0;x!==f;x++){const A=v[x];A>=0&&Rt.isEmpty(u.get(A,b))&&Rt.embedPositionAdjustmentPattern(A-2,b-2,u)}}}}Rt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Rt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Rt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Rt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Rt.VERSION_INFO_POLY=7973,Rt.TYPE_INFO_POLY=1335,Rt.TYPE_INFO_MASK_PATTERN=21522;class ic{constructor(a,u){this.dataBytes=a,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class $n{constructor(){}static calculateMaskPenalty(a){return xr.applyMaskPenaltyRule1(a)+xr.applyMaskPenaltyRule2(a)+xr.applyMaskPenaltyRule3(a)+xr.applyMaskPenaltyRule4(a)}static encode(a,u,d=null){let v=$n.DEFAULT_BYTE_MODE_ENCODING;const c=d!==null&&d.get(Pr.CHARACTER_SET)!==void 0;c&&(v=d.get(Pr.CHARACTER_SET).toString());const f=this.chooseMode(a,v),b=new se;if(f===At.BYTE&&(c||$n.DEFAULT_BYTE_MODE_ENCODING!==v)){const ae=de.getCharacterSetECIByName(v);ae!==void 0&&this.appendECI(ae,b)}this.appendModeInfo(f,b);const x=new se;this.appendBytes(a,f,x,v);let A;if(d!==null&&d.get(Pr.QR_VERSION)!==void 0){const ae=Number.parseInt(d.get(Pr.QR_VERSION).toString(),10);A=wt.getVersionForNumber(ae);const le=this.calculateBitsNeeded(f,b,x,A);if(!this.willFit(le,A,u))throw new Fn("Data too big for requested version")}else A=this.recommendVersion(u,f,b,x);const _=new se;_.appendBitArray(b);const M=f===At.BYTE?x.getSizeInBytes():a.length;this.appendLengthInfo(M,A,f,_),_.appendBitArray(x);const L=A.getECBlocksForLevel(u),U=A.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(U,_);const q=this.interleaveWithECBytes(_,A.getTotalCodewords(),U,L.getNumBlocks()),K=new ys;K.setECLevel(u),K.setMode(f),K.setVersion(A);const G=A.getDimensionForVersion(),Z=new yo(G,G),re=this.chooseMaskPattern(q,u,A,Z);return K.setMaskPattern(re),Rt.buildMatrix(q,u,A,re,Z),K.setMatrix(Z),K}static recommendVersion(a,u,d,v){const c=this.calculateBitsNeeded(u,d,v,wt.getVersionForNumber(1)),f=this.chooseVersion(c,a),b=this.calculateBitsNeeded(u,d,v,f);return this.chooseVersion(b,a)}static calculateBitsNeeded(a,u,d,v){return u.getSize()+a.getCharacterCountBits(v)+d.getSize()}static getAlphanumericCode(a){return a<$n.ALPHANUMERIC_TABLE.length?$n.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,u=null){if(de.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(a))return At.KANJI;let d=!1,v=!1;for(let c=0,f=a.length;c<f;++c){const b=a.charAt(c);if($n.isDigit(b))d=!0;else if(this.getAlphanumericCode(b.charCodeAt(0))!==-1)v=!0;else return At.BYTE}return v?At.ALPHANUMERIC:d?At.NUMERIC:At.BYTE}static isOnlyDoubleByteKanji(a){let u;try{u=Q.encode(a,de.SJIS)}catch{return!1}const d=u.length;if(d%2!==0)return!1;for(let v=0;v<d;v+=2){const c=u[v]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(a,u,d,v){let c=Number.MAX_SAFE_INTEGER,f=-1;for(let b=0;b<ys.NUM_MASK_PATTERNS;b++){Rt.buildMatrix(a,u,d,b,v);let x=this.calculateMaskPenalty(v);x<c&&(c=x,f=b)}return f}static chooseVersion(a,u){for(let d=1;d<=40;d++){const v=wt.getVersionForNumber(d);if($n.willFit(a,v,u))return v}throw new Fn("Data too big")}static willFit(a,u,d){const v=u.getTotalCodewords(),f=u.getECBlocksForLevel(d).getTotalECCodewords(),b=v-f,x=(a+7)/8;return b>=x}static terminateBits(a,u){const d=a*8;if(u.getSize()>d)throw new Fn("data bits cannot fit in the QR Code"+u.getSize()+" > "+d);for(let f=0;f<4&&u.getSize()<d;++f)u.appendBit(!1);const v=u.getSize()&7;if(v>0)for(let f=v;f<8;f++)u.appendBit(!1);const c=a-u.getSizeInBytes();for(let f=0;f<c;++f)u.appendBits((f&1)===0?236:17,8);if(u.getSize()!==d)throw new Fn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,u,d,v,c,f){if(v>=d)throw new Fn("Block ID too large");const b=a%d,x=d-b,A=Math.floor(a/d),_=A+1,M=Math.floor(u/d),L=M+1,U=A-M,q=_-L;if(U!==q)throw new Fn("EC bytes mismatch");if(d!==x+b)throw new Fn("RS blocks mismatch");if(a!==(M+U)*x+(L+q)*b)throw new Fn("Total bytes mismatch");v<x?(c[0]=M,f[0]=U):(c[0]=L,f[0]=q)}static interleaveWithECBytes(a,u,d,v){if(a.getSizeInBytes()!==d)throw new Fn("Number of bits and data bytes does not match");let c=0,f=0,b=0;const x=new Array;for(let _=0;_<v;++_){const M=new Int32Array(1),L=new Int32Array(1);$n.getNumDataBytesAndNumECBytesForBlockID(u,d,v,_,M,L);const U=M[0],q=new Uint8Array(U);a.toBytes(8*c,q,0,U);const K=$n.generateECBytes(q,L[0]);x.push(new ic(q,K)),f=Math.max(f,U),b=Math.max(b,K.length),c+=M[0]}if(d!==c)throw new Fn("Data bytes does not match offset");const A=new se;for(let _=0;_<f;++_)for(const M of x){const L=M.getDataBytes();_<L.length&&A.appendBits(L[_],8)}for(let _=0;_<b;++_)for(const M of x){const L=M.getErrorCorrectionBytes();_<L.length&&A.appendBits(L[_],8)}if(u!==A.getSizeInBytes())throw new Fn("Interleaving error: "+u+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(a,u){const d=a.length,v=new Int32Array(d+u);for(let f=0;f<d;f++)v[f]=a[f]&255;new Qs(mt.QR_CODE_FIELD_256).encode(v,u);const c=new Uint8Array(u);for(let f=0;f<u;f++)c[f]=v[d+f];return c}static appendModeInfo(a,u){u.appendBits(a.getBits(),4)}static appendLengthInfo(a,u,d,v){const c=d.getCharacterCountBits(u);if(a>=1<<c)throw new Fn(a+" is bigger than "+((1<<c)-1));v.appendBits(a,c)}static appendBytes(a,u,d,v){switch(u){case At.NUMERIC:$n.appendNumericBytes(a,d);break;case At.ALPHANUMERIC:$n.appendAlphanumericBytes(a,d);break;case At.BYTE:$n.append8BitBytes(a,d,v);break;case At.KANJI:$n.appendKanjiBytes(a,d);break;default:throw new Fn("Invalid mode: "+u)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const u=$n.getDigit(a);return u>=0&&u<=9}static appendNumericBytes(a,u){const d=a.length;let v=0;for(;v<d;){const c=$n.getDigit(a.charAt(v));if(v+2<d){const f=$n.getDigit(a.charAt(v+1)),b=$n.getDigit(a.charAt(v+2));u.appendBits(c*100+f*10+b,10),v+=3}else if(v+1<d){const f=$n.getDigit(a.charAt(v+1));u.appendBits(c*10+f,7),v+=2}else u.appendBits(c,4),v++}}static appendAlphanumericBytes(a,u){const d=a.length;let v=0;for(;v<d;){const c=$n.getAlphanumericCode(a.charCodeAt(v));if(c===-1)throw new Fn;if(v+1<d){const f=$n.getAlphanumericCode(a.charCodeAt(v+1));if(f===-1)throw new Fn;u.appendBits(c*45+f,11),v+=2}else u.appendBits(c,6),v++}}static append8BitBytes(a,u,d){let v;try{v=Q.encode(a,d)}catch(c){throw new Fn(c)}for(let c=0,f=v.length;c!==f;c++){const b=v[c];u.appendBits(b,8)}}static appendKanjiBytes(a,u){let d;try{d=Q.encode(a,de.SJIS)}catch(c){throw new Fn(c)}const v=d.length;for(let c=0;c<v;c+=2){const f=d[c]&255,b=d[c+1]&255,x=f<<8&4294967295|b;let A=-1;if(x>=33088&&x<=40956?A=x-33088:x>=57408&&x<=60351&&(A=x-49472),A===-1)throw new Fn("Invalid byte sequence");const _=(A>>8)*192+(A&255);u.appendBits(_,13)}}static appendECI(a,u){u.appendBits(At.ECI.getBits(),4),u.appendBits(a.getValue(),8)}}$n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),$n.DEFAULT_BYTE_MODE_ENCODING=de.UTF8.getName();class vs{write(a,u,d,v=null){if(a.length===0)throw new S("Found empty contents");if(u<0||d<0)throw new S("Requested dimensions are too small: "+u+"x"+d);let c=rn.L,f=vs.QUIET_ZONE_SIZE;v!==null&&(v.get(Pr.ERROR_CORRECTION)!==void 0&&(c=rn.fromString(v.get(Pr.ERROR_CORRECTION).toString())),v.get(Pr.MARGIN)!==void 0&&(f=Number.parseInt(v.get(Pr.MARGIN).toString(),10)));const b=$n.encode(a,c,v);return this.renderResult(b,u,d,f)}writeToDom(a,u,d,v,c=null){typeof a=="string"&&(a=document.querySelector(a));const f=this.write(u,d,v,c);a&&a.appendChild(f)}renderResult(a,u,d,v){const c=a.getMatrix();if(c===null)throw new mn;const f=c.getWidth(),b=c.getHeight(),x=f+v*2,A=b+v*2,_=Math.max(u,x),M=Math.max(d,A),L=Math.min(Math.floor(_/x),Math.floor(M/A)),U=Math.floor((_-f*L)/2),q=Math.floor((M-b*L)/2),K=this.createSVGElement(_,M);for(let G=0,Z=q;G<b;G++,Z+=L)for(let re=0,ae=U;re<f;re++,ae+=L)if(c.get(re,G)===1){const le=this.createSvgRectElement(ae,Z,L,L);K.appendChild(le)}return K}createSVGElement(a,u){const d=document.createElementNS(vs.SVG_NS,"svg");return d.setAttributeNS(null,"height",a.toString()),d.setAttributeNS(null,"width",u.toString()),d}createSvgRectElement(a,u,d,v){const c=document.createElementNS(vs.SVG_NS,"rect");return c.setAttributeNS(null,"x",a.toString()),c.setAttributeNS(null,"y",u.toString()),c.setAttributeNS(null,"height",d.toString()),c.setAttributeNS(null,"width",v.toString()),c.setAttributeNS(null,"fill","#000000"),c}}vs.QUIET_ZONE_SIZE=4,vs.SVG_NS="http://www.w3.org/2000/svg";class Zs{encode(a,u,d,v,c){if(a.length===0)throw new S("Found empty contents");if(u!==Fe.QR_CODE)throw new S("Can only encode QR_CODE, but got "+u);if(d<0||v<0)throw new S(`Requested dimensions are too small: ${d}x${v}`);let f=rn.L,b=Zs.QUIET_ZONE_SIZE;c!==null&&(c.get(Pr.ERROR_CORRECTION)!==void 0&&(f=rn.fromString(c.get(Pr.ERROR_CORRECTION).toString())),c.get(Pr.MARGIN)!==void 0&&(b=Number.parseInt(c.get(Pr.MARGIN).toString(),10)));const x=$n.encode(a,f,c);return Zs.renderResult(x,d,v,b)}static renderResult(a,u,d,v){const c=a.getMatrix();if(c===null)throw new mn;const f=c.getWidth(),b=c.getHeight(),x=f+v*2,A=b+v*2,_=Math.max(u,x),M=Math.max(d,A),L=Math.min(Math.floor(_/x),Math.floor(M/A)),U=Math.floor((_-f*L)/2),q=Math.floor((M-b*L)/2),K=new Ne(_,M);for(let G=0,Z=q;G<b;G++,Z+=L)for(let re=0,ae=U;re<f;re++,ae+=L)c.get(re,G)===1&&K.setRegion(ae,Z,L,L);return K}}Zs.QUIET_ZONE_SIZE=4;class eu{encode(a,u,d,v,c){let f;if(u===Fe.QR_CODE)f=new Zs;else throw new S("No encoder available for format "+u);return f.encode(a,u,d,v,c)}}class bs extends ve{constructor(a,u,d,v,c,f,b,x){if(super(f,b),this.yuvData=a,this.dataWidth=u,this.dataHeight=d,this.left=v,this.top=c,v+f>u||c+b>d)throw new S("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(f,b)}getRow(a,u){if(a<0||a>=this.getHeight())throw new S("Requested row is outside the image: "+a);const d=this.getWidth();(u==null||u.length<d)&&(u=new Uint8ClampedArray(d));const v=(a+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,v,u,0,d),u}getMatrix(){const a=this.getWidth(),u=this.getHeight();if(a===this.dataWidth&&u===this.dataHeight)return this.yuvData;const d=a*u,v=new Uint8ClampedArray(d);let c=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return D.arraycopy(this.yuvData,c,v,0,d),v;for(let f=0;f<u;f++){const b=f*a;D.arraycopy(this.yuvData,c,v,b,a),c+=this.dataWidth}return v}isCropSupported(){return!0}crop(a,u,d,v){return new bs(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+u,d,v,!1)}renderThumbnail(){const a=this.getWidth()/bs.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/bs.THUMBNAIL_SCALE_FACTOR,d=new Int32Array(a*u),v=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let f=0;f<u;f++){const b=f*a;for(let x=0;x<a;x++){const A=v[c+x*bs.THUMBNAIL_SCALE_FACTOR]&255;d[b+x]=4278190080|A*65793}c+=this.dataWidth*bs.THUMBNAIL_SCALE_FACTOR}return d}getThumbnailWidth(){return this.getWidth()/bs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/bs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,u){const d=this.yuvData;for(let v=0,c=this.top*this.dataWidth+this.left;v<u;v++,c+=this.dataWidth){const f=c+a/2;for(let b=c,x=c+a-1;b<f;b++,x--){const A=d[b];d[b]=d[x],d[x]=A}}}invert(){return new Ee(this)}}bs.THUMBNAIL_SCALE_FACTOR=2;class vo extends ve{constructor(a,u,d,v,c,f,b){if(super(u,d),this.dataWidth=v,this.dataHeight=c,this.left=f,this.top=b,a.BYTES_PER_ELEMENT===4){const x=u*d,A=new Uint8ClampedArray(x);for(let _=0;_<x;_++){const M=a[_],L=M>>16&255,U=M>>7&510,q=M&255;A[_]=(L+U+q)/4&255}this.luminances=A}else this.luminances=a;if(v===void 0&&(this.dataWidth=u),c===void 0&&(this.dataHeight=d),f===void 0&&(this.left=0),b===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+d>this.dataHeight)throw new S("Crop rectangle does not fit within image data.")}getRow(a,u){if(a<0||a>=this.getHeight())throw new S("Requested row is outside the image: "+a);const d=this.getWidth();(u==null||u.length<d)&&(u=new Uint8ClampedArray(d));const v=(a+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,v,u,0,d),u}getMatrix(){const a=this.getWidth(),u=this.getHeight();if(a===this.dataWidth&&u===this.dataHeight)return this.luminances;const d=a*u,v=new Uint8ClampedArray(d);let c=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return D.arraycopy(this.luminances,c,v,0,d),v;for(let f=0;f<u;f++){const b=f*a;D.arraycopy(this.luminances,c,v,b,a),c+=this.dataWidth}return v}isCropSupported(){return!0}crop(a,u,d,v){return new vo(this.luminances,d,v,this.dataWidth,this.dataHeight,this.left+a,this.top+u)}invert(){return new Ee(this)}}class bo extends de{static forName(a){return this.getCharacterSetECIByName(a)}}class wo{}wo.ISO_8859_1=de.ISO8859_1;class Js{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class nl{static singletonList(a){return[a]}static min(a,u){return a.sort(u)[0]}}class tu{constructor(a){this.previous=a}getPrevious(){return this.previous}}class ea extends tu{constructor(a,u,d){super(a),this.value=u,this.bitCount=d}appendTo(a,u){a.appendBits(this.value,this.bitCount)}add(a,u){return new ea(this,a,u)}addBinaryShift(a,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ea(this,a,u)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+V.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class rl extends ea{constructor(a,u,d){super(a,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=d}appendTo(a,u){for(let d=0;d<this.binaryShiftByteCount;d++)(d===0||d===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):d===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(u[this.binaryShiftStart+d],8)}addBinaryShift(a,u){return new rl(this,a,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function sc(z,a,u){return new rl(z,a,u)}function Aa(z,a,u){return new ea(z,a,u)}const qa=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ns=0,Va=1,Pi=2,il=3,is=4,xo=new ea(null,0,0),Ca=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function sl(z){for(let a of z)H.fill(a,-1);return z[Ns][is]=0,z[Va][is]=0,z[Va][Ns]=28,z[il][is]=0,z[Pi][is]=0,z[Pi][Ns]=15,z}const Ui=sl(H.createInt32Array(6,6));class Bn{constructor(a,u,d,v){this.token=a,this.mode=u,this.binaryShiftByteCount=d,this.bitCount=v}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,u){let d=this.bitCount,v=this.token;if(a!==this.mode){let f=Ca[this.mode][a];v=Aa(v,f&65535,f>>16),d+=f>>16}let c=a===Pi?4:5;return v=Aa(v,u,c),new Bn(v,a,0,d+c)}shiftAndAppend(a,u){let d=this.token,v=this.mode===Pi?4:5;return d=Aa(d,Ui[this.mode][a],v),d=Aa(d,u,5),new Bn(d,this.mode,0,this.bitCount+v+5)}addBinaryShiftChar(a){let u=this.token,d=this.mode,v=this.bitCount;if(this.mode===is||this.mode===Pi){let b=Ca[d][Ns];u=Aa(u,b&65535,b>>16),v+=b>>16,d=Ns}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new Bn(u,d,this.binaryShiftByteCount+1,v+c);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(a+1)),f}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=sc(u,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new Bn(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let u=this.bitCount+(Ca[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?u+=Bn.calculateBinaryShiftCost(a)-Bn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(u+=10),u<=a.bitCount}toBitArray(a){let u=[];for(let v=this.endBinaryShift(a.length).token;v!==null;v=v.getPrevious())u.unshift(v);let d=new se;for(const v of u)v.appendTo(d,a);return d}toString(){return fe.format("%s bits=%d bytes=%d",qa[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}Bn.INITIAL_STATE=new Bn(xo,Ns,0,0);function Eo(z){const a=fe.getCharCode(" "),u=fe.getCharCode("."),d=fe.getCharCode(",");z[Ns][a]=1;const v=fe.getCharCode("Z"),c=fe.getCharCode("A");for(let L=c;L<=v;L++)z[Ns][L]=L-c+2;z[Va][a]=1;const f=fe.getCharCode("z"),b=fe.getCharCode("a");for(let L=b;L<=f;L++)z[Va][L]=L-b+2;z[Pi][a]=1;const x=fe.getCharCode("9"),A=fe.getCharCode("0");for(let L=A;L<=x;L++)z[Pi][L]=L-A+2;z[Pi][d]=12,z[Pi][u]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<_.length;L++)z[il][fe.getCharCode(_[L])]=L;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<M.length;L++)fe.getCharCode(M[L])>0&&(z[is][fe.getCharCode(M[L])]=L);return z}const vi=Eo(H.createInt32Array(5,256));class Ta{constructor(a){this.text=a}encode(){const a=fe.getCharCode(" "),u=fe.getCharCode(`
`);let d=nl.singletonList(Bn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let f,b=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case fe.getCharCode("\r"):f=b===u?2:0;break;case fe.getCharCode("."):f=b===a?3:0;break;case fe.getCharCode(","):f=b===a?4:0;break;case fe.getCharCode(":"):f=b===a?5:0;break;default:f=0}f>0?(d=Ta.updateStateListForPair(d,c,f),c++):d=this.updateStateListForChar(d,c)}return nl.min(d,(c,f)=>c.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,u){const d=[];for(let v of a)this.updateStateForChar(v,u,d);return Ta.simplifyStates(d)}updateStateForChar(a,u,d){let v=this.text[u]&255,c=vi[a.getMode()][v]>0,f=null;for(let b=0;b<=is;b++){let x=vi[b][v];if(x>0){if(f==null&&(f=a.endBinaryShift(u)),!c||b===a.getMode()||b===Pi){const A=f.latchAndAppend(b,x);d.push(A)}if(!c&&Ui[a.getMode()][b]>=0){const A=f.shiftAndAppend(b,x);d.push(A)}}}if(a.getBinaryShiftByteCount()>0||vi[a.getMode()][v]===0){let b=a.addBinaryShiftChar(u);d.push(b)}}static updateStateListForPair(a,u,d){const v=[];for(let c of a)this.updateStateForPair(c,u,d,v);return this.simplifyStates(v)}static updateStateForPair(a,u,d,v){let c=a.endBinaryShift(u);if(v.push(c.latchAndAppend(is,d)),a.getMode()!==is&&v.push(c.shiftAndAppend(is,d)),d===3||d===4){let f=c.latchAndAppend(Pi,16-d).latchAndAppend(Pi,1);v.push(f)}if(a.getBinaryShiftByteCount()>0){let f=a.addBinaryShiftChar(u).addBinaryShiftChar(u+1);v.push(f)}}static simplifyStates(a){let u=[];for(const d of a){let v=!0;for(const c of u){if(c.isBetterThanOrEqualTo(d)){v=!1;break}d.isBetterThanOrEqualTo(c)&&(u=u.filter(f=>f!==c))}v&&u.push(d)}return u}}class xn{constructor(){}static encodeBytes(a){return xn.encode(a,xn.DEFAULT_EC_PERCENT,xn.DEFAULT_AZTEC_LAYERS)}static encode(a,u,d){let v=new Ta(a).encode(),c=V.truncDivision(v.getSize()*u,100)+11,f=v.getSize()+c,b,x,A,_,M;if(d!==xn.DEFAULT_AZTEC_LAYERS){if(b=d<0,x=Math.abs(d),x>(b?xn.MAX_NB_BITS_COMPACT:xn.MAX_NB_BITS))throw new S(fe.format("Illegal value %s for layers",d));A=xn.totalBitsInLayer(x,b),_=xn.WORD_SIZE[x];let le=A-A%_;if(M=xn.stuffBits(v,_),M.getSize()+c>le)throw new S("Data to large for user specified layer");if(b&&M.getSize()>_*64)throw new S("Data to large for user specified layer")}else{_=0,M=null;for(let le=0;;le++){if(le>xn.MAX_NB_BITS)throw new S("Data too large for an Aztec code");if(b=le<=3,x=b?le+1:le,A=xn.totalBitsInLayer(x,b),f>A)continue;(M==null||_!==xn.WORD_SIZE[x])&&(_=xn.WORD_SIZE[x],M=xn.stuffBits(v,_));let pe=A-A%_;if(!(b&&M.getSize()>_*64)&&M.getSize()+c<=pe)break}}let L=xn.generateCheckWords(M,A,_),U=M.getSize()/_,q=xn.generateModeMessage(b,x,U),K=(b?11:14)+x*4,G=new Int32Array(K),Z;if(b){Z=K;for(let le=0;le<G.length;le++)G[le]=le}else{Z=K+1+2*V.truncDivision(V.truncDivision(K,2)-1,15);let le=V.truncDivision(K,2),pe=V.truncDivision(Z,2);for(let xe=0;xe<le;xe++){let Oe=xe+V.truncDivision(xe,15);G[le-xe-1]=pe-Oe-1,G[le+xe]=pe+Oe+1}}let re=new Ne(Z);for(let le=0,pe=0;le<x;le++){let xe=(x-le)*4+(b?9:12);for(let Oe=0;Oe<xe;Oe++){let Me=Oe*2;for(let Pe=0;Pe<2;Pe++)L.get(pe+Me+Pe)&&re.set(G[le*2+Pe],G[le*2+Oe]),L.get(pe+xe*2+Me+Pe)&&re.set(G[le*2+Oe],G[K-1-le*2-Pe]),L.get(pe+xe*4+Me+Pe)&&re.set(G[K-1-le*2-Pe],G[K-1-le*2-Oe]),L.get(pe+xe*6+Me+Pe)&&re.set(G[K-1-le*2-Oe],G[le*2+Pe])}pe+=xe*8}if(xn.drawModeMessage(re,b,Z,q),b)xn.drawBullsEye(re,V.truncDivision(Z,2),5);else{xn.drawBullsEye(re,V.truncDivision(Z,2),7);for(let le=0,pe=0;le<V.truncDivision(K,2)-1;le+=15,pe+=16)for(let xe=V.truncDivision(Z,2)&1;xe<Z;xe+=2)re.set(V.truncDivision(Z,2)-pe,xe),re.set(V.truncDivision(Z,2)+pe,xe),re.set(xe,V.truncDivision(Z,2)-pe),re.set(xe,V.truncDivision(Z,2)+pe)}let ae=new Js;return ae.setCompact(b),ae.setSize(Z),ae.setLayers(x),ae.setCodeWords(U),ae.setMatrix(re),ae}static drawBullsEye(a,u,d){for(let v=0;v<d;v+=2)for(let c=u-v;c<=u+v;c++)a.set(c,u-v),a.set(c,u+v),a.set(u-v,c),a.set(u+v,c);a.set(u-d,u-d),a.set(u-d+1,u-d),a.set(u-d,u-d+1),a.set(u+d,u-d),a.set(u+d,u-d+1),a.set(u+d,u+d-1)}static generateModeMessage(a,u,d){let v=new se;return a?(v.appendBits(u-1,2),v.appendBits(d-1,6),v=xn.generateCheckWords(v,28,4)):(v.appendBits(u-1,5),v.appendBits(d-1,11),v=xn.generateCheckWords(v,40,4)),v}static drawModeMessage(a,u,d,v){let c=V.truncDivision(d,2);if(u)for(let f=0;f<7;f++){let b=c-3+f;v.get(f)&&a.set(b,c-5),v.get(f+7)&&a.set(c+5,b),v.get(20-f)&&a.set(b,c+5),v.get(27-f)&&a.set(c-5,b)}else for(let f=0;f<10;f++){let b=c-5+f+V.truncDivision(f,5);v.get(f)&&a.set(b,c-7),v.get(f+10)&&a.set(c+7,b),v.get(29-f)&&a.set(b,c+7),v.get(39-f)&&a.set(c-7,b)}}static generateCheckWords(a,u,d){let v=a.getSize()/d,c=new Qs(xn.getGF(d)),f=V.truncDivision(u,d),b=xn.bitsToWords(a,d,f);c.encode(b,f-v);let x=u%d,A=new se;A.appendBits(0,x);for(const _ of Array.from(b))A.appendBits(_,d);return A}static bitsToWords(a,u,d){let v=new Int32Array(d),c,f;for(c=0,f=a.getSize()/u;c<f;c++){let b=0;for(let x=0;x<u;x++)b|=a.get(c*u+x)?1<<u-x-1:0;v[c]=b}return v}static getGF(a){switch(a){case 4:return mt.AZTEC_PARAM;case 6:return mt.AZTEC_DATA_6;case 8:return mt.AZTEC_DATA_8;case 10:return mt.AZTEC_DATA_10;case 12:return mt.AZTEC_DATA_12;default:throw new S("Unsupported word size "+a)}}static stuffBits(a,u){let d=new se,v=a.getSize(),c=(1<<u)-2;for(let f=0;f<v;f+=u){let b=0;for(let x=0;x<u;x++)(f+x>=v||a.get(f+x))&&(b|=1<<u-1-x);(b&c)===c?(d.appendBits(b&c,u),f--):(b&c)===0?(d.appendBits(b|1,u),f--):d.appendBits(b,u)}return d}static totalBitsInLayer(a,u){return((u?88:112)+16*a)*a}}xn.DEFAULT_EC_PERCENT=33,xn.DEFAULT_AZTEC_LAYERS=0,xn.MAX_NB_BITS=32,xn.MAX_NB_BITS_COMPACT=4,xn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ga{encode(a,u,d,v){return this.encodeWithHints(a,u,d,v,null)}encodeWithHints(a,u,d,v,c){let f=wo.ISO_8859_1,b=xn.DEFAULT_EC_PERCENT,x=xn.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Pr.CHARACTER_SET)&&(f=bo.forName(c.get(Pr.CHARACTER_SET).toString())),c.has(Pr.ERROR_CORRECTION)&&(b=V.parseInt(c.get(Pr.ERROR_CORRECTION).toString())),c.has(Pr.AZTEC_LAYERS)&&(x=V.parseInt(c.get(Pr.AZTEC_LAYERS).toString()))),Ga.encodeLayers(a,u,d,v,f,b,x)}static encodeLayers(a,u,d,v,c,f,b){if(u!==Fe.AZTEC)throw new S("Can only encode AZTEC, but got "+u);let x=xn.encode(fe.getBytes(a,c),f,b);return Ga.renderResult(x,d,v)}static renderResult(a,u,d){let v=a.getMatrix();if(v==null)throw new mn;let c=v.getWidth(),f=v.getHeight(),b=Math.max(u,c),x=Math.max(d,f),A=Math.min(b/c,x/f),_=(b-c*A)/2,M=(x-f*A)/2,L=new Ne(b,x);for(let U=0,q=M;U<f;U++,q+=A)for(let K=0,G=_;K<c;K++,G+=A)v.get(K,U)&&L.setRegion(G,q,A,A);return L}}n.AbstractExpandedDecoder=ot,n.ArgumentException=E,n.ArithmeticException=ht,n.AztecCode=Js,n.AztecCodeReader=si,n.AztecCodeWriter=Ga,n.AztecDecoder=Tn,n.AztecDetector=Sr,n.AztecDetectorResult=Li,n.AztecEncoder=xn,n.AztecHighLevelEncoder=Ta,n.AztecPoint=Nn,n.BarcodeFormat=Fe,n.Binarizer=R,n.BinaryBitmap=N,n.BitArray=se,n.BitMatrix=Ne,n.BitSource=ur,n.BrowserAztecCodeReader=ki,n.BrowserBarcodeReader=Or,n.BrowserCodeReader=Ce,n.BrowserDatamatrixCodeReader=ps,n.BrowserMultiFormatReader=tl,n.BrowserPDF417Reader=yi,n.BrowserQRCodeReader=go,n.BrowserQRCodeSvgWriter=vs,n.CharacterSetECI=de,n.ChecksumException=I,n.Code128Reader=$e,n.Code39Reader=rt,n.DataMatrixDecodedBitStreamParser=hr,n.DataMatrixReader=mi,n.DecodeHintType=J,n.DecoderResult=Ze,n.DefaultGridSampler=ii,n.DetectorResult=$i,n.EAN13Reader=cr,n.EncodeHintType=Pr,n.Exception=g,n.FormatException=F,n.GenericGF=mt,n.GenericGFPoly=kt,n.GlobalHistogramBinarizer=Y,n.GridSampler=jr,n.GridSamplerInstance=Rn,n.HTMLCanvasElementLuminanceSource=be,n.HybridBinarizer=oe,n.ITFReader=jt,n.IllegalArgumentException=S,n.IllegalStateException=mn,n.InvertedLuminanceSource=Ee,n.LuminanceSource=ve,n.MathUtils=tn,n.MultiFormatOneDReader=Un,n.MultiFormatReader=el,n.MultiFormatWriter=eu,n.NotFoundException=ie,n.OneDReader=Mn,n.PDF417DecodedBitStreamParser=De,n.PDF417DecoderErrorCorrection=gi,n.PDF417Reader=dr,n.PDF417ResultMetadata=ln,n.PerspectiveTransform=Wn,n.PlanarYUVLuminanceSource=bs,n.QRCodeByteMatrix=yo,n.QRCodeDataMask=Jn,n.QRCodeDecodedBitStreamParser=on,n.QRCodeDecoderErrorCorrectionLevel=rn,n.QRCodeDecoderFormatInformation=Zn,n.QRCodeEncoder=$n,n.QRCodeEncoderQRCode=ys,n.QRCodeMaskUtil=xr,n.QRCodeMatrixUtil=Rt,n.QRCodeMode=At,n.QRCodeReader=qr,n.QRCodeVersion=wt,n.QRCodeWriter=Zs,n.RGBLuminanceSource=vo,n.RSS14Reader=hn,n.RSSExpandedReader=qe,n.ReaderException=rs,n.ReedSolomonDecoder=_r,n.ReedSolomonEncoder=Qs,n.ReedSolomonException=bn,n.Result=ke,n.ResultMetadataType=dt,n.ResultPoint=ft,n.StringUtils=fe,n.UnsupportedOperationException=ze,n.VideoInputDevice=ne,n.WhiteRectangleDetector=an,n.WriterException=Fn,n.ZXingArrays=H,n.ZXingCharset=bo,n.ZXingInteger=V,n.ZXingStandardCharsets=wo,n.ZXingStringBuilder=he,n.ZXingStringEncoding=Q,n.ZXingSystem=D,n.createAbstractExpandedDecoder=jn,Object.defineProperty(n,"__esModule",{value:!0})}))})(xf,xf.exports)),xf.exports}var Lr=nK();const rK=Zl(Lr),iK=S6({__proto__:null,default:rK},[Lr]);var s3=(function(){function t(e,n,r){if(this.formatMap=new Map([[Tt.QR_CODE,Lr.BarcodeFormat.QR_CODE],[Tt.AZTEC,Lr.BarcodeFormat.AZTEC],[Tt.CODABAR,Lr.BarcodeFormat.CODABAR],[Tt.CODE_39,Lr.BarcodeFormat.CODE_39],[Tt.CODE_93,Lr.BarcodeFormat.CODE_93],[Tt.CODE_128,Lr.BarcodeFormat.CODE_128],[Tt.DATA_MATRIX,Lr.BarcodeFormat.DATA_MATRIX],[Tt.MAXICODE,Lr.BarcodeFormat.MAXICODE],[Tt.ITF,Lr.BarcodeFormat.ITF],[Tt.EAN_13,Lr.BarcodeFormat.EAN_13],[Tt.EAN_8,Lr.BarcodeFormat.EAN_8],[Tt.PDF_417,Lr.BarcodeFormat.PDF_417],[Tt.RSS_14,Lr.BarcodeFormat.RSS_14],[Tt.RSS_EXPANDED,Lr.BarcodeFormat.RSS_EXPANDED],[Tt.UPC_A,Lr.BarcodeFormat.UPC_A],[Tt.UPC_E,Lr.BarcodeFormat.UPC_E],[Tt.UPC_EAN_EXTENSION,Lr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!iK)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(Lr.DecodeHintType.POSSIBLE_FORMATS,i),o.set(Lr.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(o){i(o)}})},t.prototype.decode=function(e){var n=new Lr.MultiFormatReader(this.verbose,this.hints),r=new Lr.HTMLCanvasElementLuminanceSource(e),i=new Lr.BinaryBitmap(new Lr.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:c8.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),sK=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function m(E){try{g(r.next(E))}catch(S){h(S)}}function y(E){try{g(r.throw(E))}catch(S){h(S)}}function g(E){E.done?o(E.value):i(E.value).then(m,y)}g((r=r.apply(t,e||[])).next())})},aK=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(E){return y([g,E])}}function y(g){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(E){g=[6,E],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},a3=(function(){function t(e,n,r){if(this.formatMap=new Map([[Tt.QR_CODE,"qr_code"],[Tt.AZTEC,"aztec"],[Tt.CODABAR,"codabar"],[Tt.CODE_39,"code_39"],[Tt.CODE_93,"code_93"],[Tt.CODE_128,"code_128"],[Tt.DATA_MATRIX,"data_matrix"],[Tt.ITF,"itf"],[Tt.EAN_13,"ean_13"],[Tt.EAN_8,"ean_8"],[Tt.PDF_417,"pdf417"],[Tt.UPC_A,"upc_a"],[Tt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return sK(this,void 0,void 0,function(){var n,r;return aK(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:c8.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,o=e;i<o.length;i++){var h=o[i],m=h.boundingBox.width*h.boundingBox.height;m>r&&(r=m,n=h)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),o3=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function m(E){try{g(r.next(E))}catch(S){h(S)}}function y(E){try{g(r.throw(E))}catch(S){h(S)}}function g(E){E.done?o(E.value):i(E.value).then(m,y)}g((r=r.apply(t,e||[])).next())})},l3=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(E){return y([g,E])}}function y(g){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(E){g=[6,E],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},oK=(function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&a3.isSupported()?(this.primaryDecoder=new a3(e,r,i),this.secondaryDecoder=new s3(e,r,i)):this.primaryDecoder=new s3(e,r,i)}return t.prototype.decodeAsync=function(e){return o3(this,void 0,void 0,function(){var n;return l3(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return o3(this,void 0,void 0,function(){var n,r;return l3(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),Fw=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),t1=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function m(E){try{g(r.next(E))}catch(S){h(S)}}function y(E){try{g(r.throw(E))}catch(S){h(S)}}function g(E){E.done?o(E.value):i(E.value).then(m,y)}g((r=r.apply(t,e||[])).next())})},n1=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(E){return y([g,E])}}function y(g){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(E){g=[6,E],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},d8=(function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t})(),lK=(function(t){Fw(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(d8),cK=(function(t){Fw(e,t);function e(n){return t.call(this,"zoom",n)||this}return e})(lK),uK=(function(t){Fw(e,t);function e(n){return t.call(this,"torch",n)||this}return e})(d8),hK=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new cK(this.track)},t.prototype.torchFeature=function(){return new uK(this.track)},t})(),fK=(function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return t1(this,void 0,void 0,function(){var o,h;return n1(this,function(m){switch(m.label){case 0:return o=new t(e,n,i),r.aspectRatio?(h={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:m.sent(),m.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return t1(this,void 0,void 0,function(){return n1(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),o=i.length,h=0;e.mediaStream.getVideoTracks().forEach(function(m){e.mediaStream.removeTrack(m),m.stop(),++h,h>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new hK(this.getFirstTrackOrFail())},t})(),dK=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return t1(this,void 0,void 0,function(){return n1(this,function(i){return[2,fK.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return t1(this,void 0,void 0,function(){var n,r;return n1(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t})(),c3=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function m(E){try{g(r.next(E))}catch(S){h(S)}}function y(E){try{g(r.throw(E))}catch(S){h(S)}}function g(E){E.done?o(E.value):i(E.value).then(m,y)}g((r=r.apply(t,e||[])).next())})},u3=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(E){return y([g,E])}}function y(g){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(E){g=[6,E],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},pK=(function(){function t(){}return t.failIfNotSupported=function(){return c3(this,void 0,void 0,function(){return u3(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return c3(this,void 0,void 0,function(){return u3(this,function(n){return[2,dK.create(e)]})})},t})(),mK=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function m(E){try{g(r.next(E))}catch(S){h(S)}}function y(E){try{g(r.throw(E))}catch(S){h(S)}}function g(E){E.done?o(E.value):i(E.value).then(m,y)}g((r=r.apply(t,e||[])).next())})},gK=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(E){return y([g,E])}}function y(g){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(E){g=[6,E],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},yK=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Vu.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Vu.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return mK(this,void 0,void 0,function(){var e,n,r,i,o,h,m;return gK(this,function(y){switch(y.label){case 0:return e=function(g){for(var E=g.getVideoTracks(),S=0,N=E;S<N.length;S++){var I=N[S];I.enabled=!1,I.stop(),g.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=y.sent(),i=[],o=0,h=r;o<h.length;o++)m=h[o],m.kind==="videoinput"&&i.push({id:m.deviceId,label:m.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(o){for(var h=[],m=0,y=o;m<y.length;m++){var g=y[m];g.kind==="video"&&h.push({id:g.id,label:g.label})}e(h)},i=MediaStreamTrack;i.getSources(r)})},t})(),ti;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(ti||(ti={}));var vK=(function(){function t(){this.state=ti.NOT_STARTED,this.onGoingTransactionNewState=ti.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===ti.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ti.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===ti.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ti.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ti.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case ti.UNKNOWN:throw"Transition from unknown is not allowed";case ti.NOT_STARTED:this.failIfNewStateIs(e,[ti.PAUSED]);break;case ti.SCANNING:break;case ti.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),bK=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===ti.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==ti.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ti.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===ti.PAUSED},t})(),wK=(function(){function t(){}return t.create=function(){return new bK(new vK)},t})(),xK=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ls=(function(t){xK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(Da),EK=(function(){function t(e,n){this.logger=n,this.fps=Ls.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ls.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?f8.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Za(this.qrbox)},t.create=function(e,n){return new t(e,n)},t})(),h3=(function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new h8(this.verbose),this.qrcode=new oK(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=wK.create()}return t.prototype.start=function(e,n,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;i?h=i:h=this.verbose?this.logger.log:function(){};var m=EK.create(n,this.logger);this.clearElement();var y=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=y,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:Ls.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var S=this,N=this.stateManagerProxy.startTransition(ti.SCANNING);return new Promise(function(I,R){var D=g?m.videoConstraints:S.createVideoConstraints(e);if(!D){N.cancel(),R("videoConstraints should be defined");return}var j={};(!g||m.aspectRatio)&&(j.aspectRatio=m.aspectRatio);var B={onRenderSurfaceReady:function(H,V){S.setupUi(H,V,m),S.isScanning=!0,S.foreverScan(m,r,h)}};pK.failIfNotSupported().then(function(H){H.create(D).then(function(V){return V.render(o.element,j,B).then(function(se){S.renderedCamera=se,N.execute(),I(null)}).catch(function(se){N.cancel(),R(se)})}).catch(function(V){N.cancel(),R(Vu.errorGettingUserMedia(V))})}).catch(function(H){N.cancel(),R(Vu.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ti.PAUSED),this.showPausedState(),(Za(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(ti.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(ti.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(Ls.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Za(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var m=h.width,y=h.height,g=document.getElementById(r.elementId),E=g.clientWidth?g.clientWidth:Ls.DEFAULT_WIDTH,S=Math.max(g.clientHeight?g.clientHeight:y,Ls.FILE_SCAN_MIN_HEIGHT),N=r.computeCanvasDrawConfig(m,y,E,S);if(n){var I=r.createCanvasElement(E,S,"qr-canvas-visible");I.style.display="inline-block",g.appendChild(I);var R=I.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=E,R.canvas.height=S,R.drawImage(h,0,0,m,y,N.x,N.y,N.width,N.height)}var D=Ls.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(h.width,N.width),B=Math.max(h.height,N.height),H=j+2*D,V=B+2*D,se=r.createCanvasElement(H,V);g.appendChild(se);var ee=se.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=H,ee.canvas.height=V,ee.drawImage(h,0,0,m,y,D,D,j,B);try{r.qrcode.decodeRobustlyAsync(se).then(function(J){i(n3.createFromQrcodeResult(J))}).catch(o)}catch(J){o("QR code parse error, error = ".concat(J))}},h.onerror=o,h.onabort=o,h.onstalled=o,h.onsuspend=o,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return yK.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!f8.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Tt.QR_CODE,Tt.AZTEC,Tt.CODABAR,Tt.CODE_39,Tt.CODE_93,Tt.CODE_128,Tt.DATA_MATRIX,Tt.MAXICODE,Tt.ITF,Tt.EAN_13,Tt.EAN_8,Tt.PDF_417,Tt.RSS_14,Tt.RSS_EXPANDED,Tt.UPC_A,Tt.UPC_E,Tt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var h=o[i];JG(h)?r.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Za(e))return!0;if(!Za(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Za(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Za(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var h=this.toQrdimensions(e,n,o),m=function(g){if(g<Ls.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ls.MIN_QR_BOX_SIZE,"px.")},y=function(g){return g>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};m(h.width),m(h.height),h.width=y(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=Za(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=r.isShadedBoxEnabled()&&o.height<=n,m={x:0,y:0,width:e,height:n},y=h?this.getShadedRegionBounds(e,n,o):m,g=this.createCanvasElement(y.width,y.height),E={willReadFrequently:!0},S=g.getContext("2d",E);S.canvas.width=y.width,S.canvas.height=y.height,this.element.append(g),h&&this.possiblyInsertShadingElement(this.element,e,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=S,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Vu.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,n3.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Vu.codeParseError(i);return n(o,u8.createFrom(o)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),h=o.videoWidth/o.clientWidth,m=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*h,g=this.qrRegion.height*m,E=this.qrRegion.x*h,S=this.qrRegion.y*m;this.context.drawImage(o,E,S,y,g,0,0,this.qrRegion.width,this.qrRegion.height);var N=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(I){!I&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){N()})):N()}).catch(function(I){i.logger.logError("Error happend while scanning context",I),N()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",h=function(R){if(R in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(R,"'")},m=Object.keys(e);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var y=Object.keys(e)[0];if(y!==n&&y!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(y===n){var g=e.facingMode;if(typeof g=="string"){if(h(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(h(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var E=typeof g;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var S=e.deviceId;if(typeof S=="string")return{deviceId:S};if(typeof S=="object"){if(o in S)return{deviceId:{exact:S["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var N=typeof S;throw"Invalid type of 'deviceId' = ".concat(N)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var o=(r-e)/2,h=(i-n)/2;return{x:o,y:h,width:e,height:n}}else{var m=e,y=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(y)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Ls.BORDER_SHADER_MATCH_COLOR:Ls.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,o=n,h=document.createElement("canvas");return h.style.width="".concat(i,"px"),h.style.height="".concat(o,"px"),h.style.display="none",h.id=Za(r)?"qr-canvas":r,h},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var h=(n-i.width)/2,m=(r-i.height)/2;if(o.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Ls.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var y=5,g=40;this.insertShaderBorders(o,g,y,-y,null,0,!0),this.insertShaderBorders(o,g,y,-y,null,0,!1),this.insertShaderBorders(o,g,y,null,-y,0,!0),this.insertShaderBorders(o,g,y,null,-y,0,!1),this.insertShaderBorders(o,y,g+y,-y,null,-y,!0),this.insertShaderBorders(o,y,g+y,null,-y,-y,!0),this.insertShaderBorders(o,y,g+y,-y,null,-y,!1),this.insertShaderBorders(o,y,g+y,null,-y,-y,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,n,r,i,o,h,m){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=Ls.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(n,"px"),y.style.height="".concat(r,"px"),i!==null&&(y.style.top="".concat(i,"px")),o!==null&&(y.style.bottom="".concat(o,"px")),m?y.style.left="".concat(h,"px"):y.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),e.appendChild(y)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),zw="data:image/svg+xml;base64,",SK=zw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",AK=zw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",f3=zw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",CK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",d3=(function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t})(),TK=(function(){function t(){this.data=d3.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=d3.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t})(),NK=(function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=r3.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var o=document.createElement("a");o.innerText=r3.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t})(),_K=(function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=f3,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=CK,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=f3,this.infoIcon.style.opacity="0.6")},t})(),OK=(function(){function t(){var e=this;this.infoDiv=new NK,this.infoIcon=new _K(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t})(),IK=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function m(E){try{g(r.next(E))}catch(S){h(S)}}function y(E){try{g(r.throw(E))}catch(S){h(S)}}function g(E){E.done?o(E.value):i(E.value).then(m,y)}g((r=r.apply(t,e||[])).next())})},RK=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(E){return y([g,E])}}function y(g){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(E){g=[6,E],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},p3=(function(){function t(){}return t.hasPermissions=function(){return IK(this,void 0,void 0,function(){var e,n,r,i;return RK(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=o.sent(),n=0,r=e;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},t})(),Il=(function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===Wl.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Wl.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Da.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Da.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=e;r<i.length;r++){var o=i[r];if(!Da.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return e},t})(),Ps=(function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t})(),Fo=(function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(Ps.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t})(),p8=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function m(E){try{g(r.next(E))}catch(S){h(S)}}function y(E){try{g(r.throw(E))}catch(S){h(S)}}function g(E){E.done?o(E.value):i(E.value).then(m,y)}g((r=r.apply(t,e||[])).next())})},m8=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(E){return y([g,E])}}function y(g){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(E){g=[6,E],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},m3=(function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return p8(this,void 0,void 0,function(){var e,n;return m8(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?sr.torchOffButton():sr.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?sr.torchOnFailedMessage():sr.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t})(),MK=(function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Fo.createElement("button",Ps.TORCH_BUTTON_ID),this.torchController=new m3(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=sr.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(o){return p8(r,void 0,void 0,function(){return m8(this,function(h){switch(h.label){case 0:return[4,i.torchController.flipState()];case 1:return h.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(Ps.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(Ps.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(Ps.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(Ps.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new m3(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=sr.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,i){var o=new t(n,i);return o.render(e,r),o},t})(),DK=(function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=Fo.createElement("button",Ps.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=Fo.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var y=m.target;if(!(y.files&&y.files.length===0)){var g=y.files,E=g[0],S=E.name;o.setImageNameToButton(S),r(E)}}});var h=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(h),this.fileBasedScanRegion.addEventListener("dragenter",function(m){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var y=m.dataTransfer;if(y){var g=y.files;if(!g||g.length===0)return;for(var E=!1,S=0;S<g.length;++S){var N=g.item(S);if(N){var I=/image.*/;if(N.type.match(I)){E=!0;var R=N.name;o.setImageNameToButton(R),r(N),h.innerText=sr.dragAndDropMessage();break}}}E||(h.innerText=sr.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=sr.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),i=e.length,o=e.substring(i-8,i);e="".concat(r,"....").concat(o)}var h=sr.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=h},t.prototype.setInitialValueToButton=function(){var e=sr.fileSelectionChooseImage()+" - "+sr.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var i=new t(e,n,r);return i},t})(),LK=(function(){function t(e){this.selectElement=Fo.createElement("select",Ps.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=sr.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var o=1,h=0,m=this.cameras;h<m.length;h++){var y=m[h],g=y.id,E=y.label==null?g:y.label;(!E||E==="")&&(E=[sr.anonymousCameraPrefix(),o++].join(" "));var S=document.createElement("option");S.value=g,S.innerText=E,this.options.push(S),this.selectElement.appendChild(S)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t})(),kK=(function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Fo.createElement("input",Ps.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=sr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=sr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,i){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t})(),ks;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(ks||(ks={}));function jK(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function BK(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var PK=(function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Il(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new h8(this.verbose),this.persistedDataManager=new TK,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,h){if(e)e(o,h);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(sr.lastMatch(o),ks.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,h){n&&n(o,h)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new h3(this.getScanRegionId(),BK(this.config,this.verbose))},t.prototype.pause=function(e){(Za(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(o){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(o){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",o),i(o)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Da.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Da.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Da.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Da.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Da.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Da.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Da.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Il.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),o=this.getDashboardId();i.id=o,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new OK;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(sr.cameraPermissionRequesting());var o=function(){r||i.createPermissionButton(e,n)};h3.getCameras().then(function(h){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),h&&h.length>0?(e.removeChild(n),i.renderCameraSelection(h)):(i.setHeaderMessage(sr.noCameraFound(),ks.STATUS_WARNING),o())}).catch(function(h){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),i.setHeaderMessage(h,ks.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,i=Fo.createElement("button",this.getCameraPermissionButtonId());i.innerText=sr.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(e,n,i)}),n.appendChild(i)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Il.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){p3.hasPermissions().then(function(i){i?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Il.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Il.isFileScanType(this.currentScanType),r=this,i=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";Il.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(sr.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(h){r.resetHeaderMessage(),r.qrCodeSuccessCallback(h.decodedText,h)}).catch(function(h){r.setHeaderMessage(h,ks.STATUS_WARNING),r.qrCodeErrorCallback(h,u8.createFrom(h))}))};this.fileSelectionUi=DK.create(e,n,i)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var o=kK.create(i,!1),h=function(D){var j=D.zoomFeature();if(j.isSupported()){o.setOnCameraZoomValueChangeCallback(function(H){j.apply(H)});var B=1;n.config.defaultZoomValueIfSupported&&(B=n.config.defaultZoomValueIfSupported),B=eK(B,j.min(),j.max()),o.setValues(j.min(),j.max(),B,j.step()),o.show()}},m=LK.create(i,e),y=document.createElement("span"),g=Fo.createElement("button",Ps.CAMERA_START_BUTTON_ID);g.innerText=sr.scanButtonStartScanningText(),y.appendChild(g);var E=Fo.createElement("button",Ps.CAMERA_STOP_BUTTON_ID);E.innerText=sr.scanButtonStopScanningText(),E.style.display="none",E.disabled=!0,y.appendChild(E);var S,N=function(D){if(!D.torchFeature().isSupported()){S&&S.hide();return}S?S.updateTorchCapability(D.torchFeature()):S=MK.create(y,D.torchFeature(),{display:"none",marginLeft:"5px"},function(j){r.setHeaderMessage(j,ks.STATUS_WARNING)}),S.show()};i.appendChild(y);var I=function(D){D||(g.style.display="none"),g.innerText=sr.scanButtonStartScanningText(),g.style.opacity="1",g.disabled=!1,D&&(g.style.display="inline-block")};if(g.addEventListener("click",function(D){g.innerText=sr.scanButtonScanningStarting(),m.disable(),g.disabled=!0,g.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var j=m.getValue();r.persistedDataManager.setLastUsedCameraId(j),r.html5Qrcode.start(j,jK(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(B){E.disabled=!1,E.style.display="inline-block",I(!1);var H=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&N(H),n.config.showZoomSliderIfSupported===!0&&h(H)}).catch(function(B){r.showHideScanTypeSwapLink(!0),m.enable(),I(!0),r.setHeaderMessage(B,ks.STATUS_WARNING)})}),m.hasSingleItem()&&g.click(),E.addEventListener("click",function(D){if(!r.html5Qrcode)throw"html5Qrcode not defined";E.disabled=!0,r.html5Qrcode.stop().then(function(j){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),m.enable(),g.disabled=!1,E.style.display="none",g.style.display="inline-block",S&&(S.reset(),S.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(j){E.disabled=!1,r.setHeaderMessage(j,ks.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var R=r.persistedDataManager.getLastUsedCameraId();m.hasValue(R)?(m.setValue(R),g.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=sr.textIfCameraScanSelected(),r=sr.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var h=Fo.createElement("span",this.getDashboardSectionSwapLinkId());h.style.textDecoration="underline",h.style.cursor="pointer",h.innerText=Il.isCameraScanType(this.currentScanType)?n:r,h.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Il.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),h.innerText=r,e.currentScanType=Wl.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),h.innerText=n,e.currentScanType=Wl.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),o.appendChild(h),i.appendChild(o)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){p3.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=ks.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case ks.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case ks.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case ks.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=SK,this.cameraScanImage.alt=sr.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=AK,this.fileScanImage.alt=sr.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Ps.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Ps.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t})();function UK(){const{currentUser:t}=fs(),{db:e}=Di(),[n,r]=W.useState(null),[i,o]=W.useState(null),h=W.useRef(null);return W.useEffect(()=>{const m="reader";if(h.current||n)return;const y=async E=>{if(!(!e||!t))try{h.current?.clear();const S=await WG(e,t.id,E);r(S)}catch(S){console.error("Scan Error",S),o(S.message||"Invalid QR Code")}},g=()=>{};try{setTimeout(()=>{if(!document.getElementById(m))return;const E=new PK(m,{fps:10,qrbox:{width:250,height:250}},!1);E.render(y,g),h.current=E},500)}catch{o("Camera Init Failed")}return()=>{h.current&&(h.current.clear().catch(E=>console.error("Failed to clear scanner",E)),h.current=null)}},[e,t,n]),n&&n.success?T.jsxs("div",{className:"flex flex-col items-center justify-center p-6 space-y-4 text-center",children:[T.jsx("div",{className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center",children:T.jsx(rh,{className:"w-10 h-10 text-green-500"})}),T.jsx("h2",{className:"text-xl font-bold text-white",children:"Sync Successful!"}),T.jsx("p",{className:"text-slate-400 text-sm",children:n.message}),T.jsx("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl w-full max-w-xs space-y-2 text-sm",children:n.type==="profile"?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-muted-foreground",children:"Levels Updated"}),T.jsx("span",{className:"text-white font-bold",children:n.details?.levelsUpdated||0})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-muted-foreground",children:"Stars Gained"}),T.jsx("span",{className:"text-white font-bold",children:n.details?.newStars||0})]})]}):T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-muted-foreground",children:"Resources Added"}),T.jsx("span",{className:"text-white font-bold",children:n.details?.itemsImported||0})]})}),T.jsx("button",{onClick:()=>window.location.reload(),className:"bg-emerald-500 hover:bg-emerald-400 text-black px-6 py-3 rounded-xl font-bold shadow-lg shadow-emerald-500/20 transition-all",children:"Done"})]}):i?T.jsxs("div",{className:"flex flex-col items-center justify-center p-6 space-y-4 text-center",children:[T.jsx(L9,{className:"w-12 h-12 text-destructive"}),T.jsx("h3",{className:"text-white font-bold",children:"Scan Failed"}),T.jsx("p",{className:"text-muted-foreground text-sm",children:i}),T.jsx("button",{onClick:()=>window.location.reload(),className:"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg border border-white/5",children:"Try Again"})]}):T.jsxs("div",{className:"flex flex-col items-center w-full max-w-md mx-auto p-4 space-y-4",children:[T.jsx("h2",{className:"text-white font-bold",children:"Scan Peer Code"}),T.jsx("div",{id:"reader",className:"w-full overflow-hidden rounded-xl border-2 border-slate-700 bg-black"}),T.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Point camera at another student's QR code"})]})}function FK(){const t=Ti(),[e,n]=W.useState(!1),[r,i]=W.useState([]);W.useEffect(()=>{const m=()=>{try{const y=JSON.parse(localStorage.getItem("sync_history")||"[]");i(y)}catch{console.error("Failed to load sync history")}};return m(),window.addEventListener("storage",m),()=>window.removeEventListener("storage",m)},[e]);const[o,h]=W.useState("select");return e?T.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[T.jsx("button",{onClick:()=>{o==="select"?n(!1):h("select")},className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white transition-colors",children:T.jsx(cs,{className:"w-5 h-5"})}),T.jsx("h1",{className:"text-2xl font-bold text-white",children:o==="select"?"P2P Sync":o==="share"?"Share Content":"Receive Content"})]}),T.jsx("div",{className:"max-w-md mx-auto",children:T.jsxs(co,{mode:"wait",children:[o==="select"&&T.jsxs(en.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid gap-6",children:[T.jsxs("button",{onClick:()=>h("share"),className:"p-8 rounded-3xl bg-gradient-to-br from-cyan-500/10 to-blue-500/10 border border-cyan-500/20 hover:border-cyan-500/50 hover:bg-cyan-500/20 transition-all group text-left",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-cyan-500/20 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:T.jsx(l5,{className:"w-8 h-8 text-cyan-400"})}),T.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Share Content"}),T.jsx("p",{className:"text-slate-400 font-medium leading-relaxed",children:"Generate a QR code to share your progress and content with a peer."})]}),T.jsxs("button",{onClick:()=>h("receive"),className:"p-8 rounded-3xl bg-gradient-to-br from-emerald-500/10 to-green-500/10 border border-emerald-500/20 hover:border-emerald-500/50 hover:bg-emerald-500/20 transition-all group text-left",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-emerald-500/20 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:T.jsx(XS,{className:"w-8 h-8 text-emerald-400"})}),T.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Receive Content"}),T.jsx("p",{className:"text-slate-400 font-medium leading-relaxed",children:"Scan a peer's QR code to merge their progress and content into your device."})]})]},"select"),o==="share"&&T.jsx(en.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"glass-panel p-6 rounded-3xl border border-white/10",children:T.jsx(ZG,{})},"share"),o==="receive"&&T.jsx(en.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"glass-panel p-6 rounded-3xl border border-white/10",children:T.jsx(UK,{})},"receive")]})})]}):T.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg animate-fade-in font-sans",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[T.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white transition-colors",children:T.jsx(cs,{className:"w-5 h-5"})}),T.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-green-500",children:"Recently Synced"})]}),T.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("h2",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:"Activity Log"}),r.length>0&&T.jsxs("button",{onClick:()=>{localStorage.removeItem("sync_history"),i([])},className:"text-xs text-red-400 hover:text-red-300 flex items-center gap-1",children:[T.jsx(wd,{className:"w-3 h-3"})," Clear"]})]}),T.jsxs("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-400 text-black font-bold rounded-xl flex items-center gap-2 shadow-lg shadow-emerald-500/20 transition-all hover:scale-105",children:[T.jsx(XS,{className:"w-4 h-4"})," Sync New"]})]}),T.jsx("div",{className:"space-y-4",children:T.jsx(co,{children:r.length===0?T.jsxs(en.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-12 text-slate-500 glass-panel rounded-2xl border border-white/5",children:[T.jsx(rv,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),T.jsx("p",{children:"No recent sync activity."}),T.jsx("p",{className:"text-xs mt-2",children:"Scan a Teacher's QR code to receive content."})]}):r.map((m,y)=>T.jsxs(en.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,height:0},transition:{delay:y*.1},className:"glass-panel p-4 rounded-2xl border border-white/10 flex flex-col md:flex-row gap-4 md:items-center hover:bg-white/5 transition-colors group",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/10 flex items-center justify-center border border-emerald-500/20 group-hover:bg-emerald-500/20 transition-colors",children:T.jsx(rh,{className:"w-6 h-6 text-emerald-400"})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-300 transition-colors",children:m.title}),T.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-slate-400",children:[T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(rv,{className:"w-3 h-3"})," ",m.date]}),T.jsx("span",{className:"px-2 py-0.5 rounded bg-white/10 text-slate-300",children:m.type})]})]}),T.jsxs("div",{className:"md:text-right border-t md:border-t-0 border-white/10 pt-3 md:pt-0 mt-2 md:mt-0",children:[T.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase mb-1",children:"Synced From"}),T.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-300 font-medium md:justify-end",children:[T.jsx(T9,{className:"w-4 h-4"}),T.jsx("span",{children:m.teacher})]}),T.jsx("p",{className:"text-xs text-slate-400",children:m.phone})]})]},m.id))})}),T.jsx("div",{className:"p-4 rounded-2xl bg-blue-500/10 border border-blue-500/20 text-center",children:T.jsx("p",{className:"text-blue-300 text-sm",children:"All content is up to date with the local village server."})})]})]})}function zK(){const t=Ti(),{db:e}=Di(),{logout:n}=fs(),{t:r,i18n:i}=xh(),[o,h]=W.useState("");W.useEffect(()=>{const S=localStorage.getItem("teacherIP");S&&h(S)},[]);const m=()=>{localStorage.setItem("teacherIP",o),alert("Teacher IP Saved!")},y=async()=>{e&&confirm("Are you sure? This will delete ALL progress!")&&(await e.remove(),window.location.reload())},g=()=>{n(),t("/")},E=S=>{i.changeLanguage(S),localStorage.setItem("appLanguage",S)};return T.jsxs("div",{className:"min-h-screen p-6 pb-24 space-y-8 animate-fade-in",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:()=>t("/"),className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors",children:T.jsx(cs,{className:"w-5 h-5 text-white"})}),T.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-purple-400 bg-clip-text text-transparent",children:r("settings.title")})]}),T.jsxs("div",{className:"glass-panel p-4 rounded-xl space-y-4",children:[T.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[T.jsx(sv,{className:"w-5 h-5 text-primary"})," ",r("settings.language")]}),T.jsx("div",{className:"grid grid-cols-3 gap-2",children:["en","hi","mr"].map(S=>T.jsx("button",{onClick:()=>E(S),className:`p-2 rounded-lg text-sm font-medium transition-colors border ${i.language===S?"bg-primary/20 border-primary text-primary":"bg-black/20 border-white/10 text-muted-foreground hover:bg-white/5"}`,children:S==="en"?"English":S==="hi"?"":""},S))})]}),T.jsxs("div",{className:"glass-panel p-4 rounded-xl space-y-4",children:[T.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[T.jsx(YD,{className:"w-5 h-5 text-primary"})," Data Management"]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider ml-1",children:r("settings.teacher_ip")}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"text",value:o,onChange:S=>h(S.target.value),placeholder:"http://192.168.1.50:5984/db",className:"bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm flex-1 focus:outline-none focus:border-primary/50 text-foreground"}),T.jsx("button",{onClick:m,className:"bg-primary hover:bg-primary/80 text-primary-foreground px-4 rounded-lg text-sm font-medium transition-colors",children:r("settings.save")})]})]}),T.jsx("hr",{className:"border-white/5"}),T.jsxs("button",{onClick:y,className:"w-full p-3 rounded-lg bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 transition-colors flex items-center justify-center gap-2 font-medium",children:[T.jsx(p1,{className:"w-4 h-4"})," ",r("settings.reset_data")]})]}),T.jsx("button",{onClick:g,className:"w-full p-3 rounded-xl bg-white/5 text-muted-foreground border border-white/5 hover:bg-white/10 transition-colors font-medium",children:r("dashboard.logout_btn")}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("p",{className:"text-xs text-muted-foreground",children:"AlgoSensei v1.2 (Offline)"}),T.jsxs("button",{onClick:()=>t("/teacher"),className:"text-xs text-primary/50 hover:text-primary transition-colors flex items-center justify-center gap-1 mx-auto",children:[T.jsx(a9,{className:"w-3 h-3"})," ",r("teacher.portal")]})]})]})}function HK(){const t=Ti(),{db:e}=Di(),{logout:n,currentUser:r}=fs(),[i,o]=W.useState(!1),[h,m]=W.useState({students:0,quizzes:0,lessons:0}),[y,g]=W.useState([]),[E,S]=W.useState(""),[N,I]=W.useState(!1),[R,D]=W.useState({name:"",standard:"10th",medium:"english"}),[j,B]=W.useState(!1);W.useEffect(()=>{if(!e||!r)return;(async()=>{const F=(await e.users.find().exec()).filter(Q=>Q.get("role")!=="teacher"),ce=await e.content.find().exec(),ze=(await e.classes.find().exec()).filter(Q=>Q.teacherId===r.id);g(ze),m({students:F.length,quizzes:ce.filter(Q=>Q.type==="quiz").length,lessons:ce.filter(Q=>Q.type==="lesson").length}),r.ipAddress&&S(r.ipAddress)})()},[e,r]);const H=async ee=>{if(ee.preventDefault(),!(!e||!r||!R.name)){B(!0);try{const J=va();await e.classes.insert({id:J,name:R.name,standard:R.standard,medium:R.medium,teacherId:r.id,code:Array.from({length:6},()=>"ABCDEFGHJKLMNPQRSTUVWXYZ23456789".charAt(Math.floor(Math.random()*32))).join(""),createdAt:Date.now()});const ce=(await e.classes.find().exec()).filter(de=>de.teacherId===r.id);g(ce),o(!1),D({name:"",standard:"10",medium:"english"})}catch(J){console.error("Failed to create class:",J),alert("Error creating class.")}finally{B(!1)}}},V=async()=>{await n(),t("/")},se=async()=>{if(!(!e||!r)){I(!0);try{const ee=await e.users.findOne(r.id).exec();ee&&(await ee.patch({ipAddress:E}),alert("IP Address Updated!"))}catch(ee){console.error("Failed to save IP:",ee),alert("Failed to save IP")}finally{I(!1)}}};return T.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg font-sans",children:[T.jsx(co,{children:i&&T.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:T.jsxs(en.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-[#1a1a1a] border border-white/10 rounded-2xl w-full max-w-md p-6 shadow-2xl",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-xl font-bold text-white",children:"Create New Class"}),T.jsx("button",{onClick:()=>o(!1),className:"text-slate-400 hover:text-white",children:T.jsx(xd,{className:"w-5 h-5"})})]}),T.jsxs("form",{onSubmit:H,className:"space-y-6",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs uppercase font-bold text-slate-500",children:"Class Name"}),T.jsx("input",{type:"text",value:R.name,onChange:ee=>D({...R,name:ee.target.value}),placeholder:"Ex: Topper Batch 2026",className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-primary focus:outline-none transition-colors",required:!0})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs uppercase font-bold text-slate-500",children:"Standard"}),T.jsx("div",{className:"grid grid-cols-5 gap-2",children:["1","2","3","4","5","6","7","8","9","10"].map(ee=>{const J=ee+(ee==="1"?"st":ee==="2"?"nd":ee==="3"?"rd":"th");return T.jsx("button",{type:"button",onClick:()=>D({...R,standard:ee}),className:`p-2 rounded text-xs font-bold transition-all border ${R.standard===ee?"bg-blue-600/20 text-blue-400 border-blue-600":"bg-white/5 text-slate-400 border-transparent hover:bg-white/10"}`,children:J},ee)})})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs uppercase font-bold text-slate-500",children:"Medium"}),T.jsx("div",{className:"grid grid-cols-2 gap-3",children:["english","marathi"].map(ee=>T.jsx("button",{type:"button",onClick:()=>D({...R,medium:ee}),className:`p-3 rounded-xl text-sm font-bold capitalize transition-all border ${R.medium===ee?"bg-purple-600/20 text-purple-400 border-purple-600":"bg-white/5 text-slate-400 border-transparent hover:bg-white/10"}`,children:ee},ee))})]}),T.jsx("button",{type:"submit",disabled:j,className:"w-full bg-primary hover:bg-primary/80 text-white font-bold py-4 rounded-xl transition-all shadow-lg shadow-primary/20 disabled:opacity-50",children:j?"Creating...":"Create Class & Seed Subjects"})]})]})})}),T.jsx("header",{className:"flex items-center justify-between mb-8",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:V,className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",title:"Logout",children:T.jsx(cs,{className:"w-5 h-5"})}),T.jsx("h1",{className:"text-2xl font-bold text-white",children:"Teacher Dashboard"})]})}),T.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[T.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-col items-center justify-center gap-2",children:[T.jsx(u5,{className:"w-6 h-6 text-blue-400"}),T.jsx("span",{className:"text-2xl font-bold text-white",children:h.students}),T.jsx("span",{className:"text-xs text-slate-400",children:"Total Students"})]}),T.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-col items-center justify-center gap-2",children:[T.jsx(dm,{className:"w-6 h-6 text-yellow-400"}),T.jsx("span",{className:"text-2xl font-bold text-white",children:y.length}),T.jsx("span",{className:"text-xs text-slate-400",children:"Active Classes"})]}),T.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-col items-center justify-center gap-2",children:[T.jsx(nh,{className:"w-6 h-6 text-purple-400"}),T.jsx("span",{className:"text-2xl font-bold text-white",children:h.lessons+h.quizzes}),T.jsx("span",{className:"text-xs text-slate-400",children:"Total Content"})]})]}),T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-white",children:"Your Classes"}),T.jsx("p",{className:"text-xs text-slate-400",children:"Manage students and content groups"})]}),T.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary/80 text-white px-6 py-3 rounded-xl font-bold transition-all shadow-lg shadow-primary/20",children:[T.jsx(ih,{className:"w-5 h-5"})," Create Class"]})]}),T.jsxs("div",{className:"mb-8 glass-panel p-6 rounded-2xl border border-white/5",children:[T.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Device Configuration"]}),T.jsxs("div",{className:"flex items-end gap-4 max-w-md",children:[T.jsxs("div",{className:"flex-1 space-y-2",children:[T.jsx("label",{className:"text-xs uppercase font-bold text-slate-500",children:"Device IP Address"}),T.jsx("input",{type:"text",value:E,onChange:ee=>S(ee.target.value),placeholder:"192.168.x.x",className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white font-mono focus:border-primary focus:outline-none"})]}),T.jsx("button",{onClick:se,disabled:N,className:"bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-xl font-bold transition-all disabled:opacity-50",children:N?"Saving...":"Update IP"})]}),T.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"This IP is used to identify this teacher device for local syncing."})]}),T.jsx("section",{className:"space-y-4",children:T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.map(ee=>T.jsxs(en.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>t(`/teacher/class/${ee.id}`),className:"glass-panel p-6 rounded-2xl flex items-center justify-between group hover:border-primary/50 transition-all text-left",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center text-purple-400 group-hover:scale-110 transition-transform",children:T.jsx(dm,{className:"w-6 h-6"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-bold text-white text-lg",children:ee.name}),T.jsxs("p",{className:"text-xs text-slate-400",children:[ee.standard,"  ",ee.medium]}),T.jsxs("div",{className:"mt-1 inline-block px-2 py-1 bg-white/10 rounded text-[10px] text-primary font-mono tracking-wider",children:["Code: ",ee.code||"---"]})]})]}),T.jsx(i5,{className:"w-5 h-5 text-slate-500 group-hover:text-white transition-colors"})]},ee.id)),y.length===0&&T.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 glass-panel rounded-2xl border-dashed border-white/10",children:[T.jsx(dm,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),T.jsx("p",{className:"font-medium",children:"No classes yet."}),T.jsx("p",{className:"text-sm opacity-70",children:"Create a class to start adding subjects and students."})]})]})})]})}var g8=typeof window=="object"&&window&&window.Object===Object&&window,qK=typeof self=="object"&&self&&self.Object===Object&&self,po=g8||qK||Function("return this")(),Ql=po.Symbol,y8=Object.prototype,VK=y8.hasOwnProperty,GK=y8.toString,pf=Ql?Ql.toStringTag:void 0;function KK(t){var e=VK.call(t,pf),n=t[pf];try{t[pf]=void 0;var r=!0}catch{}var i=GK.call(t);return r&&(e?t[pf]=n:delete t[pf]),i}var $K=Object.prototype,YK=$K.toString;function XK(t){return YK.call(t)}var WK="[object Null]",QK="[object Undefined]",g3=Ql?Ql.toStringTag:void 0;function Ch(t){return t==null?t===void 0?QK:WK:g3&&g3 in Object(t)?KK(t):XK(t)}function Yo(t){return t!=null&&typeof t=="object"}var zc=Array.isArray;function nc(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function v8(t){return t}var ZK="[object AsyncFunction]",JK="[object Function]",e$="[object GeneratorFunction]",t$="[object Proxy]";function Hw(t){if(!nc(t))return!1;var e=Ch(t);return e==JK||e==e$||e==ZK||e==t$}var Py=po["__core-js_shared__"],y3=(function(){var t=/[^.]+$/.exec(Py&&Py.keys&&Py.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function n$(t){return!!y3&&y3 in t}var r$=Function.prototype,i$=r$.toString;function Yc(t){if(t!=null){try{return i$.call(t)}catch{}try{return t+""}catch{}}return""}var s$=/[\\^$.*+?()[\]{}|]/g,a$=/^\[object .+?Constructor\]$/,o$=Function.prototype,l$=Object.prototype,c$=o$.toString,u$=l$.hasOwnProperty,h$=RegExp("^"+c$.call(u$).replace(s$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f$(t){if(!nc(t)||n$(t))return!1;var e=Hw(t)?h$:a$;return e.test(Yc(t))}function d$(t,e){return t?.[e]}function Xc(t,e){var n=d$(t,e);return f$(n)?n:void 0}var lb=Xc(po,"WeakMap"),v3=Object.create,p$=(function(){function t(){}return function(e){if(!nc(e))return{};if(v3)return v3(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function m$(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function g$(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var y$=800,v$=16,b$=Date.now;function w$(t){var e=0,n=0;return function(){var r=b$(),i=v$-(r-n);if(n=r,i>0){if(++e>=y$)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function x$(t){return function(){return t}}var r1=(function(){try{var t=Xc(Object,"defineProperty");return t({},"",{}),t}catch{}})(),E$=r1?function(t,e){return r1(t,"toString",{configurable:!0,enumerable:!1,value:x$(e),writable:!0})}:v8,S$=w$(E$);function A$(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var C$=9007199254740991,T$=/^(?:0|[1-9]\d*)$/;function b8(t,e){var n=typeof t;return e=e??C$,!!e&&(n=="number"||n!="symbol"&&T$.test(t))&&t>-1&&t%1==0&&t<e}function qw(t,e,n){e=="__proto__"&&r1?r1(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Pd(t,e){return t===e||t!==t&&e!==e}var N$=Object.prototype,_$=N$.hasOwnProperty;function w8(t,e,n){var r=t[e];(!(_$.call(t,e)&&Pd(r,n))||n===void 0&&!(e in t))&&qw(t,e,n)}function O$(t,e,n,r){var i=!n;n||(n={});for(var o=-1,h=e.length;++o<h;){var m=e[o],y=void 0;y===void 0&&(y=t[m]),i?qw(n,m,y):w8(n,m,y)}return n}var b3=Math.max;function I$(t,e,n){return e=b3(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=b3(r.length-e,0),h=Array(o);++i<o;)h[i]=r[e+i];i=-1;for(var m=Array(e+1);++i<e;)m[i]=r[i];return m[e]=n(h),m$(t,this,m)}}function R$(t,e){return S$(I$(t,e,v8),t+"")}var M$=9007199254740991;function x8(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=M$}function D1(t){return t!=null&&x8(t.length)&&!Hw(t)}function D$(t,e,n){if(!nc(n))return!1;var r=typeof e;return(r=="number"?D1(n)&&b8(e,n.length):r=="string"&&e in n)?Pd(n[e],t):!1}function L$(t){return R$(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,h=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,h&&D$(n[0],n[1],h)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var m=n[r];m&&t(e,m,r,o)}return e})}var k$=Object.prototype;function Vw(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||k$;return t===n}function j$(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var B$="[object Arguments]";function w3(t){return Yo(t)&&Ch(t)==B$}var E8=Object.prototype,P$=E8.hasOwnProperty,U$=E8.propertyIsEnumerable,cb=w3((function(){return arguments})())?w3:function(t){return Yo(t)&&P$.call(t,"callee")&&!U$.call(t,"callee")};function F$(){return!1}var S8=typeof Us=="object"&&Us&&!Us.nodeType&&Us,x3=S8&&typeof Fs=="object"&&Fs&&!Fs.nodeType&&Fs,z$=x3&&x3.exports===S8,E3=z$?po.Buffer:void 0,H$=E3?E3.isBuffer:void 0,ld=H$||F$,q$="[object Arguments]",V$="[object Array]",G$="[object Boolean]",K$="[object Date]",$$="[object Error]",Y$="[object Function]",X$="[object Map]",W$="[object Number]",Q$="[object Object]",Z$="[object RegExp]",J$="[object Set]",eY="[object String]",tY="[object WeakMap]",nY="[object ArrayBuffer]",rY="[object DataView]",iY="[object Float32Array]",sY="[object Float64Array]",aY="[object Int8Array]",oY="[object Int16Array]",lY="[object Int32Array]",cY="[object Uint8Array]",uY="[object Uint8ClampedArray]",hY="[object Uint16Array]",fY="[object Uint32Array]",kr={};kr[iY]=kr[sY]=kr[aY]=kr[oY]=kr[lY]=kr[cY]=kr[uY]=kr[hY]=kr[fY]=!0;kr[q$]=kr[V$]=kr[nY]=kr[G$]=kr[rY]=kr[K$]=kr[$$]=kr[Y$]=kr[X$]=kr[W$]=kr[Q$]=kr[Z$]=kr[J$]=kr[eY]=kr[tY]=!1;function dY(t){return Yo(t)&&x8(t.length)&&!!kr[Ch(t)]}function Gw(t){return function(e){return t(e)}}var A8=typeof Us=="object"&&Us&&!Us.nodeType&&Us,Pf=A8&&typeof Fs=="object"&&Fs&&!Fs.nodeType&&Fs,pY=Pf&&Pf.exports===A8,Uy=pY&&g8.process,ph=(function(){try{var t=Pf&&Pf.require&&Pf.require("util").types;return t||Uy&&Uy.binding&&Uy.binding("util")}catch{}})(),S3=ph&&ph.isTypedArray,Kw=S3?Gw(S3):dY,mY=Object.prototype,gY=mY.hasOwnProperty;function C8(t,e){var n=zc(t),r=!n&&cb(t),i=!n&&!r&&ld(t),o=!n&&!r&&!i&&Kw(t),h=n||r||i||o,m=h?j$(t.length,String):[],y=m.length;for(var g in t)(e||gY.call(t,g))&&!(h&&(g=="length"||i&&(g=="offset"||g=="parent")||o&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||b8(g,y)))&&m.push(g);return m}function T8(t,e){return function(n){return t(e(n))}}var yY=T8(Object.keys,Object),vY=Object.prototype,bY=vY.hasOwnProperty;function wY(t){if(!Vw(t))return yY(t);var e=[];for(var n in Object(t))bY.call(t,n)&&n!="constructor"&&e.push(n);return e}function xY(t){return D1(t)?C8(t):wY(t)}function EY(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var SY=Object.prototype,AY=SY.hasOwnProperty;function CY(t){if(!nc(t))return EY(t);var e=Vw(t),n=[];for(var r in t)r=="constructor"&&(e||!AY.call(t,r))||n.push(r);return n}function N8(t){return D1(t)?C8(t,!0):CY(t)}var cd=Xc(Object,"create");function TY(){this.__data__=cd?cd(null):{},this.size=0}function NY(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var _Y="__lodash_hash_undefined__",OY=Object.prototype,IY=OY.hasOwnProperty;function RY(t){var e=this.__data__;if(cd){var n=e[t];return n===_Y?void 0:n}return IY.call(e,t)?e[t]:void 0}var MY=Object.prototype,DY=MY.hasOwnProperty;function LY(t){var e=this.__data__;return cd?e[t]!==void 0:DY.call(e,t)}var kY="__lodash_hash_undefined__";function jY(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=cd&&e===void 0?kY:e,this}function Hc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hc.prototype.clear=TY;Hc.prototype.delete=NY;Hc.prototype.get=RY;Hc.prototype.has=LY;Hc.prototype.set=jY;function BY(){this.__data__=[],this.size=0}function L1(t,e){for(var n=t.length;n--;)if(Pd(t[n][0],e))return n;return-1}var PY=Array.prototype,UY=PY.splice;function FY(t){var e=this.__data__,n=L1(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():UY.call(e,n,1),--this.size,!0}function zY(t){var e=this.__data__,n=L1(e,t);return n<0?void 0:e[n][1]}function HY(t){return L1(this.__data__,t)>-1}function qY(t,e){var n=this.__data__,r=L1(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Zo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zo.prototype.clear=BY;Zo.prototype.delete=FY;Zo.prototype.get=zY;Zo.prototype.has=HY;Zo.prototype.set=qY;var ud=Xc(po,"Map");function VY(){this.size=0,this.__data__={hash:new Hc,map:new(ud||Zo),string:new Hc}}function GY(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function k1(t,e){var n=t.__data__;return GY(e)?n[typeof e=="string"?"string":"hash"]:n.map}function KY(t){var e=k1(this,t).delete(t);return this.size-=e?1:0,e}function $Y(t){return k1(this,t).get(t)}function YY(t){return k1(this,t).has(t)}function XY(t,e){var n=k1(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Wc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wc.prototype.clear=VY;Wc.prototype.delete=KY;Wc.prototype.get=$Y;Wc.prototype.has=YY;Wc.prototype.set=XY;function WY(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var _8=T8(Object.getPrototypeOf,Object),QY="[object Object]",ZY=Function.prototype,JY=Object.prototype,O8=ZY.toString,eX=JY.hasOwnProperty,tX=O8.call(Object);function nX(t){if(!Yo(t)||Ch(t)!=QY)return!1;var e=_8(t);if(e===null)return!0;var n=eX.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&O8.call(n)==tX}function rX(){this.__data__=new Zo,this.size=0}function iX(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function sX(t){return this.__data__.get(t)}function aX(t){return this.__data__.has(t)}var oX=200;function lX(t,e){var n=this.__data__;if(n instanceof Zo){var r=n.__data__;if(!ud||r.length<oX-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wc(r)}return n.set(t,e),this.size=n.size,this}function so(t){var e=this.__data__=new Zo(t);this.size=e.size}so.prototype.clear=rX;so.prototype.delete=iX;so.prototype.get=sX;so.prototype.has=aX;so.prototype.set=lX;var I8=typeof Us=="object"&&Us&&!Us.nodeType&&Us,A3=I8&&typeof Fs=="object"&&Fs&&!Fs.nodeType&&Fs,cX=A3&&A3.exports===I8,C3=cX?po.Buffer:void 0,T3=C3?C3.allocUnsafe:void 0;function R8(t,e){if(e)return t.slice();var n=t.length,r=T3?T3(n):new t.constructor(n);return t.copy(r),r}function uX(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var h=t[n];e(h,n,t)&&(o[i++]=h)}return o}function hX(){return[]}var fX=Object.prototype,dX=fX.propertyIsEnumerable,N3=Object.getOwnPropertySymbols,pX=N3?function(t){return t==null?[]:(t=Object(t),uX(N3(t),function(e){return dX.call(t,e)}))}:hX;function mX(t,e,n){var r=e(t);return zc(t)?r:WY(r,n(t))}function ub(t){return mX(t,xY,pX)}var hb=Xc(po,"DataView"),fb=Xc(po,"Promise"),db=Xc(po,"Set"),_3="[object Map]",gX="[object Object]",O3="[object Promise]",I3="[object Set]",R3="[object WeakMap]",M3="[object DataView]",yX=Yc(hb),vX=Yc(ud),bX=Yc(fb),wX=Yc(db),xX=Yc(lb),La=Ch;(hb&&La(new hb(new ArrayBuffer(1)))!=M3||ud&&La(new ud)!=_3||fb&&La(fb.resolve())!=O3||db&&La(new db)!=I3||lb&&La(new lb)!=R3)&&(La=function(t){var e=Ch(t),n=e==gX?t.constructor:void 0,r=n?Yc(n):"";if(r)switch(r){case yX:return M3;case vX:return _3;case bX:return O3;case wX:return I3;case xX:return R3}return e});var EX=Object.prototype,SX=EX.hasOwnProperty;function AX(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&SX.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var i1=po.Uint8Array;function $w(t){var e=new t.constructor(t.byteLength);return new i1(e).set(new i1(t)),e}function CX(t,e){var n=$w(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var TX=/\w*$/;function NX(t){var e=new t.constructor(t.source,TX.exec(t));return e.lastIndex=t.lastIndex,e}var D3=Ql?Ql.prototype:void 0,L3=D3?D3.valueOf:void 0;function _X(t){return L3?Object(L3.call(t)):{}}function M8(t,e){var n=e?$w(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var OX="[object Boolean]",IX="[object Date]",RX="[object Map]",MX="[object Number]",DX="[object RegExp]",LX="[object Set]",kX="[object String]",jX="[object Symbol]",BX="[object ArrayBuffer]",PX="[object DataView]",UX="[object Float32Array]",FX="[object Float64Array]",zX="[object Int8Array]",HX="[object Int16Array]",qX="[object Int32Array]",VX="[object Uint8Array]",GX="[object Uint8ClampedArray]",KX="[object Uint16Array]",$X="[object Uint32Array]";function YX(t,e,n){var r=t.constructor;switch(e){case BX:return $w(t);case OX:case IX:return new r(+t);case PX:return CX(t);case UX:case FX:case zX:case HX:case qX:case VX:case GX:case KX:case $X:return M8(t,n);case RX:return new r;case MX:case kX:return new r(t);case DX:return NX(t);case LX:return new r;case jX:return _X(t)}}function D8(t){return typeof t.constructor=="function"&&!Vw(t)?p$(_8(t)):{}}var XX="[object Map]";function WX(t){return Yo(t)&&La(t)==XX}var k3=ph&&ph.isMap,QX=k3?Gw(k3):WX,ZX="[object Set]";function JX(t){return Yo(t)&&La(t)==ZX}var j3=ph&&ph.isSet,eW=j3?Gw(j3):JX,tW=1,L8="[object Arguments]",nW="[object Array]",rW="[object Boolean]",iW="[object Date]",sW="[object Error]",k8="[object Function]",aW="[object GeneratorFunction]",oW="[object Map]",lW="[object Number]",j8="[object Object]",cW="[object RegExp]",uW="[object Set]",hW="[object String]",fW="[object Symbol]",dW="[object WeakMap]",pW="[object ArrayBuffer]",mW="[object DataView]",gW="[object Float32Array]",yW="[object Float64Array]",vW="[object Int8Array]",bW="[object Int16Array]",wW="[object Int32Array]",xW="[object Uint8Array]",EW="[object Uint8ClampedArray]",SW="[object Uint16Array]",AW="[object Uint32Array]",Nr={};Nr[L8]=Nr[nW]=Nr[pW]=Nr[mW]=Nr[rW]=Nr[iW]=Nr[gW]=Nr[yW]=Nr[vW]=Nr[bW]=Nr[wW]=Nr[oW]=Nr[lW]=Nr[j8]=Nr[cW]=Nr[uW]=Nr[hW]=Nr[fW]=Nr[xW]=Nr[EW]=Nr[SW]=Nr[AW]=!0;Nr[sW]=Nr[k8]=Nr[dW]=!1;function Tm(t,e,n,r,i,o){var h,m=e&tW;if(h!==void 0)return h;if(!nc(t))return t;var y=zc(t);if(y)h=AX(t);else{var g=La(t),E=g==k8||g==aW;if(ld(t))return R8(t,m);if(g==j8||g==L8||E&&!i)h=E?{}:D8(t);else{if(!Nr[g])return i?t:{};h=YX(t,g,m)}}o||(o=new so);var S=o.get(t);if(S)return S;o.set(t,h),eW(t)?t.forEach(function(R){h.add(Tm(R,e,n,R,t,o))}):QX(t)&&t.forEach(function(R,D){h.set(D,Tm(R,e,n,D,t,o))});var N=ub,I=y?void 0:N(t);return A$(I||t,function(R,D){I&&(D=R,R=t[D]),w8(h,D,Tm(R,e,n,D,t,o))}),h}var CW=1,TW=4;function Ju(t){return Tm(t,CW|TW)}var NW="__lodash_hash_undefined__";function _W(t){return this.__data__.set(t,NW),this}function OW(t){return this.__data__.has(t)}function s1(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Wc;++e<n;)this.add(t[e])}s1.prototype.add=s1.prototype.push=_W;s1.prototype.has=OW;function IW(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function RW(t,e){return t.has(e)}var MW=1,DW=2;function B8(t,e,n,r,i,o){var h=n&MW,m=t.length,y=e.length;if(m!=y&&!(h&&y>m))return!1;var g=o.get(t),E=o.get(e);if(g&&E)return g==e&&E==t;var S=-1,N=!0,I=n&DW?new s1:void 0;for(o.set(t,e),o.set(e,t);++S<m;){var R=t[S],D=e[S];if(r)var j=h?r(D,R,S,e,t,o):r(R,D,S,t,e,o);if(j!==void 0){if(j)continue;N=!1;break}if(I){if(!IW(e,function(B,H){if(!RW(I,H)&&(R===B||i(R,B,n,r,o)))return I.push(H)})){N=!1;break}}else if(!(R===D||i(R,D,n,r,o))){N=!1;break}}return o.delete(t),o.delete(e),N}function LW(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function kW(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var jW=1,BW=2,PW="[object Boolean]",UW="[object Date]",FW="[object Error]",zW="[object Map]",HW="[object Number]",qW="[object RegExp]",VW="[object Set]",GW="[object String]",KW="[object Symbol]",$W="[object ArrayBuffer]",YW="[object DataView]",B3=Ql?Ql.prototype:void 0,Fy=B3?B3.valueOf:void 0;function XW(t,e,n,r,i,o,h){switch(n){case YW:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $W:return!(t.byteLength!=e.byteLength||!o(new i1(t),new i1(e)));case PW:case UW:case HW:return Pd(+t,+e);case FW:return t.name==e.name&&t.message==e.message;case qW:case GW:return t==e+"";case zW:var m=LW;case VW:var y=r&jW;if(m||(m=kW),t.size!=e.size&&!y)return!1;var g=h.get(t);if(g)return g==e;r|=BW,h.set(t,e);var E=B8(m(t),m(e),r,i,o,h);return h.delete(t),E;case KW:if(Fy)return Fy.call(t)==Fy.call(e)}return!1}var WW=1,QW=Object.prototype,ZW=QW.hasOwnProperty;function JW(t,e,n,r,i,o){var h=n&WW,m=ub(t),y=m.length,g=ub(e),E=g.length;if(y!=E&&!h)return!1;for(var S=y;S--;){var N=m[S];if(!(h?N in e:ZW.call(e,N)))return!1}var I=o.get(t),R=o.get(e);if(I&&R)return I==e&&R==t;var D=!0;o.set(t,e),o.set(e,t);for(var j=h;++S<y;){N=m[S];var B=t[N],H=e[N];if(r)var V=h?r(H,B,N,e,t,o):r(B,H,N,t,e,o);if(!(V===void 0?B===H||i(B,H,n,r,o):V)){D=!1;break}j||(j=N=="constructor")}if(D&&!j){var se=t.constructor,ee=e.constructor;se!=ee&&"constructor"in t&&"constructor"in e&&!(typeof se=="function"&&se instanceof se&&typeof ee=="function"&&ee instanceof ee)&&(D=!1)}return o.delete(t),o.delete(e),D}var eQ=1,P3="[object Arguments]",U3="[object Array]",em="[object Object]",tQ=Object.prototype,F3=tQ.hasOwnProperty;function nQ(t,e,n,r,i,o){var h=zc(t),m=zc(e),y=h?U3:La(t),g=m?U3:La(e);y=y==P3?em:y,g=g==P3?em:g;var E=y==em,S=g==em,N=y==g;if(N&&ld(t)){if(!ld(e))return!1;h=!0,E=!1}if(N&&!E)return o||(o=new so),h||Kw(t)?B8(t,e,n,r,i,o):XW(t,e,y,n,r,i,o);if(!(n&eQ)){var I=E&&F3.call(t,"__wrapped__"),R=S&&F3.call(e,"__wrapped__");if(I||R){var D=I?t.value():t,j=R?e.value():e;return o||(o=new so),i(D,j,n,r,o)}}return N?(o||(o=new so),JW(t,e,n,r,i,o)):!1}function P8(t,e,n,r,i){return t===e?!0:t==null||e==null||!Yo(t)&&!Yo(e)?t!==t&&e!==e:nQ(t,e,n,r,P8,i)}function rQ(t){return function(e,n,r){for(var i=-1,o=Object(e),h=r(e),m=h.length;m--;){var y=h[++i];if(n(o[y],y,o)===!1)break}return e}}var iQ=rQ();function pb(t,e,n){(n!==void 0&&!Pd(t[e],n)||n===void 0&&!(e in t))&&qw(t,e,n)}function sQ(t){return Yo(t)&&D1(t)}function mb(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function aQ(t){return O$(t,N8(t))}function oQ(t,e,n,r,i,o,h){var m=mb(t,n),y=mb(e,n),g=h.get(y);if(g){pb(t,n,g);return}var E=o?o(m,y,n+"",t,e,h):void 0,S=E===void 0;if(S){var N=zc(y),I=!N&&ld(y),R=!N&&!I&&Kw(y);E=y,N||I||R?zc(m)?E=m:sQ(m)?E=g$(m):I?(S=!1,E=R8(y,!0)):R?(S=!1,E=M8(y,!0)):E=[]:nX(y)||cb(y)?(E=m,cb(m)?E=aQ(m):(!nc(m)||Hw(m))&&(E=D8(y))):S=!1}S&&(h.set(y,E),i(E,y,r,o,h),h.delete(y)),pb(t,n,E)}function U8(t,e,n,r,i){t!==e&&iQ(e,function(o,h){if(i||(i=new so),nc(o))oQ(t,e,h,n,U8,r,i);else{var m=r?r(mb(t,h),o,h+"",t,e,i):void 0;m===void 0&&(m=o),pb(t,h,m)}},N8)}function jl(t,e){return P8(t,e)}var ql=L$(function(t,e,n){U8(t,e,n)}),Lt=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(Lt||{});class uo{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const i=Lt.TYPE&Lt.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Lt.LEVEL|i:Lt.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class eh extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const F8=class gb{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const i=this.query(n);if(i==null)throw new eh(`Unable to create ${n} blot`);const o=i,h=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:o.create(r),m=new o(e,h,r);return gb.blots.set(m.domNode,m),m}find(e,n=!1){return gb.find(e,n)}query(e,n=Lt.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Lt.LEVEL&Lt.BLOCK?r=this.types.block:e&Lt.LEVEL&Lt.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&Lt.LEVEL&r.scope&&n&Lt.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,i="attrName"in n;if(!r&&!i)throw new eh("Invalid definition");if(r&&n.blotName==="abstract")throw new eh("Cannot register abstract class");const o=r?n.blotName:i?n.attrName:void 0;return this.types[o]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(h=>h.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(h=>{(this.tags[h]==null||n.className==null)&&(this.tags[h]=n)}))),n})}};F8.blots=new WeakMap;let mh=F8;function z3(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class lQ extends uo{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){z3(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(z3(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const za=lQ;function zy(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class cQ extends uo{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[zy(this.keyName)]=n,!0):!1}remove(e){e.style[zy(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[zy(this.keyName)];return this.canAdd(e,n)?n:""}}const rc=cQ;class uQ{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=mh.find(this.domNode);if(e==null)return;const n=uo.keys(this.domNode),r=za.keys(this.domNode),i=rc.keys(this.domNode);n.concat(r).concat(i).forEach(o=>{const h=e.scroll.query(o,Lt.ATTRIBUTE);h instanceof uo&&(this.attributes[h.attrName]=h)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const j1=uQ,z8=class{constructor(e,n){this.scroll=e,this.domNode=n,mh.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new eh("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),mh.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,i){const o=this.isolate(e,n);if(this.scroll.query(r,Lt.BLOT)!=null&&i)o.wrap(r,i);else if(this.scroll.query(r,Lt.ATTRIBUTE)!=null){const h=this.scroll.create(this.statics.scope);o.wrap(h),h.format(r,i)}}insertAt(e,n,r){const i=r==null?this.scroll.create("text",n):this.scroll.create(n,r),o=this.split(e);this.parent.insertBefore(i,o||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new eh(`Cannot wrap ${e}`);return r.appendChild(this),r}};z8.blotName="abstract";let H8=z8;const q8=class extends H8{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};q8.scope=Lt.INLINE_BLOT;let hQ=q8;const Zi=hQ;class fQ{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),i=0;for(;r;){if(r===e)return i;i+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let i=r();for(;i;){const o=i.length();if(e<o||n&&e===o&&(i.next==null||i.next.length()!==0))return[i,e];e-=o,i=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[i,o]=this.find(e);let h=e-o;const m=this.iterator(i);let y=m();for(;y&&h<e+n;){const g=y.length();e>h?r(y,e-h,Math.min(n,h+g-e)):r(y,0,Math.min(g,e+n-h)),h+=g,y=m()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let i=r();for(;i;)n=e(n,i),i=r();return n}}function H3(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(Lt.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const V8=class Ml extends H8{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Ml.uiClass&&this.uiNode.classList.add(Ml.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new fQ,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=H3(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof eh)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,i,o)=>{r.deleteAt(i,o)})}descendant(e,n=0){const[r,i]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof Ml?r.descendant(e,i):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let i=[],o=r;return this.children.forEachAt(n,r,(h,m,y)=>{(e.blotName==null&&e(h)||e.blotName!=null&&h instanceof e)&&i.push(h),h instanceof Ml&&(i=i.concat(h.descendants(e,m,o))),o-=y}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===Lt.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof Ml?n.unwrap():n.remove())})}formatAt(e,n,r,i){this.children.forEachAt(e,n,(o,h,m)=>{o.formatAt(h,m,r,i)})}insertAt(e,n,r){const[i,o]=this.children.find(e);if(i)i.insertAt(o,n,r);else{const h=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(h)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,i]=this.children.find(e,n),o=[[this,e]];return r instanceof Ml?o.concat(r.path(i,n)):(r!=null&&o.push([r,i]),o)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof Ml&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,o,h)=>{const m=i.split(o,n);m!=null&&r.appendChild(m)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],i=[];e.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(r.push(...o.addedNodes),i.push(...o.removedNodes))}),i.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const h=this.scroll.find(o);h!=null&&(h.domNode.parentNode==null||h.domNode.parentNode===this.domNode)&&h.detach()}),r.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,h)=>o===h?0:o.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let h=null;o.nextSibling!=null&&(h=this.scroll.find(o.nextSibling));const m=H3(o,this.scroll);(m.next!==h||m.next==null)&&(m.parent!=null&&m.parent.removeChild(this),this.insertBefore(m,h||void 0))}),this.enforceAllowedChildren()}};V8.uiClass="";let dQ=V8;const Ba=dQ;function pQ(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const Du=class Lu extends Ba{static create(e){return super.create(e)}static formats(e,n){const r=n.query(Lu.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new j1(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof Lu||(r=r.wrap(Lu.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Lt.INLINE);if(r==null)return;r instanceof uo?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.formats()[r]!=null||this.scroll.query(r,Lt.ATTRIBUTE)?this.isolate(e,n).format(r,i):super.formatAt(e,n,r,i)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof Lu&&r.prev===this&&pQ(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof Lu&&this.attributes.move(r),r}};Du.allowedChildren=[Du,Zi],Du.blotName="inline",Du.scope=Lt.INLINE_BLOT,Du.tagName="SPAN";let mQ=Du;const Yw=mQ,ku=class yb extends Ba{static create(e){return super.create(e)}static formats(e,n){const r=n.query(yb.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new j1(this.domNode)}format(e,n){const r=this.scroll.query(e,Lt.BLOCK);r!=null&&(r instanceof uo?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith(yb.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.scroll.query(r,Lt.BLOCK)!=null?this.format(r,i):super.formatAt(e,n,r,i)}insertAt(e,n,r){if(r==null||this.scroll.query(n,Lt.INLINE)!=null)super.insertAt(e,n,r);else{const i=this.split(e);if(i!=null){const o=this.scroll.create(n,r);i.parent.insertBefore(o,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};ku.blotName="block",ku.scope=Lt.BLOCK_BLOT,ku.tagName="P",ku.allowedChildren=[Yw,ku,Zi];let gQ=ku;const hd=gQ,vb=class extends Ba{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};vb.blotName="container",vb.scope=Lt.BLOCK_BLOT;let yQ=vb;const B1=yQ;class vQ extends Zi{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,i){e===0&&n===this.length()?this.format(r,i):super.formatAt(e,n,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Xs=vQ,bQ={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},wQ=100,ju=class extends Ba{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,bQ),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=Lt.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,i){this.update(),super.formatAt(e,n,r,i)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const o=(y,g=!0)=>{y==null||y===this||y.domNode.parentNode!=null&&(r.has(y.domNode)||r.set(y.domNode,[]),g&&o(y.parent))},h=y=>{r.has(y.domNode)&&(y instanceof Ba&&y.children.forEach(h),r.delete(y.domNode),y.optimize(n))};let m=e;for(let y=0;m.length>0;y+=1){if(y>=wQ)throw new Error("[Parchment] Maximum optimize iterations reached");for(m.forEach(g=>{const E=this.find(g.target,!0);E!=null&&(E.domNode===g.target&&(g.type==="childList"?(o(this.find(g.previousSibling,!1)),Array.from(g.addedNodes).forEach(S=>{const N=this.find(S,!1);o(N,!1),N instanceof Ba&&N.children.forEach(I=>{o(I,!1)})})):g.type==="attributes"&&o(E.prev)),o(E))}),this.children.forEach(h),m=Array.from(this.observer.takeRecords()),i=m.slice();i.length>0;)e.push(i.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const o=this.find(i.target,!0);return o==null?null:r.has(o.domNode)?(r.get(o.domNode).push(i),null):(r.set(o.domNode,[i]),o)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};ju.blotName="scroll",ju.defaultChild=hd,ju.allowedChildren=[hd,B1],ju.scope=Lt.BLOCK_BLOT,ju.tagName="DIV";let xQ=ju;const Xw=xQ,bb=class G8 extends Zi{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof G8&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};bb.blotName="text",bb.scope=Lt.INLINE_BLOT;let EQ=bb;const a1=EQ,SQ=Object.freeze(Object.defineProperty({__proto__:null,Attributor:uo,AttributorStore:j1,BlockBlot:hd,ClassAttributor:za,ContainerBlot:B1,EmbedBlot:Xs,InlineBlot:Yw,LeafBlot:Zi,ParentBlot:Ba,Registry:mh,Scope:Lt,ScrollBlot:Xw,StyleAttributor:rc,TextBlot:a1},Symbol.toStringTag,{value:"Module"}));var tm={exports:{}},Hy,q3;function AQ(){if(q3)return Hy;q3=1;var t=-1,e=1,n=0;function r(Q,fe,he,Ne,ie){if(Q===fe)return Q?[[n,Q]]:[];if(he!=null){var Y=de(Q,fe,he);if(Y)return Y}var oe=m(Q,fe),ve=Q.substring(0,oe);Q=Q.substring(oe),fe=fe.substring(oe),oe=g(Q,fe);var Ee=Q.substring(Q.length-oe);Q=Q.substring(0,Q.length-oe),fe=fe.substring(0,fe.length-oe);var be=i(Q,fe);return ve&&be.unshift([n,ve]),Ee&&be.push([n,Ee]),H(be,ie),Ne&&S(be),be}function i(Q,fe){var he;if(!Q)return[[e,fe]];if(!fe)return[[t,Q]];var Ne=Q.length>fe.length?Q:fe,ie=Q.length>fe.length?fe:Q,Y=Ne.indexOf(ie);if(Y!==-1)return he=[[e,Ne.substring(0,Y)],[n,ie],[e,Ne.substring(Y+ie.length)]],Q.length>fe.length&&(he[0][0]=he[2][0]=t),he;if(ie.length===1)return[[t,Q],[e,fe]];var oe=E(Q,fe);if(oe){var ve=oe[0],Ee=oe[1],be=oe[2],ne=oe[3],ye=oe[4],Ce=r(ve,be),ke=r(Ee,ne);return Ce.concat([[n,ye]],ke)}return o(Q,fe)}function o(Q,fe){for(var he=Q.length,Ne=fe.length,ie=Math.ceil((he+Ne)/2),Y=ie,oe=2*ie,ve=new Array(oe),Ee=new Array(oe),be=0;be<oe;be++)ve[be]=-1,Ee[be]=-1;ve[Y+1]=0,Ee[Y+1]=0;for(var ne=he-Ne,ye=ne%2!==0,Ce=0,ke=0,He=0,Fe=0,Ct=0;Ct<ie;Ct++){for(var dt=-Ct+Ce;dt<=Ct-ke;dt+=2){var Ze=Y+dt,Wt;dt===-Ct||dt!==Ct&&ve[Ze-1]<ve[Ze+1]?Wt=ve[Ze+1]:Wt=ve[Ze-1]+1;for(var kt=Wt-dt;Wt<he&&kt<Ne&&Q.charAt(Wt)===fe.charAt(kt);)Wt++,kt++;if(ve[Ze]=Wt,Wt>he)ke+=2;else if(kt>Ne)Ce+=2;else if(ye){var ht=Y+ne-dt;if(ht>=0&&ht<oe&&Ee[ht]!==-1){var mt=he-Ee[ht];if(Wt>=mt)return h(Q,fe,Wt,kt)}}}for(var bn=-Ct+He;bn<=Ct-Fe;bn+=2){var ht=Y+bn,mt;bn===-Ct||bn!==Ct&&Ee[ht-1]<Ee[ht+1]?mt=Ee[ht+1]:mt=Ee[ht-1]+1;for(var mn=mt-bn;mt<he&&mn<Ne&&Q.charAt(he-mt-1)===fe.charAt(Ne-mn-1);)mt++,mn++;if(Ee[ht]=mt,mt>he)Fe+=2;else if(mn>Ne)He+=2;else if(!ye){var Ze=Y+ne-bn;if(Ze>=0&&Ze<oe&&ve[Ze]!==-1){var Wt=ve[Ze],kt=Y+Wt-Ze;if(mt=he-mt,Wt>=mt)return h(Q,fe,Wt,kt)}}}}return[[t,Q],[e,fe]]}function h(Q,fe,he,Ne){var ie=Q.substring(0,he),Y=fe.substring(0,Ne),oe=Q.substring(he),ve=fe.substring(Ne),Ee=r(ie,Y),be=r(oe,ve);return Ee.concat(be)}function m(Q,fe){if(!Q||!fe||Q.charAt(0)!==fe.charAt(0))return 0;for(var he=0,Ne=Math.min(Q.length,fe.length),ie=Ne,Y=0;he<ie;)Q.substring(Y,ie)==fe.substring(Y,ie)?(he=ie,Y=he):Ne=ie,ie=Math.floor((Ne-he)/2+he);return V(Q.charCodeAt(ie-1))&&ie--,ie}function y(Q,fe){var he=Q.length,Ne=fe.length;if(he==0||Ne==0)return 0;he>Ne?Q=Q.substring(he-Ne):he<Ne&&(fe=fe.substring(0,he));var ie=Math.min(he,Ne);if(Q==fe)return ie;for(var Y=0,oe=1;;){var ve=Q.substring(ie-oe),Ee=fe.indexOf(ve);if(Ee==-1)return Y;oe+=Ee,(Ee==0||Q.substring(ie-oe)==fe.substring(0,oe))&&(Y=oe,oe++)}}function g(Q,fe){if(!Q||!fe||Q.slice(-1)!==fe.slice(-1))return 0;for(var he=0,Ne=Math.min(Q.length,fe.length),ie=Ne,Y=0;he<ie;)Q.substring(Q.length-ie,Q.length-Y)==fe.substring(fe.length-ie,fe.length-Y)?(he=ie,Y=he):Ne=ie,ie=Math.floor((Ne-he)/2+he);return se(Q.charCodeAt(Q.length-ie))&&ie--,ie}function E(Q,fe){var he=Q.length>fe.length?Q:fe,Ne=Q.length>fe.length?fe:Q;if(he.length<4||Ne.length*2<he.length)return null;function ie(ke,He,Fe){for(var Ct=ke.substring(Fe,Fe+Math.floor(ke.length/4)),dt=-1,Ze="",Wt,kt,ht,mt;(dt=He.indexOf(Ct,dt+1))!==-1;){var bn=m(ke.substring(Fe),He.substring(dt)),mn=g(ke.substring(0,Fe),He.substring(0,dt));Ze.length<mn+bn&&(Ze=He.substring(dt-mn,dt)+He.substring(dt,dt+bn),Wt=ke.substring(0,Fe-mn),kt=ke.substring(Fe+bn),ht=He.substring(0,dt-mn),mt=He.substring(dt+bn))}return Ze.length*2>=ke.length?[Wt,kt,ht,mt,Ze]:null}var Y=ie(he,Ne,Math.ceil(he.length/4)),oe=ie(he,Ne,Math.ceil(he.length/2)),ve;if(!Y&&!oe)return null;oe?Y?ve=Y[4].length>oe[4].length?Y:oe:ve=oe:ve=Y;var Ee,be,ne,ye;Q.length>fe.length?(Ee=ve[0],be=ve[1],ne=ve[2],ye=ve[3]):(ne=ve[0],ye=ve[1],Ee=ve[2],be=ve[3]);var Ce=ve[4];return[Ee,be,ne,ye,Ce]}function S(Q){for(var fe=!1,he=[],Ne=0,ie=null,Y=0,oe=0,ve=0,Ee=0,be=0;Y<Q.length;)Q[Y][0]==n?(he[Ne++]=Y,oe=Ee,ve=be,Ee=0,be=0,ie=Q[Y][1]):(Q[Y][0]==e?Ee+=Q[Y][1].length:be+=Q[Y][1].length,ie&&ie.length<=Math.max(oe,ve)&&ie.length<=Math.max(Ee,be)&&(Q.splice(he[Ne-1],0,[t,ie]),Q[he[Ne-1]+1][0]=e,Ne--,Ne--,Y=Ne>0?he[Ne-1]:-1,oe=0,ve=0,Ee=0,be=0,ie=null,fe=!0)),Y++;for(fe&&H(Q),B(Q),Y=1;Y<Q.length;){if(Q[Y-1][0]==t&&Q[Y][0]==e){var ne=Q[Y-1][1],ye=Q[Y][1],Ce=y(ne,ye),ke=y(ye,ne);Ce>=ke?(Ce>=ne.length/2||Ce>=ye.length/2)&&(Q.splice(Y,0,[n,ye.substring(0,Ce)]),Q[Y-1][1]=ne.substring(0,ne.length-Ce),Q[Y+1][1]=ye.substring(Ce),Y++):(ke>=ne.length/2||ke>=ye.length/2)&&(Q.splice(Y,0,[n,ne.substring(0,ke)]),Q[Y-1][0]=e,Q[Y-1][1]=ye.substring(0,ye.length-ke),Q[Y+1][0]=t,Q[Y+1][1]=ne.substring(ke),Y++),Y++}Y++}}var N=/[^a-zA-Z0-9]/,I=/\s/,R=/[\r\n]/,D=/\n\r?\n$/,j=/^\r?\n\r?\n/;function B(Q){function fe(ke,He){if(!ke||!He)return 6;var Fe=ke.charAt(ke.length-1),Ct=He.charAt(0),dt=Fe.match(N),Ze=Ct.match(N),Wt=dt&&Fe.match(I),kt=Ze&&Ct.match(I),ht=Wt&&Fe.match(R),mt=kt&&Ct.match(R),bn=ht&&ke.match(D),mn=mt&&He.match(j);return bn||mn?5:ht||mt?4:dt&&!Wt&&kt?3:Wt||kt?2:dt||Ze?1:0}for(var he=1;he<Q.length-1;){if(Q[he-1][0]==n&&Q[he+1][0]==n){var Ne=Q[he-1][1],ie=Q[he][1],Y=Q[he+1][1],oe=g(Ne,ie);if(oe){var ve=ie.substring(ie.length-oe);Ne=Ne.substring(0,Ne.length-oe),ie=ve+ie.substring(0,ie.length-oe),Y=ve+Y}for(var Ee=Ne,be=ie,ne=Y,ye=fe(Ne,ie)+fe(ie,Y);ie.charAt(0)===Y.charAt(0);){Ne+=ie.charAt(0),ie=ie.substring(1)+Y.charAt(0),Y=Y.substring(1);var Ce=fe(Ne,ie)+fe(ie,Y);Ce>=ye&&(ye=Ce,Ee=Ne,be=ie,ne=Y)}Q[he-1][1]!=Ee&&(Ee?Q[he-1][1]=Ee:(Q.splice(he-1,1),he--),Q[he][1]=be,ne?Q[he+1][1]=ne:(Q.splice(he+1,1),he--))}he++}}function H(Q,fe){Q.push([n,""]);for(var he=0,Ne=0,ie=0,Y="",oe="",ve;he<Q.length;){if(he<Q.length-1&&!Q[he][1]){Q.splice(he,1);continue}switch(Q[he][0]){case e:ie++,oe+=Q[he][1],he++;break;case t:Ne++,Y+=Q[he][1],he++;break;case n:var Ee=he-ie-Ne-1;if(fe){if(Ee>=0&&J(Q[Ee][1])){var be=Q[Ee][1].slice(-1);if(Q[Ee][1]=Q[Ee][1].slice(0,-1),Y=be+Y,oe=be+oe,!Q[Ee][1]){Q.splice(Ee,1),he--;var ne=Ee-1;Q[ne]&&Q[ne][0]===e&&(ie++,oe=Q[ne][1]+oe,ne--),Q[ne]&&Q[ne][0]===t&&(Ne++,Y=Q[ne][1]+Y,ne--),Ee=ne}}if(ee(Q[he][1])){var be=Q[he][1].charAt(0);Q[he][1]=Q[he][1].slice(1),Y+=be,oe+=be}}if(he<Q.length-1&&!Q[he][1]){Q.splice(he,1);break}if(Y.length>0||oe.length>0){Y.length>0&&oe.length>0&&(ve=m(oe,Y),ve!==0&&(Ee>=0?Q[Ee][1]+=oe.substring(0,ve):(Q.splice(0,0,[n,oe.substring(0,ve)]),he++),oe=oe.substring(ve),Y=Y.substring(ve)),ve=g(oe,Y),ve!==0&&(Q[he][1]=oe.substring(oe.length-ve)+Q[he][1],oe=oe.substring(0,oe.length-ve),Y=Y.substring(0,Y.length-ve)));var ye=ie+Ne;Y.length===0&&oe.length===0?(Q.splice(he-ye,ye),he=he-ye):Y.length===0?(Q.splice(he-ye,ye,[e,oe]),he=he-ye+1):oe.length===0?(Q.splice(he-ye,ye,[t,Y]),he=he-ye+1):(Q.splice(he-ye,ye,[t,Y],[e,oe]),he=he-ye+2)}he!==0&&Q[he-1][0]===n?(Q[he-1][1]+=Q[he][1],Q.splice(he,1)):he++,ie=0,Ne=0,Y="",oe="";break}}Q[Q.length-1][1]===""&&Q.pop();var Ce=!1;for(he=1;he<Q.length-1;)Q[he-1][0]===n&&Q[he+1][0]===n&&(Q[he][1].substring(Q[he][1].length-Q[he-1][1].length)===Q[he-1][1]?(Q[he][1]=Q[he-1][1]+Q[he][1].substring(0,Q[he][1].length-Q[he-1][1].length),Q[he+1][1]=Q[he-1][1]+Q[he+1][1],Q.splice(he-1,1),Ce=!0):Q[he][1].substring(0,Q[he+1][1].length)==Q[he+1][1]&&(Q[he-1][1]+=Q[he+1][1],Q[he][1]=Q[he][1].substring(Q[he+1][1].length)+Q[he+1][1],Q.splice(he+1,1),Ce=!0)),he++;Ce&&H(Q,fe)}function V(Q){return Q>=55296&&Q<=56319}function se(Q){return Q>=56320&&Q<=57343}function ee(Q){return se(Q.charCodeAt(0))}function J(Q){return V(Q.charCodeAt(Q.length-1))}function F(Q){for(var fe=[],he=0;he<Q.length;he++)Q[he][1].length>0&&fe.push(Q[he]);return fe}function ce(Q,fe,he,Ne){return J(Q)||ee(Ne)?null:F([[n,Q],[t,fe],[e,he],[n,Ne]])}function de(Q,fe,he){var Ne=typeof he=="number"?{index:he,length:0}:he.oldRange,ie=typeof he=="number"?null:he.newRange,Y=Q.length,oe=fe.length;if(Ne.length===0&&(ie===null||ie.length===0)){var ve=Ne.index,Ee=Q.slice(0,ve),be=Q.slice(ve),ne=ie?ie.index:null;e:{var ye=ve+oe-Y;if(ne!==null&&ne!==ye||ye<0||ye>oe)break e;var Ce=fe.slice(0,ye),ke=fe.slice(ye);if(ke!==be)break e;var He=Math.min(ve,ye),Fe=Ee.slice(0,He),Ct=Ce.slice(0,He);if(Fe!==Ct)break e;var dt=Ee.slice(He),Ze=Ce.slice(He);return ce(Fe,dt,Ze,be)}e:{if(ne!==null&&ne!==ve)break e;var Wt=ve,Ce=fe.slice(0,Wt),ke=fe.slice(Wt);if(Ce!==Ee)break e;var kt=Math.min(Y-Wt,oe-Wt),ht=be.slice(be.length-kt),mt=ke.slice(ke.length-kt);if(ht!==mt)break e;var dt=be.slice(0,be.length-kt),Ze=ke.slice(0,ke.length-kt);return ce(Ee,dt,Ze,ht)}}if(Ne.length>0&&ie&&ie.length===0)e:{var Fe=Q.slice(0,Ne.index),ht=Q.slice(Ne.index+Ne.length),He=Fe.length,kt=ht.length;if(oe<He+kt)break e;var Ct=fe.slice(0,He),mt=fe.slice(oe-kt);if(Fe!==Ct||ht!==mt)break e;var dt=Q.slice(He,Y-kt),Ze=fe.slice(He,oe-kt);return ce(Fe,dt,Ze,ht)}return null}function ze(Q,fe,he,Ne){return r(Q,fe,he,Ne,!0)}return ze.INSERT=e,ze.DELETE=t,ze.EQUAL=n,Hy=ze,Hy}var Ef={exports:{}};Ef.exports;var V3;function K8(){return V3||(V3=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",h="[object Array]",m="[object Boolean]",y="[object Date]",g="[object Error]",E="[object Function]",S="[object GeneratorFunction]",N="[object Map]",I="[object Number]",R="[object Object]",D="[object Promise]",j="[object RegExp]",B="[object Set]",H="[object String]",V="[object Symbol]",se="[object WeakMap]",ee="[object ArrayBuffer]",J="[object DataView]",F="[object Float32Array]",ce="[object Float64Array]",de="[object Int8Array]",ze="[object Int16Array]",Q="[object Int32Array]",fe="[object Uint8Array]",he="[object Uint8ClampedArray]",Ne="[object Uint16Array]",ie="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,oe=/\w*$/,ve=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,be={};be[o]=be[h]=be[ee]=be[J]=be[m]=be[y]=be[F]=be[ce]=be[de]=be[ze]=be[Q]=be[N]=be[I]=be[R]=be[j]=be[B]=be[H]=be[V]=be[fe]=be[he]=be[Ne]=be[ie]=!0,be[g]=be[E]=be[se]=!1;var ne=typeof window=="object"&&window&&window.Object===Object&&window,ye=typeof self=="object"&&self&&self.Object===Object&&self,Ce=ne||ye||Function("return this")(),ke=e&&!e.nodeType&&e,He=ke&&!0&&t&&!t.nodeType&&t,Fe=He&&He.exports===ke;function Ct(k,X){return k.set(X[0],X[1]),k}function dt(k,X){return k.add(X),k}function Ze(k,X){for(var ge=-1,je=k?k.length:0;++ge<je&&X(k[ge],ge,k)!==!1;);return k}function Wt(k,X){for(var ge=-1,je=X.length,It=k.length;++ge<je;)k[It+ge]=X[ge];return k}function kt(k,X,ge,je){for(var It=-1,pt=k?k.length:0;++It<pt;)ge=X(ge,k[It],It,k);return ge}function ht(k,X){for(var ge=-1,je=Array(k);++ge<k;)je[ge]=X(ge);return je}function mt(k,X){return k?.[X]}function bn(k){var X=!1;if(k!=null&&typeof k.toString!="function")try{X=!!(k+"")}catch{}return X}function mn(k){var X=-1,ge=Array(k.size);return k.forEach(function(je,It){ge[++X]=[It,je]}),ge}function _r(k,X){return function(ge){return k(X(ge))}}function lr(k){var X=-1,ge=Array(k.size);return k.forEach(function(je){ge[++X]=je}),ge}var Tn=Array.prototype,tn=Function.prototype,ri=Object.prototype,ft=Ce["__core-js_shared__"],$i=(function(){var k=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""})(),Li=tn.toString,an=ri.hasOwnProperty,jr=ri.toString,Wn=RegExp("^"+Li.call(an).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ii=Fe?Ce.Buffer:void 0,Rn=Ce.Symbol,Nn=Ce.Uint8Array,Sr=_r(Object.getPrototypeOf,Object),si=Object.create,ki=ri.propertyIsEnumerable,Mn=Tn.splice,$e=Object.getOwnPropertySymbols,rt=ii?ii.isBuffer:void 0,jt=_r(Object.keys,Object),dn=Jn(Ce,"DataView"),Yr=Jn(Ce,"Map"),st=Jn(Ce,"Promise"),Hr=Jn(Ce,"Set"),Qt=Jn(Ce,"WeakMap"),cr=Jn(Object,"create"),ai=Cr(dn),Xr=Cr(Yr),wr=Cr(st),Yi=Cr(Hr),_n=Cr(Qt),Kn=Rn?Rn.prototype:void 0,Wr=Kn?Kn.valueOf:void 0;function Qn(k){var X=-1,ge=k?k.length:0;for(this.clear();++X<ge;){var je=k[X];this.set(je[0],je[1])}}function kn(){this.__data__=cr?cr(null):{}}function ue(k){return this.has(k)&&delete this.__data__[k]}function Se(k){var X=this.__data__;if(cr){var ge=X[k];return ge===r?void 0:ge}return an.call(X,k)?X[k]:void 0}function Te(k){var X=this.__data__;return cr?X[k]!==void 0:an.call(X,k)}function Xe(k,X){var ge=this.__data__;return ge[k]=cr&&X===void 0?r:X,this}Qn.prototype.clear=kn,Qn.prototype.delete=ue,Qn.prototype.get=Se,Qn.prototype.has=Te,Qn.prototype.set=Xe;function Ke(k){var X=-1,ge=k?k.length:0;for(this.clear();++X<ge;){var je=k[X];this.set(je[0],je[1])}}function Ue(){this.__data__=[]}function at(k){var X=this.__data__,ge=Un(X,k);if(ge<0)return!1;var je=X.length-1;return ge==je?X.pop():Mn.call(X,ge,1),!0}function ot(k){var X=this.__data__,ge=Un(X,k);return ge<0?void 0:X[ge][1]}function nt(k){return Un(this.__data__,k)>-1}function gt(k,X){var ge=this.__data__,je=Un(ge,k);return je<0?ge.push([k,X]):ge[je][1]=X,this}Ke.prototype.clear=Ue,Ke.prototype.delete=at,Ke.prototype.get=ot,Ke.prototype.has=nt,Ke.prototype.set=gt;function yt(k){var X=-1,ge=k?k.length:0;for(this.clear();++X<ge;){var je=k[X];this.set(je[0],je[1])}}function vt(){this.__data__={hash:new Qn,map:new(Yr||Ke),string:new Qn}}function Ht(k){return qn(this,k).delete(k)}function $t(k){return qn(this,k).get(k)}function zn(k){return qn(this,k).has(k)}function gn(k,X){return qn(this,k).set(k,X),this}yt.prototype.clear=vt,yt.prototype.delete=Ht,yt.prototype.get=$t,yt.prototype.has=zn,yt.prototype.set=gn;function bt(k){this.__data__=new Ke(k)}function Et(){this.__data__=new Ke}function jn(k){return this.__data__.delete(k)}function Xn(k){return this.__data__.get(k)}function En(k){return this.__data__.has(k)}function qe(k,X){var ge=this.__data__;if(ge instanceof Ke){var je=ge.__data__;if(!Yr||je.length<n-1)return je.push([k,X]),this;ge=this.__data__=new yt(je)}return ge.set(k,X),this}bt.prototype.clear=Et,bt.prototype.delete=jn,bt.prototype.get=Xn,bt.prototype.has=En,bt.prototype.set=qe;function Ar(k,X){var ge=qr(k)||Ir(k)?ht(k.length,String):[],je=ge.length,It=!!je;for(var pt in k)an.call(k,pt)&&!(It&&(pt=="length"||ts(pt,je)))&&ge.push(pt);return ge}function hn(k,X,ge){var je=k[X];(!(an.call(k,X)&&yn(je,ge))||ge===void 0&&!(X in k))&&(k[X]=ge)}function Un(k,X){for(var ge=k.length;ge--;)if(yn(k[ge][0],X))return ge;return-1}function Or(k,X){return k&&_e(X,Gr(X),k)}function Yt(k,X,ge,je,It,pt,ln){var wn;if(je&&(wn=pt?je(k,It,pt,ln):je(k)),wn!==void 0)return wn;if(!Vr(k))return k;var tr=qr(k);if(tr){if(wn=oi(k),!X)return Zn(k,wn)}else{var Cn=Ni(k),fr=Cn==E||Cn==S;if(zt(k))return lt(k,X);if(Cn==R||Cn==o||fr&&!pt){if(bn(k))return pt?k:{};if(wn=At(fr?{}:k),!X)return te(k,Or(wn,k))}else{if(!be[Cn])return pt?k:{};wn=on(k,Cn,Yt,X)}}ln||(ln=new bt);var Rr=ln.get(k);if(Rr)return Rr;if(ln.set(k,wn),!tr)var Pt=ge?wt(k):Gr(k);return Ze(Pt||k,function(Tr,nr){Pt&&(nr=Tr,Tr=k[nr]),hn(wn,nr,Yt(Tr,X,ge,je,nr,k,ln))}),wn}function nn(k){return Vr(k)?si(k):{}}function Je(k,X,ge){var je=X(k);return qr(k)?je:Wt(je,ge(k))}function Hn(k){return jr.call(k)}function Qr(k){if(!Vr(k)||li(k))return!1;var X=cn(k)||bn(k)?Wn:ve;return X.test(Cr(k))}function ur(k){if(!Zr(k))return jt(k);var X=[];for(var ge in Object(k))an.call(k,ge)&&ge!="constructor"&&X.push(ge);return X}function lt(k,X){if(X)return k.slice();var ge=new k.constructor(k.length);return k.copy(ge),ge}function hr(k){var X=new k.constructor(k.byteLength);return new Nn(X).set(new Nn(k)),X}function pi(k,X){var ge=X?hr(k.buffer):k.buffer;return new k.constructor(ge,k.byteOffset,k.byteLength)}function Sn(k,X,ge){var je=X?ge(mn(k),!0):mn(k);return kt(je,Ct,new k.constructor)}function mi(k){var X=new k.constructor(k.source,oe.exec(k));return X.lastIndex=k.lastIndex,X}function ps(k,X,ge){var je=X?ge(lr(k),!0):lr(k);return kt(je,dt,new k.constructor)}function ji(k){return Wr?Object(Wr.call(k)):{}}function rn(k,X){var ge=X?hr(k.buffer):k.buffer;return new k.constructor(ge,k.byteOffset,k.length)}function Zn(k,X){var ge=-1,je=k.length;for(X||(X=Array(je));++ge<je;)X[ge]=k[ge];return X}function _e(k,X,ge,je){ge||(ge={});for(var It=-1,pt=X.length;++It<pt;){var ln=X[It],wn=void 0;hn(ge,ln,wn===void 0?k[ln]:wn)}return ge}function te(k,X){return _e(k,qt(k),X)}function wt(k){return Je(k,Gr,qt)}function qn(k,X){var ge=k.__data__;return Ws(X)?ge[typeof X=="string"?"string":"hash"]:ge.map}function Jn(k,X){var ge=mt(k,X);return Qr(ge)?ge:void 0}var qt=$e?_r($e,Object):gs,Ni=Hn;(dn&&Ni(new dn(new ArrayBuffer(1)))!=J||Yr&&Ni(new Yr)!=N||st&&Ni(st.resolve())!=D||Hr&&Ni(new Hr)!=B||Qt&&Ni(new Qt)!=se)&&(Ni=function(k){var X=jr.call(k),ge=X==R?k.constructor:void 0,je=ge?Cr(ge):void 0;if(je)switch(je){case ai:return J;case Xr:return N;case wr:return D;case Yi:return B;case _n:return se}return X});function oi(k){var X=k.length,ge=k.constructor(X);return X&&typeof k[0]=="string"&&an.call(k,"index")&&(ge.index=k.index,ge.input=k.input),ge}function At(k){return typeof k.constructor=="function"&&!Zr(k)?nn(Sr(k)):{}}function on(k,X,ge,je){var It=k.constructor;switch(X){case ee:return hr(k);case m:case y:return new It(+k);case J:return pi(k,je);case F:case ce:case de:case ze:case Q:case fe:case he:case Ne:case ie:return rn(k,je);case N:return Sn(k,je,ge);case I:case H:return new It(k);case j:return mi(k);case B:return ps(k,je,ge);case V:return ji(k)}}function ts(k,X){return X=X??i,!!X&&(typeof k=="number"||Ee.test(k))&&k>-1&&k%1==0&&k<X}function Ws(k){var X=typeof k;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?k!=="__proto__":k===null}function li(k){return!!$i&&$i in k}function Zr(k){var X=k&&k.constructor,ge=typeof X=="function"&&X.prototype||ri;return k===ge}function Cr(k){if(k!=null){try{return Li.call(k)}catch{}try{return k+""}catch{}}return""}function er(k){return Yt(k,!0,!0)}function yn(k,X){return k===X||k!==k&&X!==X}function Ir(k){return Bi(k)&&an.call(k,"callee")&&(!ki.call(k,"callee")||jr.call(k)==o)}var qr=Array.isArray;function _t(k){return k!=null&&ms(k.length)&&!cn(k)}function Bi(k){return gi(k)&&_t(k)}var zt=rt||ns;function cn(k){var X=Vr(k)?jr.call(k):"";return X==E||X==S}function ms(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=i}function Vr(k){var X=typeof k;return!!k&&(X=="object"||X=="function")}function gi(k){return!!k&&typeof k=="object"}function Gr(k){return _t(k)?Ar(k):ur(k)}function gs(){return[]}function ns(){return!1}t.exports=er})(Ef,Ef.exports)),Ef.exports}var Sf={exports:{}};Sf.exports;var G3;function $8(){return G3||(G3=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,o=2,h=9007199254740991,m="[object Arguments]",y="[object Array]",g="[object AsyncFunction]",E="[object Boolean]",S="[object Date]",N="[object Error]",I="[object Function]",R="[object GeneratorFunction]",D="[object Map]",j="[object Number]",B="[object Null]",H="[object Object]",V="[object Promise]",se="[object Proxy]",ee="[object RegExp]",J="[object Set]",F="[object String]",ce="[object Symbol]",de="[object Undefined]",ze="[object WeakMap]",Q="[object ArrayBuffer]",fe="[object DataView]",he="[object Float32Array]",Ne="[object Float64Array]",ie="[object Int8Array]",Y="[object Int16Array]",oe="[object Int32Array]",ve="[object Uint8Array]",Ee="[object Uint8ClampedArray]",be="[object Uint16Array]",ne="[object Uint32Array]",ye=/[\\^$.*+?()[\]{}|]/g,Ce=/^\[object .+?Constructor\]$/,ke=/^(?:0|[1-9]\d*)$/,He={};He[he]=He[Ne]=He[ie]=He[Y]=He[oe]=He[ve]=He[Ee]=He[be]=He[ne]=!0,He[m]=He[y]=He[Q]=He[E]=He[fe]=He[S]=He[N]=He[I]=He[D]=He[j]=He[H]=He[ee]=He[J]=He[F]=He[ze]=!1;var Fe=typeof window=="object"&&window&&window.Object===Object&&window,Ct=typeof self=="object"&&self&&self.Object===Object&&self,dt=Fe||Ct||Function("return this")(),Ze=e&&!e.nodeType&&e,Wt=Ze&&!0&&t&&!t.nodeType&&t,kt=Wt&&Wt.exports===Ze,ht=kt&&Fe.process,mt=(function(){try{return ht&&ht.binding&&ht.binding("util")}catch{}})(),bn=mt&&mt.isTypedArray;function mn(k,X){for(var ge=-1,je=k==null?0:k.length,It=0,pt=[];++ge<je;){var ln=k[ge];X(ln,ge,k)&&(pt[It++]=ln)}return pt}function _r(k,X){for(var ge=-1,je=X.length,It=k.length;++ge<je;)k[It+ge]=X[ge];return k}function lr(k,X){for(var ge=-1,je=k==null?0:k.length;++ge<je;)if(X(k[ge],ge,k))return!0;return!1}function Tn(k,X){for(var ge=-1,je=Array(k);++ge<k;)je[ge]=X(ge);return je}function tn(k){return function(X){return k(X)}}function ri(k,X){return k.has(X)}function ft(k,X){return k?.[X]}function $i(k){var X=-1,ge=Array(k.size);return k.forEach(function(je,It){ge[++X]=[It,je]}),ge}function Li(k,X){return function(ge){return k(X(ge))}}function an(k){var X=-1,ge=Array(k.size);return k.forEach(function(je){ge[++X]=je}),ge}var jr=Array.prototype,Wn=Function.prototype,ii=Object.prototype,Rn=dt["__core-js_shared__"],Nn=Wn.toString,Sr=ii.hasOwnProperty,si=(function(){var k=/[^.]+$/.exec(Rn&&Rn.keys&&Rn.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""})(),ki=ii.toString,Mn=RegExp("^"+Nn.call(Sr).replace(ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=kt?dt.Buffer:void 0,rt=dt.Symbol,jt=dt.Uint8Array,dn=ii.propertyIsEnumerable,Yr=jr.splice,st=rt?rt.toStringTag:void 0,Hr=Object.getOwnPropertySymbols,Qt=$e?$e.isBuffer:void 0,cr=Li(Object.keys,Object),ai=qt(dt,"DataView"),Xr=qt(dt,"Map"),wr=qt(dt,"Promise"),Yi=qt(dt,"Set"),_n=qt(dt,"WeakMap"),Kn=qt(Object,"create"),Wr=Cr(ai),Qn=Cr(Xr),kn=Cr(wr),ue=Cr(Yi),Se=Cr(_n),Te=rt?rt.prototype:void 0,Xe=Te?Te.valueOf:void 0;function Ke(k){var X=-1,ge=k==null?0:k.length;for(this.clear();++X<ge;){var je=k[X];this.set(je[0],je[1])}}function Ue(){this.__data__=Kn?Kn(null):{},this.size=0}function at(k){var X=this.has(k)&&delete this.__data__[k];return this.size-=X?1:0,X}function ot(k){var X=this.__data__;if(Kn){var ge=X[k];return ge===r?void 0:ge}return Sr.call(X,k)?X[k]:void 0}function nt(k){var X=this.__data__;return Kn?X[k]!==void 0:Sr.call(X,k)}function gt(k,X){var ge=this.__data__;return this.size+=this.has(k)?0:1,ge[k]=Kn&&X===void 0?r:X,this}Ke.prototype.clear=Ue,Ke.prototype.delete=at,Ke.prototype.get=ot,Ke.prototype.has=nt,Ke.prototype.set=gt;function yt(k){var X=-1,ge=k==null?0:k.length;for(this.clear();++X<ge;){var je=k[X];this.set(je[0],je[1])}}function vt(){this.__data__=[],this.size=0}function Ht(k){var X=this.__data__,ge=lt(X,k);if(ge<0)return!1;var je=X.length-1;return ge==je?X.pop():Yr.call(X,ge,1),--this.size,!0}function $t(k){var X=this.__data__,ge=lt(X,k);return ge<0?void 0:X[ge][1]}function zn(k){return lt(this.__data__,k)>-1}function gn(k,X){var ge=this.__data__,je=lt(ge,k);return je<0?(++this.size,ge.push([k,X])):ge[je][1]=X,this}yt.prototype.clear=vt,yt.prototype.delete=Ht,yt.prototype.get=$t,yt.prototype.has=zn,yt.prototype.set=gn;function bt(k){var X=-1,ge=k==null?0:k.length;for(this.clear();++X<ge;){var je=k[X];this.set(je[0],je[1])}}function Et(){this.size=0,this.__data__={hash:new Ke,map:new(Xr||yt),string:new Ke}}function jn(k){var X=Jn(this,k).delete(k);return this.size-=X?1:0,X}function Xn(k){return Jn(this,k).get(k)}function En(k){return Jn(this,k).has(k)}function qe(k,X){var ge=Jn(this,k),je=ge.size;return ge.set(k,X),this.size+=ge.size==je?0:1,this}bt.prototype.clear=Et,bt.prototype.delete=jn,bt.prototype.get=Xn,bt.prototype.has=En,bt.prototype.set=qe;function Ar(k){var X=-1,ge=k==null?0:k.length;for(this.__data__=new bt;++X<ge;)this.add(k[X])}function hn(k){return this.__data__.set(k,r),this}function Un(k){return this.__data__.has(k)}Ar.prototype.add=Ar.prototype.push=hn,Ar.prototype.has=Un;function Or(k){var X=this.__data__=new yt(k);this.size=X.size}function Yt(){this.__data__=new yt,this.size=0}function nn(k){var X=this.__data__,ge=X.delete(k);return this.size=X.size,ge}function Je(k){return this.__data__.get(k)}function Hn(k){return this.__data__.has(k)}function Qr(k,X){var ge=this.__data__;if(ge instanceof yt){var je=ge.__data__;if(!Xr||je.length<n-1)return je.push([k,X]),this.size=++ge.size,this;ge=this.__data__=new bt(je)}return ge.set(k,X),this.size=ge.size,this}Or.prototype.clear=Yt,Or.prototype.delete=nn,Or.prototype.get=Je,Or.prototype.has=Hn,Or.prototype.set=Qr;function ur(k,X){var ge=Ir(k),je=!ge&&yn(k),It=!ge&&!je&&_t(k),pt=!ge&&!je&&!It&&gi(k),ln=ge||je||It||pt,wn=ln?Tn(k.length,String):[],tr=wn.length;for(var Cn in k)Sr.call(k,Cn)&&!(ln&&(Cn=="length"||It&&(Cn=="offset"||Cn=="parent")||pt&&(Cn=="buffer"||Cn=="byteLength"||Cn=="byteOffset")||on(Cn,tr)))&&wn.push(Cn);return wn}function lt(k,X){for(var ge=k.length;ge--;)if(er(k[ge][0],X))return ge;return-1}function hr(k,X,ge){var je=X(k);return Ir(k)?je:_r(je,ge(k))}function pi(k){return k==null?k===void 0?de:B:st&&st in Object(k)?Ni(k):Zr(k)}function Sn(k){return Vr(k)&&pi(k)==m}function mi(k,X,ge,je,It){return k===X?!0:k==null||X==null||!Vr(k)&&!Vr(X)?k!==k&&X!==X:ps(k,X,ge,je,mi,It)}function ps(k,X,ge,je,It,pt){var ln=Ir(k),wn=Ir(X),tr=ln?y:At(k),Cn=wn?y:At(X);tr=tr==m?H:tr,Cn=Cn==m?H:Cn;var fr=tr==H,Rr=Cn==H,Pt=tr==Cn;if(Pt&&_t(k)){if(!_t(X))return!1;ln=!0,fr=!1}if(Pt&&!fr)return pt||(pt=new Or),ln||gi(k)?_e(k,X,ge,je,It,pt):te(k,X,tr,ge,je,It,pt);if(!(ge&i)){var Tr=fr&&Sr.call(k,"__wrapped__"),nr=Rr&&Sr.call(X,"__wrapped__");if(Tr||nr){var Br=Tr?k.value():k,Ii=nr?X.value():X;return pt||(pt=new Or),It(Br,Ii,ge,je,pt)}}return Pt?(pt||(pt=new Or),wt(k,X,ge,je,It,pt)):!1}function ji(k){if(!ms(k)||Ws(k))return!1;var X=zt(k)?Mn:Ce;return X.test(Cr(k))}function rn(k){return Vr(k)&&cn(k.length)&&!!He[pi(k)]}function Zn(k){if(!li(k))return cr(k);var X=[];for(var ge in Object(k))Sr.call(k,ge)&&ge!="constructor"&&X.push(ge);return X}function _e(k,X,ge,je,It,pt){var ln=ge&i,wn=k.length,tr=X.length;if(wn!=tr&&!(ln&&tr>wn))return!1;var Cn=pt.get(k);if(Cn&&pt.get(X))return Cn==X;var fr=-1,Rr=!0,Pt=ge&o?new Ar:void 0;for(pt.set(k,X),pt.set(X,k);++fr<wn;){var Tr=k[fr],nr=X[fr];if(je)var Br=ln?je(nr,Tr,fr,X,k,pt):je(Tr,nr,fr,k,X,pt);if(Br!==void 0){if(Br)continue;Rr=!1;break}if(Pt){if(!lr(X,function(Ii,De){if(!ri(Pt,De)&&(Tr===Ii||It(Tr,Ii,ge,je,pt)))return Pt.push(De)})){Rr=!1;break}}else if(!(Tr===nr||It(Tr,nr,ge,je,pt))){Rr=!1;break}}return pt.delete(k),pt.delete(X),Rr}function te(k,X,ge,je,It,pt,ln){switch(ge){case fe:if(k.byteLength!=X.byteLength||k.byteOffset!=X.byteOffset)return!1;k=k.buffer,X=X.buffer;case Q:return!(k.byteLength!=X.byteLength||!pt(new jt(k),new jt(X)));case E:case S:case j:return er(+k,+X);case N:return k.name==X.name&&k.message==X.message;case ee:case F:return k==X+"";case D:var wn=$i;case J:var tr=je&i;if(wn||(wn=an),k.size!=X.size&&!tr)return!1;var Cn=ln.get(k);if(Cn)return Cn==X;je|=o,ln.set(k,X);var fr=_e(wn(k),wn(X),je,It,pt,ln);return ln.delete(k),fr;case ce:if(Xe)return Xe.call(k)==Xe.call(X)}return!1}function wt(k,X,ge,je,It,pt){var ln=ge&i,wn=qn(k),tr=wn.length,Cn=qn(X),fr=Cn.length;if(tr!=fr&&!ln)return!1;for(var Rr=tr;Rr--;){var Pt=wn[Rr];if(!(ln?Pt in X:Sr.call(X,Pt)))return!1}var Tr=pt.get(k);if(Tr&&pt.get(X))return Tr==X;var nr=!0;pt.set(k,X),pt.set(X,k);for(var Br=ln;++Rr<tr;){Pt=wn[Rr];var Ii=k[Pt],De=X[Pt];if(je)var Xt=ln?je(De,Ii,Pt,X,k,pt):je(Ii,De,Pt,k,X,pt);if(!(Xt===void 0?Ii===De||It(Ii,De,ge,je,pt):Xt)){nr=!1;break}Br||(Br=Pt=="constructor")}if(nr&&!Br){var dr=k.constructor,rs=X.constructor;dr!=rs&&"constructor"in k&&"constructor"in X&&!(typeof dr=="function"&&dr instanceof dr&&typeof rs=="function"&&rs instanceof rs)&&(nr=!1)}return pt.delete(k),pt.delete(X),nr}function qn(k){return hr(k,Gr,oi)}function Jn(k,X){var ge=k.__data__;return ts(X)?ge[typeof X=="string"?"string":"hash"]:ge.map}function qt(k,X){var ge=ft(k,X);return ji(ge)?ge:void 0}function Ni(k){var X=Sr.call(k,st),ge=k[st];try{k[st]=void 0;var je=!0}catch{}var It=ki.call(k);return je&&(X?k[st]=ge:delete k[st]),It}var oi=Hr?function(k){return k==null?[]:(k=Object(k),mn(Hr(k),function(X){return dn.call(k,X)}))}:gs,At=pi;(ai&&At(new ai(new ArrayBuffer(1)))!=fe||Xr&&At(new Xr)!=D||wr&&At(wr.resolve())!=V||Yi&&At(new Yi)!=J||_n&&At(new _n)!=ze)&&(At=function(k){var X=pi(k),ge=X==H?k.constructor:void 0,je=ge?Cr(ge):"";if(je)switch(je){case Wr:return fe;case Qn:return D;case kn:return V;case ue:return J;case Se:return ze}return X});function on(k,X){return X=X??h,!!X&&(typeof k=="number"||ke.test(k))&&k>-1&&k%1==0&&k<X}function ts(k){var X=typeof k;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?k!=="__proto__":k===null}function Ws(k){return!!si&&si in k}function li(k){var X=k&&k.constructor,ge=typeof X=="function"&&X.prototype||ii;return k===ge}function Zr(k){return ki.call(k)}function Cr(k){if(k!=null){try{return Nn.call(k)}catch{}try{return k+""}catch{}}return""}function er(k,X){return k===X||k!==k&&X!==X}var yn=Sn((function(){return arguments})())?Sn:function(k){return Vr(k)&&Sr.call(k,"callee")&&!dn.call(k,"callee")},Ir=Array.isArray;function qr(k){return k!=null&&cn(k.length)&&!zt(k)}var _t=Qt||ns;function Bi(k,X){return mi(k,X)}function zt(k){if(!ms(k))return!1;var X=pi(k);return X==I||X==R||X==g||X==se}function cn(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=h}function ms(k){var X=typeof k;return k!=null&&(X=="object"||X=="function")}function Vr(k){return k!=null&&typeof k=="object"}var gi=bn?tn(bn):rn;function Gr(k){return qr(k)?ur(k):Zn(k)}function gs(){return[]}function ns(){return!1}t.exports=Bi})(Sf,Sf.exports)),Sf.exports}var nm={},K3;function CQ(){if(K3)return nm;K3=1,Object.defineProperty(nm,"__esModule",{value:!0});const t=K8(),e=$8();var n;return(function(r){function i(y={},g={},E=!1){typeof y!="object"&&(y={}),typeof g!="object"&&(g={});let S=t(g);E||(S=Object.keys(S).reduce((N,I)=>(S[I]!=null&&(N[I]=S[I]),N),{}));for(const N in y)y[N]!==void 0&&g[N]===void 0&&(S[N]=y[N]);return Object.keys(S).length>0?S:void 0}r.compose=i;function o(y={},g={}){typeof y!="object"&&(y={}),typeof g!="object"&&(g={});const E=Object.keys(y).concat(Object.keys(g)).reduce((S,N)=>(e(y[N],g[N])||(S[N]=g[N]===void 0?null:g[N]),S),{});return Object.keys(E).length>0?E:void 0}r.diff=o;function h(y={},g={}){y=y||{};const E=Object.keys(g).reduce((S,N)=>(g[N]!==y[N]&&y[N]!==void 0&&(S[N]=g[N]),S),{});return Object.keys(y).reduce((S,N)=>(y[N]!==g[N]&&g[N]===void 0&&(S[N]=null),S),E)}r.invert=h;function m(y,g,E=!1){if(typeof y!="object")return g;if(typeof g!="object")return;if(!E)return g;const S=Object.keys(g).reduce((N,I)=>(y[I]===void 0&&(N[I]=g[I]),N),{});return Object.keys(S).length>0?S:void 0}r.transform=m})(n||(n={})),nm.default=n,nm}var rm={},$3;function Y8(){if($3)return rm;$3=1,Object.defineProperty(rm,"__esModule",{value:!0});var t;return(function(e){function n(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=n})(t||(t={})),rm.default=t,rm}var im={},Y3;function TQ(){if(Y3)return im;Y3=1,Object.defineProperty(im,"__esModule",{value:!0});const t=Y8();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const i=this.ops[this.index];if(i){const o=this.offset,h=t.default.length(i);if(r>=h-o?(r=h-o,this.index+=1,this.offset=0):this.offset+=r,typeof i.delete=="number")return{delete:r};{const m={};return i.attributes&&(m.attributes=i.attributes),typeof i.retain=="number"?m.retain=r:typeof i.retain=="object"&&i.retain!==null?m.retain=i.retain:typeof i.insert=="string"?m.insert=i.insert.substr(o,r):m.insert=i.insert,m}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,i=this.index,o=this.next(),h=this.ops.slice(this.index);return this.offset=r,this.index=i,[o].concat(h)}}else return[]}}return im.default=e,im}var X3;function NQ(){return X3||(X3=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=AQ(),r=K8(),i=$8(),o=CQ();e.AttributeMap=o.default;const h=Y8();e.Op=h.default;const m=TQ();e.OpIterator=m.default;const y="\0",g=(S,N)=>{if(typeof S!="object"||S===null)throw new Error(`cannot retain a ${typeof S}`);if(typeof N!="object"||N===null)throw new Error(`cannot retain a ${typeof N}`);const I=Object.keys(S)[0];if(!I||I!==Object.keys(N)[0])throw new Error(`embed types not matched: ${I} != ${Object.keys(N)[0]}`);return[I,S[I],N[I]]};class E{constructor(N){Array.isArray(N)?this.ops=N:N!=null&&Array.isArray(N.ops)?this.ops=N.ops:this.ops=[]}static registerEmbed(N,I){this.handlers[N]=I}static unregisterEmbed(N){delete this.handlers[N]}static getHandler(N){const I=this.handlers[N];if(!I)throw new Error(`no handlers for embed type "${N}"`);return I}insert(N,I){const R={};return typeof N=="string"&&N.length===0?this:(R.insert=N,I!=null&&typeof I=="object"&&Object.keys(I).length>0&&(R.attributes=I),this.push(R))}delete(N){return N<=0?this:this.push({delete:N})}retain(N,I){if(typeof N=="number"&&N<=0)return this;const R={retain:N};return I!=null&&typeof I=="object"&&Object.keys(I).length>0&&(R.attributes=I),this.push(R)}push(N){let I=this.ops.length,R=this.ops[I-1];if(N=r(N),typeof R=="object"){if(typeof N.delete=="number"&&typeof R.delete=="number")return this.ops[I-1]={delete:R.delete+N.delete},this;if(typeof R.delete=="number"&&N.insert!=null&&(I-=1,R=this.ops[I-1],typeof R!="object"))return this.ops.unshift(N),this;if(i(N.attributes,R.attributes)){if(typeof N.insert=="string"&&typeof R.insert=="string")return this.ops[I-1]={insert:R.insert+N.insert},typeof N.attributes=="object"&&(this.ops[I-1].attributes=N.attributes),this;if(typeof N.retain=="number"&&typeof R.retain=="number")return this.ops[I-1]={retain:R.retain+N.retain},typeof N.attributes=="object"&&(this.ops[I-1].attributes=N.attributes),this}}return I===this.ops.length?this.ops.push(N):this.ops.splice(I,0,N),this}chop(){const N=this.ops[this.ops.length-1];return N&&typeof N.retain=="number"&&!N.attributes&&this.ops.pop(),this}filter(N){return this.ops.filter(N)}forEach(N){this.ops.forEach(N)}map(N){return this.ops.map(N)}partition(N){const I=[],R=[];return this.forEach(D=>{(N(D)?I:R).push(D)}),[I,R]}reduce(N,I){return this.ops.reduce(N,I)}changeLength(){return this.reduce((N,I)=>I.insert?N+h.default.length(I):I.delete?N-I.delete:N,0)}length(){return this.reduce((N,I)=>N+h.default.length(I),0)}slice(N=0,I=1/0){const R=[],D=new m.default(this.ops);let j=0;for(;j<I&&D.hasNext();){let B;j<N?B=D.next(N-j):(B=D.next(I-j),R.push(B)),j+=h.default.length(B)}return new E(R)}compose(N){const I=new m.default(this.ops),R=new m.default(N.ops),D=[],j=R.peek();if(j!=null&&typeof j.retain=="number"&&j.attributes==null){let H=j.retain;for(;I.peekType()==="insert"&&I.peekLength()<=H;)H-=I.peekLength(),D.push(I.next());j.retain-H>0&&R.next(j.retain-H)}const B=new E(D);for(;I.hasNext()||R.hasNext();)if(R.peekType()==="insert")B.push(R.next());else if(I.peekType()==="delete")B.push(I.next());else{const H=Math.min(I.peekLength(),R.peekLength()),V=I.next(H),se=R.next(H);if(se.retain){const ee={};if(typeof V.retain=="number")ee.retain=typeof se.retain=="number"?H:se.retain;else if(typeof se.retain=="number")V.retain==null?ee.insert=V.insert:ee.retain=V.retain;else{const F=V.retain==null?"insert":"retain",[ce,de,ze]=g(V[F],se.retain),Q=E.getHandler(ce);ee[F]={[ce]:Q.compose(de,ze,F==="retain")}}const J=o.default.compose(V.attributes,se.attributes,typeof V.retain=="number");if(J&&(ee.attributes=J),B.push(ee),!R.hasNext()&&i(B.ops[B.ops.length-1],ee)){const F=new E(I.rest());return B.concat(F).chop()}}else typeof se.delete=="number"&&(typeof V.retain=="number"||typeof V.retain=="object"&&V.retain!==null)&&B.push(se)}return B.chop()}concat(N){const I=new E(this.ops.slice());return N.ops.length>0&&(I.push(N.ops[0]),I.ops=I.ops.concat(N.ops.slice(1))),I}diff(N,I){if(this.ops===N.ops)return new E;const R=[this,N].map(V=>V.map(se=>{if(se.insert!=null)return typeof se.insert=="string"?se.insert:y;const ee=V===N?"on":"with";throw new Error("diff() called "+ee+" non-document")}).join("")),D=new E,j=n(R[0],R[1],I,!0),B=new m.default(this.ops),H=new m.default(N.ops);return j.forEach(V=>{let se=V[1].length;for(;se>0;){let ee=0;switch(V[0]){case n.INSERT:ee=Math.min(H.peekLength(),se),D.push(H.next(ee));break;case n.DELETE:ee=Math.min(se,B.peekLength()),B.next(ee),D.delete(ee);break;case n.EQUAL:ee=Math.min(B.peekLength(),H.peekLength(),se);const J=B.next(ee),F=H.next(ee);i(J.insert,F.insert)?D.retain(ee,o.default.diff(J.attributes,F.attributes)):D.push(F).delete(ee);break}se-=ee}}),D.chop()}eachLine(N,I=`
`){const R=new m.default(this.ops);let D=new E,j=0;for(;R.hasNext();){if(R.peekType()!=="insert")return;const B=R.peek(),H=h.default.length(B)-R.peekLength(),V=typeof B.insert=="string"?B.insert.indexOf(I,H)-H:-1;if(V<0)D.push(R.next());else if(V>0)D.push(R.next(V));else{if(N(D,R.next(1).attributes||{},j)===!1)return;j+=1,D=new E}}D.length()>0&&N(D,{},j)}invert(N){const I=new E;return this.reduce((R,D)=>{if(D.insert)I.delete(h.default.length(D));else{if(typeof D.retain=="number"&&D.attributes==null)return I.retain(D.retain),R+D.retain;if(D.delete||typeof D.retain=="number"){const j=D.delete||D.retain;return N.slice(R,R+j).forEach(H=>{D.delete?I.push(H):D.retain&&D.attributes&&I.retain(h.default.length(H),o.default.invert(D.attributes,H.attributes))}),R+j}else if(typeof D.retain=="object"&&D.retain!==null){const j=N.slice(R,R+1),B=new m.default(j.ops).next(),[H,V,se]=g(D.retain,B.insert),ee=E.getHandler(H);return I.retain({[H]:ee.invert(V,se)},o.default.invert(D.attributes,B.attributes)),R+1}}return R},0),I.chop()}transform(N,I=!1){if(I=!!I,typeof N=="number")return this.transformPosition(N,I);const R=N,D=new m.default(this.ops),j=new m.default(R.ops),B=new E;for(;D.hasNext()||j.hasNext();)if(D.peekType()==="insert"&&(I||j.peekType()!=="insert"))B.retain(h.default.length(D.next()));else if(j.peekType()==="insert")B.push(j.next());else{const H=Math.min(D.peekLength(),j.peekLength()),V=D.next(H),se=j.next(H);if(V.delete)continue;if(se.delete)B.push(se);else{const ee=V.retain,J=se.retain;let F=typeof J=="object"&&J!==null?J:H;if(typeof ee=="object"&&ee!==null&&typeof J=="object"&&J!==null){const ce=Object.keys(ee)[0];if(ce===Object.keys(J)[0]){const de=E.getHandler(ce);de&&(F={[ce]:de.transform(ee[ce],J[ce],I)})}}B.retain(F,o.default.transform(V.attributes,se.attributes,I))}}return B.chop()}transformPosition(N,I=!1){I=!!I;const R=new m.default(this.ops);let D=0;for(;R.hasNext()&&D<=N;){const j=R.peekLength(),B=R.peekType();if(R.next(),B==="delete"){N-=Math.min(j,N-D);continue}else B==="insert"&&(D<N||!I)&&(N+=j);D+=j}return N}}E.Op=h.default,E.OpIterator=m.default,E.AttributeMap=o.default,E.handlers={},e.default=E,t.exports=E,t.exports.default=E})(tm,tm.exports)),tm.exports}var ya=NQ();const Dt=Zl(ya);class Ha extends Xs{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ha.blotName="break";Ha.tagName="BR";let Fa=class extends a1{};const _Q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function P1(t){return t.replace(/[&<>"']/g,e=>_Q[e])}class as extends Yw{static allowedChildren=[as,Ha,Xs,Fa];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,n){const r=as.order.indexOf(e),i=as.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}formatAt(e,n,r,i){if(as.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Lt.BLOT)){const o=this.isolate(e,n);i&&o.wrap(r,i)}else super.formatAt(e,n,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof as&&as.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const W3=1;class Ki extends hd{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=X8(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,r,i){n<=0||(this.scroll.query(r,Lt.BLOCK)?e+n===this.length()&&this.format(r,i):super.formatAt(e,Math.min(n,this.length()-e-1),r,i),this.cache={})}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r),this.cache={};return}if(n.length===0)return;const i=n.split(`
`),o=i.shift();o.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let h=this;i.reduce((m,y)=>(h=h.split(m,!0),h.insertAt(0,y),y.length),e+o.length)}insertBefore(e,n){const{head:r}=this.children;super.insertBefore(e,n),r instanceof Ha&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+W3),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-W3)){const i=this.clone();return e===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const r=super.split(e,n);return this.cache={},r}}Ki.blotName="block";Ki.tagName="P";Ki.defaultChild=Ha;Ki.allowedChildren=[Ha,as,Xs,Fa];class pa extends Xs{attach(){super.attach(),this.attributes=new j1(this.domNode)}delta(){return new Dt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,Lt.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,i){this.format(r,i)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const i=n.split(`
`),o=i.pop(),h=i.map(y=>{const g=this.scroll.create(Ki.blotName);return g.insertAt(0,y),g}),m=this.split(e);h.forEach(y=>{this.parent.insertBefore(y,m)}),o&&this.parent.insertBefore(this.scroll.create("text",o),m)}}pa.scope=Lt.BLOCK_BLOT;function X8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Zi).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),ha(r,{},e)),new Dt).insert(`
`,ha(t))}function ha(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:ha(t.parent,e,n)}class ka extends Xs{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(ka.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==Lt.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=ka.CONTENTS.length,r.optimize(),r.formatAt(i,ka.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof Fa?this.prev:null,r=n?n.length():0,i=this.next instanceof Fa?this.next:null,o=i?i.text:"",{textNode:h}=this,m=h.data.split(ka.CONTENTS).join("");h.data=ka.CONTENTS;let y;if(n)y=n,(m||i)&&(n.insertAt(n.length(),m+o),i&&i.remove());else if(i)y=i,i.insertAt(0,m);else{const g=document.createTextNode(m);y=this.scroll.create(g),this.parent.insertBefore(y,this)}if(this.remove(),e){const g=(N,I)=>n&&N===n.domNode?I:N===h?r+I-1:i&&N===i.domNode?r+m.length+I:null,E=g(e.start.node,e.start.offset),S=g(e.end.node,e.end.offset);if(E!==null&&S!==null)return{startNode:y.domNode,startOffset:E,endNode:y.domNode,endOffset:S}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=ka.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var qy={exports:{}},Q3;function OQ(){return Q3||(Q3=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(y,g,E){this.fn=y,this.context=g,this.once=E||!1}function o(y,g,E,S,N){if(typeof E!="function")throw new TypeError("The listener must be a function");var I=new i(E,S||y,N),R=n?n+g:g;return y._events[R]?y._events[R].fn?y._events[R]=[y._events[R],I]:y._events[R].push(I):(y._events[R]=I,y._eventsCount++),y}function h(y,g){--y._eventsCount===0?y._events=new r:delete y._events[g]}function m(){this._events=new r,this._eventsCount=0}m.prototype.eventNames=function(){var g=[],E,S;if(this._eventsCount===0)return g;for(S in E=this._events)e.call(E,S)&&g.push(n?S.slice(1):S);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(E)):g},m.prototype.listeners=function(g){var E=n?n+g:g,S=this._events[E];if(!S)return[];if(S.fn)return[S.fn];for(var N=0,I=S.length,R=new Array(I);N<I;N++)R[N]=S[N].fn;return R},m.prototype.listenerCount=function(g){var E=n?n+g:g,S=this._events[E];return S?S.fn?1:S.length:0},m.prototype.emit=function(g,E,S,N,I,R){var D=n?n+g:g;if(!this._events[D])return!1;var j=this._events[D],B=arguments.length,H,V;if(j.fn){switch(j.once&&this.removeListener(g,j.fn,void 0,!0),B){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,E),!0;case 3:return j.fn.call(j.context,E,S),!0;case 4:return j.fn.call(j.context,E,S,N),!0;case 5:return j.fn.call(j.context,E,S,N,I),!0;case 6:return j.fn.call(j.context,E,S,N,I,R),!0}for(V=1,H=new Array(B-1);V<B;V++)H[V-1]=arguments[V];j.fn.apply(j.context,H)}else{var se=j.length,ee;for(V=0;V<se;V++)switch(j[V].once&&this.removeListener(g,j[V].fn,void 0,!0),B){case 1:j[V].fn.call(j[V].context);break;case 2:j[V].fn.call(j[V].context,E);break;case 3:j[V].fn.call(j[V].context,E,S);break;case 4:j[V].fn.call(j[V].context,E,S,N);break;default:if(!H)for(ee=1,H=new Array(B-1);ee<B;ee++)H[ee-1]=arguments[ee];j[V].fn.apply(j[V].context,H)}}return!0},m.prototype.on=function(g,E,S){return o(this,g,E,S,!1)},m.prototype.once=function(g,E,S){return o(this,g,E,S,!0)},m.prototype.removeListener=function(g,E,S,N){var I=n?n+g:g;if(!this._events[I])return this;if(!E)return h(this,I),this;var R=this._events[I];if(R.fn)R.fn===E&&(!N||R.once)&&(!S||R.context===S)&&h(this,I);else{for(var D=0,j=[],B=R.length;D<B;D++)(R[D].fn!==E||N&&!R[D].once||S&&R[D].context!==S)&&j.push(R[D]);j.length?this._events[I]=j.length===1?j[0]:j:h(this,I)}return this},m.prototype.removeAllListeners=function(g){var E;return g?(E=n?n+g:g,this._events[E]&&h(this,E)):(this._events=new r,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=n,m.EventEmitter=m,t.exports=m})(qy)),qy.exports}var IQ=OQ();const RQ=Zl(IQ),wb=new WeakMap,xb=["error","warn","log","info"];let Eb="warn";function W8(t){if(Eb&&xb.indexOf(t)<=xb.indexOf(Eb)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function Jo(t){return xb.reduce((e,n)=>(e[n]=W8.bind(console,n,t),e),{})}Jo.level=t=>{Eb=t};W8.level=Jo.level;const Vy=Jo("quill:events"),MQ=["selectionchange","mousedown","mouseup","click"];MQ.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const o=wb.get(i);o&&o.emitter&&o.emitter.handleDOM(...n)})})});class Ot extends RQ{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Vy.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Vy.log.call(Vy,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(o=>{let{node:h,handler:m}=o;(e.target===h||h.contains(e.target))&&m(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}const Gy=Jo("quill:selection");class qc{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class DQ{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new qc(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ot.sources.USER),1)}),this.emitter.on(Ot.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Ot.events.SCROLL_UPDATE,(i,o)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const h=o.some(m=>m.type==="characterData"||m.type==="childList"||m.type==="attributes"&&m.target===this.root);this.update(h?Ot.sources.SILENT:i)}catch{}})}),this.emitter.on(Ot.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:o,startOffset:h,endNode:m,endOffset:y}=i.range;this.setNativeRange(o,h,m,y),this.update(Ot.sources.SILENT)}}),this.update(Ot.sources.SILENT)}handleComposition(){this.emitter.on(Ot.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ot.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ot.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Lt.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof Zi){const o=i.split(r.start.offset);i.parent.insertBefore(this.cursor,o)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let i,[o,h]=this.scroll.leaf(e);if(o==null)return null;if(n>0&&h===o.length()){const[E]=this.scroll.leaf(e+1);if(E){const[S]=this.scroll.line(e),[N]=this.scroll.line(e+1);S===N&&(o=E,h=0)}}[i,h]=o.position(h,!0);const m=document.createRange();if(n>0)return m.setStart(i,h),[o,h]=this.scroll.leaf(e+n),o==null?null:([i,h]=o.position(h,!0),m.setEnd(i,h),m.getBoundingClientRect());let y="left",g;if(i instanceof Text){if(!i.data.length)return null;h<i.data.length?(m.setStart(i,h),m.setEnd(i,h+1)):(m.setStart(i,h-1),m.setEnd(i,h),y="right"),g=m.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;g=o.domNode.getBoundingClientRect(),h>0&&(y="right")}return{bottom:g.top+g.height,height:g.height,left:g[y],right:g[y],top:g.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return Gy.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Ky(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(h=>{const[m,y]=h,g=this.scroll.find(m,!0),E=g.offset(this.scroll);return y===0?E:g instanceof Zi?E+g.index(m,y):E+g.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),o=Math.min(i,...r);return new qc(o,i-o)}normalizeNative(e){if(!Ky(this.root,e.startContainer)||!e.collapsed&&!Ky(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:i,offset:o}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>o)i=i.childNodes[o],o=0;else if(i.childNodes.length===o)i=i.lastChild,i instanceof Text?o=i.data.length:i.childNodes.length>0?o=i.childNodes.length:o=i.childNodes.length+1;else break;r.node=i,r.offset=o}),n}rangeToNative(e){const n=this.scroll.length(),r=(i,o)=>{i=Math.min(n-1,i);const[h,m]=this.scroll.leaf(i);return h?h.position(m,o):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Gy.info("setNativeRange",e,n,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const h=document.getSelection();if(h!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:m}=this.getNativeRange()||{};if(m==null||o||e!==m.startContainer||n!==m.startOffset||r!==m.endContainer||i!==m.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const y=document.createRange();y.setStart(e,n),y.setEnd(r,i),h.removeAllRanges(),h.addRange(y)}}else h.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ot.sources.API;if(typeof n=="string"&&(r=n,n=!1),Gy.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ot.sources.USER;const n=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!jl(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const h=this.cursor.restore();h&&this.setNativeRange(h.startNode,h.startOffset,h.endNode,h.endOffset)}const o=[Ot.events.SELECTION_CHANGE,Ju(this.lastRange),Ju(n),e];this.emitter.emit(Ot.events.EDITOR_CHANGE,...o),e!==Ot.sources.SILENT&&this.emitter.emit(...o)}}}function Ky(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const LQ=/^[ -~]*$/;class kQ{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=Z3(e),i=new Dt;return BQ(r.ops.slice()).reduce((h,m)=>{const y=ya.Op.length(m);let g=m.attributes||{},E=!1,S=!1;if(m.insert!=null){if(i.retain(y),typeof m.insert=="string"){const R=m.insert;S=!R.endsWith(`
`)&&(n<=h||!!this.scroll.descendant(pa,h)[0]),this.scroll.insertAt(h,R);const[D,j]=this.scroll.line(h);let B=ql({},ha(D));if(D instanceof Ki){const[H]=D.descendant(Zi,j);H&&(B=ql(B,ha(H)))}g=ya.AttributeMap.diff(B,g)||{}}else if(typeof m.insert=="object"){const R=Object.keys(m.insert)[0];if(R==null)return h;const D=this.scroll.query(R,Lt.INLINE)!=null;if(D)(n<=h||this.scroll.descendant(pa,h)[0])&&(S=!0);else if(h>0){const[j,B]=this.scroll.descendant(Zi,h-1);j instanceof Fa?j.value()[B]!==`
`&&(E=!0):j instanceof Xs&&j.statics.scope===Lt.INLINE_BLOT&&(E=!0)}if(this.scroll.insertAt(h,R,m.insert[R]),D){const[j]=this.scroll.descendant(Zi,h);if(j){const B=ql({},ha(j));g=ya.AttributeMap.diff(B,g)||{}}}}n+=y}else if(i.push(m),m.retain!==null&&typeof m.retain=="object"){const R=Object.keys(m.retain)[0];if(R==null)return h;this.scroll.updateEmbedAt(h,R,m.retain[R])}Object.keys(g).forEach(R=>{this.scroll.formatAt(h,y,R,g[R])});const N=E?1:0,I=S?1:0;return n+=N+I,i.retain(N),i.delete(I),h+y+N+I},0),i.reduce((h,m)=>typeof m.delete=="number"?(this.scroll.deleteAt(h,m.delete),h):h+ya.Op.length(m),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new Dt().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(o=>{this.scroll.lines(e,Math.max(n,1)).forEach(h=>{h.format(o,r[o])})}),this.scroll.optimize();const i=new Dt().retain(e).retain(n,Ju(r));return this.update(i)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(o=>{this.scroll.formatAt(e,n,o,r[o])});const i=new Dt().retain(e).retain(n,Ju(r));return this.update(i)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new Dt)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];n===0?this.scroll.path(e).forEach(m=>{const[y]=m;y instanceof Ki?r.push(y):y instanceof Zi&&i.push(y)}):(r=this.scroll.lines(e,n),i=this.scroll.descendants(Zi,e,n));const[o,h]=[r,i].map(m=>{const y=m.shift();if(y==null)return{};let g=ha(y);for(;Object.keys(g).length>0;){const E=m.shift();if(E==null)return g;g=jQ(ha(E),g)}return g});return{...o,...h}}getHTML(e,n){const[r,i]=this.scroll.line(e);if(r){const o=r.length();return r.length()>=i+n&&!(i===0&&n===o)?fd(r,i,n,!0):fd(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=Z3(n),i=new Dt().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new Dt().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n.length,i,r[i])}),this.update(new Dt().retain(e).insert(n,Ju(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Ki.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof Ha}removeFormat(e,n){const r=this.getText(e,n),[i,o]=this.scroll.line(e+n);let h=0,m=new Dt;i!=null&&(h=i.length()-o,m=i.delta().slice(o,o+h-1).insert(`
`));const g=this.getContents(e,n+h).diff(new Dt().insert(r).concat(m)),E=new Dt().retain(e).concat(g);return this.applyDelta(E)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(LQ)&&this.scroll.find(n[0].target)){const o=this.scroll.find(n[0].target),h=ha(o),m=o.offset(this.scroll),y=n[0].oldValue.replace(ka.CONTENTS,""),g=new Dt().insert(y),E=new Dt().insert(o.value()),S=r&&{oldRange:J3(r.oldRange,-m),newRange:J3(r.newRange,-m)};e=new Dt().retain(m).concat(g.diff(E,S)).reduce((I,R)=>R.insert?I.insert(R.insert,h):I.push(R),new Dt),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!jl(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function Bu(t,e,n){if(t.length===0){const[I]=$y(n.pop());return e<=0?`</li></${I}>`:`</li></${I}>${Bu([],e-1,n)}`}const[{child:r,offset:i,length:o,indent:h,type:m},...y]=t,[g,E]=$y(m);if(h>e)return n.push(m),h===e+1?`<${g}><li${E}>${fd(r,i,o)}${Bu(y,h,n)}`:`<${g}><li>${Bu(t,e+1,n)}`;const S=n[n.length-1];if(h===e&&m===S)return`</li><li${E}>${fd(r,i,o)}${Bu(y,h,n)}`;const[N]=$y(n.pop());return`</li></${N}>${Bu(t,e-1,n)}`}function fd(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof Fa)return P1(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof Ba){if(t.statics.blotName==="list-container"){const g=[];return t.children.forEachAt(e,n,(E,S,N)=>{const I="formats"in E&&typeof E.formats=="function"?E.formats():{};g.push({child:E,offset:S,length:N,indent:I.indent||0,type:I.list})}),Bu(g,-1,[])}const i=[];if(t.children.forEachAt(e,n,(g,E,S)=>{i.push(fd(g,E,S))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:o,innerHTML:h}=t.domNode,[m,y]=o.split(`>${h}<`);return m==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${y}`:`${m}>${i.join("")}<${y}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function jQ(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n},{})}function $y(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Z3(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new Dt)}function J3(t,e){let{index:n,length:r}=t;return new qc(n+e,r)}function BQ(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,o)=>{o&&e.push({insert:`
`,attributes:n.attributes}),i&&e.push({insert:i,attributes:n.attributes})}):e.push(n)}),e}class mo{static DEFAULTS={};constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}const sm="\uFEFF";class Ww extends Xs{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(sm),this.rightGuard=document.createTextNode(sm),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const i=e.data.split(sm).join("");if(e===this.leftGuard)if(this.prev instanceof Fa){const o=this.prev.length();this.prev.insertAt(o,i),n={startNode:this.prev.domNode,startOffset:o+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof Fa?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:i.length}));return e.data=sm,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(n.range=i)}})}}class PQ{isComposing=!1;constructor(e,n){this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof Ww)&&(this.emitter.emit(Ot.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ot.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ot.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ot.events.COMPOSITION_END,e),this.isComposing=!1}}class Th{static DEFAULTS={modules:{}};static themes={default:Th};modules={};constructor(e,n){this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}}const UQ=t=>t.parentElement||t.getRootNode().host||null,FQ=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},am=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},e6=(t,e,n,r,i,o)=>t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+o:0,zQ=(t,e)=>{const n=t.ownerDocument;let r=e,i=t;for(;i;){const o=i===n.body,h=o?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:FQ(i),m=getComputedStyle(i),y=e6(r.left,r.right,h.left,h.right,am(m.scrollPaddingLeft),am(m.scrollPaddingRight)),g=e6(r.top,r.bottom,h.top,h.bottom,am(m.scrollPaddingTop),am(m.scrollPaddingBottom));if(y||g)if(o)n.defaultView?.scrollBy(y,g);else{const{scrollLeft:E,scrollTop:S}=i;g&&(i.scrollTop+=g),y&&(i.scrollLeft+=y);const N=i.scrollLeft-E,I=i.scrollTop-S;r={left:r.left-N,top:r.top-I,right:r.right-N,bottom:r.bottom-I}}i=o||m.position==="fixed"?null:UQ(i)}},HQ=100,qQ=["block","break","cursor","inline","scroll","text"],VQ=(t,e,n)=>{const r=new mh;return qQ.forEach(i=>{const o=e.query(i);o&&r.register(o)}),t.forEach(i=>{let o=e.query(i);o||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let h=0;for(;o;)if(r.register(o),o="blotName"in o?o.requiredContainer??null:null,h+=1,h>HQ){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},th=Jo("quill"),om=new mh;Ba.uiClass="ql-ui";class We{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:om,theme:"default"};static events=Ot.events;static sources=Ot.sources;static version="2.0.3";static imports={delta:Dt,parchment:SQ,"core/module":mo,"core/theme":Th};static debug(e){e===!0&&(e="log"),Jo.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return wb.get(e)||om.find(e,n)}static import(e){return this.imports[e]==null&&th.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(i=>{this.register(i,e[i],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&th.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&om.register(n),typeof n.register=="function"&&n.register(om)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=GQ(e,n),this.container=this.options.container,this.container==null){th.error("Invalid Quill container",e);return}this.options.debug&&We.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",wb.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ot;const i=Xw.blotName,o=this.options.registry.query(i);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new kQ(this.scroll),this.selection=new DQ(this.scroll,this.emitter),this.composition=new PQ(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ot.events.EDITOR_CHANGE,h=>{h===Ot.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ot.events.SCROLL_UPDATE,(h,m)=>{const y=this.selection.lastRange,[g]=this.selection.getRange(),E=y&&g?{oldRange:y,newRange:g}:void 0;Ia.call(this,()=>this.editor.update(null,m,E),h)}),this.emitter.on(Ot.events.SCROLL_EMBED_UPDATE,(h,m)=>{const y=this.selection.lastRange,[g]=this.selection.getRange(),E=y&&g?{oldRange:y,newRange:g}:void 0;Ia.call(this,()=>{const S=new Dt().retain(h.offset(this)).retain({[h.statics.blotName]:m});return this.editor.update(S,[],E)},We.sources.USER)}),r){const h=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(h)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=Po(e,n,r),Ia.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ot.sources.API;return Ia.call(this,()=>{const i=this.getSelection(!0);let o=new Dt;if(i==null)return o;if(this.scroll.query(e,Lt.BLOCK))o=this.editor.formatLine(i.index,i.length,{[e]:n});else{if(i.length===0)return this.selection.format(e,n),o;o=this.editor.formatText(i.index,i.length,{[e]:n})}return this.setSelection(i,Ot.sources.SILENT),o},r)}formatLine(e,n,r,i,o){let h;return[e,n,h,o]=Po(e,n,r,i,o),Ia.call(this,()=>this.editor.formatLine(e,n,h),o,e,0)}formatText(e,n,r,i,o){let h;return[e,n,h,o]=Po(e,n,r,i,o),Ia.call(this,()=>this.editor.formatText(e,n,h),o,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Po(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Po(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Po(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:We.sources.API;return Ia.call(this,()=>this.editor.insertEmbed(e,n,r),i,e)}insertText(e,n,r,i,o){let h;return[e,,h,o]=Po(e,0,r,i,o),Ia.call(this,()=>this.editor.insertText(e,n,h),o,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=Po(e,n,r),Ia.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){zQ(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ot.sources.API;return Ia.call(this,()=>{e=new Dt(e);const r=this.getLength(),i=this.editor.deleteText(0,r),o=this.editor.insertContents(0,e),h=this.editor.deleteText(this.getLength()-1,1);return i.compose(o).compose(h)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||We.sources.API):([e,n,,r]=Po(e,n,r),this.selection.setRange(new qc(Math.max(0,e),n),r),r!==Ot.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ot.sources.API;const r=new Dt().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ot.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ot.sources.API;return Ia.call(this,()=>(e=new Dt(e),this.editor.applyDelta(e)),n,!0)}}function t6(t){return typeof t=="string"?document.querySelector(t):t}function Yy(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,i]=n;return{...e,[r]:i===!0?{}:i}},{})}function n6(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function GQ(t,e){const n=t6(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===We.DEFAULTS.theme?Th:We.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:o,...h}=We.DEFAULTS,{modules:m,...y}=i.DEFAULTS;let g=Yy(e.modules);g!=null&&g.toolbar&&g.toolbar.constructor!==Object&&(g={...g,toolbar:{container:g.toolbar}});const E=ql({},Yy(o),Yy(m),g),S={...h,...n6(y),...n6(e)};let N=e.registry;return N?e.formats&&th.warn('Ignoring "formats" option because "registry" is specified'):N=e.formats?VQ(e.formats,S.registry,th):S.registry,{...S,registry:N,container:n,theme:i,modules:Object.entries(E).reduce((I,R)=>{let[D,j]=R;if(!j)return I;const B=We.import(`modules/${D}`);return B==null?(th.error(`Cannot load ${D} module. Are you sure you registered it?`),I):{...I,[D]:ql({},B.DEFAULTS||{},j)}},{}),bounds:t6(S.bounds)}}function Ia(t,e,n,r){if(!this.isEnabled()&&e===Ot.sources.USER&&!this.allowReadOnlyEdits)return new Dt;let i=n==null?null:this.getSelection();const o=this.editor.delta,h=t();if(i!=null&&(n===!0&&(n=i.index),r==null?i=r6(i,h,e):r!==0&&(i=r6(i,n,r,e)),this.setSelection(i,Ot.sources.SILENT)),h.length()>0){const m=[Ot.events.TEXT_CHANGE,h,o,e];this.emitter.emit(Ot.events.EDITOR_CHANGE,...m),e!==Ot.sources.SILENT&&this.emitter.emit(...m)}return h}function Po(t,e,n,r,i){let o={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=n,n=e,e=0),typeof n=="object"?(o=n,i=r):typeof n=="string"&&(r!=null?o[n]=r:i=n),i=i||Ot.sources.API,[t,e,o,i]}function r6(t,e,n,r){const i=typeof n=="number"?n:0;if(t==null)return null;let o,h;return e&&typeof e.transformPosition=="function"?[o,h]=[t.index,t.index+t.length].map(m=>e.transformPosition(m,r!==Ot.sources.USER)):[o,h]=[t.index,t.index+t.length].map(m=>m<e||m===e&&r===Ot.sources.USER?m:i>=0?m+i:Math.max(e,m+i)),new qc(o,h-o)}class Qc extends B1{}function i6(t){return t instanceof Ki||t instanceof pa}function s6(t){return typeof t.updateContent=="function"}class KQ extends Xw{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Ki;static allowedChildren=[Ki,pa,Qc];constructor(e,n,r){let{emitter:i}=r;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ot.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ot.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(Ot.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,i]=this.line(e),[o]=this.line(e+n);if(super.deleteAt(e,n),o!=null&&r!==o&&i>0){if(r instanceof pa||o instanceof pa){this.optimize();return}const h=o.children.head instanceof Ha?null:o.children.head;r.moveChildren(o,h),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,Lt.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===Lt.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new Dt().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const o=r.shift();if(o){const y=o.type==="block"&&(o.delta.length()===0||!this.descendant(pa,e)[0]&&e<this.length()),g=o.type==="block"?o.delta:new Dt().insert({[o.key]:o.value});Xy(this,e,g);const E=o.type==="block"?1:0,S=e+g.length()+E;y&&this.insertAt(S-1,`
`);const N=ha(this.line(e)[0]),I=ya.AttributeMap.diff(N,o.attributes)||{};Object.keys(I).forEach(R=>{this.formatAt(S-1,1,R,I[R])}),e=S}let[h,m]=this.children.find(e);if(r.length&&(h&&(h=h.split(m),m=0),r.forEach(y=>{if(y.type==="block"){const g=this.createBlock(y.attributes,h||void 0);Xy(g,0,y.delta)}else{const g=this.create(y.key,y.value);this.insertBefore(g,h||void 0),Object.keys(y.attributes).forEach(E=>{g.format(E,y.attributes[E])})}})),i.type==="block"&&i.delta.length()){const y=h?h.offset(h.scroll)+m:this.length();Xy(this,y,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof Zi?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(i6,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,o,h)=>{let m=[],y=h;return i.children.forEachAt(o,h,(g,E,S)=>{i6(g)?m.push(g):g instanceof B1&&(m=m.concat(r(g,E,y))),y-=S}),m};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(Ot.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=Ot.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const o=this.find(i,!0);return o&&!s6(o)}),e.length>0&&this.emitter.emit(Ot.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ot.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[i]=this.descendant(o=>o instanceof pa,e);i&&i.statics.blotName===n&&s6(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new Dt;return e.forEach(i=>{const o=i?.insert;if(o)if(typeof o=="string"){const h=o.split(`
`);h.slice(0,-1).forEach(y=>{r.insert(y,i.attributes),n.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new Dt});const m=h[h.length-1];m&&r.insert(m,i.attributes)}else{const h=Object.keys(o)[0];if(!h)return;this.query(h,Lt.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new Dt,n.push({type:"blockEmbed",key:h,value:o[h],attributes:i.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const i={};Object.entries(e).forEach(m=>{let[y,g]=m;this.query(y,Lt.BLOCK&Lt.BLOT)!=null?r=y:i[y]=g});const o=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(o,n||void 0);const h=o.length();return Object.entries(i).forEach(m=>{let[y,g]=m;o.formatAt(0,h,y,g)}),o}}function Xy(t,e,n){n.reduce((r,i)=>{const o=ya.Op.length(i);let h=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const m=i.insert;t.insertAt(r,m);const[y]=t.descendant(Zi,r),g=ha(y);h=ya.AttributeMap.diff(g,h)||{}}else if(typeof i.insert=="object"){const m=Object.keys(i.insert)[0];if(m==null)return r;if(t.insertAt(r,m,i.insert[m]),t.scroll.query(m,Lt.INLINE)!=null){const[g]=t.descendant(Zi,r),E=ha(g);h=ya.AttributeMap.diff(E,h)||{}}}}return Object.keys(h).forEach(m=>{t.formatAt(r,o,m,h[m])}),r+o},e)}const Qw={scope:Lt.BLOCK,whitelist:["right","center","justify"]},$Q=new uo("align","align",Qw),Q8=new za("align","ql-align",Qw),Z8=new rc("align","text-align",Qw);class J8 extends rc{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const YQ=new za("color","ql-color",{scope:Lt.INLINE}),Zw=new J8("color","color",{scope:Lt.INLINE}),XQ=new za("background","ql-bg",{scope:Lt.INLINE}),Jw=new J8("background","background-color",{scope:Lt.INLINE});class Zc extends Qc{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${P1(this.code(e,n))}
</pre>`}}class ls extends Ki{static TAB="  ";static register(){We.register(Zc)}}class e2 extends as{}e2.blotName="code";e2.tagName="CODE";ls.blotName="code-block";ls.className="ql-code-block";ls.tagName="DIV";Zc.blotName="code-block-container";Zc.className="ql-code-block-container";Zc.tagName="DIV";Zc.allowedChildren=[ls];ls.allowedChildren=[Fa,Ha,ka];ls.requiredContainer=Zc;const t2={scope:Lt.BLOCK,whitelist:["rtl"]},eO=new uo("direction","dir",t2),tO=new za("direction","ql-direction",t2),nO=new rc("direction","direction",t2),rO={scope:Lt.INLINE,whitelist:["serif","monospace"]},iO=new za("font","ql-font",rO);class WQ extends rc{value(e){return super.value(e).replace(/["']/g,"")}}const sO=new WQ("font","font-family",rO),aO=new za("size","ql-size",{scope:Lt.INLINE,whitelist:["small","large","huge"]}),oO=new rc("size","font-size",{scope:Lt.INLINE,whitelist:["10px","18px","32px"]}),QQ=Jo("quill:keyboard"),ZQ=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class U1 extends mo{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=eZ(e);if(i==null){QQ.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(h=>{const m={...i,key:h,...n,...r};this.bindings[m.key]=this.bindings[m.key]||[],this.bindings[m.key].push(m)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(B=>U1.match(e,B));if(i.length===0)return;const o=We.find(e.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const h=this.quill.getSelection();if(h==null||!this.quill.hasFocus())return;const[m,y]=this.quill.getLine(h.index),[g,E]=this.quill.getLeaf(h.index),[S,N]=h.length===0?[g,E]:this.quill.getLeaf(h.index+h.length),I=g instanceof a1?g.value().slice(0,E):"",R=S instanceof a1?S.value().slice(N):"",D={collapsed:h.length===0,empty:h.length===0&&m.length()<=1,format:this.quill.getFormat(h),line:m,offset:y,prefix:I,suffix:R,event:e};i.some(B=>{if(B.collapsed!=null&&B.collapsed!==D.collapsed||B.empty!=null&&B.empty!==D.empty||B.offset!=null&&B.offset!==D.offset)return!1;if(Array.isArray(B.format)){if(B.format.every(H=>D.format[H]==null))return!1}else if(typeof B.format=="object"&&!Object.keys(B.format).every(H=>B.format[H]===!0?D.format[H]!=null:B.format[H]===!1?D.format[H]==null:jl(B.format[H],D.format[H])))return!1;return B.prefix!=null&&!B.prefix.test(D.prefix)||B.suffix!=null&&!B.suffix.test(D.suffix)?!1:B.handler.call(this,h,D,B)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[o]=this.quill.getLine(e.index);let h=new Dt().retain(e.index-r).delete(r);if(n.offset===0){const[m]=this.quill.getLine(e.index-1);if(m&&!(m.statics.blotName==="block"&&m.length()<=1)){const g=o.formats(),E=this.quill.getFormat(e.index-1,1);if(i=ya.AttributeMap.diff(g,E)||{},Object.keys(i).length>0){const S=new Dt().retain(e.index+o.length()-2).retain(1,i);h=h.compose(S)}}}this.quill.updateContents(h,We.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[o]=this.quill.getLine(e.index);let h=new Dt().retain(e.index).delete(r);if(n.offset>=o.length()-1){const[m]=this.quill.getLine(e.index+1);if(m){const y=o.formats(),g=this.quill.getFormat(e.index,1);i=ya.AttributeMap.diff(y,g)||{},Object.keys(i).length>0&&(h=h.retain(m.length()-1).retain(1,i))}}this.quill.updateContents(h,We.sources.USER),this.quill.focus()}handleDeleteRange(e){n2({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((o,h)=>(this.quill.scroll.query(h,Lt.BLOCK)&&!Array.isArray(n.format[h])&&(o[h]=n.format[h]),o),{}),i=new Dt().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,We.sources.USER),this.quill.setSelection(e.index+1,We.sources.SILENT),this.quill.focus()}}const JQ={bindings:{bold:Wy("bold"),italic:Wy("italic"),underline:Wy("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",We.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",We.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",We.sources.USER):e.format.list!=null&&this.quill.format("list",!1,We.sources.USER)}},"indent code-block":a6(!0),"outdent code-block":a6(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,We.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new Dt().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,We.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,We.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,We.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,We.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new Dt().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,We.sources.USER),this.quill.setSelection(t.index+1,We.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),i=new Dt().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,We.sources.USER),this.quill.setSelection(t.index+1,We.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,i,o]=e.getTable(t),h=tZ(n,r,i,o);if(h==null)return;let m=n.offset();if(h<0){const y=new Dt().retain(m).insert(`
`);this.quill.updateContents(y,We.sources.USER),this.quill.setSelection(t.index+1,t.length,We.sources.SILENT)}else if(h>0){m+=n.length();const y=new Dt().retain(m).insert(`
`);this.quill.updateContents(y,We.sources.USER),this.quill.setSelection(m,We.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,We.sources.USER):this.quill.setSelection(i+r.length(),We.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>n)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",We.sources.USER),this.quill.history.cutoff();const h=new Dt().retain(t.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:o});return this.quill.updateContents(h,We.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,We.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const o=new Dt().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,We.sources.USER),this.quill.setSelection(t.index-1,We.sources.SILENT),!1}return!0}},"embed left":lm("ArrowLeft",!1),"embed left shift":lm("ArrowLeft",!0),"embed right":lm("ArrowRight",!1),"embed right shift":lm("ArrowRight",!0),"table down":o6(!1),"table up":o6(!0)}};U1.DEFAULTS=JQ;function a6(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const i=this.quill.scroll.query("code-block"),{TAB:o}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,o,We.sources.USER),this.quill.setSelection(e.index+o.length,We.sources.SILENT);return}const h=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:m,length:y}=e;h.forEach((g,E)=>{t?(g.insertAt(0,o),E===0?m+=o.length:y+=o.length):g.domNode.textContent.startsWith(o)&&(g.deleteAt(0,o.length),E===0?m-=o.length:y-=o.length)}),this.quill.update(We.sources.USER),this.quill.setSelection(m,y,We.sources.SILENT)}}}function lm(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[o]=this.quill.getLeaf(i);return o instanceof Xs?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,We.sources.USER):this.quill.setSelection(r.index-1,We.sources.USER):e?this.quill.setSelection(r.index,r.length+1,We.sources.USER):this.quill.setSelection(r.index+r.length+1,We.sources.USER),!1):!0}}}function Wy(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],We.sources.USER)}}}function o6(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",i=n.line,o=i.parent[r];if(o!=null){if(o.statics.blotName==="table-row"){let h=o.children.head,m=i;for(;m.prev!=null;)m=m.prev,h=h.next;const y=h.offset(this.quill.scroll)+Math.min(n.offset,h.length()-1);this.quill.setSelection(y,0,We.sources.USER)}}else{const h=i.table()[r];h!=null&&(t?this.quill.setSelection(h.offset(this.quill.scroll)+h.length()-1,0,We.sources.USER):this.quill.setSelection(h.offset(this.quill.scroll),0,We.sources.USER))}return!1}}}function eZ(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=Ju(t);else return null;return t.shortKey&&(t[ZQ]=t.shortKey,delete t.shortKey),t}function n2(t){let{quill:e,range:n}=t;const r=e.getLines(n);let i={};if(r.length>1){const o=r[0].formats(),h=r[r.length-1].formats();i=ya.AttributeMap.diff(h,o)||{}}e.deleteText(n,We.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,We.sources.USER),e.setSelection(n.index,We.sources.SILENT)}function tZ(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const nZ=/font-weight:\s*normal/,rZ=["P","OL","UL"],l6=t=>t&&rZ.includes(t.tagName),iZ=t=>{Array.from(t.querySelectorAll("br")).filter(e=>l6(e.previousElementSibling)&&l6(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},sZ=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(nZ)).forEach(e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)})};function aZ(t){t.querySelector('[id^="docs-internal-guid-"]')&&(sZ(t),iZ(t))}const oZ=/\bmso-list:[^;]*ignore/i,lZ=/\bmso-list:[^;]*\bl(\d+)/i,cZ=/\bmso-list:[^;]*\blevel(\d+)/i,uZ=(t,e)=>{const n=t.getAttribute("style"),r=n?.match(lZ);if(!r)return null;const i=Number(r[1]),o=n?.match(cZ),h=o?Number(o[1]):1,m=new RegExp(`@list l${i}:level${h}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),y=e.match(m),g=y&&y[1]==="bullet"?"bullet":"ordered";return{id:i,indent:h,type:g,element:t}},hZ=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(h=>{(h.getAttribute("style")||"").match(oZ)?n.push(h):r.push(h)}),n.forEach(h=>h.parentNode?.removeChild(h));const i=t.documentElement.innerHTML,o=r.map(h=>uZ(h,i)).filter(h=>h);for(;o.length;){const h=[];let m=o.shift();for(;m;)h.push(m),m=o.length&&o[0]?.element===m.element.nextElementSibling&&o[0].id===m.id?o.shift():null;const y=document.createElement("ul");h.forEach(S=>{const N=document.createElement("li");N.setAttribute("data-list",S.type),S.indent>1&&N.setAttribute("class",`ql-indent-${S.indent-1}`),N.innerHTML=S.element.innerHTML,y.appendChild(N)});const g=h[0]?.element,{parentNode:E}=g??{};g&&E?.replaceChild(y,g),h.slice(1).forEach(S=>{let{element:N}=S;E?.removeChild(N)})}};function fZ(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&hZ(t)}const dZ=[fZ,aZ],pZ=t=>{t.documentElement&&dZ.forEach(e=>{e(t)})},mZ=Jo("quill:clipboard"),gZ=[[Node.TEXT_NODE,OZ],[Node.TEXT_NODE,u6],["br",EZ],[Node.ELEMENT_NODE,u6],[Node.ELEMENT_NODE,xZ],[Node.ELEMENT_NODE,wZ],[Node.ELEMENT_NODE,NZ],["li",CZ],["ol, ul",TZ],["pre",SZ],["tr",_Z],["b",Qy("bold")],["i",Qy("italic")],["strike",Qy("strike")],["style",AZ]],yZ=[$Q,eO].reduce((t,e)=>(t[e.keyName]=e,t),{}),c6=[Z8,Jw,Zw,nO,sO,oO].reduce((t,e)=>(t[e.keyName]=e,t),{});class vZ extends mo{static DEFAULTS={matchers:[]};constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],gZ.concat(this.options.matchers??[]).forEach(r=>{let[i,o]=r;this.addMatcher(i,o)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[ls.blotName])return new Dt().insert(r||"",{[ls.blotName]:i[ls.blotName]});if(!n)return new Dt().insert(r||"",i);const o=this.convertHTML(n);return Ud(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||i.table)?o.compose(new Dt().retain(o.length()-1).delete(1)):o}normalizeHTML(e){pZ(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[o,h]=this.prepareMatching(r,i);return r2(this.quill.scroll,r,o,h,i)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:We.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,We.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new Dt().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),We.sources.SILENT)}}onCaptureCopy(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:o}=this.onCopy(r,n);e.clipboardData?.setData("text/plain",o),e.clipboardData?.setData("text/html",i),n&&n2({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=e.clipboardData?.getData("text/html");let i=e.clipboardData?.getData("text/plain");if(!r&&!i){const h=e.clipboardData?.getData("text/uri-list");h&&(i=this.normalizeURIList(h))}const o=Array.from(e.clipboardData?.files||[]);if(!r&&o.length>0){this.quill.uploader.upload(n,o);return}if(r&&o.length>0){const h=new DOMParser().parseFromString(r,"text/html");if(h.body.childElementCount===1&&h.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,o);return}}this.onPaste(n,{html:r,text:i})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:i}=n;const o=this.quill.getFormat(e.index),h=this.convert({text:r,html:i},o);mZ.log("onPaste",h,{text:r,html:i});const m=new Dt().retain(e.index).delete(e.length).concat(h);this.quill.updateContents(m,We.sources.USER),this.quill.setSelection(m.length()-e.length,We.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],i=[];return this.matchers.forEach(o=>{const[h,m]=o;switch(h){case Node.TEXT_NODE:i.push(m);break;case Node.ELEMENT_NODE:r.push(m);break;default:Array.from(e.querySelectorAll(h)).forEach(y=>{n.has(y)?n.get(y)?.push(m):n.set(y,[m])});break}}),[r,i]}}function Jc(t,e,n,r){return r.query(e)?t.reduce((i,o)=>{if(!o.insert)return i;if(o.attributes&&o.attributes[e])return i.push(o);const h=n?{[e]:n}:{};return i.insert(o.insert,{...h,...o.attributes})},new Dt):t}function Ud(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*e.length)===e}function Ul(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Xs?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function bZ(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Ul(t.previousElementSibling,e)&&!Ul(t.nextElementSibling,e)}const cm=new WeakMap;function lO(t){return t==null?!1:(cm.has(t)||(t.tagName==="PRE"?cm.set(t,!0):cm.set(t,lO(t.parentNode))),cm.get(t))}function r2(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((o,h)=>h(e,o,t),new Dt):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((o,h)=>{let m=r2(t,h,n,r,i);return h.nodeType===e.ELEMENT_NODE&&(m=n.reduce((y,g)=>g(h,y,t),m),m=(i.get(h)||[]).reduce((y,g)=>g(h,y,t),m)),o.concat(m)},new Dt):new Dt}function Qy(t){return(e,n,r)=>Jc(n,t,!0,r)}function wZ(t,e,n){const r=uo.keys(t),i=za.keys(t),o=rc.keys(t),h={};return r.concat(i).concat(o).forEach(m=>{let y=n.query(m,Lt.ATTRIBUTE);y!=null&&(h[y.attrName]=y.value(t),h[y.attrName])||(y=yZ[m],y!=null&&(y.attrName===m||y.keyName===m)&&(h[y.attrName]=y.value(t)||void 0),y=c6[m],y!=null&&(y.attrName===m||y.keyName===m)&&(y=c6[m],h[y.attrName]=y.value(t)||void 0))}),Object.entries(h).reduce((m,y)=>{let[g,E]=y;return Jc(m,g,E,n)},e)}function xZ(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof Xs){const i={},o=r.value(t);if(o!=null)return i[r.blotName]=o,new Dt().insert(i,r.formats(t,n))}else if(r.prototype instanceof hd&&!Ud(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Jc(e,r.blotName,r.formats(t,n),n);return e}function EZ(t,e){return Ud(e,`
`)||e.insert(`
`),e}function SZ(t,e,n){const r=n.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return Jc(e,"code-block",i,n)}function AZ(){return new Dt}function CZ(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!Ud(e,`
`))return e;let i=-1,o=t.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(i+=1),o=o.parentNode;return i<=0?e:e.reduce((h,m)=>m.insert?m.attributes&&typeof m.attributes.indent=="number"?h.push(m):h.insert(m.insert,{indent:i,...m.attributes||{}}):h,new Dt)}function TZ(t,e,n){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const o=r.getAttribute("data-checked");return o&&(i=o==="true"?"checked":"unchecked"),Jc(e,"list",i,n)}function u6(t,e,n){if(!Ud(e,`
`)){if(Ul(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(Ul(r,n))return e.insert(`
`);const i=n.query(r);if(i&&i.prototype instanceof pa)return e.insert(`
`);r=r.firstChild}}}return e}function NZ(t,e,n){const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),(i.fontWeight?.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,h)=>{let[m,y]=h;return Jc(o,m,y,n)},e),parseFloat(i.textIndent||0)>0?new Dt().insert("	").concat(e):e}function _Z(t,e,n){const r=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(r!=null){const o=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return Jc(e,"table",o,n)}return e}function OZ(t,e,n){let r=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!lO(t)){if(r.trim().length===0&&r.includes(`
`)&&!bZ(t,n))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&Ul(t.parentElement,n)||t.previousSibling instanceof Element&&Ul(t.previousSibling,n))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&Ul(t.parentElement,n)||t.nextSibling instanceof Element&&Ul(t.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class IZ extends mo{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,n){super(e,n),this.quill.on(We.events.EDITOR_CHANGE,(r,i,o,h)=>{r===We.events.SELECTION_CHANGE?i&&h!==We.sources.SILENT&&(this.currentRange=i):r===We.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||h===We.sources.USER?this.record(i,o):this.transform(i)),this.currentRange=Sb(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const i=this.quill.getContents(),o=r.delta.invert(i);this.stack[n].push({delta:o,range:Sb(r.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,We.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(n),i=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const h=this.stack.undo.pop();h&&(r=r.compose(h.delta),i=h.range)}else this.lastRecorded=o;r.length()!==0&&(this.stack.undo.push({delta:r,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){h6(this.stack.undo,e),h6(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,We.sources.USER);else{const n=MZ(this.quill.scroll,e.delta);this.quill.setSelection(n,We.sources.USER)}}}function h6(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&Sb(i.range,n)},n=i.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function RZ(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,Lt.BLOCK)!=null):!1}function MZ(t,e){const n=e.reduce((i,o)=>i+(o.delete||0),0);let r=e.length()-n;return RZ(t,e)&&(r-=1),r}function Sb(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class cO extends mo{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const h=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(h.offsetNode,h.offset),i.setEnd(h.offsetNode,h.offset)}const o=i&&e.selection.normalizeNative(i);if(o){const h=e.selection.normalizedToRange(o);r.dataTransfer?.files&&this.upload(h,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(i=>{i&&this.options.mimetypes?.includes(i.type)&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}cO.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(i=>{const o=new FileReader;o.onload=()=>{i(o.result)},o.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((o,h)=>o.insert({image:h}),new Dt().retain(t.index).delete(t.length));this.quill.updateContents(i,Ot.sources.USER),this.quill.setSelection(t.index+r.length,Ot.sources.SILENT)})}};const DZ=["insertText","insertReplacementText"];class LZ extends mo{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(We.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){n2({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Dt().retain(e.index).insert(n,r),We.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,We.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!DZ.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=kZ(e);if(r==null)return;const i=this.quill.selection.normalizeNative(n),o=i?this.quill.selection.normalizedToRange(i):null;o&&this.replaceText(o,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function kZ(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const jZ=/Mac/i.test(navigator.platform),BZ=100,PZ=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||jZ&&t.key==="a"&&t.ctrlKey===!0);class UZ extends mo{isListening=!1;selectionChangeDeadline=0;constructor(e,n){super(e,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:r,event:i}=n;if(!(r instanceof Ba)||!r.uiNode)return!0;const o=getComputedStyle(r.domNode).direction==="rtl";return o&&i.key!=="ArrowRight"||!o&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(i.shiftKey?1:0),We.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&PZ(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+BZ,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const r=this.quill.scroll.find(n.startContainer);if(!(r instanceof Ba)||!r.uiNode)return;const i=document.createRange();i.setStartAfter(r.uiNode),i.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(i)}}We.register({"blots/block":Ki,"blots/block/embed":pa,"blots/break":Ha,"blots/container":Qc,"blots/cursor":ka,"blots/embed":Ww,"blots/inline":as,"blots/scroll":KQ,"blots/text":Fa,"modules/clipboard":vZ,"modules/history":IZ,"modules/keyboard":U1,"modules/uploader":cO,"modules/input":LZ,"modules/uiNode":UZ});class FZ extends za{add(e,n){let r=0;if(n==="+1"||n==="-1"){const i=this.value(e)||0;r=n==="+1"?i+1:i-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const zZ=new FZ("indent","ql-indent",{scope:Lt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class HZ extends Ki{static blotName="blockquote";static tagName="blockquote"}class qZ extends Ki{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class Fd extends Qc{}Fd.blotName="list-container";Fd.tagName="OL";class zd extends Ki{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){We.register(Fd)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),i=o=>{if(!e.isEnabled())return;const h=this.statics.formats(n,e);h==="checked"?(this.format("list","unchecked"),o.preventDefault()):h==="unchecked"&&(this.format("list","checked"),o.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}zd.blotName="list";zd.tagName="LI";Fd.allowedChildren=[zd];zd.requiredContainer=Fd;class i2 extends as{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class VZ extends i2{static blotName="italic";static tagName=["EM","I"]}class o1 extends as{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return uO(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function uO(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class GZ extends as{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class KZ extends i2{static blotName="strike";static tagName=["S","STRIKE"]}class $Z extends as{static blotName="underline";static tagName="U"}class YZ extends Ww{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const f6=["alt","height","width"];let XZ=class extends Xs{static blotName="image";static tagName="IMG";static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return f6.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return uO(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){f6.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}};const d6=["height","width"];class WZ extends pa{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return d6.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return o1.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){d6.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Af=new za("code-token","hljs",{scope:Lt.INLINE});class Xo extends as{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(ls.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),Af.add(this.domNode,r)}format(e,n){e!==Xo.blotName?super.format(e,n):n?Af.add(this.domNode,n):(Af.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Af.value(this.domNode)||this.unwrap()}}Xo.blotName="code-token";Xo.className="ql-token";class fa extends ls{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),Xo.blotName,!1),super.replaceWith(e,n)}}class Uf extends Zc{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===fa.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,i){r===fa.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,i)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(h=>h!==this.uiNode).map(h=>h.textContent).join(`
`)}
`,o=fa.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const h=this.children.reduce((y,g)=>y.concat(X8(g,!1)),new Dt),m=e(i,o);h.diff(m).reduce((y,g)=>{let{retain:E,attributes:S}=g;return E?(S&&Object.keys(S).forEach(N=>{[fa.blotName,Xo.blotName].includes(N)&&this.formatAt(y,E,N,S[N])}),y+E):y},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?fa.formats(r.domNode):"plain"}">
${P1(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=fa.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}Uf.allowedChildren=[fa];fa.requiredContainer=Uf;fa.allowedChildren=[Xo,ka,Fa,Ha];const QZ=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class hO extends mo{static register(){We.register(Xo,!0),We.register(fa,!0),We.register(Uf,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:o}=i;return r[o]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(We.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Uf))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:o}=r;const h=n.ownerDocument.createElement("option");h.textContent=o,h.setAttribute("value",i),n.appendChild(h)}),n.addEventListener("change",()=>{e.format(fa.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=fa.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(We.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(We.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Uf):[e]).forEach(o=>{o.highlight(this.highlightBlot,n)}),this.quill.update(We.sources.SILENT),r!=null&&this.quill.setSelection(r,We.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return P1(e).split(`
`).reduce((i,o,h)=>(h!==0&&i.insert(`
`,{[ls.blotName]:n}),i.insert(o)),new Dt);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(ls.className),r.innerHTML=QZ(this.options.hljs,n,e),r2(this.quill.scroll,r,[(i,o)=>{const h=Af.value(i);return h?o.compose(new Dt().retain(o.length(),{[Xo.blotName]:h})):o}],[(i,o)=>i.data.split(`
`).reduce((h,m,y)=>(y!==0&&h.insert(`
`,{[ls.blotName]:n}),h.insert(m)),o)],new WeakMap)}}hO.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class ja extends Ki{static blotName="table";static tagName="TD";static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",s2()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===ja.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Vc extends Qc{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const o=this.splitAfter(n);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Vl extends Qc{static blotName="table-body";static tagName="TBODY"}class l1 extends Qc{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(Vc),n=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=ja.formats(r.children.head.domNode));const o=this.scroll.create(ja.blotName,i);r.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(Vl);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e);i?.remove()})}insertColumn(e){const[n]=this.descendant(Vl);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e),o=ja.formats(r.children.head.domNode),h=this.scroll.create(ja.blotName,o);r.insertBefore(h,i)})}insertRow(e){const[n]=this.descendant(Vl);if(n==null||n.children.head==null)return;const r=s2(),i=this.scroll.create(Vc.blotName);n.children.head.children.forEach(()=>{const h=this.scroll.create(ja.blotName,r);i.appendChild(h)});const o=n.children.at(e);n.insertBefore(i,o)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}l1.allowedChildren=[Vl];Vl.requiredContainer=l1;Vl.allowedChildren=[Vc];Vc.requiredContainer=Vl;Vc.allowedChildren=[ja];ja.requiredContainer=Vc;function s2(){return`row-${Math.random().toString(36).slice(2,6)}`}class ZZ extends mo{static register(){We.register(ja),We.register(Vc),We.register(Vl),We.register(l1)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(l1).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(We.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(We.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(We.sources.USER),this.quill.setSelection(n,We.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==ja.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,i,o]=this.getTable(n);if(o==null)return;const h=o.cellOffset();r.insertColumn(h+e),this.quill.update(We.sources.USER);let m=i.rowOffset();e===0&&(m+=1),this.quill.setSelection(n.index+m,n.length,We.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,i,o]=this.getTable(n);if(o==null)return;const h=i.rowOffset();r.insertRow(h+e),this.quill.update(We.sources.USER),e>0?this.quill.setSelection(n,We.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,We.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(o=>{const h=new Array(n).fill(`
`).join("");return o.insert(h,{table:s2()})},new Dt().retain(r.index));this.quill.updateContents(i,We.sources.USER),this.quill.setSelection(r.index,We.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(We.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(We.events.TEXT_CHANGE,(r,i,o)=>{o===We.sources.USER&&this.balanceTables()}),!0):!1)})}}const p6=Jo("quill:toolbar");class a2 extends mo{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),JZ(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){p6.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const i=this.options.handlers?.[r];i&&this.addHandler(r,i)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(We.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){p6.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let o;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const m=e.options[e.selectedIndex];m.hasAttribute("selected")?o=!1:o=m.value||!1}else e.classList.contains("ql-active")?o=!1:o=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[h]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,o);else if(this.quill.scroll.query(n).prototype instanceof Xs){if(o=prompt(`Enter ${n}`),!o)return;this.quill.updateContents(new Dt().retain(h.index).delete(h.length).insert({[n]:o}),We.sources.USER)}else this.quill.format(n,o,We.sources.USER);this.update(h)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,o]=r;if(o.tagName==="SELECT"){let h=null;if(e==null)h=null;else if(n[i]==null)h=o.querySelector("option[selected]");else if(!Array.isArray(n[i])){let m=n[i];typeof m=="string"&&(m=m.replace(/"/g,'\\"')),h=o.querySelector(`option[value="${m}"]`)}h==null?(o.value="",o.selectedIndex=-1):h.selected=!0}else if(e==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const h=n[i],m=h===o.getAttribute("value")||h!=null&&h.toString()===o.getAttribute("value")||h==null&&!o.getAttribute("value");o.classList.toggle("ql-active",m),o.setAttribute("aria-pressed",m.toString())}else{const h=n[i]!=null;o.classList.toggle("ql-active",h),o.setAttribute("aria-pressed",h.toString())}})}}a2.DEFAULTS={};function m6(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function JZ(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")m6(r,i);else{const o=Object.keys(i)[0],h=i[o];Array.isArray(h)?eJ(r,o,h):m6(r,o,h)}}),t.appendChild(r)})}function eJ(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(i=>{const o=document.createElement("option");i!==!1?o.setAttribute("value",String(i)):o.setAttribute("selected","selected"),r.appendChild(o)}),t.appendChild(r)}a2.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,Lt.INLINE)!=null&&this.quill.format(n,!1,We.sources.USER)})}else this.quill.removeFormat(t.index,t.length,We.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",We.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,We.sources.USER),this.quill.format("direction",t,We.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,We.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,We.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,We.sources.USER):this.quill.format("list","unchecked",We.sources.USER):this.quill.format("list",t,We.sources.USER)}}};const tJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',nJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',rJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',iJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',sJ='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',aJ='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',oJ='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',lJ='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',g6='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',cJ='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',uJ='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',hJ='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',fJ='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',dJ='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',pJ='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',mJ='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',gJ='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',yJ='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',vJ='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',bJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',wJ='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',xJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',EJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',SJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',AJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',CJ='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',TJ='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',NJ='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',_J='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',OJ='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',IJ='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',RJ='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',MJ='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',dd={align:{"":tJ,center:nJ,right:rJ,justify:iJ},background:sJ,blockquote:aJ,bold:oJ,clean:lJ,code:g6,"code-block":g6,color:cJ,direction:{"":uJ,rtl:hJ},formula:fJ,header:{1:dJ,2:pJ,3:mJ,4:gJ,5:yJ,6:vJ},italic:bJ,image:wJ,indent:{"+1":xJ,"-1":EJ},link:SJ,list:{bullet:AJ,check:CJ,ordered:TJ},script:{sub:NJ,super:_J},strike:OJ,table:IJ,underline:RJ,video:MJ},DJ='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let y6=0;function v6(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class F1{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),v6(this.label,"aria-expanded"),v6(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=DJ,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${y6}`,y6+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class fO extends F1{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class dO extends F1{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const LJ=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class pO{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,LJ(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let h=0;if(o.right>i.right&&(h=i.right-o.right,this.root.style.left=`${n+h}px`),o.left<i.left&&(h=i.left-o.left,this.root.style.left=`${n+h}px`),o.bottom>i.bottom){const m=o.bottom-o.top,y=e.bottom-e.top+m;this.root.style.top=`${r-y}px`,this.root.classList.add("ql-flip")}return h}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const kJ=[!1,"center","right","justify"],jJ=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],BJ=[!1,"serif","monospace"],PJ=["1","2","3",!1],UJ=["small",!1,"large","huge"];class Hd extends Th{constructor(e,n){super(e,n);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(i.target)||o.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(o.startsWith("ql-")&&(o=o.slice(3),n[o]!=null))if(o==="direction")r.innerHTML=n[o][""]+n[o].rtl;else if(typeof n[o]=="string")r.innerHTML=n[o];else{const h=r.value||"";h!=null&&n[o][h]&&(r.innerHTML=n[o][h])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&mf(i,kJ),typeof n.align=="object"))return new dO(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const o=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&mf(i,jJ,o==="background"?"#ffffff":"#000000"),new fO(i,n[o])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?mf(i,BJ):i.classList.contains("ql-header")?mf(i,PJ):i.classList.contains("ql-size")&&mf(i,UJ)),new F1(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(Ot.events.EDITOR_CHANGE,r)}}Hd.DEFAULTS=ql({},Th.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class mO extends pO{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ot.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ot.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=FJ(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Ot.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Ot.sources.USER),this.quill.setSelection(r+2,Ot.sources.USER)}break}}this.textbox.value="",this.hide()}}function FJ(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function mf(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const zJ=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class HJ extends mO{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,n){super(e,n),this.quill.on(Ot.events.EDITOR_CHANGE,(r,i,o,h)=>{if(r===Ot.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&h===Ot.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const m=this.quill.getLines(i.index,i.length);if(m.length===1){const y=this.quill.getBounds(i);y!=null&&this.position(y)}else{const y=m[m.length-1],g=this.quill.getIndex(y),E=Math.min(y.length()-1,i.index+i.length-g),S=this.quill.getBounds(new qc(g,E));S!=null&&this.position(S)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ot.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}class gO extends Hd{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=zJ),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new HJ(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),dd),this.buildPickers(e.container.querySelectorAll("select"),dd))}}gO.DEFAULTS=ql({},Hd.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,We.sources.USER)}}}}});const qJ=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class VJ extends mO{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,Ot.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ot.events.SELECTION_CHANGE,(e,n,r)=>{if(e!=null){if(e.length===0&&r===Ot.sources.USER){const[i,o]=this.quill.scroll.descendant(o1,e.index);if(i!=null){this.linkRange=new qc(e.index-o,i.length());const h=o1.formats(i.domNode);this.preview.textContent=h,this.preview.setAttribute("href",h),this.show();const m=this.quill.getBounds(this.linkRange);m!=null&&this.position(m);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class yO extends Hd{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=qJ),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),dd),this.buildPickers(e.container.querySelectorAll("select"),dd),this.tooltip=new VJ(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}yO.DEFAULTS=ql({},Hd.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,We.sources.USER)}}}}});We.register({"attributors/attribute/direction":eO,"attributors/class/align":Q8,"attributors/class/background":XQ,"attributors/class/color":YQ,"attributors/class/direction":tO,"attributors/class/font":iO,"attributors/class/size":aO,"attributors/style/align":Z8,"attributors/style/background":Jw,"attributors/style/color":Zw,"attributors/style/direction":nO,"attributors/style/font":sO,"attributors/style/size":oO},!0);We.register({"formats/align":Q8,"formats/direction":tO,"formats/indent":zZ,"formats/background":Jw,"formats/color":Zw,"formats/font":iO,"formats/size":aO,"formats/blockquote":HZ,"formats/code-block":ls,"formats/header":qZ,"formats/list":zd,"formats/bold":i2,"formats/code":e2,"formats/italic":VZ,"formats/link":o1,"formats/script":GZ,"formats/strike":KZ,"formats/underline":$Z,"formats/formula":YZ,"formats/image":XZ,"formats/video":WZ,"modules/syntax":hO,"modules/table":ZZ,"modules/toolbar":a2,"themes/bubble":gO,"themes/snow":yO,"ui/icons":dd,"ui/picker":F1,"ui/icon-picker":dO,"ui/color-picker":fO,"ui/tooltip":pO},!0);class z1 extends Ra.Component{constructor(e){super(e),this.editingAreaRef=W.createRef(),this.containerRef=W.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,i,o,h)=>{r==="text-change"?this.onEditorChangeText?.(this.editor.getSemanticHTML(),i,h,this.unprivilegedEditor):r==="selection-change"&&this.onEditorChangeSelection?.(i,h,this.unprivilegedEditor)};const n=this.isControlled()?e.value:e.defaultValue;this.value=n??""}validateProps(e){if(Ra.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ra.Children.count(e.children)&&Ra.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,n){if(this.validateProps(e),!this.editor||this.state.generation!==n.generation)return!0;if("value"in e){const r=this.getEditorContents(),i=e.value??"";this.isEqualValue(i,r)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!jl(e[r],this.props[r]))}shouldComponentRegenerate(e){return this.dirtyProps.some(n=>!jl(e[n],this.props[n]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,n){if(this.editor&&this.shouldComponentRegenerate(e)){const r=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.editor&&e.placeholder!==this.props.placeholder&&(this.editor.root.dataset.placeholder=this.props.placeholder||""),this.state.generation!==n.generation){const{delta:r,selection:i}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const o=this.editor;o.setContents(r),b6(()=>this.setEditorSelection(o,i))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const r=this.containerRef.current?.querySelector(".ql-toolbar");r&&r.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,n){const r=new We(e,n);return n.tabIndex!=null&&this.setEditorTabIndex(r,n.tabIndex),this.hookEditor(r),r}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,n){return this.isDelta(e)&&this.isDelta(n)?jl(e.ops,n.ops):jl(e,n)}setEditorContents(e,n){this.value=n;const r=this.getEditorSelection();typeof n=="string"?e.setContents(e.clipboard.convert({html:n})):e.setContents(n),b6(()=>this.setEditorSelection(e,r))}setEditorSelection(e,n){if(this.selection=n,n){const r=e.getLength();n.index=Math.max(0,Math.min(n.index,r-1)),n.length=Math.max(0,Math.min(n.length,r-1-n.index)),e.setSelection(n)}}setEditorTabIndex(e,n){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=n)}setEditorReadOnly(e,n){n?e.disable():e.enable()}makeUnprivilegedEditor(e){const n=e;return{getHTML:()=>n.root.innerHTML,getSemanticHTML:n.getSemanticHTML.bind(n),getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:n}=this.props,{generation:r}=this.state,i={key:r,ref:this.editingAreaRef};return Ra.Children.count(e)?Ra.cloneElement(Ra.Children.only(e),i):n?Ra.createElement("pre",{...i}):Ra.createElement("div",{...i})}render(){return Ra.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,n,r,i){if(!this.editor)return;const o=this.isDelta(this.value)?i.getContents():i.getSemanticHTML();o!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=o,this.props.onChange?.(e,n,r,i))}onEditorChangeSelection(e,n,r){if(!this.editor)return;const i=this.getEditorSelection(),o=!i&&e,h=i&&!e;jl(e,i)||(this.selection=e,this.props.onChangeSelection?.(e,n,r),o?this.props.onFocus?.(e,n,r):h&&this.props.onBlur?.(i,n,r))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}z1.displayName="React Quill";z1.Quill=We;z1.defaultProps={theme:"snow",modules:{},readOnly:!1};function b6(t){Promise.resolve().then(t)}const w6=[{code:"en",label:"English"},{code:"hi",label:"Hindi"},{code:"mr",label:"Marathi"}];function GJ(){const t=Ti(),[e]=n5(),{db:n}=Di(),{currentUser:r}=fs(),i=e.get("type")||"text",o=i==="lesson"?"text":i,h=e.get("subjectId"),m=e.get("moduleId"),y=e.get("editId"),[g,E]=W.useState(""),[S,N]=W.useState(""),[I,R]=W.useState(!1),[D,j]=W.useState("en"),[B,H]=W.useState({en:"",hi:"",mr:""});W.useEffect(()=>{if(!n||!y)return;(async()=>{const oe=await n.content.findOne(y).exec();if(oe){E(oe.get("title")),N(oe.get("description")||""),R(oe.get("isHomework")||!1);const ve=oe.get("data")||{};ve.translations?H(ve.translations):ve.content&&H(Ee=>({...Ee,en:ve.content})),ve.questions&&se(ve.questions),ve.attachments&&J(ve.attachments)}})()},[n,y]);const[V,se]=W.useState([]),[ee,J]=W.useState([]),F=Y=>{H(oe=>({...oe,[D]:Y}))},ce=async Y=>{if(Y.target.files&&Y.target.files[0]){const oe=Y.target.files[0];if(oe.size>5*1024*1024){alert("File too large. Max 5MB.");return}const ve=new FileReader;ve.onload=()=>{const Ee=ve.result;J(be=>[...be,{id:va(),name:oe.name,type:oe.type,data:Ee}])},ve.readAsDataURL(oe)}},de=Y=>{J(oe=>oe.filter(ve=>ve.id!==Y))},ze=()=>{se([...V,{id:va(),text:"",options:["","","",""],correctAnswer:0}])},Q=(Y,oe,ve)=>{const Ee=[...V];Ee[Y]={...Ee[Y],[oe]:ve},se(Ee)},fe=(Y,oe,ve)=>{const Ee=[...V];Ee[Y].options[oe]=ve,se(Ee)},he=Y=>{se(V.filter((oe,ve)=>ve!==Y))},Ne=async()=>{if(!g)return alert("Title is required");if(!(!n||!r))try{const Y=y||va();let oe=r.classId||"default";try{if(h&&h!=="undefined"){const be=await n.content.findOne(h).exec();be&&be.get("classId")&&(oe=be.get("classId"))}else if(m&&m!=="undefined"){const be=await n.content.findOne(m).exec();if(be){const ne=be.get("subjectId");if(ne){const ye=await n.content.findOne(ne).exec();ye&&ye.get("classId")&&(oe=ye.get("classId"))}}}}catch(be){console.warn("ClassID Lookup failed, defaulting to user class:",be)}const ve={id:Y,type:o,title:g,description:S,classId:oe,subjectId:h||void 0,moduleId:m||void 0,teacherId:r.id,isHomework:I,data:{content:B.en,translations:B,attachments:ee,questions:o==="quiz"?V:void 0},updatedAt:Date.now()},Ee=JSON.parse(JSON.stringify(ve));if(y){const be=await n.content.findOne(y).exec();be&&await be.patch(Ee)}else await n.content.insert({...Ee,createdAt:Date.now()});t(m?`/teacher/module/${m}`:h?`/teacher/subject/${h}`:"/teacher")}catch(Y){console.error("Save failed",Y),alert("Failed to save: "+(Y?.message||"Unknown error"))}},ie=()=>{t(m?`/teacher/module/${m}`:h?`/teacher/subject/${h}`:"/teacher")};return T.jsxs("div",{className:"min-h-screen bg-slate-950 p-6 pb-24 text-slate-100",children:[T.jsxs("div",{className:"flex items-center justify-between mb-8",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:ie,className:"p-2 hover:bg-white/10 rounded-full",children:T.jsx(cs,{className:"w-6 h-6"})}),T.jsxs("h1",{className:"text-xl font-bold capitalize",children:[y?"Edit":"Create"," ",o==="module"?"Module":o==="quiz"?"Quiz":"Note"]})]}),T.jsxs("button",{onClick:Ne,className:"flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg font-bold",children:[T.jsx(g9,{className:"w-4 h-4"})," Save"]})]}),T.jsxs("div",{className:"max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[T.jsx("div",{className:"space-y-6 h-fit",children:T.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-white/10 space-y-4",children:[T.jsxs("div",{className:"p-4 bg-white/5 rounded-xl flex items-center gap-3 border border-white/10 mb-4",children:[o==="module"&&T.jsx(ov,{className:"w-6 h-6 text-purple-400"}),o==="text"&&T.jsx(bd,{className:"w-6 h-6 text-slate-300"}),o==="quiz"&&T.jsx(Db,{className:"w-6 h-6 text-green-400"}),T.jsxs("div",{children:[T.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Type"}),T.jsx("p",{className:"font-bold capitalize",children:o})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Title"}),T.jsx("input",{type:"text",value:g,onChange:Y=>E(Y.target.value),className:"w-full bg-slate-800 border border-white/10 rounded-lg p-3 focus:ring-2 focus:ring-primary-500 outline-none",placeholder:"e.g. Introduction to Physics"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Description"}),T.jsx("textarea",{value:S,onChange:Y=>N(Y.target.value),className:"w-full bg-slate-800 border border-white/10 rounded-lg p-3 focus:ring-2 focus:ring-primary-500 outline-none h-20",placeholder:"Brief summary..."})]}),o!=="module"&&T.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[T.jsx("input",{type:"checkbox",id:"homework",checked:I,onChange:Y=>R(Y.target.checked),className:"w-5 h-5 accent-primary rounded"}),T.jsx("label",{htmlFor:"homework",className:"text-sm font-medium",children:"Assign as Homework"})]})]})}),T.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o==="module"&&T.jsxs("div",{className:"bg-slate-900/50 p-12 rounded-2xl border-dashed border-2 border-white/10 flex flex-col items-center justify-center text-center gap-4 text-slate-500",children:[T.jsx(iv,{className:"w-16 h-16 opacity-20"}),T.jsx("p",{children:"This is a container structure. You can add items to it after creating it."})]}),o==="text"&&T.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-white/10 space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[T.jsx(sv,{className:"w-4 h-4 text-primary-400"})," Content Language"]}),T.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1",children:w6.map(Y=>T.jsx("button",{onClick:()=>j(Y.code),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${D===Y.code?"bg-primary text-primary-foreground shadow":"text-slate-400 hover:text-white"}`,children:Y.label},Y.code))})]}),T.jsx("div",{className:"prose-editor text-slate-900 bg-white rounded-lg overflow-hidden",children:T.jsx(z1,{theme:"snow",value:B[D],onChange:F,modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["clean"]]},className:"min-h-[300px]"})}),T.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[T.jsx(sv,{className:"w-3 h-3"}),"Editing in ",T.jsx("span",{className:"text-primary-400 font-bold",children:w6.find(Y=>Y.code===D)?.label}),". Switch tabs to add translations."]}),T.jsxs("div",{className:"pt-6 mt-6 border-t border-white/5",children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsxs("h4",{className:"text-sm font-bold text-slate-300 flex items-center gap-2",children:[T.jsx($S,{className:"w-4 h-4"})," Attachments (PDF)"]}),T.jsxs("label",{className:"cursor-pointer flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-3 py-1.5 rounded-lg text-xs font-bold border border-white/10 transition-colors",children:[T.jsx(B9,{className:"w-3 h-3"})," Upload PDF",T.jsx("input",{type:"file",accept:"application/pdf",className:"hidden",onChange:ce})]})]}),T.jsxs("div",{className:"space-y-2",children:[ee.length===0&&T.jsx("div",{className:"p-4 border border-dashed border-white/10 rounded-lg text-center text-xs text-slate-600",children:"No attachments uploaded"}),ee.map(Y=>T.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg border border-white/5 group hover:border-primary/30 transition-colors",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-8 h-8 rounded bg-red-500/20 flex items-center justify-center text-red-500",children:T.jsx($S,{className:"w-4 h-4"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("p",{className:"text-sm font-medium truncate max-w-[200px] text-white",children:Y.name}),T.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:Y.type.split("/")[1]})]})]}),T.jsx("button",{onClick:()=>de(Y.id),className:"p-2 text-slate-500 hover:text-red-400 hover:bg-red-500/10 rounded-full transition-all",children:T.jsx(xd,{className:"w-4 h-4"})})]},Y.id))]})]})]}),o==="quiz"&&T.jsxs("div",{className:"space-y-4",children:[V.map((Y,oe)=>T.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-white/10 relative group",children:[T.jsx("button",{onClick:()=>he(oe),className:"absolute top-4 right-4 text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsx(wd,{className:"w-5 h-5"})}),T.jsxs("div",{className:"mb-4",children:[T.jsxs("label",{className:"text-sm font-bold text-primary-400 mb-2 block",children:["Question ",oe+1]}),T.jsx("input",{type:"text",value:Y.text,onChange:ve=>Q(oe,"text",ve.target.value),className:"w-full bg-slate-800 border border-white/10 rounded-lg px-4 py-3 focus:ring-2 focus:ring-primary-500 outline-none placeholder-slate-600",placeholder:"Enter question text..."})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Y.options.map((ve,Ee)=>T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("input",{type:"radio",name:`correct-${Y.id}`,checked:Y.correctAnswer===Ee,onChange:()=>Q(oe,"correctAnswer",Ee),className:"w-4 h-4 accent-primary"}),T.jsx("input",{type:"text",value:ve,onChange:be=>fe(oe,Ee,be.target.value),className:`flex-1 bg-slate-800 rounded-lg px-3 py-2 border border-white/5 text-sm outline-none focus:ring-1 ${Y.correctAnswer===Ee?"ring-primary-500 border-primary-500/50":"focus:ring-white/20"}`,placeholder:`Option ${Ee+1}`})]},Ee))})]},Y.id)),T.jsxs("button",{onClick:ze,className:"w-full py-4 rounded-xl border-2 border-dashed border-white/10 text-slate-400 hover:text-white hover:border-white/20 hover:bg-white/5 transition-all flex items-center justify-center gap-2 font-bold",children:[T.jsx(ih,{className:"w-5 h-5"})," Add Question"]})]})]})]})]})}function vO({classId:t}){const{db:e}=Di(),[n,r]=W.useState([]),[i,o]=W.useState(!0);if(W.useEffect(()=>{if(!e)return;(async()=>{const g=await n8(e,t);r(g.slice(0,10)),o(!1)})()},[e,t]),i)return T.jsx("div",{className:"p-4 text-center text-slate-400",children:"Loading Rankings..."});const h=n.slice(0,3),m=n.slice(3);return i?T.jsx("div",{className:"p-10 text-center text-slate-400 animate-pulse",children:"Scanning frequencies for top signals..."}):T.jsxs("div",{className:"space-y-8 font-sans",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[T.jsx("div",{className:"p-2 rounded-lg bg-yellow-500/20 text-yellow-400",children:T.jsx(Tf,{className:"w-6 h-6"})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-white",children:"Class Leaderboard"}),T.jsx("p",{className:"text-xs text-slate-400",children:"Top performers this week"})]})]}),h.length>0&&T.jsxs("div",{className:"flex justify-center items-end gap-2 sm:gap-4 mb-8 pt-4",children:[h[1]&&T.jsxs(en.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center w-1/3 max-w-[100px]",children:[T.jsxs("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-4 border-slate-400 shadow-[0_0_20px_rgba(148,163,184,0.3)] bg-slate-800 overflow-hidden mb-2 relative z-10",children:[T.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${h[1].avatarId}`,alt:"2nd",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute bottom-0 w-full bg-slate-500 text-black font-bold text-[10px] text-center",children:"#2"})]}),T.jsxs("div",{className:"text-center mb-1",children:[T.jsx("span",{className:"text-sm font-bold text-slate-300 block truncate w-full",children:h[1].name}),T.jsxs("span",{className:"text-xs text-slate-500 flex items-center justify-center gap-1",children:[T.jsx(Sc,{className:"w-3 h-3 text-yellow-500/70"}),h[1].totalStars]})]}),T.jsx("div",{className:"w-full h-24 bg-gradient-to-t from-slate-400/20 to-slate-400/5 rounded-t-xl border-t border-x border-slate-400/30"})]}),h[0]&&T.jsxs(en.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:200},className:"flex flex-col items-center w-1/3 max-w-[120px] -mx-2 z-20",children:[T.jsxs("div",{className:"relative",children:[T.jsx(Tf,{className:"w-8 h-8 text-yellow-400 absolute -top-8 left-1/2 -translate-x-1/2 animate-bounce"}),T.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full border-4 border-yellow-400 shadow-[0_0_30px_rgba(250,204,21,0.5)] bg-yellow-900/50 overflow-hidden mb-2 relative",children:[T.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${h[0].avatarId}`,alt:"1st",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute bottom-0 w-full bg-yellow-400 text-black font-bold text-xs text-center py-0.5",children:"#1"})]})]}),T.jsxs("div",{className:"text-center mb-2",children:[T.jsx("span",{className:"text-base font-black text-yellow-100 block truncate w-full",children:h[0].name}),T.jsxs("span",{className:"text-xs text-yellow-400/80 flex items-center justify-center gap-1",children:[T.jsx(Sc,{className:"w-3 h-3 fill-current"}),h[0].totalStars]})]}),T.jsx("div",{className:"w-full h-32 bg-gradient-to-t from-yellow-500/30 to-yellow-500/10 rounded-t-xl border-t border-x border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.1)] relative overflow-hidden",children:T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"})})]}),h[2]&&T.jsxs(en.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col items-center w-1/3 max-w-[100px]",children:[T.jsxs("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-4 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.3)] bg-orange-900/30 overflow-hidden mb-2 relative z-10",children:[T.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${h[2].avatarId}`,alt:"3rd",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute bottom-0 w-full bg-orange-500 text-black font-bold text-[10px] text-center",children:"#3"})]}),T.jsxs("div",{className:"text-center mb-1",children:[T.jsx("span",{className:"text-sm font-bold text-orange-200 block truncate w-full",children:h[2].name}),T.jsxs("span",{className:"text-xs text-orange-400/80 flex items-center justify-center gap-1",children:[T.jsx(Sc,{className:"w-3 h-3 fill-current"}),h[2].totalStars]})]}),T.jsx("div",{className:"w-full h-20 bg-gradient-to-t from-orange-500/20 to-orange-500/5 rounded-t-xl border-t border-x border-orange-500/30"})]})]}),m.length>0&&T.jsx("div",{className:"bg-black/20 rounded-2xl p-2 border border-white/5 space-y-2 backdrop-blur-sm",children:m.map((y,g)=>T.jsxs(en.div,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:g*.05},className:"p-3 rounded-xl flex items-center gap-4 bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 transition-all",children:[T.jsxs("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-slate-500 text-sm font-mono",children:["#",g+4]}),T.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center overflow-hidden border border-white/10",children:T.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${y.avatarId}`,alt:"avatar"})}),T.jsx("div",{className:"flex-1",children:T.jsx("h3",{className:"font-bold text-slate-300 text-sm",children:y.name})}),T.jsxs("div",{className:"flex items-center gap-1 bg-black/40 px-3 py-1.5 rounded-full border border-white/5",children:[T.jsx(Sc,{className:"w-3 h-3 text-yellow-500"}),T.jsx("span",{className:"text-xs font-bold text-slate-300",children:y.totalStars})]})]},y.id))}),n.length===0&&T.jsxs("div",{className:"text-center py-12",children:[T.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:T.jsx(Tf,{className:"w-8 h-8 text-slate-600"})}),T.jsx("p",{className:"text-slate-500 italic",children:"No champions yet."}),T.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Be the first to score!"})]})]})}function bO({isOpen:t,onClose:e,onSubmit:n,title:r,placeholder:i,initialValue:o=""}){const[h,m]=W.useState(o);W.useEffect(()=>{t&&m(o)},[t,o]);const y=g=>{g.preventDefault(),h.trim()&&(n(h),m(""),e())};return T.jsx(co,{children:t&&T.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:T.jsxs(en.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md glass-panel p-6 rounded-2xl shadow-2xl relative",children:[T.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:T.jsx(xd,{className:"w-5 h-5"})}),T.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:r}),T.jsxs("form",{onSubmit:y,className:"space-y-6",children:[T.jsx("input",{autoFocus:!0,type:"text",value:h,onChange:g=>m(g.target.value),placeholder:i,className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white placeholder:text-slate-500 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all"}),T.jsxs("div",{className:"flex justify-end gap-3",children:[T.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 font-medium transition-colors",children:"Cancel"}),T.jsx("button",{type:"submit",disabled:!h.trim(),className:"px-4 py-2 rounded-xl bg-primary text-primary-foreground font-bold hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-primary/20",children:"Confirm"})]})]})]})})})}function KJ(){const{classId:t}=yd(),e=Ti(),{db:n}=Di(),[r,i]=W.useState("Loading..."),[o,h]=W.useState(""),[m,y]=W.useState("subjects"),[g,E]=W.useState(!1),[S,N]=W.useState([]),[I,R]=W.useState([]),[D,j]=W.useState(""),[B,H]=W.useState(!1),V=async()=>{if(!(!n||!t)){console.log("--- START DATA LOAD ---"),console.log("Target Class ID:",t),j("");try{const F=(await n.classes.find().exec()).map(Ee=>Ee.get("id"));console.log("Available Class IDs in DB:",F);const ce=await n.classes.findOne(t).exec();if(!ce){console.error("CRITICAL: Class ID not found in DB!");const Ee=F.join(", ");j(`ID Mismatch. Requested: ${t} | Available: ${Ee}`),i("Class Not Found"),H(!0);return}console.log("Class Found:",ce.get("name")),i(ce.get("name")),h(ce.get("code")||"");const de=String(ce.get("standard")||"10").replace(/\D/g,""),ze=String(ce.get("medium")||"english").toLowerCase();console.log(`Filter Criteria -> Standard: ${de}, Medium: ${ze}`);const he=(await n.content.find().exec()).map(Ee=>Ee.toJSON()).filter(Ee=>Ee.type!=="subject"?!1:Ee.classId===t?!0:String(Ee.classId)===de?String(Ee.medium||"english").toLowerCase()===ze:!1);console.log(`Raw Subjects Found: ${he.length}`);const Ne=he.map(Ee=>{let be=0;return Ee.classId===de&&(be+=100),Ee.medium&&(be+=10),be+=(Ee.createdAt||0)/1e13,{sub:Ee,score:be}});Ne.sort((Ee,be)=>be.score-Ee.score);const ie=new Set,Y=[];Ne.forEach(Ee=>{const be=Ee.sub.title.trim();ie.has(be)||(ie.add(be),Y.push(Ee.sub))}),console.log(`Final Deduplicated Subjects: ${Y.length}`),N(Y.sort((Ee,be)=>(Ee.createdAt||0)-(be.createdAt||0)));const ve=(await n.users.find().exec()).filter(Ee=>Ee.teacherClassId===t&&Ee.role!=="teacher");R(ve),H(!0)}catch(J){console.error("Data Load Error:",J),j(J.message||"Unknown DB Error"),H(!0)}}};W.useEffect(()=>{V()},[n,t]);const se=async J=>{if(!(!n||!t))try{console.log("Attempting to create subject:",{title:J,classId:t});const F=await n.classes.findOne(t).exec(),ce=F?.get("medium")||"english",de=F?.get("standard")||"10";await n.content.insert({id:crypto.randomUUID(),type:"subject",title:J,description:`Subject in ${r}`,classId:t,medium:ce,standard:de,data:{},createdAt:Date.now(),updatedAt:Date.now(),isHomework:!1}),console.log("Subject created successfully"),V(),E(!1)}catch(F){console.error("Failed to create subject:",F),alert(`Error creating subject: ${F.message||JSON.stringify(F)}`)}},ee=async J=>{if(!n||!confirm("Delete this Subject? Lessons inside might become orphaned."))return;const F=await n.content.findOne(J).exec();F&&await F.remove(),V()};return T.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg",children:[T.jsx(bO,{isOpen:g,onClose:()=>E(!1),onSubmit:se,title:"Create New Subject",placeholder:"Ex: Physics, History..."}),T.jsxs("div",{className:"flex justify-between items-start mb-8",children:[T.jsxs("header",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:()=>e("/teacher"),className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",children:T.jsx(cs,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-2xl font-bold text-white",children:D?T.jsx("span",{className:"text-red-400",children:D}):r}),T.jsxs("p",{className:"text-xs text-slate-400 font-medium flex items-center gap-2",children:["Class Management",o&&T.jsx("span",{className:"px-2 py-0.5 bg-primary/20 text-primary rounded font-mono tracking-widest select-all border border-primary/20",children:o}),B?"":" (Loading...)"]})]})]}),T.jsx("button",{onClick:V,className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",title:"Reload Data",children:T.jsx(p1,{className:`w-5 h-5 ${B?"":"animate-spin"}`})})]}),T.jsxs("div",{className:"flex gap-4 mb-6 border-b border-white/10 pb-2",children:[T.jsxs("button",{onClick:()=>y("subjects"),className:`flex items-center gap-2 px-4 py-2 font-bold transition-all ${m==="subjects"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-white"}`,children:[T.jsx(nh,{className:"w-4 h-4"})," Subjects"]}),T.jsxs("button",{onClick:()=>y("students"),className:`flex items-center gap-2 px-4 py-2 font-bold transition-all ${m==="students"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-white"}`,children:[T.jsx(u5,{className:"w-4 h-4"})," Students"]}),T.jsxs("button",{onClick:()=>y("leaderboard"),className:`flex items-center gap-2 px-4 py-2 font-bold transition-all ${m==="leaderboard"?"text-primary border-b-2 border-primary":"text-slate-400 hover:text-white"}`,children:[T.jsx(nh,{className:"w-4 h-4"})," Leaderboard"]})]}),m==="subjects"&&T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"flex justify-end",children:T.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary/80 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-transform",children:[T.jsx(ih,{className:"w-4 h-4"})," New Subject"]})}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.map(J=>T.jsxs(en.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-panel p-6 rounded-2xl flex items-center justify-between group hover:border-primary/50 transition-all cursor-pointer",onClick:()=>e(`/teacher/subject/${J.id}?classId=${t}`),children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center text-blue-400",children:T.jsx(iv,{className:"w-6 h-6"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-bold text-white text-lg",children:J.title}),T.jsx("p",{className:"text-xs text-slate-400",children:new Date(J.createdAt||Date.now()).toLocaleDateString()})]})]}),T.jsx("button",{onClick:F=>{F.stopPropagation(),ee(J.id)},className:"p-2 text-slate-500 hover:text-red-400 transition-colors",children:T.jsx(wd,{className:"w-5 h-5"})})]},J.id)),S.length===0&&B&&T.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 glass-panel rounded-2xl border-dashed border-white/10",children:[T.jsx(iv,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),T.jsx("p",{className:"font-medium",children:"No subjects found."}),D&&T.jsx("p",{className:"text-red-400 text-sm mt-2",children:D})]})]})]}),m==="students"&&T.jsx("div",{className:"space-y-4",children:T.jsx("div",{className:"glass-panel rounded-2xl overflow-hidden",children:T.jsxs("table",{className:"w-full text-left text-sm text-slate-300",children:[T.jsx("thead",{className:"bg-white/5 text-xs uppercase font-bold text-slate-500",children:T.jsxs("tr",{children:[T.jsx("th",{className:"p-4",children:"Name"}),T.jsx("th",{className:"p-4",children:"Rank/Level"}),T.jsx("th",{className:"p-4 text-right",children:"XP"})]})}),T.jsxs("tbody",{children:[I.map(J=>T.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 transition-colors",children:[T.jsxs("td",{className:"p-4 flex items-center gap-3",children:[T.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 overflow-hidden",children:T.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${J.avatarId}`,alt:"avatar"})}),T.jsx("span",{className:"font-medium text-white",children:J.name})]}),T.jsxs("td",{className:"p-4",children:["Level ",Math.floor((J.xp||0)/100)+1]}),T.jsxs("td",{className:"p-4 text-right font-mono text-primary",children:[J.xp||0," XP"]})]},J.id)),I.length===0&&T.jsx("tr",{children:T.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-500",children:"No students have joined this class yet."})})]})]})})}),m==="leaderboard"&&T.jsx("div",{className:"glass-panel p-6 rounded-2xl",children:T.jsx(vO,{classId:t})})]})}function $J(){const{subjectId:t}=yd(),e=Ti(),{db:n}=Di(),[r,i]=W.useState("Loading..."),[o,h]=W.useState(""),[m,y]=W.useState([]),[g,E]=W.useState(!1);W.useEffect(()=>{if(!n||!t)return;(async()=>{const B=await n.content.findOne(t).exec();B&&(i(B.get("title")),h(B.get("classId")));const V=(await n.content.find().exec()).filter(se=>se.subjectId===t&&(se.type==="module"||se.type==="lesson"));y(V.sort((se,ee)=>(se.createdAt||0)-(ee.createdAt||0)))})()},[n,t]);const[S]=n5(),N=S.get("classId"),I=()=>{e(N?`/teacher/class/${N}`:o?`/teacher/class/${o}`:"/teacher")},R=async j=>{!n||!t||(await n.content.insert({id:crypto.randomUUID(),type:"module",title:j,description:`Module in ${r}`,subjectId:t,classId:o,data:{},createdAt:Date.now(),updatedAt:Date.now(),isHomework:!1}),window.location.reload())},D=async j=>{if(!n||!confirm("Delete this Module? Content inside will be hidden."))return;const B=await n.content.findOne(j).exec();B&&await B.remove(),window.location.reload()};return T.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg",children:[T.jsx(bO,{isOpen:g,onClose:()=>E(!1),onSubmit:R,title:"Create New Lesson (Module)",placeholder:"Ex: Chapter 1 - Introduction"}),T.jsxs("header",{className:"flex items-center gap-4 mb-8",children:[T.jsx("button",{onClick:I,className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",children:T.jsx(cs,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-2xl font-bold text-white",children:r}),T.jsx("p",{className:"text-xs text-slate-400",children:"Subject Overview"})]})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"flex justify-end gap-2",children:T.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg hover:scale-105 transition-transform",children:[T.jsx(ih,{className:"w-4 h-4"})," New Lesson Module"]})}),T.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[m.map(j=>T.jsxs(en.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-panel p-6 rounded-xl flex items-center justify-between cursor-pointer hover:border-primary/50 transition-all",onClick:()=>e(`/teacher/module/${j.id}`),children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center text-purple-400",children:T.jsx(ov,{className:"w-6 h-6"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-bold text-white text-lg",children:j.title}),T.jsx("p",{className:"text-xs text-slate-400 capitalize",children:"Lesson Module"})]})]}),T.jsx("button",{onClick:B=>{B.stopPropagation(),D(j.id)},className:"p-2 text-slate-500 hover:text-red-400 transition-colors",children:T.jsx(wd,{className:"w-5 h-5"})})]},j.id)),m.length===0&&T.jsxs("div",{className:"text-center text-slate-500 py-12 glass-panel rounded-2xl border-dashed border-white/10",children:[T.jsx(ov,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),T.jsx("p",{className:"font-medium",children:"No lessons yet."}),T.jsx("p",{className:"text-xs opacity-70",children:"Create a Lesson Module to add text and quizzes."})]})]})]})]})}function YJ(){const{moduleId:t}=yd(),e=Ti(),{db:n}=Di(),{currentUser:r}=fs(),[i,o]=W.useState("Loading..."),[h,m]=W.useState(""),[y,g]=W.useState([]),[E,S]=W.useState(null),N=D=>{const j=r?.ipAddress,B=window.location.port?`:${window.location.port}`:"",H=window.location.protocol;return`${j?`${H}//${j}${B}`:window.location.origin}/play/${D}`};W.useEffect(()=>{if(!n||!t)return;(async()=>{const j=await n.content.findOne(t).exec();j&&(o(j.get("title")),m(j.get("subjectId")));const H=(await n.content.find().exec()).filter(V=>V.moduleId===t);g(H.sort((V,se)=>se.order-V.order))})()},[n,t]);const I=()=>{e(h?`/teacher/subject/${h}`:"/teacher")},R=async D=>{if(!n||!confirm("Delete this content?"))return;const j=await n.content.findOne(D).exec();j&&await j.remove(),window.location.reload()};return T.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg",children:[T.jsxs("header",{className:"flex items-center gap-4 mb-8",children:[T.jsx("button",{onClick:I,className:"p-2 glass-panel rounded-xl text-slate-400 hover:text-white",children:T.jsx(cs,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-2xl font-bold text-white",children:i}),T.jsx("p",{className:"text-xs text-slate-400",children:"Lesson Module"})]})]}),T.jsx(co,{children:E&&T.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:T.jsxs(en.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-8 max-w-sm w-full text-center relative",children:[T.jsx("button",{onClick:()=>S(null),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:T.jsx(xd,{className:"w-6 h-6"})}),T.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Scan to Play"}),T.jsx("p",{className:"text-slate-500 mb-6 text-sm",children:E.title}),T.jsx("div",{className:"bg-white p-4 rounded-xl border-2 border-slate-100 inline-block mb-4",children:T.jsx(l8,{value:N(E.id),size:200,className:"h-auto w-full max-w-full"})}),T.jsxs("p",{className:"text-xs text-slate-400 font-mono",children:["ID: ",E.id.slice(0,8),"..."]})]})})}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex justify-end gap-2",children:[T.jsxs("button",{onClick:()=>e("/teacher/create?type=text&moduleId="+t+"&subjectId="+h),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg hover:scale-105 transition-transform",children:[T.jsx(ih,{className:"w-4 h-4"})," New Text/Note"]}),T.jsxs("button",{onClick:()=>e("/teacher/create?type=quiz&moduleId="+t+"&subjectId="+h),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg hover:scale-105 transition-transform",children:[T.jsx(ih,{className:"w-4 h-4"})," New Quiz"]})]}),T.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[y.map(D=>T.jsxs(en.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-panel p-4 rounded-xl flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${D.type==="quiz"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:D.type==="quiz"?T.jsx(Db,{className:"w-5 h-5"}):T.jsx(bd,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-bold text-white",children:D.title}),T.jsx("p",{className:"text-xs text-slate-400 capitalize",children:D.type==="text"?"Note/Page":"Quiz"})]})]}),T.jsxs("div",{className:"flex gap-2",children:[D.type==="quiz"&&T.jsx("button",{onClick:()=>S(D),className:"p-2 text-slate-500 hover:text-blue-400 transition-colors",title:"Generate QR",children:T.jsx(l5,{className:"w-4 h-4"})}),T.jsx("button",{onClick:()=>e(`/teacher/create?type=${D.type}&editId=${D.id}&moduleId=${t}&subjectId=${h}`),className:"p-2 text-slate-500 hover:text-white transition-colors",children:T.jsx(_9,{className:"w-4 h-4"})}),T.jsx("button",{onClick:()=>R(D.id),className:"p-2 text-slate-500 hover:text-red-400 transition-colors",children:T.jsx(wd,{className:"w-4 h-4"})})]})]},D.id)),y.length===0&&T.jsxs("div",{className:"text-center text-slate-500 py-12 glass-panel rounded-2xl border-dashed border-white/10",children:[T.jsx("p",{className:"font-medium",children:"No content in this module yet."}),T.jsx("p",{className:"text-xs opacity-70",children:"Add a Text Page or Quiz."})]})]})]})]})}const XJ="/GramShiksha/assets/math-B6MsHDbu.png",WJ="/GramShiksha/assets/science-Dw2e4aeG.png",QJ="/GramShiksha/assets/english-DIlA6yIJ.png",ZJ="/GramShiksha/assets/marathi-D1BrB11J.png",JJ="/GramShiksha/assets/hindi-OjzyUH1Q.png",x6="/GramShiksha/assets/history-DRH5x8lH.png",eee="/GramShiksha/assets/geography-nRdUz3S8.png",tee="/GramShiksha/assets/defense-B1qL6iQU.png",nee="/GramShiksha/assets/language-CL4LzxDH.png",ree=t=>{const e=t.toLowerCase();return e.includes("english")||e.includes("")?QJ:e.includes("marathi")||e.includes("")?ZJ:e.includes("hindi")||e.includes("")?JJ:e.includes("math")||e.includes("")?XJ:e.includes("sci")||e.includes("")||e.includes("evs")||e.includes("")?WJ:e.includes("history")||e.includes("hist")||e.includes("")?x6:e.includes("geo")||e.includes("")?eee:e.includes("defense")||e.includes("defenc")||e.includes("")?tee:e.includes("civic")||e.includes("polit")||e.includes("state")||e.includes("social")?x6:nee};function E6(){const{db:t}=Di(),{currentUser:e}=fs(),n=Ti(),{subjectId:r}=yd(),[i,o]=W.useState(null),[h,m]=W.useState([]),[y,g]=W.useState([]),[E,S]=W.useState({}),[N,I]=W.useState(!0);return W.useEffect(()=>{if(!t||!e)return;(async()=>{if(r){const D=await t.content.findOne(r).exec();D&&o(D.toJSON());const j=await t.content.find({selector:{subjectId:r},sort:[{createdAt:"asc"}]}).exec();g(j.map(V=>V.toJSON()));const B=await t.progress.find({selector:{userId:e.id}}).exec(),H={};B.forEach(V=>{H[V.get("levelId")]=V.toJSON()}),S(H)}else{const j=(await t.content.find().exec()).filter(ee=>ee.type==="subject"&&(ee.classId===e.classId||ee.classId===e.teacherClassId)&&(ee.medium||"english")===(e.medium||"english")),B=new Map;j.forEach(ee=>{const J=B.get(ee.title);J?ee.medium&&!J.medium&&B.set(ee.title,ee):B.set(ee.title,ee)});const H=Array.from(B.values()),V=["English","Marathi","Hindi","Mathematics","Science","History","Geography","Defense"],se=ee=>{const J=V.findIndex(F=>ee.includes(F));return J===-1?99:J};H.sort((ee,J)=>se(ee.title)-se(J.title)),m(H.map(ee=>ee.toJSON()))}I(!1)})()},[t,r,e]),N?T.jsx("div",{className:"min-h-screen grid place-items-center text-cyan-400 animate-pulse",children:"Syncing Knowledge..."}):r?i?T.jsxs("div",{className:"min-h-screen p-6 pb-24 font-sans relative",children:[T.jsx("div",{className:"cosmic-bg"}),T.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[T.jsx("button",{onClick:()=>n("/learn"),className:"p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-colors text-slate-300 hover:text-white",children:T.jsx(cs,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold text-white leading-tight",children:i.title}),T.jsxs("p",{className:"text-sm text-slate-400",children:[y.length," Modules  Class ",e?.classId||"N/A"]})]})]}),T.jsxs("div",{className:"space-y-4 max-w-3xl mx-auto",children:[y.length===0&&T.jsxs("div",{className:"text-center py-16 glass-panel rounded-3xl border-dashed border-white/10",children:[T.jsx("p",{className:"text-slate-500 font-medium",children:"No lessons added yet."}),T.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Wait for your teacher to publish content."})]}),y.map((R,D)=>{const B=!!E[R.id]?.completed;return T.jsxs(en.button,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:D*.05},disabled:!1,onClick:()=>n(`/play/${R.id}`),className:`w-full group relative overflow-hidden rounded-3xl border transition-all duration-300 text-left p-6 flex items-center gap-6
                                ${B?"bg-slate-900/40 border-green-500/30 hover:border-green-500/60":"glass-panel border-white/5 hover:border-cyan-500/50 hover:bg-white/5 hover:shadow-[0_0_30px_rgba(6,182,212,0.15)] hover:-translate-y-1"}
                            `,children:[T.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-xl font-bold shadow-inner transition-colors duration-300
                                ${B?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-white/5 text-cyan-400 border border-white/10 group-hover:bg-cyan-500/20 group-hover:border-cyan-500/30"}
                            `,children:B?T.jsx(rh,{className:"w-6 h-6"}):T.jsx("span",{className:"text-xl font-black opacity-50 group-hover:opacity-100",children:D+1})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:`text-xl font-bold mb-1 transition-colors ${B?"text-slate-300":"text-white group-hover:text-cyan-400"}`,children:R.title}),T.jsx("p",{className:"text-sm text-slate-400 font-medium line-clamp-1 group-hover:text-slate-300 transition-colors",children:R.description||"Tap to start this lesson"})]}),T.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center border transition-all duration-300
                                ${B?"bg-white/5 border-white/5 text-slate-600":"bg-cyan-500 text-black border-cyan-400 shadow-[0_0_15px_rgba(6,182,212,0.4)] group-hover:scale-110 group-hover:shadow-[0_0_25px_rgba(6,182,212,0.6)]"}
                            `,children:B?T.jsx(rh,{className:"w-5 h-5"}):T.jsx(YS,{className:"w-5 h-5 fill-current ml-1"})})]},R.id)})]})]}):T.jsxs("div",{className:"p-10 text-center text-slate-400",children:["Subject not found. ",T.jsx("button",{onClick:()=>n("/dashboard"),className:"text-cyan-400 underline",children:"Go Home"})]}):T.jsxs("div",{className:"min-h-screen p-6 pb-24 font-sans relative animate-fade-in",children:[T.jsx("div",{className:"cosmic-bg"}),T.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[T.jsx("button",{onClick:()=>n("/dashboard"),className:"p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-colors text-slate-300 hover:text-white",children:T.jsx(cs,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"My Class"}),T.jsxs("p",{className:"text-sm text-slate-400",children:["Class ",e?.classId||"N/A","  ",h.length," Subjects"]})]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl mx-auto",children:h.map((R,D)=>T.jsxs(en.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:D*.05},onClick:()=>n(`/learn/${R.id}`),className:"group relative h-48 rounded-3xl overflow-hidden cursor-pointer border border-white/5 shadow-2xl hover:scale-[1.02] transition-transform",children:[T.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${ree(R.title)})`}}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent/30"}),T.jsxs("div",{className:"absolute bottom-0 left-0 p-6 w-full",children:[T.jsx("h3",{className:"text-2xl font-black text-white mb-1 group-hover:text-cyan-400 transition-colors drop-shadow-md",children:R.title}),T.jsx("div",{className:"flex items-center gap-2",children:T.jsxs("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-white/20 text-white backdrop-blur-md uppercase tracking-wider",children:["Standard ",R.classId]})})]}),T.jsx("div",{className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-4 group-hover:translate-x-0",children:T.jsx(YS,{className:"w-5 h-5 text-white fill-white"})})]},R.id))})]})}function iee(){const{db:t}=Di(),{currentUser:e}=fs(),n=Ti(),{t:r}=xh(),[i,o]=W.useState([]),[h,m]=W.useState({}),[y,g]=W.useState(!0);return W.useEffect(()=>{if(!t||!e)return;(async()=>{const N=(await t.content.find({selector:{isHomework:{$eq:!0}}}).exec()).filter(D=>{const j=D.classId===e.classId,B=D.classId===e.teacherClassId;return j||B});o(N.map(D=>D.toJSON()));const I=await t.progress.find({selector:{userId:e.id}}).exec(),R={};I.forEach(D=>{R[D.get("levelId")]=D.toJSON()}),m(R),g(!1)})()},[t,e]),T.jsxs("div",{className:"min-h-screen p-6 pb-24 aurora-bg font-sans",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[T.jsx("button",{onClick:()=>n("/dashboard"),className:"p-3 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/5 transition-colors text-slate-300 hover:text-white",children:T.jsx(cs,{className:"w-6 h-6"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-black bg-gradient-to-r from-purple-400 via-pink-400 to-red-400 bg-clip-text text-transparent",children:r("nav.homework")}),T.jsxs("p",{className:"text-sm text-slate-400 font-medium",children:[i.length," ",r("homework.pending_count")]})]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto",children:y?T.jsx("div",{className:"col-span-full py-20 text-center animate-pulse text-purple-400 font-bold",children:r("homework.checking")}):i.length===0?T.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-24 text-slate-500 gap-6 glass-panel rounded-3xl border-dashed border-white/10",children:[T.jsx("div",{className:"p-6 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-full shadow-[0_0_30px_rgba(168,85,247,0.2)]",children:T.jsx(nh,{className:"w-12 h-12 text-purple-400"})}),T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h3",{className:"text-white font-bold text-xl",children:r("homework.all_caught_up")}),T.jsx("p",{className:"text-sm opacity-60 max-w-xs mx-auto",children:r("homework.no_homework_desc")})]})]}):T.jsx(co,{children:i.map((E,S)=>{const N=!!h[E.id]?.score,I=h[E.id]?.score;return T.jsxs(en.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:S*.05},onClick:()=>n(`/play/${E.id}`),className:`group relative text-left w-full h-full p-6 rounded-3xl border transition-all duration-300
                                        ${N?"bg-slate-900/40 border-green-500/30 hover:border-green-500/60":"glass-panel border-purple-500/30 hover:border-purple-500/80 hover:shadow-[0_0_30px_rgba(168,85,247,0.15)] hover:-translate-y-1"}
                                    `,children:[T.jsxs("div",{className:"flex justify-between items-start mb-4",children:[T.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl shadow-inner
                                            ${E.type==="quiz"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}
                                        `,children:E.type==="quiz"?T.jsx(Db,{className:"w-6 h-6"}):T.jsx(bd,{className:"w-6 h-6"})}),N?T.jsxs("div",{className:"flex flex-col items-end",children:[T.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-500/20 text-green-400 text-xs font-bold border border-green-500/30 flex items-center gap-1",children:[T.jsx(rh,{className:"w-3 h-3"})," ",r("homework.done")]}),I!==void 0&&T.jsx("span",{className:"text-xs font-bold text-slate-400 mt-1",children:r("homework.score_percent",{score:I})})]}):T.jsxs("span",{className:"px-3 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs font-bold border border-purple-500/30 flex items-center gap-1 animate-pulse",children:[T.jsx(rv,{className:"w-3 h-3"})," ",r("homework.pending")]})]}),T.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-purple-400 group-hover:to-pink-400 transition-colors",children:E.title}),T.jsx("p",{className:"text-sm text-slate-400 line-clamp-2 leading-relaxed mb-4",children:E.description||r("homework.default_desc")}),T.jsxs("div",{className:"border-t border-white/5 pt-4 flex items-center justify-between text-xs font-medium text-slate-500 group-hover:text-purple-300 transition-colors",children:[T.jsx("span",{children:new Date(E.createdAt||Date.now()).toLocaleDateString(void 0,{month:"short",day:"numeric"})}),T.jsxs("span",{className:"flex items-center gap-1",children:[r("homework.open")," "]})]})]},E.id)})})})]})}function see(){const{db:t}=Di(),{currentUser:e}=fs(),n=Ti(),{t:r}=xh(),[i,o]=W.useState({totalStars:0,totalScore:0,lessonsCompleted:0});return W.useEffect(()=>{if(!t||!e)return;(async()=>{const m=await t.progress.find({selector:{userId:e.id}}).exec();let y=0,g=0,E=0;m.forEach(S=>{y+=S.get("stars"),g+=S.get("score"),E++}),o({totalStars:y,totalScore:g,lessonsCompleted:E})})()},[t,e]),T.jsxs("div",{className:"min-h-screen p-6 pb-24 space-y-8 animate-fade-in",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:()=>n("/dashboard"),className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors",children:T.jsx(cs,{className:"w-5 h-5 text-white"})}),T.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:r("nav.achievements")})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"glass-panel p-6 flex flex-col items-center justify-center gap-2 text-center",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center text-yellow-500 mb-2",children:T.jsx(LD,{className:"w-6 h-6"})}),T.jsx("h3",{className:"text-2xl font-bold text-white",children:i.totalStars}),T.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:"Total Stars"})]}),T.jsxs("div",{className:"glass-panel p-6 flex flex-col items-center justify-center gap-2 text-center",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-500 mb-2",children:T.jsx(h5,{className:"w-6 h-6"})}),T.jsx("h3",{className:"text-2xl font-bold text-white",children:i.totalScore}),T.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:"Total XP"})]}),T.jsx("div",{className:"glass-panel p-6 col-span-2 flex items-center justify-between",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-500",children:T.jsx(R9,{className:"w-6 h-6"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("h3",{className:"text-lg font-bold text-white",children:"Learner"}),T.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.lessonsCompleted," Lessons Completed"]})]})]})})]}),T.jsx("div",{className:"text-center text-xs text-muted-foreground pt-8",children:"More achievements coming soon!"})]})}function aee(){const t=Ti(),{t:e}=xh();return T.jsxs("div",{className:"min-h-screen p-6 pb-24 space-y-6 animate-fade-in text-center",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors",children:T.jsx(cs,{className:"w-5 h-5 text-white"})}),T.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-orange-400 to-red-400 bg-clip-text text-transparent",children:e("nav.village")})]}),T.jsxs("div",{className:"py-12 space-y-6",children:[T.jsx("div",{className:"w-32 h-32 mx-auto rounded-full bg-orange-500/10 border border-orange-500/30 flex items-center justify-center animate-pulse",children:T.jsx(o5,{className:"w-12 h-12 text-orange-500"})}),T.jsx("h2",{className:"text-xl font-bold text-white",children:"Village Stats Coming Soon"}),T.jsx("p",{className:"text-muted-foreground max-w-xs mx-auto text-sm",children:"Compete with other villages! This feature will aggregate scores from all students in your local area."}),T.jsxs("div",{className:"glass-panel p-4 rounded-xl max-w-sm mx-auto opacity-50",children:[T.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-2 mb-2",children:[T.jsx("span",{className:"text-sm font-bold",children:"1. Punawale"}),T.jsx("span",{className:"text-sm text-yellow-400 font-mono",children:"12,450 XP"})]}),T.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-2 mb-2",children:[T.jsx("span",{className:"text-sm font-bold",children:"2. Marunji"}),T.jsx("span",{className:"text-sm text-yellow-400 font-mono",children:"11,200 XP"})]}),T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-sm font-bold",children:"3. Hinjewadi"}),T.jsx("span",{className:"text-sm text-yellow-400 font-mono",children:"9,800 XP"})]})]})]})]})}function oee(){const t=Ti(),[e,n]=W.useState({present:0,percentage:0}),[r,i]=W.useState([]),[o]=W.useState(new Date().toLocaleString("default",{month:"long",year:"numeric"}));return W.useEffect(()=>{const h=JSON.parse(localStorage.getItem("attendance_log")||"[]"),m=new Date,y=m.getFullYear(),g=m.getMonth(),E=new Date(y,g+1,0).getDate(),S=[];let N=0,I=0;for(let D=1;D<=E;D++){const j=`${y}-${String(g+1).padStart(2,"0")}-${String(D).padStart(2,"0")}`,H=new Date(y,g,D).getDay()===0,V=D>m.getDate(),se=h.includes(j);se&&N++,!H&&!V&&I++,S.push({day:D,date:j,status:V?"future":H?"holiday":se?"present":"absent"})}const R=I>0?Math.round(N/I*100):0;i(S),n({present:N,percentage:Math.min(R,100)})},[]),T.jsx("div",{className:"min-h-screen p-4 pb-24 animate-fade-in aurora-bg",children:T.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[T.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[T.jsx("button",{onClick:()=>t("/dashboard"),className:"p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors backdrop-blur-md",children:T.jsx(cs,{className:"w-5 h-5 text-white"})}),T.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:"Attendance"})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"glass-panel p-4 flex flex-col items-center justify-center min-h-[120px]",children:[T.jsxs("span",{className:"text-4xl font-black text-green-400 drop-shadow-lg",children:[e.percentage,"%"]}),T.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-widest mt-2 font-bold",children:"Rate"})]}),T.jsxs("div",{className:"glass-panel p-4 flex flex-col items-center justify-center min-h-[120px]",children:[T.jsx("span",{className:"text-4xl font-black text-white drop-shadow-lg",children:e.present}),T.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-widest mt-2 font-bold",children:"Days"})]})]}),T.jsxs("div",{className:"glass-panel p-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[T.jsx(s5,{className:"w-5 h-5 text-cyan-400"}),o]}),T.jsx("div",{className:"flex gap-2 text-[10px] uppercase font-bold text-slate-500",children:T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]"})," Present"]})})]}),T.jsxs("div",{className:"grid grid-cols-7 gap-3",children:[["S","M","T","W","T","F","S"].map(h=>T.jsx("div",{className:"text-center text-xs text-slate-500 font-bold mb-1",children:h},h)),r.map(h=>T.jsxs("div",{className:`aspect-square rounded-xl flex items-center justify-center text-sm font-bold transition-all relative overflow-hidden
                                    ${h.status==="present"?"bg-gradient-to-br from-green-500/20 to-emerald-500/20 text-emerald-300 border border-green-500/30 shadow-[0_0_12px_rgba(16,185,129,0.15)]":h.status==="absent"?"bg-red-500/5 text-red-500/30":h.status==="holiday"?"bg-white/5 text-slate-600 border border-dashed border-white/5":"opacity-20 text-slate-600"}
                                `,children:[h.status==="present"&&T.jsx("div",{className:"absolute inset-0 bg-green-400/10 blur-xl"}),h.day]},h.day))]})]}),T.jsx("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/20 text-center",children:T.jsx("p",{className:"text-purple-300 text-xs",children:"Sync your device daily to mark attendance automatically."})})]})})}const Wi=({children:t})=>{const{currentUser:e}=fs();return e?T.jsx(T.Fragment,{children:t}):T.jsx(BM,{to:"/",replace:!0})},lee=uD([{path:"/",element:T.jsx(YF,{}),children:[{index:!0,element:T.jsx(OG,{})},{path:"dashboard",element:T.jsx(Wi,{children:T.jsx(RG,{})})},{path:"play/:levelId",element:T.jsx(Wi,{children:T.jsx(kG,{})})},{path:"sync",element:T.jsx(Wi,{children:T.jsx(FK,{})})},{path:"settings",element:T.jsx(Wi,{children:T.jsx(zK,{})})},{path:"learn",element:T.jsx(Wi,{children:T.jsx(E6,{})})},{path:"learn/:subjectId",element:T.jsx(Wi,{children:T.jsx(E6,{})})},{path:"homework",element:T.jsx(Wi,{children:T.jsx(iee,{})})},{path:"achievements",element:T.jsx(Wi,{children:T.jsx(see,{})})},{path:"village",element:T.jsx(Wi,{children:T.jsx(aee,{})})},{path:"leaderboard",element:T.jsx(Wi,{children:T.jsxs("div",{className:"p-6 pb-24 space-y-6",children:[T.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-400",children:"Class Leaderboard"}),T.jsx(vO,{})]})})}]},{path:"attendance",element:T.jsx(Wi,{children:T.jsx(oee,{})})},{path:"/create-profile",element:T.jsx(IG,{})},{path:"/teacher",element:T.jsx(Wi,{children:T.jsx(HK,{})})},{path:"/teacher/create",element:T.jsx(Wi,{children:T.jsx(GJ,{})})},{path:"/teacher/class/:classId",element:T.jsx(Wi,{children:T.jsx(KJ,{})})},{path:"/teacher/subject/:subjectId",element:T.jsx(Wi,{children:T.jsx($J,{})})},{path:"/teacher/module/:moduleId",element:T.jsx(Wi,{children:T.jsx(YJ,{})})}]),cee={title:"AlgoSensei",tagline:"Offline Learning AI"},uee={home:"Home",my_class:"My Class",subjects_lessons:"Subjects & Lessons",learn:"Learn",sync:"Sync",settings:"Settings",homework:"Homework",pending_assignments:"Pending Assignments",leaderboard:"Leaderboard",class_rankings:"Class Rankings",village_rank:"Village Rank",community_standing:"Community Standing",recently_sync:"Recently Sync",sync_history:"Sync History",attendance:"Attendance",track_presence:"Track Presence",achievements:"Achievements",village:"Village"},hee={welcome:"Welcome back, {{name}}!",hello:"Hello, {{name}}",ready:"Ready to explore?",stars:"Stars",score:"Score",xp:"XP",system_energy:"System Energy",elite_status:"Elite Status",star_currency:"Star Currency",sync_btn:"Sync Data",logout_btn:"Log Out"},fee={title:"Settings",language:"Language",reset_data:"Reset All Data",teacher_ip:"Teacher Hotspot IP",save:"Save"},dee={portal:"Teacher Portal",dashboard:"Dashboard",create_content:"Create Content"},pee={pending_count:"Assignments Pending",checking:"Checking assignments...",all_caught_up:"All Caught Up!",no_homework_desc:"No homework assigned yet. Enjoy your free time!",done:"Done",pending:"Pending",score_percent:"{{score}}% Score",open:"Open Assignment",default_desc:"Assigned by your teacher. Complete to earn XP!"},mee={app:cee,nav:uee,dashboard:hee,settings:fee,teacher:dee,homework:pee},gee={title:"",tagline:"  "},yee={home:"",my_class:" ",subjects_lessons:"  ",learn:"",sync:"",settings:"",homework:"",pending_assignments:" ",leaderboard:"",class_rankings:" ",village_rank:" ",community_standing:" ",recently_sync:"   ",sync_history:" ",attendance:"",track_presence:"  ",achievements:"",village:""},vee={welcome:"   , {{name}}!",hello:", {{name}}",ready:"   ?",stars:"",score:"",xp:"XP",system_energy:" ",elite_status:" ",star_currency:" ",sync_btn:"  ",logout_btn:" "},bee={title:"",language:"",reset_data:"   ",teacher_ip:"  ",save:""},wee={portal:" ",dashboard:"",create_content:" "},xee={pending_count:" ",checking:"     ...",all_caught_up:"   !",no_homework_desc:"         !",done:"",pending:"",score_percent:"{{score}}% ",open:" ",default_desc:"     XP     !"},Eee={app:gee,nav:yee,dashboard:vee,settings:bee,teacher:wee,homework:xee},See={title:"",tagline:"  "},Aee={home:"",my_class:" ",subjects_lessons:"  ",learn:"",sync:"",settings:"",homework:"",pending_assignments:" ",leaderboard:"",class_rankings:" ",village_rank:" ",community_standing:" ",recently_sync:" ",sync_history:" ",attendance:"",track_presence:"  ",achievements:"",village:""},Cee={welcome:"  , {{name}}!",hello:", {{name}}",ready:"   ?",stars:"",score:"",xp:"XP",system_energy:" ",elite_status:" ",star_currency:" ",sync_btn:"  ",logout_btn:" "},Tee={title:"",language:"",reset_data:"   ",teacher_ip:"  ",save:" "},Nee={portal:" ",dashboard:"",create_content:"  "},_ee={pending_count:" ",checking:"  ...",all_caught_up:"  !",no_homework_desc:"   .     !",done:"",pending:"",score_percent:"{{score}}% ",open:" ",default_desc:"  . XP   !"},Oee={app:See,nav:Aee,dashboard:Cee,settings:Tee,teacher:Nee,homework:_ee};ds.use(UF).init({resources:{en:{translation:mee},hi:{translation:Eee},mr:{translation:Oee}},lng:localStorage.getItem("appLanguage")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});function Iee(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:h}=t;let m,y;const g=async(S=!0)=>{await y};async function E(){if("serviceWorker"in navigator){if(m=await m1(async()=>{const{Workbox:S}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:S}},[]).then(({Workbox:S})=>new S("/GramShiksha/sw.js",{scope:"/GramShiksha/",type:"classic"})).catch(S=>{h?.(S)}),!m)return;m.addEventListener("activated",S=>{(S.isUpdate||S.isExternal)&&window.location.reload()}),m.addEventListener("installed",S=>{S.isUpdate||r?.()}),m.register({immediate:e}).then(S=>{o?o("/GramShiksha/sw.js",S):i?.(S)}).catch(S=>{h?.(S)})}}return y=E(),g}Iee({immediate:!0});$I.createRoot(document.getElementById("root")).render(T.jsx(aF,{children:T.jsx(oF,{children:T.jsx(SD,{router:lee})})}))});export default Ree();
